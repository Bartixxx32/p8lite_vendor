/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __fastcall _cxa_finalize(_DWORD); weak
_DWORD *j_exif_mem_new_default();
int __fastcall j_exif_content_new_mem(int a1);
int __fastcall j_exif_mem_unref(int result);
int __fastcall j_exif_mem_alloc(int a1, int a2);
_DWORD *__fastcall j_exif_mem_ref(_DWORD *result);
int __fastcall j_exif_mem_free(int result, int a2);
int __fastcall j_exif_content_free(int result);
int __fastcall j_exif_entry_unref(int result);
int __fastcall j_exif_log_unref(int result);
// int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD); weak
// int printf(const char *format, ...);
int __fastcall j_exif_entry_dump(int a1, int a2);
// int __fastcall _stack_chk_fail(_DWORD); weak
int __fastcall j_exif_tag_get_name(int a1);
int __fastcall j_exif_log(int result, int a2);
int __fastcall j_exif_mem_realloc(int a1, int a2, int a3);
int __fastcall j_exif_entry_ref(int result);
// int __fastcall _aeabi_memmove(_DWORD); weak
_DWORD *__fastcall j_exif_mem_ref_0(_DWORD *result);
signed int __fastcall j_exif_content_get_ifd(int a1);
signed int __fastcall j_exif_data_get_data_type(int a1);
unsigned int __fastcall j_exif_entry_fix(unsigned int result, int a2, int a3, int a4);
signed int __fastcall j_exif_tag_get_support_level_in_ifd(int a1, unsigned int a2, unsigned int a3);
int __fastcall j_exif_ifd_get_name(int a1);
int __fastcall j_exif_content_remove_entry(int result, int a2);
signed int j_exif_tag_table_count();
int __fastcall j_exif_tag_table_get_tag(unsigned int a1);
int __fastcall j_exif_tag_get_name_in_ifd(int a1, unsigned int a2);
int j_exif_entry_new();
int __fastcall j_exif_content_add_entry(int result, int a2);
int __fastcall j_exif_entry_initialize(int result, signed int a2, int a3, int a4, int a5, int a6, int a7);
int __fastcall j_exif_data_new_mem(int a1);
int __fastcall j_exif_data_free(int result);
int __fastcall j_exif_content_unref(int result);
int __fastcall j_exif_mnote_data_unref(int result);
unsigned int __fastcall j_exif_data_load_data(unsigned int result, int a2, unsigned int a3);
// int memcmp(const void *s1, const void *s2, size_t n);
int __fastcall j_exif_get_short(int a1, int a2);
int j_exif_get_long();
_DWORD *__fastcall j_exif_content_get_entry(int a1, int a2);
int __fastcall j_exif_mnote_data_olympus_identify(int a1, int a2);
_DWORD *__fastcall j_exif_mnote_data_olympus_new(int a1);
signed int __fastcall j_exif_mnote_data_canon_identify(int *a1);
_DWORD *__fastcall j_exif_mnote_data_canon_new(int a1, int a2);
signed int __fastcall j_exif_mnote_data_fuji_identify(int a1, int a2);
_DWORD *__fastcall j_exif_mnote_data_fuji_new(int a1);
signed int __fastcall j_exif_mnote_data_pentax_identify(int a1, int a2);
_DWORD *__fastcall j_exif_mnote_data_pentax_new(int a1);
_DWORD *__fastcall j_exif_mnote_data_log(_DWORD *result, _DWORD *a2);
int __fastcall j_exif_mnote_data_set_byte_order(int result);
int __fastcall j_exif_mnote_data_set_offset(int result);
int __fastcall j_exif_mnote_data_load(int result);
int __fastcall j_exif_data_fix(int result);
int __fastcall j_exif_entry_new_mem(int a1);
int __fastcall j_exif_format_get_size(int a1);
// int __cdecl _aeabi_memcpy(_DWORD, _DWORD, _DWORD, _DWORD);
unsigned int __fastcall j_exif_content_fix(int a1);
int __fastcall j_exif_set_sshort(int result, int a2, __int16 a3);
int j_exif_set_long();
int __fastcall j_exif_mnote_data_save(int result);
// void qsort(void *base, size_t nmemb, size_t size, __compar_fn_t compar);
int j_exif_loader_new();
int __fastcall j_exif_loader_write_file(int a1, const char *a2);
_DWORD *__fastcall j_exif_loader_get_data(int a1);
int __fastcall j_exif_loader_unref(int result);
int __fastcall j_exif_content_dump(int a1, int a2);
unsigned int __fastcall j_exif_content_foreach_entry(unsigned int result, void (__fastcall *a2)(_DWORD, int), int a3);
_DWORD *__fastcall j_exif_content_log(_DWORD *result, _DWORD *a2);
unsigned int __fastcall j_exif_array_set_byte_order(int a1, int a2, int a3, int a4, int a5);
int __fastcall j_exif_entry_free(int result);
int __fastcall j_exif_data_get_byte_order(int a1);
int __fastcall j_exif_get_srational(int a1, int a2, int a3);
int __fastcall j_exif_set_srational(int result, int a2, unsigned int a3, unsigned int a4);
int __fastcall j_exif_format_get_name(int a1);
int __fastcall j_exif_get_sshort(int a1, int a2);
int __fastcall j_exif_get_slong(int a1, int a2);
int __fastcall j_exif_get_srational_0(int a1, int a2, int a3);
int __fastcall j_exif_set_srational_0(int result, int a2, unsigned int a3, unsigned int a4);
int __fastcall j_exif_data_get_log(int a1);
int __fastcall j_exif_logv(int result, int a2);
char *__fastcall j_exif_entry_get_value(int a1, char *a2, int a3);
// int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall _strlen_chk(_DWORD, _DWORD); weak
// int __fastcall _strncat_chk(_DWORD, _DWORD, _DWORD, _DWORD); weak
// char *strncpy(char *dest, const char *src, size_t n);
int __fastcall j_exif_convert_utf16_to_utf8(int result, _WORD *a2, signed int a3);
// int __fastcall _strncpy_chk2(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall _memchr_chk(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int isprint(int);
// int __fastcall exp2(_DWORD); weak
// int strncmp(const char *s1, const char *s2, size_t n);
// double log10(double x);
// time_t time(time_t *timer);
// struct tm *localtime_r(const time_t *timer, struct tm *tp);
// FILE *fopen(const char *filename, const char *modes);
// size_t fread(void *ptr, size_t size, size_t n, FILE *stream);
int __fastcall j_exif_loader_write(int a1, int a2, unsigned int a3, int *a4);
// int fclose(FILE *stream);
int __fastcall j_exif_loader_reset(int result);
int __fastcall j_exif_loader_new_mem(int a1);
_DWORD *__fastcall j_exif_data_log(_DWORD *result, _DWORD *a2);
int __fastcall j_exif_log_new_mem(int a1);
int __fastcall j_exif_log_free(int result);
// void *calloc(size_t nmemb, size_t size);
// void *realloc(void *ptr, size_t size);
// void free(void *ptr);
// void *bsearch(const void *key, const void *base, size_t nmemb, size_t size, __compar_fn_t compar);
int __fastcall j_exif_tag_get_title_in_ifd(int a1, unsigned int a2);
_BYTE *__fastcall j_exif_tag_get_description_in_ifd(int a1, unsigned int a2);
// int strcmp(const char *s1, const char *s2);
int __fastcall j_exif_set_slong(int result, int a2, unsigned int a3);
_DWORD *__fastcall j_exif_mnote_data_construct(_DWORD *result, int a2);
int __fastcall j_mnote_canon_tag_get_name(int a1);
signed int __fastcall j_mnote_canon_entry_count_values(_DWORD *a1);
unsigned int __fastcall j_mnote_canon_tag_get_name_sub(int a1, int a2, char a3);
unsigned int __fastcall j_mnote_canon_tag_get_title_sub(int a1, int a2, char a3);
_BYTE *__fastcall j_mnote_canon_tag_get_description(int a1);
char *__fastcall j_mnote_canon_entry_get_value(int a1, unsigned int a2, char *a3, int a4);
int __fastcall j_mnote_olympus_tag_get_name(int a1);
int __fastcall j_mnote_olympus_tag_get_title(int a1);
_BYTE *__fastcall j_mnote_olympus_tag_get_description(int a1);
char *__fastcall j_mnote_olympus_entry_get_value(int a1, char *a2, int a3);
// int _sprintf_chk(_DWORD, _DWORD, _DWORD, const char *, ...); weak
int __fastcall j_mnote_fuji_tag_get_name(int a1);
int __fastcall j_mnote_fuji_tag_get_title(int a1);
_BYTE *__fastcall j_mnote_fuji_tag_get_description(int a1);
char *__fastcall j_mnote_fuji_entry_get_value(int a1, char *a2, int a3);
int __fastcall j_mnote_pentax_tag_get_name(int a1);
int __fastcall j_mnote_pentax_tag_get_title(int a1);
_BYTE *__fastcall j_mnote_pentax_tag_get_description(int a1);
char *__fastcall j_mnote_pentax_entry_get_value(int a1, char *a2, int a3);
// void abort(void);
// int fprintf(FILE *stream, const char *format, ...);
// int __fastcall _gnu_Unwind_Find_exidx(_DWORD, _DWORD); weak
int sub_72F8();
int (*__fastcall sub_7318(int (*result)(void)))(void);
const char *__fastcall exif_byte_order_get_name(int a1);
int exif_content_new();
int __fastcall exif_content_new_mem(int a1);
_DWORD *__fastcall exif_content_ref(int a1);
int __fastcall exif_content_unref(int result);
int __fastcall exif_content_free(int result);
int __fastcall exif_content_dump(int a1, int a2);
int __fastcall exif_content_add_entry(int result, int a2);
_DWORD *__fastcall exif_content_get_entry(int a1, int a2);
int __fastcall exif_content_remove_entry(int result, int a2);
unsigned int __fastcall exif_content_foreach_entry(unsigned int result, void (__fastcall *a2)(_DWORD, int), int a3);
_DWORD *__fastcall exif_content_log(_DWORD *result, _DWORD *a2);
signed int __fastcall exif_content_get_ifd(int a1);
unsigned int __fastcall exif_content_fix(int a1);
int __fastcall exif_data_get_mnote_data(int a1);
int exif_data_new();
int __fastcall exif_data_new_mem(int a1);
int __fastcall exif_data_free(int result);
int __fastcall exif_data_set_option(int result, int a2);
int __fastcall exif_data_set_data_type(int result, int a2);
int __fastcall exif_data_new_from_data(int a1, unsigned int a2);
unsigned int __fastcall exif_data_load_data(unsigned int result, int a2, unsigned int a3);
int __fastcall sub_7F1C(int result, unsigned int a2, int a3, unsigned int a4, unsigned int a5, unsigned int a6);
int __fastcall exif_data_fix(int result);
int __fastcall exif_data_save_data(int result, int *a2, int *a3);
int __fastcall sub_859C(int a1, int a2);
int __fastcall sub_85E4(int result, int a2, int *a3, int *a4, int a5);
_DWORD *__fastcall exif_data_new_from_file(const char *a1);
int __fastcall exif_data_ref(int result);
int __fastcall exif_data_unref(int result);
unsigned int __fastcall exif_data_dump(unsigned int result);
int __fastcall exif_data_get_byte_order(int a1);
int __fastcall exif_data_foreach_content(int result, int (__fastcall *a2)(_DWORD, int), int a3);
int __fastcall exif_data_set_byte_order(int result, int a2);
_DWORD *__fastcall exif_data_log(_DWORD *result, _DWORD *a2);
int __fastcall exif_data_get_log(int a1);
int __fastcall exif_data_option_get_name(int a1);
int __fastcall exif_data_option_get_description(int a1);
int __fastcall exif_data_unset_option(int result, int a2);
signed int __fastcall exif_data_get_data_type(int a1);
int __fastcall sub_8E68(int a1, int a2, unsigned int a3, unsigned int a4, unsigned int a5, int a6, int a7);
signed int __fastcall sub_8F10(int a1, int a2);
signed int __fastcall sub_8F3C(int a1, int a2);
unsigned int __fastcall sub_8F64(unsigned int result, int a2);
int exif_entry_new();
int __fastcall exif_entry_new_mem(int a1);
int __fastcall exif_entry_ref(int result);
int __fastcall exif_entry_unref(int result);
int __fastcall exif_entry_free(int result);
unsigned int __fastcall exif_entry_fix(unsigned int result, int a2, int a3, int a4);
int __fastcall sub_9590(int a1, int a2, int a3, int a4);
int __fastcall sub_95DC(int a1, int a2);
int __fastcall sub_9634(int a1, int a2, int a3);
int __fastcall exif_entry_dump(int a1, int a2);
char *__fastcall exif_entry_get_value(int a1, char *a2, int a3);
unsigned int __fastcall sub_B150(int a1, char *a2, unsigned int a3);
int __fastcall exif_entry_initialize(int result, signed int a2, int a3, int a4, int a5, int a6, int a7);
int __fastcall exif_entry_gps_initialize(int result, signed int a2);
int __fastcall exif_format_get_name(int a1);
int __fastcall exif_format_get_size(int a1);
int __fastcall exif_ifd_get_name(int a1);
int __fastcall exif_loader_write_file(int a1, const char *a2);
int __fastcall exif_loader_write(int a1, int a2, unsigned int a3, int *a4);
signed int __fastcall sub_C394(int a1, int a2, unsigned int a3, int a4);
int __fastcall exif_loader_reset(int result);
int exif_loader_new();
int __fastcall exif_loader_new_mem(int a1);
int __fastcall exif_loader_ref(int result);
int __fastcall exif_loader_unref(int result);
_DWORD *__fastcall exif_loader_get_data(int a1);
int __fastcall exif_loader_get_buf(int a1, _DWORD *a2, _DWORD *a3);
_DWORD *__fastcall exif_loader_log(_DWORD *result, _DWORD *a2);
int __fastcall exif_log_code_get_title(int a1);
int __fastcall exif_log_code_get_message(int a1);
int __fastcall exif_log_new_mem(int a1);
int exif_log_new();
_DWORD *__fastcall exif_mem_ref(_DWORD *result);
int __fastcall exif_log_unref(int result);
int __fastcall exif_log_free(int result);
int __fastcall exif_log_set_func(int result, int a2, int a3);
int __fastcall exif_log(int result, int a2);
int __fastcall exif_logv(int result, int a2);
int __fastcall exif_mem_new(int (__fastcall *a1)(_DWORD), int (__fastcall *a2)(_DWORD, _DWORD), int a3);
int __fastcall exif_mem_unref(int result);
int __fastcall exif_mem_free(int result, int a2);
int __fastcall exif_mem_alloc(int a1, int a2);
int __fastcall exif_mem_realloc(int a1, int a2, int a3);
_DWORD *exif_mem_new_default();
int sub_C78C(); // weak
void *j_j_j_realloc(void *ptr, size_t size);
void j_j_j_free(void *ptr);
_DWORD *__fastcall exif_mnote_data_construct(_DWORD *result, int a2);
_DWORD *__fastcall exif_mnote_data_ref(_DWORD *result);
int __fastcall exif_mnote_data_unref(int result);
int __fastcall exif_mnote_data_load(int result);
int __fastcall exif_mnote_data_save(int result);
int __fastcall exif_mnote_data_set_byte_order(int result);
int __fastcall exif_mnote_data_set_offset(int result);
int __fastcall exif_mnote_data_count(int a1);
int __fastcall exif_mnote_data_get_id(int a1);
int __fastcall exif_mnote_data_get_name(int a1);
int __fastcall exif_mnote_data_get_title(int a1);
int __fastcall exif_mnote_data_get_description(int a1);
int __fastcall exif_mnote_data_get_value(int a1);
_DWORD *__fastcall exif_mnote_data_log(_DWORD *result, _DWORD *a2);
signed int exif_tag_table_count();
int __fastcall exif_tag_table_get_tag(unsigned int a1);
int __fastcall exif_tag_table_get_name(unsigned int a1);
int __fastcall exif_tag_get_name_in_ifd(int a1, unsigned int a2);
int __fastcall sub_C9E4(int a1);
int __fastcall exif_tag_get_title_in_ifd(int a1, unsigned int a2);
_BYTE *__fastcall exif_tag_get_description_in_ifd(int a1, unsigned int a2);
int __fastcall exif_tag_get_name(int a1);
int __fastcall exif_tag_get_title(int a1);
_BYTE *__fastcall exif_tag_get_description(int a1);
int __fastcall exif_tag_from_name(char *s2); // idb
signed int __fastcall exif_tag_get_support_level_in_ifd(int a1, unsigned int a2, unsigned int a3);
int sub_CD64(); // weak
unsigned int __fastcall exif_array_set_byte_order(int a1, int a2, int a3, int a4, int a5);
int __fastcall exif_get_short(int a1, int a2);
int __fastcall exif_set_sshort(int result, int a2, __int16 a3);
int __fastcall exif_get_sshort(int a1, int a2);
int exif_get_long(void); // weak
int exif_set_long(void); // weak
int __fastcall exif_get_srational(int a1, int a2, int a3);
int __fastcall exif_set_srational(int result, int a2, unsigned int a3, unsigned int a4);
int __fastcall exif_get_slong(int a1, int a2);
int __fastcall exif_set_slong(int result, int a2, unsigned int a3);
int __fastcall exif_convert_utf16_to_utf8(int result, _WORD *a2, signed int a3);
signed int __fastcall exif_mnote_data_canon_identify(int *a1);
_DWORD *__fastcall exif_mnote_data_canon_new(int a1, int a2);
int sub_D1B8(); // weak
unsigned int __fastcall sub_D1C4(unsigned int result, int a2);
int sub_D208(); // weak
int __fastcall sub_D210(int a1, int a2, unsigned int a3);
unsigned int __fastcall sub_D474(unsigned int result, int *a2, int *a3);
int __fastcall sub_D620(int a1);
int __fastcall sub_D654(unsigned int a1, unsigned int a2);
unsigned int __fastcall sub_D68C(unsigned int a1, unsigned int a2);
unsigned int __fastcall sub_D6C4(unsigned int a1, unsigned int a2);
_BYTE *__fastcall sub_D6FC(unsigned int a1, unsigned int a2);
char *__fastcall sub_D738(unsigned int a1, unsigned int a2, char *a3, int a4);
int __fastcall sub_D774(int result);
unsigned int __fastcall sub_D7BC(unsigned int result, unsigned int a2, unsigned int *a3, _DWORD *a4);
signed int __fastcall mnote_canon_entry_count_values(_DWORD *a1);
char *__fastcall mnote_canon_entry_get_value(int a1, unsigned int a2, char *a3, int a4);
char *__fastcall sub_E168(int a1, int a2, int a3, char *dest, size_t n);
int __fastcall mnote_canon_tag_get_name(int a1);
unsigned int __fastcall mnote_canon_tag_get_name_sub(int a1, int a2, char a3);
int __fastcall mnote_canon_tag_get_title(int a1);
unsigned int __fastcall mnote_canon_tag_get_title_sub(int a1, int a2, char a3);
_BYTE *__fastcall mnote_canon_tag_get_description(int a1);
int __fastcall exif_mnote_data_olympus_identify(int a1, int a2);
int __fastcall sub_E46C(void *s1, unsigned int a2);
_DWORD *__fastcall exif_mnote_data_olympus_new(int a1);
int sub_E5E0(); // weak
unsigned int __fastcall sub_E5EC(unsigned int result, int a2);
int sub_E630(); // weak
int __fastcall sub_E638(int a1, int a2, unsigned int a3);
unsigned int __fastcall sub_EBC4(unsigned int result, int *a2, int *a3);
int sub_EEE4(); // weak
int sub_EEF0(); // weak
int sub_EF08(); // weak
int sub_EF24(); // weak
int sub_EF40(); // weak
int sub_EF5C(); // weak
int __fastcall mnote_olympus_tag_get_name(int a1);
int __fastcall mnote_olympus_tag_get_title(int a1);
_BYTE *__fastcall mnote_olympus_tag_get_description(int a1);
char *__fastcall mnote_olympus_entry_get_value(int a1, char *a2, int a3);
signed int __fastcall exif_mnote_data_fuji_identify(int a1, int a2);
_DWORD *__fastcall exif_mnote_data_fuji_new(int a1);
int sub_10AFC(); // weak
unsigned int __fastcall sub_10B08(unsigned int result, int a2);
int sub_10B4C(); // weak
int __fastcall sub_10B54(int a1, int a2, unsigned int a3);
unsigned int __fastcall sub_10DC0(unsigned int result, int *a2, int *a3);
int __fastcall sub_10F3C(int a1);
int __fastcall sub_10F48(int a1, unsigned int a2);
int __fastcall sub_10F60(int a1, unsigned int a2);
int sub_10F7C(); // weak
int sub_10F98(); // weak
int sub_10FB4(); // weak
char *__fastcall mnote_fuji_entry_get_value(int a1, char *a2, int a3);
int __fastcall mnote_fuji_tag_get_name(int a1);
int __fastcall mnote_fuji_tag_get_title(int a1);
_BYTE *__fastcall mnote_fuji_tag_get_description(int a1);
signed int __fastcall exif_mnote_data_pentax_identify(int a1, int a2);
_DWORD *__fastcall exif_mnote_data_pentax_new(int a1);
int sub_11578(); // weak
unsigned int __fastcall sub_11584(unsigned int result, int a2);
int sub_115C8(); // weak
int __fastcall sub_115D0(int a1, int a2, unsigned int a3);
int __fastcall sub_118D8(int result, int *a2, int *a3);
int sub_11BB0(); // weak
int sub_11BBC(); // weak
int sub_11BD4(); // weak
int sub_11BF0(); // weak
int sub_11C0C(); // weak
int sub_11C28(); // weak
char *__fastcall mnote_pentax_entry_get_value(int a1, char *a2, int a3);
int __fastcall mnote_pentax_tag_get_name(int a1);
int __fastcall mnote_pentax_tag_get_title(int a1);
_BYTE *__fastcall mnote_pentax_tag_get_description(int a1);
signed int __fastcall sub_12264(int a1, int a2, unsigned int a3, unsigned int a4);
signed int __fastcall sub_125A8(int a1, int a2, unsigned int a3, int a4, int *a5);
signed int __fastcall sub_1264C(int a1, int a2, unsigned int a3, int a4);
signed int __fastcall sub_12770(int a1, int a2, int a3);
void sub_127C4();
void sub_127CC();
signed int __fastcall sub_12868(int a1, int a2, char a3);
void __fastcall sub_12984(int a1, int a2, int a3);
int __fastcall sub_12A08(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_12A20(int _R0);
int __fastcall sub_12A28(int _R0);
int __fastcall sub_12A30(int _R0);
void sub_12A38();
void sub_12A7C();
int __fastcall sub_12A90(int a1, int a2);
signed int __fastcall sub_12AE0(int a1, int a2, _DWORD *a3);
signed int __fastcall sub_12B10(int a1, int a2, int a3);
signed int __fastcall sub_12B54(int a1, int a2, _QWORD *a3);
signed int __fastcall sub_12B84(int a1, int a2, int a3, int a4);
int __fastcall sub_12BBC(int a1);
signed int __fastcall sub_12BC4(int a1, int a2);
signed int __fastcall sub_12BE4(int a1);
int __fastcall sub_12BFC(int a1);
int __fastcall sub_13014(int a1, int a2);
void __fastcall sub_13070(int a1, int a2, int a3, int a4);
int __fastcall sub_130A4(int a1);
int sub_130F4(); // weak
int __fastcall sub_13284(int result, int a2, int a3, _DWORD *a4, int a5, int a6, int a7, _DWORD *a8);
int sub_1395C(); // weak
int __fastcall sub_13970(int _R0);
int __fastcall sub_13978(int _R0);
int __fastcall sub_13980(int _R0);
int __fastcall sub_13988(_DWORD *a1);
int __fastcall sub_139CC(_DWORD *a1);
int __fastcall j_j_j_exif_content_free(int result);
int __fastcall j_j_exif_content_free(int result);
int __fastcall j_j_j_exif_mem_unref(int result);
int __fastcall j_j_exif_mem_unref(int result);
int __fastcall j_j_j_exif_entry_ref(int result);
int __fastcall j_j_exif_entry_ref(int result);
int __fastcall j_j_j_exif_entry_unref(int result);
int __fastcall j_j_exif_entry_unref(int result);
_DWORD *__fastcall j_j_j_exif_mem_ref_0(_DWORD *result);
_DWORD *__fastcall j_j_exif_mem_ref_0(_DWORD *result);
int __fastcall j_j_j_exif_data_fix(int result);
int __fastcall j_j_exif_data_fix(int result);
int j_j_j_exif_set_long();
int j_j_exif_set_long();
int __fastcall j_j_j_exif_data_free(int result);
int __fastcall j_j_exif_data_free(int result);
int __fastcall j_j___aeabi_memcpy(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
int __fastcall j___aeabi_memcpy(int a1, int a2, int a3, int a4, int a5, int a6, int a7);
int __fastcall j_j_j_exif_entry_free(int result);
int __fastcall j_j_exif_entry_free(int result);
int __fastcall j_j_j_exif_set_sshort(int result, int a2, __int16 a3);
int __fastcall j_j_exif_set_sshort(int result, int a2, __int16 a3);
int __fastcall j_j_j_exif_set_srational_0(int result, int a2, unsigned int a3, unsigned int a4);
int __fastcall j_j_exif_set_srational_0(int result, int a2, unsigned int a3, unsigned int a4);
int __fastcall j_j_j_exif_log_free(int result);
int __fastcall j_j_exif_log_free(int result);
void *j_j_calloc(size_t nmemb, size_t size);
void *j_calloc(size_t nmemb, size_t size);
void *j_j_realloc(void *ptr, size_t size);
void *j_realloc(void *ptr, size_t size);
void j_j_free(void *ptr);
void j_free(void *ptr);
_DWORD *__fastcall j_j_j_exif_mem_ref(_DWORD *result);
_DWORD *__fastcall j_j_exif_mem_ref(_DWORD *result);
int __fastcall j_j_j_exif_get_slong(int a1, int a2);
int __fastcall j_j_exif_get_slong(int a1, int a2);
int __fastcall j_j_j_exif_set_slong(int result, int a2, unsigned int a3);
int __fastcall j_j_exif_set_slong(int result, int a2, unsigned int a3);
int __fastcall j_j_j_mnote_olympus_tag_get_name(int a1);
int __fastcall j_j_mnote_olympus_tag_get_name(int a1);
int __fastcall j_j_j_mnote_olympus_tag_get_title(int a1);
int __fastcall j_j_mnote_olympus_tag_get_title(int a1);
_BYTE *__fastcall j_j_j_mnote_olympus_tag_get_description(int a1);
_BYTE *__fastcall j_j_mnote_olympus_tag_get_description(int a1);
char *__fastcall j_j_j_mnote_olympus_entry_get_value(int a1, char *a2, int a3);
char *__fastcall j_j_mnote_olympus_entry_get_value(int a1, char *a2, int a3);
int __fastcall j_j_j_mnote_fuji_tag_get_name(int a1);
int __fastcall j_j_mnote_fuji_tag_get_name(int a1);
int __fastcall j_j_j_mnote_fuji_tag_get_title(int a1);
int __fastcall j_j_mnote_fuji_tag_get_title(int a1);
_BYTE *__fastcall j_j_j_mnote_fuji_tag_get_description(int a1);
_BYTE *__fastcall j_j_mnote_fuji_tag_get_description(int a1);
char *__fastcall j_j_j_mnote_fuji_entry_get_value(int a1, char *a2, int a3);
char *__fastcall j_j_mnote_fuji_entry_get_value(int a1, char *a2, int a3);
int __fastcall j_j_j_mnote_pentax_tag_get_name(int a1);
int __fastcall j_j_mnote_pentax_tag_get_name(int a1);
int __fastcall j_j_j_mnote_pentax_tag_get_title(int a1);
int __fastcall j_j_mnote_pentax_tag_get_title(int a1);
_BYTE *__fastcall j_j_j_mnote_pentax_tag_get_description(int a1);
_BYTE *__fastcall j_j_mnote_pentax_tag_get_description(int a1);
char *__fastcall j_j_j_mnote_pentax_entry_get_value(int a1, char *a2, int a3);
char *__fastcall j_j_mnote_pentax_entry_get_value(int a1, char *a2, int a3);
void sub_13BD0();
void sub_13BD4();
int __fastcall sub_13BE0(_DWORD *a1);
int __fastcall sub_13BE4(_DWORD *a1);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_12778; // weak
_UNKNOWN unk_157F8; // weak
_UNKNOWN unk_15A91; // weak
int dword_1E432 = 1498300755; // weak
char algn_20FA4[4] = { '\0', '\0', '\0', '\0' }; // weak
_UNKNOWN unk_20FAE; // weak
_UNKNOWN unk_20FB7; // weak
_UNKNOWN unk_20FC0; // weak
char a0110[5] = "0110"; // weak
_DWORD dword_21008[6] = { 2, 0, 1, 4, 3, 0 }; // idb
_DWORD dword_21020[8] = { 3000, 3700, 4000, 4500, 5500, 6500, 0, 7500 }; // idb
_UNKNOWN unk_22840; // weak
_UNKNOWN unk_22870; // weak
_UNKNOWN unk_23C20; // weak
char *off_23E90[4] = { "-", "Y", "Cb", "Cr" }; // weak
_UNKNOWN unk_23EAC; // weak
_UNKNOWN unk_23F48; // weak
_UNKNOWN unk_23F78; // weak
_UNKNOWN unk_23FA8; // weak
int dword_27788 = 0; // weak
__int16 word_2778C = 1; // weak
_UNKNOWN unk_2831C; // weak
int dword_287C4 = 122829; // weak
int dword_287C8 = 122839; // weak
int dword_287CC = 88056; // weak
int dword_28884 = 0; // weak
int dword_28BCC = 124409; // weak
int dword_28BD0 = 122940; // weak
int dword_28BD4 = 88056; // weak
_DWORD dword_29528[1450] =
{
  131,
  1,
  0,
  128394,
  1,
  86476,
  2,
  128408,
  6,
  128426,
  10,
  128438,
  14,
  128451,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  135,
  1,
  0,
  86827,
  4,
  128466,
  7,
  128485,
  9,
  128503,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  32771,
  3,
  1,
  128522,
  2,
  128532,
  3,
  128543,
  4,
  128552,
  5,
  128563,
  6,
  128575,
  10,
  128585,
  11,
  128600,
  12,
  128616,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  32772,
  3,
  1,
  128630,
  2,
  122818,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  32773,
  3,
  0,
  86498,
  1,
  128636,
  2,
  128644,
  3,
  128652,
  4,
  128662,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  32774,
  3,
  0,
  128672,
  2,
  128679,
  4,
  128687,
  5,
  128695,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  32775,
  3,
  0,
  118789,
  1,
  128703,
  2,
  86170,
  3,
  128710,
  4,
  128724,
  5,
  86262,
  6,
  128737,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  32779,
  3,
  0,
  128748,
  1,
  128759,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  513,
  3,
  1,
  128770,
  2,
  128781,
  3,
  128792,
  4,
  128804,
  5,
  128816,
  6,
  128828,
  7,
  128840,
  17,
  128859,
  257,
  128876,
  258,
  128885,
  259,
  128894,
  260,
  128904,
  261,
  128914,
  262,
  128924,
  263,
  128934,
  513,
  128951,
  514,
  128966,
  515,
  128981,
  516,
  128997,
  517,
  129013,
  518,
  129029,
  519,
  129045,
  529,
  129068,
  0,
  0,
  514,
  3,
  0,
  129085,
  1,
  86867,
  2,
  119261,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  515,
  3,
  0,
  129085,
  1,
  86867,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  770,
  3,
  0,
  118684,
  1,
  118794,
  2,
  129088,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4100,
  3,
  0,
  118789,
  1,
  118797,
  2,
  129100,
  3,
  118684,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4101,
  3,
  0,
  119425,
  1,
  122214,
  4,
  122223,
  5,
  129105,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4106,
  3,
  0,
  86498,
  1,
  87956,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4107,
  3,
  0,
  118789,
  1,
  86476,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4111,
  3,
  0,
  86498,
  1,
  88603,
  2,
  88598,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4134,
  3,
  0,
  129085,
  1,
  86867,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4137,
  3,
  0,
  88603,
  1,
  86498,
  2,
  88598,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4149,
  4,
  0,
  129085,
  1,
  86867,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4153,
  3,
  0,
  129125,
  1,
  129136,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  526,
  3,
  0,
  119425,
  1,
  88492,
  2,
  129148,
  3,
  129153,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  530,
  3,
  1,
  129169,
  2,
  129180,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  535,
  3,
  0,
  129193,
  1,
  129211,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  542,
  3,
  0,
  129085,
  1,
  86867,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  538,
  3,
  0,
  118789,
  1,
  129235,
  3,
  128695,
  4,
  129242,
  5,
  129250,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  543,
  3,
  0,
  118684,
  1,
  129258,
  2,
  129264,
  3,
  119181,
  4,
  129267,
  5,
  129274,
  6,
  129281,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  548,
  3,
  0,
  129286,
  1,
  129299,
  2,
  129313,
  3,
  129327,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
_DWORD dword_2ABD0[810] =
{
  4097,
  1,
  129443,
  2,
  88598,
  3,
  86498,
  4,
  88603,
  5,
  129451,
  130,
  129459,
  132,
  129471,
  32768,
  129483,
  65535,
  118684,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4098,
  0,
  118789,
  256,
  86170,
  512,
  86262,
  768,
  86275,
  769,
  86296,
  770,
  86341,
  1024,
  129504,
  1280,
  86228,
  3840,
  122331,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4099,
  0,
  88492,
  128,
  129517,
  256,
  119436,
  384,
  129529,
  512,
  129540,
  768,
  119210,
  32768,
  129483,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4100,
  0,
  88492,
  128,
  129471,
  256,
  88603,
  384,
  129459,
  512,
  129540,
  32768,
  129483,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4112,
  0,
  118789,
  1,
  118794,
  2,
  118684,
  3,
  118797,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4128,
  0,
  118684,
  1,
  118794,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4129,
  0,
  118789,
  1,
  86476,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4144,
  0,
  118684,
  1,
  118794,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4145,
  0,
  118789,
  1,
  86741,
  2,
  86817,
  4,
  119203,
  5,
  119181,
  6,
  129549,
  7,
  129560,
  8,
  129574,
  10,
  129594,
  11,
  129601,
  12,
  129608,
  13,
  129614,
  14,
  129621,
  15,
  129626,
  16,
  119298,
  17,
  119315,
  18,
  119288,
  19,
  119304,
  256,
  129637,
  512,
  129658,
  768,
  88423,
  0,
  0,
  4352,
  0,
  118684,
  1,
  118794,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4624,
  0,
  129678,
  16,
  129689,
  48,
  129698,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4864,
  0,
  129704,
  1,
  129712,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4865,
  0,
  129725,
  1,
  129736,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4866,
  0,
  129749,
  1,
  129757,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  5120,
  1,
  88492,
  3,
  129770,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  5121,
  0,
  129775,
  256,
  129787,
  272,
  129806,
  288,
  129832,
  304,
  129858,
  512,
  129884,
  768,
  129898,
  1024,
  129920,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  5122,
  0,
  129930,
  1,
  118775,
  256,
  129946,
  512,
  129962,
  513,
  129975,
  32768,
  129483,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
int dword_2B87C = 129988; // weak
int dword_2B880 = 129996; // weak
int dword_2B884 = 88056; // weak
_DWORD dword_2BA78[1407] =
{
  1,
  0,
  118789,
  1,
  88501,
  2,
  86476,
  4,
  131070,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  2,
  0,
  131085,
  1,
  131090,
  2,
  129148,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  3,
  2,
  122331,
  3,
  118789,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4,
  1,
  118789,
  2,
  131097,
  4,
  119238,
  6,
  118797,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  7,
  0,
  118789,
  1,
  86170,
  2,
  86269,
  3,
  86219,
  4,
  86179,
  5,
  86476,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  11,
  0,
  86498,
  1,
  88598,
  2,
  88603,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  12,
  0,
  86498,
  1,
  119441,
  2,
  119436,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  13,
  0,
  86498,
  1,
  119441,
  2,
  119436,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  20,
  10,
  119458,
  16,
  119462,
  100,
  119458,
  200,
  119462,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  23,
  1,
  122352,
  2,
  119210,
  3,
  119197,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16385,
  0,
  118789,
  1,
  88501,
  2,
  86476,
  4,
  131070,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16392,
  0,
  131085,
  1,
  131090,
  2,
  129148,
  3,
  131106,
  4,
  118775,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16393,
  0,
  131111,
  1,
  122352,
  2,
  131119,
  3,
  131128,
  4,
  131137,
  5,
  131147,
  8,
  131157,
  9,
  131180,
  10,
  131190,
  19,
  131200,
  20,
  131208,
  21,
  131218,
  22,
  131228,
  23,
  131251,
  25,
  131261,
  27,
  131284,
  36,
  131294,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16395,
  0,
  119652,
  2,
  129549,
  3,
  86476,
  5,
  86741,
  6,
  86817,
  8,
  129258,
  9,
  88501,
  11,
  88598,
  12,
  131304,
  13,
  131316,
  14,
  131338,
  15,
  87956,
  17,
  119288,
  18,
  129621,
  19,
  122894,
  30,
  131345,
  31,
  131359,
  33,
  131373,
  37,
  129601,
  38,
  131388,
  40,
  131393,
  49,
  131404,
  50,
  131414,
  51,
  131423,
  53,
  119304,
  54,
  131434,
  55,
  131446,
  56,
  131464,
  58,
  131485,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16396,
  0,
  131501,
  1,
  118684,
  3,
  131520,
  256,
  131558,
  258,
  118794,
  259,
  131570,
  260,
  118852,
  261,
  131601,
  264,
  131614,
  265,
  131623,
  266,
  131637,
  267,
  131670,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16397,
  0,
  86498,
  1,
  87956,
  2,
  119537,
  3,
  86476,
  5,
  119022,
  16,
  131696,
  17,
  131701,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16398,
  1,
  131706,
  2,
  131717,
  3,
  131721,
  4,
  119609,
  5,
  131733,
  6,
  119602,
  7,
  131742,
  8,
  119596,
  9,
  131752,
  10,
  131763,
  11,
  131770,
  65534,
  131782,
  65535,
  118789,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16399,
  0,
  131795,
  1,
  88217,
  2,
  131804,
  3,
  88226,
  4,
  119609,
  5,
  119602,
  6,
  119596,
  7,
  88249,
  8,
  131815,
  9,
  88236,
  65535,
  119425,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16409,
  0,
  118789,
  1,
  86170,
  2,
  86269,
  3,
  86179,
  4,
  86219,
  5,
  86476,
  6,
  86275,
  7,
  86296,
  8,
  86341,
  9,
  86228,
  10,
  86262,
  65534,
  85983,
  65535,
  131829,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  28679,
  0,
  118684,
  1,
  118794,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
_DWORD dword_2D074[354] =
{
  16393,
  0,
  0,
  131843,
  4,
  0,
  131137,
  5,
  0,
  131147,
  8,
  0,
  131853,
  34,
  0,
  131863,
  36,
  0,
  131873,
  37,
  0,
  131896,
  35,
  1,
  131906,
  32,
  2,
  131916,
  33,
  2,
  131924,
  34,
  2,
  131863,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  16395,
  0,
  0,
  118789,
  5,
  0,
  86741,
  53,
  0,
  119304,
  255,
  0,
  131933,
  5,
  1,
  86741,
  9,
  1,
  88501,
  13,
  1,
  131434,
  15,
  1,
  87956,
  53,
  1,
  119304,
  0,
  2,
  129549,
  5,
  2,
  86741,
  6,
  2,
  86817,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
int dword_2D600 = 125613; // weak
int dword_2D604 = 131949; // weak
int dword_2D608 = 88056; // weak
_UNKNOWN unk_2DC54; // weak
int GLOBAL_OFFSET_TABLE_ = 0; // weak
void *off_2E000 = &off_2E000; // weak
_UNKNOWN unk_2E004; // weak


//----- (00006CA4) --------------------------------------------------------
_DWORD *j_exif_mem_new_default()
{
  return exif_mem_new_default();
}

//----- (00006CB0) --------------------------------------------------------
int __fastcall j_exif_content_new_mem(int a1)
{
  return exif_content_new_mem(a1);
}

//----- (00006CBC) --------------------------------------------------------
int __fastcall j_exif_mem_unref(int result)
{
  return exif_mem_unref(result);
}

//----- (00006CC8) --------------------------------------------------------
int __fastcall j_exif_mem_alloc(int a1, int a2)
{
  return exif_mem_alloc(a1, a2);
}

//----- (00006CD4) --------------------------------------------------------
_DWORD *__fastcall j_exif_mem_ref(_DWORD *result)
{
  return exif_mem_ref(result);
}

//----- (00006CE0) --------------------------------------------------------
int __fastcall j_exif_mem_free(int result, int a2)
{
  return exif_mem_free(result, a2);
}

//----- (00006CEC) --------------------------------------------------------
int __fastcall j_exif_content_free(int result)
{
  return exif_content_free(result);
}

//----- (00006CF8) --------------------------------------------------------
int __fastcall j_exif_entry_unref(int result)
{
  return exif_entry_unref(result);
}

//----- (00006D04) --------------------------------------------------------
int __fastcall j_exif_log_unref(int result)
{
  return exif_log_unref(result);
}

//----- (00006D28) --------------------------------------------------------
int __fastcall j_exif_entry_dump(int a1, int a2)
{
  return exif_entry_dump(a1, a2);
}

//----- (00006D40) --------------------------------------------------------
int __fastcall j_exif_tag_get_name(int a1)
{
  return exif_tag_get_name(a1);
}

//----- (00006D4C) --------------------------------------------------------
int __fastcall j_exif_log(int result, int a2)
{
  return exif_log(result, a2);
}

//----- (00006D58) --------------------------------------------------------
int __fastcall j_exif_mem_realloc(int a1, int a2, int a3)
{
  return exif_mem_realloc(a1, a2, a3);
}

//----- (00006D64) --------------------------------------------------------
int __fastcall j_exif_entry_ref(int result)
{
  return exif_entry_ref(result);
}

//----- (00006D7C) --------------------------------------------------------
_DWORD *__fastcall j_exif_mem_ref_0(_DWORD *result)
{
  return exif_mem_ref(result);
}

//----- (00006D88) --------------------------------------------------------
signed int __fastcall j_exif_content_get_ifd(int a1)
{
  return exif_content_get_ifd(a1);
}

//----- (00006D94) --------------------------------------------------------
signed int __fastcall j_exif_data_get_data_type(int a1)
{
  return exif_data_get_data_type(a1);
}

//----- (00006DA0) --------------------------------------------------------
unsigned int __fastcall j_exif_entry_fix(unsigned int result, int a2, int a3, int a4)
{
  return exif_entry_fix(result, a2, a3, a4);
}

//----- (00006DAC) --------------------------------------------------------
signed int __fastcall j_exif_tag_get_support_level_in_ifd(int a1, unsigned int a2, unsigned int a3)
{
  return exif_tag_get_support_level_in_ifd(a1, a2, a3);
}

//----- (00006DB8) --------------------------------------------------------
int __fastcall j_exif_ifd_get_name(int a1)
{
  return exif_ifd_get_name(a1);
}

//----- (00006DC4) --------------------------------------------------------
int __fastcall j_exif_content_remove_entry(int result, int a2)
{
  return exif_content_remove_entry(result, a2);
}

//----- (00006DD0) --------------------------------------------------------
signed int j_exif_tag_table_count()
{
  return exif_tag_table_count();
}

//----- (00006DDC) --------------------------------------------------------
int __fastcall j_exif_tag_table_get_tag(unsigned int a1)
{
  return exif_tag_table_get_tag(a1);
}

//----- (00006DE8) --------------------------------------------------------
int __fastcall j_exif_tag_get_name_in_ifd(int a1, unsigned int a2)
{
  return exif_tag_get_name_in_ifd(a1, a2);
}

//----- (00006DF4) --------------------------------------------------------
int j_exif_entry_new()
{
  return exif_entry_new();
}

//----- (00006E00) --------------------------------------------------------
int __fastcall j_exif_content_add_entry(int result, int a2)
{
  return exif_content_add_entry(result, a2);
}

//----- (00006E0C) --------------------------------------------------------
int __fastcall j_exif_entry_initialize(int result, signed int a2, int a3, int a4, int a5, int a6, int a7)
{
  return exif_entry_initialize(result, a2, a3, a4, a5, a6, a7);
}

//----- (00006E18) --------------------------------------------------------
int __fastcall j_exif_data_new_mem(int a1)
{
  return exif_data_new_mem(a1);
}

//----- (00006E24) --------------------------------------------------------
int __fastcall j_exif_data_free(int result)
{
  return exif_data_free(result);
}

//----- (00006E30) --------------------------------------------------------
int __fastcall j_exif_content_unref(int result)
{
  return exif_content_unref(result);
}

//----- (00006E3C) --------------------------------------------------------
int __fastcall j_exif_mnote_data_unref(int result)
{
  return exif_mnote_data_unref(result);
}

//----- (00006E48) --------------------------------------------------------
unsigned int __fastcall j_exif_data_load_data(unsigned int result, int a2, unsigned int a3)
{
  return exif_data_load_data(result, a2, a3);
}

//----- (00006E60) --------------------------------------------------------
int __fastcall j_exif_get_short(int a1, int a2)
{
  return exif_get_short(a1, a2);
}

//----- (00006E6C) --------------------------------------------------------
int j_exif_get_long()
{
  return exif_get_long();
}
// CECC: using guessed type int exif_get_long(void);

//----- (00006E78) --------------------------------------------------------
_DWORD *__fastcall j_exif_content_get_entry(int a1, int a2)
{
  return exif_content_get_entry(a1, a2);
}

//----- (00006E84) --------------------------------------------------------
int __fastcall j_exif_mnote_data_olympus_identify(int a1, int a2)
{
  return exif_mnote_data_olympus_identify(a1, a2);
}

//----- (00006E90) --------------------------------------------------------
_DWORD *__fastcall j_exif_mnote_data_olympus_new(int a1)
{
  return exif_mnote_data_olympus_new(a1);
}

//----- (00006E9C) --------------------------------------------------------
signed int __fastcall j_exif_mnote_data_canon_identify(int *a1)
{
  return exif_mnote_data_canon_identify(a1);
}

//----- (00006EA8) --------------------------------------------------------
_DWORD *__fastcall j_exif_mnote_data_canon_new(int a1, int a2)
{
  return exif_mnote_data_canon_new(a1, a2);
}

//----- (00006EB4) --------------------------------------------------------
signed int __fastcall j_exif_mnote_data_fuji_identify(int a1, int a2)
{
  return exif_mnote_data_fuji_identify(a1, a2);
}

//----- (00006EC0) --------------------------------------------------------
_DWORD *__fastcall j_exif_mnote_data_fuji_new(int a1)
{
  return exif_mnote_data_fuji_new(a1);
}

//----- (00006ECC) --------------------------------------------------------
signed int __fastcall j_exif_mnote_data_pentax_identify(int a1, int a2)
{
  return exif_mnote_data_pentax_identify(a1, a2);
}

//----- (00006ED8) --------------------------------------------------------
_DWORD *__fastcall j_exif_mnote_data_pentax_new(int a1)
{
  return exif_mnote_data_pentax_new(a1);
}

//----- (00006EE4) --------------------------------------------------------
_DWORD *__fastcall j_exif_mnote_data_log(_DWORD *result, _DWORD *a2)
{
  return exif_mnote_data_log(result, a2);
}

//----- (00006EF0) --------------------------------------------------------
int __fastcall j_exif_mnote_data_set_byte_order(int result)
{
  return exif_mnote_data_set_byte_order(result);
}

//----- (00006EFC) --------------------------------------------------------
int __fastcall j_exif_mnote_data_set_offset(int result)
{
  return exif_mnote_data_set_offset(result);
}

//----- (00006F08) --------------------------------------------------------
int __fastcall j_exif_mnote_data_load(int result)
{
  return exif_mnote_data_load(result);
}

//----- (00006F14) --------------------------------------------------------
int __fastcall j_exif_data_fix(int result)
{
  return exif_data_fix(result);
}

//----- (00006F20) --------------------------------------------------------
int __fastcall j_exif_entry_new_mem(int a1)
{
  return exif_entry_new_mem(a1);
}

//----- (00006F2C) --------------------------------------------------------
int __fastcall j_exif_format_get_size(int a1)
{
  return exif_format_get_size(a1);
}

//----- (00006F44) --------------------------------------------------------
unsigned int __fastcall j_exif_content_fix(int a1)
{
  return exif_content_fix(a1);
}

//----- (00006F50) --------------------------------------------------------
int __fastcall j_exif_set_sshort(int result, int a2, __int16 a3)
{
  return exif_set_sshort(result, a2, a3);
}

//----- (00006F5C) --------------------------------------------------------
int j_exif_set_long()
{
  return exif_set_long();
}
// CED0: using guessed type int exif_set_long(void);

//----- (00006F68) --------------------------------------------------------
int __fastcall j_exif_mnote_data_save(int result)
{
  return exif_mnote_data_save(result);
}

//----- (00006F80) --------------------------------------------------------
int j_exif_loader_new()
{
  return exif_loader_new();
}

//----- (00006F8C) --------------------------------------------------------
int __fastcall j_exif_loader_write_file(int a1, const char *a2)
{
  return exif_loader_write_file(a1, a2);
}

//----- (00006F98) --------------------------------------------------------
_DWORD *__fastcall j_exif_loader_get_data(int a1)
{
  return exif_loader_get_data(a1);
}

//----- (00006FA4) --------------------------------------------------------
int __fastcall j_exif_loader_unref(int result)
{
  return exif_loader_unref(result);
}

//----- (00006FB0) --------------------------------------------------------
int __fastcall j_exif_content_dump(int a1, int a2)
{
  return exif_content_dump(a1, a2);
}

//----- (00006FBC) --------------------------------------------------------
unsigned int __fastcall j_exif_content_foreach_entry(unsigned int result, void (__fastcall *a2)(_DWORD, int), int a3)
{
  return exif_content_foreach_entry(result, a2, a3);
}

//----- (00006FC8) --------------------------------------------------------
_DWORD *__fastcall j_exif_content_log(_DWORD *result, _DWORD *a2)
{
  return exif_content_log(result, a2);
}

//----- (00006FD4) --------------------------------------------------------
unsigned int __fastcall j_exif_array_set_byte_order(int a1, int a2, int a3, int a4, int a5)
{
  return exif_array_set_byte_order(a1, a2, a3, a4, a5);
}

//----- (00006FE0) --------------------------------------------------------
int __fastcall j_exif_entry_free(int result)
{
  return exif_entry_free(result);
}

//----- (00006FEC) --------------------------------------------------------
int __fastcall j_exif_data_get_byte_order(int a1)
{
  return exif_data_get_byte_order(a1);
}

//----- (00006FF8) --------------------------------------------------------
int __fastcall j_exif_get_srational(int a1, int a2, int a3)
{
  return exif_get_srational(a1, a2, a3);
}

//----- (00007004) --------------------------------------------------------
int __fastcall j_exif_set_srational(int result, int a2, unsigned int a3, unsigned int a4)
{
  return exif_set_srational(result, a2, a3, a4);
}

//----- (00007010) --------------------------------------------------------
int __fastcall j_exif_format_get_name(int a1)
{
  return exif_format_get_name(a1);
}

//----- (0000701C) --------------------------------------------------------
int __fastcall j_exif_get_sshort(int a1, int a2)
{
  return exif_get_sshort(a1, a2);
}

//----- (00007028) --------------------------------------------------------
int __fastcall j_exif_get_slong(int a1, int a2)
{
  return exif_get_slong(a1, a2);
}

//----- (00007034) --------------------------------------------------------
int __fastcall j_exif_get_srational_0(int a1, int a2, int a3)
{
  return exif_get_srational(a1, a2, a3);
}

//----- (00007040) --------------------------------------------------------
int __fastcall j_exif_set_srational_0(int result, int a2, unsigned int a3, unsigned int a4)
{
  return exif_set_srational(result, a2, a3, a4);
}

//----- (0000704C) --------------------------------------------------------
int __fastcall j_exif_data_get_log(int a1)
{
  return exif_data_get_log(a1);
}

//----- (00007058) --------------------------------------------------------
int __fastcall j_exif_logv(int result, int a2)
{
  return exif_logv(result, a2);
}

//----- (00007064) --------------------------------------------------------
char *__fastcall j_exif_entry_get_value(int a1, char *a2, int a3)
{
  return exif_entry_get_value(a1, a2, a3);
}

//----- (000070A0) --------------------------------------------------------
int __fastcall j_exif_convert_utf16_to_utf8(int result, _WORD *a2, signed int a3)
{
  return exif_convert_utf16_to_utf8(result, a2, a3);
}

//----- (00007124) --------------------------------------------------------
int __fastcall j_exif_loader_write(int a1, int a2, unsigned int a3, int *a4)
{
  return exif_loader_write(a1, a2, a3, a4);
}

//----- (0000713C) --------------------------------------------------------
int __fastcall j_exif_loader_reset(int result)
{
  return exif_loader_reset(result);
}

//----- (00007148) --------------------------------------------------------
int __fastcall j_exif_loader_new_mem(int a1)
{
  return exif_loader_new_mem(a1);
}

//----- (00007154) --------------------------------------------------------
_DWORD *__fastcall j_exif_data_log(_DWORD *result, _DWORD *a2)
{
  return exif_data_log(result, a2);
}

//----- (00007160) --------------------------------------------------------
int __fastcall j_exif_log_new_mem(int a1)
{
  return exif_log_new_mem(a1);
}

//----- (0000716C) --------------------------------------------------------
int __fastcall j_exif_log_free(int result)
{
  return exif_log_free(result);
}

//----- (000071A8) --------------------------------------------------------
int __fastcall j_exif_tag_get_title_in_ifd(int a1, unsigned int a2)
{
  return exif_tag_get_title_in_ifd(a1, a2);
}

//----- (000071B4) --------------------------------------------------------
_BYTE *__fastcall j_exif_tag_get_description_in_ifd(int a1, unsigned int a2)
{
  return exif_tag_get_description_in_ifd(a1, a2);
}

//----- (000071CC) --------------------------------------------------------
int __fastcall j_exif_set_slong(int result, int a2, unsigned int a3)
{
  return exif_set_slong(result, a2, a3);
}

//----- (000071D8) --------------------------------------------------------
_DWORD *__fastcall j_exif_mnote_data_construct(_DWORD *result, int a2)
{
  return exif_mnote_data_construct(result, a2);
}

//----- (000071E4) --------------------------------------------------------
int __fastcall j_mnote_canon_tag_get_name(int a1)
{
  return mnote_canon_tag_get_name(a1);
}

//----- (000071F0) --------------------------------------------------------
signed int __fastcall j_mnote_canon_entry_count_values(_DWORD *a1)
{
  return mnote_canon_entry_count_values(a1);
}

//----- (000071FC) --------------------------------------------------------
unsigned int __fastcall j_mnote_canon_tag_get_name_sub(int a1, int a2, char a3)
{
  return mnote_canon_tag_get_name_sub(a1, a2, a3);
}

//----- (00007208) --------------------------------------------------------
unsigned int __fastcall j_mnote_canon_tag_get_title_sub(int a1, int a2, char a3)
{
  return mnote_canon_tag_get_title_sub(a1, a2, a3);
}

//----- (00007214) --------------------------------------------------------
_BYTE *__fastcall j_mnote_canon_tag_get_description(int a1)
{
  return mnote_canon_tag_get_description(a1);
}

//----- (00007220) --------------------------------------------------------
char *__fastcall j_mnote_canon_entry_get_value(int a1, unsigned int a2, char *a3, int a4)
{
  return mnote_canon_entry_get_value(a1, a2, a3, a4);
}

//----- (0000722C) --------------------------------------------------------
int __fastcall j_mnote_olympus_tag_get_name(int a1)
{
  return mnote_olympus_tag_get_name(a1);
}

//----- (00007238) --------------------------------------------------------
int __fastcall j_mnote_olympus_tag_get_title(int a1)
{
  return mnote_olympus_tag_get_title(a1);
}

//----- (00007244) --------------------------------------------------------
_BYTE *__fastcall j_mnote_olympus_tag_get_description(int a1)
{
  return mnote_olympus_tag_get_description(a1);
}

//----- (00007250) --------------------------------------------------------
char *__fastcall j_mnote_olympus_entry_get_value(int a1, char *a2, int a3)
{
  return mnote_olympus_entry_get_value(a1, a2, a3);
}

//----- (00007268) --------------------------------------------------------
int __fastcall j_mnote_fuji_tag_get_name(int a1)
{
  return mnote_fuji_tag_get_name(a1);
}

//----- (00007274) --------------------------------------------------------
int __fastcall j_mnote_fuji_tag_get_title(int a1)
{
  return mnote_fuji_tag_get_title(a1);
}

//----- (00007280) --------------------------------------------------------
_BYTE *__fastcall j_mnote_fuji_tag_get_description(int a1)
{
  return mnote_fuji_tag_get_description(a1);
}

//----- (0000728C) --------------------------------------------------------
char *__fastcall j_mnote_fuji_entry_get_value(int a1, char *a2, int a3)
{
  return mnote_fuji_entry_get_value(a1, a2, a3);
}

//----- (00007298) --------------------------------------------------------
int __fastcall j_mnote_pentax_tag_get_name(int a1)
{
  return mnote_pentax_tag_get_name(a1);
}

//----- (000072A4) --------------------------------------------------------
int __fastcall j_mnote_pentax_tag_get_title(int a1)
{
  return mnote_pentax_tag_get_title(a1);
}

//----- (000072B0) --------------------------------------------------------
_BYTE *__fastcall j_mnote_pentax_tag_get_description(int a1)
{
  return mnote_pentax_tag_get_description(a1);
}

//----- (000072BC) --------------------------------------------------------
char *__fastcall j_mnote_pentax_entry_get_value(int a1, char *a2, int a3)
{
  return mnote_pentax_entry_get_value(a1, a2, a3);
}

//----- (000072F8) --------------------------------------------------------
int sub_72F8()
{
  return _cxa_finalize(&off_2E000);
}
// 6C80: using guessed type int __fastcall _cxa_finalize(_DWORD);
// 2E000: using guessed type void *off_2E000;

//----- (00007318) --------------------------------------------------------
int (*__fastcall sub_7318(int (*result)(void)))(void)
{
  if ( result )
    result = (int (*)(void))result();
  return result;
}

//----- (000073D8) --------------------------------------------------------
const char *__fastcall exif_byte_order_get_name(int a1)
{
  const char *v1; // r1@1

  v1 = 0;
  if ( a1 == 1 )
    v1 = "Intel";
  if ( !a1 )
    v1 = "Motorola";
  return v1;
}

//----- (00007404) --------------------------------------------------------
int exif_content_new()
{
  _DWORD *v0; // r4@1
  int v1; // r5@1

  v0 = j_exif_mem_new_default();
  v1 = j_exif_content_new_mem((int)v0);
  j_exif_mem_unref((int)v0);
  return v1;
}

//----- (00007420) --------------------------------------------------------
int __fastcall exif_content_new_mem(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r4@2
  _DWORD *v3; // r0@3

  v1 = (_DWORD *)a1;
  if ( !a1 )
    return 0;
  v2 = j_exif_mem_alloc(a1, 16);
  if ( !v2 )
    return 0;
  v3 = (_DWORD *)j_exif_mem_alloc((int)v1, 12);
  *(_DWORD *)(v2 + 12) = v3;
  if ( !v3 )
  {
    j_exif_mem_free((int)v1, v2);
    return 0;
  }
  *v3 = 1;
  *(_DWORD *)(*(_DWORD *)(v2 + 12) + 4) = v1;
  j_exif_mem_ref(v1);
  return v2;
}

//----- (00007464) --------------------------------------------------------
_DWORD *__fastcall exif_content_ref(int a1)
{
  _DWORD *result; // r0@1

  result = *(_DWORD **)(a1 + 12);
  ++*result;
  return result;
}

//----- (00007470) --------------------------------------------------------
int __fastcall exif_content_unref(int result)
{
  if ( !--**(_DWORD **)(result + 12) )
    result = j_j_j_exif_content_free(result);
  return result;
}

//----- (00007488) --------------------------------------------------------
int __fastcall exif_content_free(int result)
{
  int v1; // r4@1
  int v2; // r0@2
  int v3; // r5@3
  unsigned int v4; // r6@7
  int v5; // r1@9

  v1 = result;
  if ( result )
  {
    v2 = *(_DWORD *)(result + 12);
    if ( v2 )
      v3 = *(_DWORD *)(v2 + 4);
    else
      v3 = 0;
    if ( *(_DWORD *)(v1 + 4) )
    {
      v4 = 0;
      do
        j_exif_entry_unref(*(_DWORD *)(*(_DWORD *)v1 + 4 * v4++));
      while ( v4 < *(_DWORD *)(v1 + 4) );
    }
    j_exif_mem_free(v3, *(_DWORD *)v1);
    v5 = *(_DWORD *)(v1 + 12);
    if ( v5 )
    {
      j_exif_log_unref(*(_DWORD *)(v5 + 8));
      v5 = *(_DWORD *)(v1 + 12);
    }
    j_exif_mem_free(v3, v5);
    j_exif_mem_free(v3, v1);
    result = j_j_j_exif_mem_unref(v3);
  }
  return result;
}

//----- (000074E0) --------------------------------------------------------
int __fastcall exif_content_dump(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  char *v4; // r6@1
  int v5; // r5@5
  unsigned int v6; // r6@5
  int result; // r0@7
  int v8; // [sp+0h] [bp-420h]@1
  int v9; // [sp+404h] [bp-1Ch]@1

  v2 = a1;
  v3 = a2;
  v4 = (char *)&v8;
  v9 = v0;
  if ( a2 & 0x7FFFFFFF )
  {
    _aeabi_memset(&v8, 2 * a2, 32);
    v4 = (char *)&v8 + 2 * v3;
  }
  *v4 = 0;
  if ( v2 )
  {
    printf("%sDumping exif content (%u entries)...\n", &v8, *(_DWORD *)(v2 + 4));
    if ( *(_DWORD *)(v2 + 4) )
    {
      v5 = v3 + 1;
      v6 = 0;
      do
        j_exif_entry_dump(*(_DWORD *)(*(_DWORD *)v2 + 4 * v6++), v5);
      while ( v6 < *(_DWORD *)(v2 + 4) );
    }
  }
  result = v0 - v9;
  if ( v0 != v9 )
    _stack_chk_fail(result);
  return result;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 6D34: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00007578) --------------------------------------------------------
int __fastcall exif_content_add_entry(int result, int a2)
{
  int v2; // r5@1
  int v3; // r7@1
  int v4; // r12@3
  unsigned int v5; // r3@5
  int v6; // r0@6
  int v7; // r2@6
  int v8; // r1@6
  _DWORD *v9; // r4@7
  int v10; // r4@12
  int v11; // r1@14

  v2 = result;
  v3 = a2;
  if ( result )
  {
    if ( a2 )
    {
      v4 = *(_DWORD *)(result + 12);
      if ( v4 )
      {
        result = *(_DWORD *)(a2 + 20);
        if ( !result )
        {
          v5 = *(_DWORD *)(v2 + 4);
          if ( v5 )
          {
            v6 = *(_DWORD *)a2;
            v7 = 0;
            v8 = *(_DWORD *)v2;
            while ( 1 )
            {
              v9 = *(_DWORD **)(v8 + 4 * v7);
              if ( *v9 == v6 )
                break;
              if ( ++v7 >= v5 )
                goto LABEL_13;
            }
            if ( v9 )
            {
              v10 = *(_DWORD *)(v4 + 8);
              j_exif_tag_get_name(v6);
              return j_exif_log(v10, 1);
            }
          }
          else
          {
            v8 = *(_DWORD *)v2;
          }
LABEL_13:
          result = j_exif_mem_realloc(*(_DWORD *)(v4 + 4), v8, 4 * v5 + 4);
          if ( result )
          {
            *(_DWORD *)(v3 + 20) = v2;
            v11 = *(_DWORD *)(v2 + 4);
            *(_DWORD *)(v2 + 4) = v11 + 1;
            *(_DWORD *)(result + 4 * v11) = v3;
            *(_DWORD *)v2 = result;
            result = j_j_j_exif_entry_ref(v3);
          }
        }
      }
    }
  }
  return result;
}

//----- (0000761C) --------------------------------------------------------
_DWORD *__fastcall exif_content_get_entry(int a1, int a2)
{
  unsigned int v2; // lr@2
  int v3; // r12@3
  int v4; // r3@3
  _DWORD *result; // r0@4

  if ( a1 && (v2 = *(_DWORD *)(a1 + 4)) != 0 )
  {
    v3 = *(_DWORD *)a1;
    v4 = 0;
    while ( 1 )
    {
      result = *(_DWORD **)(v3 + 4 * v4);
      if ( *result == a2 )
        break;
      if ( ++v4 >= v2 )
        goto LABEL_6;
    }
  }
  else
  {
LABEL_6:
    result = 0;
  }
  return result;
}

//----- (0000764C) --------------------------------------------------------
int __fastcall exif_content_remove_entry(int result, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  unsigned int v4; // r2@5
  unsigned int v5; // r7@6
  int v6; // r1@10
  int v7; // r0@10
  int v8; // r2@11
  int v9; // r8@11
  int v10; // r6@11
  int v11; // r0@12

  v2 = result;
  v3 = a2;
  if ( result )
  {
    if ( a2 )
    {
      result = *(_DWORD *)(result + 12);
      if ( result )
      {
        if ( *(_DWORD *)(a2 + 20) == v2 )
        {
          v4 = *(_DWORD *)(v2 + 4);
          if ( v4 )
          {
            v5 = 0;
            do
            {
              if ( *(_DWORD *)(*(_DWORD *)v2 + 4 * v5) == a2 )
                break;
              ++v5;
            }
            while ( v5 < v4 );
            if ( v5 != v4 )
            {
              v6 = *(_DWORD *)v2;
              v7 = *(_DWORD *)(result + 4);
              if ( v4 < 2 )
              {
                j_exif_mem_free(v7, v6);
                __asm
                {
                  VMOV.I32        D16, #0
                  VSTR            D16, [R5]
                }
LABEL_16:
                *(_DWORD *)(v3 + 20) = 0;
                return j_j_j_exif_entry_unref(v3);
              }
              v8 = v4 - 1;
              v9 = *(_DWORD *)(v6 + 4 * v8);
              result = j_exif_mem_realloc(v7, v6, 4 * v8);
              v10 = result;
              if ( result )
              {
                *(_DWORD *)v2 = result;
                v11 = *(_DWORD *)(v2 + 4) - 1;
                *(_DWORD *)(v2 + 4) = v11;
                if ( v11 != v5 )
                {
                  _aeabi_memmove(v10 + 4 * v5);
                  *(_DWORD *)(v10 + 4 * *(_DWORD *)(v2 + 4) - 4) = v9;
                }
                goto LABEL_16;
              }
            }
          }
        }
      }
    }
  }
  return result;
}
// 6D70: using guessed type int __fastcall _aeabi_memmove(_DWORD);

//----- (000076E4) --------------------------------------------------------
unsigned int __fastcall exif_content_foreach_entry(unsigned int result, void (__fastcall *a2)(_DWORD, int), int a3)
{
  unsigned int v3; // r6@1
  int v4; // r4@1
  void (__fastcall *v5)(_DWORD, int); // r5@1
  unsigned int v6; // r7@4

  v3 = result;
  v4 = a3;
  v5 = a2;
  if ( result )
  {
    if ( a2 )
    {
      result = *(_DWORD *)(result + 4);
      if ( result )
      {
        v6 = 0;
        do
        {
          v5(*(_DWORD *)(*(_DWORD *)v3 + 4 * v6), v4);
          result = *(_DWORD *)(v3 + 4);
          ++v6;
        }
        while ( v6 < result );
      }
    }
  }
  return result;
}

//----- (00007710) --------------------------------------------------------
_DWORD *__fastcall exif_content_log(_DWORD *result, _DWORD *a2)
{
  _DWORD *v2; // r5@1
  _DWORD *v3; // r4@1
  int v4; // r1@3

  v2 = result;
  v3 = a2;
  if ( result )
  {
    if ( a2 )
    {
      v4 = result[3];
      if ( v4 )
      {
        result = *(_DWORD **)(v4 + 8);
        if ( result != v3 )
        {
          if ( result )
          {
            j_exif_log_unref((int)result);
            v4 = v2[3];
          }
          *(_DWORD *)(v4 + 8) = v3;
          result = j_j_j_exif_mem_ref_0(v3);
        }
      }
    }
  }
  return result;
}

//----- (00007740) --------------------------------------------------------
signed int __fastcall exif_content_get_ifd(int a1)
{
  int v1; // r1@1
  int v2; // r0@2
  int v3; // r2@7
  signed int result; // r0@7

  v1 = a1;
  if ( a1 && (v2 = *(_DWORD *)(a1 + 8)) != 0 )
  {
    if ( *(_DWORD *)(v2 + 8) == v1 )
    {
      result = 2;
    }
    else if ( *(_DWORD *)v2 == v1 )
    {
      result = 0;
    }
    else if ( *(_DWORD *)(v2 + 4) == v1 )
    {
      result = 1;
    }
    else if ( *(_DWORD *)(v2 + 12) == v1 )
    {
      result = 3;
    }
    else
    {
      v3 = *(_DWORD *)(v2 + 16);
      result = 5;
      if ( v3 == v1 )
        result = 4;
    }
  }
  else
  {
    result = 5;
  }
  return result;
}

//----- (00007780) --------------------------------------------------------
unsigned int __fastcall exif_content_fix(int a1)
{
  int v1; // r4@1
  unsigned int result; // r0@1
  int v3; // r1@2
  int v4; // r2@2
  int v5; // r3@2
  unsigned int v6; // r5@2
  unsigned int v7; // r0@3
  unsigned int v8; // r9@6
  int v9; // r5@8
  int v10; // r6@9
  signed int v11; // r7@9
  signed int v12; // r0@11
  int v13; // r11@12
  unsigned int v14; // r8@17
  unsigned int v15; // r6@18
  int v16; // r0@19
  int v17; // r5@19
  int v18; // r2@21
  _DWORD *v19; // r3@22
  int v20; // r11@26
  int v21; // ST00_4@26
  int v22; // ST04_4@26
  int v23; // r7@26
  int v24; // r2@26
  int v25; // r3@26
  int v26; // [sp+8h] [bp-38h]@0
  signed int v27; // [sp+Ch] [bp-34h]@2
  unsigned int v28; // [sp+10h] [bp-30h]@1
  unsigned int v29; // [sp+14h] [bp-2Ch]@7

  v1 = a1;
  result = j_exif_content_get_ifd(a1);
  v28 = result;
  if ( v1 )
  {
    v27 = j_exif_data_get_data_type(*(_DWORD *)(v1 + 8));
    v6 = 0;
    if ( *(_DWORD *)(v1 + 4) )
    {
      do
      {
        j_exif_entry_fix(*(_DWORD *)(*(_DWORD *)v1 + 4 * v6), v3, v4, v5);
        v7 = *(_DWORD *)(v1 + 4);
        ++v6;
      }
      while ( v6 < v7 );
    }
    else
    {
      v7 = 0;
    }
    do
    {
      v8 = 0;
      if ( v7 )
      {
        v29 = v7;
        do
        {
          v9 = *(_DWORD *)(*(_DWORD *)v1 + 4 * v8);
          if ( v9 )
          {
            v10 = *(_DWORD *)(v9 + 20);
            v11 = j_exif_content_get_ifd(*(_DWORD *)(v9 + 20));
          }
          else
          {
            v11 = 5;
            v10 = ::v14;
          }
          v12 = j_exif_data_get_data_type(*(_DWORD *)(v10 + 8));
          if ( j_exif_tag_get_support_level_in_ifd(*(_DWORD *)v9, v11, v12) == 1 )
          {
            v13 = *(_DWORD *)(*(_DWORD *)(v10 + 12) + 8);
            j_exif_ifd_get_name(v11);
            j_exif_log(v13, 1);
            j_exif_content_remove_entry(v10, v9);
          }
          v7 = *(_DWORD *)(v1 + 4);
          ++v8;
        }
        while ( v8 < v7 );
      }
      else
      {
        v29 = 0;
        v7 = 0;
      }
    }
    while ( v29 != v7 );
    result = j_exif_tag_table_count();
    v14 = result;
    if ( result )
    {
      v15 = 0;
      do
      {
        v16 = j_exif_tag_table_get_tag(v15);
        v17 = v16;
        result = j_exif_tag_get_support_level_in_ifd(v16, v28, v27);
        if ( result == 2 )
        {
          result = *(_DWORD *)(v1 + 4);
          if ( !result )
            goto LABEL_26;
          v18 = 0;
          while ( 1 )
          {
            v19 = *(_DWORD **)(*(_DWORD *)v1 + 4 * v18);
            if ( *v19 == v17 )
              break;
            if ( ++v18 >= result )
              goto LABEL_26;
          }
          if ( !v19 )
          {
LABEL_26:
            v20 = *(_DWORD *)(*(_DWORD *)(v1 + 12) + 8);
            v21 = j_exif_tag_get_name_in_ifd(v17, v28);
            v22 = j_exif_ifd_get_name(v28);
            j_exif_log(v20, 1);
            v23 = j_exif_entry_new();
            j_exif_content_add_entry(v1, v23);
            j_exif_entry_initialize(v23, v17, v24, v25, v21, v22, v26);
            result = j_exif_entry_unref(v23);
          }
        }
        ++v15;
      }
      while ( v15 != v14 );
    }
  }
  return result;
}

//----- (000078FC) --------------------------------------------------------
int __fastcall exif_data_get_mnote_data(int a1)
{
  int v1; // r0@2
  int result; // r0@3

  if ( a1 && (v1 = *(_DWORD *)(a1 + 28)) != 0 )
    result = *(_DWORD *)(v1 + 4);
  else
    result = 0;
  return result;
}

//----- (0000790C) --------------------------------------------------------
int exif_data_new()
{
  _DWORD *v0; // r4@1
  int v1; // r5@1

  v0 = j_exif_mem_new_default();
  v1 = j_exif_data_new_mem((int)v0);
  j_exif_mem_unref((int)v0);
  return v1;
}

//----- (00007928) --------------------------------------------------------
int __fastcall exif_data_new_mem(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r4@2
  int v3; // r0@3
  unsigned int v4; // r5@4
  int v5; // r0@5
  int v6; // r0@7

  v1 = (_DWORD *)a1;
  if ( !a1 )
    return 0;
  v2 = j_exif_mem_alloc(a1, 32);
  if ( !v2 )
    return 0;
  v3 = j_exif_mem_alloc((int)v1, 32);
  *(_DWORD *)(v2 + 28) = v3;
  if ( !v3 )
  {
    j_exif_mem_free((int)v1, v2);
    return 0;
  }
  *(_DWORD *)(v3 + 16) = 1;
  *(_DWORD *)(*(_DWORD *)(v2 + 28) + 12) = v1;
  j_exif_mem_ref(v1);
  v4 = 0;
  do
  {
    v5 = j_exif_content_new_mem(*(_DWORD *)(*(_DWORD *)(v2 + 28) + 12));
    *(_DWORD *)(v2 + 4 * v4) = v5;
    if ( !v5 )
    {
      j_exif_data_free(v2);
      return 0;
    }
    ++v4;
    *(_DWORD *)(v5 + 8) = v2;
  }
  while ( v4 < 5 );
  *(_DWORD *)(*(_DWORD *)(v2 + 28) + 24) |= 1u;
  *(_DWORD *)(*(_DWORD *)(v2 + 28) + 24) |= 2u;
  v6 = *(_DWORD *)(v2 + 28);
  if ( v6 )
    *(_DWORD *)(v6 + 28) = 4;
  return v2;
}

//----- (000079AC) --------------------------------------------------------
int __fastcall exif_data_free(int result)
{
  int v1; // r4@1
  int v2; // r0@2
  int v3; // r5@2
  int v4; // r7@2
  int v5; // r0@4
  int v6; // r1@7
  int v7; // r1@9
  int v8; // r0@10
  int v9; // r0@12

  v1 = result;
  if ( result )
  {
    v2 = *(_DWORD *)(result + 28);
    v3 = 0;
    v4 = 0;
    if ( v2 )
      v3 = *(_DWORD *)(v2 + 12);
    do
    {
      v5 = *(_DWORD *)(v1 + 4 * v4);
      if ( v5 )
      {
        j_exif_content_unref(v5);
        *(_DWORD *)(v1 + 4 * v4) = 0;
      }
      ++v4;
    }
    while ( v4 != 5 );
    v6 = *(_DWORD *)(v1 + 20);
    if ( v6 )
    {
      j_exif_mem_free(v3, v6);
      *(_DWORD *)(v1 + 20) = 0;
    }
    v7 = *(_DWORD *)(v1 + 28);
    if ( v7 )
    {
      v8 = *(_DWORD *)(v7 + 8);
      if ( v8 )
      {
        j_exif_log_unref(v8);
        *(_DWORD *)(*(_DWORD *)(v1 + 28) + 8) = 0;
        v7 = *(_DWORD *)(v1 + 28);
      }
      v9 = *(_DWORD *)(v7 + 4);
      if ( v9 )
      {
        j_exif_mnote_data_unref(v9);
        *(_DWORD *)(*(_DWORD *)(v1 + 28) + 4) = 0;
        v7 = *(_DWORD *)(v1 + 28);
      }
      j_exif_mem_free(v3, v7);
      j_exif_mem_free(v3, v1);
    }
    result = j_j_j_exif_mem_unref(v3);
  }
  return result;
}

//----- (00007A28) --------------------------------------------------------
int __fastcall exif_data_set_option(int result, int a2)
{
  if ( result )
  {
    result = *(_DWORD *)(result + 28);
    *(_DWORD *)(result + 24) |= a2;
  }
  return result;
}

//----- (00007A3C) --------------------------------------------------------
int __fastcall exif_data_set_data_type(int result, int a2)
{
  if ( result )
  {
    result = *(_DWORD *)(result + 28);
    if ( result )
      *(_DWORD *)(result + 28) = a2;
  }
  return result;
}

//----- (00007A4C) --------------------------------------------------------
int __fastcall exif_data_new_from_data(int a1, unsigned int a2)
{
  unsigned int v2; // r4@1
  int v3; // r5@1
  _DWORD *v4; // r6@1
  int v5; // r7@1

  v2 = a2;
  v3 = a1;
  v4 = j_exif_mem_new_default();
  v5 = j_exif_data_new_mem((int)v4);
  j_exif_mem_unref((int)v4);
  j_exif_data_load_data(v5, v3, v2);
  return v5;
}

//----- (00007A78) --------------------------------------------------------
unsigned int __fastcall exif_data_load_data(unsigned int result, int a2, unsigned int a3)
{
  int v3; // r4@1
  unsigned int v4; // r5@1
  int v5; // r6@1
  int v6; // r0@6
  int v7; // r7@9
  int v8; // r1@10
  int v9; // r0@14
  unsigned int v10; // r0@15
  unsigned int v11; // r1@17
  int v12; // r1@22
  int v13; // r0@22
  unsigned int v14; // r7@24
  signed int v15; // r0@24
  signed int v16; // r1@24
  int v17; // r1@29
  int v18; // r1@36
  unsigned int v19; // r9@36
  int v20; // r1@39
  unsigned int v21; // r9@39
  int v22; // r6@50
  int v23; // ST00_4@50
  int v24; // r0@55
  _DWORD *v25; // r8@64
  _DWORD *v26; // r0@66
  int v27; // r1@74
  _DWORD *v28; // r0@74
  int v29; // r0@75
  int v30; // r1@75
  int v31; // r1@75
  int v32; // r0@75
  int v33; // r1@75

  v3 = result;
  v4 = a3;
  v5 = a2;
  if ( result )
  {
    if ( a3 )
    {
      if ( a2 )
      {
        result = *(_DWORD *)(result + 28);
        if ( result )
        {
          j_exif_log(*(_DWORD *)(result + 8), 1);
          if ( v4 <= 5 )
          {
            v6 = *(_DWORD *)(v3 + 28);
LABEL_47:
            v13 = *(_DWORD *)(v6 + 8);
            return j_exif_log(v13, 3);
          }
          if ( !memcmp((const void *)v5, "Exif", 6u) )
          {
            j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
          }
          else
          {
LABEL_8:
            if ( !v4 )
            {
LABEL_46:
              v6 = *(_DWORD *)(v3 + 28);
              goto LABEL_47;
            }
            v7 = 0;
            while ( 1 )
            {
              v8 = *(_BYTE *)(v5 + v7);
              if ( v8 == 216 )
              {
                v5 += v7 + 1;
                v9 = v4 - v7;
LABEL_19:
                v4 = v9 - 1;
                if ( (unsigned int)(v9 - 1) > 2 )
                  goto LABEL_8;
                goto LABEL_45;
              }
              if ( v8 != 255 )
                break;
              if ( v4 == ++v7 )
                goto LABEL_46;
            }
            v10 = v4 - v7;
            if ( v4 - v7 >= 3 && v8 == 224 )
            {
              result = v10 - 1;
              v11 = *(_BYTE *)(v5 + v7 + 2) | (*(_BYTE *)(v5 + v7 + 1) << 8);
              if ( result < v11 )
                return result;
              v5 += (*(_BYTE *)(v5 + v7 + 2) | (*(_BYTE *)(v5 + v7 + 1) << 8)) + v7 + 1;
              v9 = v4 - v11 - v7;
              goto LABEL_19;
            }
            if ( v8 != 225 )
              goto LABEL_46;
            if ( v10 <= 2 )
            {
LABEL_45:
              v6 = *(_DWORD *)(v3 + 28);
              goto LABEL_47;
            }
            v22 = v5 + v7;
            v23 = *(_BYTE *)(v22 + 2) | (*(_BYTE *)(v22 + 1) << 8);
            j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
            v4 = v4 - 3 - v7;
            if ( v4 <= 5 )
            {
              v6 = *(_DWORD *)(v3 + 28);
              goto LABEL_47;
            }
            v5 = v22 + 3;
          }
          v12 = memcmp((const void *)v5, "Exif", 6u);
          v13 = *(_DWORD *)(*(_DWORD *)(v3 + 28) + 8);
          if ( v12 )
            return j_exif_log(v13, 3);
          result = j_exif_log(v13, 1);
          if ( v4 < 0xE )
            return result;
          v14 = v4;
          v15 = 0;
          v16 = 0;
          if ( *(_WORD *)(v5 + 6) != 18761 )
            v16 = 1;
          if ( v4 > 0xFFFE )
            v14 = 65534;
          if ( v16 )
          {
            v17 = *(_DWORD *)(v3 + 28);
            if ( *(_WORD *)(v5 + 6) != 19789 )
              v15 = 1;
            if ( v15 )
            {
              v13 = *(_DWORD *)(v17 + 8);
              return j_exif_log(v13, 3);
            }
            *(_DWORD *)v17 = 0;
          }
          else
          {
            **(_DWORD **)(v3 + 28) = 1;
          }
          result = j_exif_get_short(v5 + 8, **(_DWORD **)(v3 + 28));
          if ( result == 42 )
          {
            v18 = **(_DWORD **)(v3 + 28);
            v19 = j_exif_get_long();
            result = j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
            if ( v19 <= v14 && v19 + 8 <= v14 )
            {
              sub_7F1C(v3, 0, v5 + 6, v14 - 6, v19, 0);
              result = v19 + 8 + 12 * j_exif_get_short(v19 + v5 + 6, **(_DWORD **)(v3 + 28));
              if ( result + 4 <= v14 )
              {
                v20 = **(_DWORD **)(v3 + 28);
                v21 = j_exif_get_long();
                if ( v21 )
                {
                  j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
                  if ( v21 > v14 || v21 + 6 > v14 )
                    j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 3);
                  else
                    sub_7F1C(v3, 1u, v5 + 6, v14 - 6, v21, 0);
                }
                if ( j_exif_content_get_entry(*(_DWORD *)v3, 37500) )
                {
                  v24 = *(_DWORD *)v3;
                }
                else if ( j_exif_content_get_entry(*(_DWORD *)(v3 + 4), 37500) )
                {
                  v24 = *(_DWORD *)(v3 + 4);
                }
                else if ( j_exif_content_get_entry(*(_DWORD *)(v3 + 8), 37500) )
                {
                  v24 = *(_DWORD *)(v3 + 8);
                }
                else if ( j_exif_content_get_entry(*(_DWORD *)(v3 + 12), 37500) )
                {
                  v24 = *(_DWORD *)(v3 + 12);
                }
                else
                {
                  if ( !j_exif_content_get_entry(*(_DWORD *)(v3 + 16), 37500) )
                    goto LABEL_76;
                  v24 = *(_DWORD *)(v3 + 16);
                }
                v25 = j_exif_content_get_entry(v24, 37500);
                if ( v25 )
                {
                  if ( j_exif_mnote_data_olympus_identify(v3, (int)v25) )
                  {
                    j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
                    v26 = j_exif_mnote_data_olympus_new(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 12));
                  }
                  else if ( j_exif_mnote_data_canon_identify((int *)v3) )
                  {
                    j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
                    v26 = j_exif_mnote_data_canon_new(
                            *(_DWORD *)(*(_DWORD *)(v3 + 28) + 12),
                            *(_DWORD *)(*(_DWORD *)(v3 + 28) + 24));
                  }
                  else if ( j_exif_mnote_data_fuji_identify(v3, (int)v25) )
                  {
                    j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
                    v26 = j_exif_mnote_data_fuji_new(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 12));
                  }
                  else
                  {
                    if ( !j_exif_mnote_data_pentax_identify(v3, (int)v25) )
                      goto LABEL_74;
                    j_exif_log(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 8), 1);
                    v26 = j_exif_mnote_data_pentax_new(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 12));
                  }
                  *(_DWORD *)(*(_DWORD *)(v3 + 28) + 4) = v26;
LABEL_74:
                  v27 = *(_DWORD *)(v3 + 28);
                  v28 = *(_DWORD **)(v27 + 4);
                  if ( v28 )
                  {
                    j_exif_mnote_data_log(v28, *(_DWORD **)(v27 + 8));
                    v29 = *(_DWORD *)(v3 + 28);
                    v30 = *(_DWORD *)v29;
                    j_exif_mnote_data_set_byte_order(*(_DWORD *)(v29 + 4));
                    v31 = *(_DWORD *)(v3 + 28);
                    v32 = *(_DWORD *)(v31 + 4);
                    v33 = *(_DWORD *)(v31 + 20);
                    j_exif_mnote_data_set_offset(v32);
                    j_exif_mnote_data_load(*(_DWORD *)(*(_DWORD *)(v3 + 28) + 4));
                  }
                }
LABEL_76:
                result = *(_BYTE *)(*(_DWORD *)(v3 + 28) + 24);
                if ( result & 2 )
                  result = j_j_j_exif_data_fix(v3);
                return result;
              }
            }
          }
        }
      }
    }
  }
  return result;
}

//----- (00007F1C) --------------------------------------------------------
int __fastcall sub_7F1C(int result, unsigned int a2, int a3, unsigned int a4, unsigned int a5, unsigned int a6)
{
  int v6; // r7@1
  unsigned int v7; // r8@1
  int v8; // r0@5
  unsigned int v9; // r11@6
  int v10; // r10@6
  unsigned int v11; // r5@6
  unsigned int v12; // r6@6
  unsigned int v13; // r4@8
  int v14; // r5@10
  unsigned int v15; // r10@10
  unsigned int v16; // r9@11
  int v17; // r6@12
  signed int *v18; // r4@12
  signed int v19; // r5@12
  signed int v20; // r0@15
  int v21; // r1@18
  int v22; // r4@18
  int v23; // r6@18
  bool v24; // zf@25
  int v25; // r4@28
  int v26; // r0@28
  int v27; // r10@31
  int v28; // r1@31
  int v29; // r5@31
  int v30; // r0@31
  unsigned int v31; // r1@31
  unsigned int v32; // r5@31
  int v33; // r1@34
  unsigned int v34; // r4@34
  int v35; // r4@39
  int v36; // r0@39
  signed int v37; // r10@40
  unsigned int v38; // r1@57
  signed int v39; // r0@57
  int v40; // r0@62
  int v41; // r3@62
  int v42; // r0@74
  int v43; // r12@76
  int v44; // ST00_4@76
  int v45; // ST04_4@76
  int v46; // ST08_4@76
  int v47; // ST0C_4@76
  int v48; // ST10_4@76
  int v49; // ST14_4@76
  int v50; // r0@76
  int v51; // [sp+4h] [bp-84h]@18
  unsigned int v52; // [sp+34h] [bp-54h]@11
  int v53; // [sp+38h] [bp-50h]@40
  unsigned int v54; // [sp+40h] [bp-48h]@11
  unsigned int v55; // [sp+44h] [bp-44h]@11
  unsigned int v56; // [sp+50h] [bp-38h]@10
  unsigned int v57; // [sp+54h] [bp-34h]@10
  int v58; // [sp+5Ch] [bp-2Ch]@10

  v6 = result;
  v7 = a2;
  if ( result )
  {
    if ( a2 <= 4 )
    {
      result = *(_DWORD *)(result + 28);
      if ( result )
      {
        if ( a6 >= 0x1F )
        {
          v8 = *(_DWORD *)(result + 8);
          return j_exif_log(v8, 3);
        }
        v9 = a5;
        v10 = a3;
        v11 = a4;
        v12 = a5 + 2;
        if ( a5 > 0xFFFFFFFD || v12 > a4 )
        {
          v8 = *(_DWORD *)(result + 8);
          return j_exif_log(v8, 3);
        }
        v13 = j_exif_get_short(a3 + a5, *(_DWORD *)result);
        j_exif_log(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 8), 1);
        if ( v12 + 12 * v13 > v11 )
        {
          j_exif_log(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 8), 1);
          v13 = (v11 - v12) / 0xC;
        }
        result = (unsigned __int16)v13;
        v57 = v11;
        v14 = v10;
        v15 = (unsigned __int16)v13;
        v56 = (unsigned __int16)v13;
        v58 = v14;
        if ( (_WORD)v13 )
        {
          v52 = a6 + 1;
          v16 = 0;
          v54 = 0;
          v55 = 0;
          do
          {
            v17 = v14 + v9;
            v18 = (signed int *)(v14 + v9 + 2);
            v19 = j_exif_get_short((int)v18, **(_DWORD **)(v6 + 28));
            if ( v19 > 40964 )
            {
              v20 = 40965;
            }
            else
            {
              if ( (unsigned int)(v19 - 513) < 2 || v19 == 34665 )
                goto LABEL_18;
              v20 = 34853;
            }
            if ( v19 != v20 )
            {
              if ( j_exif_tag_get_name_in_ifd(v19, v7) )
              {
                result = *(_DWORD *)(v6 + 28);
LABEL_31:
                v27 = j_exif_entry_new_mem(*(_DWORD *)(result + 12));
                *(_DWORD *)v27 = j_exif_get_short((int)v18, **(_DWORD **)(v6 + 28));
                *(_DWORD *)(v27 + 4) = j_exif_get_short(v17 + 4, **(_DWORD **)(v6 + 28));
                v28 = **(_DWORD **)(v6 + 28);
                *(_DWORD *)(v27 + 8) = j_exif_get_long();
                v29 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                j_exif_tag_get_name(*(_DWORD *)v27);
                j_exif_log(v29, 1);
                v30 = j_exif_format_get_size(*(_DWORD *)(v27 + 4));
                v31 = *(_DWORD *)(v27 + 8);
                v32 = v30 * v31;
                if ( v30 * v31 >= v31 && v32 )
                {
                  if ( v32 < 5 )
                  {
                    v34 = v9 + 10;
                  }
                  else
                  {
                    v33 = **(_DWORD **)(v6 + 28);
                    v34 = j_exif_get_long();
                  }
                  v38 = v34 + v32;
                  v39 = 1;
                  if ( v34 + v32 >= v34 )
                    v39 = 0;
                  if ( v38 > v57 || v39 || v38 < v32 )
                  {
                    j_exif_log(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 8), 1);
                  }
                  else
                  {
                    v40 = sub_859C(v6, v32);
                    *(_DWORD *)(v27 + 12) = v40;
                    if ( v40 )
                    {
                      *(_DWORD *)(v27 + 16) = v32;
                      _aeabi_memcpy(v40, v58 + v34, v32, v41);
                    }
                    else
                    {
                      j_exif_log(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 8), 2);
                    }
                    if ( *(_DWORD *)v27 == 37500 )
                    {
                      v42 = *(_DWORD *)(v27 + 12);
                      if ( v42 )
                      {
                        if ( *(_DWORD *)(v27 + 16) >= 7u )
                        {
                          v43 = *(_BYTE *)(v42 + 6);
                          v44 = *(_BYTE *)v42;
                          v45 = *(_BYTE *)(v42 + 1);
                          v46 = *(_BYTE *)(v42 + 2);
                          v47 = *(_BYTE *)(v42 + 3);
                          v48 = *(_BYTE *)(v42 + 4);
                          v49 = *(_BYTE *)(v42 + 5);
                          v50 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                          goto LABEL_81;
                        }
                      }
                      else
                      {
                        v50 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
LABEL_81:
                        j_exif_log(v50, 1);
                      }
                      *(_DWORD *)(*(_DWORD *)(v6 + 28) + 20) = v34;
                    }
                    j_exif_content_add_entry(*(_DWORD *)(v6 + 4 * v7), v27);
                  }
                }
                result = j_exif_entry_unref(v27);
              }
              else
              {
                v37 = *v18;
                v53 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                if ( *v18 )
                  v37 = 1;
                j_exif_ifd_get_name(v7);
                if ( v37 )
                {
                  j_exif_log(v53, 1);
                  result = *(_DWORD *)(v6 + 28);
                  if ( !(*(_BYTE *)(result + 24) & 1) )
                    goto LABEL_31;
                }
                else
                {
                  result = j_exif_log(v53, 1);
                }
              }
              v14 = v58;
              v15 = v56;
              goto LABEL_86;
            }
LABEL_18:
            v21 = **(_DWORD **)(v6 + 28);
            v22 = j_exif_get_long();
            v23 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
            v51 = j_exif_tag_get_name(v19);
            j_exif_log(v23, 1);
            if ( v19 > 40964 )
            {
              result = 40965;
              v24 = v19 == 40965;
              v14 = v58;
              if ( !v24 )
                return result;
              if ( v7 != 4 )
              {
                if ( !*(_DWORD *)(*(_DWORD *)(v6 + 16) + 4) )
                {
                  result = sub_7F1C(v6, 4u, v58, v57, v22, v52);
                  goto LABEL_86;
                }
                v35 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                v36 = 4;
                goto LABEL_71;
              }
              v25 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
              v26 = 4;
            }
            else
            {
              if ( v19 <= 34664 )
              {
                if ( v19 == 513 )
                {
                  result = v55;
                  v14 = v58;
                  if ( v55 )
                  {
                    if ( v22 )
                      result = sub_8E68(v6, v58, v57, v22, v55, v51, v22);
                  }
                  v54 = v22;
                }
                else
                {
                  result = 514;
                  v24 = v19 == 514;
                  v14 = v58;
                  if ( !v24 )
                    return result;
                  result = v54;
                  if ( v54 && v22 )
                    result = sub_8E68(v6, v58, v57, v54, v22, v51, v22);
                  v55 = v22;
                }
                goto LABEL_86;
              }
              if ( v19 == 34665 )
              {
                v14 = v58;
                if ( v7 != 2 )
                {
                  if ( !*(_DWORD *)(*(_DWORD *)(v6 + 8) + 4) )
                  {
                    result = sub_7F1C(v6, 2u, v58, v57, v22, v52);
                    goto LABEL_86;
                  }
                  v35 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                  v36 = 2;
                  goto LABEL_71;
                }
                v25 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                v26 = 2;
              }
              else
              {
                result = 34853;
                v24 = v19 == 34853;
                v14 = v58;
                if ( !v24 )
                  return result;
                if ( v7 != 3 )
                {
                  if ( !*(_DWORD *)(*(_DWORD *)(v6 + 12) + 4) )
                  {
                    result = sub_7F1C(v6, 3u, v58, v57, v22, v52);
                    goto LABEL_86;
                  }
                  v35 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                  v36 = 3;
LABEL_71:
                  j_exif_ifd_get_name(v36);
                  result = j_exif_log(v35, 1);
                  goto LABEL_86;
                }
                v25 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
                v26 = 3;
              }
            }
            j_exif_ifd_get_name(v26);
            result = j_exif_log(v25, 1);
LABEL_86:
            ++v16;
            v9 += 12;
          }
          while ( v16 < v15 );
        }
      }
    }
  }
  return result;
}

//----- (00008424) --------------------------------------------------------
int __fastcall exif_data_fix(int result)
{
  int v1; // r9@1
  int v2; // r4@2
  int v3; // r7@4
  int v4; // r6@9

  v1 = result;
  if ( result )
  {
    v2 = 0;
    do
    {
      v4 = *(_DWORD *)(v1 + 4 * v2);
      if ( j_exif_content_get_ifd(*(_DWORD *)(v1 + 4 * v2)) != 1
        || (result = *(_DWORD *)(v4 + 8), *(_DWORD *)(result + 20)) )
      {
        result = j_exif_content_fix(v4);
      }
      else if ( *(_DWORD *)(v4 + 4) )
      {
        result = j_exif_log(*(_DWORD *)(*(_DWORD *)(result + 28) + 8), 1);
        v3 = *(_DWORD *)(v4 + 4);
        if ( v3 )
        {
          do
          {
            j_exif_content_remove_entry(v4, *(_DWORD *)(*(_DWORD *)v4 + 4 * v3 - 4));
            result = *(_DWORD *)(v4 + 4);
            if ( v3 == result )
            {
              j_exif_log(*(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v4 + 8) + 28) + 8), 1);
              result = *(_DWORD *)(v4 + 4) - 1;
              *(_DWORD *)(v4 + 4) = result;
            }
            v3 = result;
          }
          while ( result );
        }
      }
      ++v2;
    }
    while ( v2 != 5 );
  }
  return result;
}

//----- (000084C8) --------------------------------------------------------
int __fastcall exif_data_save_data(int result, int *a2, int *a3)
{
  int *v3; // r4@1
  int *v4; // r6@1
  int v5; // r5@1
  int v6; // r0@4
  signed __int16 v7; // r2@5
  int v8; // r1@7
  int v9; // r0@7
  int v10; // ST00_4@7

  v3 = a3;
  v4 = a2;
  v5 = result;
  if ( a3 )
  {
    result = 0;
    *a3 = 0;
    if ( v5 )
    {
      if ( a2 )
      {
        *a3 = 14;
        v6 = sub_859C(v5, 14);
        *v4 = v6;
        if ( v6 )
        {
          v7 = 19789;
          *(_WORD *)(v6 + 4) = 0;
          *(_DWORD *)v6 = 1718188101;
          if ( **(_DWORD **)(v5 + 28) == 1 )
            v7 = 18761;
          *(_WORD *)(*v4 + 6) = v7;
          j_exif_set_sshort(*v4 + 8, **(_DWORD **)(v5 + 28), 42);
          v8 = **(_DWORD **)(v5 + 28);
          v9 = *v4 + 10;
          j_exif_set_long();
          j_exif_log(*(_DWORD *)(*(_DWORD *)(v5 + 28) + 8), 1);
          sub_85E4(v5, *(_DWORD *)v5, v4, v3, *v3 - 6);
          v10 = *v3;
          result = j_exif_log(*(_DWORD *)(*(_DWORD *)(v5 + 28) + 8), 1);
        }
        else
        {
          result = 0;
          *v3 = 0;
        }
      }
    }
  }
  return result;
}

//----- (0000859C) --------------------------------------------------------
int __fastcall sub_859C(int a1, int a2)
{
  int v2; // r5@1
  int result; // r0@1

  v2 = a1;
  result = 0;
  if ( v2 && a2 )
  {
    result = j_exif_mem_alloc(*(_DWORD *)(*(_DWORD *)(v2 + 28) + 12), a2);
    if ( !result )
    {
      j_exif_log(*(_DWORD *)(*(_DWORD *)(v2 + 28) + 8), 2);
      result = 0;
    }
  }
  return result;
}

//----- (000085E4) --------------------------------------------------------
int __fastcall sub_85E4(int result, int a2, int *a3, int *a4, int a5)
{
  int *v5; // r6@1
  int v6; // r8@1
  int v7; // r11@1
  int v12; // r4@7
  int v13; // ST00_4@7
  int v14; // r5@7
  int v15; // r11@8
  unsigned int v16; // r7@8
  int v17; // r4@9
  int *v18; // r0@10
  int v19; // r0@11
  int v20; // r10@11
  int v21; // r2@15
  int v22; // r3@15
  int v23; // r1@15
  int v24; // r3@15
  unsigned int v25; // r9@15
  int v26; // r6@16
  int v27; // r10@16
  int v28; // r0@16
  int v29; // r3@17
  int v30; // r1@17
  int v31; // r1@19
  int v32; // r0@19
  unsigned int v33; // r0@25
  int v34; // r4@28
  int v35; // r11@29
  int v36; // r10@31
  int v37; // r1@31
  int v38; // r0@31
  int v39; // r3@31
  int v40; // r1@31
  int v41; // r0@31
  int v42; // r2@31
  int v43; // r5@31
  int v44; // r0@31
  int v45; // r1@32
  int v46; // r0@32
  int v47; // r2@32
  int v48; // r1@32
  int *v49; // r7@34
  int v50; // r1@34
  int v51; // r0@34
  int v52; // r3@34
  int v53; // r1@34
  int v54; // r0@34
  int v55; // r1@34
  int v56; // r1@38
  int v57; // r0@38
  int v58; // r3@38
  int v59; // r1@38
  int v60; // r0@38
  int v61; // r1@40
  int v62; // r0@40
  int v63; // r3@40
  int v64; // r1@40
  int v65; // r0@40
  int v66; // r4@42
  int (*v67)(const void *, const void *); // r3@42
  int v68; // r3@47
  int v69; // r1@47
  int v70; // r0@47
  int v71; // r1@52
  unsigned int v72; // r7@53
  signed int v73; // r2@57
  int v74; // r9@69
  int v75; // r4@69
  int v76; // r0@69
  int v77; // r0@70
  int v78; // r1@71
  int v79; // [sp+1Ch] [bp-4Ch]@7
  unsigned int v80; // [sp+20h] [bp-48h]@7
  int v81; // [sp+28h] [bp-40h]@6
  int *v82; // [sp+2Ch] [bp-3Ch]@1
  int v83; // [sp+30h] [bp-38h]@7
  int *v84; // [sp+34h] [bp-34h]@1

  v5 = a4;
  v6 = result;
  v7 = a2;
  v82 = a4;
  v84 = a3;
  if ( !result )
    return result;
  if ( !a4 )
    return result;
  result = (int)a3;
  if ( !a3 )
    return result;
  if ( !a2 )
    return result;
  result = *(_DWORD *)(v6 + 28);
  if ( !result )
    return result;
  __asm { VMOV.F64        D8, #0.5 }
  v81 = a5;
  __asm { VMOV.I32        D8, #0 }
  while ( 1 )
  {
    v72 = 0;
    do
    {
      if ( *(_DWORD *)(v6 + 4 * v72) == v7 )
        break;
      ++v72;
    }
    while ( v72 < 5 );
    v71 = 0;
    if ( v72 <= 5 )
    {
      v73 = 0;
      switch ( v72 )
      {
        case 0u:
          v71 = *(_DWORD *)(*(_DWORD *)(v6 + 8) + 4) || *(_DWORD *)(*(_DWORD *)(v6 + 16) + 4);
          if ( *(_DWORD *)(*(_DWORD *)(v6 + 12) + 4) )
            ++v71;
          break;
        case 1u:
          v73 = *(_DWORD *)(v6 + 24);
          v71 = 0;
          if ( v73 )
            v73 = 2;
          goto LABEL_69;
        case 2u:
          v71 = *(_DWORD *)(*(_DWORD *)(v6 + 16) + 4) != 0;
          break;
        case 3u:
        case 4u:
          goto LABEL_69;
        case 5u:
          return result;
        default:
          break;
      }
    }
    v73 = 0;
LABEL_69:
    v74 = v73 + v71;
    v75 = (12 * (*(_DWORD *)(v7 + 4) + v73 + v71) | 2) + *v5 + 4;
    v76 = j_exif_mem_realloc(*(_DWORD *)(result + 12), *v84, v75);
    if ( !v76 )
    {
      v77 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
      return j_exif_log(v77, 2);
    }
    v79 = v74;
    *v84 = v76;
    *v5 = v75;
    j_exif_set_sshort(*v84 + v81 + 6, **(_DWORD **)(v6 + 28), *(_DWORD *)(v7 + 4) + v74);
    v80 = v72;
    v12 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
    v13 = *(_DWORD *)(v7 + 4);
    j_exif_ifd_get_name(v72);
    j_exif_log(v12, 1);
    v14 = v7;
    v83 = v7;
    if ( *(_DWORD *)(v7 + 4) )
    {
      v15 = v81 + 16;
      v16 = 0;
      while ( 1 )
      {
        v17 = *(_DWORD *)(*(_DWORD *)v14 + 4 * v16);
        if ( v17 )
        {
          v18 = *(int **)(v6 + 28);
          if ( v18 )
          {
            j_exif_set_sshort(*v84 + v15 - 8, *v18, *(_WORD *)v17);
            j_exif_set_sshort(*v84 + v15 - 6, **(_DWORD **)(v6 + 28), *(_WORD *)(v17 + 4));
            v19 = *(_DWORD *)(v6 + 28);
            v20 = v15 - 6;
            if ( !(*(_BYTE *)(v19 + 24) & 4) && *(_DWORD *)v17 == 37500 && *(_DWORD *)(v19 + 4) )
            {
              j_exif_mem_free(*(_DWORD *)(v19 + 12), *(_DWORD *)(v17 + 12));
              __asm { VSTR            D8, [R5] }
              _VF = __OFSUB__(*v82, 6);
              j_exif_mnote_data_set_offset(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 4));
              j_exif_mnote_data_save(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 4));
              *(_DWORD *)(v17 + 8) = *(_DWORD *)(v17 + 16);
              v19 = *(_DWORD *)(v6 + 28);
            }
            v21 = *(_DWORD *)(v17 + 8);
            v22 = *v84;
            v23 = *(_DWORD *)v19;
            j_exif_set_long();
            v25 = j_exif_format_get_size(*(_DWORD *)(v17 + 4)) * *(_DWORD *)(v17 + 8);
            if ( v25 < 5 )
              goto LABEL_19;
            v26 = *v82;
            v27 = (v25 & 1) + v25 + *v82;
            v28 = j_exif_mem_realloc(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 12), *v84, v27);
            if ( v28 )
            {
              *v84 = v28;
              *v82 = v27;
              v20 = v26 - 6;
              v29 = *v84;
              v30 = **(_DWORD **)(v6 + 28);
              j_exif_set_long();
              if ( v25 & 1 )
                *(_BYTE *)(*v84 + *v82 - 1) = 0;
LABEL_19:
              v31 = *(_DWORD *)(v17 + 12);
              v14 = v83;
              v32 = *v84 + v20 + 6;
              if ( v31 )
                _aeabi_memcpy(v32, v31, v25, v24);
              else
                _aeabi_memset(v32, v25, 0);
              if ( v25 <= 3 )
                _aeabi_memset(*v84 + v20 + 6 + v25, 4 - v25, 0);
              goto LABEL_25;
            }
            j_exif_log(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 8), 2);
            v14 = v83;
          }
        }
LABEL_25:
        v33 = *(_DWORD *)(v14 + 4);
        ++v16;
        v15 += 12;
        if ( v16 >= v33 )
          goto LABEL_28;
      }
    }
    v33 = 0;
LABEL_28:
    v34 = v81 + 2 + 12 * v33;
    if ( v80 == 2 )
    {
      v5 = v82;
      v35 = v79;
      if ( !*(_DWORD *)(*(_DWORD *)(v6 + 16) + 4) )
        goto LABEL_42;
      v49 = v84;
      j_exif_set_sshort(v34 + *v84 + 6, **(_DWORD **)(v6 + 28), -24571);
      j_exif_set_sshort(v34 + *v84 + 8, **(_DWORD **)(v6 + 28), 4);
      v50 = **(_DWORD **)(v6 + 28);
      v51 = v34 + *v84;
      j_exif_set_long();
      v52 = *v82;
      v53 = **(_DWORD **)(v6 + 28);
      v54 = v34 + *v84 + 14;
      j_exif_set_long();
      v55 = *(_DWORD *)(v6 + 16);
      goto LABEL_41;
    }
    v5 = v82;
    v35 = v79;
    if ( v80 == 1 )
      break;
    if ( !v80 )
    {
      if ( *(_DWORD *)(*(_DWORD *)(v6 + 8) + 4) || *(_DWORD *)(*(_DWORD *)(v6 + 16) + 4) )
      {
        j_exif_set_sshort(v34 + *v84 + 6, **(_DWORD **)(v6 + 28), -30871);
        j_exif_set_sshort(v34 + *v84 + 8, **(_DWORD **)(v6 + 28), 4);
        v56 = **(_DWORD **)(v6 + 28);
        v57 = v34 + *v84;
        j_exif_set_long();
        v58 = *v82;
        v59 = **(_DWORD **)(v6 + 28);
        v60 = v34 + *v84 + 14;
        j_exif_set_long();
        sub_85E4(v6, *(_DWORD *)(v6 + 8), v84, v82, *v82 - 6);
        v34 += 12;
      }
      if ( *(_DWORD *)(*(_DWORD *)(v6 + 12) + 4) )
      {
        v49 = v84;
        j_exif_set_sshort(v34 + *v84 + 6, **(_DWORD **)(v6 + 28), -30683);
        j_exif_set_sshort(v34 + *v84 + 8, **(_DWORD **)(v6 + 28), 4);
        v61 = **(_DWORD **)(v6 + 28);
        v62 = v34 + *v84;
        j_exif_set_long();
        v63 = *v82;
        v64 = **(_DWORD **)(v6 + 28);
        v65 = v34 + *v84 + 14;
        j_exif_set_long();
        v55 = *(_DWORD *)(v6 + 12);
LABEL_41:
        sub_85E4(v6, v55, v49, v5, *v5 - 6);
        v34 += 12;
        goto LABEL_42;
      }
    }
LABEL_42:
    v66 = v34 + 6;
    v67 = (int (*)(const void *, const void *))sub_8F3C;
    if ( **(_DWORD **)(v6 + 28) == 1 )
      v67 = (int (*)(const void *, const void *))sub_8F10;
    qsort((void *)(v66 + -12 * (v35 + *(_DWORD *)(v14 + 4)) + *v84), v35 + *(_DWORD *)(v14 + 4), 0xCu, v67);
    if ( v80 || !*(_DWORD *)(*(_DWORD *)(v6 + 4) + 4) && !*(_DWORD *)(v6 + 24) )
    {
      v78 = **(_DWORD **)(v6 + 28);
      _CF = __CFADD__(*v84, v66);
      return j_j_j_exif_set_long();
    }
    v68 = *v5;
    v69 = **(_DWORD **)(v6 + 28);
    v70 = *v84 + v66;
    result = j_exif_set_long();
    if ( v5 )
    {
      result = (int)v84;
      if ( v84 )
      {
        v7 = *(_DWORD *)(v6 + 4);
        if ( v7 )
        {
          result = *(_DWORD *)(v6 + 28);
          v81 = *v5 - 6;
          if ( result )
            continue;
        }
      }
    }
    return result;
  }
  if ( !*(_DWORD *)(v6 + 24) )
    goto LABEL_42;
  v36 = v14;
  j_exif_set_sshort(v34 + *v84 + 6, **(_DWORD **)(v6 + 28), 513);
  j_exif_set_sshort(v34 + *v84 + 8, **(_DWORD **)(v6 + 28), 4);
  v37 = **(_DWORD **)(v6 + 28);
  v38 = v34 + *v84;
  j_exif_set_long();
  v39 = *v82;
  v40 = **(_DWORD **)(v6 + 28);
  v41 = v34 + *v84 + 14;
  j_exif_set_long();
  v42 = *(_DWORD *)(v6 + 24);
  v43 = v42 + *v82;
  v44 = j_exif_mem_realloc(*(_DWORD *)(*(_DWORD *)(v6 + 28) + 12), *v84, v42 + *v82);
  if ( v44 )
  {
    *v84 = v44;
    *v82 = v43;
    _aeabi_memcpy(
      *v84 + v43 - *(_DWORD *)(v6 + 24),
      *(_DWORD *)(v6 + 20),
      *(_DWORD *)(v6 + 24),
      v43 - *(_DWORD *)(v6 + 24));
    j_exif_set_sshort(v34 + *v84 + 18, **(_DWORD **)(v6 + 28), 514);
    j_exif_set_sshort(v34 + *v84 + 20, **(_DWORD **)(v6 + 28), 4);
    v45 = **(_DWORD **)(v6 + 28);
    v46 = v34 + *v84;
    j_exif_set_long();
    v47 = *(_DWORD *)(v6 + 24);
    _CF = __CFADD__(v34, *v84);
    v48 = **(_DWORD **)(v6 + 28);
    j_exif_set_long();
    v34 += 24;
    v14 = v36;
    goto LABEL_42;
  }
  v77 = *(_DWORD *)(*(_DWORD *)(v6 + 28) + 8);
  return j_exif_log(v77, 2);
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);

//----- (00008C20) --------------------------------------------------------
_DWORD *__fastcall exif_data_new_from_file(const char *a1)
{
  const char *v1; // r4@1
  int v2; // r5@1
  _DWORD *v3; // r4@1

  v1 = a1;
  v2 = j_exif_loader_new();
  j_exif_loader_write_file(v2, v1);
  v3 = j_exif_loader_get_data(v2);
  j_exif_loader_unref(v2);
  return v3;
}

//----- (00008C48) --------------------------------------------------------
int __fastcall exif_data_ref(int result)
{
  if ( result )
  {
    result = *(_DWORD *)(result + 28);
    ++*(_DWORD *)(result + 16);
  }
  return result;
}

//----- (00008C58) --------------------------------------------------------
int __fastcall exif_data_unref(int result)
{
  if ( result )
  {
    if ( !--*(_DWORD *)(*(_DWORD *)(result + 28) + 16) )
      result = j_j_j_exif_data_free(result);
  }
  return result;
}

//----- (00008C74) --------------------------------------------------------
unsigned int __fastcall exif_data_dump(unsigned int result)
{
  unsigned int v1; // r4@1
  int v2; // r5@2
  int v3; // r0@3
  int v4; // r0@5

  v1 = result;
  if ( result )
  {
    v2 = 0;
    do
    {
      v3 = *(_DWORD *)(v1 + 4 * v2);
      if ( v3 && *(_DWORD *)(v3 + 4) )
      {
        v4 = j_exif_ifd_get_name(v2);
        printf("Dumping IFD '%s'...\n", v4);
        j_exif_content_dump(*(_DWORD *)(v1 + 4 * v2), 0);
      }
      ++v2;
    }
    while ( v2 != 5 );
    result = *(_DWORD *)(v1 + 20);
    if ( result )
    {
      printf("%i byte(s) thumbnail data available.", *(_DWORD *)(v1 + 24));
      result = *(_DWORD *)(v1 + 24);
      if ( result >= 4 )
        result = printf(
                   "0x%02x 0x%02x ... 0x%02x 0x%02x\n",
                   **(_BYTE **)(v1 + 20),
                   *(_BYTE *)(*(_DWORD *)(v1 + 20) + 1),
                   *(_BYTE *)(result + *(_DWORD *)(v1 + 20) - 2),
                   *(_BYTE *)(result + *(_DWORD *)(v1 + 20) - 1));
    }
  }
  return result;
}

//----- (00008D00) --------------------------------------------------------
int __fastcall exif_data_get_byte_order(int a1)
{
  int result; // r0@2

  if ( a1 )
    result = **(_DWORD **)(a1 + 28);
  else
    result = 0;
  return result;
}

//----- (00008D10) --------------------------------------------------------
int __fastcall exif_data_foreach_content(int result, int (__fastcall *a2)(_DWORD, int), int a3)
{
  int v3; // r6@1
  int v4; // r4@1
  int (__fastcall *v5)(_DWORD, int); // r5@1
  int v6; // r7@3

  v3 = result;
  v4 = a3;
  v5 = a2;
  if ( result && a2 )
  {
    v6 = 0;
    do
      result = v5(*(_DWORD *)(v3 + 4 * v6++), v4);
    while ( v6 != 5 );
  }
  return result;
}

//----- (00008D34) --------------------------------------------------------
int __fastcall exif_data_set_byte_order(int result, int a2)
{
  int v2; // r5@1
  int v3; // r8@1
  int v4; // r4@3
  int v5; // [sp+0h] [bp-20h]@3
  int v6; // [sp+4h] [bp-1Ch]@3

  v2 = result;
  v3 = a2;
  if ( result )
  {
    result = **(_DWORD **)(result + 28);
    if ( result != a2 )
    {
      v4 = 0;
      v5 = **(_DWORD **)(v2 + 28);
      v6 = a2;
      do
        j_exif_content_foreach_entry(*(_DWORD *)(v2 + 4 * v4++), (void (__fastcall *)(_DWORD, int))sub_8F64, (int)&v5);
      while ( v4 != 5 );
      **(_DWORD **)(v2 + 28) = v3;
      result = *(_DWORD *)(*(_DWORD *)(v2 + 28) + 4);
      if ( result )
        result = j_exif_mnote_data_set_byte_order(result);
    }
  }
  return result;
}

//----- (00008D8C) --------------------------------------------------------
_DWORD *__fastcall exif_data_log(_DWORD *result, _DWORD *a2)
{
  _DWORD *v2; // r5@1
  _DWORD *v3; // r4@1
  int v4; // r6@3

  v2 = result;
  v3 = a2;
  if ( result )
  {
    result = (_DWORD *)result[7];
    if ( result )
    {
      j_exif_log_unref(result[2]);
      *(_DWORD *)(v2[7] + 8) = v3;
      j_exif_mem_ref_0(v3);
      v4 = 0;
      do
        result = j_exif_content_log((_DWORD *)v2[v4++], v3);
      while ( v4 != 5 );
    }
  }
  return result;
}

//----- (00008DBC) --------------------------------------------------------
int __fastcall exif_data_get_log(int a1)
{
  int v1; // r0@2
  int result; // r0@3

  if ( a1 && (v1 = *(_DWORD *)(a1 + 28)) != 0 )
    result = *(_DWORD *)(v1 + 8);
  else
    result = 0;
  return result;
}

//----- (00008DCC) --------------------------------------------------------
int __fastcall exif_data_option_get_name(int a1)
{
  int v1; // r1@1
  int *v2; // r0@4

  v1 = 0u;
  while ( *(_DWORD *)((char *)&unk_22840 + v1 * 4) != a1 )
  {
    v1 += 3;
    if ( v1 == 9 )
    {
      v2 = &GLOBAL_OFFSET_TABLE_;
      return v2[v1 - 11618];
    }
  }
  v2 = &GLOBAL_OFFSET_TABLE_;
  return v2[v1 - 11618];
}
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (00008E08) --------------------------------------------------------
int __fastcall exif_data_option_get_description(int a1)
{
  int v1; // r1@1
  int *v2; // r0@4

  v1 = 0u;
  while ( *(_DWORD *)((char *)&unk_22840 + v1 * 4) != a1 )
  {
    v1 += 3;
    if ( v1 == 9 )
    {
      v2 = &GLOBAL_OFFSET_TABLE_;
      return v2[v1 - 11617];
    }
  }
  v2 = &GLOBAL_OFFSET_TABLE_;
  return v2[v1 - 11617];
}
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (00008E44) --------------------------------------------------------
int __fastcall exif_data_unset_option(int result, int a2)
{
  if ( result )
  {
    result = *(_DWORD *)(result + 28);
    *(_DWORD *)(result + 24) &= ~a2;
  }
  return result;
}

//----- (00008E58) --------------------------------------------------------
signed int __fastcall exif_data_get_data_type(int a1)
{
  int v1; // r0@2
  signed int result; // r0@3

  if ( a1 && (v1 = *(_DWORD *)(a1 + 28)) != 0 )
    result = *(_DWORD *)(v1 + 28);
  else
    result = 4;
  return result;
}

//----- (00008E68) --------------------------------------------------------
int __fastcall sub_8E68(int a1, int a2, unsigned int a3, unsigned int a4, unsigned int a5, int a6, int a7)
{
  unsigned int v7; // r6@1
  int v8; // r7@1
  int v9; // r4@1
  unsigned int v10; // r0@1
  signed int v11; // r1@1
  int v12; // r1@7
  int v13; // r0@9
  int v14; // r3@9
  int result; // r0@10

  v7 = a4;
  v8 = a2;
  v9 = a1;
  v10 = a5 + a4;
  v11 = 1;
  if ( a5 + a4 >= a5 )
    v11 = 0;
  if ( a4 > a3 || v10 > a3 || v11 || v10 < a5 )
  {
    result = j_exif_log(*(_DWORD *)(*(_DWORD *)(v9 + 28) + 8), 1);
  }
  else
  {
    v12 = *(_DWORD *)(v9 + 20);
    if ( v12 )
      j_exif_mem_free(*(_DWORD *)(*(_DWORD *)(v9 + 28) + 12), v12);
    v13 = sub_859C(v9, a5);
    *(_DWORD *)(v9 + 20) = v13;
    if ( v13 )
    {
      *(_DWORD *)(v9 + 24) = a5;
      result = j_j___aeabi_memcpy(v13, v8 + v7, a5, v14, a5, a6, a7);
    }
    else
    {
      j_exif_log(*(_DWORD *)(*(_DWORD *)(v9 + 28) + 8), 2);
      result = 0;
      *(_DWORD *)(v9 + 24) = 0;
    }
  }
  return result;
}

//----- (00008F10) --------------------------------------------------------
signed int __fastcall sub_8F10(int a1, int a2)
{
  int v2; // r4@1
  unsigned int v3; // r5@1
  unsigned int v4; // r0@1
  signed int v5; // r1@1

  v2 = a2;
  v3 = j_exif_get_short(a1, 1);
  v4 = j_exif_get_short(v2, 1);
  v5 = 0;
  if ( v3 > v4 )
    v5 = 1;
  if ( v3 < v4 )
    v5 = -1;
  return v5;
}

//----- (00008F3C) --------------------------------------------------------
signed int __fastcall sub_8F3C(int a1, int a2)
{
  int v2; // r4@1
  signed int v3; // r5@1
  unsigned int v4; // r6@1
  unsigned int v5; // r0@1

  v2 = a2;
  v3 = 0;
  v4 = j_exif_get_short(a1, 0);
  v5 = j_exif_get_short(v2, 0);
  if ( v4 > v5 )
    v3 = 1;
  if ( v4 < v5 )
    v3 = -1;
  return v3;
}

//----- (00008F64) --------------------------------------------------------
unsigned int __fastcall sub_8F64(unsigned int result, int a2)
{
  if ( result )
    result = j_exif_array_set_byte_order(
               *(_DWORD *)(result + 4),
               *(_DWORD *)(result + 12),
               *(_DWORD *)(result + 8),
               *(_DWORD *)a2,
               *(_DWORD *)(a2 + 4));
  return result;
}

//----- (00008F8C) --------------------------------------------------------
int exif_entry_new()
{
  _DWORD *v0; // r4@1
  int v1; // r5@1

  v0 = j_exif_mem_new_default();
  v1 = j_exif_entry_new_mem((int)v0);
  j_exif_mem_unref((int)v0);
  return v1;
}

//----- (00008FA8) --------------------------------------------------------
int __fastcall exif_entry_new_mem(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r4@1
  _DWORD *v3; // r0@2

  v1 = (_DWORD *)a1;
  v2 = j_exif_mem_alloc(a1, 28);
  if ( !v2 )
    return 0;
  v3 = (_DWORD *)j_exif_mem_alloc((int)v1, 8);
  *(_DWORD *)(v2 + 24) = v3;
  if ( !v3 )
  {
    j_exif_mem_free((int)v1, v2);
    return 0;
  }
  *v3 = 1;
  *(_DWORD *)(*(_DWORD *)(v2 + 24) + 4) = v1;
  j_exif_mem_ref(v1);
  return v2;
}

//----- (00008FE8) --------------------------------------------------------
int __fastcall exif_entry_ref(int result)
{
  if ( result )
  {
    result = *(_DWORD *)(result + 24);
    ++*(_DWORD *)result;
  }
  return result;
}

//----- (00008FF8) --------------------------------------------------------
int __fastcall exif_entry_unref(int result)
{
  if ( result )
  {
    if ( !--**(_DWORD **)(result + 24) )
      result = j_j_j_exif_entry_free(result);
  }
  return result;
}

//----- (00009014) --------------------------------------------------------
int __fastcall exif_entry_free(int result)
{
  int v1; // r4@1
  int v2; // r1@2
  int v3; // r5@3

  v1 = result;
  if ( result )
  {
    v2 = *(_DWORD *)(result + 24);
    if ( v2 )
    {
      v3 = *(_DWORD *)(v2 + 4);
      if ( *(_DWORD *)(result + 12) )
      {
        j_exif_mem_free(*(_DWORD *)(v2 + 4), *(_DWORD *)(result + 12));
        v2 = *(_DWORD *)(v1 + 24);
      }
      j_exif_mem_free(v3, v2);
      j_exif_mem_free(v3, v1);
      result = j_j_j_exif_mem_unref(v3);
    }
  }
  return result;
}

//----- (0000904C) --------------------------------------------------------
unsigned int __fastcall exif_entry_fix(unsigned int result, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r5@3
  int v6; // r9@30
  unsigned int v7; // r5@31
  int v8; // r6@32
  int v9; // r0@32
  unsigned int v10; // r7@32
  unsigned int v11; // r10@32
  int v12; // r6@32
  int v13; // r0@32
  int v14; // r5@33
  signed int v15; // r0@33
  int v16; // r5@33
  unsigned int v17; // r1@33
  int *v18; // r0@33
  signed int v19; // r0@40
  int v20; // r5@40
  int v21; // r10@40
  int v22; // r5@40
  int v23; // r8@40
  int v24; // r9@40
  unsigned int v25; // r7@42
  int v26; // r5@43
  int v27; // r6@43
  int v28; // r1@43
  int v29; // t1@43
  __int16 v30; // r0@43
  _BYTE *v31; // r1@43
  signed int v32; // r0@52
  int v33; // r5@52
  int v34; // r3@52
  const char *v35; // r2@52
  int v36; // r0@52
  int v37; // r1@52
  int v38; // r0@57
  int v39; // r0@58
  unsigned int v40; // r6@59
  int v41; // r0@60
  int v42; // r0@62
  int v43; // r2@63
  int v44; // r3@63
  int v45; // r0@63
  signed int v46; // r1@63
  int *v47; // r0@63
  int v48; // r9@69
  unsigned int v49; // r5@70
  int v50; // r6@71
  int v51; // r0@71
  unsigned int v52; // r7@71
  unsigned int v53; // r10@71
  int v54; // r6@71
  int v55; // r0@71
  int v56; // r5@72
  signed int v57; // r0@72
  unsigned int v58; // r0@74
  const void *v59; // r5@85
  int v60; // r0@89
  int v61; // r2@90
  int v62; // r0@90
  unsigned int v63; // [sp+8h] [bp-30h]@32
  unsigned int v64; // [sp+Ch] [bp-2Ch]@32
  unsigned int v65; // [sp+10h] [bp-28h]@71
  unsigned int v66; // [sp+14h] [bp-24h]@71

  v4 = result;
  if ( !result )
    return result;
  result = *(_DWORD *)(result + 24);
  if ( !result )
    return result;
  v5 = *(_DWORD *)v4;
  if ( *(_DWORD *)v4 <= 41984 )
  {
    result = 33433;
    if ( v5 <= 33433 )
    {
      if ( v5 >= 274 )
      {
        result = v5 - 530;
        if ( (unsigned int)(v5 - 530) >= 2 && v5 != 274 && v5 != 284 )
          return result;
      }
      else if ( v5 != 262 )
      {
        return result;
      }
      goto LABEL_36;
    }
    if ( v5 > 40960 )
    {
      if ( v5 == 40961 )
        goto LABEL_36;
      result = 41495;
      goto LABEL_22;
    }
    if ( v5 <= 37376 )
    {
      if ( v5 != 33434 && v5 != 33437 )
      {
        result = 34855;
LABEL_22:
        if ( v5 != result )
          return result;
        goto LABEL_36;
      }
      goto LABEL_66;
    }
    if ( v5 <= 37385 )
    {
      if ( (unsigned int)(v5 - 37379) < 2 || v5 == 37377 )
      {
        result = *(_DWORD *)(v4 + 4);
        if ( result != 5 )
          return result;
        result = *(_DWORD *)(v4 + 20);
        if ( !result )
          return result;
        result = *(_DWORD *)(result + 8);
        if ( !result )
          return result;
        v6 = j_exif_data_get_byte_order(result);
        if ( *(_DWORD *)(v4 + 8) )
        {
          v7 = 0;
          do
          {
            v8 = *(_DWORD *)(v4 + 12);
            v9 = j_exif_format_get_size(5);
            j_exif_get_srational((int)&v63, v8 + v9 * v7, v6);
            v10 = v63;
            v11 = v64;
            v12 = *(_DWORD *)(v4 + 12);
            v13 = j_exif_format_get_size(10);
            j_exif_set_srational(v12 + v13 * v7++, v6, v10, v11);
          }
          while ( v7 < *(_DWORD *)(v4 + 8) );
        }
        *(_DWORD *)(v4 + 4) = 10;
        v14 = *(_DWORD *)v4;
        v15 = j_exif_content_get_ifd(*(_DWORD *)(v4 + 20));
        v16 = j_exif_tag_get_name_in_ifd(v14, v15);
        j_exif_format_get_name(5);
        j_exif_format_get_name(10);
        v17 = 0x3FFF9AC4u;
        v18 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_73;
      }
      result = 37378;
      if ( v5 != 37378 )
        return result;
LABEL_66:
      result = *(_DWORD *)(v4 + 4);
      if ( result != 10 )
        return result;
      result = *(_DWORD *)(v4 + 20);
      if ( !result )
        return result;
      result = *(_DWORD *)(result + 8);
      if ( !result )
        return result;
      v48 = j_exif_data_get_byte_order(result);
      if ( *(_DWORD *)(v4 + 8) )
      {
        v49 = 0;
        do
        {
          v50 = *(_DWORD *)(v4 + 12);
          v51 = j_exif_format_get_size(10);
          j_exif_get_srational_0((int)&v65, v50 + v51 * v49, v48);
          v52 = v65;
          v53 = v66;
          v54 = *(_DWORD *)(v4 + 12);
          v55 = j_exif_format_get_size(5);
          j_exif_set_srational_0(v54 + v55 * v49++, v48, v52, v53);
        }
        while ( v49 < *(_DWORD *)(v4 + 8) );
      }
      *(_DWORD *)(v4 + 4) = 5;
      v56 = *(_DWORD *)v4;
      v57 = j_exif_content_get_ifd(*(_DWORD *)(v4 + 20));
      v16 = j_exif_tag_get_name_in_ifd(v56, v57);
      j_exif_format_get_name(10);
      j_exif_format_get_name(5);
      v17 = 0x3FFF9AC4u;
      v18 = &GLOBAL_OFFSET_TABLE_;
LABEL_73:
      v35 = (const char *)&v18[v17];
      v36 = v4;
      v37 = 1;
      v34 = v16;
      return sub_9590(v36, v37, (int)v35, v34);
    }
    if ( v5 == 37386 )
      goto LABEL_66;
    if ( v5 == 37396 )
      goto LABEL_36;
    result = 37510;
    if ( v5 != 37510 )
      return result;
    v38 = *(_DWORD *)(v4 + 4);
    if ( v38 != 7 )
    {
      v39 = j_exif_format_get_name(v38);
      sub_9590(v4, 1, (int)"Tag 'UserComment' had invalid format '%s'. Format has been set to 'undefined'.", v39);
      *(_DWORD *)(v4 + 4) = 7;
    }
    v40 = *(_DWORD *)(v4 + 16);
    if ( v40 < 8
      || (v41 = *(_DWORD *)(v4 + 12), !*(_BYTE *)v41)
      && (*(_DWORD *)(v41 + 4) = 0, *(_DWORD *)v41 = 0, v40 = *(_DWORD *)(v4 + 16), v40 < 8) )
    {
      v42 = sub_9634(v4, *(_DWORD *)(v4 + 12), v40 + 8);
      *(_DWORD *)(v4 + 12) = v42;
      if ( v42 )
      {
        v43 = *(_DWORD *)(v4 + 16);
        _aeabi_memmove(v42 + 8);
        v45 = *(_DWORD *)(v4 + 12);
        *(_DWORD *)(v45 + 4) = 73;
        *(_DWORD *)v45 = 1229148993;
        v46 = 0xFFFE6C23;
        *(_DWORD *)(v4 + 16) += 8;
        *(_DWORD *)(v4 + 8) += 8;
        v47 = &GLOBAL_OFFSET_TABLE_;
        return sub_9590(v4, 1, (int)v47 + v46, v44);
      }
      goto LABEL_91;
    }
    v58 = 0;
    do
    {
      if ( *(_BYTE *)(*(_DWORD *)(v4 + 12) + v58) )
        break;
      ++v58;
    }
    while ( v58 < v40 );
    if ( !v58 )
    {
      if ( !v40 )
        goto LABEL_85;
      v58 = 0;
      do
      {
        if ( *(_BYTE *)(*(_DWORD *)(v4 + 12) + v58) != 32 )
          break;
        ++v58;
      }
      while ( v58 < v40 );
    }
    if ( v58 >= 8 && v58 < v40 )
    {
      sub_9590(
        v4,
        1,
        (int)"Tag 'UserComment' is not empty but does not start with a format identifier. This has been fixed.",
        a4);
      result = *(_DWORD *)(v4 + 12);
      *(_DWORD *)(result + 4) = 73;
      *(_DWORD *)result = 1229148993;
      return result;
    }
LABEL_85:
    v59 = *(const void **)(v4 + 12);
    result = memcmp(*(const void **)(v4 + 12), &unk_20FAE, 8u);
    if ( !result )
      return result;
    result = memcmp(v59, &unk_20FB7, 8u);
    if ( !result )
      return result;
    result = memcmp(v59, &unk_20FC0, 8u);
    if ( !result )
      return result;
    result = memcmp(v59, &algn_20FA4[1], 8u);
    if ( !result )
      return result;
    v60 = sub_9634(v4, (int)v59, v40 + 8);
    *(_DWORD *)(v4 + 12) = v60;
    if ( v60 )
    {
      v61 = *(_DWORD *)(v4 + 16);
      _aeabi_memmove(v60 + 8);
      v62 = *(_DWORD *)(v4 + 12);
      *(_DWORD *)(v62 + 4) = 73;
      *(_DWORD *)v62 = 1229148993;
      v46 = -103198;
      *(_DWORD *)(v4 + 16) += 8;
      *(_DWORD *)(v4 + 8) += 8;
      v47 = &GLOBAL_OFFSET_TABLE_;
      return sub_9590(v4, 1, (int)v47 + v46, v44);
    }
LABEL_91:
    result = 0;
    *(_DWORD *)(v4 + 16) = 0;
    *(_DWORD *)(v4 + 8) = 0;
    return result;
  }
  result = v5 - 41985;
  if ( (unsigned int)(v5 - 41985) > 9 )
    return result;
  result = 1 << result;
  if ( !(result & 0x3E7) )
    return result;
LABEL_36:
  result = *(_DWORD *)(v4 + 4);
  if ( result > 9 )
  {
LABEL_52:
    v32 = j_exif_content_get_ifd(*(_DWORD *)(v4 + 20));
    v33 = j_exif_tag_get_name_in_ifd(v5, v32);
    j_exif_format_get_name(*(_DWORD *)(v4 + 4));
    j_exif_format_get_name(3);
    v34 = v33;
    v35 = "Tag '%s' is of format '%s' (which is against specification) but cannot be changed to format '%s'.";
    v36 = v4;
    v37 = 3;
    return sub_9590(v36, v37, (int)v35, v34);
  }
  if ( !((1 << result) & 0x352) )
  {
    if ( result == 3 )
      return result;
    goto LABEL_52;
  }
  result = *(_DWORD *)(v4 + 20);
  if ( !result || !*(_DWORD *)(result + 8) )
    return result;
  v19 = j_exif_content_get_ifd(result);
  v20 = j_exif_tag_get_name_in_ifd(v5, v19);
  j_exif_format_get_name(*(_DWORD *)(v4 + 4));
  j_exif_format_get_name(3);
  sub_9590(
    v4,
    1,
    (int)"Tag '%s' was of format '%s' (which is against specification) and has been changed to format '%s'.",
    v20);
  v21 = j_exif_data_get_byte_order(*(_DWORD *)(*(_DWORD *)(v4 + 20) + 8));
  v22 = *(_DWORD *)(v4 + 8);
  v23 = j_exif_format_get_size(3) * v22;
  v24 = sub_95DC(v4, v23);
  if ( !v24 )
  {
    v34 = v23;
    v35 = "Could not allocate %lu byte(s).";
    v36 = v4;
    v37 = 2;
    return sub_9590(v36, v37, (int)v35, v34);
  }
  if ( *(_DWORD *)(v4 + 8) )
  {
    v25 = 0;
    do
    {
      v26 = v24 + j_exif_format_get_size(3) * v25;
      v27 = *(_DWORD *)(v4 + 12);
      v28 = j_exif_format_get_size(*(_DWORD *)(v4 + 4));
      v29 = *(_DWORD *)(v4 + 4);
      v30 = 0;
      v31 = (_BYTE *)(v27 + v28 * v25);
      switch ( 0 )
      {
        case 1:
        case 6:
          v30 = *v31;
          break;
        case 3:
          v30 = j_exif_get_short((int)v31, v21);
          break;
        case 4:
          v30 = j_exif_get_long();
          break;
        case 8:
          v30 = j_exif_get_sshort((int)v31, v21);
          break;
        case 9:
          v30 = j_exif_get_slong((int)v31, v21);
          break;
        default:
          break;
      }
      j_exif_set_sshort(v26, v21, v30);
      ++v25;
    }
    while ( v25 < *(_DWORD *)(v4 + 8) );
  }
  j_exif_mem_free(*(_DWORD *)(*(_DWORD *)(v4 + 24) + 4), *(_DWORD *)(v4 + 12));
  result = 3;
  *(_DWORD *)(v4 + 12) = v24;
  *(_DWORD *)(v4 + 16) = v23;
  *(_DWORD *)(v4 + 4) = 3;
  return result;
}
// 6D70: using guessed type int __fastcall _aeabi_memmove(_DWORD);
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (00009590) --------------------------------------------------------
int __fastcall sub_9590(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r0@2
  int v6; // r0@3
  int v7; // r0@4
  int v9; // [sp+1Ch] [bp-4h]@1

  v4 = a2;
  v9 = a4;
  if ( a1 && (v5 = *(_DWORD *)(a1 + 20)) != 0 && (v6 = *(_DWORD *)(v5 + 8)) != 0 )
    v7 = j_exif_data_get_log(v6);
  else
    v7 = 0;
  return j_exif_logv(v7, v4);
}

//----- (000095DC) --------------------------------------------------------
int __fastcall sub_95DC(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  int result; // r0@2
  int v5; // r1@3
  int v6; // r0@5
  int v7; // r0@6
  int v8; // r0@7

  v2 = a1;
  v3 = a2;
  if ( !a1 )
    return 0;
  result = 0;
  if ( a2 )
  {
    v5 = *(_DWORD *)(v2 + 24);
    if ( v5 )
    {
      result = j_exif_mem_alloc(*(_DWORD *)(v5 + 4), v3);
      if ( !result )
      {
        v6 = *(_DWORD *)(v2 + 20);
        if ( v6 && (v7 = *(_DWORD *)(v6 + 8)) != 0 )
          v8 = j_exif_data_get_log(v7);
        else
          v8 = 0;
        j_exif_log(v8, 2);
        return 0;
      }
    }
  }
  return result;
}

//----- (00009634) --------------------------------------------------------
int __fastcall sub_9634(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r0@2
  int v5; // r0@3
  int result; // r0@4
  int v7; // r0@5
  int v8; // r0@6
  int v9; // r0@7

  v3 = a1;
  if ( a1 )
  {
    v4 = *(_DWORD *)(a1 + 24);
    if ( v4 )
    {
      v5 = *(_DWORD *)(v4 + 4);
      if ( a3 )
      {
        result = j_exif_mem_realloc(v5, a2, a3);
        if ( result )
          return result;
        v7 = *(_DWORD *)(v3 + 20);
        if ( v7 && (v8 = *(_DWORD *)(v7 + 8)) != 0 )
          v9 = j_exif_data_get_log(v8);
        else
          v9 = 0;
        j_exif_log(v9, 2);
      }
      else
      {
        j_exif_mem_free(v5, a2);
      }
    }
  }
  return 0;
}

//----- (00009694) --------------------------------------------------------
int __fastcall exif_entry_dump(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  char *v4; // r6@1
  int v5; // r6@4
  signed int v6; // r0@4
  int v7; // r0@4
  int v8; // r6@4
  int v9; // r0@4
  char *v10; // r0@4
  int result; // r0@5
  int v12; // [sp+0h] [bp-820h]@4
  char v13[1028]; // [sp+400h] [bp-420h]@1
  int v14; // [sp+804h] [bp-1Ch]@1

  v2 = a1;
  v3 = a2;
  v4 = v13;
  v14 = v0;
  if ( a2 & 0x7FFFFFFF )
  {
    _aeabi_memset(v13, 2 * a2, 32);
    v4 = &v13[2 * v3];
  }
  *v4 = 0;
  if ( v2 )
  {
    v5 = *(_DWORD *)v2;
    v6 = j_exif_content_get_ifd(*(_DWORD *)(v2 + 20));
    v7 = j_exif_tag_get_name_in_ifd(v5, v6);
    printf("%sTag: 0x%x ('%s')\n", v13, v5, v7);
    v8 = *(_DWORD *)(v2 + 4);
    v9 = j_exif_format_get_name(*(_DWORD *)(v2 + 4));
    printf("%s  Format: %i ('%s')\n", v13, v8, v9);
    printf("%s  Components: %i\n", v13, *(_DWORD *)(v2 + 8));
    printf("%s  Size: %i\n", v13, *(_DWORD *)(v2 + 16));
    v10 = j_exif_entry_get_value(v2, (char *)&v12, 1024);
    printf("%s  Value: %s\n", v13, v10);
  }
  result = v0 - v14;
  if ( v0 != v14 )
    _stack_chk_fail(result);
  return result;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 6D34: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 9694: using guessed type char var_420[1028];

//----- (00009788) --------------------------------------------------------
char *__fastcall exif_entry_get_value(int a1, char *a2, int a3)
{
  int v3; // r6@1
  int v4; // r5@1
  char *v5; // r9@1
  int v6; // r0@2
  int v13; // r10@5
  int v14; // r7@5
  int v15; // r4@5
  int v16; // r3@5
  unsigned int v17; // r8@5
  int v18; // r0@6
  int v19; // ST04_4@11
  int v20; // r0@11
  int v21; // r5@12
  unsigned int v22; // r7@12
  int v23; // ST04_4@13
  int v24; // r4@16
  int v25; // r5@16
  int v26; // r1@17
  char *v27; // r0@17
  int v28; // r1@19
  unsigned int v29; // r0@23
  int v30; // r1@23
  int v32; // r5@33
  int *v33; // r0@33
  int v34; // r5@40
  int v35; // r8@41
  int v36; // r4@41
  int v37; // r0@41
  int v38; // r0@41
  signed int v39; // r0@43
  int *v40; // r1@43
  int v41; // r3@44
  int v42; // ST00_4@44
  int *v43; // r0@44
  signed int v44; // r1@47
  unsigned int v45; // r3@48
  char *v46; // r2@48
  const char *v47; // r1@49
  const char *v48; // t1@49
  unsigned int v49; // r1@58
  int v50; // r0@59
  int v51; // r3@59
  char *v52; // r7@59
  signed int v53; // r0@65
  int *v54; // r1@65
  size_t v55; // r2@71
  const char *v56; // r1@71
  int v57; // r4@81
  int v58; // r0@81
  int v59; // r4@82
  int v60; // r0@82
  size_t v63; // r4@88
  int v64; // r8@88
  int v65; // r7@88
  signed int v66; // r1@88
  int v67; // ST00_4@93
  int v68; // r6@103
  char *v69; // r0@103
  char *v70; // r1@105
  _DWORD *v71; // r1@111
  signed int v72; // r0@111
  signed int v73; // r2@111
  int v74; // r4@122
  size_t v75; // r2@123
  const char *v76; // r1@124
  int v77; // r7@125
  _BYTE *v78; // r0@125
  int v79; // r3@128
  signed int v80; // r7@128
  int v81; // r0@133
  int v82; // r0@133
  int v83; // r0@133
  int v84; // r5@133
  int v85; // r7@133
  int v86; // r6@134
  int v87; // r0@135
  int v88; // r8@136
  unsigned int v89; // r7@136
  unsigned int v90; // r1@137
  _BYTE *v91; // r0@137
  int v92; // r2@140
  signed int v93; // r1@140
  int v94; // r0@144
  const char *v95; // r1@144
  int v96; // r2@144
  char *v97; // r0@144
  int v98; // r0@145
  int v99; // r2@145
  char *v100; // r1@145
  int v101; // r0@148
  unsigned int v102; // r5@149
  unsigned int v103; // r4@149
  unsigned int v104; // r10@151
  int v105; // ST00_4@152
  int v106; // ST00_4@153
  int v107; // ST00_4@154
  int v108; // r0@157
  const char *v109; // r6@157
  char *v110; // r5@158
  unsigned int v111; // r7@159
  const char *v112; // t1@162
  int v113; // r0@165
  char *v114; // r1@165
  unsigned int v115; // r2@165
  signed int v116; // r1@166
  int v117; // ST00_4@170
  int v118; // r0@175
  signed int v119; // r7@176
  int v120; // ST00_4@186
  const void *v123; // r8@194
  int v124; // r4@200
  unsigned int v125; // r7@202
  unsigned int v126; // r0@203
  const char *v127; // r5@204
  int v128; // r0@206
  int v129; // r0@207
  const void *v130; // r8@211
  unsigned int v131; // r7@220
  int v132; // r5@221
  int v133; // ST00_4@221
  char v134; // r0@222
  int v135; // ST00_4@227
  int v136; // ST00_4@228
  unsigned int v138; // r5@242
  int v143; // r1@253
  char *v144; // r0@253
  int v145; // r2@253
  int v146; // ST00_4@255
  signed int v147; // r0@259
  int *v148; // r1@259
  int v159; // r6@270
  _DWORD *v166; // r0@284
  const char *v167; // r0@285
  _DWORD *v168; // r0@287
  const char *v169; // r6@288
  int v170; // r0@293
  char *v171; // r0@301
  int v172; // ST04_4@301
  int v173; // ST08_4@301
  int v174; // ST00_4@302
  int v175; // ST00_4@303
  int v176; // ST00_4@308
  int v177; // ST00_4@316
  int v178; // ST00_4@318
  int v179; // ST00_4@319
  int v180; // ST00_4@320
  int v181; // ST00_4@321
  int v182; // ST00_4@322
  int v184; // r0@333
  unsigned int v185; // r0@337
  int v186; // r6@342
  int v187; // [sp+20h] [bp-D0h]@82
  int v188; // [sp+24h] [bp-CCh]@82
  int v189; // [sp+28h] [bp-C8h]@81
  int v190; // [sp+2Ch] [bp-C4h]@81
  int v191; // [sp+30h] [bp-C0h]@80
  int v192; // [sp+34h] [bp-BCh]@80
  int v193; // [sp+38h] [bp-B8h]@274
  int v194; // [sp+3Ch] [bp-B4h]@274
  int v195; // [sp+40h] [bp-B0h]@268
  int v196; // [sp+44h] [bp-ACh]@268
  int v197; // [sp+48h] [bp-A8h]@262
  int v198; // [sp+4Ch] [bp-A4h]@262
  float v199; // [sp+50h] [bp-A0h]@233
  int v200; // [sp+54h] [bp-9Ch]@233
  int v201; // [sp+58h] [bp-98h]@278
  int v202; // [sp+5Ch] [bp-94h]@278
  int v203; // [sp+60h] [bp-90h]@283
  int v204; // [sp+64h] [bp-8Ch]@283
  int v205; // [sp+68h] [bp-88h]@244
  int v206; // [sp+6Ch] [bp-84h]@245
  int v207; // [sp+70h] [bp-80h]@190
  int v208; // [sp+74h] [bp-7Ch]@190
  char v209; // [sp+78h] [bp-78h]@5
  int v210; // [sp+98h] [bp-58h]@5
  int v211; // [sp+A8h] [bp-48h]@5
  int v212; // [sp+BCh] [bp-34h]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v212 = v0;
  if ( !a1 )
    goto LABEL_324;
  v6 = *(_DWORD *)(a1 + 20);
  if ( !v6 || !a3 || !*(_DWORD *)(v6 + 8) )
    goto LABEL_324;
  _aeabi_memset(a2, a3, 0);
  __asm { VMOV.I32        Q8, #0 }
  _R0 = &v209;
  _R1 = &v211;
  __asm { VST1.64         {D16-D17}, [R1] }
  _R1 = &v210;
  __asm
  {
    VST1.64         {D16-D17}, [R1]
    VST1.64         {D16-D17}, [R0]!
    VST1.64         {D16-D17}, [R0]
  }
  v13 = j_exif_data_get_byte_order(*(_DWORD *)(*(_DWORD *)(v3 + 20) + 8));
  v14 = *(_DWORD *)(v3 + 8);
  v15 = *(_DWORD *)(v3 + 16);
  v17 = v4 - 1;
  if ( v15 != j_exif_format_get_size(*(_DWORD *)(v3 + 4)) * v14 )
  {
    v24 = *(_DWORD *)(v3 + 8);
    v25 = *(_DWORD *)(v3 + 16);
    j_exif_format_get_size(*(_DWORD *)(v3 + 4));
    goto LABEL_17;
  }
  v18 = *(_DWORD *)v3;
  if ( *(_DWORD *)v3 > 41984 )
  {
    v28 = v18 - 41985;
    if ( (unsigned int)(v18 - 41985) > 0xB )
      goto def_9C30;
    if ( (1 << v28) & 0x3E7 )
    {
LABEL_21:
      if ( *(_DWORD *)(v3 + 4) == 3 )
      {
        if ( *(_DWORD *)(v3 + 8) == 1 )
        {
          v29 = j_exif_get_short(*(_DWORD *)(v3 + 12), v13);
          v30 = 0u;
          while ( *(_DWORD *)((char *)&unk_23C20 + v30) != *(_DWORD *)v3 )
          {
            v30 += 44;
            if ( v30 == 572 )
              goto LABEL_17;
          }
          v45 = 0;
          v46 = (char *)&unk_23C20 + v30 + 4;
          do
          {
            v48 = *(const char **)v46;
            v46 += 4;
            v47 = v48;
            if ( v45 >= v29 )
              break;
            ++v45;
          }
          while ( v47 );
          if ( v47 && *v47 )
          {
            strncpy(v5, v47, v4 - 1);
            goto LABEL_324;
          }
          goto LABEL_17;
        }
        v41 = j_exif_tag_get_name(v18);
        v42 = *(_DWORD *)(v3 + 8);
        v43 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_323;
      }
      v32 = j_exif_tag_get_name(v18);
      j_exif_format_get_name(*(_DWORD *)(v3 + 4));
      j_exif_format_get_name(3);
      v33 = &GLOBAL_OFFSET_TABLE_;
LABEL_315:
      sub_9590(v3, 3, (int)(v33 - 25745), v32);
      goto LABEL_324;
    }
    _ZF = v28 == 11;
LABEL_67:
    if ( !_ZF )
      goto def_9C30;
    goto LABEL_86;
  }
  if ( v18 <= 258 )
  {
    switch ( v18 )
    {
      case 0:
        if ( *(_DWORD *)(v3 + 4) != 1 )
        {
          v32 = j_exif_tag_get_name(0);
          j_exif_format_get_name(*(_DWORD *)(v3 + 4));
          j_exif_format_get_name(1);
          v33 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_315;
        }
        if ( *(_DWORD *)(v3 + 8) != 4 )
        {
          v41 = j_exif_tag_get_name(0);
          v105 = *(_DWORD *)(v3 + 8);
          v43 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_323;
        }
        v19 = **(_BYTE **)(v3 + 12);
        _snprintf_chk(v5, v4 - 1, 0, -1);
        v20 = _strlen_chk(v5, -1);
        if ( *(_DWORD *)(v3 + 8) >= 2u )
        {
          v21 = v17 - v20;
          v22 = 1u;
          do
          {
            v23 = *(_BYTE *)(*(_DWORD *)(v3 + 12) + v22);
            _snprintf_chk(&v209, 64, 0, 64);
            _strncat_chk(v5, &v209, v21, -1);
            v21 -= _strlen_chk(&v209, 64);
            if ( v21 < 1 )
              break;
            ++v22;
          }
          while ( v22 < *(_DWORD *)(v3 + 8) );
        }
        goto LABEL_324;
      case 2:
        if ( *(_DWORD *)(v3 + 4) != 7 )
          goto def_9C30;
        v55 = *(_DWORD *)(v3 + 16);
        v56 = *(const char **)(v3 + 12);
        if ( v17 < v55 )
          v55 = v4 - 1;
        goto LABEL_73;
      case 5:
        if ( *(_DWORD *)(v3 + 4) != 1 )
        {
          v32 = j_exif_tag_get_name(5);
          j_exif_format_get_name(*(_DWORD *)(v3 + 4));
          j_exif_format_get_name(1);
          v33 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_315;
        }
        if ( *(_DWORD *)(v3 + 8) != 1 )
        {
          v41 = j_exif_tag_get_name(5);
          v106 = *(_DWORD *)(v3 + 8);
          v43 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_323;
        }
        if ( **(_BYTE **)(v3 + 12) == 1 )
        {
          v53 = -102089;
          v54 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_298;
        }
        if ( **(_BYTE **)(v3 + 12) )
          goto LABEL_17;
        v53 = -102099;
        v54 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_298;
      case 7:
        if ( *(_DWORD *)(v3 + 4) != 5 )
        {
          v32 = j_exif_tag_get_name(7);
          j_exif_format_get_name(*(_DWORD *)(v3 + 4));
          j_exif_format_get_name(5);
          v33 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_315;
        }
        if ( *(_DWORD *)(v3 + 8) != 3 )
        {
          v41 = j_exif_tag_get_name(7);
          v107 = *(_DWORD *)(v3 + 8);
          v43 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_323;
        }
        j_exif_get_srational((int)&v191, *(_DWORD *)(v3 + 12), v13);
        if ( v192 )
        {
          v57 = *(_DWORD *)(v3 + 12);
          v58 = j_exif_format_get_size(*(_DWORD *)(v3 + 4));
          j_exif_get_srational((int)&v189, v57 + v58, v13);
          if ( v190 )
          {
            v59 = *(_DWORD *)(v3 + 12);
            v60 = j_exif_format_get_size(*(_DWORD *)(v3 + 4));
            j_exif_get_srational((int)&v187, v59 + 2 * v60, v13);
            _R0 = v188;
            if ( v188 )
            {
              _R2 = v187;
              __asm
              {
                VMOV            S0, R0
                VCVT.F64.U32    D16, S0
                VMOV            S0, R2
                VCVT.F64.U32    D17, S0
                VDIV.F64        D16, D17, D16
              }
              v26 = v4 - 1;
              v27 = v5;
              __asm { VSTR            D16, [SP,#0xF0+var_E0] }
              goto LABEL_18;
            }
          }
        }
        v113 = v3;
        v114 = v5;
        v115 = v4 - 1;
        break;
      default:
        goto def_9C30;
    }
    goto LABEL_238;
  }
  if ( v18 > 529 )
  {
    if ( v18 <= 41487 )
    {
      if ( v18 <= 40090 )
      {
        if ( v18 <= 37376 )
        {
          if ( v18 <= 33431 )
          {
            if ( v18 == 530 )
            {
              if ( *(_DWORD *)(v3 + 4) != 3 )
              {
                v32 = j_exif_tag_get_name(530);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(3);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              v34 = v4 - 1;
              if ( *(_DWORD *)(v3 + 8) != 2 )
              {
                v41 = j_exif_tag_get_name(530);
                v136 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              v35 = j_exif_get_short(*(_DWORD *)(v3 + 12), v13);
              v36 = *(_DWORD *)(v3 + 12);
              v37 = j_exif_format_get_size(*(_DWORD *)(v3 + 4));
              v38 = j_exif_get_short(v37 + v36, v13);
              if ( v35 == 2 && v38 == 1 )
              {
                v39 = -102311;
                v40 = &GLOBAL_OFFSET_TABLE_;
LABEL_253:
                v143 = (int)v40 + v39;
                v144 = v5;
                v145 = v34;
LABEL_299:
                _strncpy_chk2(v144, v143, v145, -1);
                goto LABEL_324;
              }
              if ( v35 == 2 && v38 == 2 )
              {
                v39 = -102300;
                v40 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_253;
              }
LABEL_305:
              v27 = v5;
              v26 = v34;
              goto LABEL_18;
            }
            v44 = 531;
LABEL_168:
            if ( v18 != v44 )
              goto def_9C30;
            goto LABEL_21;
          }
          if ( v18 >= 36864 )
          {
            if ( v18 == 36864 )
            {
              if ( *(_DWORD *)(v3 + 4) != 7 )
              {
                v32 = j_exif_tag_get_name(36864);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(7);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 4 )
              {
                v41 = j_exif_tag_get_name(36864);
                v146 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              v34 = v4 - 1;
              _strncpy_chk2(v5, "Unknown Exif Version", v34, -1);
              v118 = 0;
              while ( 1 )
              {
                v119 = 0;
                if ( **(_DWORD **)(v3 + 12) != *(_DWORD *)&a0110[v118] )
                  v119 = 1;
                if ( !v119 )
                  break;
                v118 += 7;
                if ( v118 == 49 )
                  goto LABEL_324;
              }
              v171 = &a0110[v118];
              v172 = (unsigned __int8)v171[5];
              v173 = (unsigned __int8)v171[6];
              goto LABEL_305;
            }
            if ( v18 == 37121 )
            {
              v124 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 7 )
              {
                v32 = j_exif_tag_get_name(37121);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(7);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) == 4 )
              {
                v125 = 0;
                do
                {
                  v126 = *(_BYTE *)(*(_DWORD *)(v3 + 12) + v125);
                  if ( v126 > 6 )
                    v127 = "Reserved";
                  else
                    v127 = off_23E90[v126];
                  v128 = _strlen_chk(v5, -1);
                  _strncat_chk(v5, v127, v124 - v128, -1);
                  if ( v125 <= 2 )
                  {
                    v129 = _strlen_chk(v5, -1);
                    _strncat_chk(v5, " ", v124 - v129, -1);
                  }
                  ++v125;
                }
                while ( v125 != 4 );
                goto LABEL_324;
              }
              v41 = j_exif_tag_get_name(37121);
              v175 = *(_DWORD *)(v3 + 8);
              v43 = &GLOBAL_OFFSET_TABLE_;
LABEL_323:
              sub_9590(v3, 3, (int)v43 - 102771, v41);
              goto LABEL_324;
            }
            goto def_9C30;
          }
          if ( v18 <= 33436 )
          {
            if ( v18 == 33432 )
            {
              v74 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 2 )
              {
                v32 = j_exif_tag_get_name(33432);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(2);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              v75 = *(_DWORD *)(v3 + 16);
              if ( v75 )
              {
                v76 = *(const char **)(v3 + 12);
                if ( v76 )
                {
                  v77 = *(_DWORD *)(v3 + 16);
                  v78 = *(_BYTE **)(v3 + 12);
                  while ( *v78 )
                  {
                    if ( *v78 != 32 )
                    {
                      if ( v17 < v75 )
                        v75 = v4 - 1;
                      strncpy(v5, v76, v75);
                      goto LABEL_133;
                    }
                    v79 = v77 - 1;
                    _VF = __OFSUB__(v77 - 1, v77);
                    v80 = 1;
                    if ( !_VF )
                      v80 = 0;
                    if ( v80 )
                      __debugbreak();
                    ++v78;
                    v77 = v79;
                    if ( !v79 )
                      break;
                  }
                }
              }
              _strncpy_chk2(v5, "[None]", v4 - 1, -1);
LABEL_133:
              v81 = _strlen_chk(v5, -1);
              _strncat_chk(v5, " ", v17 - v81, -1);
              v82 = _strlen_chk(v5, -1);
              _strncat_chk(v5, "(Photographer)", v17 - v82, -1);
              v83 = _strlen_chk(v5, -1);
              v84 = v4 - 1;
              _strncat_chk(v5, " - ", v17 - v83, -1);
              v85 = *(_DWORD *)(v3 + 16);
              if ( v85 )
              {
                v86 = *(_DWORD *)(v3 + 12);
                if ( v86 )
                {
                  v87 = _memchr_chk(v86, 0, v85, -1);
                  if ( v87 )
                  {
                    v88 = v87 + 1;
                    v89 = v85 + v86 - (v87 + 1);
                    if ( v89 )
                    {
                      v90 = v89;
                      v91 = (_BYTE *)(v87 + 1);
                      while ( *v91 )
                      {
                        if ( *v91 != 32 )
                        {
                          v185 = v74 - _strlen_chk(v5, -1);
                          v95 = (const char *)v88;
                          if ( v185 < v89 )
                            v89 = v185;
                          v97 = v5;
                          v96 = v89;
                          goto LABEL_145;
                        }
                        v92 = v90 - 1;
                        _VF = __OFSUB__(v90 - 1, v90);
                        v93 = 1;
                        if ( !_VF )
                          v93 = 0;
                        if ( v93 )
                          __debugbreak();
                        ++v91;
                        v90 = v92;
                        if ( !v92 )
                          break;
                      }
                    }
                  }
                }
              }
              v94 = _strlen_chk(v5, -1);
              v95 = "[None]";
              v96 = v74 - v94;
              v97 = v5;
LABEL_145:
              _strncat_chk(v97, v95, v96, -1);
              v98 = _strlen_chk(v5, -1);
              _strncat_chk(v5, " ", v74 - v98, -1);
              v99 = v84 - _strlen_chk(v5, -1);
              v100 = "(Editor)";
              goto LABEL_345;
            }
            if ( v18 == 33434 )
            {
              v63 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 5 )
              {
                v32 = j_exif_tag_get_name(33434);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(5);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 1 )
              {
                v41 = j_exif_tag_get_name(33434);
                v177 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              j_exif_get_srational((int)&v199, *(_DWORD *)(v3 + 12), v13);
              _R0 = v200;
              if ( v200 )
              {
                __asm
                {
                  VLDR            S0, [SP,#0xF0+var_A0]
                  VMOV            S2, R0
                  VCVT.F64.U32    D16, S2
                  VCVT.F64.U32    D17, S0
                  VDIV.F64        D16, D17, D16
                  VMOV.F64        D17, #1.0
                  VCMPE.F64       D16, D17
                  VMRS            APSR_nzcv, FPSCR
                }
                if ( _NF )
                {
                  __asm
                  {
                    VDIV.F64        D16, D17, D16
                    VMOV.F64        D17, #0.5
                    VADD.F64        D16, D16, D17
                    VCVTR.S32.F64   S0, D16
                  }
                }
                else
                {
                  __asm { VCVTR.S32.F64   S0, D16 }
                }
                __asm { VSTR            S0, [SP,#0xF0+var_EC] }
                _snprintf_chk(v5, v4 - 1, 0, -1);
                v184 = _strlen_chk(v5, -1);
                if ( v17 <= v184 + 5 )
                  goto LABEL_324;
                v99 = v17 - v184;
                v100 = " sec.";
LABEL_345:
                _strncat_chk(v5, v100, v99, -1);
                goto LABEL_324;
              }
LABEL_300:
              v113 = v3;
              v114 = v5;
              v115 = v63;
              goto LABEL_238;
            }
def_9C30:
            v113 = v3;
            v114 = v5;
            v115 = v4 - 1;
LABEL_238:
            sub_B150(v113, v114, v115);
            goto LABEL_324;
          }
          if ( v18 == 33437 )
          {
            v63 = v4 - 1;
            if ( *(_DWORD *)(v3 + 4) != 5 )
            {
              v32 = j_exif_tag_get_name(33437);
              j_exif_format_get_name(*(_DWORD *)(v3 + 4));
              j_exif_format_get_name(5);
              v33 = &GLOBAL_OFFSET_TABLE_;
              goto LABEL_315;
            }
            if ( *(_DWORD *)(v3 + 8) != 1 )
            {
              v41 = j_exif_tag_get_name(33437);
              v174 = *(_DWORD *)(v3 + 8);
              v43 = &GLOBAL_OFFSET_TABLE_;
              goto LABEL_323;
            }
            j_exif_get_srational((int)&v207, *(_DWORD *)(v3 + 12), v13);
            _R0 = v208;
            if ( !v208 )
              goto LABEL_300;
            _R1 = v207;
            __asm
            {
              VMOV            S0, R0
              VCVT.F64.U32    D16, S0
              VMOV            S0, R1
              VCVT.F64.U32    D17, S0
              VDIV.F64        D16, D17, D16
            }
LABEL_280:
            __asm { VSTR            D16, [SP,#0xF0+var_E8] }
LABEL_164:
            v27 = v5;
            v26 = v63;
            goto LABEL_18;
          }
          v116 = 34850;
          goto LABEL_241;
        }
        if ( v18 <= 37509 )
        {
          switch ( v18 )
          {
            case 37383:
            case 37384:
            case 37385:
              goto LABEL_86;
            default:
              goto def_9C30;
            case 37378:
            case 37381:
              v138 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 5 )
              {
                v32 = j_exif_tag_get_name(v18);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(5);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 1 )
              {
                v41 = j_exif_tag_get_name(v18);
                v176 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              j_exif_get_srational((int)&v205, *(_DWORD *)(v3 + 12), v13);
              _R0 = v205;
              if ( v205 != 0x80000000 )
              {
                _R1 = v206;
                if ( v206 )
                {
                  __asm
                  {
                    VMOV            S0, R1
                    VCVT.F64.U32    D16, S0
                    VMOV            S0, R0
                    VCVT.F64.U32    D17, S0
                    VDIV.F64        D8, D17, D16
                    VSTR            D8, [SP,#0xF0+var_E8]
                  }
                  _snprintf_chk(v5, v17, 0, -1);
                  __asm
                  {
                    VMOV.F64        D16, #0.5
                    VMUL.F64        D16, D8, D16
                    VMOV            R0, R1, D16
                  }
                  exp2(_R0);
                  goto LABEL_270;
                }
              }
              goto LABEL_317;
            case 37377:
              v63 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 10 )
              {
                v32 = j_exif_tag_get_name(37377);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(10);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 1 )
              {
                v41 = j_exif_tag_get_name(37377);
                v178 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              j_exif_get_srational_0((int)&v197, *(_DWORD *)(v3 + 12), v13);
              _R0 = v198;
              if ( !v198 )
                goto LABEL_300;
              _R1 = v197;
              __asm
              {
                VMOV            S0, R0
                VCVT.F64.S32    D16, S0
                VMOV            S0, R1
                VCVT.F64.S32    D17, S0
                VDIV.F64        D8, D17, D16
                VSTR            D8, [SP,#0xF0+var_E8]
              }
              _snprintf_chk(v5, v4 - 1, 0, -1);
              __asm { VMOV            R0, R1, D8 }
              _R0 = exp2(_R0);
              __asm
              {
                VMOV.F64        D17, #1.0
                VMOV            D16, R0, R1
                VDIV.F64        D16, D17, D16
                VCMPE.F64       D16, D17
                VMRS            APSR_nzcv, FPSCR
              }
              if ( _NF )
              {
                __asm
                {
                  VDIV.F64        D16, D17, D16
                  VCVTR.S32.F64   S0, D16
                }
              }
              else
              {
                __asm { VCVTR.S32.F64   S0, D16 }
              }
              __asm { VSTR            S0, [SP,#0xF0+var_EC] }
              _snprintf_chk(&v209, 64, 0, 64);
              v99 = v17 - _strlen_chk(v5, -1);
              goto LABEL_344;
            case 37379:
              v138 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 10 )
              {
                v32 = j_exif_tag_get_name(37379);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(10);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 1 )
              {
                v41 = j_exif_tag_get_name(37379);
                v179 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              j_exif_get_srational_0((int)&v195, *(_DWORD *)(v3 + 12), v13);
              _R0 = v196;
              if ( !v196 )
              {
LABEL_317:
                v113 = v3;
                v114 = v5;
                v115 = v138;
                goto LABEL_238;
              }
              _R1 = v195;
              __asm
              {
                VMOV            S0, R0
                VCVT.F64.S32    D16, S0
                VMOV            S0, R1
                VCVT.F64.S32    D17, S0
                VDIV.F64        D8, D17, D16
                VSTR            D8, [SP,#0xF0+var_E8]
              }
              _snprintf_chk(v5, v17, 0, -1);
              __asm { VMOV            R0, R1, D8 }
              _R0 = exp2(_R0);
              __asm
              {
                VLDR            D16, =3.4262591
                VMOV            D17, R0, R1
                VMUL.F64        D16, D17, D16
                VSTR            D16, [SP,#0xF0+var_E8]
              }
LABEL_270:
              _snprintf_chk(&v209, 64, 0, 64);
              v159 = _strlen_chk(v5, -1);
              if ( v138 > _strlen_chk(&v209, 64) + v159 )
              {
                v99 = v138 - v159;
                goto LABEL_344;
              }
              goto LABEL_324;
            case 37380:
              v63 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 10 )
              {
                v32 = j_exif_tag_get_name(37380);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(10);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 1 )
              {
                v41 = j_exif_tag_get_name(37380);
                v180 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              j_exif_get_srational_0((int)&v193, *(_DWORD *)(v3 + 12), v13);
              _R0 = v194;
              if ( !v194 )
                goto LABEL_300;
              _R1 = v193;
              __asm
              {
                VMOV            S0, R0
                VCVT.F64.S32    D16, S0
                VMOV            S0, R1
                VCVT.F64.S32    D17, S0
                VDIV.F64        D16, D17, D16
              }
              goto LABEL_280;
            case 37382:
              v63 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 5 )
              {
                v32 = j_exif_tag_get_name(37382);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(5);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 1 )
              {
                v41 = j_exif_tag_get_name(37382);
                v181 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              j_exif_get_srational((int)&v201, *(_DWORD *)(v3 + 12), v13);
              _R0 = v202;
              if ( !v202 )
                goto LABEL_300;
              _R1 = v201;
              __asm
              {
                VMOV            S0, R0
                VCVT.F64.U32    D16, S0
                VMOV            S0, R1
                VCVT.F64.U32    D17, S0
                VDIV.F64        D16, D17, D16
              }
              goto LABEL_280;
            case 37386:
              v63 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 5 )
              {
                v32 = j_exif_tag_get_name(37386);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(5);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              if ( *(_DWORD *)(v3 + 8) != 1 )
              {
                v41 = j_exif_tag_get_name(37386);
                v182 = *(_DWORD *)(v3 + 8);
                v43 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_323;
              }
              j_exif_get_srational((int)&v203, *(_DWORD *)(v3 + 12), v13);
              _R7 = v204;
              if ( !v204 )
                goto LABEL_300;
              _R8 = v203;
              v166 = j_exif_content_get_entry(**(_DWORD **)(*(_DWORD *)(v3 + 20) + 8), 271);
              if ( !v166 )
                goto LABEL_342;
              v167 = (const char *)v166[3];
              if ( !v167 )
                goto LABEL_342;
              if ( strncmp(v167, "Minolta", 7u) )
                goto LABEL_342;
              v168 = j_exif_content_get_entry(**(_DWORD **)(*(_DWORD *)(v3 + 20) + 8), 272);
              if ( !v168 )
                goto LABEL_342;
              v169 = (const char *)v168[3];
              if ( !v169 )
                goto LABEL_342;
              if ( !strncmp((const char *)v168[3], "DiMAGE 7", 8u) )
              {
                __asm { VLDR            D16, =3.9 }
              }
              else
              {
                if ( strncmp(v169, "DiMAGE 5", 8u) )
                  goto LABEL_342;
                __asm { VLDR            D16, =4.9 }
              }
              __asm
              {
                VMOV            S0, R8
                VCVT.F64.U32    D17, S0
                VMOV            S0, R7
                VMUL.F64        D16, D17, D16
                VCVT.F64.U32    D17, S0
                VDIV.F64        D16, D16, D17
                VCVTR.S32.F64   S0, D16
                VSTR            S0, [SP,#0xF0+var_EC]
              }
              _snprintf_chk(&v209, 64, 0, 64);
LABEL_342:
              __asm
              {
                VMOV            S0, R7
                VCVT.F64.U32    D16, S0
                VMOV            S0, R8
                VCVT.F64.U32    D17, S0
                VDIV.F64        D16, D17, D16
                VSTR            D16, [SP,#0xF0+var_E8]
              }
              _snprintf_chk(v5, v4 - 1, 0, -1);
              v186 = _strlen_chk(v5, -1);
              if ( v63 <= _strlen_chk(&v209, 64) + v186 )
                goto LABEL_324;
              v99 = v63 - v186;
LABEL_344:
              v100 = &v209;
              goto LABEL_345;
            case 37396:
              v63 = v4 - 1;
              if ( *(_DWORD *)(v3 + 4) != 3 )
              {
                v32 = j_exif_tag_get_name(37396);
                j_exif_format_get_name(*(_DWORD *)(v3 + 4));
                j_exif_format_get_name(3);
                v33 = &GLOBAL_OFFSET_TABLE_;
                goto LABEL_315;
              }
              v170 = *(_DWORD *)(v3 + 8);
              switch ( v170 )
              {
                case 4:
                  j_exif_get_short(*(_DWORD *)(v3 + 12), v13);
                  j_exif_get_short(*(_DWORD *)(v3 + 12) + 2, v13);
                  j_exif_get_short(*(_DWORD *)(v3 + 12) + 4, v13);
                  j_exif_get_short(*(_DWORD *)(v3 + 12) + 6, v13);
                  break;
                case 3:
                  j_exif_get_short(*(_DWORD *)(v3 + 12), v13);
                  j_exif_get_short(*(_DWORD *)(v3 + 12) + 2, v13);
                  j_exif_get_short(*(_DWORD *)(v3 + 12) + 4, v13);
                  break;
                case 2:
                  j_exif_get_short(*(_DWORD *)(v3 + 12), v13);
                  j_exif_get_short(*(_DWORD *)(v3 + 12) + 2, v13);
                  break;
              }
              break;
          }
          goto LABEL_164;
        }
        if ( v18 != 37510 )
          goto def_9C30;
        v101 = *(_DWORD *)(v3 + 4);
        if ( v101 == 7 )
        {
          v102 = *(_DWORD *)(v3 + 16);
          v103 = v17;
          if ( v102 <= 7 )
          {
            if ( !v102 )
            {
              v102 = 0;
              v104 = 0;
              goto LABEL_217;
            }
LABEL_214:
            v104 = 0;
            do
            {
              if ( (unsigned __int8)(*(_BYTE *)(*(_DWORD *)(v3 + 12) + v104) | 0x20) != 32 )
                break;
              ++v104;
            }
            while ( v104 < v102 );
LABEL_217:
            if ( v104 != v102 )
            {
              sub_9590(v3, 1, (int)"Tag UserComment contains data but is against specification.", v16);
              if ( v103 )
              {
                if ( v104 < *(_DWORD *)(v3 + 16) )
                {
                  v131 = 0;
                  do
                  {
                    v132 = v104 + v131;
                    v133 = *(_BYTE *)(*(_DWORD *)(v3 + 12) + v104 + v131);
                    sub_9590(v3, 1, (int)"Byte at position %i: 0x%02x", v104 + v131);
                    if ( isprint(*(_BYTE *)(*(_DWORD *)(v3 + 12) + v104 + v131)) )
                      v134 = *(_BYTE *)(*(_DWORD *)(v3 + 12) + v104 + v131);
                    else
                      v134 = 46;
                    v5[v131++] = v134;
                  }
                  while ( v131 < v103 && (unsigned int)(v132 + 1) < *(_DWORD *)(v3 + 16) );
                }
              }
            }
            goto LABEL_324;
          }
        }
        else
        {
          v103 = v4 - 1;
          if ( v101 != 2
            || (v102 = *(_DWORD *)(v3 + 16), v102 < 9)
            || (v123 = *(const void **)(v3 + 12), memcmp(*(const void **)(v3 + 12), &unk_20FAE, 8u))
            && memcmp(v123, &unk_20FB7, 8u)
            && memcmp(v123, &unk_20FC0, 8u)
            && memcmp(v123, &algn_20FA4[1], 8u) )
          {
            v32 = j_exif_tag_get_name(37510);
            j_exif_format_get_name(*(_DWORD *)(v3 + 4));
            j_exif_format_get_name(7);
            v33 = &GLOBAL_OFFSET_TABLE_;
            goto LABEL_315;
          }
        }
        v130 = *(const void **)(v3 + 12);
        if ( !memcmp(*(const void **)(v3 + 12), &unk_20FAE, 8u) )
        {
          v55 = v103;
          if ( v102 - 8 < v103 )
            v55 = v102 - 8;
          v56 = (char *)v130 + 8;
LABEL_73:
          strncpy(v5, v56, v55);
          goto LABEL_324;
        }
        if ( !memcmp(v130, &unk_20FB7, 8u) )
        {
          v147 = -102909;
          v148 = &GLOBAL_OFFSET_TABLE_;
        }
        else
        {
          if ( memcmp(v130, &unk_20FC0, 8u) )
            goto LABEL_214;
          v147 = -102882;
          v148 = &GLOBAL_OFFSET_TABLE_;
        }
        v143 = (int)v148 + v147;
        v144 = v5;
        v145 = v103;
        goto LABEL_299;
      }
      if ( (unsigned int)(v18 - 40091) < 5 )
      {
        v49 = *(_DWORD *)(v3 + 16);
        if ( v49 <= 0xFFFFFFFD )
        {
          v50 = j_exif_mem_alloc(*(_DWORD *)(*(_DWORD *)(v3 + 24) + 4), v49 + 2);
          v52 = (char *)v50;
          if ( v50 )
          {
            _aeabi_memcpy(v50, *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 16), v51);
            *(_WORD *)&v52[*(_DWORD *)(v3 + 16) & 0xFFFFFFFE] = 0;
            j_exif_convert_utf16_to_utf8((int)v5, v52, v17);
            j_exif_mem_free(*(_DWORD *)(*(_DWORD *)(v3 + 24) + 4), (int)v52);
          }
        }
        goto LABEL_324;
      }
      if ( v18 != 40960 )
      {
        v116 = 40961;
LABEL_241:
        _ZF = v18 == v116;
        goto LABEL_67;
      }
      if ( *(_DWORD *)(v3 + 4) != 7 )
      {
        v32 = j_exif_tag_get_name(40960);
        j_exif_format_get_name(*(_DWORD *)(v3 + 4));
        j_exif_format_get_name(7);
        v33 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_315;
      }
      if ( *(_DWORD *)(v3 + 8) != 4 )
      {
        v41 = j_exif_tag_get_name(40960);
        v135 = *(_DWORD *)(v3 + 8);
        v43 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_323;
      }
      v71 = *(_DWORD **)(v3 + 12);
      v72 = 0;
      v73 = 0;
      if ( *v71 != 808464688 )
        v73 = 1;
      if ( v73 )
      {
        if ( *v71 != 825241904 )
          v72 = 1;
        if ( v72 )
        {
          v53 = -102605;
          v54 = &GLOBAL_OFFSET_TABLE_;
        }
        else
        {
          v53 = -102627;
          v54 = &GLOBAL_OFFSET_TABLE_;
        }
      }
      else
      {
        v53 = -102653;
        v54 = &GLOBAL_OFFSET_TABLE_;
      }
LABEL_298:
      v143 = (int)v54 + v53;
      v144 = v5;
      v145 = v4 - 1;
      goto LABEL_299;
    }
    if ( v18 < 41728 )
    {
      if ( v18 == 41488 )
        goto LABEL_86;
      v44 = 41495;
      goto LABEL_168;
    }
    if ( v18 == 41728 )
    {
      if ( *(_DWORD *)(v3 + 4) != 7 )
      {
        v32 = j_exif_tag_get_name(41728);
        j_exif_format_get_name(*(_DWORD *)(v3 + 4));
        j_exif_format_get_name(7);
        v33 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_315;
      }
      if ( *(_DWORD *)(v3 + 8) != 1 )
      {
        v41 = j_exif_tag_get_name(41728);
        v117 = *(_DWORD *)(v3 + 8);
        v43 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_323;
      }
      if ( **(_BYTE **)(v3 + 12) == 3 )
      {
        v53 = -102396;
        v54 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_298;
      }
    }
    else
    {
      if ( v18 != 41729 )
        goto def_9C30;
      if ( *(_DWORD *)(v3 + 4) != 7 )
      {
        v32 = j_exif_tag_get_name(41729);
        j_exif_format_get_name(*(_DWORD *)(v3 + 4));
        j_exif_format_get_name(7);
        v33 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_315;
      }
      if ( *(_DWORD *)(v3 + 8) != 1 )
      {
        v41 = j_exif_tag_get_name(41729);
        v120 = *(_DWORD *)(v3 + 8);
        v43 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_323;
      }
      if ( **(_BYTE **)(v3 + 12) == 1 )
      {
        v53 = -102333;
        v54 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_298;
      }
    }
LABEL_17:
    v26 = v17;
    v27 = v5;
LABEL_18:
    _snprintf_chk(v27, v26, 0, -1);
    goto LABEL_324;
  }
  _ZF = v18 == 296;
  if ( v18 >= 296 )
    goto LABEL_67;
  if ( v18 >= 274 )
  {
    if ( v18 != 274 && v18 != 284 )
      goto def_9C30;
    goto LABEL_21;
  }
  if ( v18 != 259 )
  {
    if ( v18 != 262 )
      goto def_9C30;
    goto LABEL_21;
  }
LABEL_86:
  if ( *(_DWORD *)(v3 + 4) != 3 )
  {
    v32 = j_exif_tag_get_name(v18);
    j_exif_format_get_name(*(_DWORD *)(v3 + 4));
    j_exif_format_get_name(3);
    v33 = &GLOBAL_OFFSET_TABLE_;
    goto LABEL_315;
  }
  if ( *(_DWORD *)(v3 + 8) != 1 )
  {
    v41 = j_exif_tag_get_name(v18);
    v67 = *(_DWORD *)(v3 + 8);
    v43 = &GLOBAL_OFFSET_TABLE_;
    goto LABEL_323;
  }
  v63 = v4 - 1;
  v64 = j_exif_get_short(*(_DWORD *)(v3 + 12), v13);
  v65 = 0u;
  v66 = 9;
  while ( *(_DWORD *)((char *)&unk_22870 + v65) != *(_DWORD *)v3 )
  {
    --v66;
    v65 += 504;
    if ( !v66 )
      goto LABEL_164;
  }
  v68 = 0;
  v69 = (char *)&unk_22870 + v65 + 4;
  while ( *(_DWORD *)v69 < v64 )
  {
    v70 = v69 + 20;
    ++v68;
    _ZF = *((_DWORD *)v69 + 6) == 0;
    v69 += 20;
    if ( _ZF )
      goto LABEL_156;
  }
  v70 = v69;
LABEL_156:
  if ( *(_DWORD *)v70 != v64 )
    goto LABEL_164;
  _aeabi_memset(v5, v63, 0);
  v108 = 5 * v68;
  v109 = *(const char **)((char *)&unk_22870 + 20 * v68 + v65 + 8);
  if ( v109 )
  {
    v110 = (char *)&unk_22870 + 4 * v108 + v65 + 12;
    do
    {
      v111 = _strlen_chk(v109, -1);
      if ( v63 > v111 && _strlen_chk(v5, -1) < v111 )
        strncpy(v5, v109, v63);
      v112 = *(const char **)v110;
      v110 += 4;
      v109 = v112;
    }
    while ( v112 );
  }
  if ( !*v5 )
    goto LABEL_164;
LABEL_324:
  if ( v0 != v212 )
    _stack_chk_fail(v0 - v212);
  return v5;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 6D34: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 707C: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);
// 7088: using guessed type int __fastcall _strncat_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 70AC: using guessed type int __fastcall _strncpy_chk2(_DWORD, _DWORD, _DWORD, _DWORD);
// 70B8: using guessed type int __fastcall _memchr_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 70D0: using guessed type int __fastcall exp2(_DWORD);
// 23E90: using guessed type char *off_23E90[4];
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (0000B150) --------------------------------------------------------
unsigned int __fastcall sub_B150(int a1, char *a2, unsigned int a3)
{
  int v3; // r11@1
  unsigned int v4; // r10@1
  unsigned int result; // r0@1
  size_t v6; // r2@2
  int v7; // ST04_4@7
  unsigned int v8; // r7@7
  unsigned int v9; // r5@8
  int v10; // ST04_4@9
  unsigned int v11; // r7@17
  unsigned int v12; // r5@18
  int v13; // r4@19
  int v14; // r0@19
  int v15; // r0@22
  unsigned int v16; // r7@22
  unsigned int v17; // r5@23
  int v18; // r4@24
  int v19; // r8@27
  int v20; // r9@28
  int v21; // r5@28
  unsigned int v26; // r6@28
  unsigned int v29; // r7@36
  unsigned int v30; // r5@37
  int v31; // r4@38
  int v32; // r0@38
  __int16 v33; // ST04_2@38
  unsigned int v34; // r7@41
  unsigned int v35; // r5@42
  int v36; // r4@43
  int v37; // r0@43
  int v38; // r6@46
  int v39; // r9@47
  int v40; // r8@47
  unsigned int v41; // r5@47
  char *dest; // [sp+20h] [bp-58h]@1
  int v45; // [sp+24h] [bp-54h]@1
  double v46; // [sp+28h] [bp-50h]@50
  double v47; // [sp+30h] [bp-48h]@31

  v3 = a1;
  v4 = a3;
  dest = a2;
  result = j_exif_data_get_byte_order(*(_DWORD *)(*(_DWORD *)(a1 + 20) + 8));
  v45 = result;
  if ( v4 )
  {
    v6 = *(_DWORD *)(v3 + 16);
    if ( v6 )
    {
      switch ( *(_DWORD *)(v3 + 4) )
      {
        case 1:
        case 6:
          v7 = **(_BYTE **)(v3 + 12);
          _snprintf_chk(dest, v4 + 1, 0, -1);
          v8 = _strlen_chk(dest, -1);
          result = *(_DWORD *)(v3 + 8);
          if ( result > 1 )
          {
            v9 = 1u;
            do
            {
              v10 = *(_BYTE *)(*(_DWORD *)(v3 + 12) + v9);
              _snprintf_chk(&dest[v8], v4 + 1 - v8, 0, -1);
              result = _strlen_chk(&dest[v8], -1);
              v8 += result;
              if ( v8 >= v4 )
                break;
              result = *(_DWORD *)(v3 + 8);
              ++v9;
            }
            while ( v9 < result );
          }
          break;
        case 2:
          if ( v6 > v4 )
            v6 = v4;
          strncpy(dest, *(const char **)(v3 + 12), v6);
          result = *(_DWORD *)(v3 + 16);
          if ( result > v4 )
            result = v4;
          dest[result] = 0;
          break;
        case 3:
          j_exif_get_short(*(_DWORD *)(v3 + 12), result);
          _snprintf_chk(dest, v4 + 1, 0, -1);
          v11 = _strlen_chk(dest, -1);
          result = *(_DWORD *)(v3 + 8);
          if ( result > 1 )
          {
            v12 = 1;
            do
            {
              v13 = *(_DWORD *)(v3 + 12);
              v14 = j_exif_format_get_size(*(_DWORD *)(v3 + 4));
              j_exif_get_short(v13 + v14 * v12, v45);
              _snprintf_chk(&dest[v11], v4 + 1 - v11, 0, -1);
              result = _strlen_chk(&dest[v11], -1);
              v11 += result;
              if ( v11 >= v4 )
                break;
              result = *(_DWORD *)(v3 + 8);
              ++v12;
            }
            while ( v12 < result );
          }
          break;
        case 4:
          v15 = *(_DWORD *)(v3 + 12);
          j_exif_get_long();
          _snprintf_chk(dest, v4 + 1, 0, -1);
          v16 = _strlen_chk(dest, -1);
          result = *(_DWORD *)(v3 + 8);
          if ( result > 1 )
          {
            v17 = 1;
            do
            {
              v18 = *(_DWORD *)(v3 + 12);
              j_exif_format_get_size(*(_DWORD *)(v3 + 4));
              j_exif_get_long();
              _snprintf_chk(&dest[v16], v4 + 1 - v16, 0, -1);
              result = _strlen_chk(&dest[v16], -1);
              v16 += result;
              if ( v16 >= v4 )
                break;
              result = *(_DWORD *)(v3 + 8);
              ++v17;
            }
            while ( v17 < result );
          }
          break;
        case 5:
          result = *(_DWORD *)(v3 + 8);
          v19 = v4 + 1;
          if ( result )
          {
            v20 = 0;
            v21 = 0;
            __asm
            {
              VLDR            D8, =-0.08
              VMOV.F64        D9, #1.0
            }
            v26 = 0;
            do
            {
              if ( v26 )
              {
                _snprintf_chk(&dest[v21], v19 - v21, 0, -1);
                v21 += _strlen_chk(&dest[v21], -1);
              }
              j_exif_get_srational((int)&v47, *(_DWORD *)(v3 + 12) + v20, v45);
              _R0 = v47;
              if ( HIDWORD(v47) )
              {
                __asm
                {
                  VMOV            S0, R1
                  VCVT.F64.U32    D16, S0
                  VMOV            S0, R0
                  VCVT.F64.U32    D17, S0
                  VMOV            R0, R1, D16
                  VDIV.F64        D10, D17, D16
                }
                _R0 = COERCE_UNSIGNED_INT64(log10(_R0));
                __asm
                {
                  VMOV            D16, R0, R1
                  VADD.F64        D16, D16, D8
                  VADD.F64        D16, D16, D9
                  VCVTR.S32.F64   S0, D16
                  VSTR            S0, [SP,#0x78+var_74]
                  VSTR            D10, [SP,#0x78+var_70]
                }
              }
              _snprintf_chk(&dest[v21], v19 - v21, 0, -1);
              result = _strlen_chk(&dest[v21], -1);
              v21 += result;
              if ( v21 >= v4 )
                break;
              result = *(_DWORD *)(v3 + 8);
              ++v26;
              v20 += 8;
            }
            while ( v26 < result );
          }
          break;
        default:
          result = _snprintf_chk(dest, v4 + 1, 0, -1);
          break;
        case 8:
          j_exif_get_sshort(*(_DWORD *)(v3 + 12), result);
          _snprintf_chk(dest, v4 + 1, 0, -1);
          v29 = _strlen_chk(dest, -1);
          result = *(_DWORD *)(v3 + 8);
          if ( result > 1 )
          {
            v30 = 1;
            do
            {
              v31 = *(_DWORD *)(v3 + 12);
              v32 = j_exif_format_get_size(*(_DWORD *)(v3 + 4));
              v33 = j_exif_get_short(v31 + v32 * v30, v45);
              _snprintf_chk(&dest[v29], v4 + 1 - v29, 0, -1);
              result = _strlen_chk(&dest[v29], -1);
              v29 += result;
              if ( v29 >= v4 )
                break;
              result = *(_DWORD *)(v3 + 8);
              ++v30;
            }
            while ( v30 < result );
          }
          break;
        case 9:
          j_exif_get_slong(*(_DWORD *)(v3 + 12), result);
          _snprintf_chk(dest, v4 + 1, 0, -1);
          v34 = _strlen_chk(dest, -1);
          result = *(_DWORD *)(v3 + 8);
          if ( result > 1 )
          {
            v35 = 1;
            do
            {
              v36 = *(_DWORD *)(v3 + 12);
              v37 = j_exif_format_get_size(*(_DWORD *)(v3 + 4));
              j_exif_get_slong(v36 + v37 * v35, v45);
              _snprintf_chk(&dest[v34], v4 + 1 - v34, 0, -1);
              result = _strlen_chk(&dest[v34], -1);
              v34 += result;
              if ( v34 >= v4 )
                break;
              result = *(_DWORD *)(v3 + 8);
              ++v35;
            }
            while ( v35 < result );
          }
          break;
        case 0xA:
          result = *(_DWORD *)(v3 + 8);
          v38 = v4 + 1;
          if ( result )
          {
            v39 = 0;
            v40 = 0;
            __asm
            {
              VLDR            D8, =-0.08
              VMOV.F64        D9, #1.0
            }
            v41 = 0;
            do
            {
              if ( v41 )
              {
                _snprintf_chk(&dest[v40], v38 - v40, 0, -1);
                v40 += _strlen_chk(&dest[v40], -1);
              }
              j_exif_get_srational_0((int)&v46, *(_DWORD *)(v3 + 12) + v39, v45);
              _R0 = v46;
              if ( HIDWORD(v46) )
              {
                __asm
                {
                  VMOV            S0, R1
                  VCVT.F64.S32    D16, S0
                  VMOV            S0, R0
                  VCVT.F64.S32    D17, S0
                  VDIV.F64        D10, D17, D16
                  VABS.F64        D16, D16
                  VMOV            R0, R1, D16
                }
                _R0 = COERCE_UNSIGNED_INT64(log10(_R0));
                __asm
                {
                  VMOV            D16, R0, R1
                  VADD.F64        D16, D16, D8
                  VADD.F64        D16, D16, D9
                  VCVTR.S32.F64   S0, D16
                  VSTR            S0, [SP,#0x78+var_74]
                  VSTR            D10, [SP,#0x78+var_70]
                }
              }
              _snprintf_chk(&dest[v40], v38 - v40, 0, -1);
              result = _strlen_chk(&dest[v40], -1);
              v40 += result;
              if ( v40 >= v4 )
                break;
              result = *(_DWORD *)(v3 + 8);
              ++v41;
              v39 += 8;
            }
            while ( v41 < result );
          }
          break;
      }
    }
  }
  return result;
}
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 707C: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);

//----- (0000B740) --------------------------------------------------------
int __fastcall exif_entry_initialize(int result, signed int a2, int a3, int a4, int a5, int a6, int a7)
{
  int v7; // r4@1
  signed int v8; // r6@1
  int v9; // r5@5
  int v10; // r0@12
  int v11; // r1@14
  int v12; // r1@15
  __int16 v13; // r2@15
  signed int v14; // r0@24
  int v15; // r1@28
  int v16; // r0@29
  int v17; // r4@29
  int v18; // r0@31
  signed int v19; // r1@32
  int v20; // r1@40
  int v21; // r6@41
  int v22; // r0@41
  int v23; // r0@41
  int v24; // r4@41
  int v25; // r1@43
  int v26; // r1@46
  int v27; // r6@47
  int v28; // r0@47
  int v29; // r6@47
  int v30; // r0@47
  int v31; // r6@47
  int v32; // r0@47
  int v33; // r6@47
  int v34; // r0@47
  int v35; // r0@47
  int v36; // r4@47
  int v37; // r0@47
  int v38; // r1@47
  unsigned int v39; // r2@47
  int v40; // r1@50
  char v41; // r0@53
  int v42; // r0@56
  int v43; // r1@59
  int v44; // r1@62
  int v45; // r1@68
  int v46; // r1@71
  signed int v47; // r1@74
  int v48; // r1@77
  signed int v49; // r0@81
  int v50; // r1@84
  struct tm *v51; // r5@89
  int v52; // r1@89
  signed int v53; // r1@90
  signed int v54; // r3@90
  int v55; // ST18_4@96
  int v56; // ST14_4@96
  int v57; // ST10_4@96
  int v58; // ST0C_4@96
  int v59; // r1@97
  int v60; // r1@101
  int v61; // r3@101
  int v62; // r3@102
  signed int v63; // r0@108
  int v64; // r1@113
  int v65; // r1@118
  int v66; // r1@122
  struct tm tp; // [sp+20h] [bp-40h]@89
  time_t timer; // [sp+4Ch] [bp-14h]@89

  v7 = result;
  v8 = a2;
  if ( !result )
    return result;
  result = *(_DWORD *)(result + 20);
  if ( !result )
    return result;
  if ( *(_DWORD *)(v7 + 12) )
    return result;
  result = *(_DWORD *)(result + 8);
  if ( !result )
    return result;
  v9 = j_exif_data_get_byte_order(result);
  *(_DWORD *)v7 = v8;
  if ( v8 > 41984 )
  {
    v10 = v8 - 41985;
    if ( (unsigned int)(v8 - 41985) > 0xB )
      goto def_BA78;
    if ( (1 << v10) & 0xBF7 )
      goto LABEL_14;
    if ( v10 != 3 )
      goto def_BA78;
    goto LABEL_116;
  }
  if ( v8 > 33431 )
  {
    if ( v8 > 41482 )
    {
      if ( v8 < 41728 )
      {
        v18 = v8 - 41483;
        if ( (unsigned int)(v8 - 41483) > 0xC )
          goto def_BA78;
        v19 = 1 << v18;
        if ( !((1 << v18) & 0x419) )
        {
          if ( v19 & 0x1200 )
            goto LABEL_14;
          if ( v18 != 5 )
            goto def_BA78;
LABEL_77:
          *(_DWORD *)(v7 + 4) = 3;
          *(_DWORD *)(v7 + 8) = 1;
          v48 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(3);
          *(_DWORD *)(v7 + 16) = v48;
          result = sub_95DC(v7, v48);
          *(_DWORD *)(v7 + 12) = result;
          if ( !result )
            return result;
          v12 = v9;
          v13 = 2;
          return j_j_j_exif_set_sshort(result, v12, v13);
        }
        goto LABEL_116;
      }
      if ( v8 == 41728 )
      {
        *(_DWORD *)(v7 + 4) = 7;
        *(_DWORD *)(v7 + 8) = 1;
        v40 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(7);
        *(_DWORD *)(v7 + 16) = v40;
        result = sub_95DC(v7, v40);
        *(_DWORD *)(v7 + 12) = result;
        if ( result )
          *(_BYTE *)result = 3;
      }
      else
      {
        if ( v8 != 41729 )
          goto def_BA78;
        *(_DWORD *)(v7 + 4) = 7;
        *(_DWORD *)(v7 + 8) = 1;
        v44 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(7);
        *(_DWORD *)(v7 + 16) = v44;
        result = sub_95DC(v7, v44);
        *(_DWORD *)(v7 + 12) = result;
        if ( result )
          *(_BYTE *)result = 1;
      }
      return result;
    }
    if ( v8 >= 40960 )
    {
      switch ( v8 )
      {
        case 40960:
          goto LABEL_43;
        case 40961:
          *(_DWORD *)(v7 + 4) = 3;
          *(_DWORD *)(v7 + 8) = 1;
          v59 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(3);
          *(_DWORD *)(v7 + 16) = v59;
          result = sub_95DC(v7, v59);
          *(_DWORD *)(v7 + 12) = result;
          if ( !result )
            return result;
          v12 = v9;
          v13 = -1;
          return j_j_j_exif_set_sshort(result, v12, v13);
        case 40962:
        case 40963:
        case 40965:
          goto LABEL_100;
        default:
          goto def_BA78;
      }
      goto def_BA78;
    }
    if ( v8 > 37376 )
    {
      if ( v8 > 37519 )
      {
        if ( (unsigned int)(v8 - 37520) < 3 )
          goto LABEL_74;
        goto def_BA78;
      }
      v41 = v8 - 1;
      if ( (unsigned int)(v8 - 37377) > 9 )
        goto def_BA78;
      if ( (1 << v41) & 0x232 )
        goto LABEL_116;
      if ( !((1 << v41) & 0xD) )
      {
        if ( !((1 << v41) & 0x1C0) )
          goto def_BA78;
        goto LABEL_14;
      }
      *(_DWORD *)(v7 + 4) = 10;
      *(_DWORD *)(v7 + 8) = 1;
      v42 = 10;
LABEL_118:
      v65 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(v42);
      *(_DWORD *)(v7 + 16) = v65;
      result = sub_95DC(v7, v65);
      *(_DWORD *)(v7 + 12) = result;
      return result;
    }
    if ( v8 >= 36864 )
    {
      if ( v8 <= 36866 )
      {
        if ( v8 != 36864 )
          goto def_BA78;
        *(_DWORD *)(v7 + 4) = 7;
        *(_DWORD *)(v7 + 8) = 4;
        v45 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(7);
        *(_DWORD *)(v7 + 16) = v45;
        result = sub_95DC(v7, v45);
        *(_DWORD *)(v7 + 12) = result;
        if ( result )
          *(_DWORD *)result = 808530480;
        return result;
      }
      if ( (unsigned int)(v8 - 36867) < 2 )
        goto LABEL_89;
      if ( v8 == 37121 )
      {
        *(_DWORD *)(v7 + 4) = 7;
        *(_DWORD *)(v7 + 8) = 4;
        v50 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(7);
        *(_DWORD *)(v7 + 16) = v50;
        result = sub_95DC(v7, v50);
        *(_DWORD *)(v7 + 12) = result;
        if ( result )
        {
          *(_BYTE *)result = 1;
          *(_BYTE *)(*(_DWORD *)(v7 + 12) + 1) = 2;
          *(_BYTE *)(*(_DWORD *)(v7 + 12) + 2) = 3;
          result = *(_DWORD *)(v7 + 12);
          *(_BYTE *)(result + 3) = 0;
        }
        return result;
      }
      v14 = 37122;
LABEL_115:
      if ( v8 != v14 )
        goto def_BA78;
      goto LABEL_116;
    }
    if ( v8 <= 34664 )
    {
      if ( v8 == 33432 )
      {
        *(_DWORD *)(v7 + 4) = 2;
        *(_DWORD *)(v7 + 8) = 14;
        v60 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(2);
        *(_DWORD *)(v7 + 16) = v60;
        result = sub_95DC(v7, v60);
        *(_DWORD *)(v7 + 12) = result;
        if ( result )
        {
          _aeabi_memcpy(result, "[None]", 7, v61);
          result = j_j___aeabi_memcpy(*(_DWORD *)(v7 + 12) + 7, (int)"[None]", 7, v62, a5, a6, a7);
        }
        return result;
      }
      if ( v8 == 33434 )
      {
LABEL_116:
        v63 = 1;
        goto LABEL_117;
      }
      v14 = 33437;
      goto LABEL_115;
    }
    if ( v8 > 34852 )
    {
      if ( v8 != 34853 )
      {
        v49 = 34855;
LABEL_110:
        if ( v8 != v49 )
          goto def_BA78;
        goto LABEL_14;
      }
    }
    else if ( v8 != 34665 )
    {
      v49 = 34850;
      goto LABEL_110;
    }
LABEL_100:
    *(_DWORD *)(v7 + 4) = 4;
    *(_DWORD *)(v7 + 8) = 1;
    v42 = 4;
    goto LABEL_118;
  }
  if ( v8 <= 512 )
  {
    if ( v8 <= 255 )
    {
      if ( v8 != 1 )
      {
        if ( v8 == 2 )
        {
LABEL_43:
          *(_DWORD *)(v7 + 4) = 7;
          *(_DWORD *)(v7 + 8) = 4;
          v25 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(7);
          *(_DWORD *)(v7 + 16) = v25;
          result = sub_95DC(v7, v25);
          *(_DWORD *)(v7 + 12) = result;
          if ( result )
            *(_DWORD *)result = 808464688;
          return result;
        }
        goto def_BA78;
      }
LABEL_74:
      result = 0;
      v47 = 2;
LABEL_120:
      *(_DWORD *)(v7 + 4) = v47;
      *(_DWORD *)(v7 + 8) = 0;
      *(_DWORD *)(v7 + 12) = 0;
      *(_DWORD *)(v7 + 16) = 0;
      return result;
    }
    if ( v8 < 270 )
    {
      if ( (unsigned int)(v8 - 256) > 6 )
        goto def_BA78;
      if ( !((1 << v8) & 0x4B) )
      {
        if ( v8 == 258 )
        {
          *(_DWORD *)(v7 + 4) = 3;
          *(_DWORD *)(v7 + 8) = 3;
          v20 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(3);
          *(_DWORD *)(v7 + 16) = v20;
          result = sub_95DC(v7, v20);
          *(_DWORD *)(v7 + 12) = result;
          if ( !result )
            return result;
          j_exif_set_sshort(result, v9, 8);
          v21 = *(_DWORD *)(v7 + 12);
          v22 = j_exif_format_get_size(*(_DWORD *)(v7 + 4));
          j_exif_set_sshort(v22 + v21, v9, 8);
          v23 = *(_DWORD *)(v7 + 4);
          v24 = *(_DWORD *)(v7 + 12);
          result = v24 + 2 * j_exif_format_get_size(v23);
          v12 = v9;
          v13 = 8;
          return j_j_j_exif_set_sshort(result, v12, v13);
        }
def_BA78:
        result = 0;
        v47 = 7;
        goto LABEL_120;
      }
LABEL_14:
      *(_DWORD *)(v7 + 4) = 3;
      *(_DWORD *)(v7 + 8) = 1;
      v11 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(3);
      *(_DWORD *)(v7 + 16) = v11;
      result = sub_95DC(v7, v11);
      *(_DWORD *)(v7 + 12) = result;
      if ( !result )
        return result;
      v12 = v9;
      v13 = 0;
      return j_j_j_exif_set_sshort(result, v12, v13);
    }
    if ( v8 < 296 )
    {
      switch ( v8 )
      {
        case 282:
        case 283:
          *(_DWORD *)(v7 + 4) = 5;
          *(_DWORD *)(v7 + 8) = 1;
          v43 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(5);
          *(_DWORD *)(v7 + 16) = v43;
          result = sub_95DC(v7, v43);
          *(_DWORD *)(v7 + 12) = result;
          if ( !result )
            return result;
          v38 = v9;
          v39 = 72;
          goto LABEL_48;
        case 274:
        case 284:
          goto LABEL_71;
        case 270:
        case 271:
        case 272:
          goto LABEL_113;
        default:
          goto def_BA78;
        case 277:
          *(_DWORD *)(v7 + 4) = 3;
          *(_DWORD *)(v7 + 8) = 1;
          v66 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(3);
          *(_DWORD *)(v7 + 16) = v66;
          result = sub_95DC(v7, v66);
          *(_DWORD *)(v7 + 12) = result;
          if ( !result )
            return result;
          v12 = v9;
          v13 = 3;
          break;
      }
      return j_j_j_exif_set_sshort(result, v12, v13);
    }
    if ( v8 <= 304 )
    {
      if ( v8 != 296 )
        goto def_BA78;
      goto LABEL_77;
    }
    if ( v8 < 306 )
      goto LABEL_113;
    if ( v8 < 318 )
    {
      if ( v8 == 306 )
      {
LABEL_89:
        timer = time(0);
        v51 = localtime_r(&timer, &tp);
        *(_DWORD *)(v7 + 4) = 2;
        *(_DWORD *)(v7 + 8) = 20;
        v52 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(2);
        *(_DWORD *)(v7 + 16) = v52;
        result = sub_95DC(v7, v52);
        *(_DWORD *)(v7 + 12) = result;
        if ( result )
        {
          v53 = 1;
          v54 = 1;
          if ( !__OFSUB__(v51->tm_year + 1900, v51->tm_year) )
            v54 = 0;
          if ( v54 )
            goto LABEL_127;
          if ( !__OFSUB__(v51->tm_mon + 1, v51->tm_mon) )
            v53 = 0;
          if ( v53 )
LABEL_127:
            __debugbreak();
          v55 = v51->tm_sec;
          v56 = v51->tm_min;
          v57 = v51->tm_hour;
          v58 = v51->tm_mday;
          result = _snprintf_chk(result, *(_DWORD *)(v7 + 16), 0, -1);
        }
        return result;
      }
      if ( v8 != 315 )
        goto def_BA78;
LABEL_113:
      *(_DWORD *)(v7 + 4) = 2;
      *(_DWORD *)(v7 + 8) = 7;
      v64 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(2);
      *(_DWORD *)(v7 + 16) = v64;
      result = sub_95DC(v7, v64);
      *(_DWORD *)(v7 + 12) = result;
      if ( result )
        result = _strncpy_chk2(result, "[None]", *(_DWORD *)(v7 + 16), -1);
      return result;
    }
    if ( v8 == 318 )
    {
      v63 = 2;
LABEL_117:
      *(_DWORD *)(v7 + 4) = 5;
      *(_DWORD *)(v7 + 8) = v63;
      v42 = 5;
      goto LABEL_118;
    }
    v14 = 319;
    goto LABEL_115;
  }
  if ( v8 < 532 )
  {
    if ( (unsigned int)(v8 - 513) >= 2 )
    {
      if ( v8 == 530 )
      {
        *(_DWORD *)(v7 + 4) = 3;
        *(_DWORD *)(v7 + 8) = 2;
        v15 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(3);
        *(_DWORD *)(v7 + 16) = v15;
        result = sub_95DC(v7, v15);
        *(_DWORD *)(v7 + 12) = result;
        if ( !result )
          return result;
        j_exif_set_sshort(result, v9, 2);
        v16 = *(_DWORD *)(v7 + 4);
        v17 = *(_DWORD *)(v7 + 12);
        result = j_exif_format_get_size(v16) + v17;
      }
      else
      {
        if ( v8 != 531 )
          goto def_BA78;
LABEL_71:
        *(_DWORD *)(v7 + 4) = 3;
        *(_DWORD *)(v7 + 8) = 1;
        v46 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(3);
        *(_DWORD *)(v7 + 16) = v46;
        result = sub_95DC(v7, v46);
        *(_DWORD *)(v7 + 12) = result;
        if ( !result )
          return result;
      }
      v12 = v9;
      v13 = 1;
      return j_j_j_exif_set_sshort(result, v12, v13);
    }
    goto LABEL_100;
  }
  if ( v8 != 532 )
    goto def_BA78;
  *(_DWORD *)(v7 + 4) = 5;
  *(_DWORD *)(v7 + 8) = 6;
  v26 = *(_DWORD *)(v7 + 8) * j_exif_format_get_size(5);
  *(_DWORD *)(v7 + 16) = v26;
  result = sub_95DC(v7, v26);
  *(_DWORD *)(v7 + 12) = result;
  if ( result )
  {
    j_exif_set_srational_0(result, v9, 0, 1u);
    v27 = *(_DWORD *)(v7 + 12);
    v28 = j_exif_format_get_size(*(_DWORD *)(v7 + 4));
    j_exif_set_srational_0(v28 + v27, v9, 0xFFu, 1u);
    v29 = *(_DWORD *)(v7 + 12);
    v30 = j_exif_format_get_size(*(_DWORD *)(v7 + 4));
    j_exif_set_srational_0(v29 + 2 * v30, v9, 0, 1u);
    v31 = *(_DWORD *)(v7 + 12);
    v32 = j_exif_format_get_size(*(_DWORD *)(v7 + 4));
    j_exif_set_srational_0(3 * v32 + v31, v9, 0xFFu, 1u);
    v33 = *(_DWORD *)(v7 + 12);
    v34 = j_exif_format_get_size(*(_DWORD *)(v7 + 4));
    j_exif_set_srational_0(v33 + 4 * v34, v9, 0, 1u);
    v35 = *(_DWORD *)(v7 + 4);
    v36 = *(_DWORD *)(v7 + 12);
    v37 = j_exif_format_get_size(v35);
    v38 = v9;
    v39 = 255;
    result = 5 * v37 + v36;
LABEL_48:
    result = j_j_j_exif_set_srational_0(result, v38, v39, 1u);
  }
  return result;
}
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 70AC: using guessed type int __fastcall _strncpy_chk2(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0000BE14) --------------------------------------------------------
int __fastcall exif_entry_gps_initialize(int result, signed int a2)
{
  int v2; // r4@1
  signed int v3; // r6@1
  int v4; // r5@5
  signed int v5; // r0@7
  int v6; // r0@11
  int v7; // r1@12
  int v8; // r1@14
  int v9; // r1@16
  int v10; // r6@17
  int v11; // r0@17
  int v12; // r0@17
  int v13; // r4@17
  int v14; // r1@17
  unsigned int v15; // r2@17
  int v16; // r1@19
  int v17; // r0@20
  int v18; // r4@20
  int v19; // r0@20
  int v20; // r1@22

  v2 = result;
  v3 = a2;
  if ( result )
  {
    result = *(_DWORD *)(result + 20);
    if ( result )
    {
      if ( !*(_DWORD *)(v2 + 12) )
      {
        result = *(_DWORD *)(result + 8);
        if ( result )
        {
          result = j_exif_data_get_byte_order(result);
          v4 = result;
          *(_DWORD *)v2 = v3;
          if ( v3 > 17 )
          {
            if ( v3 == 18 )
            {
              *(_DWORD *)(v2 + 4) = 2;
              *(_DWORD *)(v2 + 8) = 20;
              v8 = *(_DWORD *)(v2 + 8) * j_exif_format_get_size(2);
              *(_DWORD *)(v2 + 16) = v8;
              result = sub_95DC(v2, v8);
              *(_DWORD *)(v2 + 12) = result;
            }
            else if ( v3 == 29 )
            {
              v5 = 11;
              *(_DWORD *)(v2 + 4) = 2;
LABEL_11:
              *(_DWORD *)(v2 + 8) = v5;
              v6 = 2;
LABEL_12:
              v7 = *(_DWORD *)(v2 + 8) * j_exif_format_get_size(v6);
              *(_DWORD *)(v2 + 16) = v7;
              result = sub_95DC(v2, v7);
              *(_DWORD *)(v2 + 12) = result;
              if ( result )
                result = _aeabi_memset(result, *(_DWORD *)(v2 + 16), 0);
            }
            else
            {
              result = 529;
              if ( v3 == 529 )
              {
LABEL_16:
                *(_DWORD *)(v2 + 4) = 5;
                *(_DWORD *)(v2 + 8) = 3;
                v9 = *(_DWORD *)(v2 + 8) * j_exif_format_get_size(5);
                *(_DWORD *)(v2 + 16) = v9;
                result = sub_95DC(v2, v9);
                *(_DWORD *)(v2 + 12) = result;
                if ( result )
                {
                  j_exif_set_srational_0(result, v4, 1u, 1u);
                  v10 = *(_DWORD *)(v2 + 12);
                  v11 = j_exif_format_get_size(*(_DWORD *)(v2 + 4));
                  j_exif_set_srational_0(v11 + v10, v4, 1u, 1u);
                  v12 = *(_DWORD *)(v2 + 4);
                  v13 = *(_DWORD *)(v2 + 12);
                  result = v13 + 2 * j_exif_format_get_size(v12);
                  v14 = v4;
                  v15 = 1;
LABEL_18:
                  result = j_j_j_exif_set_srational_0(result, v14, v15, 1u);
                }
              }
            }
          }
          else
          {
            switch ( v3 )
            {
              case 1:
              case 3:
                v5 = 2;
                *(_DWORD *)(v2 + 4) = 2;
                goto LABEL_11;
              case 2:
              case 4:
              case 7:
                goto LABEL_16;
              case 0:
                *(_DWORD *)(v2 + 4) = 1;
                *(_DWORD *)(v2 + 8) = 4;
                v16 = *(_DWORD *)(v2 + 8) * j_exif_format_get_size(1);
                *(_DWORD *)(v2 + 16) = v16;
                result = sub_95DC(v2, v16);
                *(_DWORD *)(v2 + 12) = result;
                if ( result )
                {
                  j_exif_set_sshort(result, v4, 514);
                  v17 = *(_DWORD *)(v2 + 4);
                  v18 = *(_DWORD *)(v2 + 12);
                  v19 = v18 + 2 * j_exif_format_get_size(v17);
                  result = j_j_j_exif_set_sshort(v19, v4, 0);
                }
                return result;
              case 5:
                *(_DWORD *)(v2 + 4) = 1;
                *(_DWORD *)(v2 + 8) = 1;
                v6 = 1;
                goto LABEL_12;
              case 6:
                *(_DWORD *)(v2 + 4) = 5;
                *(_DWORD *)(v2 + 8) = 1;
                v20 = *(_DWORD *)(v2 + 8) * j_exif_format_get_size(5);
                *(_DWORD *)(v2 + 16) = v20;
                result = sub_95DC(v2, v20);
                *(_DWORD *)(v2 + 12) = result;
                if ( !result )
                  return result;
                v14 = v4;
                v15 = 0;
                goto LABEL_18;
              default:
                return result;
            }
          }
        }
      }
    }
  }
  return result;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);

//----- (0000BF80) --------------------------------------------------------
int __fastcall exif_format_get_name(int a1)
{
  int v1; // r1@1

  v1 = 0;
  while ( *(_DWORD *)((char *)&unk_23EAC + v1) != a1 )
  {
    v1 += 12;
    if ( v1 == 144 )
      return 0;
  }
  return *(_DWORD *)((char *)&unk_23EAC + v1 + 4);
}

//----- (0000BFA8) --------------------------------------------------------
int __fastcall exif_format_get_size(int a1)
{
  int v1; // r1@1

  v1 = 0;
  while ( *(_DWORD *)((char *)&unk_23EAC + v1) != a1 )
  {
    v1 += 12;
    if ( v1 == 144 )
      return 0;
  }
  return *((_BYTE *)&unk_23EAC + v1 + 8);
}

//----- (0000BFD0) --------------------------------------------------------
int __fastcall exif_ifd_get_name(int a1)
{
  int v1; // r1@1
  int *v2; // r0@4

  v1 = 0u;
  while ( *(_DWORD *)((char *)&unk_23F48 + v1 * 4) != a1 )
  {
    v1 += 2;
    if ( v1 == 10 )
    {
      v2 = &GLOBAL_OFFSET_TABLE_;
      return v2[v1 - 10144];
    }
  }
  v2 = &GLOBAL_OFFSET_TABLE_;
  return v2[v1 - 10144];
}
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (0000C00C) --------------------------------------------------------
int __fastcall exif_loader_write_file(int a1, const char *a2)
{
  int v2; // r4@1
  FILE *v3; // r5@2
  signed int v4; // r2@3
  int *v5; // r3@3
  int result; // r0@7
  char ptr; // [sp+4h] [bp-41Ch]@3
  int v8; // [sp+404h] [bp-1Ch]@1

  v2 = a1;
  v8 = v0;
  if ( a1 )
  {
    v3 = fopen(a2, (const char *)&unk_15A91);
    if ( v3 )
    {
      do
        v4 = fread(&ptr, 1u, 0x400u, v3);
      while ( v4 >= 1 && j_exif_loader_write(v2, (int)&ptr, v4, v5) );
      fclose(v3);
    }
    else
    {
      j_exif_log(*(_DWORD *)(v2 + 40), 0);
    }
  }
  result = v0 - v8;
  if ( v0 != v8 )
    _stack_chk_fail(result);
  return result;
}
// 6D34: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (0000C0B8) --------------------------------------------------------
int __fastcall exif_loader_write(int a1, int a2, unsigned int a3, int *a4)
{
  int v4; // r4@1
  unsigned int v5; // r5@1
  int v6; // r10@1
  int v7; // r9@2
  int v8; // r6@2
  unsigned int v9; // r1@5
  signed int v10; // r0@6
  int v11; // r3@10
  int v12; // r0@10
  int v13; // r7@10
  char v14; // r0@13
  signed int v15; // r0@16
  signed int v16; // r1@22
  int v17; // r11@22
  signed int v18; // r0@35
  signed int v19; // r0@38
  int v20; // r1@41
  int v21; // r3@41
  size_t v22; // r2@43
  bool v23; // zf@47
  int v24; // r2@56
  int v25; // r1@59
  int result; // r0@66
  void *v27; // [sp+Ch] [bp-2Ch]@14
  void *s1; // [sp+10h] [bp-28h]@14

  v4 = a1;
  v5 = a3;
  v6 = a2;
  if ( !a1 || (v7 = a1 + 10, v8 = a1 + 8, !a2) && a3 )
  {
LABEL_72:
    LOBYTE(result) = 0;
    return (unsigned __int8)result;
  }
LABEL_4:
  if ( *(_DWORD *)v4 == 5 )
  {
    v9 = *(_DWORD *)(v4 + 24);
    if ( v5 < v9 )
    {
      *(_DWORD *)(v4 + 24) = v9 - v5;
LABEL_77:
      LOBYTE(result) = 1;
      return (unsigned __int8)result;
    }
    v10 = 0;
    v6 += v9;
    *(_DWORD *)(v4 + 24) = 0;
    v5 -= v9;
    *(_BYTE *)(v4 + 20) = 0;
    if ( *(_DWORD *)(v4 + 4) == 3 )
      v10 = 1;
    *(_DWORD *)v4 = v10;
  }
  else if ( *(_DWORD *)v4 == 6 )
  {
LABEL_75:
    LOBYTE(result) = sub_C394(v4, v6, v5, (int)a4);
    return (unsigned __int8)result;
  }
  if ( !v5 )
    goto LABEL_77;
  j_exif_log(*(_DWORD *)(v4 + 40), 1);
  v12 = *(_BYTE *)(v4 + 20);
  v13 = 12 - v12;
  if ( v5 < 12 - v12 )
    v13 = v5;
  if ( v13 )
  {
    _aeabi_memcpy(v12 + v4 + 8, v6, v13, v11);
    v14 = *(_BYTE *)(v4 + 20) + v13;
    *(_BYTE *)(v4 + 20) = v14;
    if ( (v14 & 0xFCu) < 0xC )
      goto LABEL_77;
    v5 -= v13;
    v6 += v13;
    s1 = (void *)v8;
    v27 = (void *)v7;
  }
  else
  {
    s1 = (void *)v8;
    v27 = (void *)v7;
  }
  v15 = *(_DWORD *)(v4 + 4);
  if ( !v15 )
  {
    if ( !memcmp(s1, "FUJIFILM", 8u) )
    {
      v15 = 3;
      *(_DWORD *)(v4 + 4) = 3;
      *(_DWORD *)v4 = 5;
      *(_DWORD *)(v4 + 24) = 84;
    }
    else if ( !memcmp(v27, "Exif", 6u) )
    {
      v15 = 1;
      *(_DWORD *)v4 = 3;
      *(_DWORD *)(v4 + 4) = 1;
    }
    else
    {
      v15 = 0;
    }
  }
  v16 = *(_DWORD *)v4;
  a4 = &GLOBAL_OFFSET_TABLE_;
  v17 = 0;
  while ( 2 )
  {
    switch ( v16 )
    {
      case 1:
        *(_DWORD *)(v4 + 24) |= *(_BYTE *)(v4 + v17 + 8) << 24;
        v16 = 2;
        goto LABEL_64;
      case 2:
        *(_DWORD *)(v4 + 24) |= *(_BYTE *)(v4 + v17 + 8) << 16;
        v16 = 3;
        goto LABEL_64;
      case 3:
        *(_DWORD *)(v4 + 24) |= *(_BYTE *)(v4 + v17 + 8) << 8;
        v16 = 4;
        goto LABEL_64;
      case 4:
        v24 = *(_DWORD *)(v4 + 24) | *(_BYTE *)(v4 + v17 + 8);
        *(_DWORD *)(v4 + 24) = v24;
        switch ( v15 )
        {
          case 1:
            v16 = 6;
            v15 = 1;
            *(_DWORD *)v4 = 6;
            break;
          case 3:
            v15 = 1;
            v16 = 5;
            *(_DWORD *)(v4 + 4) = 1;
            *(_DWORD *)v4 = 5;
            *(_DWORD *)(v4 + 24) = v24 - 86;
            break;
          case 2:
            v16 = 5;
            *(_DWORD *)v4 = 5;
            *(_DWORD *)(v4 + 24) = v24 - 2;
            v15 = 2;
            break;
          default:
            v16 = 4;
            break;
        }
        goto LABEL_65;
      case 5:
        v25 = *(_DWORD *)(v4 + 24) - 1;
        *(_DWORD *)(v4 + 24) = v25;
        if ( v25 )
        {
          v16 = 5;
          goto LABEL_65;
        }
        v16 = 0;
        goto LABEL_64;
      case 6:
        if ( sub_C394(v4, v4 + v17 + 8, 12 - v17, (int)a4) )
          goto LABEL_75;
        goto LABEL_72;
      default:
        a4 = (int *)*(_BYTE *)(v4 + v17 + 8);
        if ( (signed int)a4 <= 215 )
        {
          if ( a4 != (int *)196 )
            goto def_C216;
LABEL_52:
          v15 = 2;
LABEL_53:
          *(_DWORD *)(v4 + 24) = 0;
          v16 = 3;
          *(_DWORD *)(v4 + 4) = v15;
LABEL_64:
          *(_DWORD *)v4 = v16;
          goto LABEL_65;
        }
        if ( (signed int)a4 <= 236 )
        {
          switch ( a4 )
          {
            case 0xE1u:
              v18 = 1;
              if ( !__OFSUB__(12, v17) )
                v18 = 0;
              if ( v18 )
                goto LABEL_81;
              v19 = 1;
              if ( !__OFSUB__(12 - v17, 3) )
                v19 = 0;
              if ( v19 )
LABEL_81:
                __debugbreak();
              v20 = 9 - v17;
              v21 = 9 - v17;
              if ( 9 - v17 < 0 )
                v21 = 0;
              v22 = v21;
              if ( v20 > -1 )
                v22 = 6;
              if ( v20 <= 6 )
                v22 = v21;
              v23 = memcmp((const void *)(v4 + v17 + 11), "Exif", v22) == 0;
              v15 = 2;
              if ( v23 )
                v15 = 1;
              goto LABEL_53;
            case 0xDBu:
            case 0xE0u:
            case 0xE2u:
              goto LABEL_52;
            case 0xD8u:
              goto LABEL_65;
            default:
              break;
          }
def_C216:
          j_exif_log(*(_DWORD *)(v4 + 40), 3);
          j_exif_loader_reset(v4);
          goto LABEL_72;
        }
        if ( a4 == (int *)237 || a4 == (int *)254 )
          goto LABEL_52;
        if ( a4 != (int *)255 )
          goto def_C216;
LABEL_65:
        if ( (unsigned int)++v17 < 0xC )
          continue;
        v7 = (int)v27;
        LOBYTE(result) = 0;
        v8 = (int)s1;
        *(_BYTE *)(v4 + 20) = 0;
        if ( v6 || !v5 )
          goto LABEL_4;
        return (unsigned __int8)result;
    }
  }
}
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (0000C394) --------------------------------------------------------
signed int __fastcall sub_C394(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // r4@1
  unsigned int v5; // r6@1
  int v6; // r5@1
  unsigned int v7; // r7@4
  unsigned int v8; // r1@4
  int v9; // r0@5
  unsigned int v10; // r7@9
  int v11; // r0@9
  unsigned int v12; // r1@11
  signed int result; // r0@11

  v4 = a1;
  v5 = a3;
  v6 = a2;
  if ( !a1 || !a2 && a3 )
    return 0;
  v7 = *(_DWORD *)(a1 + 24);
  v8 = *(_DWORD *)(a1 + 32);
  if ( v8 >= v7 )
    return 0;
  v9 = *(_DWORD *)(a1 + 28);
  if ( v9 )
    goto LABEL_9;
  if ( !v7 )
  {
LABEL_17:
    result = 0;
    *(_DWORD *)(v4 + 28) = 0;
    return result;
  }
  v9 = j_exif_mem_alloc(*(_DWORD *)(v4 + 44), *(_DWORD *)(v4 + 24));
  if ( !v9 )
  {
    j_exif_log(*(_DWORD *)(v4 + 40), 2);
    goto LABEL_17;
  }
  *(_DWORD *)(v4 + 28) = v9;
  v7 = *(_DWORD *)(v4 + 24);
  v8 = *(_DWORD *)(v4 + 32);
LABEL_9:
  v10 = v7 - v8;
  v11 = v9 + v8;
  if ( v10 > v5 )
    v10 = v5;
  _aeabi_memcpy(v11, v6, v10, a4);
  v12 = v10 + *(_DWORD *)(v4 + 32);
  result = 0;
  *(_DWORD *)(v4 + 32) = v12;
  if ( v12 < *(_DWORD *)(v4 + 24) )
    result = 1;
  return result;
}

//----- (0000C41C) --------------------------------------------------------
int __fastcall exif_loader_reset(int result)
{
  int v1; // r4@1

  v1 = result;
  if ( result )
  {
    j_exif_mem_free(*(_DWORD *)(result + 44), *(_DWORD *)(result + 28));
    result = 0;
    *(_DWORD *)(v1 + 24) = 0;
    *(_DWORD *)(v1 + 28) = 0;
    *(_DWORD *)(v1 + 32) = 0;
    *(_DWORD *)v1 = 0;
    *(_BYTE *)(v1 + 20) = 0;
    *(_DWORD *)(v1 + 4) = 0;
  }
  return result;
}

//----- (0000C43C) --------------------------------------------------------
int exif_loader_new()
{
  _DWORD *v0; // r4@1
  int v1; // r5@1

  v0 = j_exif_mem_new_default();
  v1 = j_exif_loader_new_mem((int)v0);
  j_exif_mem_unref((int)v0);
  return v1;
}

//----- (0000C458) --------------------------------------------------------
int __fastcall exif_loader_new_mem(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r0@2
  int v3; // r4@2

  v1 = (_DWORD *)a1;
  if ( a1 && (v2 = j_exif_mem_alloc(a1, 48), (v3 = v2) != 0) )
  {
    *(_DWORD *)(v2 + 36) = 1;
    *(_DWORD *)(v2 + 44) = v1;
    j_exif_mem_ref(v1);
  }
  else
  {
    v3 = 0;
  }
  return v3;
}

//----- (0000C484) --------------------------------------------------------
int __fastcall exif_loader_ref(int result)
{
  if ( result )
    ++*(_DWORD *)(result + 36);
  return result;
}

//----- (0000C494) --------------------------------------------------------
int __fastcall exif_loader_unref(int result)
{
  int v1; // r4@1
  int v2; // r5@4

  v1 = result;
  if ( result )
  {
    result = *(_DWORD *)(result + 36) - 1;
    *(_DWORD *)(v1 + 36) = result;
    if ( !result )
    {
      v2 = *(_DWORD *)(v1 + 44);
      j_exif_loader_reset(v1);
      j_exif_log_unref(*(_DWORD *)(v1 + 40));
      j_exif_mem_free(v2, v1);
      result = j_j_j_exif_mem_unref(v2);
    }
  }
  return result;
}

//----- (0000C4C8) --------------------------------------------------------
_DWORD *__fastcall exif_loader_get_data(int a1)
{
  int v1; // r5@1
  _DWORD *v2; // r4@4

  v1 = a1;
  if ( a1 && *(_DWORD *)(a1 + 4) && *(_DWORD *)(a1 + 32) )
  {
    v2 = (_DWORD *)j_exif_data_new_mem(*(_DWORD *)(a1 + 44));
    j_exif_data_log(v2, *(_DWORD **)(v1 + 40));
    j_exif_data_load_data((unsigned int)v2, *(_DWORD *)(v1 + 28), *(_DWORD *)(v1 + 32));
  }
  else
  {
    v2 = 0;
  }
  return v2;
}

//----- (0000C4FC) --------------------------------------------------------
int __fastcall exif_loader_get_buf(int a1, _DWORD *a2, _DWORD *a3)
{
  _DWORD *v3; // r4@1
  _DWORD *v4; // r5@1
  __int64 v5; // r0@3

  v3 = a3;
  v4 = a2;
  if ( a1 && *(_DWORD *)(a1 + 4) )
  {
    HIDWORD(v5) = *(_DWORD *)(a1 + 28);
    LODWORD(v5) = *(_DWORD *)(a1 + 32);
  }
  else
  {
    j_exif_log(*(_DWORD *)(a1 + 40), 1);
    v5 = 0LL;
  }
  if ( v4 )
    *v4 = HIDWORD(v5);
  if ( v3 )
    *v3 = v5;
  return v5;
}

//----- (0000C548) --------------------------------------------------------
_DWORD *__fastcall exif_loader_log(_DWORD *result, _DWORD *a2)
{
  _DWORD *v2; // r5@1
  _DWORD *v3; // r4@1

  v2 = result;
  v3 = a2;
  if ( result )
  {
    j_exif_log_unref(result[10]);
    v2[10] = v3;
    result = j_j_j_exif_mem_ref_0(v3);
  }
  return result;
}

//----- (0000C56C) --------------------------------------------------------
int __fastcall exif_log_code_get_title(int a1)
{
  int v1; // r1@1
  int *v2; // r0@4

  v1 = 0u;
  while ( *(_DWORD *)((char *)&unk_23F78 + v1 * 4) != a1 )
  {
    v1 += 3;
    if ( v1 == 9 )
    {
      v2 = &GLOBAL_OFFSET_TABLE_;
      return v2[v1 - 10132];
    }
  }
  v2 = &GLOBAL_OFFSET_TABLE_;
  return v2[v1 - 10132];
}
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (0000C5A8) --------------------------------------------------------
int __fastcall exif_log_code_get_message(int a1)
{
  int v1; // r1@1
  int *v2; // r0@4

  v1 = 0u;
  while ( *(_DWORD *)((char *)&unk_23F78 + v1 * 4) != a1 )
  {
    v1 += 3;
    if ( v1 == 9 )
    {
      v2 = &GLOBAL_OFFSET_TABLE_;
      return v2[v1 - 10131];
    }
  }
  v2 = &GLOBAL_OFFSET_TABLE_;
  return v2[v1 - 10131];
}
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (0000C5E4) --------------------------------------------------------
int __fastcall exif_log_new_mem(int a1)
{
  _DWORD *v1; // r5@1
  int v2; // r0@1
  int v3; // r4@1

  v1 = (_DWORD *)a1;
  v2 = j_exif_mem_alloc(a1, 16);
  v3 = v2;
  if ( v2 )
  {
    *(_DWORD *)v2 = 1;
    *(_DWORD *)(v2 + 12) = v1;
    j_exif_mem_ref(v1);
  }
  else
  {
    v3 = 0;
  }
  return v3;
}

//----- (0000C60C) --------------------------------------------------------
int exif_log_new()
{
  _DWORD *v0; // r4@1
  int v1; // r5@1

  v0 = j_exif_mem_new_default();
  v1 = j_exif_log_new_mem((int)v0);
  j_exif_mem_unref((int)v0);
  return v1;
}

//----- (0000C628) --------------------------------------------------------
_DWORD *__fastcall exif_mem_ref(_DWORD *result)
{
  if ( result )
    ++*result;
  return result;
}

//----- (0000C638) --------------------------------------------------------
int __fastcall exif_log_unref(int result)
{
  int v1; // r1@3

  if ( result )
  {
    if ( !*(_DWORD *)result || (v1 = *(_DWORD *)result - 1, (*(_DWORD *)result = v1) == 0) )
      result = j_j_j_exif_log_free(result);
  }
  return result;
}

//----- (0000C650) --------------------------------------------------------
int __fastcall exif_log_free(int result)
{
  int v1; // r4@2

  if ( result )
  {
    v1 = *(_DWORD *)(result + 12);
    j_exif_mem_free(*(_DWORD *)(result + 12), result);
    result = j_j_j_exif_mem_unref(v1);
  }
  return result;
}

//----- (0000C66C) --------------------------------------------------------
int __fastcall exif_log_set_func(int result, int a2, int a3)
{
  if ( result )
  {
    *(_DWORD *)(result + 4) = a2;
    *(_DWORD *)(result + 8) = a3;
  }
  return result;
}

//----- (0000C678) --------------------------------------------------------
int __fastcall exif_log(int result, int a2)
{
  int (__cdecl *v2)(int, int); // lr@2
  int v3; // ST04_4@3

  if ( result )
  {
    v2 = *(int (__cdecl **)(int, int))(result + 4);
    if ( v2 )
    {
      v3 = *(_DWORD *)(result + 8);
      result = v2(result, a2);
    }
  }
  return result;
}

//----- (0000C6A0) --------------------------------------------------------
int __fastcall exif_logv(int result, int a2)
{
  int (__cdecl *v2)(int, int); // r12@2
  int v3; // ST04_4@3

  if ( result )
  {
    v2 = *(int (__cdecl **)(int, int))(result + 4);
    if ( v2 )
    {
      v3 = *(_DWORD *)(result + 8);
      result = v2(result, a2);
    }
  }
  return result;
}

//----- (0000C6C4) --------------------------------------------------------
int __fastcall exif_mem_new(int (__fastcall *a1)(_DWORD), int (__fastcall *a2)(_DWORD, _DWORD), int a3)
{
  int (__fastcall *v3)(_DWORD); // r6@1
  int v4; // r4@1
  int (__fastcall *v5)(_DWORD, _DWORD); // r5@1
  int result; // r0@4

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (a1 || a2) && (!a1 ? (result = a2(0, 16)) : (result = a1(16)), result) )
  {
    *(_DWORD *)result = 1;
    *(_DWORD *)(result + 4) = v3;
    *(_DWORD *)(result + 8) = v5;
    *(_DWORD *)(result + 12) = v4;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0000C6F0) --------------------------------------------------------
int __fastcall exif_mem_unref(int result)
{
  bool v1; // zf@2
  int (*v2)(void); // r1@4

  if ( result )
  {
    v1 = (*(_DWORD *)result)-- == 1;
    if ( v1 )
    {
      v2 = *(int (**)(void))(result + 12);
      if ( v2 )
        result = v2();
    }
  }
  return result;
}

//----- (0000C708) --------------------------------------------------------
int __fastcall exif_mem_free(int result, int a2)
{
  int (__fastcall *v2)(int); // r2@2

  if ( result )
  {
    v2 = *(int (__fastcall **)(int))(result + 12);
    if ( v2 )
      result = v2(a2);
  }
  return result;
}

//----- (0000C71C) --------------------------------------------------------
int __fastcall exif_mem_alloc(int a1, int a2)
{
  int (__fastcall *v2)(int); // r2@2
  int result; // r0@3
  int (__fastcall *v4)(_DWORD); // r2@4

  if ( !a1 )
    goto LABEL_9;
  v2 = *(int (__fastcall **)(int))(a1 + 4);
  if ( v2 )
    return v2(a2);
  v4 = *(int (__fastcall **)(_DWORD))(a1 + 8);
  if ( v4 )
    result = v4(0);
  else
LABEL_9:
    result = 0;
  return result;
}

//----- (0000C738) --------------------------------------------------------
int __fastcall exif_mem_realloc(int a1, int a2, int a3)
{
  int (__fastcall *v3)(int, int); // r3@2
  int result; // r0@3

  if ( a1 && (v3 = *(int (__fastcall **)(int, int))(a1 + 8)) != 0 )
    result = v3(a2, a3);
  else
    result = 0;
  return result;
}

//----- (0000C74C) --------------------------------------------------------
_DWORD *exif_mem_new_default()
{
  _DWORD *result; // r0@1

  result = calloc(0x10u, 1u);
  if ( result )
  {
    *result = 1;
    result[1] = sub_C78C;
    result[2] = j_j_j_realloc;
    result[3] = j_j_j_free;
  }
  else
  {
    result = 0;
  }
  return result;
}
// C78C: using guessed type int sub_C78C();

//----- (0000C79C) --------------------------------------------------------
_DWORD *__fastcall exif_mnote_data_construct(_DWORD *result, int a2)
{
  _DWORD *v2; // r5@1
  _DWORD *v3; // r4@1

  v2 = result;
  v3 = (_DWORD *)a2;
  if ( result )
  {
    if ( a2 )
    {
      result = (_DWORD *)*result;
      if ( !*v2 )
      {
        result = (_DWORD *)j_exif_mem_alloc(a2, 4);
        *v2 = result;
        if ( result )
        {
          *result = 1;
          v2[13] = v3;
          result = j_j_j_exif_mem_ref(v3);
        }
      }
    }
  }
  return result;
}

//----- (0000C7D0) --------------------------------------------------------
_DWORD *__fastcall exif_mnote_data_ref(_DWORD *result)
{
  if ( result )
  {
    result = (_DWORD *)*result;
    if ( result )
      ++*result;
  }
  return result;
}

//----- (0000C7E4) --------------------------------------------------------
int __fastcall exif_mnote_data_unref(int result)
{
  int v1; // r4@1
  int *v2; // r1@2
  int v3; // r5@6
  void (__fastcall *v4)(int); // r2@8

  v1 = result;
  if ( result )
  {
    v2 = *(int **)result;
    if ( *(_DWORD *)result )
    {
      if ( *v2 )
      {
        --*v2;
        v2 = *(int **)result;
        result = **(_DWORD **)result;
        if ( result )
          return result;
        v3 = *(_DWORD *)(v1 + 52);
        if ( !v2 )
        {
LABEL_11:
          j_exif_log_unref(*(_DWORD *)(v1 + 48));
          j_exif_mem_free(v3, v1);
          return j_j_j_exif_mem_unref(v3);
        }
      }
      else
      {
        v3 = *(_DWORD *)(result + 52);
      }
      v4 = *(void (__fastcall **)(int))(v1 + 4);
      if ( v4 )
      {
        v4(v1);
        v2 = *(int **)v1;
      }
      j_exif_mem_free(v3, (int)v2);
      *(_DWORD *)v1 = 0;
      goto LABEL_11;
    }
  }
  return result;
}

//----- (0000C83C) --------------------------------------------------------
int __fastcall exif_mnote_data_load(int result)
{
  int (*v1)(void); // r3@2

  if ( result )
  {
    v1 = *(int (**)(void))(result + 12);
    if ( v1 )
      result = v1();
  }
  return result;
}

//----- (0000C84C) --------------------------------------------------------
int __fastcall exif_mnote_data_save(int result)
{
  int (*v1)(void); // r3@2

  if ( result )
  {
    v1 = *(int (**)(void))(result + 8);
    if ( v1 )
      result = v1();
  }
  return result;
}

//----- (0000C85C) --------------------------------------------------------
int __fastcall exif_mnote_data_set_byte_order(int result)
{
  int (*v1)(void); // r2@2

  if ( result )
  {
    v1 = *(int (**)(void))(result + 20);
    if ( v1 )
      result = v1();
  }
  return result;
}

//----- (0000C86C) --------------------------------------------------------
int __fastcall exif_mnote_data_set_offset(int result)
{
  int (*v1)(void); // r2@2

  if ( result )
  {
    v1 = *(int (**)(void))(result + 16);
    if ( v1 )
      result = v1();
  }
  return result;
}

//----- (0000C87C) --------------------------------------------------------
int __fastcall exif_mnote_data_count(int a1)
{
  int (*v1)(void); // r1@2
  int result; // r0@3

  if ( a1 && (v1 = *(int (**)(void))(a1 + 24)) != 0 )
    result = v1();
  else
    result = 0;
  return result;
}

//----- (0000C88C) --------------------------------------------------------
int __fastcall exif_mnote_data_get_id(int a1)
{
  int (*v1)(void); // r2@2
  int result; // r0@3

  if ( a1 && (v1 = *(int (**)(void))(a1 + 28)) != 0 )
    result = v1();
  else
    result = 0;
  return result;
}

//----- (0000C89C) --------------------------------------------------------
int __fastcall exif_mnote_data_get_name(int a1)
{
  int (*v1)(void); // r2@2
  int result; // r0@3

  if ( a1 && (v1 = *(int (**)(void))(a1 + 32)) != 0 )
    result = v1();
  else
    result = 0;
  return result;
}

//----- (0000C8AC) --------------------------------------------------------
int __fastcall exif_mnote_data_get_title(int a1)
{
  int (*v1)(void); // r2@2
  int result; // r0@3

  if ( a1 && (v1 = *(int (**)(void))(a1 + 36)) != 0 )
    result = v1();
  else
    result = 0;
  return result;
}

//----- (0000C8BC) --------------------------------------------------------
int __fastcall exif_mnote_data_get_description(int a1)
{
  int (*v1)(void); // r2@2
  int result; // r0@3

  if ( a1 && (v1 = *(int (**)(void))(a1 + 40)) != 0 )
    result = v1();
  else
    result = 0;
  return result;
}

//----- (0000C8CC) --------------------------------------------------------
int __fastcall exif_mnote_data_get_value(int a1)
{
  int (*v1)(void); // r12@2
  int result; // r0@3

  if ( a1 && (v1 = *(int (**)(void))(a1 + 44)) != 0 )
    result = v1();
  else
    result = 0;
  return result;
}

//----- (0000C8E0) --------------------------------------------------------
_DWORD *__fastcall exif_mnote_data_log(_DWORD *result, _DWORD *a2)
{
  _DWORD *v2; // r5@1
  _DWORD *v3; // r4@1

  v2 = result;
  v3 = a2;
  if ( result )
  {
    j_exif_log_unref(result[12]);
    v2[12] = v3;
    result = j_j_j_exif_mem_ref_0(v3);
  }
  return result;
}

//----- (0000C904) --------------------------------------------------------
signed int exif_tag_table_count()
{
  return 149;
}

//----- (0000C908) --------------------------------------------------------
int __fastcall exif_tag_table_get_tag(unsigned int a1)
{
  int result; // r0@2

  if ( a1 <= 0x94 )
    result = *((_DWORD *)&unk_23FA8 + 24 * a1);
  else
    result = 0;
  return result;
}

//----- (0000C92C) --------------------------------------------------------
int __fastcall exif_tag_table_get_name(unsigned int a1)
{
  int result; // r0@2

  if ( a1 <= 0x94 )
    result = *((_DWORD *)&unk_23FA8 + 24 * a1 + 1);
  else
    result = 0;
  return result;
}

//----- (0000C950) --------------------------------------------------------
int __fastcall exif_tag_get_name_in_ifd(int a1, unsigned int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@2
  char *v5; // r1@3
  int v6; // r12@4
  char *v7; // r2@4
  int v8; // r5@4
  int v9; // r3@6

  v2 = a2;
  v3 = a1;
  if ( a2 > 4 )
    return 0;
  v4 = sub_C9E4(a1);
  if ( v4 < 0 )
    return 0;
  v5 = (char *)&unk_23FA8 + 96 * v4 + 4;
  if ( v4 != 148 )
  {
    v6 = 16 * v2;
    v7 = (char *)&unk_23FA8 + 96 * v4;
    v8 = 148 - v4;
    while ( *(_DWORD *)v7 == v3 )
    {
      v9 = (int)&v7[v6];
      if ( *(_DWORD *)&v7[v6 + 16] != 1 )
      {
        v5 = v7 + 4;
        return *(_DWORD *)v5;
      }
      if ( *(_DWORD *)(v9 + 20) == 1 && *(_DWORD *)(v9 + 24) == 1 && *(_DWORD *)(v9 + 28) == 1 )
      {
        ++v4;
        --v8;
        v7 += 96;
        v5 = (char *)&unk_23FA8 + 96 * v4 + 4;
        if ( v8 )
          continue;
      }
      return *(_DWORD *)v5;
    }
    return 0;
  }
  return *(_DWORD *)v5;
}

//----- (0000C9E4) --------------------------------------------------------
int __fastcall sub_C9E4(int a1)
{
  _BYTE *v1; // r0@1
  signed int v2; // r0@2
  int v3; // r2@2
  signed int v4; // r0@3
  int result; // r0@6
  unsigned __int8 v6; // vf@7
  signed int v7; // r2@7
  int key; // [sp+4h] [bp-Ch]@1

  key = a1;
  v1 = bsearch(&key, &unk_23FA8, 0x94u, 0x60u, (__compar_fn_t)sub_CD64);
  if ( v1 )
  {
    v2 = v1 - (_BYTE *)&unk_23FA8;
    v3 = -1431655765 * (v2 >> 5);
    if ( v2 < 1 )
    {
LABEL_12:
      result = v3;
    }
    else
    {
      do
      {
        v4 = 1;
        if ( !__OFSUB__(v3, 1) )
          v4 = 0;
        if ( v4 )
          goto LABEL_18;
        result = v3 - 1;
        if ( *((_DWORD *)&unk_23FA8 + 24 * (v3 - 1)) != key )
          goto LABEL_12;
        v6 = __OFSUB__(result, v3);
        v7 = 1;
        if ( !v6 )
          v7 = 0;
        if ( v7 )
LABEL_18:
          __debugbreak();
        v3 = result;
      }
      while ( result > 0 );
    }
  }
  else
  {
    result = -1;
  }
  return result;
}
// CD64: using guessed type int sub_CD64();

//----- (0000CA78) --------------------------------------------------------
int __fastcall exif_tag_get_title_in_ifd(int a1, unsigned int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@2
  char *v5; // r1@4
  int v6; // r2@4
  int v7; // r3@6

  v2 = a2;
  v3 = a1;
  if ( a2 > 4 )
    return 0;
  v4 = sub_C9E4(a1);
  if ( v4 < 0 )
    return 0;
  if ( v4 != 148 )
  {
    v5 = (char *)&unk_23FA8 + 96 * v4;
    v6 = 16 * v2;
    while ( *(_DWORD *)v5 == v3 )
    {
      v7 = (int)&v5[v6];
      if ( *(_DWORD *)&v5[v6 + 16] != 1
        || *(_DWORD *)(v7 + 20) != 1
        || *(_DWORD *)(v7 + 24) != 1
        || *(_DWORD *)(v7 + 28) != 1 )
      {
        return *((_DWORD *)&unk_23FA8 + 24 * v4 + 2);
      }
      ++v4;
      v5 += 96;
      if ( v4 == 148 )
        goto LABEL_11;
    }
    return 0;
  }
LABEL_11:
  v4 = 148;
  return *((_DWORD *)&unk_23FA8 + 24 * v4 + 2);
}

//----- (0000CAF8) --------------------------------------------------------
_BYTE *__fastcall exif_tag_get_description_in_ifd(int a1, unsigned int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@1
  int v4; // r0@2
  _BYTE *result; // r0@4
  int v6; // r3@5
  int v7; // r5@5
  int v8; // r0@5
  char *v9; // r3@5
  int v10; // r2@7

  v2 = a2;
  v3 = a1;
  if ( a2 <= 4 )
  {
    v4 = sub_C9E4(a1);
    if ( v4 >= 0 )
    {
      if ( v4 == 148 )
        return &unk_157F8;
      v6 = 3 * v4;
      v7 = 16 * v2;
      v8 = 148 - v4;
      v9 = (char *)&unk_23FA8 + 32 * v6;
      while ( *(_DWORD *)v9 == v3 )
      {
        v10 = (int)&v9[v7];
        if ( *(_DWORD *)&v9[v7 + 16] != 1
          || *(_DWORD *)(v10 + 20) != 1
          || *(_DWORD *)(v10 + 24) != 1
          || *(_DWORD *)(v10 + 28) != 1 )
        {
          result = (_BYTE *)*((_DWORD *)v9 + 3);
          if ( !*result )
            result = &unk_157F8;
          return result;
        }
        --v8;
        v9 += 96;
        if ( !v8 )
          return &unk_157F8;
      }
    }
  }
  return 0;
}

//----- (0000CB98) --------------------------------------------------------
int __fastcall exif_tag_get_name(int a1)
{
  int v1; // r4@1
  int v2; // r6@1
  int result; // r0@2
  int v4; // r0@3
  signed int v5; // r1@3

  v1 = a1;
  v2 = 0;
  while ( 1 )
  {
    result = j_exif_tag_get_name_in_ifd(v1, dword_21008[v2]);
    if ( result )
      break;
    v4 = v2 + 1;
    v5 = 1;
    if ( !__OFSUB__(v2 + 1, v2) )
      v5 = 0;
    if ( v5 )
      __debugbreak();
    ++v2;
    if ( v4 >= 5 )
      return 0;
  }
  return result;
}

//----- (0000CBD4) --------------------------------------------------------
int __fastcall exif_tag_get_title(int a1)
{
  int v1; // r4@1
  int v2; // r6@1
  int result; // r0@2
  int v4; // r0@3
  signed int v5; // r1@3

  v1 = a1;
  v2 = 0;
  while ( 1 )
  {
    result = j_exif_tag_get_title_in_ifd(v1, dword_21008[v2]);
    if ( result )
      break;
    v4 = v2 + 1;
    v5 = 1;
    if ( !__OFSUB__(v2 + 1, v2) )
      v5 = 0;
    if ( v5 )
      __debugbreak();
    ++v2;
    if ( v4 >= 5 )
      return 0;
  }
  return result;
}

//----- (0000CC10) --------------------------------------------------------
_BYTE *__fastcall exif_tag_get_description(int a1)
{
  int v1; // r4@1
  int v2; // r6@1
  _BYTE *result; // r0@2
  int v4; // r0@3
  signed int v5; // r1@3

  v1 = a1;
  v2 = 0;
  while ( 1 )
  {
    result = j_exif_tag_get_description_in_ifd(v1, dword_21008[v2]);
    if ( result )
      break;
    v4 = v2 + 1;
    v5 = 1;
    if ( !__OFSUB__(v2 + 1, v2) )
      v5 = 0;
    if ( v5 )
      __debugbreak();
    ++v2;
    if ( v4 >= 5 )
      return 0;
  }
  return result;
}

//----- (0000CC4C) --------------------------------------------------------
int __fastcall exif_tag_from_name(char *s2)
{
  char *v1; // r5@1
  int v2; // r4@1

  v1 = s2;
  v2 = 0u;
  if ( s2 )
  {
    while ( strcmp(*(const char **)((char *)&unk_23FA8 + v2 + 4), v1) )
    {
      v2 += 96;
      if ( v2 == 14208 )
        return 0;
    }
    v2 = *(_DWORD *)((char *)&unk_23FA8 + v2);
  }
  return v2;
}

//----- (0000CC94) --------------------------------------------------------
signed int __fastcall exif_tag_get_support_level_in_ifd(int a1, unsigned int a2, unsigned int a3)
{
  unsigned int v3; // r5@1
  unsigned int v4; // r7@1
  int v5; // r8@1
  signed int v6; // r6@1
  int v7; // r0@2
  signed int v8; // r1@2
  int v9; // r1@6
  char *v10; // r7@8
  unsigned int v11; // r3@11
  char *v12; // r2@11
  int v13; // t1@13
  int v14; // r3@19
  int v15; // r0@19
  char *v16; // r2@19

  v3 = a2;
  v4 = a3;
  v5 = a1;
  v6 = 0;
  if ( a2 <= 4 )
  {
    v7 = sub_C9E4(a1);
    v8 = 0;
    if ( v7 == 148 )
      v8 = 1;
    if ( v7 < 0 )
      v6 = 1;
    v9 = v8 | v6;
    if ( v4 < 4 )
    {
      if ( !v9 )
      {
        v14 = 3 * v7;
        v15 = 148 - v7;
        v16 = (char *)&unk_23FA8 + 32 * v14 + 16;
        do
        {
          if ( *((_DWORD *)v16 - 4) != v5 )
            break;
          v6 = *((_DWORD *)&v16[16 * v3] + v4);
          if ( v6 != 1 )
            return v6;
          v16 += 96;
          --v15;
        }
        while ( v15 );
      }
      v6 = 1;
    }
    else
    {
      if ( !v9 )
      {
        v10 = (char *)&unk_23FA8 + 96 * v7 + 16 * v3 + 20;
        while ( *((_DWORD *)&unk_23FA8 + 24 * v7) == v5 )
        {
          v6 = *((_DWORD *)&unk_23FA8 + 24 * v7 + 4 * v3 + 4);
          if ( v6 != 1 )
          {
            v11 = 1;
            v12 = v10;
            while ( v11 <= 3 )
            {
              v13 = *(_DWORD *)v12;
              v12 += 4;
              ++v11;
              if ( v13 != v6 )
                goto LABEL_16;
            }
            if ( v11 == 4 )
              return v6;
          }
LABEL_16:
          ++v7;
          v10 += 96;
          if ( v7 == 148 )
            break;
        }
      }
      v6 = 0;
    }
  }
  return v6;
}

//----- (0000CD6C) --------------------------------------------------------
unsigned int __fastcall exif_array_set_byte_order(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@1
  int v6; // r10@1
  int v7; // r5@1
  int v8; // r6@1
  unsigned int result; // r0@1
  unsigned int v10; // r7@1
  int v11; // r0@13
  int v12; // r0@23
  unsigned int v13; // [sp+0h] [bp-30h]@27
  unsigned int v14; // [sp+4h] [bp-2Ch]@27
  unsigned int v15; // [sp+8h] [bp-28h]@25
  unsigned int v16; // [sp+Ch] [bp-24h]@25

  v5 = a1;
  v6 = a4;
  v7 = a3;
  v8 = a2;
  result = j_exif_format_get_size(a1);
  v10 = result;
  if ( v8 && v7 && result )
  {
    switch ( v5 )
    {
      case 3:
        while ( 1 )
        {
          result = j_exif_get_sshort(v8, v6);
          if ( v8 )
          {
            if ( a5 == 1 )
            {
              *(_BYTE *)v8 = result;
              result >>= 8;
LABEL_10:
              *(_BYTE *)(v8 + 1) = result;
              goto LABEL_11;
            }
            if ( !a5 )
            {
              *(_BYTE *)v8 = BYTE1(result);
              goto LABEL_10;
            }
          }
LABEL_11:
          v8 += v10;
          if ( !--v7 )
            return result;
        }
      case 4:
        do
        {
          v11 = j_exif_get_slong(v8, v6);
          result = j_exif_set_slong(v8, a5, v11);
          v8 += v10;
          --v7;
        }
        while ( v7 );
        return result;
      case 8:
        goto LABEL_15;
      case 9:
        do
        {
          v12 = j_exif_get_slong(v8, v6);
          result = j_exif_set_slong(v8, a5, v12);
          v8 += v10;
          --v7;
        }
        while ( v7 );
        return result;
      case 5:
        do
        {
          j_exif_get_srational((int)&v15, v8, v6);
          result = j_exif_set_srational_0(v8, a5, v15, v16);
          v8 += v10;
          --v7;
        }
        while ( v7 );
        return result;
      case 10:
        do
        {
          j_exif_get_srational_0((int)&v13, v8, v6);
          result = j_exif_set_srational(v8, a5, v13, v14);
          v8 += v10;
          --v7;
        }
        while ( v7 );
        return result;
      default:
        return result;
    }
    do
    {
LABEL_15:
      result = j_exif_get_sshort(v8, v6);
      if ( v8 )
      {
        if ( a5 == 1 )
        {
          *(_BYTE *)v8 = result;
          result >>= 8;
LABEL_20:
          *(_BYTE *)(v8 + 1) = result;
          goto LABEL_21;
        }
        if ( !a5 )
        {
          *(_BYTE *)v8 = BYTE1(result);
          goto LABEL_20;
        }
      }
LABEL_21:
      v8 += v10;
      --v7;
    }
    while ( v7 );
  }
  return result;
}

//----- (0000CE78) --------------------------------------------------------
int __fastcall exif_get_short(int a1, int a2)
{
  return (unsigned __int16)j_exif_get_sshort(a1, a2);
}

//----- (0000CE88) --------------------------------------------------------
int __fastcall exif_set_sshort(int result, int a2, __int16 a3)
{
  if ( result )
  {
    if ( a2 == 1 )
    {
      *(_BYTE *)result = a3;
      *(_BYTE *)(result + 1) = HIBYTE(a3);
    }
    else if ( !a2 )
    {
      *(_BYTE *)result = HIBYTE(a3);
      *(_BYTE *)(result + 1) = a3;
    }
  }
  return result;
}

//----- (0000CEA8) --------------------------------------------------------
int __fastcall exif_get_sshort(int a1, int a2)
{
  int result; // r0@3

  if ( !a1 )
    goto LABEL_6;
  if ( a2 != 1 )
  {
    if ( !a2 )
      return (signed __int16)(*(_BYTE *)(a1 + 1) | (*(_BYTE *)a1 << 8));
LABEL_6:
    LOWORD(result) = 0;
    return (signed __int16)result;
  }
  return (signed __int16)(*(_BYTE *)a1 | (*(_BYTE *)(a1 + 1) << 8));
}

//----- (0000CED4) --------------------------------------------------------
int __fastcall exif_get_srational(int a1, int a2, int a3)
{
  int v3; // r7@1
  int v4; // r6@1
  int v5; // r4@1
  int v6; // r5@2
  int result; // r0@2

  v3 = a2;
  v4 = a3;
  v5 = a1;
  if ( a2 )
  {
    v6 = j_exif_get_slong(a2, a3);
    result = j_exif_get_slong(v3 + 4, v4);
  }
  else
  {
    v6 = 0;
    result = 0;
  }
  *(_DWORD *)v5 = v6;
  *(_DWORD *)(v5 + 4) = result;
  return result;
}

//----- (0000CF04) --------------------------------------------------------
int __fastcall exif_set_srational(int result, int a2, unsigned int a3, unsigned int a4)
{
  int v4; // r6@1
  unsigned int v5; // r4@1
  int v6; // r5@1

  v4 = result;
  v5 = a4;
  v6 = a2;
  if ( result )
  {
    j_exif_set_slong(result, a2, a3);
    result = j_j_j_exif_set_slong(v4 + 4, v6, v5);
  }
  return result;
}

//----- (0000CF28) --------------------------------------------------------
int __fastcall exif_get_slong(int a1, int a2)
{
  int result; // r0@3
  int v3; // r1@5

  if ( !a1 )
    goto LABEL_9;
  if ( a2 == 1 )
    return (*(_BYTE *)(a1 + 2) << 16) | (*(_BYTE *)(a1 + 3) << 24) | (*(_BYTE *)(a1 + 1) << 8) | *(_BYTE *)a1;
  if ( a2 )
  {
LABEL_9:
    result = 0;
  }
  else
  {
    v3 = (*(_BYTE *)(a1 + 1) << 16) | (*(_BYTE *)a1 << 24) | (*(_BYTE *)(a1 + 2) << 8);
    result = _byteswap_ulong(*(_DWORD *)a1);
  }
  return result;
}

//----- (0000CF64) --------------------------------------------------------
int __fastcall exif_set_slong(int result, int a2, unsigned int a3)
{
  if ( result )
  {
    if ( a2 == 1 )
    {
      *(_BYTE *)(result + 3) = BYTE3(a3);
      *(_BYTE *)(result + 2) = a3 >> 16;
      *(_BYTE *)(result + 1) = BYTE1(a3);
      *(_BYTE *)result = a3;
    }
    else if ( !a2 )
    {
      *(_BYTE *)result = BYTE3(a3);
      *(_BYTE *)(result + 1) = a3 >> 16;
      *(_BYTE *)(result + 2) = BYTE1(a3);
      *(_BYTE *)(result + 3) = a3;
    }
  }
  return result;
}

//----- (0000CF9C) --------------------------------------------------------
int __fastcall exif_convert_utf16_to_utf8(int result, _WORD *a2, signed int a3)
{
  unsigned __int16 v3; // r5@2
  _WORD *v4; // r1@3
  int v5; // r5@6
  unsigned __int8 v6; // vf@6
  signed int v7; // r2@6
  signed int v8; // r5@12
  signed int v9; // r5@17
  int v10; // t1@21

  if ( a3 >= 1 )
  {
    v3 = *a2;
    if ( *a2 )
    {
      v4 = a2 + 1;
      do
      {
        if ( v3 > 0x7Fu )
        {
          if ( 0 == (v3 & 0xF800u) >> 11 )
          {
            if ( a3 < 3 )
              break;
            *(_BYTE *)result = ((unsigned int)v3 >> 6) & 0x1F | 0xC0;
            *(_BYTE *)(result + 1) = *(v4 - 1) & 0x3F | 0x80;
            v8 = 1;
            if ( !__OFSUB__(a3, 2) )
              v8 = 0;
            if ( v8 )
              goto LABEL_24;
            a3 -= 2;
            result += 2;
          }
          else
          {
            if ( a3 < 4 )
              break;
            *(_BYTE *)result = ((unsigned int)v3 >> 12) | 0xE0;
            *(_BYTE *)(result + 1) = ((unsigned int)*(v4 - 1) >> 6) & 0x3F | 0x80;
            *(_BYTE *)(result + 2) = *(v4 - 1) & 0x3F | 0x80;
            v9 = 1;
            if ( !__OFSUB__(a3, 3) )
              v9 = 0;
            if ( v9 )
LABEL_24:
              __debugbreak();
            a3 -= 3;
            result += 3;
          }
        }
        else
        {
          if ( a3 < 2 )
            break;
          *(_BYTE *)result = v3;
          v5 = a3 - 1;
          v6 = __OFSUB__(a3 - 1, a3);
          v7 = 1;
          if ( !v6 )
            v7 = 0;
          if ( v7 )
            goto LABEL_24;
          ++result;
          a3 = v5;
        }
        v10 = *v4;
        ++v4;
        v3 = v10;
      }
      while ( v10 );
    }
    *(_BYTE *)result = 0;
  }
  return result;
}

//----- (0000D04C) --------------------------------------------------------
signed int __fastcall exif_mnote_data_canon_identify(int *a1)
{
  int *v1; // r4@1
  int v2; // r0@2
  _DWORD *v3; // r0@11
  signed int v4; // r4@11
  char *v5; // r0@12
  char v7; // [sp+4h] [bp-1Ch]@12
  int v8; // [sp+Ch] [bp-14h]@1

  v1 = a1;
  v8 = v0;
  if ( j_exif_content_get_entry(*a1, 271) )
  {
    v2 = *v1;
  }
  else if ( j_exif_content_get_entry(v1[1], 271) )
  {
    v2 = v1[1];
  }
  else if ( j_exif_content_get_entry(v1[2], 271) )
  {
    v2 = v1[2];
  }
  else if ( j_exif_content_get_entry(v1[3], 271) )
  {
    v2 = v1[3];
  }
  else
  {
    if ( !j_exif_content_get_entry(v1[4], 271) )
    {
      v4 = 0;
      goto LABEL_14;
    }
    v2 = v1[4];
  }
  v3 = j_exif_content_get_entry(v2, 271);
  v4 = 0;
  if ( v3 )
  {
    v5 = j_exif_entry_get_value((int)v3, &v7, 8);
    if ( !strcmp(v5, "Canon") )
      v4 = 1;
  }
LABEL_14:
  if ( v0 != v8 )
    _stack_chk_fail(v0 - v8);
  return v4;
}
// 6D34: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (0000D108) --------------------------------------------------------
_DWORD *__fastcall exif_mnote_data_canon_new(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r5@1
  _DWORD *v4; // r0@2
  _DWORD *v5; // r4@2
  int v6; // r3@3

  v2 = a1;
  v3 = a2;
  if ( a1 && (v4 = (_DWORD *)j_exif_mem_alloc(a1, 76), (v5 = v4) != 0) )
  {
    j_exif_mnote_data_construct(v4, v2);
    v5[1] = sub_D1B8;
    v5[5] = sub_D1C4;
    v5[4] = sub_D208;
    v5[3] = sub_D210;
    v5[2] = sub_D474;
    v5[6] = sub_D620;
    v5[7] = sub_D654;
    v5[8] = sub_D68C;
    v6 = (int)(v5 + 9);
    v5[18] = v3;
    *(_DWORD *)v6 = sub_D6C4;
    *(_DWORD *)(v6 + 4) = sub_D6FC;
    *(_DWORD *)(v6 + 8) = sub_D738;
  }
  else
  {
    v5 = 0;
  }
  return v5;
}
// D1B8: using guessed type int sub_D1B8();
// D208: using guessed type int sub_D208();

//----- (0000D1C4) --------------------------------------------------------
unsigned int __fastcall sub_D1C4(unsigned int result, int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@1
  int v4; // r8@2
  int v5; // r7@3
  unsigned int v6; // r6@3

  v2 = result;
  v3 = a2;
  if ( result )
  {
    v4 = *(_DWORD *)(result + 64);
    *(_DWORD *)(result + 64) = a2;
    result = *(_DWORD *)(result + 60);
    if ( result )
    {
      v5 = 0;
      v6 = 0;
      do
      {
        *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 20) = v3;
        j_exif_array_set_byte_order(
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 4),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 12),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 8),
          v4,
          v3);
        result = *(_DWORD *)(v2 + 60);
        ++v6;
        v5 += 24;
      }
      while ( v6 < result );
    }
  }
  return result;
}

//----- (0000D210) --------------------------------------------------------
int __fastcall sub_D210(int a1, int a2, unsigned int a3)
{
  int v3; // r7@1
  int v4; // r4@1
  int v5; // r5@4
  unsigned int v6; // r0@4
  unsigned int v7; // r10@7
  int v8; // r6@7
  int v9; // r0@7
  int v10; // r9@9
  unsigned int v11; // r6@9
  unsigned int v12; // r8@9
  const char *v13; // r11@9
  int v14; // r10@12
  int v15; // r1@12
  int v16; // r6@12
  int v17; // r0@12
  const char *v18; // r7@12
  int v19; // r1@12
  unsigned int v20; // r11@12
  int v21; // r1@14
  unsigned int v22; // r5@14
  unsigned int v23; // r1@17
  signed int v24; // r0@17
  int v25; // r3@22
  int v26; // r0@22
  int v27; // r0@29
  int v28; // r1@29
  int result; // r0@30
  unsigned int v30; // [sp+14h] [bp-34h]@9
  int v31; // [sp+1Ch] [bp-2Ch]@9
  int v32; // [sp+20h] [bp-28h]@1

  v3 = a2;
  v4 = a1;
  v32 = a2;
  if ( !a1 || !a2 || !a3 || (v5 = *(_DWORD *)(a1 + 68), v6 = v5 + 8, v5 + 8 > a3) || v6 < v5 + 6 || v6 <= 1 )
  {
    v27 = *(_DWORD *)(v4 + 48);
    v28 = 3;
    return j_exif_log(v27, v28);
  }
  v7 = a3;
  v8 = j_exif_get_short(a2 + v5 + 6, *(_DWORD *)(v4 + 64));
  sub_D774(v4);
  v9 = j_exif_mem_alloc(*(_DWORD *)(v4 + 52), 24 * v8);
  *(_DWORD *)(v4 + 56) = v9;
  if ( !v9 )
  {
    v27 = *(_DWORD *)(v4 + 48);
    v28 = 2;
    return j_exif_log(v27, v28);
  }
  if ( !v8 )
  {
    v31 = 0;
    goto LABEL_34;
  }
  v31 = 0;
  v10 = -v8;
  v11 = v7;
  v12 = v5 + 20;
  v13 = "ExifMnoteCanon";
  v30 = v7;
  while ( v12 - 12 <= 0xFFFFFFF3 && v12 <= v11 )
  {
    v14 = 3 * v31;
    *(_DWORD *)(*(_DWORD *)(v4 + 56) + 24 * v31) = j_exif_get_short(v3 + v12 - 12, *(_DWORD *)(v4 + 64));
    *(_DWORD *)(*(_DWORD *)(v4 + 56) + 8 * v14 + 4) = j_exif_get_short(v3 + v12 - 10, *(_DWORD *)(v4 + 64));
    v15 = *(_DWORD *)(v4 + 64);
    *(_DWORD *)(*(_DWORD *)(v4 + 56) + 8 * v14 + 8) = j_exif_get_long();
    *(_DWORD *)(*(_DWORD *)(v4 + 56) + 8 * v14 + 20) = *(_DWORD *)(v4 + 64);
    v16 = *(_DWORD *)(v4 + 48);
    j_mnote_canon_tag_get_name(*(_DWORD *)(*(_DWORD *)(v4 + 56) + 24 * v31));
    j_exif_log(v16, 1);
    v17 = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v4 + 56) + 24 * v31 + 4));
    v18 = v13;
    v19 = *(_DWORD *)(v4 + 56) + 24 * v31;
    v20 = *(_DWORD *)(v19 + 8) * v17;
    *(_DWORD *)(v19 + 16) = v20;
    if ( v20 )
    {
      if ( v20 < 5 )
      {
        v22 = v12 - 4;
      }
      else
      {
        v21 = *(_DWORD *)(v4 + 64);
        v22 = j_exif_get_long() + 6;
      }
      v11 = v30;
      v23 = v22 + v20;
      v24 = 1;
      if ( v22 + v20 >= v22 )
        v24 = 0;
      if ( v23 > v30 || v24 || v23 < v22 )
      {
        v13 = v18;
        j_exif_log(*(_DWORD *)(v4 + 48), 1);
        goto LABEL_27;
      }
      *(_DWORD *)(*(_DWORD *)(v4 + 56) + 24 * v31 + 12) = j_exif_mem_alloc(*(_DWORD *)(v4 + 52), v20);
      v26 = *(_DWORD *)(*(_DWORD *)(v4 + 56) + 24 * v31 + 12);
      if ( !v26 )
      {
        v13 = v18;
        j_exif_log(*(_DWORD *)(v4 + 48), 2);
        goto LABEL_27;
      }
      _aeabi_memcpy(v26, v32 + v22, v20, v25);
      ++v31;
    }
    else
    {
      j_exif_log(*(_DWORD *)(v4 + 48), 3);
      v11 = v30;
    }
    v13 = v18;
LABEL_27:
    v3 = v32;
    v12 += 12;
    if ( !++v10 )
      goto LABEL_34;
  }
  j_exif_log(*(_DWORD *)(v4 + 48), 3);
LABEL_34:
  result = v31;
  *(_DWORD *)(v4 + 60) = v31;
  return result;
}

//----- (0000D474) --------------------------------------------------------
unsigned int __fastcall sub_D474(unsigned int result, int *a2, int *a3)
{
  int *v3; // r8@1
  unsigned int v4; // r5@1
  int *v5; // r10@1
  int v6; // r0@4
  int v7; // r0@4
  int v8; // r6@6
  unsigned int v9; // r4@6
  int v10; // r1@7
  int v11; // r3@7
  int v12; // r2@7
  int v13; // r0@7
  int v14; // r3@7
  int v15; // r1@7
  unsigned int v16; // r7@7
  int v17; // r11@9
  int v18; // r0@9
  int v19; // r9@10
  int v20; // r3@12
  int v21; // r1@12
  int v22; // r2@12
  int v23; // r1@14
  int v24; // r0@14
  int v25; // r0@21
  int v26; // ST00_4@21
  int *v27; // [sp+8h] [bp-28h]@1

  v3 = a3;
  v4 = result;
  v5 = a2;
  v27 = a3;
  if ( result && a2 && a3 )
  {
    v6 = 12 * *(_DWORD *)(result + 60) | 2;
    *a3 = v6 + 4;
    v7 = j_exif_mem_alloc(*(_DWORD *)(v4 + 52), v6 + 4);
    *v5 = v7;
    if ( !v7 )
    {
      v25 = *(_DWORD *)(v4 + 48);
      v26 = *v3;
      return j_exif_log(v25, 2);
    }
    j_exif_set_sshort(v7, *(_DWORD *)(v4 + 64), *(_WORD *)(v4 + 60));
    result = *(_DWORD *)(v4 + 60);
    if ( result )
    {
      v8 = 0;
      v9 = 0;
      do
      {
        j_exif_set_sshort(*v5 + v8 + 2, *(_DWORD *)(v4 + 64), *(_WORD *)(*(_DWORD *)(v4 + 56) + 2 * v8));
        j_exif_set_sshort(*v5 + v8 + 4, *(_DWORD *)(v4 + 64), *(_WORD *)(*(_DWORD *)(v4 + 56) + 2 * v8 + 4));
        v10 = *(_DWORD *)(v4 + 64);
        v11 = *v5 + v8;
        v12 = *(_DWORD *)(*(_DWORD *)(v4 + 56) + 2 * v8 + 8);
        j_exif_set_long();
        v13 = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v4 + 56) + 2 * v8 + 4));
        v15 = *(_DWORD *)(v4 + 56);
        v16 = *(_DWORD *)(v15 + 2 * v8 + 8) * v13;
        if ( v16 <= 0x10000 )
        {
          if ( v16 < 5 )
          {
            v19 = v8 + 10;
          }
          else
          {
            v17 = (v16 & 1) + v16 + *v3;
            v18 = j_exif_mem_realloc(*(_DWORD *)(v4 + 52), *v5, v17);
            if ( !v18 )
            {
              v25 = *(_DWORD *)(v4 + 48);
              return j_exif_log(v25, 2);
            }
            *v5 = v18;
            *v3 = v17;
            v19 = v17 - v16;
            if ( v16 & 1 )
            {
              --v19;
              *(_BYTE *)(*v5 + v17 - 1) = 0;
            }
            v20 = *v5;
            v21 = *(_DWORD *)(v4 + 64);
            v22 = *(_DWORD *)(v4 + 68) + v19;
            j_exif_set_long();
            v15 = *(_DWORD *)(v4 + 56);
            v3 = v27;
          }
          v23 = *(_DWORD *)(v15 + 2 * v8 + 12);
          v24 = *v5 + v19;
          if ( v23 )
            _aeabi_memcpy(v24, v23, v16, v14);
          else
            _aeabi_memset(v24, v16, 0);
          if ( v16 <= 3 )
            _aeabi_memset(*v5 + v19 + v16, 4 - v16, 0);
        }
        result = *(_DWORD *)(v4 + 60);
        ++v9;
        v8 += 12;
      }
      while ( v9 < result );
    }
  }
  return result;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);

//----- (0000D620) --------------------------------------------------------
int __fastcall sub_D620(int a1)
{
  int v1; // r4@1
  int v2; // r6@2
  unsigned int v3; // r7@3
  int v4; // r5@3

  v1 = a1;
  if ( a1 && (v2 = 0, *(_DWORD *)(a1 + 60)) )
  {
    v3 = 0;
    v4 = 0;
    do
    {
      v4 += j_mnote_canon_entry_count_values((_DWORD *)(*(_DWORD *)(v1 + 56) + v2));
      ++v3;
      v2 += 24;
    }
    while ( v3 < *(_DWORD *)(v1 + 60) );
  }
  else
  {
    v4 = 0;
  }
  return v4;
}

//----- (0000D654) --------------------------------------------------------
int __fastcall sub_D654(unsigned int a1, unsigned int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@2
  unsigned int v5; // [sp+4h] [bp-14h]@2

  v2 = a1;
  if ( a1 )
  {
    v3 = 0;
    sub_D7BC(a1, a2, &v5, 0);
    if ( v5 < *(_DWORD *)(v2 + 60) )
      v3 = *(_DWORD *)(*(_DWORD *)(v2 + 56) + 24 * v5);
  }
  else
  {
    v3 = 0;
  }
  return v3;
}

//----- (0000D68C) --------------------------------------------------------
unsigned int __fastcall sub_D68C(unsigned int a1, unsigned int a2)
{
  unsigned int v2; // r4@1
  unsigned int result; // r0@3
  int v4; // [sp+0h] [bp-10h]@2
  unsigned int v5; // [sp+4h] [bp-Ch]@2

  v2 = a1;
  if ( a1 && (sub_D7BC(a1, a2, &v5, &v4), v5 < *(_DWORD *)(v2 + 60)) )
    result = j_mnote_canon_tag_get_name_sub(*(_DWORD *)(*(_DWORD *)(v2 + 56) + 24 * v5), v4, *(_DWORD *)(v2 + 72));
  else
    result = 0;
  return result;
}

//----- (0000D6C4) --------------------------------------------------------
unsigned int __fastcall sub_D6C4(unsigned int a1, unsigned int a2)
{
  unsigned int v2; // r4@1
  unsigned int result; // r0@3
  int v4; // [sp+0h] [bp-10h]@2
  unsigned int v5; // [sp+4h] [bp-Ch]@2

  v2 = a1;
  if ( a1 && (sub_D7BC(a1, a2, &v5, &v4), v5 < *(_DWORD *)(v2 + 60)) )
    result = j_mnote_canon_tag_get_title_sub(*(_DWORD *)(*(_DWORD *)(v2 + 56) + 24 * v5), v4, *(_DWORD *)(v2 + 72));
  else
    result = 0;
  return result;
}

//----- (0000D6FC) --------------------------------------------------------
_BYTE *__fastcall sub_D6FC(unsigned int a1, unsigned int a2)
{
  unsigned int v2; // r5@1
  _BYTE *v3; // r4@2
  unsigned int v5; // [sp+4h] [bp-14h]@2

  v2 = a1;
  if ( a1 )
  {
    v3 = 0;
    sub_D7BC(a1, a2, &v5, 0);
    if ( v5 < *(_DWORD *)(v2 + 60) )
      v3 = j_mnote_canon_tag_get_description(*(_DWORD *)(*(_DWORD *)(v2 + 56) + 24 * v5));
  }
  else
  {
    v3 = 0;
  }
  return v3;
}

//----- (0000D738) --------------------------------------------------------
char *__fastcall sub_D738(unsigned int a1, unsigned int a2, char *a3, int a4)
{
  unsigned int v4; // r6@1
  int v5; // r4@1
  char *v6; // r5@1
  char *result; // r0@3
  unsigned int v8; // [sp+0h] [bp-18h]@2
  unsigned int v9; // [sp+4h] [bp-14h]@2

  v4 = a1;
  v5 = a4;
  v6 = a3;
  if ( a1 && (sub_D7BC(a1, a2, &v9, &v8), v9 < *(_DWORD *)(v4 + 60)) )
    result = j_mnote_canon_entry_get_value(*(_DWORD *)(v4 + 56) + 24 * v9, v8, v6, v5);
  else
    result = 0;
  return result;
}

//----- (0000D774) --------------------------------------------------------
int __fastcall sub_D774(int result)
{
  int v1; // r4@1
  int v2; // r1@2
  unsigned int v3; // r0@3
  signed int v4; // r6@4
  int v5; // r7@4
  int v6; // r1@6

  v1 = result;
  if ( result )
  {
    v2 = *(_DWORD *)(result + 56);
    if ( v2 )
    {
      v3 = *(_DWORD *)(result + 60);
      if ( v3 )
      {
        v4 = 12;
        v5 = 0;
        while ( 1 )
        {
          v6 = *(_DWORD *)(v2 + v4);
          if ( v6 )
          {
            j_exif_mem_free(*(_DWORD *)(v1 + 52), v6);
            *(_DWORD *)(*(_DWORD *)(v1 + 56) + v4) = 0;
            v3 = *(_DWORD *)(v1 + 60);
          }
          if ( ++v5 >= v3 )
            break;
          v4 += 24;
          v2 = *(_DWORD *)(v1 + 56);
        }
        v2 = *(_DWORD *)(v1 + 56);
      }
      result = j_exif_mem_free(*(_DWORD *)(v1 + 52), v2);
      __asm
      {
        VMOV.I32        D16, #0
        VSTR            D16, [R4,#0x38]
      }
    }
  }
  return result;
}

//----- (0000D7BC) --------------------------------------------------------
unsigned int __fastcall sub_D7BC(unsigned int result, unsigned int a2, unsigned int *a3, _DWORD *a4)
{
  unsigned int v4; // r7@1
  _DWORD *v5; // r8@1
  unsigned int *v6; // r6@1
  unsigned int v7; // r5@1
  int v8; // r4@4

  v4 = result;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  if ( result )
  {
    if ( a3 )
    {
      *a3 = 0;
      result = *(_DWORD *)(result + 60);
      if ( result )
      {
        v8 = 0;
        result = 0;
        while ( 1 )
        {
          result = j_mnote_canon_entry_count_values((_DWORD *)(*(_DWORD *)(v4 + 56) + 24 * result));
          if ( result + v8 > v7 )
            break;
          v8 += result;
          result = *v6 + 1;
          *v6 = result;
          if ( result >= *(_DWORD *)(v4 + 60) )
            return result;
        }
        if ( v5 )
        {
          result = v7 - v8;
          *v5 = v7 - v8;
        }
      }
    }
  }
  return result;
}

//----- (0000D810) --------------------------------------------------------
signed int __fastcall mnote_canon_entry_count_values(_DWORD *a1)
{
  _DWORD *v1; // r4@1
  int v2; // r1@2
  signed int result; // r0@2
  unsigned int v4; // r0@8

  v1 = a1;
  if ( !a1 )
    return 0;
  v2 = *a1;
  result = 1;
  if ( *v1 > 14 )
  {
    if ( v2 != 15 && v2 != 160 )
      return result;
LABEL_7:
    if ( v1[1] == 3 )
    {
      v4 = j_exif_get_short(v1[3], v1[5]);
      if ( v1[4] - 2 < v4 )
        v4 = v1[4] - 2;
      return v4 >> 1;
    }
    return 0;
  }
  switch ( v2 )
  {
    case 2:
    case 5:
      result = v1[2];
      break;
    case 1:
    case 4:
      goto LABEL_7;
    default:
      return result;
  }
  return result;
}

//----- (0000D860) --------------------------------------------------------
char *__fastcall mnote_canon_entry_get_value(int a1, unsigned int a2, char *a3, int a4)
{
  int v4; // r5@1
  int v5; // r4@1
  char *v6; // r9@1
  unsigned int v7; // r6@1
  const char *v8; // r7@2
  int v9; // r0@2
  size_t v10; // r8@2
  int v11; // r0@4
  unsigned int v12; // r0@5
  int v13; // r0@7
  int v16; // r0@12
  unsigned int v17; // r0@13
  signed int v19; // r0@15
  int *v20; // r1@15
  int v21; // r0@19
  int v26; // r0@23
  unsigned int v27; // r0@24
  int v30; // r0@28
  int *v31; // r0@30
  int v32; // r1@31
  int v33; // r0@33
  int v34; // r0@35
  int v35; // r1@37
  int v36; // r0@39
  int v37; // r0@43
  int v38; // r1@45
  int v39; // r0@46
  unsigned int v40; // r0@47
  int v41; // r0@49
  int v43; // r2@72
  int *v44; // r0@72
  signed int v45; // r4@72
  __int16 *v46; // r5@72
  int *v47; // r1@82
  int v55; // r11@99
  signed int v56; // r1@99
  signed int v57; // r3@99
  int v58; // r6@101
  int v59; // r6@105
  int v60; // ST14_4@106
  int v61; // r0@106
  int v62; // r0@107
  int n; // [sp+0h] [bp-C0h]@15
  char v64; // [sp+18h] [bp-A8h]@49
  int v65; // [sp+98h] [bp-28h]@1

  v4 = a1;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  v65 = v0;
  if ( !a1 )
    goto LABEL_50;
  v8 = *(const char **)(a1 + 12);
  _aeabi_memset(a3, a4, 0);
  v9 = *(_DWORD *)v4;
  v10 = v5 - 1;
  if ( *(_DWORD *)v4 <= 159 )
  {
    switch ( v9 )
    {
      case 1:
        v11 = *(_DWORD *)(v4 + 4);
        if ( v11 != 3 )
        {
          j_exif_format_get_name(v11);
          j_exif_format_get_name(3);
          break;
        }
        v12 = (unsigned int)j_exif_get_short((int)v8, *(_DWORD *)(v4 + 20)) >> 1;
        if ( v12 <= v7 )
          goto LABEL_50;
        if ( *(_DWORD *)(v4 + 8) != v12 )
          break;
        v13 = j_exif_get_short((int)&v8[2 * v7 + 2], *(_DWORD *)(v4 + 20));
        _R7 = v13;
        if ( (signed int)v7 <= 21 )
        {
          if ( v7 == 1 )
          {
            if ( v13 )
              break;
            v47 = &GLOBAL_OFFSET_TABLE_;
LABEL_83:
            _strncpy_chk2(v6, v47 - 17292, v5 - 1, -1);
            goto def_D8A4;
          }
          if ( v7 == 15 )
          {
            if ( v13 != 0x7FFF && (v13 & 0xC000) == 0x4000 )
              break;
            v32 = 15;
            n = v5 - 1;
            v31 = &dword_27788;
          }
          else
          {
def_DD8C:
            v32 = v7;
            n = v10;
            v31 = &dword_27788;
          }
          _R2 = _R7;
          goto LABEL_32;
        }
        v43 = 0;
        v44 = &dword_27788;
        v45 = -243;
        v46 = &word_2778C;
        switch ( v7 )
        {
          case 0x16u:
          case 0x17u:
          case 0x18u:
          case 0x23u:
          case 0x24u:
            goto LABEL_17;
          case 0x1Cu:
            break;
          default:
            goto def_DD8C;
          case 0x19u:
          case 0x1Au:
            __asm
            {
              VMOV            S0, R7  ; jumptable 0000DD8C cases 25,26
              VCVT.F64.S32    D16, S0
              VLDR            D17, =0.03125
              VMUL.F64        D16, D16, D17
              VMOV.F64        D17, #0.5
              VMUL.F64        D16, D16, D17
              VMOV            R0, R1, D16
            }
            exp2(_R0);
            goto LABEL_17;
          case 0x22u:
            __asm
            {
              VMOV            S0, R7  ; jumptable 0000DD8C case 34
              VCVT.F64.S32    D16, S0
              VMOV.F64        D17, #10.0
              VDIV.F64        D16, D16, D17
            }
            goto LABEL_22;
        }
        while ( (unsigned int)*v44 <= 0x1B )
        {
          ++v43;
          v46 += 6;
          ++v45;
          v44 += 3;
          if ( v43 == 243 )
            goto LABEL_17;
        }
        if ( *v44 == 28 )
        {
          v55 = 0;
          v56 = 1;
          v57 = v45;
          do
          {
            if ( (unsigned int)(v57 + 31) >= 9 )
              break;
            v58 = LOWORD(v44[v56]);
            v56 += 3;
            if ( (1 << v58) & _R7 )
              v55 = v58;
            ++v57;
          }
          while ( v57 );
          do
          {
            if ( (unsigned int)(v45 + 31) > 8 )
              break;
            v59 = (unsigned __int16)*v46;
            if ( (1 << v59) & _R7 )
            {
              v60 = *((_DWORD *)v46 + 1);
              v61 = _strlen_chk(v6, -1);
              _strncat_chk(v6, v60, v10 - v61, -1);
              if ( v59 != v55 )
              {
                v62 = _strlen_chk(v6, -1);
                _strncat_chk(v6, ", ", v10 - v62, -1);
              }
            }
            v46 += 6;
            ++v45;
          }
          while ( v45 );
          goto def_D8A4;
        }
        break;
      case 2:
        v21 = *(_DWORD *)(v4 + 4);
        if ( v21 != 3 )
        {
          j_exif_format_get_name(v21);
          j_exif_format_get_name(3);
          break;
        }
        _R2 = j_exif_get_short((int)&v8[2 * v7], *(_DWORD *)(v4 + 20));
        if ( v7 - 2 < 2 )
        {
          __asm
          {
            VMOV            S0, R2
            VCVT.F64.S32    D16, S0
            VLDR            D17, =25.4
            VMUL.F64        D16, D16, D17
            VLDR            D17, =1000.0
            VDIV.F64        D16, D16, D17
          }
LABEL_22:
          __asm { VSTR            D16, [SP,#0xC0+var_B8] }
          break;
        }
        if ( v7 == 1 )
          break;
        v19 = -5813;
        n = v5 - 1;
        v20 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_30;
      case 4:
        v26 = *(_DWORD *)(v4 + 4);
        if ( v26 != 3 )
        {
          j_exif_format_get_name(v26);
          j_exif_format_get_name(3);
          break;
        }
        v27 = (unsigned int)j_exif_get_short((int)v8, *(_DWORD *)(v4 + 20)) >> 1;
        if ( v27 <= v7 )
          goto LABEL_50;
        if ( *(_DWORD *)(v4 + 8) != v27 )
          break;
        LOWORD(_R0) = j_exif_get_short((int)&v8[2 * v7 + 2], *(_DWORD *)(v4 + 20));
        _R1 = (signed __int16)_R0;
        switch ( v7 )
        {
          case 2u:
          case 5u:
          case 0xEu:
          case 0x10u:
            __asm
            {
              VMOV            S0, R1  ; jumptable 0000DA1E cases 2,5,14,16
              VCVT.F64.S32    D16, S0
              VLDR            D17, =0.03125
              VMUL.F64        D16, D16, D17
            }
            goto LABEL_22;
          default:
            n = v5 - 1;
            v31 = (int *)&unk_2831C;
            _R2 = (unsigned __int16)_R1;
            goto LABEL_31;
          case 3u:
          case 0x14u:
            _R0 = (unsigned __int16)_R0;
            __asm
            {
              VLDR            D17, =0.03125
              VMOV            S0, R0
              VCVT.F64.S32    D16, S0
              VMUL.F64        D16, D16, D17
              VMOV.F64        D17, #0.5
              VMUL.F64        D16, D16, D17
              VMOV            R0, R1, D16
            }
            exp2(_R0);
            goto LABEL_17;
          case 4u:
          case 0x15u:
            __asm
            {
              VMOV            S0, R1  ; jumptable 0000DA1E cases 4,21
              VCVT.F64.S32    D16, S0
              VLDR            D17, =0.03125
              VMUL.F64        D16, D16, D17
              VMOV            R0, R1, D16
            }
            _R0 = exp2(_R0);
            __asm
            {
              VMOV.F64        D17, #1.0
              VMOV            D16, R0, R1
              VDIV.F64        D16, D17, D16
              VCMPE.F64       D16, D17
              VMRS            APSR_nzcv, FPSCR
            }
            if ( _NF )
            {
              __asm
              {
                VDIV.F64        D16, D17, D16
                VCVTR.S32.F64   S0, D16
              }
            }
            else
            {
              __asm { VCVTR.S32.F64   S0, D16 }
            }
            __asm { VSTR            S0, [SP,#0xC0+var_BC] }
            goto LABEL_17;
          case 0x12u:
          case 0x13u:
          case 8u:
            goto LABEL_17;
          case 0u:
            __asm
            {
              VMOV            S0, R1  ; jumptable 0000DA1E case 0
              VCVT.F64.S32    D16, S0
              VLDR            D17, =0.03125
              VMUL.F64        D16, D16, D17
              VMOV            R0, R1, D16
            }
            exp2(_R0);
            goto LABEL_17;
          case 1u:
            __asm
            {
              VMOV            S0, R1  ; jumptable 0000DA1E case 1
              VCVT.F64.S32    D16, S0
              VLDR            D17, =0.03125
              VMUL.F64        D16, D16, D17
              VMOV            R0, R1, D16
            }
            _R0 = exp2(_R0);
            __asm
            {
              VMOV            D17, R0, R1
              VMOV.F64        D16, #3.125
              VMUL.F64        D16, D17, D16
            }
            goto LABEL_22;
          case 0xCu:
            _R0 = (unsigned __int16)_R0;
            __asm
            {
              VLDR            D17, =0.03125
              VMOV            S0, R0
              VCVT.F64.S32    D16, S0
              VMUL.F64        D16, D16, D17
            }
            goto LABEL_22;
          case 0x1Cu:
            if ( (signed __int16)_R0 > 0 )
              goto LABEL_17;
            v47 = &GLOBAL_OFFSET_TABLE_;
            break;
        }
        goto LABEL_83;
      case 5:
        v30 = *(_DWORD *)(v4 + 4);
        if ( v30 == 3 )
        {
          _R2 = j_exif_get_short((int)&v8[2 * v7], *(_DWORD *)(v4 + 20));
          v19 = -5657;
          n = v5 - 1;
          v20 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_30;
        }
        j_exif_format_get_name(v30);
        j_exif_format_get_name(3);
        break;
      case 7:
        v33 = *(_DWORD *)(v4 + 4);
        if ( v33 == 2 )
          goto LABEL_40;
        j_exif_format_get_name(v33);
        j_exif_format_get_name(2);
        break;
      case 8:
        v34 = *(_DWORD *)(v4 + 4);
        if ( v34 == 4 )
        {
          if ( *(_DWORD *)(v4 + 8) == 1 )
          {
            v35 = *(_DWORD *)(v4 + 20);
            j_exif_get_long();
          }
        }
        else
        {
          j_exif_format_get_name(v34);
          j_exif_format_get_name(4);
        }
        break;
      case 9:
        if ( *(_DWORD *)(v4 + 8) == 32 )
          goto LABEL_39;
        break;
      case 6:
LABEL_39:
        v36 = *(_DWORD *)(v4 + 4);
        if ( v36 != 2 )
        {
          j_exif_format_get_name(v36);
          j_exif_format_get_name(2);
          break;
        }
LABEL_40:
        if ( *(_DWORD *)(v4 + 16) < v10 )
          v10 = *(_DWORD *)(v4 + 16);
        strncpy(v6, v8, v10);
        goto def_D8A4;
      case 12:
        v37 = *(_DWORD *)(v4 + 4);
        if ( v37 == 4 )
        {
          if ( *(_DWORD *)(v4 + 8) == 1 )
          {
            v38 = *(_DWORD *)(v4 + 20);
            j_exif_get_long();
          }
        }
        else
        {
          j_exif_format_get_name(v37);
          j_exif_format_get_name(4);
        }
        break;
      case 15:
        v39 = *(_DWORD *)(v4 + 4);
        if ( v39 == 3 )
        {
          v40 = (unsigned int)j_exif_get_short((int)v8, *(_DWORD *)(v4 + 20)) >> 1;
          if ( v40 <= v7 )
            goto LABEL_50;
          if ( *(_DWORD *)(v4 + 8) == v40 )
          {
            j_exif_get_short((int)&v8[2 * v7 + 2], *(_DWORD *)(v4 + 20));
            _snprintf_chk(&v64, 128, 0, 128);
            v41 = _strlen_chk(v6, -1);
            _strncat_chk(v6, &v64, v10 - v41, -1);
            goto def_D8A4;
          }
        }
        else
        {
          j_exif_format_get_name(v39);
          j_exif_format_get_name(3);
        }
        break;
      default:
        goto def_D8A4;
    }
LABEL_17:
    _snprintf_chk(v6, v10, 0, -1);
    goto def_D8A4;
  }
  if ( v9 != 160 )
    goto def_D8A4;
  v16 = *(_DWORD *)(v4 + 4);
  if ( v16 != 3 )
  {
    j_exif_format_get_name(v16);
    j_exif_format_get_name(3);
    goto LABEL_17;
  }
  v17 = (unsigned int)j_exif_get_short((int)v8, *(_DWORD *)(v4 + 20)) >> 1;
  if ( v17 <= v7 )
  {
LABEL_50:
    v6 = 0;
    goto def_D8A4;
  }
  if ( *(_DWORD *)(v4 + 8) != v17 )
    goto LABEL_17;
  _R2 = j_exif_get_short((int)&v8[2 * v7 + 2], *(_DWORD *)(v4 + 20));
  v19 = -5639;
  v20 = &GLOBAL_OFFSET_TABLE_;
  n = v5 - 1;
LABEL_30:
  v31 = &v20[v19];
LABEL_31:
  v32 = v7;
LABEL_32:
  sub_E168((int)v31, v32, _R2, v6, n);
def_D8A4:
  if ( v0 != v65 )
    _stack_chk_fail(v0 - v65);
  return v6;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 6D34: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 707C: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);
// 7088: using guessed type int __fastcall _strncat_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 70AC: using guessed type int __fastcall _strncpy_chk2(_DWORD, _DWORD, _DWORD, _DWORD);
// 70D0: using guessed type int __fastcall exp2(_DWORD);
// 27788: using guessed type int;
// 2778C: using guessed type __int16;
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (0000E168) --------------------------------------------------------
char *__fastcall sub_E168(int a1, int a2, int a3, char *dest, size_t n)
{
  unsigned int v5; // r12@1
  const char *v6; // r1@1
  int v7; // r7@1
  int v8; // r5@2
  char *result; // r0@14

  v5 = a2;
  v6 = *(const char **)(a1 + 8);
  v7 = 0;
  if ( v6 )
  {
    v8 = a1;
    while ( (*(_DWORD *)v8 < v5 || *(_DWORD *)v8 == v5 && *(_WORD *)(v8 + 4) <= (unsigned int)a3)
         && (*(_DWORD *)v8 != v5 || *(_WORD *)(v8 + 4) != a3) )
    {
      v6 = *(const char **)(v8 + 20);
      ++v7;
      v8 += 12;
      if ( !v6 )
      {
        v8 = a1 + 12 * v7;
        v6 = 0;
        break;
      }
    }
  }
  else
  {
    v6 = 0;
    v8 = a1;
  }
  if ( *(_DWORD *)v8 == v5 && *(_WORD *)(a1 + 12 * v7 + 4) == a3 && v6 )
    result = strncpy(dest, v6, n);
  else
    result = (char *)_snprintf_chk(dest, n, 0, -1);
  return result;
}
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0000E204) --------------------------------------------------------
int __fastcall mnote_canon_tag_get_name(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_287C4;
  while ( *(int *)((char *)v2 + 0xFFFFFFFC) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0xC )
      return 0;
  }
  return *v2;
}
// 287C4: using guessed type int;

//----- (0000E230) --------------------------------------------------------
unsigned int __fastcall mnote_canon_tag_get_name_sub(int a1, int a2, char a3)
{
  signed int v3; // r12@1
  int *v4; // lr@1
  unsigned int v5; // r3@1
  int *v6; // r3@6
  unsigned int v7; // r1@6

  v3 = 0;
  v4 = &dword_28884;
  v5 = 0;
  do
  {
    if ( *(int *)((char *)v4 + 0xFFFFFFFC) == a1 )
    {
      if ( *v4 == a2 )
        return v4[1];
      v3 = 1;
    }
    ++v5;
    v4 += 3;
  }
  while ( v5 < 0x46 );
  v6 = &dword_287C4;
  v7 = 0;
  if ( !(a3 & 1) || !v3 )
  {
    while ( *(int *)((char *)v6 + 0xFFFFFFFC) != a1 )
    {
      ++v7;
      v6 += 4;
      if ( v7 >= 0xC )
        return 0;
    }
    v7 = *v6;
  }
  return v7;
}
// 287C4: using guessed type int dword_287C4;
// 28884: using guessed type int;

//----- (0000E2B0) --------------------------------------------------------
int __fastcall mnote_canon_tag_get_title(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_287C8;
  while ( *(int *)((char *)v2 + 0xFFFFFFF8) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0xC )
      return 0;
  }
  return *v2;
}
// 287C8: using guessed type int;

//----- (0000E2DC) --------------------------------------------------------
unsigned int __fastcall mnote_canon_tag_get_title_sub(int a1, int a2, char a3)
{
  signed int v3; // r12@1
  int *v4; // lr@1
  unsigned int v5; // r3@1
  int *v6; // r3@6
  unsigned int v7; // r1@6

  v3 = 0;
  v4 = &dword_28884;
  v5 = 0;
  do
  {
    if ( *(int *)((char *)v4 + 0xFFFFFFFC) == a1 )
    {
      if ( *v4 == a2 )
        return v4[1];
      v3 = 1;
    }
    ++v5;
    v4 += 3;
  }
  while ( v5 < 0x46 );
  v6 = &dword_287C8;
  v7 = 0;
  if ( !(a3 & 1) || !v3 )
  {
    while ( *(int *)((char *)v6 + 0xFFFFFFF8) != a1 )
    {
      ++v7;
      v6 += 4;
      if ( v7 >= 0xC )
        return 0;
    }
    v7 = *v6;
  }
  return v7;
}
// 287C8: using guessed type int dword_287C8;
// 28884: using guessed type int dword_28884;

//----- (0000E35C) --------------------------------------------------------
_BYTE *__fastcall mnote_canon_tag_get_description(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1
  _BYTE *result; // r0@4

  v1 = 0;
  v2 = &dword_287CC;
  while ( *(int *)((char *)v2 + 0xFFFFFFF4) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0xC )
      return 0;
  }
  if ( v1 == 11 )
  {
    result = &unk_157F8;
  }
  else
  {
    result = (_BYTE *)*v2;
    if ( !*(_BYTE *)*v2 )
      result = &unk_157F8;
  }
  return result;
}
// 287CC: using guessed type int;

//----- (0000E3B0) --------------------------------------------------------
int __fastcall exif_mnote_data_olympus_identify(int a1, int a2)
{
  int v2; // r4@1
  int result; // r0@1
  int v4; // r0@3
  _DWORD *v5; // r0@12
  char *v6; // r0@13
  const char *v7; // r4@13
  char v8; // [sp+3h] [bp-Dh]@13

  v2 = a1;
  result = sub_E46C(*(void **)(a2 + 12), *(_DWORD *)(a2 + 16));
  if ( result == 7 )
  {
    if ( j_exif_content_get_entry(*(_DWORD *)v2, 271) )
    {
      v4 = *(_DWORD *)v2;
    }
    else if ( j_exif_content_get_entry(*(_DWORD *)(v2 + 4), 271) )
    {
      v4 = *(_DWORD *)(v2 + 4);
    }
    else if ( j_exif_content_get_entry(*(_DWORD *)(v2 + 8), 271) )
    {
      v4 = *(_DWORD *)(v2 + 8);
    }
    else if ( j_exif_content_get_entry(*(_DWORD *)(v2 + 12), 271) )
    {
      v4 = *(_DWORD *)(v2 + 12);
    }
    else
    {
      if ( !j_exif_content_get_entry(*(_DWORD *)(v2 + 16), 271) )
        return 0;
      v4 = *(_DWORD *)(v2 + 16);
    }
    v5 = j_exif_content_get_entry(v4, 271);
    if ( !v5 )
      return 0;
    v6 = j_exif_entry_get_value((int)v5, &v8, 5);
    v7 = v6;
    if ( !v6 || strncmp(v6, "Nikon", 5u) && strncmp(v7, "NIKON", 5u) )
      return 0;
    result = 7;
  }
  return result;
}

//----- (0000E46C) --------------------------------------------------------
int __fastcall sub_E46C(void *s1, unsigned int a2)
{
  void *v2; // r4@1
  signed int v3; // r5@5
  int v4; // r0@7

  v2 = s1;
  if ( a2 < 8 )
  {
    if ( a2 < 2 )
      goto LABEL_16;
    goto LABEL_13;
  }
  if ( !memcmp(s1, "OLYMPUS", 8u) )
    return 4;
  if ( !memcmp(v2, "OLYMP", 6u) )
    return 3;
  if ( !memcmp(v2, &dword_1E432, 6u) )
    return 5;
  v3 = 6;
  if ( memcmp(v2, "EPSON", 6u) )
  {
    if ( !memcmp(v2, "Nikon", 6u) )
    {
      v4 = *((_BYTE *)v2 + 6);
      v3 = *((_BYTE *)v2 + 6);
      if ( v4 != 2 )
        v3 = 0;
      if ( v4 == 1 )
        v3 = *((_BYTE *)v2 + 6);
      return v3;
    }
LABEL_13:
    if ( !*(_BYTE *)v2 && *((_BYTE *)v2 + 1) == 27 )
      return 7;
LABEL_16:
    v3 = 0;
  }
  return v3;
}
// 1E432: using guessed type int dword_1E432;

//----- (0000E538) --------------------------------------------------------
_DWORD *__fastcall exif_mnote_data_olympus_new(int a1)
{
  int v1; // r5@1
  _DWORD *v2; // r0@2
  _DWORD *v3; // r4@2
  int v4; // r3@3

  v1 = a1;
  if ( a1 && (v2 = (_DWORD *)j_exif_mem_alloc(a1, 76), (v3 = v2) != 0) )
  {
    j_exif_mnote_data_construct(v2, v1);
    v3[1] = sub_E5E0;
    v3[5] = sub_E5EC;
    v3[4] = sub_E630;
    v3[3] = sub_E638;
    v3[2] = sub_EBC4;
    v3[6] = sub_EEE4;
    v3[7] = sub_EEF0;
    v3[8] = sub_EF08;
    v4 = (int)(v3 + 9);
    *(_DWORD *)v4 = sub_EF24;
    *(_DWORD *)(v4 + 4) = sub_EF40;
    *(_DWORD *)(v4 + 8) = sub_EF5C;
  }
  else
  {
    v3 = 0;
  }
  return v3;
}
// E5E0: using guessed type int sub_E5E0();
// E630: using guessed type int sub_E630();
// EEE4: using guessed type int sub_EEE4();
// EEF0: using guessed type int sub_EEF0();
// EF08: using guessed type int sub_EF08();
// EF24: using guessed type int sub_EF24();
// EF40: using guessed type int sub_EF40();
// EF5C: using guessed type int sub_EF5C();

//----- (0000E5EC) --------------------------------------------------------
unsigned int __fastcall sub_E5EC(unsigned int result, int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@1
  int v4; // r8@2
  int v5; // r7@3
  unsigned int v6; // r6@3

  v2 = result;
  v3 = a2;
  if ( result )
  {
    v4 = *(_DWORD *)(result + 64);
    *(_DWORD *)(result + 64) = a2;
    result = *(_DWORD *)(result + 60);
    if ( result )
    {
      v5 = 0;
      v6 = 0;
      do
      {
        *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 20) = v3;
        j_exif_array_set_byte_order(
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 4),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 12),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 8),
          v4,
          v3);
        result = *(_DWORD *)(v2 + 60);
        ++v6;
        v5 += 24;
      }
      while ( v6 < result );
    }
  }
  return result;
}

//----- (0000E638) --------------------------------------------------------
int __fastcall sub_E638(int a1, int a2, unsigned int a3)
{
  int v3; // r4@1
  unsigned int v4; // r10@1
  int v5; // r5@1
  int v6; // r9@4
  unsigned int v7; // r6@4
  int v8; // r11@5
  int v9; // r0@7
  int v10; // r0@8
  int v11; // r1@9
  int result; // r0@11
  unsigned int v13; // r9@18
  unsigned int v14; // r0@18
  signed int v15; // r8@18
  int v16; // r8@22
  int v17; // r0@22
  int v18; // ST10_4@22
  int v19; // ST1C_4@22
  int v20; // ST18_4@22
  int v21; // ST14_4@22
  int v22; // ST0C_4@22
  int v23; // ST08_4@22
  int v24; // ST04_4@22
  unsigned int v25; // r0@22
  int v26; // ST10_4@26
  int v27; // ST00_4@26
  int v28; // ST1C_4@26
  int v29; // ST18_4@26
  int v30; // ST14_4@26
  int v31; // ST0C_4@26
  int v32; // ST08_4@26
  int v33; // ST04_4@26
  const char *v34; // r5@27
  int v35; // ST00_4@29
  int v36; // ST04_4@29
  int v37; // r8@30
  int v38; // ST08_4@30
  int v39; // ST0C_4@30
  int v40; // ST00_4@30
  int v41; // ST04_4@30
  int v42; // r0@30
  signed int v43; // r0@32
  int v44; // ST00_4@33
  int v45; // ST1C_4@33
  int v46; // ST18_4@33
  int v47; // ST14_4@33
  int v48; // ST10_4@33
  int v49; // ST0C_4@33
  int v50; // ST08_4@33
  int v51; // ST04_4@33
  signed int v52; // r0@20
  int v53; // r7@43
  int v54; // r9@45
  int v55; // r6@45
  int v56; // r8@45
  int v57; // r11@48
  int v58; // r6@48
  int v59; // r1@48
  int v60; // r5@48
  int v61; // r1@48
  unsigned int v62; // r10@48
  unsigned int v63; // r5@49
  int v64; // r1@50
  unsigned int v65; // r1@51
  signed int v66; // r0@51
  int v67; // r3@56
  int v68; // r0@56
  signed int v69; // r1@68
  signed int v70; // [sp+28h] [bp-40h]@45
  signed int v71; // [sp+30h] [bp-38h]@18
  int v72; // [sp+38h] [bp-30h]@48
  int v73; // [sp+3Ch] [bp-2Ch]@26
  int v74; // [sp+3Ch] [bp-2Ch]@48
  unsigned int v75; // [sp+40h] [bp-28h]@48

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( !a1
    || !a2
    || !a3
    || (v6 = *(_DWORD *)(a1 + 68), v7 = v6 + 16, v6 + 16 > a3)
    || (v8 = v6 + 6, v7 < v6 + 6)
    || v7 <= 9 )
  {
LABEL_10:
    v10 = *(_DWORD *)(v3 + 48);
    v11 = 3;
    return j_exif_log(v10, v11);
  }
  v9 = sub_E46C((void *)(a2 + v8), a3 - v8);
  *(_DWORD *)(v3 + 72) = v9;
  switch ( v9 )
  {
    case 3:
    case 5:
    case 6:
      j_exif_log(*(_DWORD *)(v3 + 48), 1);
      if ( *(_BYTE *)(v6 + v5 + 12) == 1 )
      {
        *(_DWORD *)(v3 + 64) = 1;
      }
      else if ( *(_BYTE *)(v6 + v5 + 13) == 1 )
      {
        *(_DWORD *)(v3 + 64) = 0;
      }
      v13 = v6 + 14;
      v14 = j_exif_get_short(v5 + v13, *(_DWORD *)(v3 + 64));
      v15 = 6;
      v71 = 0;
      if ( v14 <= 0x500 || (_BYTE)v14 )
        goto LABEL_41;
      *(_DWORD *)(v3 + 64) = *(_DWORD *)(v3 + 64) != 1;
      v52 = 0;
      goto LABEL_34;
    case 1:
      result = v6 + 12;
      if ( v6 + 12 >= v4 )
        return result;
      v16 = *(_BYTE *)(v5 + result);
      v17 = v6 + v5;
      v13 = v6 + 14;
      v18 = *(_BYTE *)(v5 + v7);
      v19 = *(_BYTE *)(v17 + 19);
      v20 = *(_BYTE *)(v17 + 18);
      v21 = *(_BYTE *)(v17 + 17);
      v22 = *(_BYTE *)(v17 + 15);
      v23 = *(_BYTE *)(v5 + v13);
      v24 = *(_BYTE *)(v17 + 13);
      j_exif_log(*(_DWORD *)(v3 + 48), 1);
      v25 = j_exif_get_short(v5 + v13, *(_DWORD *)(v3 + 64));
      v15 = 6;
      v71 = 0x8000;
      if ( v25 <= 0x500 || (_BYTE)v25 )
        goto LABEL_41;
      *(_DWORD *)(v3 + 64) = *(_DWORD *)(v3 + 64) != 1;
      v52 = 0x8000;
LABEL_34:
      v71 = v52;
      goto LABEL_35;
    case 2:
      result = v6 + 12;
      if ( v6 + 12 >= v4 )
        return result;
      v73 = v5;
      v26 = *(_BYTE *)(v5 + v7);
      v27 = *(_BYTE *)(v5 + result);
      v28 = *(_BYTE *)(v6 + v5 + 19);
      v29 = *(_BYTE *)(v6 + v5 + 18);
      v30 = *(_BYTE *)(v5 + v6 + 17);
      v31 = *(_BYTE *)(v6 + v5 + 15);
      v32 = *(_BYTE *)(v6 + v5 + 14);
      v33 = *(_BYTE *)(v6 + v5 + 13);
      result = j_exif_log(*(_DWORD *)(v3 + 48), 1);
      if ( v7 >= v4 )
        return result;
      v34 = (const char *)(v5 + v7);
      if ( !strncmp((const char *)(v73 + v7), "II", 2u) )
      {
        v69 = 1;
      }
      else
      {
        if ( strncmp(v34, "MM", 2u) )
        {
          v10 = *(_DWORD *)(v3 + 48);
          v35 = *v34;
          v36 = *(_BYTE *)(v73 + v6 + 17);
LABEL_9:
          v11 = 1;
          return j_exif_log(v10, v11);
        }
        v69 = 0;
      }
      result = v6 + 24;
      *(_DWORD *)(v3 + 64) = v69;
      if ( v6 + 24 > v4 )
        return result;
      v13 = j_exif_get_long() + v7;
      v71 = 0;
      v15 = v7;
      v5 = v73;
      goto LABEL_41;
    case 4:
      v37 = v6 + 15;
      v38 = *(_BYTE *)(v5 + v7);
      v39 = *(_BYTE *)(v6 + v5 + 17);
      v40 = *(_BYTE *)(v6 + v5 + 14);
      v41 = *(_BYTE *)(v5 + v6 + 15);
      j_exif_log(*(_DWORD *)(v3 + 48), 1);
      v42 = *(_BYTE *)(v6 + v5 + 14);
      if ( v42 == 77 )
      {
        if ( *(_BYTE *)(v5 + v37) != 77 )
          goto LABEL_40;
        v43 = 0;
        goto LABEL_39;
      }
      if ( v42 == 73 && *(_BYTE *)(v5 + v37) == 73 )
      {
        v43 = 1;
LABEL_39:
        *(_DWORD *)(v3 + 64) = v43;
      }
LABEL_40:
      v13 = v6 + 18;
      v71 = 0;
      v15 = v8;
LABEL_41:
      if ( v13 > 0xFFFFFFFD || v13 + 2 > v4 )
        goto LABEL_10;
      v53 = j_exif_get_short(v5 + v13, *(_DWORD *)(v3 + 64));
      sub_D774(v3);
      result = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), 24 * v53);
      *(_DWORD *)(v3 + 56) = result;
      if ( !result )
      {
        v10 = *(_DWORD *)(v3 + 48);
        v11 = 2;
        return j_exif_log(v10, v11);
      }
      if ( !v53 )
      {
        v55 = 0;
        goto LABEL_67;
      }
      v54 = v13 + 10;
      v55 = 0;
      v70 = v15;
      v56 = -v53;
      while ( (unsigned int)(v54 - 8) <= 0xFFFFFFF3 && v54 + 4 <= v4 )
      {
        v75 = v4;
        v74 = v5;
        v57 = 3 * v55;
        v72 = v55;
        v58 = 24 * v55;
        *(_DWORD *)(*(_DWORD *)(v3 + 56) + v58) = j_exif_get_short(v5 + v54 - 8, *(_DWORD *)(v3 + 64)) + v71;
        *(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v57 + 4) = j_exif_get_short(v5 + v54 - 6, *(_DWORD *)(v3 + 64));
        v59 = *(_DWORD *)(v3 + 64);
        *(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v57 + 8) = j_exif_get_long();
        *(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v57 + 20) = *(_DWORD *)(v3 + 64);
        v60 = *(_DWORD *)(v3 + 48);
        j_mnote_olympus_tag_get_name(*(_DWORD *)(*(_DWORD *)(v3 + 56) + v58));
        j_exif_log(v60, 1);
        result = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v57 + 4));
        v61 = *(_DWORD *)(v3 + 56) + 8 * v57;
        v62 = *(_DWORD *)(v61 + 8) * result;
        *(_DWORD *)(v61 + 16) = v62;
        if ( v62 )
        {
          v63 = v54;
          if ( v62 >= 5 )
          {
            v64 = *(_DWORD *)(v3 + 64);
            v63 = j_exif_get_long() + v70;
          }
          v65 = v63 + v62;
          v66 = 1;
          if ( v63 + v62 >= v63 )
            v66 = 0;
          if ( v65 > v75 || v66 || v65 < v62 )
          {
            v4 = v75;
            result = j_exif_log(*(_DWORD *)(v3 + 48), 1);
            v5 = v74;
            v55 = v72;
            goto LABEL_61;
          }
          *(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v57 + 12) = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v62);
          v68 = *(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v57 + 12);
          if ( !v68 )
          {
            result = j_exif_log(*(_DWORD *)(v3 + 48), 2);
            v5 = v74;
            v4 = v75;
            v55 = v72;
            goto LABEL_61;
          }
          result = _aeabi_memcpy(v68, v74 + v63, v62, v67);
        }
        v5 = v74;
        v4 = v75;
        v55 = v72 + 1;
LABEL_61:
        ++v56;
        v54 += 12;
        if ( !v56 )
          goto LABEL_67;
      }
      result = j_exif_log(*(_DWORD *)(v3 + 48), 3);
LABEL_67:
      *(_DWORD *)(v3 + 60) = v55;
      return result;
    case 7:
      v44 = *(_BYTE *)(v5 + v8);
      v45 = *(_BYTE *)(v6 + v5 + 13);
      v46 = *(_BYTE *)(v6 + v5 + 12);
      v47 = *(_BYTE *)(v6 + v5 + 11);
      v48 = *(_BYTE *)(v6 + v5 + 10);
      v49 = *(_BYTE *)(v6 + v5 + 9);
      v50 = *(_BYTE *)(v6 + v5 + 8);
      v51 = *(_BYTE *)(v6 + v5 + 7);
      j_exif_log(*(_DWORD *)(v3 + 48), 1);
      v13 = v6 + 6;
      *(_DWORD *)(v3 + 64) = 0;
      v71 = 0;
LABEL_35:
      v15 = 6;
      goto LABEL_41;
    default:
      v10 = *(_DWORD *)(v3 + 48);
      goto LABEL_9;
  }
}

//----- (0000EBC4) --------------------------------------------------------
unsigned int __fastcall sub_EBC4(unsigned int result, int *a2, int *a3)
{
  unsigned int v3; // r5@1
  int v4; // r0@4
  int v5; // r1@4
  signed int v6; // r7@4
  int v7; // r0@5
  int v8; // r6@6
  const char *v9; // r7@6
  __int16 v10; // r1@10
  signed int v11; // r11@10
  signed int v12; // r10@10
  int v13; // ST04_4@10
  int v14; // r0@11
  int v15; // ST00_4@11
  int v16; // r6@12
  int v17; // r1@13
  int v18; // r0@13
  int v19; // ST00_4@16
  int v20; // r0@17
  __int16 v21; // r2@18
  int v22; // r1@18
  __int16 v23; // r2@21
  int v24; // r1@21
  int v25; // r1@23
  unsigned __int8 v26; // cf@23
  int v27; // r1@24
  int v28; // r0@24
  int v29; // r9@26
  unsigned int v30; // r8@26
  int v31; // r1@27
  int v32; // r2@27
  int v33; // r0@27
  int v34; // r0@27
  int v35; // r3@27
  int v36; // r1@27
  unsigned int v37; // r7@27
  int v38; // r10@29
  int v39; // r4@29
  int v40; // r0@29
  int v41; // r1@30
  int v42; // r0@30
  signed int v43; // r4@30
  int v44; // r1@32
  int v45; // r0@32
  int v46; // ST00_4@39
  signed int v47; // [sp+8h] [bp-30h]@25
  int *v48; // [sp+Ch] [bp-2Ch]@1
  int *v49; // [sp+10h] [bp-28h]@1

  v3 = result;
  v48 = a3;
  v49 = a2;
  if ( result )
  {
    result = (unsigned int)a2;
    if ( a2 )
    {
      result = (unsigned int)a3;
      if ( a3 )
      {
        v4 = 3 * *(_DWORD *)(v3 + 60);
        v5 = 12 * *(_DWORD *)(v3 + 60) + 10;
        *a3 = v5;
        result = 4 * v4;
        v6 = 0;
        switch ( *(_DWORD *)(v3 + 72) )
        {
          case 3:
          case 5:
          case 6:
            v7 = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v5);
            *v49 = v7;
            if ( !v7 )
            {
              v14 = *(_DWORD *)(v3 + 48);
              v15 = *v48;
              return j_exif_log(v14, 2);
            }
            v8 = *(_DWORD *)(v3 + 72);
            v9 = "OLYMP";
            if ( v8 == 6 )
              v9 = "EPSON";
            if ( v8 == 5 )
              v9 = (const char *)&dword_1E432;
            v10 = *((_WORD *)v9 + 2);
            *(_DWORD *)v7 = *(_DWORD *)v9;
            *(_WORD *)(v7 + 4) = v10;
            j_exif_set_sshort(*v49 + 6, *(_DWORD *)(v3 + 64), 1);
            v11 = 8;
            v12 = 0;
            v13 = *(_DWORD *)(v3 + 68);
            goto LABEL_25;
          case 1:
            v6 = 0x8000;
            v16 = *(_DWORD *)(v3 + 68);
            *a3 = result;
            v5 = result;
            goto LABEL_13;
          case 2:
          case 7:
LABEL_13:
            v17 = v5 + 14;
            *a3 = v17;
            v18 = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v17);
            *v49 = v18;
            if ( !v18 )
            {
              v14 = *(_DWORD *)(v3 + 48);
              v19 = *v48;
              return j_exif_log(v14, 2);
            }
            *(_WORD *)(v18 + 4) = 110;
            *(_DWORD *)v18 = 1869310286;
            *(_BYTE *)(*v49 + 6) = *(_DWORD *)(v3 + 72);
            if ( *(_DWORD *)(v3 + 72) == 1 )
            {
              v11 = 8;
            }
            else
            {
              v23 = 19789;
              v24 = *(_DWORD *)(v3 + 64);
              if ( v24 == 1 )
                v23 = 18761;
              j_exif_set_sshort(*v49 + 10, v24, v23);
              j_exif_set_sshort(*v49 + 12, *(_DWORD *)(v3 + 64), 42);
              v25 = *(_DWORD *)(v3 + 64);
              v26 = __CFADD__(*v49, 14);
              j_exif_set_long();
              v11 = 18;
            }
            v12 = v6;
            v27 = *(_DWORD *)(v3 + 64);
            v28 = v11 + 12 * *(_DWORD *)(v3 + 60) + *v49 + 2;
            j_exif_set_long();
            goto LABEL_25;
          case 4:
            *a3 = result + 16;
            v20 = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), result + 16);
            *v49 = v20;
            if ( !v20 )
            {
              v14 = *(_DWORD *)(v3 + 48);
              v46 = *v48;
              return j_exif_log(v14, 2);
            }
            v21 = 19789;
            *(_DWORD *)(v20 + 4) = 5461328;
            *(_DWORD *)v20 = 1297697871;
            v22 = *(_DWORD *)(v3 + 64);
            if ( v22 == 1 )
              v21 = 18761;
            j_exif_set_sshort(*v49 + 8, v22, v21);
            j_exif_set_sshort(*v49 + 10, *(_DWORD *)(v3 + 64), 3);
            v11 = 12;
            v12 = 0;
LABEL_25:
            v47 = v12;
            j_exif_set_sshort(*v49 + v11, *(_DWORD *)(v3 + 64), *(_WORD *)(v3 + 60));
            result = *(_DWORD *)(v3 + 60);
            if ( result )
            {
              v29 = 0;
              v30 = 0;
              while ( 1 )
              {
                j_exif_set_sshort(
                  *v49 + v11 + v29 + 2,
                  *(_DWORD *)(v3 + 64),
                  *(_DWORD *)(*(_DWORD *)(v3 + 56) + 2 * v29) - v12);
                j_exif_set_sshort(
                  *v49 + v11 + v29 + 4,
                  *(_DWORD *)(v3 + 64),
                  *(_WORD *)(*(_DWORD *)(v3 + 56) + 2 * v29 + 4));
                v31 = *(_DWORD *)(v3 + 64);
                v32 = *(_DWORD *)(*(_DWORD *)(v3 + 56) + 2 * v29 + 8);
                v33 = *v49 + v11 + v29;
                j_exif_set_long();
                v34 = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v3 + 56) + 2 * v29 + 4));
                v36 = *(_DWORD *)(v3 + 56);
                v37 = *(_DWORD *)(v36 + 2 * v29 + 8) * v34;
                if ( v37 <= 0x10000 )
                {
                  if ( v37 < 5 )
                  {
                    v43 = v12;
                    v38 = v11 + v29 + 10;
                  }
                  else
                  {
                    v38 = *v48;
                    v39 = *v48 + v37;
                    v40 = j_exif_mem_realloc(*(_DWORD *)(v3 + 52), *v49, v39);
                    if ( !v40 )
                    {
                      v14 = *(_DWORD *)(v3 + 48);
                      return j_exif_log(v14, 2);
                    }
                    *v49 = v40;
                    *v48 = v39;
                    v41 = *(_DWORD *)(v3 + 64);
                    v42 = *v49 + v11 + v29;
                    j_exif_set_long();
                    v36 = *(_DWORD *)(v3 + 56);
                    v43 = v47;
                  }
                  v44 = *(_DWORD *)(v36 + 2 * v29 + 12);
                  v45 = *v49 + v38;
                  if ( v44 )
                    _aeabi_memcpy(v45, v44, v37, v35);
                  else
                    _aeabi_memset(v45, v37, 0);
                  v12 = v43;
                }
                result = *(_DWORD *)(v3 + 60);
                ++v30;
                v29 += 12;
                if ( v30 >= result )
                  return result;
              }
            }
            break;
          default:
            return result;
        }
      }
    }
  }
  return result;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 1E432: using guessed type int dword_1E432;

//----- (0000EF84) --------------------------------------------------------
int __fastcall mnote_olympus_tag_get_name(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_28BCC;
  while ( *(int *)((char *)v2 + 0xFFFFFFFC) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x96 )
      return 0;
  }
  return *v2;
}
// 28BCC: using guessed type int;

//----- (0000EFB0) --------------------------------------------------------
int __fastcall mnote_olympus_tag_get_title(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_28BD0;
  while ( *(int *)((char *)v2 + 0xFFFFFFF8) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x96 )
      return 0;
  }
  return *v2;
}
// 28BD0: using guessed type int;

//----- (0000EFDC) --------------------------------------------------------
_BYTE *__fastcall mnote_olympus_tag_get_description(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1
  _BYTE *result; // r0@4

  v1 = 0;
  v2 = &dword_28BD4;
  while ( *(int *)((char *)v2 + 0xFFFFFFF4) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x96 )
      return 0;
  }
  result = (_BYTE *)*v2;
  if ( *v2 )
  {
    if ( !*result )
      result = &unk_157F8;
  }
  else
  {
    result = &unk_157F8;
  }
  return result;
}
// 28BD4: using guessed type int;

//----- (0000F02C) --------------------------------------------------------
char *__fastcall mnote_olympus_entry_get_value(int a1, char *a2, int a3)
{
  int v3; // r6@1
  int v4; // r5@1
  char *v5; // r11@1
  int v6; // r3@2
  int v7; // r1@2
  signed int v8; // r2@6
  size_t v9; // r9@6
  int v10; // r0@9
  int v11; // r2@11
  signed int v17; // r0@13
  int v18; // r0@19
  int v19; // r0@24
  int v20; // r2@26
  int v21; // r0@36
  signed int v25; // r1@39
  int v26; // r2@42
  int v27; // r1@42
  int v28; // r0@42
  int v29; // r0@42
  int v30; // r0@42
  signed int v31; // r1@42
  int v32; // r0@47
  int v33; // r0@50
  unsigned int v34; // r2@51
  int v35; // r0@57
  int v36; // r0@61
  int v41; // r0@68
  int v42; // r0@71
  int v43; // r5@73
  signed int v44; // r1@74
  int v45; // r0@77
  int v46; // r0@77
  signed int v47; // r1@77
  int v48; // r0@83
  int v49; // r2@85
  unsigned int v50; // r0@85
  int v54; // r0@88
  int v55; // r2@90
  int v56; // r0@92
  signed int v57; // r0@93
  int v58; // r0@96
  int v59; // r2@98
  int v60; // r3@98
  int v61; // r0@102
  int v62; // r0@105
  int v65; // r0@112
  int v66; // r0@127
  int v69; // r0@132
  signed int v70; // r0@135
  int *v71; // r1@135
  int v72; // r0@136
  int v73; // r0@151
  int v74; // r0@153
  int v75; // r4@159
  int v76; // r0@160
  int v77; // r0@160
  signed int v78; // r1@160
  int v81; // r2@169
  int v84; // r5@188
  signed int v85; // r1@189
  int v86; // r0@192
  int v87; // r0@192
  int v88; // r0@192
  signed int v89; // r1@192
  int v92; // r0@203
  int v93; // r0@205
  int v94; // r4@210
  int v95; // r7@212
  signed int v96; // r4@212
  int v97; // r5@217
  int v98; // r6@218
  char *v99; // r1@218
  const char **v100; // r2@218
  const char **v101; // r3@218
  signed int v102; // r2@220
  int v103; // r2@223
  int v104; // t1@223
  int v106; // r0@231
  int v107; // r2@231
  signed int v108; // r1@233
  int *v109; // r0@233
  int v110; // r0@234
  int v111; // r0@237
  int v112; // r0@240
  int v113; // r0@243
  int v114; // r0@245
  int v115; // r0@248
  const char *v116; // r3@250
  char *v117; // r5@262
  int v118; // r2@263
  char *v119; // r0@263
  int v120; // r1@263
  int v121; // r0@266
  int v122; // r0@268
  int v123; // r4@268
  int v124; // r3@270
  signed int v125; // r4@270
  int v126; // r0@275
  int v127; // r0@280
  int v128; // r0@282
  unsigned int v129; // r0@284
  int v130; // ST04_4@286
  int v131; // r0@287
  size_t v132; // r2@288
  int v133; // r5@293
  signed int v134; // r1@294
  int v135; // r0@297
  int v136; // r0@297
  int v137; // r0@297
  signed int v138; // r1@297
  int v139; // r0@307
  signed int v142; // r0@330
  int *v143; // r1@330
  int v144; // r5@339
  int v145; // r6@340
  char *v146; // r1@340
  const char **v147; // r3@340
  signed int v148; // r2@342
  int v149; // r2@345
  int v150; // t1@345
  int v151; // r0@357
  int v152; // r1@357
  int v153; // r0@357
  int v154; // r0@357
  int v155; // r1@357
  int v156; // r0@360
  signed int v157; // r1@360
  int *v158; // r2@360
  int v159; // [sp+0h] [bp-E8h]@233
  int v160; // [sp+4h] [bp-E4h]@0
  int v161; // [sp+4h] [bp-E4h]@158
  int v162; // [sp+24h] [bp-C4h]@171
  int v163; // [sp+28h] [bp-C0h]@171
  int v164; // [sp+2Ch] [bp-BCh]@166
  int v165; // [sp+30h] [bp-B8h]@166
  int v166; // [sp+34h] [bp-B4h]@277
  int v167; // [sp+38h] [bp-B0h]@278
  float v168; // [sp+3Ch] [bp-ACh]@325
  int v169; // [sp+40h] [bp-A8h]@325
  float v170; // [sp+44h] [bp-A4h]@323
  int v171; // [sp+48h] [bp-A0h]@323
  int v172; // [sp+4Ch] [bp-9Ch]@21
  int v173; // [sp+54h] [bp-94h]@21
  int v174; // [sp+5Ch] [bp-8Ch]@199
  int v175; // [sp+60h] [bp-88h]@200
  int v176; // [sp+64h] [bp-84h]@63
  int v177; // [sp+68h] [bp-80h]@63
  int v178; // [sp+6Ch] [bp-7Ch]@63
  int v179; // [sp+70h] [bp-78h]@63
  int v180; // [sp+74h] [bp-74h]@129
  int v181; // [sp+78h] [bp-70h]@130
  float v182; // [sp+7Ch] [bp-6Ch]@109
  int v183; // [sp+80h] [bp-68h]@109
  float v184; // [sp+84h] [bp-64h]@107
  int v185; // [sp+88h] [bp-60h]@107
  char v186; // [sp+8Eh] [bp-5Ah]@42
  int v187; // [sp+ACh] [bp-3Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v187 = v0;
  if ( !a1 )
    goto LABEL_382;
  _aeabi_memset(a2, a3, 0);
  v7 = *(_DWORD *)(v3 + 12);
  if ( !v7 )
  {
    if ( *(_DWORD *)(v3 + 8) )
      goto LABEL_228;
    if ( *(_DWORD *)(v3 + 16) )
    {
LABEL_382:
      v5 = 0;
      goto LABEL_228;
    }
  }
  v8 = *(_DWORD *)v3;
  v9 = v4 - 1;
  if ( *(_DWORD *)v3 > 32770 )
  {
    if ( (unsigned int)(v8 - 32771) > 8 )
      goto LABEL_155;
    v17 = 1 << (v8 - 3);
    if ( v17 & 0x11F )
      goto LABEL_202;
    if ( !(v17 & 0xA0) )
      goto LABEL_155;
LABEL_47:
    v32 = *(_DWORD *)(v3 + 4);
    if ( v32 != 5 )
    {
      j_exif_format_get_name(v32);
      j_exif_format_get_name(5);
      goto LABEL_227;
    }
LABEL_165:
    if ( *(_DWORD *)(v3 + 8) != 1 )
      goto LABEL_227;
    j_exif_get_srational((int)&v164, v7, *(_DWORD *)(v3 + 20));
    _R0 = v165;
    if ( v165 )
    {
      _R1 = v164;
      __asm
      {
        VMOV            S0, R0
        VCVT.F64.U32    D16, S0
        VMOV            S0, R1
        VCVT.F64.U32    D17, S0
        VDIV.F64        D16, D17, D16
      }
LABEL_173:
      __asm { VSTR            D16, [SP,#0xE8+var_E0] }
      goto LABEL_227;
    }
    v70 = -59502;
    v71 = &GLOBAL_OFFSET_TABLE_;
    goto LABEL_180;
  }
  if ( v8 <= 127 )
  {
    switch ( v8 )
    {
      case 18:
      case 24:
        v10 = *(_DWORD *)(v3 + 4);
        if ( v10 != 7 )
        {
          j_exif_format_get_name(v10);
          j_exif_format_get_name(7);
          goto LABEL_227;
        }
        if ( *(_DWORD *)(v3 + 8) != 4 )
          goto LABEL_227;
        v11 = *(_DWORD *)(v3 + 20);
        _R0 = (unsigned int)j_exif_get_long() >> 24;
        __asm
        {
          VMOV            S0, R0
          VCVT.F64.U32    D16, S0
          VMOV.F64        D17, #6.0
          VDIV.F64        D16, D16, D17
        }
        goto LABEL_173;
      case 3:
      case 4:
      case 5:
      case 6:
      case 7:
      case 8:
      case 9:
      case 15:
        goto LABEL_50;
      case 11:
        goto LABEL_57;
      case 14:
        goto LABEL_83;
      case 22:
        goto LABEL_91;
      case 1:
        v58 = *(_DWORD *)(v3 + 4);
        if ( v58 != 7 )
        {
          j_exif_format_get_name(v58);
          j_exif_format_get_name(7);
          goto LABEL_227;
        }
        if ( *(_DWORD *)(v3 + 8) != 4 )
          goto LABEL_227;
        v59 = *(_DWORD *)(v3 + 20);
        if ( (j_exif_get_long() & 0xF0F0F0F0) != 808464432 )
          goto LABEL_227;
        if ( v9 >= 4 )
          v9 = 4;
        _aeabi_memcpy(v5, *(_DWORD *)(v3 + 12), v9, v60);
        break;
      case 2:
        v61 = *(_DWORD *)(v3 + 4);
        if ( v61 == 3 )
        {
          if ( *(_DWORD *)(v3 + 8) == 2 )
            j_exif_get_short(v7 + 2, *(_DWORD *)(v3 + 20));
        }
        else
        {
          j_exif_format_get_name(v61);
          j_exif_format_get_name(3);
        }
        goto LABEL_227;
      case 12:
        v62 = *(_DWORD *)(v3 + 4);
        if ( v62 == 5 )
        {
          if ( *(_DWORD *)(v3 + 8) == 4 )
          {
            j_exif_get_srational((int)&v184, v7, *(_DWORD *)(v3 + 20));
            __asm { VMOV.F64        D8, #0.5 }
            _R0 = v185;
            __asm
            {
              VMOV.I32        D8, #0
              VMOV            D9, D8
            }
            if ( !_ZF )
            {
              __asm
              {
                VLDR            S0, [SP,#0xE8+var_64]
                VMOV            S2, R0
                VCVT.F64.U32    D16, S2
                VCVT.F64.U32    D17, S0
                VDIV.F64        D9, D17, D16
              }
            }
            j_exif_get_srational((int)&v182, *(_DWORD *)(v3 + 12) + 8, *(_DWORD *)(v3 + 20));
            _R0 = v183;
            if ( v183 )
            {
              __asm
              {
                VLDR            S0, [SP,#0xE8+var_6C]
                VMOV            S2, R0
                VCVT.F64.U32    D16, S2
                VCVT.F64.U32    D17, S0
                VDIV.F64        D8, D17, D16
              }
            }
            __asm
            {
              VSTR            D9, [SP,#0xE8+var_E0]
              VSTR            D8, [SP,#0xE8+var_D8]
            }
          }
        }
        else
        {
          j_exif_format_get_name(v62);
          j_exif_format_get_name(5);
        }
        goto LABEL_227;
      case 19:
        v65 = *(_DWORD *)(v3 + 4);
        if ( v65 == 3 )
        {
          if ( *(_DWORD *)(v3 + 8) == 2 )
            j_exif_get_short(v7 + 2, *(_DWORD *)(v3 + 20));
        }
        else
        {
          j_exif_format_get_name(v65);
          j_exif_format_get_name(3);
        }
        goto LABEL_227;
      default:
        goto LABEL_155;
    }
    goto LABEL_228;
  }
  if ( v8 < 512 )
  {
    if ( v8 <= 145 )
    {
      switch ( v8 )
      {
        case 132:
          v18 = *(_DWORD *)(v3 + 4);
          if ( v18 == 5 )
          {
            if ( *(_DWORD *)(v3 + 8) == 4 )
            {
              j_exif_get_srational((int)&v173, v7, *(_DWORD *)(v3 + 20));
              j_exif_get_srational((int)&v172, *(_DWORD *)(v3 + 12) + 8, *(_DWORD *)(v3 + 20));
              j_exif_get_srational((int)&v170, *(_DWORD *)(v3 + 12) + 16, *(_DWORD *)(v3 + 20));
              __asm { VMOV.F64        D8, #0.5 }
              _R0 = v171;
              __asm
              {
                VMOV.I32        D8, #0
                VMOV            D9, D8
              }
              if ( !_ZF )
              {
                __asm
                {
                  VLDR            S0, [SP,#0xE8+var_A4]
                  VMOV            S2, R0
                  VCVT.F64.U32    D16, S2
                  VCVT.F64.U32    D17, S0
                  VDIV.F64        D9, D17, D16
                }
              }
              j_exif_get_srational((int)&v168, *(_DWORD *)(v3 + 12) + 24, *(_DWORD *)(v3 + 20));
              _R0 = v169;
              if ( v169 )
              {
                __asm
                {
                  VLDR            S0, [SP,#0xE8+var_AC]
                  VMOV            S2, R0
                  VCVT.F64.U32    D16, S2
                  VCVT.F64.U32    D17, S0
                  VDIV.F64        D8, D17, D16
                }
              }
              __asm
              {
                VSTR            D9, [SP,#0xE8+var_D8]
                VSTR            D8, [SP,#0xE8+var_D0]
              }
            }
          }
          else
          {
            j_exif_format_get_name(v18);
            j_exif_format_get_name(5);
          }
          goto LABEL_227;
        case 134:
          goto LABEL_47;
        case 128:
        case 130:
        case 141:
          goto LABEL_50;
        case 139:
LABEL_83:
          v48 = *(_DWORD *)(v3 + 4);
          if ( v48 == 7 )
          {
            if ( *(_DWORD *)(v3 + 8) == 4 )
            {
              v49 = *(_DWORD *)(v3 + 20);
              v50 = j_exif_get_long();
              if ( (unsigned __int16)v50 >> 8 )
              {
                _R1 = BYTE1(v50);
                __asm
                {
                  VMOV            S0, R1
                  VCVT.F32.U32    S0, S0
                }
                _R1 = (v50 >> 16) & 0xFF;
                _R0 = v50 >> 24;
                __asm
                {
                  VMOV            S2, R1
                  VCVT.F32.U32    S2, S2
                  VDIV.F32        S0, S2, S0
                  VMOV            S2, R0
                  VCVT.F32.U32    S2, S2
                  VMUL.F32        S0, S2, S0
                  VCVT.F64.F32    D16, S0
                }
              }
              else
              {
                __asm { VMOV.I32        D16, #0 }
              }
              __asm { VSTR            D16, [SP,#0xE8+var_E0] }
            }
          }
          else
          {
            j_exif_format_get_name(v48);
            j_exif_format_get_name(7);
          }
          goto LABEL_227;
        case 133:
          v66 = *(_DWORD *)(v3 + 4);
          if ( v66 != 5 )
          {
            j_exif_format_get_name(v66);
            j_exif_format_get_name(5);
            goto LABEL_227;
          }
          if ( *(_DWORD *)(v3 + 8) != 1 )
            goto LABEL_227;
          j_exif_get_srational((int)&v180, v7, *(_DWORD *)(v3 + 20));
          _R0 = v180;
          if ( v180 )
          {
            _R1 = v181;
            if ( v181 )
            {
              __asm
              {
                VMOV            S0, R1
                VCVT.F64.U32    D16, S0
                VMOV            S0, R0
                VCVT.F64.U32    D17, S0
                VDIV.F64        D16, D17, D16
              }
              goto LABEL_173;
            }
          }
          v70 = -60103;
          v71 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_180;
        case 136:
          v69 = *(_DWORD *)(v3 + 4);
          if ( v69 != 7 )
          {
            j_exif_format_get_name(v69);
            j_exif_format_get_name(7);
            goto LABEL_227;
          }
          if ( *(_DWORD *)(v3 + 8) != 4 )
            goto LABEL_227;
          switch ( *(_BYTE *)(v7 + 1) )
          {
            case 0:
              v70 = -60003;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 1:
              v70 = -59983;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 2:
              v70 = -59966;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 3:
              v70 = -59946;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 4:
              v70 = -59928;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 5:
              v70 = -59909;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 6:
              v70 = -59885;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 7:
              v70 = -59860;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 8:
              v70 = -59836;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 9:
              v70 = -59811;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 0xA:
              v70 = -59789;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            default:
              v70 = -59766;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
          }
          break;
        case 137:
          v72 = *(_DWORD *)(v3 + 4);
          if ( (v72 | 2) == 3 )
          {
            if ( *(_DWORD *)(v3 + 8) == 1 )
            {
              if ( v72 == 3 )
                j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
              else
                v139 = *(_BYTE *)v7;
            }
          }
          else
          {
            j_exif_format_get_name(v72);
            j_exif_format_get_name(1);
            j_exif_format_get_name(3);
          }
          goto LABEL_227;
        default:
          goto LABEL_155;
        case 131:
        case 135:
          goto LABEL_202;
      }
      goto LABEL_180;
    }
    if ( v8 <= 169 )
    {
      if ( v8 > 153 )
      {
        if ( v8 == 154 )
        {
          v36 = *(_DWORD *)(v3 + 4);
          if ( v36 == 5 )
          {
            if ( *(_DWORD *)(v3 + 8) == 2 )
            {
              j_exif_get_srational((int)&v178, v7, *(_DWORD *)(v3 + 20));
              _R4 = v178;
              _R5 = v179;
              j_exif_get_srational((int)&v176, *(_DWORD *)(v3 + 12) + 8, *(_DWORD *)(v3 + 20));
              __asm { VMOV.I32        D16, #0 }
              _R0 = v176;
              _R1 = v177;
              __asm { VMOV            D17, D16 }
              if ( !_ZF )
              {
                __asm
                {
                  VMOV            S0, R5
                  VCVT.F64.U32    D17, S0
                  VMOV            S0, R4
                  VCVT.F64.U32    D18, S0
                  VDIV.F64        D17, D18, D17
                }
              }
              if ( v177 )
              {
                __asm
                {
                  VMOV            S0, R1
                  VCVT.F64.U32    D16, S0
                  VMOV            S0, R0
                  VCVT.F64.U32    D18, S0
                  VDIV.F64        D16, D18, D16
                }
              }
              __asm
              {
                VSTR            D17, [SP,#0xE8+var_E0]
                VSTR            D16, [SP,#0xE8+var_D8]
              }
            }
          }
          else
          {
            j_exif_format_get_name(v36);
            j_exif_format_get_name(5);
          }
          goto LABEL_227;
        }
        if ( v8 == 167 )
        {
LABEL_88:
          v54 = *(_DWORD *)(v3 + 4);
          if ( v54 == 4 )
          {
            if ( *(_DWORD *)(v3 + 8) == 1 )
            {
              v55 = *(_DWORD *)(v3 + 20);
              j_exif_get_long();
            }
          }
          else
          {
            j_exif_format_get_name(v54);
            j_exif_format_get_name(4);
          }
          goto LABEL_227;
        }
      }
      else if ( v8 == 146 || v8 == 148 )
      {
LABEL_57:
        v35 = *(_DWORD *)(v3 + 4);
        if ( v35 == 8 )
        {
          if ( *(_DWORD *)(v3 + 8) == 1 )
            j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
        }
        else
        {
          j_exif_format_get_name(v35);
          j_exif_format_get_name(8);
        }
        goto LABEL_227;
      }
      goto LABEL_155;
    }
    if ( v8 == 170 )
    {
LABEL_50:
      v33 = *(_DWORD *)(v3 + 4);
      if ( v33 == 2 )
      {
        v34 = *(_DWORD *)(v3 + 16);
        if ( v9 < v34 )
          v34 = v4 - 1;
        _aeabi_memcpy(v5, v7, v34, v6);
        goto LABEL_228;
      }
      j_exif_format_get_name(v33);
      j_exif_format_get_name(2);
LABEL_227:
      _snprintf_chk(v5, v9, 0, -1);
      goto LABEL_228;
    }
LABEL_155:
    switch ( *(_DWORD *)(v3 + 4) )
    {
      case 3:
        if ( *(_DWORD *)(v3 + 8) == 1 )
          j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
        goto LABEL_227;
      default:
        v161 = *(_DWORD *)(v3 + 16);
        _snprintf_chk(v5, v4 - 1, 0, -1);
        if ( *(_DWORD *)(v3 + 16) < 1 )
          goto LABEL_228;
        v75 = 0;
        break;
      case 5:
        goto LABEL_165;
      case 4:
        if ( *(_DWORD *)(v3 + 8) == 1 )
        {
          v81 = *(_DWORD *)(v3 + 20);
          j_exif_get_long();
        }
        goto LABEL_227;
      case 0xA:
        if ( *(_DWORD *)(v3 + 8) != 1 )
          goto LABEL_227;
        j_exif_get_srational_0((int)&v162, v7, *(_DWORD *)(v3 + 20));
        _R0 = v163;
        if ( v163 )
        {
          _R1 = v162;
          __asm
          {
            VMOV            S0, R0
            VCVT.F64.S32    D16, S0
            VMOV            S0, R1
            VCVT.F64.S32    D17, S0
            VDIV.F64        D16, D17, D16
          }
          goto LABEL_173;
        }
        v70 = -59502;
        v71 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_180;
      case 2:
        goto LABEL_288;
    }
    while ( 1 )
    {
      _sprintf_chk(&v186, 0, 30, "%02x", *(_BYTE *)(*(_DWORD *)(v3 + 12) + v75), v161);
      v76 = _strlen_chk(v5, -1);
      _strncat_chk(v5, &v186, v9 - v76, -1);
      v77 = v75 + 1;
      v78 = 1;
      if ( !__OFSUB__(v75 + 1, v75) )
        v78 = 0;
      if ( v78 )
        goto LABEL_379;
      ++v75;
      if ( v77 >= *(_DWORD *)(v3 + 16) )
        goto LABEL_228;
    }
  }
  if ( v8 > 769 )
  {
    if ( v8 <= 4099 )
    {
      if ( v8 != 770 )
      {
        if ( v8 != 3844 )
          goto LABEL_155;
        v21 = *(_DWORD *)(v3 + 4);
        if ( v21 != 4 )
        {
          j_exif_format_get_name(v21);
          j_exif_format_get_name(4);
          goto LABEL_227;
        }
        if ( *(_DWORD *)(v3 + 8) != 30 )
          goto LABEL_227;
        _R5 = 0;
        _R4 = 4;
        while ( 1 )
        {
          __asm { SMMUL.W         R1, R5, R4 }
          _ZF = _R1 == 4 * _R5 >> 31;
          v25 = 0;
          if ( !_ZF )
            v25 = 1;
          if ( v25 )
            break;
          v26 = *(_DWORD *)(v3 + 12);
          v27 = *(_DWORD *)(v3 + 20);
          v28 = j_exif_get_long();
          _sprintf_chk(&v186, 0, 30, "%lu ", v28);
          v29 = _strlen_chk(v5, -1);
          _strncat_chk(v5, &v186, v9 - v29, -1);
          v30 = _R5 + 1;
          v31 = 1;
          if ( !__OFSUB__(_R5 + 1, _R5) )
            v31 = 0;
          if ( v31 )
            break;
          ++_R5;
          if ( v30 >= *(_DWORD *)(v3 + 8) )
            goto LABEL_228;
        }
LABEL_379:
        __debugbreak();
      }
      goto LABEL_202;
    }
    if ( v8 <= 4133 )
    {
      switch ( v8 )
      {
        case 4103:
        case 4104:
          goto LABEL_57;
        case 4114:
LABEL_91:
          if ( *(_DWORD *)(v3 + 8) == 4 )
            goto LABEL_92;
          goto LABEL_227;
        case 4113:
LABEL_92:
          v56 = *(_DWORD *)(v3 + 4);
          if ( v56 != 3 )
          {
            j_exif_format_get_name(v56);
            j_exif_format_get_name(3);
            goto LABEL_227;
          }
          v57 = *(_DWORD *)(v3 + 8);
          if ( v8 == 4113 )
          {
            if ( v57 != 9 )
              goto LABEL_227;
          }
          else if ( v57 < 1 )
          {
            goto LABEL_228;
          }
          v84 = 0;
          while ( 1 )
          {
            v85 = 1;
            if ( !__OFSUB__(2 * v84, v84) )
              v85 = 0;
            if ( v85 )
              break;
            v86 = j_exif_get_short(2 * v84 + *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
            _sprintf_chk(&v186, 0, 30, "%hu ", v86);
            v87 = _strlen_chk(v5, -1);
            _strncat_chk(v5, &v186, v9 - v87, -1);
            v88 = v84 + 1;
            v89 = 1;
            if ( !__OFSUB__(v84 + 1, v84) )
              v89 = 0;
            if ( v89 )
              break;
            ++v84;
            if ( v88 >= *(_DWORD *)(v3 + 8) )
              goto LABEL_228;
          }
          break;
        default:
          goto LABEL_155;
        case 4100:
        case 4106:
        case 4107:
        case 4111:
          goto LABEL_202;
        case 4119:
        case 4120:
          v115 = *(_DWORD *)(v3 + 4);
          if ( v115 != 3 )
          {
            j_exif_format_get_name(v115);
            j_exif_format_get_name(3);
            goto LABEL_227;
          }
          if ( *(_DWORD *)(v3 + 8) != 2 )
            goto LABEL_227;
          v160 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
          _snprintf_chk(v5, v4 - 1, 0, -1);
          v159 = j_exif_get_short(*(_DWORD *)(v3 + 12) + 2, *(_DWORD *)(v3 + 20));
          v116 = "%hu";
          goto LABEL_262;
        case 4101:
          v121 = *(_DWORD *)(v3 + 4);
          if ( v121 != 3 )
          {
            j_exif_format_get_name(v121);
            j_exif_format_get_name(3);
            goto LABEL_227;
          }
          if ( *(_DWORD *)(v3 + 8) != 2 )
            goto LABEL_227;
          v122 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
          v123 = 0;
          while ( dword_29528[50 * v123] != *(_DWORD *)v3 )
          {
            v124 = v123 + 1;
            _VF = __OFSUB__(v123 + 1, v123);
            v125 = 1;
            if ( !_VF )
              v125 = 0;
            if ( v125 )
              goto LABEL_379;
            v123 = v124;
            if ( v124 == 28 )
              goto LABEL_227;
          }
          v144 = dword_29528[50 * v123 + 1];
          if ( *(_DWORD *)(v3 + 4) != v144 )
          {
            j_exif_format_get_name(*(_DWORD *)(v3 + 4));
            j_exif_format_get_name(v144);
            goto LABEL_227;
          }
          v145 = 0u;
          v146 = (char *)&dword_29528[50 * v123];
          v100 = (const char **)(v146 + 12);
          v147 = (const char **)(v146 + 8);
          while ( *(_DWORD *)&v146[8 * v145 + 8] < v122 )
          {
            v148 = 1;
            if ( !__OFSUB__(v145 + 1, v145) )
              v148 = 0;
            if ( v148 )
              goto LABEL_379;
            v149 = (int)&v146[8 * (v145 + 1)];
            v150 = *(_DWORD *)(v149 + 12);
            v100 = (const char **)(v149 + 12);
            v147 = v100 - 1;
            ++v145;
            if ( !v150 )
              break;
          }
          if ( *v147 == (const char *)v122 )
            goto LABEL_347;
          goto LABEL_227;
        case 4108:
          v126 = *(_DWORD *)(v3 + 4);
          if ( v126 != 5 )
          {
            j_exif_format_get_name(v126);
            j_exif_format_get_name(5);
            goto LABEL_227;
          }
          if ( *(_DWORD *)(v3 + 8) != 1 )
            goto LABEL_227;
          j_exif_get_srational((int)&v166, v7, *(_DWORD *)(v3 + 20));
          if ( v166 )
          {
            if ( v167 )
              goto LABEL_227;
          }
          v70 = -101869;
          v71 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_180;
        case 4117:
          v127 = *(_DWORD *)(v3 + 4);
          if ( v127 != 3 )
          {
            j_exif_format_get_name(v127);
            j_exif_format_get_name(3);
            goto LABEL_227;
          }
          if ( *(_DWORD *)(v3 + 8) != 2 )
            goto LABEL_227;
          v128 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
          switch ( v128 )
          {
            case 3:
              v70 = -59512;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 2:
              v129 = j_exif_get_short(*(_DWORD *)(v3 + 12) + 2, *(_DWORD *)(v3 + 20)) - 2;
              if ( v129 <= 7 && v129 != 6 )
              {
                v130 = dword_21020[v129];
                goto LABEL_227;
              }
              v70 = -59528;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            case 1:
              v70 = -59551;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
            default:
              v70 = -101869;
              v71 = &GLOBAL_OFFSET_TABLE_;
              break;
          }
          goto LABEL_180;
        case 4122:
          v131 = *(_DWORD *)(v3 + 4);
          if ( v131 != 2 )
          {
            j_exif_format_get_name(v131);
            j_exif_format_get_name(2);
            goto LABEL_227;
          }
LABEL_288:
          v132 = *(_DWORD *)(v3 + 16);
          if ( v9 < v132 )
            v132 = v4 - 1;
          strncpy(v5, (const char *)v7, v132);
          goto LABEL_228;
      }
      goto LABEL_379;
    }
    v41 = v8 - 4134;
    if ( (unsigned int)(v8 - 4134) > 0x14 )
      goto LABEL_155;
    if ( (1 << v41) & 0x88009 )
    {
LABEL_202:
      if ( *(_DWORD *)(v3 + 8) != 1 )
        goto LABEL_227;
      v92 = *(_DWORD *)(v3 + 4);
      if ( v92 != 1 )
      {
        if ( v92 == 3 )
        {
          v93 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
          v8 = *(_DWORD *)v3;
LABEL_210:
          v94 = 0;
          while ( dword_29528[50 * v94] != v8 )
          {
            v95 = v94 + 1;
            _VF = __OFSUB__(v94 + 1, v94);
            v96 = 1;
            if ( !_VF )
              v96 = 0;
            if ( v96 )
              goto LABEL_379;
            v94 = v95;
            if ( v95 == 28 )
              goto LABEL_227;
          }
          v97 = dword_29528[50 * v94 + 1];
          if ( *(_DWORD *)(v3 + 4) == v97 )
          {
            v98 = 0u;
            v99 = (char *)&dword_29528[50 * v94];
            v100 = (const char **)(v99 + 12);
            v101 = (const char **)(v99 + 8);
            while ( *(_DWORD *)&v99[8 * v98 + 8] < v93 )
            {
              v102 = 1;
              if ( !__OFSUB__(v98 + 1, v98) )
                v102 = 0;
              if ( v102 )
                goto LABEL_379;
              v103 = (int)&v99[8 * (v98 + 1)];
              v104 = *(_DWORD *)(v103 + 12);
              v100 = (const char **)(v103 + 12);
              v101 = v100 - 1;
              ++v98;
              if ( !v104 )
                break;
            }
            if ( *v101 == (const char *)v93 )
            {
LABEL_347:
              strncpy(v5, *v100, v9);
              goto LABEL_228;
            }
          }
          else
          {
            j_exif_format_get_name(*(_DWORD *)(v3 + 4));
            j_exif_format_get_name(v97);
          }
          goto LABEL_227;
        }
        if ( v92 != 7 )
        {
          v93 = 0;
          goto LABEL_210;
        }
      }
      v93 = *(_BYTE *)v7;
      goto LABEL_210;
    }
    if ( v41 == 5 )
    {
      v42 = *(_DWORD *)(v3 + 4);
      if ( v42 != 3 )
      {
        j_exif_format_get_name(v42);
        j_exif_format_get_name(3);
        goto LABEL_227;
      }
      if ( *(_DWORD *)(v3 + 8) != 6 )
        goto LABEL_227;
      v43 = 0;
      while ( 1 )
      {
        v44 = 1;
        if ( !__OFSUB__(2 * v43, v43) )
          v44 = 0;
        if ( v44 )
          goto LABEL_379;
        j_exif_get_short(2 * v43 + *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
        _sprintf_chk(&v186, 0, 30, "%hu ");
        v45 = _strlen_chk(v5, -1);
        _strncat_chk(v5, &v186, v9 - v45, -1);
        v46 = v43 + 1;
        v47 = 1;
        if ( !__OFSUB__(v43 + 1, v43) )
          v47 = 0;
        if ( v47 )
          goto LABEL_379;
        ++v43;
        if ( v46 >= *(_DWORD *)(v3 + 8) )
          goto LABEL_228;
      }
    }
    if ( v41 != 20 )
      goto LABEL_155;
LABEL_151:
    v73 = *(_DWORD *)(v3 + 4);
    if ( v73 != 3 )
    {
      j_exif_format_get_name(v73);
      j_exif_format_get_name(3);
      goto LABEL_227;
    }
    if ( *(_DWORD *)(v3 + 8) != 1 )
      goto LABEL_227;
    v74 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
    if ( v74 == 1 )
    {
      v70 = -69058;
      v71 = &GLOBAL_OFFSET_TABLE_;
    }
    else
    {
      if ( v74 )
      {
        v159 = v74;
        v108 = -59687;
        v109 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_261;
      }
      v70 = -69168;
      v71 = &GLOBAL_OFFSET_TABLE_;
    }
LABEL_180:
    _strncpy_chk2(v5, (char *)v71 + v70, v4 - 1, -1);
    goto LABEL_228;
  }
  switch ( v8 )
  {
    case 512:
      v19 = *(_DWORD *)(v3 + 4);
      if ( v19 != 4 )
      {
        j_exif_format_get_name(v19);
        j_exif_format_get_name(4);
        goto LABEL_227;
      }
      if ( *(_DWORD *)(v3 + 8) != 3 )
        goto LABEL_227;
      v20 = *(_DWORD *)(v3 + 20);
      switch ( j_exif_get_long() )
      {
        case 0:
          v142 = -101354;
          v143 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_356;
        case 1:
          v142 = -101869;
          v143 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_356;
        case 2:
          v142 = -59642;
          v143 = &GLOBAL_OFFSET_TABLE_;
          goto LABEL_356;
        case 3:
          v142 = -64958;
          v143 = &GLOBAL_OFFSET_TABLE_;
LABEL_356:
          _strncpy_chk2(v5, (char *)v143 + v142, v4 - 1, -1);
          break;
        default:
          _snprintf_chk(v5, v4 - 1, 0, -1);
          break;
      }
      v151 = *(_DWORD *)(v3 + 12);
      v152 = *(_DWORD *)(v3 + 20);
      j_exif_get_long();
      _snprintf_chk(&v186, 30, 0, 30);
      v153 = _strlen_chk(v5, -1);
      _strncat_chk(v5, &v186, v9 - v153, -1);
      v154 = *(_DWORD *)(v3 + 12);
      v155 = *(_DWORD *)(v3 + 20);
      switch ( j_exif_get_long() )
      {
        case 1:
          v156 = _strlen_chk(v5, -1);
          v157 = -65228;
          v158 = &GLOBAL_OFFSET_TABLE_;
          break;
        case 2:
          v156 = _strlen_chk(v5, -1);
          v157 = -65214;
          v158 = &GLOBAL_OFFSET_TABLE_;
          break;
        case 3:
          v156 = _strlen_chk(v5, -1);
          v157 = -65200;
          v158 = &GLOBAL_OFFSET_TABLE_;
          break;
        case 4:
          v156 = _strlen_chk(v5, -1);
          v157 = -65186;
          v158 = &GLOBAL_OFFSET_TABLE_;
          break;
        default:
          v117 = &v186;
          _snprintf_chk(&v186, 30, 0, 30);
          goto LABEL_263;
      }
      v120 = (int)v158 + v157;
      v118 = v9 - v156;
      v119 = v5;
      goto LABEL_264;
    case 517:
      goto LABEL_47;
    case 525:
      goto LABEL_50;
    case 523:
    case 524:
      goto LABEL_88;
    case 527:
    case 528:
    case 531:
    case 534:
    case 536:
    case 537:
    case 539:
    case 541:
      goto LABEL_151;
    default:
      goto LABEL_155;
    case 516:
      if ( *(_DWORD *)(v3 + 4) != 5 )
        goto LABEL_202;
      if ( *(_DWORD *)(v3 + 8) != 1 )
        goto LABEL_227;
      j_exif_get_srational((int)&v174, v7, *(_DWORD *)(v3 + 20));
      _R0 = v174;
      if ( v174 )
      {
        _R1 = v175;
        if ( v175 )
        {
          __asm
          {
            VMOV            S0, R1
            VCVT.F64.U32    D16, S0
            VMOV            S0, R0
            VCVT.F64.U32    D17, S0
            VDIV.F64        D16, D17, D16
          }
          goto LABEL_173;
        }
      }
      v70 = -68427;
      v71 = &GLOBAL_OFFSET_TABLE_;
      goto LABEL_180;
    case 513:
    case 514:
    case 515:
    case 526:
    case 530:
    case 535:
    case 538:
    case 542:
    case 543:
    case 548:
      goto LABEL_202;
    case 518:
      v106 = *(_DWORD *)(v3 + 4);
      v107 = *(_DWORD *)(v3 + 8);
      if ( v106 != 3 )
      {
        if ( v107 != 6 )
          goto LABEL_227;
        if ( v106 != 8 )
        {
          j_exif_format_get_name(v106);
          j_exif_format_get_name(8);
          goto LABEL_227;
        }
        v133 = 0;
        while ( 1 )
        {
          v134 = 1;
          if ( !__OFSUB__(2 * v133, v133) )
            v134 = 0;
          if ( v134 )
            goto LABEL_379;
          v135 = j_exif_get_sshort(2 * v133 + *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
          _sprintf_chk(&v186, 0, 30, "%hd ", v135);
          v136 = _strlen_chk(v5, -1);
          _strncat_chk(v5, &v186, v9 - v136, -1);
          v137 = v133 + 1;
          v138 = 1;
          if ( !__OFSUB__(v133 + 1, v133) )
            v138 = 0;
          if ( v138 )
            goto LABEL_379;
          ++v133;
          if ( v137 >= *(_DWORD *)(v3 + 8) )
            goto LABEL_228;
        }
      }
      if ( v107 != 1 )
        goto LABEL_227;
      v159 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
      v108 = 0xFFFF1711;
      v109 = &GLOBAL_OFFSET_TABLE_;
LABEL_261:
      v116 = (char *)v109 + v108;
LABEL_262:
      v117 = &v186;
      _sprintf_chk(&v186, 0, 30, v116, v159, v160);
LABEL_263:
      v118 = v9 - _strlen_chk(v5, -1);
      v119 = v5;
      v120 = (int)v117;
LABEL_264:
      _strncat_chk(v119, v120, v118, -1);
LABEL_228:
      if ( v0 != v187 )
        _stack_chk_fail(v0 - v187);
      return v5;
    case 519:
      v110 = *(_DWORD *)(v3 + 4);
      if ( v110 == 2 )
      {
        if ( (unsigned int)(*(_DWORD *)(v3 + 8) - 5) < 4 )
          goto LABEL_288;
      }
      else
      {
        j_exif_format_get_name(v110);
        j_exif_format_get_name(2);
      }
      goto LABEL_227;
    case 520:
      v111 = *(_DWORD *)(v3 + 4);
      if ( v111 == 2 )
      {
        if ( (unsigned int)(*(_DWORD *)(v3 + 8) - 52) < 9 )
          goto LABEL_288;
      }
      else
      {
        j_exif_format_get_name(v111);
        j_exif_format_get_name(2);
      }
      goto LABEL_227;
    case 521:
      v112 = *(_DWORD *)(v3 + 4);
      if ( v112 == 7 )
      {
        if ( *(_DWORD *)(v3 + 8) == 32 )
          goto LABEL_288;
      }
      else
      {
        j_exif_format_get_name(v112);
        j_exif_format_get_name(7);
      }
      goto LABEL_227;
    case 532:
      v113 = *(_DWORD *)(v3 + 4);
      if ( v113 != 3 )
      {
        j_exif_format_get_name(v113);
        j_exif_format_get_name(3);
        goto LABEL_227;
      }
      if ( *(_DWORD *)(v3 + 8) != 1 )
        goto LABEL_227;
      v114 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
      if ( v114 == 2 )
      {
        v70 = -59675;
        v71 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_180;
      }
      if ( v114 == 1 )
      {
        v70 = -69058;
        v71 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_180;
      }
      if ( !v114 )
      {
        v70 = -69168;
        v71 = &GLOBAL_OFFSET_TABLE_;
        goto LABEL_180;
      }
      v159 = v114;
      v108 = -59687;
      v109 = &GLOBAL_OFFSET_TABLE_;
      goto LABEL_261;
  }
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 6D34: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 707C: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);
// 7088: using guessed type int __fastcall _strncat_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 70AC: using guessed type int __fastcall _strncpy_chk2(_DWORD, _DWORD, _DWORD, _DWORD);
// 725C: using guessed type int _sprintf_chk(_DWORD, _DWORD, _DWORD, const char *, ...);
// 2DDCC: using guessed type int GLOBAL_OFFSET_TABLE_;

//----- (00010A28) --------------------------------------------------------
signed int __fastcall exif_mnote_data_fuji_identify(int a1, int a2)
{
  signed int v2; // r4@1

  v2 = 0;
  if ( *(_DWORD *)(a2 + 16) >= 0xCu && !memcmp(*(const void **)(a2 + 12), "FUJIFILM", 8u) )
    v2 = 1;
  return v2;
}

//----- (00010A54) --------------------------------------------------------
_DWORD *__fastcall exif_mnote_data_fuji_new(int a1)
{
  int v1; // r5@1
  _DWORD *v2; // r0@2
  _DWORD *v3; // r4@2
  int v4; // r3@3

  v1 = a1;
  if ( a1 && (v2 = (_DWORD *)j_exif_mem_alloc(a1, 72), (v3 = v2) != 0) )
  {
    j_exif_mnote_data_construct(v2, v1);
    v3[1] = sub_10AFC;
    v3[5] = sub_10B08;
    v3[4] = sub_10B4C;
    v3[3] = sub_10B54;
    v3[2] = sub_10DC0;
    v3[6] = sub_10F3C;
    v3[7] = sub_10F48;
    v3[8] = sub_10F60;
    v4 = (int)(v3 + 9);
    *(_DWORD *)v4 = sub_10F7C;
    *(_DWORD *)(v4 + 4) = sub_10F98;
    *(_DWORD *)(v4 + 8) = sub_10FB4;
  }
  else
  {
    v3 = 0;
  }
  return v3;
}
// 10AFC: using guessed type int sub_10AFC();
// 10B4C: using guessed type int sub_10B4C();
// 10F7C: using guessed type int sub_10F7C();
// 10F98: using guessed type int sub_10F98();
// 10FB4: using guessed type int sub_10FB4();

//----- (00010B08) --------------------------------------------------------
unsigned int __fastcall sub_10B08(unsigned int result, int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@1
  int v4; // r8@2
  int v5; // r7@3
  unsigned int v6; // r6@3

  v2 = result;
  v3 = a2;
  if ( result )
  {
    v4 = *(_DWORD *)(result + 64);
    *(_DWORD *)(result + 64) = a2;
    result = *(_DWORD *)(result + 60);
    if ( result )
    {
      v5 = 0;
      v6 = 0;
      do
      {
        *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 20) = v3;
        j_exif_array_set_byte_order(
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 4),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 12),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 8),
          v4,
          v3);
        result = *(_DWORD *)(v2 + 60);
        ++v6;
        v5 += 24;
      }
      while ( v6 < result );
    }
  }
  return result;
}

//----- (00010B54) --------------------------------------------------------
int __fastcall sub_10B54(int a1, int a2, unsigned int a3)
{
  int v3; // r4@1
  unsigned int v4; // r7@1
  int v5; // r6@1
  int v6; // r11@4
  unsigned int v7; // r0@4
  int v8; // r0@7
  int v9; // r10@7
  unsigned int v10; // r0@7
  int v11; // r8@9
  int result; // r0@9
  unsigned int v13; // r5@10
  unsigned int v14; // r11@11
  int v15; // r8@11
  int v16; // r7@11
  int v17; // r10@14
  int v18; // r5@14
  int v19; // r1@14
  int v20; // r7@14
  int v21; // r1@14
  unsigned int v22; // r7@14
  int v23; // r1@16
  unsigned int v24; // r6@16
  unsigned int v25; // r1@18
  int v26; // r3@21
  int v27; // r0@21
  int v28; // r0@24
  int v29; // r1@24
  int v30; // r0@29
  int v31; // r1@29
  int v32; // [sp+14h] [bp-34h]@11
  unsigned int v33; // [sp+18h] [bp-30h]@10
  int v34; // [sp+20h] [bp-28h]@14

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( !a1
    || !a2
    || !a3
    || (v6 = *(_DWORD *)(a1 + 68), v7 = v6 + 18, v6 + 18 > a3)
    || v7 < v6 + 6
    || v7 <= 0xB
    || (*(_DWORD *)(v3 + 64) = 1, v8 = j_exif_get_long(), v9 = v8, v10 = v8 + v6 + 6, v10 > 0xFFFFFFFD)
    || v10 + 2 > v4 )
  {
    v30 = *(_DWORD *)(v3 + 48);
    v31 = 3;
    return j_exif_log(v30, v31);
  }
  v11 = j_exif_get_short(v10 + v5, 1);
  sub_D774(v3);
  result = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), 24 * v11);
  *(_DWORD *)(v3 + 56) = result;
  if ( !result )
  {
    v30 = *(_DWORD *)(v3 + 48);
    v31 = 2;
    return j_exif_log(v30, v31);
  }
  v13 = v4;
  v33 = v4;
  if ( !v11 )
  {
    v16 = 0;
    goto LABEL_34;
  }
  v14 = v9 + v6 + 20;
  v15 = -v11;
  v16 = 0;
  v32 = v5;
  while ( v14 - 12 <= 0xFFFFFFF3 && v14 <= v13 )
  {
    v17 = 3 * v16;
    v34 = v16;
    v18 = 24 * v16;
    *(_DWORD *)(*(_DWORD *)(v3 + 56) + 24 * v16) = j_exif_get_short(v32 + v14 - 12, *(_DWORD *)(v3 + 64));
    *(_DWORD *)(*(_DWORD *)(v3 + 56) + 24 * v16 + 4) = j_exif_get_short(v32 + v14 - 10, *(_DWORD *)(v3 + 64));
    v19 = *(_DWORD *)(v3 + 64);
    *(_DWORD *)(*(_DWORD *)(v3 + 56) + 24 * v16 + 8) = j_exif_get_long();
    *(_DWORD *)(*(_DWORD *)(v3 + 56) + 24 * v16 + 20) = *(_DWORD *)(v3 + 64);
    v20 = *(_DWORD *)(v3 + 48);
    j_mnote_fuji_tag_get_name(*(_DWORD *)(*(_DWORD *)(v3 + 56) + v18));
    j_exif_log(v20, 1);
    result = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v17 + 4));
    v21 = *(_DWORD *)(v3 + 56) + 8 * v17;
    v22 = *(_DWORD *)(v21 + 8) * result;
    *(_DWORD *)(v21 + 16) = v22;
    if ( v22 )
    {
      v13 = v33;
      if ( v22 < 5 )
      {
        v24 = v14 - 4;
      }
      else
      {
        v23 = *(_DWORD *)(v3 + 64);
        v24 = j_exif_get_long() + *(_DWORD *)(v3 + 68) + 6;
      }
      v25 = v24 + v22;
      if ( v24 + v22 >= v33 || v25 < v22 || v25 < v24 )
      {
        v28 = *(_DWORD *)(v3 + 48);
        v29 = 3;
LABEL_26:
        result = j_exif_log(v28, v29);
        v16 = v34;
        goto LABEL_27;
      }
      *(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v17 + 12) = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v22);
      v27 = *(_DWORD *)(*(_DWORD *)(v3 + 56) + 8 * v17 + 12);
      if ( !v27 )
      {
        v28 = *(_DWORD *)(v3 + 48);
        v29 = 2;
        goto LABEL_26;
      }
      result = _aeabi_memcpy(v27, v32 + v24, v22, v26);
    }
    v13 = v33;
    v16 = v34 + 1;
LABEL_27:
    v14 += 12;
    if ( !++v15 )
      goto LABEL_34;
  }
  result = j_exif_log(*(_DWORD *)(v3 + 48), 3);
LABEL_34:
  *(_DWORD *)(v3 + 60) = v16;
  return result;
}

//----- (00010DC0) --------------------------------------------------------
unsigned int __fastcall sub_10DC0(unsigned int result, int *a2, int *a3)
{
  int *v3; // r11@1
  unsigned int v4; // r6@1
  int *v5; // r9@1
  int v6; // r1@4
  int v7; // r0@4
  int v8; // r1@5
  unsigned __int8 v9; // cf@5
  int v10; // r4@6
  unsigned int v11; // r10@6
  int v12; // r1@7
  int v13; // r2@7
  int v14; // r0@7
  int v15; // r3@7
  int v16; // r1@7
  unsigned int v17; // r7@7
  int v18; // r3@9
  int v19; // r5@9
  int v20; // r11@10
  int v21; // r1@12
  int v22; // r0@12
  int v23; // r1@14
  int v24; // r0@14
  int *v25; // [sp+0h] [bp-28h]@1

  v3 = a3;
  v4 = result;
  v5 = a2;
  v25 = a3;
  if ( result && a2 && a3 )
  {
    v6 = 12 * *(_DWORD *)(result + 60) + 18;
    *a3 = v6;
    v7 = j_exif_mem_alloc(*(_DWORD *)(result + 52), v6);
    *v5 = v7;
    if ( v7 )
    {
      *(_DWORD *)(v7 + 4) = 1296845126;
      *(_DWORD *)v7 = 1229608262;
      v8 = *(_DWORD *)(v4 + 64);
      v9 = __CFADD__(*v5, 8);
      j_exif_set_long();
      j_exif_set_sshort(*v5 + 12, *(_DWORD *)(v4 + 64), *(_WORD *)(v4 + 60));
      result = *(_DWORD *)(v4 + 60);
      if ( result )
      {
        v10 = 0;
        v11 = 0;
        do
        {
          j_exif_set_sshort(*v5 + v10 + 14, *(_DWORD *)(v4 + 64), *(_WORD *)(*(_DWORD *)(v4 + 56) + 2 * v10));
          j_exif_set_sshort(*v5 + v10 + 16, *(_DWORD *)(v4 + 64), *(_WORD *)(*(_DWORD *)(v4 + 56) + 2 * v10 + 4));
          v12 = *(_DWORD *)(v4 + 64);
          v9 = __CFADD__(*v5, v10);
          v13 = *(_DWORD *)(*(_DWORD *)(v4 + 56) + 2 * v10 + 8);
          j_exif_set_long();
          v14 = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v4 + 56) + 2 * v10 + 4));
          v16 = *(_DWORD *)(v4 + 56);
          v17 = *(_DWORD *)(v16 + 2 * v10 + 8) * v14;
          if ( v17 <= 0x10000 )
          {
            if ( v17 < 5 )
            {
              v20 = v10 + 22;
            }
            else
            {
              v18 = (v17 & 1) + v17;
              v19 = v18 + *v3;
              result = j_exif_mem_realloc(*(_DWORD *)(v4 + 52), *v5, v18 + *v3);
              if ( !result )
                return result;
              *v5 = result;
              *v3 = v19;
              v20 = v19 - v17;
              if ( v17 & 1 )
              {
                --v20;
                *(_BYTE *)(*v5 + v19 - 1) = 0;
              }
              v21 = *(_DWORD *)(v4 + 64);
              v22 = *v5 + v10;
              j_exif_set_long();
              v16 = *(_DWORD *)(v4 + 56);
            }
            v23 = *(_DWORD *)(v16 + 2 * v10 + 12);
            v24 = *v5 + v20;
            if ( v23 )
              _aeabi_memcpy(v24, v23, v17, v15);
            else
              _aeabi_memset(v24, v17, 0);
            v3 = v25;
          }
          result = *(_DWORD *)(v4 + 60);
          ++v11;
          v10 += 12;
        }
        while ( v11 < result );
      }
    }
    else
    {
      result = 0;
      *v3 = 0;
    }
  }
  return result;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);

//----- (00010F3C) --------------------------------------------------------
int __fastcall sub_10F3C(int a1)
{
  int result; // r0@2

  if ( a1 )
    result = *(_DWORD *)(a1 + 60);
  else
    result = 0;
  return result;
}

//----- (00010F48) --------------------------------------------------------
int __fastcall sub_10F48(int a1, unsigned int a2)
{
  int result; // r0@3

  if ( a1 && *(_DWORD *)(a1 + 60) > a2 )
    result = *(_DWORD *)(*(_DWORD *)(a1 + 56) + 24 * a2);
  else
    result = 0;
  return result;
}

//----- (00010F60) --------------------------------------------------------
int __fastcall sub_10F60(int a1, unsigned int a2)
{
  int result; // r0@3

  if ( a1 && *(_DWORD *)(a1 + 60) > a2 )
    result = j_j_j_mnote_fuji_tag_get_name(*(_DWORD *)(*(_DWORD *)(a1 + 56) + 24 * a2));
  else
    result = 0;
  return result;
}

//----- (00010FDC) --------------------------------------------------------
char *__fastcall mnote_fuji_entry_get_value(int a1, char *a2, int a3)
{
  int v3; // r6@1
  int v4; // r5@1
  char *v5; // r4@1
  int v6; // r3@2
  signed int v7; // r0@2
  size_t v8; // r5@2
  int v9; // r0@5
  size_t v10; // r2@7
  int v11; // r0@13
  signed int v18; // r1@22
  unsigned int v19; // r0@32
  int v20; // r0@34
  int v21; // r0@36
  int v22; // r2@36
  int v23; // r7@38
  signed int v24; // r2@38
  int v25; // r6@45
  char *v26; // r1@45
  const char **v27; // r2@45
  const char **v28; // r3@45
  signed int v29; // r2@47
  int v30; // r2@50
  int v31; // t1@50
  int v32; // r0@55
  size_t v33; // r2@59
  int v34; // ST04_4@62
  int v36; // r0@66
  int v37; // r1@66
  int v42; // [sp+10h] [bp-30h]@70
  int v43; // [sp+14h] [bp-2Ch]@70
  int v44; // [sp+18h] [bp-28h]@67
  int v45; // [sp+1Ch] [bp-24h]@67
  int v46; // [sp+20h] [bp-20h]@15
  int v47; // [sp+24h] [bp-1Ch]@15

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( !a1 )
    return 0;
  _aeabi_memset(a2, a3, 0);
  v7 = *(_DWORD *)v3;
  v8 = v4 - 1;
  if ( *(_DWORD *)v3 >= 5120 )
  {
    if ( (unsigned int)(v7 - 5120) >= 3 )
    {
      if ( (unsigned int)(v7 - 5124) >= 2 )
        goto LABEL_58;
      v11 = *(_DWORD *)(v3 + 4);
      if ( v11 == 5 )
      {
        if ( *(_DWORD *)(v3 + 8) != 1 )
          goto LABEL_63;
        j_exif_get_srational((int)&v46, *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
        _R0 = v47;
        if ( !v47 )
          return v5;
        _R1 = v46;
        __asm
        {
          VMOV            S0, R0
          VCVT.F64.U32    D16, S0
          VMOV            S0, R1
          VCVT.F64.U32    D17, S0
          VDIV.F64        D16, D17, D16
        }
        goto LABEL_72;
      }
      j_exif_format_get_name(v11);
      j_exif_format_get_name(5);
LABEL_63:
      _snprintf_chk(v5, v8, 0, -1);
      return v5;
    }
    goto LABEL_34;
  }
  if ( v7 > 4096 )
  {
    if ( v7 <= 4111 )
    {
      if ( (unsigned int)(v7 - 4097) >= 4 )
        goto LABEL_58;
      goto LABEL_34;
    }
    if ( v7 >= 4352 )
    {
      if ( (unsigned int)(v7 - 4864) >= 3 && v7 != 4352 )
      {
        v18 = 4624;
LABEL_28:
        if ( v7 != v18 )
        {
LABEL_58:
          switch ( *(_DWORD *)(v3 + 4) )
          {
            case 2:
              v33 = *(_DWORD *)(v3 + 16);
              if ( v8 < v33 )
                v33 = v8;
              strncpy(v5, *(const char **)(v3 + 12), v33);
              return v5;
            default:
              v34 = *(_DWORD *)(v3 + 16);
              goto LABEL_63;
            case 3:
              j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
              goto LABEL_63;
            case 4:
              v36 = *(_DWORD *)(v3 + 12);
              v37 = *(_DWORD *)(v3 + 20);
              j_exif_get_long();
              goto LABEL_63;
            case 5:
              j_exif_get_srational((int)&v44, *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
              _R0 = v45;
              if ( !v45 )
                return v5;
              _R1 = v44;
              __asm
              {
                VMOV            S0, R0
                VCVT.F64.U32    D16, S0
                VMOV            S0, R1
                VCVT.F64.U32    D17, S0
                VDIV.F64        D16, D17, D16
              }
              break;
            case 9:
              j_exif_get_slong(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
              goto LABEL_63;
            case 0xA:
              j_exif_get_srational_0((int)&v42, *(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
              _R0 = v43;
              if ( !v43 )
                return v5;
              _R1 = v42;
              __asm
              {
                VMOV            S0, R0
                VCVT.F64.S32    D16, S0
                VMOV            S0, R1
                VCVT.F64.S32    D17, S0
                VDIV.F64        D16, D17, D16
              }
              break;
          }
LABEL_72:
          __asm { VSTR            D16, [SP,#0x40+var_38] }
          goto LABEL_63;
        }
        goto LABEL_34;
      }
    }
    else
    {
      if ( v7 < 4128 )
      {
        v18 = 4112;
        goto LABEL_28;
      }
      v19 = v7 - 4128;
      if ( v19 > 0x11 )
        goto LABEL_58;
      if ( !((1 << v19) & 0x30003) )
      {
        if ( v19 == 3 )
        {
          v32 = *(_DWORD *)(v3 + 4);
          if ( v32 == 3 )
          {
            if ( *(_DWORD *)(v3 + 8) == 2 )
            {
              j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
              j_exif_get_short(*(_DWORD *)(v3 + 12) + 2, *(_DWORD *)(v3 + 20));
            }
          }
          else
          {
            j_exif_format_get_name(v32);
            j_exif_format_get_name(3);
          }
          goto LABEL_63;
        }
        goto LABEL_58;
      }
    }
LABEL_34:
    v20 = *(_DWORD *)(v3 + 4);
    if ( v20 == 3 )
    {
      if ( *(_DWORD *)(v3 + 8) == 1 )
      {
        v21 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
        v22 = 0;
        while ( dword_2ABD0[45 * v22] != *(_DWORD *)v3 )
        {
          v23 = v22 + 1;
          _VF = __OFSUB__(v22 + 1, v22);
          v24 = 1;
          if ( !_VF )
            v24 = 0;
          if ( v24 )
LABEL_75:
            __debugbreak();
          v22 = v23;
          if ( v23 == 17 )
            goto LABEL_63;
        }
        v25 = 0u;
        v26 = (char *)&dword_2ABD0[45 * v22];
        v27 = (const char **)(v26 + 8);
        v28 = (const char **)(v26 + 4);
        while ( *(_DWORD *)&v26[8 * v25 + 4] < v21 )
        {
          v29 = 1;
          if ( !__OFSUB__(v25 + 1, v25) )
            v29 = 0;
          if ( v29 )
            goto LABEL_75;
          v30 = (int)&v26[8 * (v25 + 1)];
          v31 = *(_DWORD *)(v30 + 8);
          v27 = (const char **)(v30 + 8);
          v28 = v27 - 1;
          ++v25;
          if ( !v31 )
            break;
        }
        if ( *v28 == (const char *)v21 )
        {
          strncpy(v5, *v27, v8);
          return v5;
        }
      }
    }
    else
    {
      j_exif_format_get_name(v20);
      j_exif_format_get_name(3);
    }
    goto LABEL_63;
  }
  if ( v7 )
    goto LABEL_58;
  v9 = *(_DWORD *)(v3 + 4);
  if ( v9 != 7 )
  {
    j_exif_format_get_name(v9);
    j_exif_format_get_name(7);
    goto LABEL_63;
  }
  if ( *(_DWORD *)(v3 + 8) != 4 )
    goto LABEL_63;
  v10 = *(_DWORD *)(v3 + 16);
  if ( v8 < v10 )
    v10 = v8;
  _aeabi_memcpy(v5, *(_DWORD *)(v3 + 12), v10, v6);
  return v5;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (000113B4) --------------------------------------------------------
int __fastcall mnote_fuji_tag_get_name(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_2B87C;
  while ( *(int *)((char *)v2 + 0xFFFFFFFC) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x20 )
      return 0;
  }
  return *v2;
}
// 2B87C: using guessed type int;

//----- (000113E0) --------------------------------------------------------
int __fastcall mnote_fuji_tag_get_title(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_2B880;
  while ( *(int *)((char *)v2 + 0xFFFFFFF8) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x20 )
      return 0;
  }
  return *v2;
}
// 2B880: using guessed type int;

//----- (0001140C) --------------------------------------------------------
_BYTE *__fastcall mnote_fuji_tag_get_description(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1
  _BYTE *result; // r0@4

  v1 = 0;
  v2 = &dword_2B884;
  while ( *(int *)((char *)v2 + 0xFFFFFFF4) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x20 )
      return 0;
  }
  if ( v1 == 31 )
  {
    result = &unk_157F8;
  }
  else
  {
    result = (_BYTE *)*v2;
    if ( !*(_BYTE *)*v2 )
      result = &unk_157F8;
  }
  return result;
}
// 2B884: using guessed type int;

//----- (00011460) --------------------------------------------------------
signed int __fastcall exif_mnote_data_pentax_identify(int a1, int a2)
{
  unsigned int v2; // r0@1
  int v3; // r0@2
  signed int v4; // r2@2
  signed int v5; // r3@2
  int v7; // r0@10
  int v8; // r1@14

  v2 = *(_DWORD *)(a2 + 16);
  if ( v2 < 8 )
  {
    if ( v2 < 2 )
      return 0;
LABEL_10:
    v7 = *(_DWORD *)(a2 + 12);
    if ( !*(_BYTE *)v7 && *(_BYTE *)(v7 + 1) == 27 )
      return 1;
    return 0;
  }
  v3 = *(_DWORD *)(a2 + 12);
  v4 = 0;
  v5 = 0;
  if ( *(_DWORD *)v3 != 4411201 )
    v5 = 1;
  if ( v5 )
  {
    if ( *(_DWORD *)v3 != 4413009 )
      v4 = 1;
    if ( !v4 )
      return 4;
    goto LABEL_10;
  }
  v8 = *(_BYTE *)(v3 + 4);
  if ( v8 != 77 )
  {
    if ( v8 != 73 || *(_BYTE *)(v3 + 5) != 73 )
      return 2;
    return 3;
  }
  if ( *(_BYTE *)(v3 + 5) == 77 )
    return 3;
  return 2;
}

//----- (000114D0) --------------------------------------------------------
_DWORD *__fastcall exif_mnote_data_pentax_new(int a1)
{
  int v1; // r5@1
  _DWORD *v2; // r0@2
  _DWORD *v3; // r4@2
  int v4; // r3@3

  v1 = a1;
  if ( a1 && (v2 = (_DWORD *)j_exif_mem_alloc(a1, 76), (v3 = v2) != 0) )
  {
    j_exif_mnote_data_construct(v2, v1);
    v3[1] = sub_11578;
    v3[5] = sub_11584;
    v3[4] = sub_115C8;
    v3[3] = sub_115D0;
    v3[2] = sub_118D8;
    v3[6] = sub_11BB0;
    v3[7] = sub_11BBC;
    v3[8] = sub_11BD4;
    v4 = (int)(v3 + 9);
    *(_DWORD *)v4 = sub_11BF0;
    *(_DWORD *)(v4 + 4) = sub_11C0C;
    *(_DWORD *)(v4 + 8) = sub_11C28;
  }
  else
  {
    v3 = 0;
  }
  return v3;
}
// 11578: using guessed type int sub_11578();
// 115C8: using guessed type int sub_115C8();
// 11BB0: using guessed type int sub_11BB0();
// 11BBC: using guessed type int sub_11BBC();
// 11BD4: using guessed type int sub_11BD4();
// 11BF0: using guessed type int sub_11BF0();
// 11C0C: using guessed type int sub_11C0C();
// 11C28: using guessed type int sub_11C28();

//----- (00011584) --------------------------------------------------------
unsigned int __fastcall sub_11584(unsigned int result, int a2)
{
  unsigned int v2; // r5@1
  int v3; // r4@1
  int v4; // r8@2
  int v5; // r7@3
  unsigned int v6; // r6@3

  v2 = result;
  v3 = a2;
  if ( result )
  {
    v4 = *(_DWORD *)(result + 64);
    *(_DWORD *)(result + 64) = a2;
    result = *(_DWORD *)(result + 60);
    if ( result )
    {
      v5 = 0;
      v6 = 0;
      do
      {
        *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 20) = v3;
        j_exif_array_set_byte_order(
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 4),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 12),
          *(_DWORD *)(*(_DWORD *)(v2 + 56) + v5 + 8),
          v4,
          v3);
        result = *(_DWORD *)(v2 + 60);
        ++v6;
        v5 += 24;
      }
      while ( v6 < result );
    }
  }
  return result;
}

//----- (000115D0) --------------------------------------------------------
int __fastcall sub_115D0(int a1, int a2, unsigned int a3)
{
  unsigned int v3; // r7@1
  int v4; // r6@1
  int v5; // r4@1
  int v6; // r5@4
  unsigned int v7; // r0@4
  int v8; // r8@5
  int v9; // r0@7
  signed int v10; // r1@7
  bool v11; // zf@7
  signed int v12; // r0@7
  int v13; // r0@10
  signed int v14; // r0@13
  int v15; // r0@14
  int v16; // r1@14
  int result; // r0@15
  int v18; // r0@16
  int v19; // r1@16
  int v20; // r5@26
  int v21; // r10@28
  unsigned int v22; // r9@28
  int v23; // r5@28
  int v24; // r5@31
  int v25; // r1@31
  int v26; // r6@31
  int v27; // r1@31
  unsigned int v28; // r11@31
  int v29; // r1@33
  unsigned int v30; // r6@33
  unsigned int v31; // r1@35
  signed int v32; // r0@35
  int v33; // r3@40
  int v34; // r0@40
  int v35; // r0@43
  int v36; // r1@43
  signed int v37; // [sp+1Ch] [bp-34h]@26
  int v38; // [sp+20h] [bp-30h]@1
  unsigned int v39; // [sp+24h] [bp-2Ch]@1
  int v40; // [sp+28h] [bp-28h]@31

  v3 = a3;
  v4 = a2;
  v5 = a1;
  v39 = a3;
  v38 = a2;
  if ( !a1
    || !a2
    || !a3
    || (v6 = *(_DWORD *)(a1 + 68), v7 = v6 + 14, v6 + 14 > a3)
    || (v8 = v6 + 6, v7 < v6 + 6)
    || v7 <= 7 )
  {
    v15 = *(_DWORD *)(v5 + 48);
    v16 = 3;
    return j_exif_log(v15, v16);
  }
  v9 = *(_DWORD *)(a2 + v8);
  v10 = 0;
  v11 = v9 == 4411201;
  v12 = 0;
  if ( !v11 )
    v12 = 1;
  if ( !v12 )
  {
    v18 = v6 + v4;
    v19 = *(_BYTE *)(v6 + v4 + 10);
    if ( v19 == 77 )
    {
      if ( *(_BYTE *)(v18 + 11) == 77 )
      {
        *(_DWORD *)(v5 + 72) = 3;
        *(_DWORD *)(v5 + 64) = 0;
LABEL_24:
        j_exif_log(*(_DWORD *)(v5 + 48), 1);
        goto LABEL_25;
      }
    }
    else if ( v19 == 73 && *(_BYTE *)(v18 + 11) == 73 )
    {
      *(_DWORD *)(v5 + 72) = 3;
      *(_DWORD *)(v5 + 64) = 1;
      goto LABEL_24;
    }
    *(_DWORD *)(v5 + 72) = 2;
    goto LABEL_24;
  }
  v13 = *(_DWORD *)(v5 + 48);
  if ( *(_DWORD *)(v4 + v8) != 4413009 )
    v10 = 1;
  if ( v10 )
  {
    j_exif_log(v13, 1);
    v14 = 0;
    *(_DWORD *)(v5 + 72) = 1;
    goto LABEL_26;
  }
  j_exif_log(v13, 1);
  *(_DWORD *)(v5 + 72) = 4;
LABEL_25:
  v8 = v6 + 12;
  v14 = 0x4000;
LABEL_26:
  v37 = v14;
  v20 = j_exif_get_short(v4 + v8, *(_DWORD *)(v5 + 64));
  sub_D774(v5);
  result = j_exif_mem_alloc(*(_DWORD *)(v5 + 52), 24 * v20);
  *(_DWORD *)(v5 + 56) = result;
  if ( !result )
  {
    v15 = *(_DWORD *)(v5 + 48);
    v16 = 2;
    return j_exif_log(v15, v16);
  }
  if ( !v20 )
  {
    v23 = 0;
    goto LABEL_51;
  }
  v21 = -v20;
  v22 = v8 + 14;
  v23 = 0;
  while ( v22 - 12 <= 0xFFFFFFF3 && v22 <= v3 )
  {
    v40 = v23;
    v24 = 3 * v23;
    *(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24) = j_exif_get_short(v4 + v22 - 12, *(_DWORD *)(v5 + 64)) + v37;
    *(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24 + 4) = j_exif_get_short(v4 + v22 - 10, *(_DWORD *)(v5 + 64));
    v25 = *(_DWORD *)(v5 + 64);
    *(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24 + 8) = j_exif_get_long();
    *(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24 + 20) = *(_DWORD *)(v5 + 64);
    v26 = *(_DWORD *)(v5 + 48);
    j_mnote_pentax_tag_get_name(*(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24));
    j_exif_log(v26, 1);
    result = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24 + 4));
    v27 = *(_DWORD *)(v5 + 56) + 8 * v24;
    v28 = *(_DWORD *)(v27 + 8) * result;
    *(_DWORD *)(v27 + 16) = v28;
    if ( v28 )
    {
      if ( v28 < 5 )
      {
        v30 = v22 - 4;
      }
      else
      {
        v29 = *(_DWORD *)(v5 + 64);
        v30 = j_exif_get_long() + 6;
      }
      v31 = v30 + v28;
      v32 = 1;
      if ( v30 + v28 >= v30 )
        v32 = 0;
      v3 = v39;
      if ( v31 > v39 || v32 || v31 < v28 )
      {
        v35 = *(_DWORD *)(v5 + 48);
        v36 = 1;
LABEL_45:
        result = j_exif_log(v35, v36);
        v23 = v40;
        goto LABEL_46;
      }
      *(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24 + 12) = j_exif_mem_alloc(*(_DWORD *)(v5 + 52), v28);
      v34 = *(_DWORD *)(*(_DWORD *)(v5 + 56) + 8 * v24 + 12);
      if ( !v34 )
      {
        v35 = *(_DWORD *)(v5 + 48);
        v36 = 2;
        goto LABEL_45;
      }
      result = _aeabi_memcpy(v34, v38 + v30, v28, v33);
    }
    v3 = v39;
    v23 = v40 + 1;
LABEL_46:
    v4 = v38;
    v22 += 12;
    if ( !++v21 )
      goto LABEL_51;
  }
  result = j_exif_log(*(_DWORD *)(v5 + 48), 3);
LABEL_51:
  *(_DWORD *)(v5 + 60) = v23;
  return result;
}

//----- (000118D8) --------------------------------------------------------
int __fastcall sub_118D8(int result, int *a2, int *a3)
{
  int v3; // r4@1
  int *v4; // r6@1
  int *v5; // r11@1
  int v6; // r5@4
  int v7; // r1@4
  int v8; // r0@5
  int v9; // r0@5
  _DWORD *v10; // r8@6
  signed int v11; // r3@6
  signed __int16 v12; // r6@6
  _DWORD *v13; // r0@7
  int v14; // r1@8
  _DWORD *v15; // r0@9
  __int16 v16; // r2@10
  int v17; // r1@10
  int v18; // r0@12
  signed int v19; // r7@17
  int v20; // r9@18
  signed int v21; // r5@18
  unsigned int v22; // r8@18
  int v23; // r1@19
  int v24; // r2@19
  int v25; // r0@19
  int v26; // r0@19
  int v27; // r3@19
  int v28; // r1@19
  unsigned int v29; // r7@19
  int v30; // r10@21
  int v31; // r6@21
  int v32; // r0@21
  int v33; // r1@22
  int v34; // r0@22
  int v35; // r1@24
  int v36; // r0@24
  unsigned int v37; // r0@27
  int *v38; // r2@28
  int v39; // r1@28
  int v40; // r1@30
  int v41; // r5@30
  int v42; // r1@32
  int v43; // r0@32
  int v44; // r0@33
  int v45; // ST00_4@33
  int v46; // ST00_4@34
  int v47; // ST00_4@35
  int v48; // ST00_4@36
  _DWORD *v49; // [sp+8h] [bp-38h]@18
  signed int v50; // [sp+Ch] [bp-34h]@18
  signed __int16 v51; // [sp+14h] [bp-2Ch]@17
  int *v52; // [sp+18h] [bp-28h]@6

  v3 = result;
  v4 = a3;
  v5 = a2;
  if ( result && a2 && a3 )
  {
    v6 = *(_DWORD *)(result + 68);
    result = 3 * *(_DWORD *)(result + 60);
    v7 = 12 * *(_DWORD *)(v3 + 60) + 12;
    *a3 = v7;
    switch ( *(_DWORD *)(v3 + 72) )
    {
      case 1:
        v8 = 4 * result;
        *a3 = v8 + 6;
        v9 = j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v8 + 6);
        *v5 = v9;
        if ( v9 )
        {
          v52 = v4;
          v10 = (_DWORD *)(v3 + 64);
          v11 = 0;
          v12 = 0;
          goto LABEL_17;
        }
        v44 = *(_DWORD *)(v3 + 48);
        v45 = *v4;
        return j_exif_log(v44, 2);
      case 2:
        v13 = (_DWORD *)j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v7);
        *v5 = (int)v13;
        if ( v13 )
        {
          v52 = v4;
          LOWORD(v14) = 20289;
          goto LABEL_15;
        }
        v44 = *(_DWORD *)(v3 + 48);
        v46 = *v4;
        return j_exif_log(v44, 2);
      case 3:
        v15 = (_DWORD *)j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v7);
        *v5 = (int)v15;
        if ( !v15 )
        {
          v44 = *(_DWORD *)(v3 + 48);
          v47 = *v4;
          return j_exif_log(v44, 2);
        }
        v52 = v4;
        *v15 = 4411201;
        v16 = 19789;
        v10 = (_DWORD *)(v3 + 64);
        v17 = *(_DWORD *)(v3 + 64);
        if ( v17 == 1 )
          v16 = 18761;
        v18 = *v5 + 4;
        goto LABEL_16;
      case 4:
        v13 = (_DWORD *)j_exif_mem_alloc(*(_DWORD *)(v3 + 52), v7);
        *v5 = (int)v13;
        if ( !v13 )
        {
          v44 = *(_DWORD *)(v3 + 48);
          v48 = *v4;
          return j_exif_log(v44, 2);
        }
        LOWORD(v14) = 22097;
        v52 = v4;
LABEL_15:
        HIWORD(v14) = 67;
        *v13 = v14;
        v16 = 0;
        v10 = (_DWORD *)(v3 + 64);
        v17 = *(_DWORD *)(v3 + 64);
        v18 = *v5 + 4;
LABEL_16:
        j_exif_set_sshort(v18, v17, v16);
        v12 = 0x4000;
        v11 = 6;
LABEL_17:
        v19 = v11;
        v51 = v12;
        j_exif_set_sshort(*v5 + v11, *(_DWORD *)(v3 + 64), *(_WORD *)(v3 + 60));
        if ( *(_DWORD *)(v3 + 60) )
        {
          v49 = v10;
          v20 = 0;
          v21 = v19;
          v22 = 0;
          v50 = v19;
          while ( 1 )
          {
            j_exif_set_sshort(
              *v5 + v21 + v20 + 2,
              *(_DWORD *)(v3 + 64),
              *(_DWORD *)(*(_DWORD *)(v3 + 56) + 2 * v20) - v12);
            j_exif_set_sshort(*v5 + v21 + v20 + 4, *(_DWORD *)(v3 + 64), *(_WORD *)(*(_DWORD *)(v3 + 56) + 2 * v20 + 4));
            v23 = *(_DWORD *)(v3 + 64);
            v24 = *(_DWORD *)(*(_DWORD *)(v3 + 56) + 2 * v20 + 8);
            v25 = *v5 + v21 + v20;
            j_exif_set_long();
            v26 = j_exif_format_get_size(*(_DWORD *)(*(_DWORD *)(v3 + 56) + 2 * v20 + 4));
            v28 = *(_DWORD *)(v3 + 56);
            v29 = *(_DWORD *)(v28 + 2 * v20 + 8) * v26;
            if ( v29 <= 0x10000 )
            {
              if ( v29 < 5 )
              {
                v30 = v21 + v20 + 10;
              }
              else
              {
                v30 = *v52;
                v31 = *v52 + v29;
                v32 = j_exif_mem_realloc(*(_DWORD *)(v3 + 52), *v5, v31);
                if ( !v32 )
                {
                  v44 = *(_DWORD *)(v3 + 48);
                  return j_exif_log(v44, 2);
                }
                *v5 = v32;
                *v52 = v31;
                v33 = *(_DWORD *)(v3 + 64);
                v34 = *v5 + v50 + v20;
                j_exif_set_long();
                v21 = v50;
                v28 = *(_DWORD *)(v3 + 56);
                v12 = v51;
              }
              v35 = *(_DWORD *)(v28 + 2 * v20 + 12);
              v36 = *v5 + v30;
              if ( v35 )
                _aeabi_memcpy(v36, v35, v29, v27);
              else
                _aeabi_memset(v36, v29, 0);
            }
            v37 = *(_DWORD *)(v3 + 60);
            ++v22;
            v20 += 12;
            if ( v22 >= v37 )
            {
              v38 = v52;
              v10 = v49;
              v39 = 12 * v37;
              goto LABEL_30;
            }
          }
        }
        v38 = v52;
        v37 = 0;
        v39 = 0;
        v21 = v19;
LABEL_30:
        v40 = v39 + v21;
        v41 = v21 + 2;
        if ( *v38 < (unsigned int)(v40 + 6) )
        {
          j_exif_log(*(_DWORD *)(v3 + 48), 3);
          v37 = *(_DWORD *)(v3 + 60);
        }
        v42 = *v10;
        v43 = v41 + 12 * v37 + *v5;
        result = j_j_j_exif_set_long();
        break;
      default:
        return result;
    }
  }
  return result;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);

//----- (00011C48) --------------------------------------------------------
char *__fastcall mnote_pentax_entry_get_value(int a1, char *a2, int a3)
{
  int v3; // r6@1
  int v4; // r5@1
  char *v5; // r9@1
  signed int v6; // r0@2
  size_t v7; // r8@2
  int v8; // r0@6
  int v9; // r0@8
  int v10; // r1@8
  int v11; // r0@13
  unsigned int v12; // r0@18
  int v13; // r0@20
  int v14; // r4@21
  int v15; // r7@22
  int v16; // r5@23
  signed int v17; // r0@23
  int v18; // r6@25
  unsigned __int8 v19; // vf@25
  signed int v20; // r5@25
  int v21; // r0@32
  int v22; // r1@34
  signed int v23; // r0@34
  int v24; // r0@40
  int v25; // ST04_4@42
  int v26; // r6@44
  char *v27; // r0@44
  const char **v28; // r1@44
  const char **v29; // r2@44
  signed int v30; // r1@46
  int v31; // r1@49
  int v32; // t1@49
  const char *v33; // r1@51
  int v34; // r5@52
  char *v35; // r3@52
  const char **v36; // r2@52
  const char **v37; // r6@52
  int v38; // r1@53
  int v39; // r4@53
  int v40; // r4@56
  signed int v41; // r1@56
  int v42; // r2@59
  int v43; // t1@59
  int v44; // r0@66
  int v45; // r1@68
  int v46; // ST0C_4@68
  int v47; // ST08_4@68
  int v48; // r0@72
  int v49; // r0@74
  int v50; // ST04_4@74
  int v51; // ST08_4@74
  int v52; // ST0C_4@74
  int v53; // r0@75
  int v54; // r7@77
  int v55; // r5@77
  unsigned int v56; // r4@78
  int v57; // r7@81
  int v58; // r5@81
  unsigned int v59; // r4@82
  int v60; // r1@83
  size_t v61; // r2@86
  int v62; // ST04_4@89

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( !a1 )
    return 0;
  _aeabi_memset(a2, a3, 0);
  v6 = *(_DWORD *)v3;
  v7 = v4 - 1;
  if ( *(_DWORD *)v3 < 3584 )
  {
    if ( (unsigned int)v6 > 0x17 )
      goto LABEL_75;
    if ( !((1 << v6) & 0x90389E) )
    {
      if ( v6 == 10 )
      {
        v8 = *(_DWORD *)(v3 + 4);
        if ( v8 == 4 )
        {
          if ( *(_DWORD *)(v3 + 8) == 1 )
          {
            v9 = *(_DWORD *)(v3 + 12);
            v10 = *(_DWORD *)(v3 + 20);
            j_exif_get_long();
          }
        }
        else
        {
          j_exif_format_get_name(v8);
          j_exif_format_get_name(4);
        }
        goto LABEL_90;
      }
      goto LABEL_75;
    }
LABEL_20:
    v13 = *(_DWORD *)(v3 + 4);
    if ( v13 == 3 )
    {
      v14 = *(_DWORD *)(v3 + 8);
      if ( (unsigned int)(v14 - 1) < 2 )
      {
        v15 = j_exif_get_short(*(_DWORD *)(v3 + 12), *(_DWORD *)(v3 + 20));
        if ( v14 == 1 )
        {
          v16 = 0;
          v17 = *(_DWORD *)v3;
          while ( dword_2BA78[67 * v16] != v17 )
          {
            v18 = v16 + 1;
            v19 = __OFSUB__(v16 + 1, v16);
            v20 = 1;
            if ( !v19 )
              v20 = 0;
            if ( v20 )
              goto LABEL_100;
            v16 = v18;
            if ( v18 == 20 )
              goto LABEL_90;
          }
          v26 = 0u;
          v27 = (char *)&dword_2BA78[67 * v16];
          v28 = (const char **)(v27 + 8);
          v29 = (const char **)(v27 + 4);
          while ( *(_DWORD *)&v27[8 * v26 + 4] < v15 )
          {
            v30 = 1;
            if ( !__OFSUB__(v26 + 1, v26) )
              v30 = 0;
            if ( v30 )
              goto LABEL_100;
            v31 = (int)&v27[8 * (v26 + 1)];
            v32 = *(_DWORD *)(v31 + 8);
            v28 = (const char **)(v31 + 8);
            v29 = v28 - 1;
            ++v26;
            if ( !v32 )
              break;
          }
          if ( *v29 != (const char *)v15 )
            goto LABEL_90;
          v33 = *v28;
        }
        else
        {
          j_exif_get_short(*(_DWORD *)(v3 + 12) + 2, *(_DWORD *)(v3 + 20));
          v21 = 0;
          while ( dword_2D074[118 * v21] != *(_DWORD *)v3 )
          {
            v22 = v21 + 1;
            v19 = __OFSUB__(v21 + 1, v21);
            v23 = 1;
            if ( !v19 )
              v23 = 0;
            if ( v23 )
LABEL_100:
              __debugbreak();
            v21 = v22;
            if ( v22 == 2 )
              goto LABEL_90;
          }
          v34 = 0;
          v35 = (char *)&dword_2D074[118 * v21];
          v36 = (const char **)(v35 + 12);
          v37 = (const char **)(v35 + 4);
          while ( 1 )
          {
            v38 = (int)&v35[12 * v34];
            v39 = *(_DWORD *)(v38 + 8);
            if ( v39 >= 0 && (v39 || *(_DWORD *)(v38 + 4) >= v15) )
              break;
            v40 = v34 + 1;
            v41 = 1;
            if ( !__OFSUB__(v34 + 1, v34) )
              v41 = 0;
            if ( v41 )
              goto LABEL_100;
            ++v34;
            v42 = (int)&v35[12 * v40];
            v43 = *(_DWORD *)(v42 + 12);
            v36 = (const char **)(v42 + 12);
            v37 = v36 - 2;
            if ( !v43 )
              goto LABEL_62;
          }
          v40 = v34;
LABEL_62:
          if ( *v37 != (const char *)v15 || *(&dword_2D074[118 * v21 + 2] + 3 * v40) )
            goto LABEL_90;
          v33 = *v36;
        }
        strncpy(v5, v33, v7);
        return v5;
      }
    }
    else
    {
      j_exif_format_get_name(v13);
      j_exif_format_get_name(3);
    }
    goto LABEL_90;
  }
  if ( v6 > 28678 )
  {
    if ( v6 != 28679 )
      goto LABEL_75;
    goto LABEL_20;
  }
  if ( v6 > 0x4000 )
  {
    v12 = v6 - 16385;
    if ( v12 > 0x18 )
      goto LABEL_75;
    if ( !((1 << v12) & 0x1007D81) )
    {
      if ( v12 == 5 )
      {
        v44 = *(_DWORD *)(v3 + 4);
        if ( v44 == 7 )
        {
          if ( *(_DWORD *)(v3 + 8) == 4 )
          {
            j_exif_get_short(*(_DWORD *)(v3 + 12), 0);
            v45 = *(_DWORD *)(v3 + 12);
            v46 = *(_BYTE *)(v45 + 3);
            v47 = *(_BYTE *)(v45 + 2);
          }
        }
        else
        {
          j_exif_format_get_name(v44);
          j_exif_format_get_name(7);
        }
        goto LABEL_90;
      }
      if ( v12 == 6 )
      {
        v48 = *(_DWORD *)(v3 + 4);
        if ( v48 == 7 )
        {
          if ( (unsigned int)(*(_DWORD *)(v3 + 8) - 3) < 2 )
          {
            v49 = *(_DWORD *)(v3 + 12);
            v50 = *(_BYTE *)v49;
            v51 = *(_BYTE *)(v49 + 1);
            v52 = *(_BYTE *)(v49 + 2);
          }
        }
        else
        {
          j_exif_format_get_name(v48);
          j_exif_format_get_name(7);
        }
        goto LABEL_90;
      }
      goto LABEL_75;
    }
    goto LABEL_20;
  }
  if ( (unsigned int)(v6 - 4096) < 2 )
  {
    v11 = *(_DWORD *)(v3 + 4);
    if ( v11 == 7 )
    {
      if ( *(_DWORD *)(v3 + 8) == 4 )
      {
LABEL_86:
        v61 = *(_DWORD *)(v3 + 16);
        if ( v7 < v61 )
          v61 = v4 - 1;
        strncpy(v5, *(const char **)(v3 + 12), v61);
        return v5;
      }
    }
    else
    {
      j_exif_format_get_name(v11);
      j_exif_format_get_name(7);
    }
LABEL_90:
    _snprintf_chk(v5, v7, 0, -1);
    return v5;
  }
  if ( v6 == 3584 )
  {
    v24 = *(_DWORD *)(v3 + 4);
    if ( v24 == 7 )
    {
      if ( *(_DWORD *)(v3 + 8) == 124 )
        v25 = *(_DWORD *)(v3 + 16);
    }
    else
    {
      j_exif_format_get_name(v24);
      j_exif_format_get_name(7);
    }
    goto LABEL_90;
  }
LABEL_75:
  v53 = *(_DWORD *)(v3 + 4);
  if ( v53 != 4 )
  {
    if ( v53 == 3 )
    {
      v54 = *(_DWORD *)(v3 + 12);
      v55 = _strlen_chk(v5, -1);
      if ( *(_DWORD *)(v3 + 8) )
      {
        v56 = 0;
        do
        {
          j_exif_get_short(v54, *(_DWORD *)(v3 + 20));
          _snprintf_chk(&v5[v55], v7 - v55, 0, -1);
          v55 = _strlen_chk(v5, -1);
          ++v56;
          v54 += 2;
        }
        while ( v56 < *(_DWORD *)(v3 + 8) );
      }
      return v5;
    }
    if ( v53 == 2 )
      goto LABEL_86;
    v62 = *(_DWORD *)(v3 + 16);
    goto LABEL_90;
  }
  v57 = *(_DWORD *)(v3 + 12);
  v58 = _strlen_chk(v5, -1);
  if ( *(_DWORD *)(v3 + 8) )
  {
    v59 = 0;
    do
    {
      v60 = *(_DWORD *)(v3 + 20);
      j_exif_get_long();
      _snprintf_chk(&v5[v58], v7 - v58, 0, -1);
      v58 = _strlen_chk(v5, -1);
      ++v59;
      v57 += 4;
    }
    while ( v59 < *(_DWORD *)(v3 + 8) );
  }
  return v5;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 7070: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 707C: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);

//----- (000121BC) --------------------------------------------------------
int __fastcall mnote_pentax_tag_get_name(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_2D600;
  while ( *(int *)((char *)v2 + 0xFFFFFFFC) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x65 )
      return 0;
  }
  return *v2;
}
// 2D600: using guessed type int;

//----- (000121E8) --------------------------------------------------------
int __fastcall mnote_pentax_tag_get_title(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1

  v1 = 0;
  v2 = &dword_2D604;
  while ( *(int *)((char *)v2 + 0xFFFFFFF8) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x65 )
      return 0;
  }
  return *v2;
}
// 2D604: using guessed type int;

//----- (00012214) --------------------------------------------------------
_BYTE *__fastcall mnote_pentax_tag_get_description(int a1)
{
  unsigned int v1; // r2@1
  int *v2; // r1@1
  _BYTE *result; // r0@4

  v1 = 0;
  v2 = &dword_2D608;
  while ( *(int *)((char *)v2 + 0xFFFFFFF4) != a1 )
  {
    ++v1;
    v2 += 4;
    if ( v1 >= 0x65 )
      return 0;
  }
  result = (_BYTE *)*v2;
  if ( *v2 )
  {
    if ( !*result )
      result = &unk_157F8;
  }
  else
  {
    result = &unk_157F8;
  }
  return result;
}
// 2D608: using guessed type int;

//----- (00012264) --------------------------------------------------------
signed int __fastcall sub_12264(int a1, int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // r5@1
  unsigned int v5; // r7@1
  int v6; // r10@1
  int v7; // r4@1
  int v8; // r11@2
  unsigned int v9; // r8@7
  int v10; // r9@7
  int v11; // r0@8
  int v12; // r2@9
  int v13; // r1@10
  signed int result; // r0@10
  int v15; // r3@19
  int v16; // r2@19
  int v17; // r0@19
  int v18; // r1@19
  int v19; // r2@37
  int v20; // r0@39
  int v21; // r1@39
  int v22; // r3@39
  unsigned int v23; // r1@40
  unsigned int v24; // r0@40
  int v25; // r1@42
  int v26; // r6@45
  char v27; // r1@45
  int v29; // r0@50
  unsigned int v35; // r0@51
  int v36; // [sp+4h] [bp-34h]@58
  int v37; // [sp+8h] [bp-30h]@6
  int v38; // [sp+Ch] [bp-2Ch]@22
  int v39; // [sp+10h] [bp-28h]@8

  v4 = a4;
  v5 = a3;
  v6 = a2;
  v7 = a1;
  if ( a3 >= a4 )
    goto LABEL_58;
  v8 = 0;
  do
  {
    v9 = v5 + 1;
    v10 = *(_BYTE *)(v6 + (v5 ^ 3));
    if ( !(v10 & 0x80) )
    {
      sub_12AE0(v7, 13, &v39);
      v11 = 4 * v10;
      if ( v10 & 0x40 )
        v12 = -4 - (v11 & 0xFC) + v39;
      else
        v12 = v11 + v39 + 4;
      v39 = v12;
LABEL_23:
      sub_12B10(v7, 13, v12);
      ++v5;
      continue;
    }
    v13 = v10 & 0xF0;
    result = 9;
    if ( v13 > 159 )
    {
      if ( v13 > 191 )
      {
        if ( v13 == 192 )
        {
          switch ( v10 )
          {
            case 199:
              if ( !*(_BYTE *)(v6 + (v9 ^ 3)) || (unsigned int)*(_BYTE *)(v6 + (v9 ^ 3)) >= 0x10 )
                return 9;
              goto LABEL_55;
            case 192:
            case 193:
            case 194:
            case 195:
            case 196:
            case 197:
              v18 = 3;
              v16 = ((v10 & 7) + 1) | 0xA0000;
              v17 = v7;
              goto LABEL_33;
            case 200:
            case 201:
              v23 = *(_BYTE *)(v6 + (v9 ^ 3));
              v24 = v23 >> 4;
              if ( v10 == 200 )
                v24 = (v23 >> 4) | 0x10;
              v25 = v23 & 0xF;
              if ( (signed int)(v24 + v25) > 31 )
                return 9;
              v19 = (v25 + 1) | (v24 << 16);
              v20 = v7;
              v21 = 1;
              goto LABEL_53;
            case 198:
              v35 = *(_BYTE *)(v6 + (v9 ^ 3));
              if ( (signed int)((v35 & 0xF) + (v35 >> 4)) > 15 )
                return 9;
              v19 = ((v35 & 0xF) + 1) | (v35 >> 4 << 16);
              v20 = v7;
              v21 = 3;
LABEL_53:
              v22 = 5;
LABEL_54:
              sub_1264C(v20, v21, v19, v22);
              goto LABEL_55;
            default:
              return 9;
          }
          return 9;
        }
        if ( v13 != 208 )
          return result;
        if ( v10 & 8 )
          return 9;
        v18 = 1;
        v16 = ((v10 & 7) + 1) | 0x80000;
        v17 = v7;
LABEL_33:
        v15 = 5;
      }
      else
      {
        if ( v13 != 160 )
        {
          if ( v13 != 176 )
            return result;
          result = 9;
          switch ( v10 )
          {
            case 177:
              if ( v9 >= v4 )
                return 9;
              v19 = *(_BYTE *)(v6 + (v9 ^ 3));
              result = 9;
              if ( !*(_BYTE *)(v6 + (v9 ^ 3)) || v19 & 0xF0 )
                return result;
              v20 = v7;
              v21 = 0;
              v22 = 0;
              goto LABEL_54;
            case 178:
              if ( v9 >= v4 )
                return 9;
              v5 += 2;
              v26 = 0;
              v27 = 0;
              break;
            case 179:
              v22 = 1;
              v29 = *(_BYTE *)(v6 + (v9 ^ 3));
              _R1 = v29 << 12;
              __asm { UXTB16.W        R1, R1 }
              v19 = ((v29 & 0xF) + 1) | _R1;
              v20 = v7;
              v21 = 1;
              goto LABEL_54;
            case 176:
              goto LABEL_57;
            case 180:
            case 181:
            case 182:
            case 183:
              return result;
            default:
              v18 = 1;
              v15 = 1;
              v16 = ((v10 & 7) + 1) | 0x80000;
              v17 = v7;
              goto LABEL_34;
          }
          while ( 1 )
          {
            v26 |= (*(_BYTE *)(v6 + ((v5 - 1) ^ 3)) & 0x7F) << v27;
            if ( !(*(_BYTE *)(v6 + ((v5 - 1) ^ 3)) & 0x80) )
              break;
            _CF = v5 >= v4;
            v27 += 7;
            result = 9;
            ++v5;
            if ( _CF )
              return result;
          }
          sub_12AE0(v7, 13, &v37);
          v37 += 4 * v26 + 516;
          sub_12B10(v7, 13, v37);
          continue;
        }
        v15 = 0;
        v16 = ((16 << ((*(_BYTE *)(v6 + (v5 ^ 3)) & 7) + 1)) - 16) | (*(_BYTE *)(v6 + (v5 ^ 3)) << 11) & 0x4000;
        v17 = v7;
        v18 = 0;
      }
LABEL_34:
      sub_1264C(v17, v18, v16, v15);
      ++v5;
      continue;
    }
    if ( v13 != 128 )
    {
      if ( v13 != 144 )
        return result;
      if ( (v10 & 0xF | 2) == 15 )
        return 9;
      sub_12AE0(v7, v10 & 0xF, &v38);
      v12 = v38;
      goto LABEL_23;
    }
    if ( v9 >= v4 || !((unsigned __int16)((_WORD)v10 << 12) | 16 * *(_BYTE *)(v6 + ((v5 + 1) ^ 3))) )
      return 9;
    sub_1264C(v7, 0, (unsigned __int16)((_WORD)v10 << 12) | 16 * *(_BYTE *)(v6 + (v9 ^ 3)), 0);
    v8 |= (((_WORD)v10 << 12) & 0x8000u) >> 15;
LABEL_55:
    v5 += 2;
  }
  while ( v5 < v4 );
LABEL_57:
  if ( v8 & 1 )
    return 8;
LABEL_58:
  sub_12AE0(v7, 14, &v36);
  sub_12B10(v7, 15, v36);
  return 8;
}

//----- (000125A8) --------------------------------------------------------
signed int __fastcall sub_125A8(int a1, int a2, unsigned int a3, int a4, int *a5)
{
  int v5; // r5@1
  int v6; // r4@1
  signed int result; // r0@2
  int v8; // r2@4
  int v9; // r0@4
  int v10; // r1@4
  __int64 v11; // r2@10
  int v12; // r1@10

  v5 = a3;
  v6 = a1;
  switch ( a2 )
  {
    case 0:
      result = 2;
      if ( a3 > 0xF || a4 )
        return result;
      v8 = *a5;
      v9 = v6;
      v10 = v5;
      goto LABEL_14;
    case 1:
      if ( a4 == 5 )
      {
        if ( a3 <= 0x1F )
          goto LABEL_21;
        return 2;
      }
      if ( a4 != 1 || a3 > 0xF )
        return 2;
      sub_12BFC(a1);
LABEL_21:
      v11 = *(_QWORD *)a5;
      v12 = v5 + 256;
LABEL_22:
      result = sub_12B84(v6, v12, v11, SHIDWORD(v11));
LABEL_23:
      if ( result )
        result = 2;
      return result;
    case 3:
      result = 2;
      if ( a3 > 0x1F || a4 != 5 )
        return result;
      v11 = *(_QWORD *)a5;
      v12 = v5 + 112;
      goto LABEL_22;
    case 4:
      result = 2;
      if ( a3 > 3 || a4 )
        return result;
      v8 = *a5;
      v10 = v5 + 192;
      v9 = v6;
LABEL_14:
      result = sub_12B10(v9, v10, v8);
      goto LABEL_23;
    default:
      sub_12984(
        (int)"_Unwind_VRS_Result _Unwind_VRS_Set(_Unwind_Context *, _Unwind_VRS_RegClass, uint32_t, _Unwind_VRS_DataRepre"
             "sentation, void *)",
        831,
        (int)"unsupported register class");
      return result;
  }
}

//----- (0001264C) --------------------------------------------------------
signed int __fastcall sub_1264C(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // r5@1
  int v5; // r7@1
  unsigned int v6; // r6@1
  int v7; // r8@1
  int v8; // r4@4
  unsigned int v9; // r7@4
  int *v10; // r0@6
  signed int v11; // r0@6
  signed int v12; // r1@6
  signed int v13; // r2@6
  signed int result; // r0@14
  unsigned int v15; // r4@18
  unsigned int v16; // r6@18
  int v17; // r0@19
  int v18; // r2@19
  int v19; // r0@19
  int v20; // r2@22
  int v21; // [sp+8h] [bp-38h]@19
  int v22; // [sp+Ch] [bp-34h]@19
  int v23; // [sp+14h] [bp-2Ch]@16
  int v24; // [sp+18h] [bp-28h]@6
  int *v25; // [sp+1Ch] [bp-24h]@3

  v4 = a2;
  v5 = a4;
  v6 = a3;
  v7 = a1;
  switch ( a2 )
  {
    case 0:
    case 4:
      if ( a4 || sub_12AE0(a1, 13, &v25) )
        return 2;
      v8 = 0;
      v9 = 0;
      do
      {
        if ( (1 << v9) & v6 )
        {
          v10 = v25;
          ++v25;
          v24 = *v10;
          v11 = sub_125A8(v7, v4, v9, 0, &v24);
          v12 = 0;
          v13 = 0;
          if ( v9 == 13 )
            v12 = 1;
          if ( !v4 )
            v13 = 1;
          if ( v11 )
            return 2;
          v8 |= v13 & v12;
        }
        ++v9;
      }
      while ( v9 < 0x10 );
      if ( v8 & 1 )
        return 0;
      v20 = (int)v25;
      goto LABEL_28;
    case 1:
    case 3:
      if ( (a4 | 4) != 5 || sub_12AE0(a1, 13, &v23) )
        return 2;
      if ( !(_WORD)v6 )
        goto LABEL_21;
      v15 = v6 >> 16;
      v16 = (v6 >> 16) + v6;
      break;
    default:
      sub_12984(
        (int)"_Unwind_VRS_Result _Unwind_VRS_Pop(_Unwind_Context *, _Unwind_VRS_RegClass, uint32_t, _Unwind_VRS_DataRepresentation)",
        965,
        (int)"unsupported register class");
      return result;
  }
  do
  {
    v17 = v23;
    v23 += 4;
    v18 = *(_DWORD *)v17;
    v23 = v17 + 8;
    v19 = *(_DWORD *)(v17 + 4);
    v21 = v18;
    v22 = v19;
    if ( sub_125A8(v7, v4, v15, v5, &v21) )
      return 2;
    ++v15;
  }
  while ( v15 < v16 );
LABEL_21:
  if ( v5 == 1 )
  {
    v20 = v23 + 4;
    v23 += 4;
  }
  else
  {
    v20 = v23;
  }
LABEL_28:
  result = sub_12B10(v7, 13, v20);
  if ( result )
    result = 2;
  return result;
}

//----- (00012770) --------------------------------------------------------
signed int __fastcall sub_12770(int a1, int a2, int a3)
{
  int v3; // r0@1
  int v4; // r1@1
  unsigned int *v5; // r12@1
  int v6; // r3@1
  unsigned int v7; // r3@4
  unsigned int v8; // r2@4

  v3 = a2;
  v4 = a3;
  v5 = *(unsigned int **)(v3 + 76);
  v6 = (*v5 >> 24) & 0xF;
  if ( v6 )
  {
    if ( v6 != 1 && v6 != 3 )
      return 9;
    v7 = 4 * ((*v5 >> 16) & 0xFF) + 4;
    v8 = 2;
  }
  else
  {
    v8 = 1;
    v7 = 4;
  }
  if ( !v5 || !(*(_BYTE *)(v3 + 80) & 1) && *(unsigned int *)((char *)v5 + v7) )
    return 9;
  return sub_12264(v4, (int)v5, v8, v7);
}

//----- (000127C4) --------------------------------------------------------
void sub_127C4()
{
  JUMPOUT(&loc_12778);
}

//----- (000127CC) --------------------------------------------------------
void sub_127CC()
{
  JUMPOUT(&loc_12778);
}

//----- (00012868) --------------------------------------------------------
signed int __fastcall sub_12868(int a1, int a2, char a3)
{
  int v3; // r4@1
  char v4; // r10@1
  signed int i; // r6@1
  signed int v6; // r7@3
  int v7; // r0@8
  int (__fastcall *v8)(signed int, int, char *); // r3@11
  int v9; // r0@12
  int v11; // [sp+0h] [bp-4B0h]@17
  int v12; // [sp+4h] [bp-4ACh]@10
  int (__fastcall *v13)(signed int, int, char *); // [sp+10h] [bp-4A0h]@11
  int v14; // [sp+18h] [bp-498h]@12
  int v15; // [sp+24h] [bp-48Ch]@12
  int v16; // [sp+2Ch] [bp-484h]@10
  char v17; // [sp+30h] [bp-480h]@1

  v3 = a2;
  v4 = a3;
  sub_12A90((int)&v17, a1);
  for ( i = 1; ; --i )
  {
    v6 = 1;
    if ( v4 & 1 )
    {
      v6 = 2;
      if ( !i )
      {
        sub_12B10((int)&v17, -1, *(_DWORD *)(v3 + 16));
        v4 = 0;
      }
    }
    v7 = sub_12BBC((int)&v17);
    if ( !v7 )
      break;
    if ( v7 < 0 )
      return 2;
    sub_12AE0((int)&v17, -2, &v16);
    if ( sub_12BC4((int)&v17, (int)&v12) )
      return 2;
    v8 = v13;
    if ( v13 )
    {
      *(_DWORD *)(v3 + 72) = v12;
      *(_DWORD *)(v3 + 76) = v15;
      *(_DWORD *)(v3 + 80) = v14;
      v9 = v8(v6, v3, &v17);
      if ( v9 == 7 )
      {
        sub_12AE0((int)&v17, -1, &v11);
        *(_DWORD *)(v3 + 16) = v11;
        sub_12BE4((int)&v17);
        return 2;
      }
      if ( v9 == 9 )
        abort();
      if ( v9 != 8 )
        return 2;
      if ( v16 == *(_DWORD *)(v3 + 32) )
        sub_12984(
          (int)"_Unwind_Reason_Code unwind_phase2(unw_context_t *, _Unwind_Exception *, bool)",
          642,
          (int)"during phase1 personality function said it would stop here, but now in phase2 it did not stop here");
    }
  }
  return 5;
}

//----- (00012984) --------------------------------------------------------
void __fastcall sub_12984(int a1, int a2, int a3)
{
  fprintf(v0, "libunwind: %s %s:%d - %s\n", a1, "external/libcxxabi/src/Unwind/Unwind-EHABI.cpp", a2, a3);
  abort();
}

//----- (00012A08) --------------------------------------------------------
int __fastcall sub_12A08(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@0
  int v6; // r5@0
  int v7; // r6@0
  int v8; // r7@0
  int v9; // r8@0
  int v10; // r9@0
  int v11; // r10@0
  int v12; // r11@0
  int v13; // r12@0
  int v14; // lr@0

  *(_DWORD *)a1 = a1;
  *(_DWORD *)(a1 + 4) = a2;
  *(_DWORD *)(a1 + 8) = a3;
  *(_DWORD *)(a1 + 12) = a4;
  *(_DWORD *)(a1 + 16) = v5;
  *(_DWORD *)(a1 + 20) = v6;
  *(_DWORD *)(a1 + 24) = v7;
  *(_DWORD *)(a1 + 28) = v8;
  *(_DWORD *)(a1 + 32) = v9;
  *(_DWORD *)(a1 + 36) = v10;
  *(_DWORD *)(a1 + 40) = v11;
  *(_DWORD *)(a1 + 44) = v12;
  *(_DWORD *)(a1 + 48) = v13;
  *(_DWORD *)(a1 + 52) = &a5;
  *(_DWORD *)(a1 + 56) = v14;
  *(_DWORD *)(a1 + 60) = v14;
  return 0;
}

//----- (00012A20) --------------------------------------------------------
int __fastcall sub_12A20(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D0-D15} }
  return result;
}

//----- (00012A28) --------------------------------------------------------
int __fastcall sub_12A28(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D0-D15} }
  return result;
}

//----- (00012A30) --------------------------------------------------------
int __fastcall sub_12A30(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D16-D31} }
  return result;
}

//----- (00012A38) --------------------------------------------------------
void sub_12A38()
{
  __asm
  {
    STCL            p1, c0, [R0],#8
    STCL            p1, c1, [R0],#8
    STCL            p1, c2, [R0],#8
    STCL            p1, c3, [R0],#8
    STCL            p1, c4, [R0],#8
    STCL            p1, c5, [R0],#8
    STCL            p1, c6, [R0],#8
    STCL            p1, c7, [R0],#8
    STCL            p1, c8, [R0],#8
    STCL            p1, c9, [R0],#8
    STCL            p1, c10, [R0],#8
    STCL            p1, c11, [R0],#8
    STCL            p1, c12, [R0],#8
    STCL            p1, c13, [R0],#8
    STCL            p1, c14, [R0],#8
    STCL            p1, c15, [R0],#8
  }
}

//----- (00012A7C) --------------------------------------------------------
void sub_12A7C()
{
  __asm
  {
    STC2            p1, c8, [R0],#4
    STC2            p1, c9, [R0],#4
    STC2            p1, c10, [R0],#4
    STC2            p1, c11, [R0],#4
  }
}

//----- (00012A90) --------------------------------------------------------
int __fastcall sub_12A90(int a1, int a2)
{
  int v2; // r4@1

  v2 = a1;
  *(_DWORD *)a1 = &unk_2DC54;
  *(_DWORD *)(a1 + 4) = &unk_2E004;
  *(_BYTE *)(a1 + 76) = 0;
  *(_DWORD *)(a1 + 72) = 0;
  _aeabi_memcpy(a1 + 8, a2, 64, 568);
  _aeabi_memset(v2 + 80, 450, 0);
  sub_13014(v2, 0);
  return 0;
}
// 6D10: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);

//----- (00012AE0) --------------------------------------------------------
signed int __fastcall sub_12AE0(int a1, int a2, _DWORD *a3)
{
  int v3; // r6@1
  _DWORD *v4; // r4@1
  int v5; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 8))() == 1 )
  {
    *v4 = (*(int (__fastcall **)(int, int))(*(_DWORD *)v3 + 12))(v3, v5);
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (00012B10) --------------------------------------------------------
signed int __fastcall sub_12B10(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r5@1
  signed int v6; // r5@3

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 8))() == 1 )
  {
    (*(void (__fastcall **)(int, int, int))(*(_DWORD *)v3 + 16))(v3, v5, v4);
    if ( v5 == -1 )
    {
      v6 = 0;
      (*(void (__fastcall **)(int, _DWORD))(*(_DWORD *)v3 + 52))(v3, 0);
    }
    else
    {
      v6 = 0;
    }
  }
  else
  {
    v6 = -6542;
  }
  return v6;
}

//----- (00012B54) --------------------------------------------------------
signed int __fastcall sub_12B54(int a1, int a2, _QWORD *a3)
{
  int v3; // r6@1
  _QWORD *v4; // r4@1
  int v5; // r5@1
  __int64 v6; // r0@2
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 20))() == 1 )
  {
    LODWORD(v6) = (*(int (__fastcall **)(int, int))(*(_DWORD *)v3 + 24))(v3, v5);
    *v4 = v6;
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (00012B84) --------------------------------------------------------
signed int __fastcall sub_12B84(int a1, int a2, int a3, int a4)
{
  int v4; // r7@1
  int v5; // r5@1
  int v6; // r6@1
  int v7; // r8@1
  signed int result; // r0@2

  v4 = a1;
  v5 = a3;
  v6 = a2;
  v7 = a4;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 20))() == 1 )
  {
    (*(void (__fastcall **)(int, int, int, int))(*(_DWORD *)v4 + 28))(v4, v6, v5, v7);
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (00012BBC) --------------------------------------------------------
int __fastcall sub_12BBC(int a1)
{
  return (*(int (**)(void))(*(_DWORD *)a1 + 32))();
}

//----- (00012BC4) --------------------------------------------------------
signed int __fastcall sub_12BC4(int a1, int a2)
{
  int v2; // r4@1
  signed int result; // r0@1

  v2 = a2;
  (*(void (**)(void))(*(_DWORD *)a1 + 36))();
  result = 0;
  if ( !*(_DWORD *)(v2 + 4) )
    result = -6549;
  return result;
}

//----- (00012BE4) --------------------------------------------------------
signed int __fastcall sub_12BE4(int a1)
{
  (*(void (**)(void))(*(_DWORD *)a1 + 40))();
  return -6540;
}

//----- (00012BFC) --------------------------------------------------------
int __fastcall sub_12BFC(int a1)
{
  return (*(int (**)(void))(*(_DWORD *)a1 + 60))();
}

//----- (00013014) --------------------------------------------------------
int __fastcall sub_13014(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  unsigned int v4; // r5@1
  int result; // r0@5
  int v6; // [sp+4h] [bp-1Ch]@3
  int v7; // [sp+8h] [bp-18h]@3
  int v8; // [sp+Ch] [bp-14h]@1

  v2 = a1;
  v3 = a2;
  v4 = (*(int (**)(void))(*(_DWORD *)a1 + 12))() & 0xFFFFFFFE;
  v8 = 0;
  if ( v3 )
    --v4;
  v6 = _gnu_Unwind_Find_exidx(v4, &v8);
  v7 = v8;
  if ( !v6 || !v8 || (result = ((int (__fastcall *)(int, unsigned int, int *))sub_130F4)(v2, v4, &v6)) == 0 )
  {
    result = 1;
    *(_BYTE *)(v2 + 528) = 1;
  }
  return result;
}
// 72EC: using guessed type int __fastcall _gnu_Unwind_Find_exidx(_DWORD, _DWORD);
// 130F4: using guessed type int sub_130F4();

//----- (00013070) --------------------------------------------------------
void __fastcall sub_13070(int a1, int a2, int a3, int a4)
{
  fprintf(v0, "libunwind: %s %s:%d - %s\n", a1, a2, a3, a4);
  abort();
}

//----- (000130A4) --------------------------------------------------------
int __fastcall sub_130A4(int a1)
{
  int v1; // r4@1
  int v2; // r0@2
  int result; // r0@9

  v1 = a1;
  if ( *(_BYTE *)(a1 + 65) )
  {
    v2 = a1 + 72;
    if ( *(_BYTE *)(v1 + 64) )
      sub_13978(v2);
    else
      sub_13970(v2);
  }
  if ( *(_BYTE *)(v1 + 66) )
    sub_13980(v1 + 208);
  if ( *(_BYTE *)(v1 + 67) )
    sub_13988((_DWORD *)(v1 + 336));
  result = *(_BYTE *)(v1 + 68);
  if ( *(_BYTE *)(v1 + 68) )
    result = sub_13BE0((_DWORD *)(v1 + 464));
  return result;
}

//----- (00013284) --------------------------------------------------------
int __fastcall sub_13284(int result, int a2, int a3, _DWORD *a4, int a5, int a6, int a7, _DWORD *a8)
{
  unsigned int v8; // r4@1
  unsigned int v9; // r5@2
  int v10; // r6@3

  v8 = a5 - a2;
  while ( 1 )
  {
    v9 = v8;
    if ( !v8 )
      break;
    v10 = a2 + (v8 >> 1);
    v8 >>= 1;
    if ( *a8 >= *a4 + 8 * v10 + (2 * *(_DWORD *)(*a4 + 8 * v10) & 0x80000000 | *(_DWORD *)(*a4 + 8 * v10)) )
    {
      v8 = v9 - 1 - v8;
      a2 = v10 + 1;
    }
  }
  *(_DWORD *)result = a2;
  *(_DWORD *)(result + 4) = a3;
  *(_DWORD *)(result + 8) = a4;
  return result;
}

//----- (00013970) --------------------------------------------------------
int __fastcall sub_13970(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D0-D15} }
  return result;
}

//----- (00013978) --------------------------------------------------------
int __fastcall sub_13978(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D0-D15} }
  return result;
}

//----- (00013980) --------------------------------------------------------
int __fastcall sub_13980(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D16-D31} }
  return result;
}

//----- (00013988) --------------------------------------------------------
int __fastcall sub_13988(_DWORD *a1)
{
  int *v5; // r0@1
  int result; // r0@1

  _T1 = *a1;
  v5 = a1 + 2;
  __asm { LDCL            p1, c0, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c1, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c2, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c3, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c4, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c5, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c6, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c7, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c8, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c9, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c10, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c11, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c12, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c13, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c14, [R0],#8 }
  _T1 = *v5;
  result = (int)(v5 + 2);
  __asm { LDCL            p1, c15, [R0],#8 }
  return result;
}

//----- (000139CC) --------------------------------------------------------
int __fastcall sub_139CC(_DWORD *a1)
{
  int *v5; // r0@1
  int result; // r0@1

  _T1 = *a1;
  v5 = a1 + 1;
  __asm { LDC2            p1, c8, [R0],#4 }
  _T1 = *v5;
  ++v5;
  __asm { LDC2            p1, c9, [R0],#4 }
  _T1 = *v5;
  ++v5;
  __asm { LDC2            p1, c10, [R0],#4 }
  _T1 = *v5;
  result = (int)(v5 + 1);
  __asm { LDC2            p1, c11, [R0],#4 }
  return result;
}

//----- (000139E0) --------------------------------------------------------
int __fastcall j_j_j_exif_content_free(int result)
{
  return j_j_exif_content_free(result);
}

//----- (000139E4) --------------------------------------------------------
int __fastcall j_j_exif_content_free(int result)
{
  return j_exif_content_free(result);
}

//----- (000139F0) --------------------------------------------------------
int __fastcall j_j_j_exif_mem_unref(int result)
{
  return j_j_exif_mem_unref(result);
}

//----- (000139F4) --------------------------------------------------------
int __fastcall j_j_exif_mem_unref(int result)
{
  return j_exif_mem_unref(result);
}

//----- (00013A00) --------------------------------------------------------
int __fastcall j_j_j_exif_entry_ref(int result)
{
  return j_j_exif_entry_ref(result);
}

//----- (00013A04) --------------------------------------------------------
int __fastcall j_j_exif_entry_ref(int result)
{
  return j_exif_entry_ref(result);
}

//----- (00013A10) --------------------------------------------------------
int __fastcall j_j_j_exif_entry_unref(int result)
{
  return j_j_exif_entry_unref(result);
}

//----- (00013A14) --------------------------------------------------------
int __fastcall j_j_exif_entry_unref(int result)
{
  return j_exif_entry_unref(result);
}

//----- (00013A20) --------------------------------------------------------
_DWORD *__fastcall j_j_j_exif_mem_ref_0(_DWORD *result)
{
  return j_j_exif_mem_ref_0(result);
}

//----- (00013A24) --------------------------------------------------------
_DWORD *__fastcall j_j_exif_mem_ref_0(_DWORD *result)
{
  return j_exif_mem_ref_0(result);
}

//----- (00013A30) --------------------------------------------------------
int __fastcall j_j_j_exif_data_fix(int result)
{
  return j_j_exif_data_fix(result);
}

//----- (00013A34) --------------------------------------------------------
int __fastcall j_j_exif_data_fix(int result)
{
  return j_exif_data_fix(result);
}

//----- (00013A40) --------------------------------------------------------
int j_j_j_exif_set_long()
{
  return j_j_exif_set_long();
}

//----- (00013A44) --------------------------------------------------------
int j_j_exif_set_long()
{
  return j_exif_set_long();
}

//----- (00013A50) --------------------------------------------------------
int __fastcall j_j_j_exif_data_free(int result)
{
  return j_j_exif_data_free(result);
}

//----- (00013A54) --------------------------------------------------------
int __fastcall j_j_exif_data_free(int result)
{
  return j_exif_data_free(result);
}

//----- (00013A60) --------------------------------------------------------
int __fastcall j_j___aeabi_memcpy(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  return j___aeabi_memcpy(a1, a2, a3, a4, a5, a6, a7);
}

//----- (00013A64) --------------------------------------------------------
int __fastcall j___aeabi_memcpy(int a1, int a2, int a3, int a4, int a5, int a6, int a7)
{
  return _aeabi_memcpy(a1, a2, a3, a4);
}

//----- (00013A70) --------------------------------------------------------
int __fastcall j_j_j_exif_entry_free(int result)
{
  return j_j_exif_entry_free(result);
}

//----- (00013A74) --------------------------------------------------------
int __fastcall j_j_exif_entry_free(int result)
{
  return j_exif_entry_free(result);
}

//----- (00013A80) --------------------------------------------------------
int __fastcall j_j_j_exif_set_sshort(int result, int a2, __int16 a3)
{
  return j_j_exif_set_sshort(result, a2, a3);
}

//----- (00013A84) --------------------------------------------------------
int __fastcall j_j_exif_set_sshort(int result, int a2, __int16 a3)
{
  return j_exif_set_sshort(result, a2, a3);
}

//----- (00013A90) --------------------------------------------------------
int __fastcall j_j_j_exif_set_srational_0(int result, int a2, unsigned int a3, unsigned int a4)
{
  return j_j_exif_set_srational_0(result, a2, a3, a4);
}

//----- (00013A94) --------------------------------------------------------
int __fastcall j_j_exif_set_srational_0(int result, int a2, unsigned int a3, unsigned int a4)
{
  return j_exif_set_srational_0(result, a2, a3, a4);
}

//----- (00013AA0) --------------------------------------------------------
int __fastcall j_j_j_exif_log_free(int result)
{
  return j_j_exif_log_free(result);
}

//----- (00013AA4) --------------------------------------------------------
int __fastcall j_j_exif_log_free(int result)
{
  return j_exif_log_free(result);
}

//----- (00013AB0) --------------------------------------------------------
void *j_j_calloc(size_t nmemb, size_t size)
{
  return j_calloc(nmemb, size);
}

//----- (00013AB4) --------------------------------------------------------
void *j_calloc(size_t nmemb, size_t size)
{
  return calloc(nmemb, size);
}

//----- (00013AC0) --------------------------------------------------------
void *j_j_realloc(void *ptr, size_t size)
{
  return j_realloc(ptr, size);
}

//----- (00013AC4) --------------------------------------------------------
void *j_realloc(void *ptr, size_t size)
{
  return realloc(ptr, size);
}

//----- (00013AD0) --------------------------------------------------------
void j_j_free(void *ptr)
{
  j_free(ptr);
}

//----- (00013AD4) --------------------------------------------------------
void j_free(void *ptr)
{
  free(ptr);
}

//----- (00013AE0) --------------------------------------------------------
_DWORD *__fastcall j_j_j_exif_mem_ref(_DWORD *result)
{
  return j_j_exif_mem_ref(result);
}

//----- (00013AE4) --------------------------------------------------------
_DWORD *__fastcall j_j_exif_mem_ref(_DWORD *result)
{
  return j_exif_mem_ref(result);
}

//----- (00013AF0) --------------------------------------------------------
int __fastcall j_j_j_exif_get_slong(int a1, int a2)
{
  return j_j_exif_get_slong(a1, a2);
}

//----- (00013AF4) --------------------------------------------------------
int __fastcall j_j_exif_get_slong(int a1, int a2)
{
  return j_exif_get_slong(a1, a2);
}

//----- (00013B00) --------------------------------------------------------
int __fastcall j_j_j_exif_set_slong(int result, int a2, unsigned int a3)
{
  return j_j_exif_set_slong(result, a2, a3);
}

//----- (00013B04) --------------------------------------------------------
int __fastcall j_j_exif_set_slong(int result, int a2, unsigned int a3)
{
  return j_exif_set_slong(result, a2, a3);
}

//----- (00013B10) --------------------------------------------------------
int __fastcall j_j_j_mnote_olympus_tag_get_name(int a1)
{
  return j_j_mnote_olympus_tag_get_name(a1);
}

//----- (00013B14) --------------------------------------------------------
int __fastcall j_j_mnote_olympus_tag_get_name(int a1)
{
  return j_mnote_olympus_tag_get_name(a1);
}

//----- (00013B20) --------------------------------------------------------
int __fastcall j_j_j_mnote_olympus_tag_get_title(int a1)
{
  return j_j_mnote_olympus_tag_get_title(a1);
}

//----- (00013B24) --------------------------------------------------------
int __fastcall j_j_mnote_olympus_tag_get_title(int a1)
{
  return j_mnote_olympus_tag_get_title(a1);
}

//----- (00013B30) --------------------------------------------------------
_BYTE *__fastcall j_j_j_mnote_olympus_tag_get_description(int a1)
{
  return j_j_mnote_olympus_tag_get_description(a1);
}

//----- (00013B34) --------------------------------------------------------
_BYTE *__fastcall j_j_mnote_olympus_tag_get_description(int a1)
{
  return j_mnote_olympus_tag_get_description(a1);
}

//----- (00013B40) --------------------------------------------------------
char *__fastcall j_j_j_mnote_olympus_entry_get_value(int a1, char *a2, int a3)
{
  return j_j_mnote_olympus_entry_get_value(a1, a2, a3);
}

//----- (00013B44) --------------------------------------------------------
char *__fastcall j_j_mnote_olympus_entry_get_value(int a1, char *a2, int a3)
{
  return j_mnote_olympus_entry_get_value(a1, a2, a3);
}

//----- (00013B50) --------------------------------------------------------
int __fastcall j_j_j_mnote_fuji_tag_get_name(int a1)
{
  return j_j_mnote_fuji_tag_get_name(a1);
}

//----- (00013B54) --------------------------------------------------------
int __fastcall j_j_mnote_fuji_tag_get_name(int a1)
{
  return j_mnote_fuji_tag_get_name(a1);
}

//----- (00013B60) --------------------------------------------------------
int __fastcall j_j_j_mnote_fuji_tag_get_title(int a1)
{
  return j_j_mnote_fuji_tag_get_title(a1);
}

//----- (00013B64) --------------------------------------------------------
int __fastcall j_j_mnote_fuji_tag_get_title(int a1)
{
  return j_mnote_fuji_tag_get_title(a1);
}

//----- (00013B70) --------------------------------------------------------
_BYTE *__fastcall j_j_j_mnote_fuji_tag_get_description(int a1)
{
  return j_j_mnote_fuji_tag_get_description(a1);
}

//----- (00013B74) --------------------------------------------------------
_BYTE *__fastcall j_j_mnote_fuji_tag_get_description(int a1)
{
  return j_mnote_fuji_tag_get_description(a1);
}

//----- (00013B80) --------------------------------------------------------
char *__fastcall j_j_j_mnote_fuji_entry_get_value(int a1, char *a2, int a3)
{
  return j_j_mnote_fuji_entry_get_value(a1, a2, a3);
}

//----- (00013B84) --------------------------------------------------------
char *__fastcall j_j_mnote_fuji_entry_get_value(int a1, char *a2, int a3)
{
  return j_mnote_fuji_entry_get_value(a1, a2, a3);
}

//----- (00013B90) --------------------------------------------------------
int __fastcall j_j_j_mnote_pentax_tag_get_name(int a1)
{
  return j_j_mnote_pentax_tag_get_name(a1);
}

//----- (00013B94) --------------------------------------------------------
int __fastcall j_j_mnote_pentax_tag_get_name(int a1)
{
  return j_mnote_pentax_tag_get_name(a1);
}

//----- (00013BA0) --------------------------------------------------------
int __fastcall j_j_j_mnote_pentax_tag_get_title(int a1)
{
  return j_j_mnote_pentax_tag_get_title(a1);
}

//----- (00013BA4) --------------------------------------------------------
int __fastcall j_j_mnote_pentax_tag_get_title(int a1)
{
  return j_mnote_pentax_tag_get_title(a1);
}

//----- (00013BB0) --------------------------------------------------------
_BYTE *__fastcall j_j_j_mnote_pentax_tag_get_description(int a1)
{
  return j_j_mnote_pentax_tag_get_description(a1);
}

//----- (00013BB4) --------------------------------------------------------
_BYTE *__fastcall j_j_mnote_pentax_tag_get_description(int a1)
{
  return j_mnote_pentax_tag_get_description(a1);
}

//----- (00013BC0) --------------------------------------------------------
char *__fastcall j_j_j_mnote_pentax_entry_get_value(int a1, char *a2, int a3)
{
  return j_j_mnote_pentax_entry_get_value(a1, a2, a3);
}

//----- (00013BC4) --------------------------------------------------------
char *__fastcall j_j_mnote_pentax_entry_get_value(int a1, char *a2, int a3)
{
  return j_mnote_pentax_entry_get_value(a1, a2, a3);
}

//----- (00013BD0) --------------------------------------------------------
void sub_13BD0()
{
  sub_13BD4();
}

//----- (00013BD4) --------------------------------------------------------
void sub_13BD4()
{
  JUMPOUT(sub_1395C);
}
// 1395C: using guessed type int sub_1395C();

//----- (00013BE0) --------------------------------------------------------
int __fastcall sub_13BE0(_DWORD *a1)
{
  return sub_13BE4(a1);
}

//----- (00013BE4) --------------------------------------------------------
int __fastcall sub_13BE4(_DWORD *a1)
{
  return sub_139CC(a1);
}

// ALL OK, 378 function(s) have been successfully decompiled
