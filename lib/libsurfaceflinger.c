/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

// int __fastcall _cxa_finalize(_DWORD); weak
// int __fastcall _cxa_atexit(_DWORD, _DWORD, _DWORD); weak
// _DWORD android::RefBase::RefBase(android::RefBase *this); idb
// _DWORD android::ISurfaceComposerClient::ISurfaceComposerClient(android::ISurfaceComposerClient *this); idb
// _DWORD android::BBinder::BBinder(android::BBinder *this); idb
// _DWORD __cdecl android::RefBase::incStrong(android::RefBase *this, const void *); idb
// _DWORD __cdecl android::SortedVectorImpl::SortedVectorImpl(android::SortedVectorImpl *this, unsigned int, unsigned int); idb
// int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutexattr_t *mutexattr);
// _DWORD __cdecl android::RefBase::weakref_type::attemptIncStrong(android::RefBase::weakref_type *this, const void *); idb
// _DWORD __cdecl android::RefBase::decStrong(android::RefBase *this, const void *); idb
// int pthread_mutex_destroy(pthread_mutex_t *mutex);
// _DWORD __cdecl android::RefBase::weakref_type::decWeak(android::RefBase::weakref_type *this, const void *); idb
// _DWORD android::VectorImpl::finish_vector(android::VectorImpl *this); idb
// _DWORD __cdecl android::SortedVectorImpl::~SortedVectorImpl(android::SortedVectorImpl *this); idb
// _DWORD __cdecl android::BBinder::~BBinder(android::BBinder *this); idb
// _DWORD __cdecl android::ISurfaceComposerClient::~ISurfaceComposerClient(android::ISurfaceComposerClient *this); idb
// _DWORD __cdecl android::RefBase::~RefBase(android::RefBase *this); idb
// void __cdecl operator delete(void *); idb
// int pthread_mutex_lock(pthread_mutex_t *mutex);
// _DWORD __cdecl android::RefBase::createWeak(android::RefBase *this, const void *); idb
// _DWORD __cdecl android::SortedVectorImpl::add(android::SortedVectorImpl *this, const void *); idb
// int pthread_mutex_unlock(pthread_mutex_t *mutex);
// _DWORD __cdecl android::VectorImpl::removeItemsAt(android::VectorImpl *this, unsigned int, unsigned int); idb
// _DWORD __cdecl android::RefBase::weakref_type::incWeak(android::RefBase::weakref_type *this, const void *); idb
// int _android_log_print(_DWORD, _DWORD, const char *, ...); weak
// _DWORD android::IPCThreadState::self(android::IPCThreadState *this); idb
// _DWORD android::IPCThreadState::getCallingPid(android::IPCThreadState *this); idb
// _DWORD android::IPCThreadState::getCallingUid(android::IPCThreadState *this); idb
// __pid_t getpid(void);
// _DWORD __cdecl android::PermissionCache::checkCallingPermission(android::PermissionCache *__hidden this, const android::String16 *); idb
// _DWORD __cdecl android::BnSurfaceComposerClient::onTransact(android::BnSurfaceComposerClient *__hidden this, unsigned int, const android::Parcel *, android::Parcel *, unsigned int); idb
// _DWORD __cdecl operator new(unsigned int); idb
// _DWORD android::ISurfaceComposerClient::getInterfaceDescriptor(android::ISurfaceComposerClient *this); idb
// int strzcmp16(void); weak
// _DWORD __cdecl android::SortedVectorImpl::indexOf(android::SortedVectorImpl *this, const void *); idb
// _DWORD __cdecl android::String16::String16(android::String16 *this, const char *); idb
// int __fastcall android::Region::Region(_DWORD); weak
// _DWORD android::String8::String8(android::String8 *this); idb
// _DWORD __cdecl android::VectorImpl::VectorImpl(android::VectorImpl *this, unsigned int, unsigned int); idb
// int __fastcall android::Surface::Surface(_DWORD, _DWORD, _DWORD); weak
// int __fastcall eglGetDisplay(_DWORD); weak
// int __fastcall eglCreateWindowSurface(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall eglQuerySurface(_DWORD); weak
// _DWORD android::Rect::makeInvalid(android::Rect *this); idb
// _DWORD __cdecl android::String8::setTo(android::String8 *this, const char *); idb
// int __fastcall android::Region::set(_DWORD, _DWORD); weak
// int __fastcall eglDestroySurface(_DWORD); weak
// _DWORD __cdecl android::VectorImpl::~VectorImpl(android::VectorImpl *this); idb
// _DWORD __cdecl android::String8::~String8(android::String8 *this); idb
// int __fastcall android::Region::~Region(_DWORD, _DWORD); weak
// _DWORD __cdecl android::String8::setTo(android::String8 *this, const android::String8 *); idb
// int __cdecl eglGetError(_DWORD, _DWORD); weak
// int __fastcall eglGetCurrentSurface(_DWORD); weak
// int __fastcall eglMakeCurrent(_DWORD); weak
// int __fastcall eglSwapInterval(_DWORD, _DWORD); weak
// int __fastcall android::VectorImpl::operator=(_DWORD); weak
// int __fastcall android::Region::operator=(_DWORD); weak
// int __fastcall android::Region::andSelf(_DWORD, _DWORD); weak
// _DWORD android::String8::appendFormat(android::String8 *this, const char *, ...); idb
// _DWORD __cdecl android::String8::append(android::String8 *this, const android::String8 *); idb
// int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD); weak
// int _aeabi_memmove(void); weak
// _DWORD __cdecl android::RefBase::renameRefId(android::RefBase *this, android::RefBase *, const void *, const void *); idb
// _DWORD __cdecl android::Thread::Thread(android::Thread *this, bool); idb
// int pthread_cond_init(pthread_cond_t *cond, const pthread_condattr_t *cond_attr);
// _DWORD __cdecl android::Fence::~Fence(android::Fence *this); idb
// _DWORD android::Fence::getSignalTime(android::Fence *this); idb
int __fastcall j___floatdidf(__int64 a1);
// double cos(double x);
// double sin(double x);
// double atan2(double y, double x);
unsigned int __fastcall j___fixdfdi(unsigned int a1, unsigned int a2);
// int pthread_cond_signal(pthread_cond_t *cond);
// int __fastcall systemTime(_DWORD); weak
// _DWORD __cdecl android::VectorImpl::push(android::VectorImpl *this, const void *); idb
// double sqrt(double x);
// char *strerror(int errnum);
// int __fastcall pthread_cond_timedwait_relative_np(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int pthread_cond_wait(pthread_cond_t *cond, pthread_mutex_t *mutex);
// int pthread_cond_destroy(pthread_cond_t *cond);
// _DWORD __cdecl android::Thread::~Thread(android::Thread *this); idb
// _DWORD __cdecl android::VectorImpl::editItemLocation(android::VectorImpl *this, unsigned int); idb
// int timer_create(clockid_t clock_id, struct sigevent *evp, timer_t *timerid);
// int timer_settime(timer_t timerid, int flags, const struct itimerspec *value, struct itimerspec *ovalue);
// _DWORD android::IDisplayEventConnection::IDisplayEventConnection(android::IDisplayEventConnection *this); idb
// _DWORD android::BitTube::BitTube(android::BitTube *this); idb
// int pthread_cond_broadcast(pthread_cond_t *cond);
// _DWORD __cdecl android::VectorImpl::add(android::VectorImpl *this, const void *); idb
// _DWORD __cdecl android::SortedVectorImpl::remove(android::SortedVectorImpl *this, const void *); idb
// _DWORD __cdecl android::IDisplayEventConnection::~IDisplayEventConnection(android::IDisplayEventConnection *this); idb
// _DWORD android::IDisplayEventConnection::getInterfaceDescriptor(android::IDisplayEventConnection *this); idb
// _DWORD __cdecl android::RefBase::renameRefId(android::RefBase *this, android::RefBase::weakref_type *, const void *, const void *); idb
// _DWORD __cdecl android::VectorImpl::insertAt(android::VectorImpl *this, const void *, unsigned int, unsigned int); idb
// _DWORD __cdecl android::String8::append(android::String8 *this, const char *); idb
// _DWORD __cdecl android::String8::String8(android::String8 *this, const char *); idb
// int __fastcall _aeabi_memcpy(_DWORD, _DWORD); weak
// char *strstr(const char *haystack, const char *needle);
// int __fastcall android::BufferQueue::createBufferQueue(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::GLConsumer::setConsumerUsageBits(android::GLConsumer *this, unsigned int); idb
// _DWORD __cdecl android::GLConsumer::setName(android::GLConsumer *this, const android::String8 *); idb
// _DWORD __cdecl android::GLConsumer::setDefaultMaxBufferCount(android::GLConsumer *this, int); idb
// int __fastcall android::GLConsumer::GLConsumer(_DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::GLConsumer::setTransformHint(android::GLConsumer *this, unsigned int); idb
// int __fastcall android::GLConsumer::setReleaseFence(_DWORD, _DWORD); weak
// _DWORD android::ConsumerBase::abandon(android::ConsumerBase *this); idb
// _DWORD __cdecl android::GLConsumer::setDefaultBufferSize(android::GLConsumer *this, unsigned int, unsigned int); idb
// _DWORD __cdecl android::GLConsumer::setDefaultBufferFormat(android::GLConsumer *this, int); idb
// _DWORD __cdecl android::Rect::intersect(android::Rect *this, const android::Rect *, android::Rect *); idb
// _DWORD __cdecl android::Rect::reduce(android::Rect *this, const android::Rect *); idb
// int __fastcall android::Region::Region(_DWORD); weak
// int __fastcall android::Region::subtract(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::Rect::transform(android::Rect *this, unsigned int, int, int); idb
// int __fastcall android::Region::Region(_DWORD, _DWORD); weak
// int __fastcall android::Region::orSelf(_DWORD, _DWORD); weak
// int __fastcall android::Region::intersect(_DWORD, _DWORD); weak
// _DWORD android::GLConsumer::getCurrentFence(android::GLConsumer *this); idb
// _DWORD android::Fence::dup(android::Fence *this); idb
// int _errno(void); weak
// _DWORD __cdecl android::GLConsumer::setFilteringEnabled(android::GLConsumer *this, bool); idb
// _DWORD __cdecl android::GLConsumer::getTransformMatrix(android::GLConsumer *this, float *); idb
// int __cdecl atrace_setup(_DWORD, _DWORD); weak
// int __fastcall atrace_begin_body(_DWORD); weak
// int __fastcall android::Region::orSelf(_DWORD, _DWORD); weak
// ssize_t write(int fd, const void *buf, size_t n);
// int __fastcall android::Region::clear(_DWORD); weak
// _DWORD android::GLConsumer::getTimestamp(android::GLConsumer *this); idb
// _DWORD android::GLConsumer::getFrameNumber(android::GLConsumer *this); idb
// _DWORD android::GLConsumer::getCurrentBuffer(android::GLConsumer *this); idb
// _DWORD android::GLConsumer::getCurrentCrop(android::GLConsumer *this); idb
// _DWORD android::GLConsumer::getCurrentTransform(android::GLConsumer *this); idb
// _DWORD android::GLConsumer::getCurrentScalingMode(android::GLConsumer *this); idb
// _DWORD android::VectorImpl::clear(android::VectorImpl *this); idb
// _DWORD android::GLConsumer::getCurRefreshDirty(android::GLConsumer *this); idb
// int __fastcall android::Region::dump(_DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::ConsumerBase::dump(android::ConsumerBase *this, android::String8 *, const char *); idb
// _DWORD android::BufferItem::BufferItem(android::BufferItem *this); idb
// _DWORD __cdecl android::BufferItem::~BufferItem(android::BufferItem *this); idb
// int __fastcall android::Looper::sendMessage(_DWORD, _DWORD, _DWORD); weak
// int __fastcall android::Looper::removeMessages(_DWORD, _DWORD); weak
// _DWORD __cdecl android::Looper::Looper(android::Looper *this, bool); idb
// _DWORD android::BitTube::getFd(android::BitTube *this); idb
// _DWORD __cdecl android::Looper::addFd(android::Looper *this, int, int, int, int (__cdecl *)(int, int, void *), void *); idb
// _DWORD android::IPCThreadState::flushCommands(android::IPCThreadState *this); idb
// _DWORD __cdecl android::Looper::pollOnce(android::Looper *this, int, int *, int *, void **); idb
// int __fastcall android::Looper::sendMessageDelayed(_DWORD); weak
// int __fastcall android::DisplayEventReceiver::getEvents(_DWORD, _DWORD, _DWORD); weak
// _DWORD android::IGraphicBufferProducer::IGraphicBufferProducer(android::IGraphicBufferProducer *this); idb
// _DWORD __cdecl android::IInterface::asBinder(android::IInterface *this, const android::IInterface *); idb
// _DWORD __cdecl android::IGraphicBufferProducer::~IGraphicBufferProducer(android::IGraphicBufferProducer *this); idb
// int __fastcall android::IInterface::asBinder(_DWORD, _DWORD); weak
// _DWORD android::IGraphicBufferProducer::getInterfaceDescriptor(android::IGraphicBufferProducer *this); idb
// _DWORD android::ISurfaceComposer::ISurfaceComposer(android::ISurfaceComposer *this); idb
// int __fastcall property_get(_DWORD, _DWORD, _DWORD); weak
// int strcmp(const char *s1, const char *s2);
// int atoi(const char *nptr);
// int __fastcall property_set(_DWORD, _DWORD); weak
// int __fastcall _stack_chk_fail(_DWORD); weak
// _DWORD __cdecl android::String8::String8(android::String8 *this, const android::String8 *); idb
// void *dlopen(const char *file, int mode);
// void *dlsym(void *handle, const char *name);
// int dlclose(void *handle);
// int __fastcall eglTerminate(_DWORD); weak
// _DWORD __cdecl android::ISurfaceComposer::~ISurfaceComposer(android::ISurfaceComposer *this); idb
// _DWORD android::BBinder::BBinder(android::BBinder *this); idb
// _DWORD android::GraphicBufferAlloc::GraphicBufferAlloc(android::GraphicBufferAlloc *this); idb
// _DWORD android::defaultServiceManager(android *this); idb
// _DWORD __cdecl android::String16::~String16(android::String16 *this); idb
// int __fastcall android::SortedVectorImpl::operator=(_DWORD, _DWORD); weak
// _DWORD android::String8::format(android::String8 *this, const char *, ...); idb
// int __fastcall _android_janklog_print(_DWORD, _DWORD, _DWORD); weak
int __fastcall j___floatdisf(__int64 a1);
// _DWORD __cdecl android::VectorImpl::VectorImpl(android::VectorImpl *this, const android::VectorImpl *); idb
// int __fastcall android::Region::subtractSelf(_DWORD, _DWORD); weak
// int usleep(__useconds_t useconds);
// int __fastcall android::Region::subtract(_DWORD, _DWORD, _DWORD); weak
// int __fastcall android::Region::merge(_DWORD, _DWORD, _DWORD); weak
// int __fastcall android::Region::andSelf(_DWORD, _DWORD); weak
// int __fastcall android::Region::intersect(_DWORD, _DWORD, _DWORD); weak
// int __fastcall _strlen_chk(_DWORD, _DWORD); weak
// int strncmp(const char *s1, const char *s2, size_t n);
// int __fastcall _strcpy_chk(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::String16::String16(android::String16 *this, const android::String16 *); idb
// void exit(int status);
// int open(const char *file, int oflag, ...);
// int _sprintf_chk(_DWORD, _DWORD, _DWORD, const char *, ...); weak
// int close(int fd);
// _DWORD __cdecl android::PermissionCache::checkPermission(android::PermissionCache *this, const android::String16 *, int, unsigned int); idb
// int pthread_mutex_timedlock(pthread_mutex_t *mutex, const struct timespec *abstime);
// _DWORD __cdecl android::String8::find(android::String8 *this, const char *, unsigned int); idb
// _DWORD __cdecl android::String8::String8(android::String8 *this, const android::String16 *); idb
// _DWORD __cdecl android::appendUiConfigString(android *this, android::String8 *); idb
// _DWORD __cdecl android::appendGuiConfigString(android *this, android::String8 *); idb
// _DWORD android::SyncFeatures::toString(android::SyncFeatures *this); idb
// _DWORD __cdecl eglQueryStringImplementationANDROID(void *, int); idb
// _DWORD __cdecl android::GraphicBufferAllocator::dump(android::GraphicBufferAllocator *this, android::String8 *); idb
// _DWORD android::SyncFeatures::SyncFeatures(android::SyncFeatures *this); idb
// _DWORD __cdecl android::BnSurfaceComposer::onTransact(android::BnSurfaceComposer *__hidden this, unsigned int, const android::Parcel *, android::Parcel *, unsigned int); idb
// _DWORD __cdecl android::Parcel::checkInterface(android::Parcel *this, android::IBinder *); idb
// _DWORD android::Parcel::readInt32(android::Parcel *this); idb
// _DWORD __cdecl android::Parcel::writeInt32(android::Parcel *this, int); idb
// _DWORD android::Parcel::readFloat(android::Parcel *this); idb
// int __fastcall android::IGraphicBufferProducer::asInterface(_DWORD, _DWORD); weak
int __fastcall android::SurfaceFlingerEx::captureScreenForKeyguard(int a1, int a2, int a3);
// int __fastcall eglCreateImageKHR(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall eglCreateSyncKHR(_DWORD, _DWORD, _DWORD); weak
// int __fastcall eglDupNativeFenceFDANDROID(_DWORD, _DWORD); weak
// int __fastcall eglDestroySyncKHR(_DWORD, _DWORD); weak
// int __fastcall eglDestroyImageKHR(_DWORD, _DWORD); weak
// int __fastcall eglClientWaitSyncKHR(_DWORD, _DWORD, _DWORD); weak
// _DWORD android::ISurfaceComposer::getInterfaceDescriptor(android::ISurfaceComposer *this); idb
// int __fastcall atrace_int_body(_DWORD, _DWORD); weak
// _DWORD android::GraphicBufferAllocator::GraphicBufferAllocator(android::GraphicBufferAllocator *this); idb
// _DWORD __cdecl android::GLConsumer::checkAndUpdateEglStateLocked(android::GLConsumer *this, bool); idb
// _DWORD __cdecl android::GLConsumer::updateAndReleaseLocked(android::GLConsumer *this, const android::BufferItem *); idb
// _DWORD android::SyncFeatures::useNativeFenceSync(android::SyncFeatures *this); idb
// _DWORD android::GLConsumer::bindTextureImageLocked(android::GLConsumer *this); idb
// int __fastcall android::ConsumerBase::setFrameAvailableListener(_DWORD, _DWORD); weak
// _DWORD __cdecl android::ConsumerBase::~ConsumerBase(android::ConsumerBase *this); idb
// _DWORD __cdecl android::ConsumerBase::freeBufferLocked(android::ConsumerBase *this, int); idb
// _DWORD __cdecl android::ConsumerBase::dumpLocked(android::ConsumerBase *this, android::String8 *, const char *); idb
// float floorf(float x);
// int __fastcall android::Region::translate(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall android::Region::begin(_DWORD); weak
// int __fastcall android::Region::end(_DWORD); weak
// int __fastcall android::ConsumerBase::ConsumerBase(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall android::ConsumerBase::addReleaseFence(_DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::ConsumerBase::dump(android::ConsumerBase *this, android::String8 *); idb
// void abort(void);
// int __fastcall hw_get_module(_DWORD, _DWORD); weak
// int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::VectorImpl::resize(android::VectorImpl *this, unsigned int); idb
// void free(void *ptr);
// void *malloc(size_t size);
// char *strcpy(char *dest, const char *src);
// int __fastcall private_handle_get_base(_DWORD); weak
// int __fastcall private_handle_get_width(_DWORD); weak
// int __fastcall private_handle_get_height(_DWORD); weak
// int __fastcall private_handle_get_stride(_DWORD); weak
// float ceilf(float x);
// _DWORD __cdecl android::Fence::Fence(android::Fence *this, int); idb
// int eglGetCurrentDisplay(void); weak
// _DWORD __cdecl android::Fence::waitForever(android::Fence *this, const char *); idb
// int __fastcall android::IPowerManager::asInterface(_DWORD, _DWORD); weak
// int __fastcall android::ConsumerBase::addReleaseFenceLocked(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int pthread_mutexattr_init(pthread_mutexattr_t *attr);
// int pthread_mutexattr_setpshared(pthread_mutexattr_t *attr, int pshared);
// int pthread_mutexattr_destroy(pthread_mutexattr_t *attr);
// int __fastcall _android_log_bwrite(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl operator new[](unsigned int); idb
// void __cdecl operator delete[](void *); idb
// int glCreateProgram(void); weak
// int __fastcall glAttachShader(_DWORD, _DWORD); weak
// int __fastcall glBindAttribLocation(_DWORD, _DWORD, _DWORD); weak
// int __fastcall glLinkProgram(_DWORD); weak
// int __fastcall glGetProgramiv(_DWORD, _DWORD, _DWORD); weak
// int __fastcall glGetUniformLocation(_DWORD, _DWORD); weak
// int __fastcall glUseProgram(_DWORD); weak
// int __fastcall glUniformMatrix4fv(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall glEnableVertexAttribArray(_DWORD); weak
// int __fastcall glGetProgramInfoLog(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall glDetachShader(_DWORD, _DWORD); weak
// int __fastcall glDeleteShader(_DWORD); weak
// int __fastcall glDeleteProgram(_DWORD); weak
// int __fastcall glCreateShader(_DWORD); weak
// int glShaderSource(void); weak
// int __fastcall glCompileShader(_DWORD); weak
// int __fastcall glGetShaderiv(_DWORD, _DWORD, _DWORD); weak
// int __fastcall glGetShaderInfoLog(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int glUniform1i(void); weak
// int glUniform1f(void); weak
// int glUniform4fv(void); weak
// int __fastcall _strchr_chk(_DWORD, _DWORD, _DWORD); weak
// _DWORD __cdecl android::String8::String8(android::String8 *this, const char *, unsigned int); idb
// int __fastcall eglGetConfigAttrib(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int sscanf(const char *s, const char *format, ...);
// int __fastcall android::Region::getArray(_DWORD, _DWORD); weak
// void glFlush(void);
// void glClearColor(GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha);
// void glClear(GLbitfield mask);
// void glScissor(GLint x, GLint y, GLsizei width, GLsizei height);
// void glEnable(GLenum cap);
// void glDisable(GLenum cap);
// void glFinish(void);
// void glGenTextures(GLsizei n, GLuint *textures);
// void glDeleteTextures(GLsizei n, const GLuint *textures);
// int __fastcall eglGetConfigs(_DWORD, _DWORD, _DWORD, _DWORD); weak
// int __fastcall eglChooseConfig(_DWORD, _DWORD, _DWORD, _DWORD); weak
// void glColor4f(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha);
// void glBlendFunc(GLenum sfactor, GLenum dfactor);
// void glGetIntegerv(GLenum pname, GLint *params);
// void glPixelStorei(GLenum pname, GLint param);
// void glEnableClientState(GLenum cap);
// void glShadeModel(GLenum mode);
// void glBindTexture(GLenum target, GLuint texture);
// int __fastcall glTexParameterx(_DWORD, _DWORD, _DWORD); weak
// void glTexImage2D(GLenum target, GLint level, GLint internalFormat, GLsizei width, GLsizei height, GLint border, GLenum format, GLenum type, const GLvoid *pixels);
// void glMatrixMode(GLenum mode);
// void glDisableClientState(GLenum cap);
// void glTexParameteri(GLenum target, GLenum pname, GLint param);
// float sqrtf(float x);
// int glDisableVertexAttribArray(void); weak
android::Nsd *__fastcall android::Nsd::Nsd(android::Nsd *this);
android::RefBase *__fastcall android::Nsd::init(int a1, char **a2, __int16 a3);
int __fastcall android::Nsd::nsd_is_exit_if_error(android::Nsd *this);
android::RefBase **__fastcall android::Nsd::nsd_exit(android::Nsd *this);
signed int __fastcall android::Nsd::doDraw(android::Nsd *this, __int32 a2, int a3);
android::SurfaceFlinger *__fastcall android::SurfaceFlinger::SurfaceFlinger(android::SurfaceFlinger *this, int a2);
// void *memset(void *s, int c, size_t n);
android::SurfaceFlingerEx *__fastcall android::SurfaceFlingerEx::SurfaceFlingerEx(android::SurfaceFlingerEx *this);
// _DWORD android::ProcessState::self(android::ProcessState *this); idb
// _DWORD android::ProcessState::startThreadPool(android::ProcessState *this); idb
// _DWORD __cdecl android::IPCThreadState::joinThreadPool(android::IPCThreadState *this, bool); idb
int __fastcall android::SurfaceFlingerEx::initHwModule(android::SurfaceFlingerEx *this);
// int ioctl(int fd, unsigned __int32 request, ...);
int __fastcall android::SurfaceFlingerEx::checkIfSupportCursorNsd(android::SurfaceFlingerEx *this);
unsigned int __fastcall android::SurfaceFlingerEx::checkIfSupportDuplicate(android::SurfaceFlingerEx *this);
int getHwApsUtils(void);
int __fastcall android::SurfaceFlingerEx::getScreenWidthAndHeight(android::SurfaceFlingerEx *this);
signed int __fastcall android::Nsd::onTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall android::SurfaceFlingerEx::handleNsdCursorCmd(android::SurfaceFlingerEx *this);
int __fastcall android::Nsd::doCursorDraw(android::Nsd *this);
int __fastcall android::Nsd::setRefreshTime(android::Nsd *this, __int32 a2);
int __fastcall android::SurfaceFlingerEx::setSdrEnterFlag(android::SurfaceFlingerEx *this, int a2);
unsigned int **__fastcall android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(unsigned int **result, unsigned int **a2);
int __fastcall android::SurfaceFlingerEx::restoreSdr(android::SurfaceFlingerEx *this, float _R1, int a3);
int __fastcall android::SurfaceFlingerEx::resetSdr(android::SurfaceFlingerEx *this, float _R1, int a3);
unsigned int **__fastcall android::sp<android::DisplayDevice const>::~sp(unsigned int **a1);
signed int __fastcall android::SurfaceFlingerEx::isBlackPackage(android::SurfaceFlingerEx *this);
void *__fastcall android::sp<android::GraphicBuffer>::~sp(void *a1);
// _DWORD __cdecl android::bytesPerPixel(android *this, int); idb
int __fastcall android::Nsd::isSupportAFBC(android::Nsd *this, void *a2);
signed int __fastcall android::SurfaceFlingerEx::isSdrCase(android::SurfaceFlingerEx *this);
void *__fastcall android::sp<android::Layer>::sp(void *a1, char **a2);
void *__fastcall android::sp<android::Layer>::~sp(void *a1);
int __fastcall android::Nsd::setSfFlag(android::Nsd *this, int a2);
signed int __fastcall android::Nsd::preDraw(int a1, int *a2);
int __fastcall android::SurfaceFlingerEx::handleNsdRefreshTime(android::SurfaceFlingerEx *this, __int32 a2);
int __fastcall android::Nsd::clearCursor(android::Nsd *this);
int __fastcall android::SurfaceFlingerEx::handleNsdDrawCursor(__int64 this);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleApsIdentify(android::SurfaceFlingerEx *this, int a2);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::fillBlack(android::SurfaceFlingerEx *this);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::addBlackList(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::bootFinished(android::SurfaceFlingerEx *this);
signed int __fastcall android::SurfaceFlingerEx::captureScreen(int a1, char **a2, char **a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, char a12, unsigned int a13);
signed int __fastcall android::SurfaceFlingerEx::onTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
_QWORD *__fastcall android::SurfaceFlingerEx::onMessageReceived(__int64 this, int a2);
_DWORD *__fastcall android::SurfaceFlingerEx::signalDrawLayer(android::SurfaceFlingerEx *this);
_DWORD *__fastcall android::SurfaceFlingerEx::signalClearMessage(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::checkIfSupportNsd(android::SurfaceFlingerEx *this);
android::RefBase *__fastcall android::SurfaceFlingerEx::initNsd(android::SurfaceFlingerEx *this, char *a2, int a3);
int __fastcall android::SurfaceFlingerEx::checkIfSupportLauncherNsd(android::SurfaceFlingerEx *this);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleNsdCmd(android::SurfaceFlingerEx *this);
unsigned int **__fastcall android::SurfaceFlingerEx::handleSdrSetHwComposer(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2);
signed int __fastcall android::SurfaceFlingerEx::nsdOnTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 this);
int __fastcall android::SurfaceFlingerEx::handleNsdRefresh(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::handleNsdInvalidate(android::SurfaceFlingerEx *this);
signed __int64 __fastcall android::SurfaceFlingerEx::setCurrentInvalidateTime(android::SurfaceFlingerEx *this);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::getVisibleLayerInfo(android::SurfaceFlingerEx *this, android::Parcel *a2);
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
_QWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onMessageReceived(__int64 a1, int a2);
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalDrawLayer(int a1);
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalClearMessage(int a1);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportNsd(int a1);
android::RefBase *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::initNsd(int a1, char *a2, int a3);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportLauncherNsd(int a1);
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::nsdOnTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdCmd(int a1);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 a1);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdRefresh(int a1);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdInvalidate(int a1);
signed __int64 __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::setCurrentInvalidateTime(int a1);
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::getVisibleLayerInfo(int a1, android::Parcel *a2);
unsigned int **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetHwComposer(int a1);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::bootFinished(int a1);
// void *memcpy(void *dest, const void *src, size_t n);
// _DWORD __cdecl android::Parcel::writeInt64(android::Parcel *this, __int64); idb
void __fastcall android::Nsd::PrepareBufferThread::prepareBuffer(android::Nsd::PrepareBufferThread *this, void *dest, void *src, int a4, int a5, int a6, int a7, int a8);
// _DWORD __cdecl android::GraphicBuffer::lock(android::GraphicBuffer *this, unsigned int, void **); idb
int __fastcall android::Nsd::PrepareBufferThread::setBufferPara(android::Nsd::PrepareBufferThread *this, void *a2, unsigned int *a3, int a4, int a5, int a6, int a7, int a8);
// _DWORD android::GraphicBuffer::unlock(android::GraphicBuffer *this); idb
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this);
void *__fastcall android::sp<android::GraphicBuffer>::sp(void *a1, android::RefBase **a2);
// _DWORD __cdecl android::GraphicBuffer::reallocate(android::GraphicBuffer *this, unsigned int, unsigned int, int, unsigned int); idb
signed int __fastcall android::Nsd::process(int a1, unsigned int *a2, int a3, int a4, int a5);
// _DWORD __cdecl android::Parcel::read(android::Parcel *this, void *, unsigned int); idb
signed int __fastcall android::Nsd::cursorOnTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
android::RefBase **__fastcall android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this);
int getLauncherIdle(void);
// _DWORD __cdecl android::GraphicBuffer::GraphicBuffer(android::GraphicBuffer *this, unsigned int, unsigned int, int, unsigned int); idb
android::RefBase **__fastcall android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this);
int getCursor(void);
int __fastcall android::Nsd::PrepareBufferThread::threadLoop(android::Nsd::PrepareBufferThread *this);
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this);
android::RefBase *__fastcall android::Nsd::onFirstRef(android::Nsd *this);
// char *dlerror(void);
// int fprintf(FILE *stream, const char *format, ...);
// int __fastcall _gnu_Unwind_Find_exidx(_DWORD, _DWORD); weak
int j___aeabi_ldiv0();
signed __int64 __fastcall j___gnu_ldivmod_helper(signed __int64 a1, signed __int64 a2, _QWORD *a3);
unsigned __int64 __fastcall j___gnu_uldivmod_helper(unsigned __int64 a1, unsigned __int64 a2, _QWORD *a3);
// int raise(int sig);
signed int __fastcall j___aeabi_dcmplt(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4);
unsigned int __fastcall j___fixunsdfdi(unsigned int a1, unsigned int a2);
unsigned int __fastcall j___muldf3(unsigned int result, unsigned int a2, unsigned int a3, unsigned int a4);
unsigned int __fastcall j___fixunsdfsi(unsigned int a1, int a2);
int __fastcall j___floatunsidf(int result);
int j___subdf3();
unsigned int __fastcall j___lshrdi3(unsigned int a1, unsigned int a2, int a3);
int __fastcall j___nedf2(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4);
unsigned int __fastcall j___aeabi_cdcmple(unsigned int result, unsigned int a2, unsigned int a3, signed int a4);
unsigned int __fastcall j___aeabi_cdrcmple(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4);
int sub_11D00();
int sub_11D3C();
int sub_11DDC();
int sub_11E14();
int sub_11E4C();
int sub_11E84();
int (*__fastcall sub_11EA4(int (*result)(void)))(void);
int __fastcall sub_11F64(int a1, char **a2);
int __fastcall sub_11FFC(int a1, int a2);
int __fastcall sub_120DC(int a1);
int __fastcall sub_1212C(_DWORD *a1);
void __fastcall sub_12158(int a1);
void __fastcall sub_121B4(char *a1);
int __fastcall android::Nsd::isSupportAFBC(android::Nsd *this, void *a2);
int __fastcall sub_121EC(int a1, char **a2, char **a3);
int __fastcall sub_12288(int a1, int a2);
int __fastcall sub_122C8(void *a1, int a2, char **a3);
void *__fastcall sub_123A8(void *a1, char **a2);
int __fastcall sub_123DC(android::IPCThreadState *a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall sub_12474(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8);
int __fastcall sub_12520(char *a1, char **a2);
signed int __fastcall sub_12564(int a1, char **a2);
signed int __fastcall sub_125A0(int a1, char **a2, int a3);
int __fastcall sub_125DC(int a1);
void __fastcall sub_12614(int a1);
int __fastcall sub_12650(int a1);
int __fastcall sub_12658(const void *a1, char *a2, _DWORD *a3);
int __fastcall sub_126B4(const void *a1, int a2, _DWORD *a3);
int __fastcall sub_126C4(int a1);
int __fastcall sub_12744(char *a1);
void __fastcall sub_12780(char *a1);
int __fastcall sub_127C4(int a1);
void __fastcall sub_127FC(int a1);
int __fastcall sub_128A8(char *a1);
void __fastcall sub_128E4(char *a1);
void *__fastcall sub_12AE8(void *a1, _DWORD *a2);
int __fastcall sub_12B1C(int a1);
void __fastcall sub_12B2C(int a1);
int __fastcall sub_12B40(char *a1);
void __fastcall sub_12B50(char *a1);
void *__fastcall sub_12C84(void *a1, int a2, int a3);
int __fastcall sub_12CB8(android::SortedVectorImpl *this, int a2);
_DWORD *__fastcall sub_12D04(_DWORD *a1, char **a2, int a3, int a4, int a5, char a6, int a7, char **a8, int a9, int a10);
int __fastcall sub_12F28(int a1, unsigned int a2, int _R2, int a4);
int __fastcall sub_131F4(int a1);
signed int __fastcall sub_132C0(signed int result, int a2);
int __fastcall sub_132EC(int a1);
int __fastcall sub_132F0(int a1);
int __fastcall sub_132F4(int a1);
int __fastcall sub_132F8(int result, const android::String8 *a2);
int __fastcall sub_1330C(int a1);
int __fastcall sub_13310(int a1);
int __fastcall sub_13318(int a1);
int __fastcall sub_13330(int a1);
int __fastcall sub_13338(int a1, int a2);
signed int __fastcall sub_1343C(int a1, int a2);
int __fastcall sub_13458(int a1);
int __fastcall sub_1345C(int a1, int a2);
int __fastcall sub_134BC(int a1);
int __fastcall sub_134EC(int result, char a2);
signed int __fastcall sub_134F4(int a1, int a2);
int __fastcall sub_13540(int a1);
int __fastcall sub_13544(int a1);
int __fastcall sub_1354C(int a1, int a2, int a3);
int __fastcall sub_135AC(int result, int a2);
int __fastcall sub_135B4(int a1);
_BOOL4 __fastcall sub_135BC(int a1);
int __fastcall sub_135C8(int result, int a2);
int __fastcall sub_135D0(int a1);
int __fastcall sub_135D8(int a1, int a2);
int __fastcall sub_13600(int a1);
int __fastcall sub_13624(int a1);
int __fastcall sub_1369C(int a1, android::String8 *a2);
int __fastcall sub_13A04(int a1);
int __fastcall sub_13A8C(int a1);
int __fastcall sub_13B0C(int a1);
int __fastcall sub_13B58(int a1);
int __fastcall sub_13B78(int a1);
signed int __fastcall sub_13BD0(int a1, unsigned int **a2);
unsigned int *__fastcall sub_13CD0(unsigned int **a1);
int __fastcall sub_13CFC(signed __int64 *a1);
signed int __fastcall sub_13DF4(int a1, int a2, __int64 a3);
int __fastcall sub_13EB8(int result);
_DWORD android::Nsd::postDraw(android::Nsd *__hidden this); // idb
signed int __fastcall sub_140B4(int a1, int a2, int a3, int a4, char **a5);
signed int __fastcall sub_140EC(int a1, int a2, int a3, int a4, char **a5);
int __fastcall sub_14190(int a1, int a2);
signed int __fastcall sub_141D4(int a1, _DWORD *a2);
signed int __fastcall sub_141FC(int a1, _DWORD *a2);
int __fastcall sub_1424C(int a1);
int __fastcall sub_14270(int a1);
int __fastcall sub_142A0(int a1, int a2, int a3, int a4);
int __fastcall sub_142F8(int a1);
int __fastcall sub_14318(int a1, int a2);
int __fastcall sub_14380(int a1, android::String8 *a2);
int __fastcall sub_14634(int a1);
void __fastcall sub_1465C(int a1);
int __fastcall sub_14688(int a1);
int __fastcall sub_14924(_DWORD *a1);
void __fastcall sub_14950(char *a1);
int __fastcall sub_14B4C(int a1, int a2);
signed int __fastcall sub_14BA0(int a1, int a2, unsigned int a3, int a4);
unsigned int __fastcall sub_14CD0(android::VectorImpl *a1, int a2, int a3, int a4);
unsigned int __fastcall sub_14DB0(android::VectorImpl *a1, int a2, signed __int64 a3);
int __fastcall sub_150E4(int a1, char **a2);
int __fastcall sub_15154(int a1, char a2);
int __fastcall sub_15204(int a1);
void __fastcall sub_1522C(int a1);
int __fastcall sub_15258(_DWORD *a1);
void __fastcall sub_15284(char *a1);
int __fastcall sub_152B8(int a1, int a2);
int __fastcall sub_152FC(int a1);
int __fastcall sub_15324(int a1, char **a2);
int __fastcall sub_15430(int a1);
int __fastcall sub_1545C(int a1);
int __fastcall sub_154C4(char *a1);
_DWORD *__fastcall sub_154EC(const void *a1, _DWORD *a2);
int __fastcall sub_1553C(int a1, char **a2);
int __fastcall sub_155C0(int a1, char **a2);
int __fastcall sub_1561C(int result, signed int a2, int a3);
int __fastcall sub_1565C(int a1, int a2);
int __fastcall sub_1568C(int a1);
int __fastcall sub_156BC(int a1);
int __fastcall sub_156EC(int a1, int a2, int a3, int a4);
int __fastcall sub_1572C(int a1, int a2, int a3, int a4);
int __fastcall sub_15734(int a1, signed int a2, char a3);
int __fastcall sub_158D0(android::VectorImpl *a1, int a2, int a3);
int __fastcall sub_15B94(int a1);
int __fastcall sub_15C00(int a1, android::String8 *a2);
int __fastcall sub_15CF4(int a1, int a2);
int __fastcall sub_15D44(int a1);
int __fastcall sub_15D94(_DWORD *a1);
void __fastcall sub_15DC0(int a1);
void __fastcall sub_15E1C(char *a1);
_DWORD *__fastcall sub_15E50(_DWORD *a1);
_DWORD *__fastcall sub_15E88(char *a1);
android::RefBase *__fastcall sub_15E94(void *a1, int a2);
_DWORD *__fastcall sub_15EAC(_DWORD *a1, signed int a2);
_DWORD *__fastcall sub_15EEC(_DWORD *a1);
int __fastcall sub_15F24(int a1);
void __fastcall sub_15F34(int a1);
int __fastcall sub_15F48(char *a1);
void __fastcall sub_15F58(char *a1);
int __fastcall sub_15F74(int a1);
void __fastcall sub_15F9C(int a1);
int __fastcall sub_15FC8(int a1);
void __fastcall sub_15FF0(int a1);
int __fastcall sub_16024(_DWORD *a1);
void __fastcall sub_16050(char *a1);
int __fastcall sub_16084(int a1);
void __fastcall sub_160BC(int a1);
int __fastcall sub_160F8(int a1);
int __fastcall sub_16100(const void *a1, char *a2, _DWORD *a3);
int __fastcall sub_1615C(const void *a1, int a2, _DWORD *a3);
int __fastcall sub_1616C(int a1);
int __fastcall sub_161EC(char *a1);
void __fastcall sub_16228(char *a1);
int __fastcall sub_1626C(int a1);
void __fastcall sub_162A4(int a1);
int __fastcall sub_162E0(android::BBinder *this); // idb
void __fastcall sub_16314(android::BBinder *this);
int __fastcall sub_16350(char *a1);
void __fastcall sub_1638C(char *a1);
int __fastcall sub_163CC(int a1, int a2);
int __fastcall sub_16888(int a1);
int __fastcall sub_168EC(int a1, int a2, int a3, int a4);
int __fastcall sub_1691C(int a1, int a2, __int64 a3);
int __fastcall sub_1694C(int a1, unsigned int **a2);
unsigned int **__fastcall sub_16984(unsigned int **a1, unsigned int **a2);
int __fastcall sub_169CC(int a1, int a2, __int64 a3);
int __fastcall sub_169FC(int a1, unsigned int **a2);
int __fastcall sub_16A34(int a1, int a2, int a3, int a4);
int __fastcall sub_16A60(int a1);
int __fastcall sub_16B10(int a1, int a2);
unsigned int **__fastcall sub_16BF4(unsigned int **a1, unsigned int *a2);
android::Fence *__fastcall sub_16C3C(int a1);
int __fastcall sub_16D00(int a1);
int __fastcall sub_16DA0(int a1, int a2);
int __fastcall sub_16E4C(int a1, _DWORD *a2);
int __fastcall sub_16EA8(int a1, android::String8 *a2);
android::String8 *__fastcall sub_16F38(android::String8 *a1, int a2, int a3, int a4, android::String8 *a5, int a6, int a7, unsigned int a8);
int __fastcall sub_17268(int a1, int a2, char **a3, android::String8 *a4, int a5, int a6, unsigned int a7);
_DWORD *__fastcall sub_17594(int a1);
void *__fastcall sub_176BC(void *a1, char *a2);
int __fastcall sub_176F0(int a1, int a2, int a3);
char *__fastcall sub_17760(unsigned int **a1, int a2);
int __fastcall sub_177D4(int a1, _DWORD *a2);
_DWORD *__fastcall sub_17800(_DWORD *a1);
int __fastcall sub_1780C(int a1, int a2);
int __fastcall sub_17A00(int a1);
int __fastcall sub_17A28(_DWORD *a1);
void __fastcall sub_17A58(int a1);
void __fastcall sub_17A88(char *a1);
unsigned int **__fastcall sub_17ABC(unsigned int **result, int a2, int a3);
unsigned int **__fastcall sub_17AF0(unsigned int **a1);
int __fastcall sub_17B1C(int a1, void *a2);
int __fastcall sub_17C58(int a1);
int __fastcall sub_17C5C(int a1, int a2);
int __fastcall sub_17DC0(int result);
int __fastcall sub_17DE4(int a1);
signed int __fastcall sub_17DEC(int a1, unsigned int a2, unsigned int a3, int a4, unsigned int a5);
char *__fastcall sub_17FAC(void *a1, int a2);
int __fastcall sub_17FCC(int result, int a2);
int __fastcall sub_1802C(android::Rect *a1, int a2);
int __fastcall sub_1803C(android::Rect *this, int a2, int a3);
int __fastcall sub_180E0(android::Rect *this, const android::Rect *_R1, int a3);
int __fastcall sub_18160(int a1, int a2, int *a3);
int __fastcall sub_18458(int a1, int *a2, android::RefBase::weakref_type *a3);
int __fastcall sub_187D8(int a1, int *a2, int a3);
int __fastcall sub_18850(int a1, int a2, int a3);
float __fastcall sub_188D4(int a1, int a2, _DWORD *a3);
int __fastcall sub_189A4(int a1);
int __fastcall sub_189B0(int a1, int a2, int a3);
int __fastcall sub_189F0(int a1, int a2);
ssize_t __fastcall sub_18A30(int a1, int *a2, int a3, int a4);
void __fastcall sub_18F7C(int a1, int *a2, int a3, int a4);
int __fastcall sub_190B4(int a1, int *a2, int a3, int a4);
int __fastcall sub_19224(int a1, int *a2);
int __fastcall sub_19260(int a1);
int __fastcall sub_192B4(int result, char a2);
signed int __fastcall sub_192BC(int a1, int a2);
signed int __fastcall sub_192E4(int a1);
unsigned int __fastcall sub_192F4(int a1);
_BOOL4 __fastcall sub_19310(int a1);
int __fastcall sub_19320(int a1);
int __fastcall sub_19328(int a1);
int __fastcall sub_19330(int a1);
int __fastcall sub_19338(android::SortedVectorImpl *this, int a2);
int __fastcall sub_19518(int a1, int a2);
signed int __fastcall sub_19540(int a1, int a2, int a3);
signed int __fastcall sub_195C0(int a1, int a2);
signed int __fastcall sub_195F8(int a1, int a2, int a3);
signed int __fastcall sub_19630(int a1, int a2);
signed int __fastcall sub_19668(int a1, int _R1);
signed int __fastcall sub_196AC(int a1);
signed int __fastcall sub_196D4(int a1, int a2, int a3);
signed int __fastcall sub_19714(int a1, int _R1);
signed int __fastcall sub_19778(int a1, int a2);
int __fastcall sub_197B0(int a1, int _R1);
int __fastcall sub_197C0(int result, char a2);
int __fastcall sub_197C8(int result, int a2);
int __fastcall sub_197D0(int a1);
int __fastcall sub_19804(int a1);
int __fastcall sub_1980C(int a1, int a2);
signed int __fastcall sub_198E0(int a1);
unsigned int **__fastcall sub_19900(int a1);
signed int __fastcall sub_199A8(int a1);
ssize_t __fastcall sub_199D8(int a1, int a2, _BYTE *a3);
android::RefBase **__fastcall sub_1A074(void *a1, android::RefBase **a2);
_DWORD *__fastcall sub_1A09C(int a1, android::String8 *a2, _BYTE *a3, int a4);
int __fastcall sub_1A344(int a1, android::String8 *a2);
int __fastcall sub_1A34C(int a1);
int __fastcall sub_1A354(int a1);
int __fastcall sub_1A364(int a1, int a2);
void *__fastcall sub_1A36C(void *a1, char **a2, char **a3);
int *__fastcall sub_1A3AC(int *a1);
int __fastcall sub_1A40C(char *a1);
void __fastcall sub_1A41C(char *a1);
int __fastcall sub_1A45C(char *a1);
void __fastcall sub_1A46C(char *a1);
const char *sub_1A488();
int __fastcall sub_1A49C(android::SortedVectorImpl *this, int a2);
int __fastcall sub_1A978(int a1, int a2, int a3);
int __fastcall sub_1A9BC(int result, int a2, int a3);
int __fastcall sub_1AA5C(int result, int a2);
int __fastcall sub_1AC00(int a1, int a2, int a3, android::String8 *a4, int a5, int a6, unsigned int a7);
int __fastcall sub_1AC60(int a1);
int __fastcall sub_1AC8C(_DWORD *a1);
void __fastcall sub_1ACBC(int a1);
void __fastcall sub_1ACEC(char *a1);
void **__fastcall sub_1AD24(int a1, int *a2, int a3, int a4);
int __fastcall sub_1AD84(int a1);
int __fastcall sub_1ADA4(int a1, int *a2, android::RefBase::weakref_type *a3);
int __fastcall sub_1ADF4(int a1, int *a2, int a3);
const char *sub_1AE48();
int sub_1AE5C();
int sub_1AE60();
signed int sub_1AE64();
_DWORD *__fastcall sub_1AE68(_DWORD *a1, int a2);
int __fastcall sub_1AEA4(int a1, int a2);
int __fastcall sub_1AEC8(int a1);
int __fastcall sub_1AF08(char *a1);
void __fastcall sub_1AF4C(int a1);
void __fastcall sub_1AF90(_DWORD *a1);
int __fastcall sub_1AF9C(int a1);
_DWORD *__fastcall sub_1AFC8(_DWORD *result);
_DWORD *__fastcall sub_1B028(_DWORD *result);
_DWORD *__fastcall sub_1B088(_DWORD *result);
_DWORD *__fastcall sub_1B0E8(_DWORD *result);
_DWORD *__fastcall sub_1B148(_DWORD *a1);
int __fastcall sub_1B20C(int result);
void *__fastcall sub_1B220(void *a1);
void *__fastcall sub_1B290(void *a1, char **a2);
android::RefBase **__fastcall sub_1B2F0(void *a1, android::RefBase *this);
int __fastcall sub_1B314(int a1, char **a2);
signed int __fastcall sub_1B39C(int a1, int a2, int a3);
void __fastcall sub_1B3AC(int a1);
int __fastcall sub_1B414(int a1, char **a2, int a3, int a4);
_DWORD *__fastcall sub_1B4A8(int a1);
int __fastcall sub_1B4B0(int a1);
_DWORD *__fastcall sub_1B4B8(int a1);
signed int __fastcall sub_1B4D0(int a1);
int __fastcall sub_1B57C(int a1, char **a2, char **a3);
int __fastcall sub_1B5F0(int a1, int a2);
int __fastcall sub_1B720(int a1);
int __fastcall sub_1B748(_DWORD *a1);
void __fastcall sub_1B774(int a1);
void __fastcall sub_1B7A0(char *a1);
int __fastcall sub_1B7D4(int a1);
int __fastcall sub_1B7DC(int a1);
int __fastcall sub_1B7E4(int a1);
int __fastcall sub_1B7F0(int a1);
int __fastcall sub_1B7F8(int a1);
int __fastcall sub_1B800(int a1);
int __fastcall sub_1B808(int a1);
int __fastcall sub_1B814(int a1);
int __fastcall sub_1B81C(int a1);
int __fastcall sub_1B824(int a1);
int __fastcall sub_1B830(int a1);
int __fastcall sub_1B838(int a1);
int __fastcall sub_1B840(int a1);
int __fastcall sub_1B84C(int a1);
int __fastcall sub_1B854(int a1);
int __fastcall sub_1B85C(int a1, int a2);
_DWORD *__fastcall sub_1B86C(int a1);
int __fastcall sub_1B8B8(int a1);
void __fastcall sub_1B91C(int a1);
signed int __fastcall sub_1B92C(int a1);
int __fastcall sub_1B958(_DWORD *a1);
void __fastcall sub_1B964(_DWORD *a1);
android::SurfaceFlinger *__fastcall android::SurfaceFlinger::SurfaceFlinger(android::SurfaceFlinger *this, int a2);
android::SortedVectorImpl *__fastcall sub_1BE90(android::SortedVectorImpl *a1);
unsigned int **__fastcall sub_1BF7C(unsigned int **a1);
signed int sub_1BFA8();
android::SurfaceFlinger *__fastcall android::SurfaceFlinger::SurfaceFlinger(android::SurfaceFlinger *this);
_DWORD *__fastcall sub_1C4EC(_DWORD *a1);
_DWORD *__fastcall sub_1C524(char *a1);
int __fastcall sub_1C530(int a1, int a2);
int __fastcall sub_1C820(int a1);
int __fastcall sub_1C870(int a1);
int __fastcall sub_1C89C(int a1);
int __fastcall sub_1C8F0(_DWORD *a1);
void __fastcall sub_1C920(int a1);
void __fastcall sub_1C984(int a1);
void __fastcall sub_1C9B8(int a1);
void __fastcall sub_1CA20(char *a1);
int __fastcall sub_1CA54(int a1);
_DWORD *__fastcall sub_1CAA0(int a1);
int __fastcall sub_1CB18(int a1);
android::Nsd *__fastcall sub_1CB20(_DWORD *a1, char *a2);
_DWORD *__fastcall sub_1CB98(const void *a1, _DWORD *a2, const android::String8 *a3, char a4);
int __fastcall sub_1CCD0(android::SortedVectorImpl *a1, int a2, int a3);
int __fastcall sub_1CD1C(int a1, char **a2);
int __fastcall sub_1CDF0(android::SortedVectorImpl *a1, int a2);
unsigned int __fastcall sub_1CE3C(int a1, int a2);
_DWORD *__fastcall sub_1CE68(int a1, int a2);
char *__fastcall sub_1CF18(void *a1, int a2, unsigned int a3);
char *__fastcall sub_1CF64(const void *a1);
int __fastcall sub_1CFB0(int a1);
int __fastcall sub_1D0D4(int a1);
int __fastcall sub_1D0DC(int a1);
_DWORD *__fastcall sub_1D11C(int a1, int a2);
int __fastcall sub_1D1A0(int a1, char **a2, int a3, int a4);
int __fastcall sub_1D854(android::SortedVectorImpl *a1, int a2, unsigned int **a3);
int __fastcall sub_1D88C(int a1, int a2, __int64 a3, char a4, int a5);
int __fastcall sub_1D918(int a1);
int __fastcall sub_1D94C(int a1, int a2);
unsigned int **__fastcall sub_1D9D0(int a1, int a2);
signed int __fastcall sub_1DA4C(int a1, int a2, int a3);
signed int __fastcall sub_1DA9C(int a1);
int __fastcall sub_1DADC(int a1);
int __fastcall sub_1DAE8(int a1);
signed int __fastcall sub_1DAF4(int a1, char **a2);
signed int __fastcall sub_1DB98(int a1, _DWORD *a2, android::VectorImpl *a3);
signed int __fastcall sub_1DDF0(int a1, int a2, int a3);
int __fastcall sub_1DE28(int a1, char **a2);
int __fastcall sub_1DEAC(int a1, int *a2, int a3);
int __fastcall sub_1DF54(int a1, char **a2, int a3);
int __fastcall sub_1DFF0(int a1, char **a2, int a3, int a4);
int __fastcall sub_1E010(int a1);
int __fastcall sub_1E034(int a1, int a2);
char *__fastcall sub_1E058(const void *a1, int a2);
int __fastcall sub_1E094(int a1);
void __fastcall __noreturn android::SurfaceFlinger::run(android::SurfaceFlinger *this);
int __fastcall sub_1E0AC(int a1);
int __fastcall sub_1E0F0(int a1, int a2);
int __fastcall sub_1E184(int a1, int a2);
int __fastcall sub_1E1D4(int a1, int a2, unsigned int a3, unsigned int a4);
int __fastcall sub_1E234(int a1, unsigned int a2, int a3);
int __fastcall sub_1E304(android::SortedVectorImpl *a1, int a2);
ssize_t __fastcall sub_1E358(int a1, unsigned int a2, int a3, signed int a4);
ssize_t __fastcall sub_1E428(int a1, int a2);
_BOOL4 __fastcall sub_1E540(int a1, int a2);
ssize_t __fastcall sub_1E5F8(int a1, int a2);
int __fastcall sub_1E6EC(int a1);
ssize_t __fastcall sub_1E7BC(int a1, int a2);
ssize_t __fastcall sub_1E7C4(int a1);
_BOOL4 __fastcall sub_1E9D8(int a1);
int __fastcall sub_1EB1C(int a1);
int __fastcall sub_1EB5C(int a1);
unsigned int __fastcall sub_1EF80(int a1);
signed int __fastcall sub_1F388(int a1);
ssize_t __fastcall sub_1F4F8(int a1, int a2);
unsigned int **__fastcall sub_1F66C(int a1);
signed int __fastcall sub_1F7D0(int a1, int *a2, int a3);
ssize_t __fastcall sub_1FC0C(int a1);
signed int __fastcall sub_1FE84(int a1, int a2, signed int *a3, _BYTE *a4);
int __fastcall sub_200B4(int result);
signed int __fastcall sub_200BC(int a1, int a2, int *a3);
ssize_t __fastcall sub_201C4(int a1, int a2, int a3, int a4);
int __fastcall sub_20548(int a1, int a2, int a3, _DWORD *a4, _BYTE *a5);
_BOOL4 __fastcall sub_2065C(int a1, int *a2);
signed int __fastcall sub_206AC(int a1);
signed int __fastcall sub_206BC(int a1);
char *__fastcall sub_20704(char *result);
int __fastcall sub_2076C(int a1, int *a2, int a3);
int __fastcall sub_2098C(int a1);
unsigned int __fastcall sub_209D8(int a1, char a2);
int __fastcall sub_212CC(android::SortedVectorImpl *this, int a2);
void *__fastcall sub_21314(void *a1, char **a2);
void *__fastcall sub_2134C(void *a1, int a2);
unsigned int **__fastcall sub_2138C(unsigned int **a1, unsigned int **a2);
unsigned int __fastcall sub_213D4(int a1, int a2, int a3);
int __fastcall sub_21410(int a1);
unsigned int __fastcall sub_214D8(int a1);
int __fastcall sub_215E8(void *a1, int *a2, char **a3, char **a4, void *a5);
int __fastcall sub_216B4(int a1, const void *a2);
ssize_t __fastcall sub_2171C(int a1, int a2, int a3, char a4);
signed int __fastcall sub_21A00(int a1, int a2);
signed int __fastcall sub_21CB0(int a1, int *a2, char **a3);
int __fastcall sub_21E18(int result, int a2, unsigned int a3);
int __fastcall sub_21EBC(int a1, int a2);
int __fastcall sub_21EC4(int a1, int a2);
int __fastcall sub_21ECC(int a1, int a2);
int __fastcall sub_21EDC(int a1, int a2);
int __fastcall sub_21EEC(int a1);
int __fastcall sub_21F40(int a1, int a2);
void sub_21FB8();
ssize_t __fastcall sub_21FEC(int a1, const char *a2, int a3);
int __fastcall sub_220A0(int, void *, int, int, int, int, int, int, int); // idb
int __fastcall sub_22188(int a1, int a2, int a3, int a4, int a5, void *a6, int *a7, void *a8, void *a9, _DWORD *a10);
int __fastcall sub_22274(int a1, int a2, void *a3, int a4, void *a5, unsigned int a6, void *a7, void *a8, _DWORD *a9);
int __fastcall sub_22300(int a1, int *a2, char **a3);
int __fastcall sub_22378(int a1, int a2);
int __fastcall sub_223FC(int a1);
int __fastcall sub_22598(int a1, int *a2, int a3);
_DWORD *__fastcall sub_22714(int a1, char **a2, int a3);
int __fastcall sub_227B0(int a1, int a2, int a3);
int __fastcall sub_22A90(int result, int a2, int a3, android::String8 *a4);
int __fastcall sub_22AF0(int a1, int a2, _DWORD *a3, android::String8 *a4);
int __fastcall sub_22BA0(int a1, int a2, _DWORD *a3);
int __fastcall sub_22C38(int a1, android::String8 *a2);
unsigned int **__fastcall sub_22D60(int a1, int a2, _DWORD *a3, android::String8 *a4);
int __fastcall sub_234E0(int a1, int a2, int a3);
android::SyncFeatures *sub_234F0();
int __fastcall sub_2353C(int a1, int a2);
void *__fastcall sub_2361C(void *a1, int a2);
void *__fastcall sub_23644(void *a1, char **a2);
int sub_23680(); // weak
signed int __fastcall sub_23704(int a1);
signed int __fastcall sub_23714(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
signed int __fastcall sub_23CCC(int a1, char **a2, char **a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, char a12, unsigned int a13);
int __fastcall sub_23FB8(int a1, char **a2);
int __fastcall sub_24044(int a1);
ssize_t __fastcall sub_24070(int a1, int *a2, signed int a3, signed int a4, int a5, signed int a6, int a7, int a8, unsigned int a9, unsigned int a10, int a11, int a12);
int __fastcall sub_2435C(int a1, int *a2, int a3, signed int a4, signed int a5, int a6, signed int a7, unsigned int a8, unsigned int a9, unsigned int a10, unsigned int a11, int a12, char a13);
int __fastcall sub_24704(int a1, int a2);
int __fastcall sub_248AC(int a1);
void __fastcall sub_248E4(int a1);
int __fastcall sub_24920(int a1);
int __fastcall sub_24940(const void *a1, char *a2, _DWORD *a3);
int __fastcall sub_2499C(const void *a1, int a2, _DWORD *a3);
int __fastcall sub_249AC(int a1);
int __fastcall sub_24A2C(char *a1);
void __fastcall sub_24A68(char *a1);
int __fastcall sub_24AAC(int a1);
void __fastcall sub_24AE4(int a1);
int __fastcall sub_24B90(char *a1);
void __fastcall sub_24BCC(char *a1);
int sub_24C18();
int sub_24C20();
int sub_24C24();
int sub_24C2C();
int __fastcall sub_24C48(int a1);
void __fastcall sub_24C58(int a1);
int __fastcall sub_24C6C(char *a1);
void __fastcall sub_24C7C(char *a1);
int __fastcall sub_24CBC(char *a1);
void __fastcall sub_24CCC(char *a1);
int __fastcall sub_24CE8(int a1);
void *__fastcall sub_24F24(void *a1, _DWORD *a2);
_DWORD *__fastcall sub_25164(void *a1, _DWORD *a2);
int __fastcall sub_251A0(int a1);
int __fastcall sub_2527C(_DWORD *a1);
void __fastcall sub_25288(_DWORD *a1);
int __fastcall sub_252A0(int a1);
void __fastcall sub_252C8(int a1);
signed int __fastcall sub_252F8(int a1);
int __fastcall sub_25310(_DWORD *a1);
void __fastcall sub_2533C(char *a1);
int __fastcall sub_25370(int a1);
void __fastcall sub_25380(int a1);
int __fastcall sub_25394(char *a1);
void __fastcall sub_253A4(char *a1);
int __fastcall sub_253C0(int a1);
void __fastcall sub_253D0(int a1);
int __fastcall sub_253E4(char *a1);
void __fastcall sub_253F4(char *a1);
int __fastcall sub_25410(int a1);
void __fastcall sub_25438(int a1);
int __fastcall sub_25464(int a1, int a2);
int __fastcall sub_25540(int a1, char **a2);
int __fastcall sub_25564(int a1, int a2, unsigned int a3, unsigned int a4);
int __fastcall sub_25674(int a1, int a2, int a3, int a4);
int __fastcall sub_25720(int a1);
void __fastcall sub_25748(int a1);
int __fastcall sub_25778(int a1, int a2, int a3, int a4);
int __fastcall sub_25780(_DWORD *a1);
void __fastcall sub_257AC(char *a1);
int __fastcall sub_257E0(int a1, int a2);
int __fastcall sub_2582C(int a1);
int __fastcall sub_2587C(int a1);
void __fastcall sub_258D4(int a1);
signed int __fastcall sub_25930(int a1);
int __fastcall sub_25A70(char *a1);
void __fastcall sub_25AD4(char *a1);
int __fastcall sub_25B3C(android::VectorImpl *this); // idb
void __fastcall sub_25B64(android::VectorImpl *this);
void __fastcall sub_25B9C(int a1, int a2, int a3, int a4);
void __fastcall sub_25BEC(int a1, int a2, int a3, int a4);
void __fastcall sub_25C38(int a1, int a2, int a3, int a4);
void __fastcall sub_25C9C(int a1, int a2, int a3, int a4);
int __fastcall sub_25CEC(pthread_mutex_t *a1);
int __fastcall sub_25D18(int a1);
void __fastcall sub_25D40(int a1);
signed int __fastcall sub_25D70(int a1);
int __fastcall sub_25D80(_DWORD *a1);
void __fastcall sub_25DAC(char *a1);
int __fastcall sub_25DE0(int a1);
void __fastcall sub_25E38(int a1);
signed int __fastcall sub_25E94(int a1);
int __fastcall sub_25F68(char *a1);
void __fastcall sub_25FCC(char *a1);
android::GraphicBufferAllocator *sub_26034();
int __fastcall sub_26208(int a1, int *a2);
int __fastcall sub_2629C(int a1);
void __fastcall sub_2631C(int a1);
int __fastcall sub_263A4(int a1, int *a2);
int __fastcall sub_263AC(char *a1);
void __fastcall sub_26430(char *a1);
int __fastcall sub_264BC(int a1);
void __fastcall sub_26528(int a1);
signed int __fastcall sub_26598(int a1);
int __fastcall sub_266D4(char *a1);
void __fastcall sub_2674C(char *a1);
_DWORD *__fastcall sub_267C8(_DWORD *a1, int a2);
void *__fastcall sub_26A44(void *a1, int a2);
void *__fastcall sub_26A88(void *a1, int a2, int a3);
_DWORD *__fastcall sub_26B1C(void *a1, int a2, unsigned int **a3);
signed int __fastcall sub_272BC(int a1, _DWORD **a2, int a3, int a4, int a5, int a6);
int __fastcall sub_274A8(int a1, int a2);
int __fastcall sub_274B0(_DWORD *a1, int a2, android::RefBase **a3);
int __fastcall sub_274F0(int a1);
int __fastcall sub_2754C(int a1);
int __fastcall sub_27554(int a1);
int __fastcall sub_2755C(int a1, int a2);
int __fastcall sub_27570(int a1, int a2);
int __fastcall sub_275BC(int a1);
android::ConsumerBase *__fastcall sub_2762C(android::ConsumerBase *this);
void __fastcall sub_27654(android::ConsumerBase *this);
int __fastcall sub_27680(char *a1);
void __fastcall sub_276AC(char *a1);
int __fastcall sub_276E0(int a1);
void __fastcall sub_276F0(int a1);
int __fastcall sub_27708(char *a1);
void __fastcall sub_27718(char *a1);
int __fastcall sub_27734(int a1);
void __fastcall sub_27798(int a1);
int __fastcall sub_27800(char *a1);
void __fastcall sub_2786C(char *a1);
int __fastcall sub_278DC(android::ConsumerBase *this, int a2);
int __fastcall sub_279A4(int result);
int __fastcall sub_279FC(int result, int a2);
int __fastcall sub_27A30(int a1, char a2);
signed int __fastcall sub_27A5C(int a1, char a2, int a3, int a4);
int __fastcall sub_27B8C(int result, int a2, int _R2);
int __fastcall sub_27CC4(int a1, int a2);
signed int __fastcall sub_27CD0(int a1);
signed int __fastcall sub_27CE8(int _R0);
int __fastcall sub_27E30(int a1);
int __fastcall sub_27E34(int a1);
int __fastcall sub_27E38(int result, int _R1, int _R2);
int __fastcall sub_27E70(int result, int a2, int a3, int a4, int a5);
void __fastcall sub_27E8C(int a1, int _R1, int _R2, int _R3);
float __fastcall sub_27ED8(int a1, int a2, int _R2);
int __fastcall sub_280A4(int a1, int a2, int a3);
signed int __fastcall sub_28188(int a1);
int __fastcall sub_281A0(int a1, int a2);
int __fastcall sub_28270(int a1);
int __fastcall sub_28280(int a1);
int __fastcall sub_28290(int a1, int a2, unsigned int a3, int a4);
int sub_28374();
int sub_2837C();
int sub_28384();
int __fastcall sub_28388(int a1, void *a2, unsigned int **a3);
android::RefBase *__fastcall sub_284D0(int a1);
signed int __fastcall sub_28554(android::ConsumerBase *a1, int a2);
unsigned int **__fastcall sub_28574(int a1);
unsigned int **__fastcall sub_28600(int a1);
int __fastcall sub_28610(int a1);
int __fastcall sub_2861C(int a1, android::String8 *a2);
int __fastcall sub_28624(int a1, android::String8 *a2, const char *a3);
int __fastcall sub_28668(char *a1);
void __fastcall sub_28678(char *a1);
android::ConsumerBase *__fastcall sub_28694(android::ConsumerBase *this);
void __fastcall sub_286BC(android::ConsumerBase *this);
int __fastcall sub_286F0(int a1);
void __fastcall sub_28718(int a1);
int __fastcall sub_2874C(char *a1);
void __fastcall sub_28778(char *a1);
int __fastcall sub_287AC(android::ConsumerBase *this, int a2);
int sub_28B08();
unsigned int __fastcall sub_28B6C(int a1);
int __fastcall sub_28C98(int a1, unsigned int a2, int a3, signed int a4);
int __fastcall sub_290D8(int a1, int a2);
signed int __fastcall sub_2914C(int a1);
int __fastcall sub_291A8(int a1);
signed int __fastcall sub_29228(int a1);
signed int __fastcall sub_29364(int a1, signed int a2, unsigned int a3, unsigned int a4, int a5);
unsigned int __fastcall sub_293D4(int a1);
signed int __fastcall sub_29448(int a1, signed int a2);
unsigned __int64 __fastcall sub_29480(int a1, int a2);
unsigned int **__fastcall sub_294E4(unsigned int **result, int a2, int a3);
signed int __fastcall sub_2950C(int a1, unsigned int a2);
int __fastcall sub_29530(int a1, int a2);
int __fastcall sub_29540(int a1, int a2);
int __fastcall sub_29558(int a1, int a2);
int __fastcall sub_29570(int a1, int a2);
int __fastcall sub_29588(int a1, int a2);
__int64 __fastcall sub_295A0(int a1, int a2);
int __fastcall sub_295BC(int a1, int a2);
int __fastcall sub_295C8(int a1, int a2);
signed int __fastcall sub_295F8(int a1, unsigned int a2, int a3);
signed int __fastcall sub_29640(int a1, unsigned int a2, unsigned int a3);
signed int __fastcall sub_297AC(int a1, unsigned int a2, android::Fence **a3, int a4);
char *__fastcall sub_29820(int a1, const char *a2, char a3);
int __fastcall sub_29840(int a1);
signed int __fastcall sub_29848(int a1, int a2, int a3, int a4, int a5, int a6);
signed int __fastcall sub_29CC0(int a1, const char *a2);
int (__fastcall **__fastcall sub_29D00(int *a1, char *a2))(_DWORD, _DWORD, _DWORD, _DWORD);
int __fastcall sub_29FD4(int a1);
int __fastcall sub_29FF8(int a1);
int __fastcall sub_2A004(int result, int a2);
int __fastcall sub_2A020(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_2A034(int result, int a2);
int __fastcall sub_2A044(int a1);
signed int __fastcall sub_2A21C(int a1, unsigned int a2);
int __fastcall sub_2A254(int a1, unsigned int a2);
signed int __fastcall sub_2A294(int a1, unsigned int a2);
unsigned int *__fastcall sub_2A2CC(unsigned int **a1, int a2, unsigned int a3);
int __fastcall sub_2A38C(int a1);
int __fastcall sub_2A4CC(int a1, unsigned int a2, int a3);
int __fastcall sub_2A514(int a1, int a2);
int __fastcall sub_2A554(int a1, int a2);
int __fastcall sub_2A5A4(int a1, int a2);
int __fastcall sub_2A5F4(int a1, int a2);
int __fastcall sub_2A634(int a1);
int __fastcall sub_2A674(int a1);
int __fastcall sub_2A6B4(int a1);
int __fastcall sub_2A6F0(int a1);
int __fastcall sub_2A730(int a1, int a2);
int __fastcall sub_2A784(int a1, int a2, int a3);
int __fastcall sub_2A7FC(int a1, int a2, int a3);
signed int __fastcall sub_2A898(int a1);
signed int __fastcall sub_2A8B4(int a1);
signed int __fastcall sub_2A8D0(int a1, unsigned int a2, android::Fence **a3, int a4);
int __fastcall sub_2A944(int a1, android::String8 *a2);
signed int __fastcall sub_2A9A8(int a1, signed int a2, unsigned int **a3, int a4);
unsigned int **__fastcall sub_2A9F4(unsigned int **result, int a2, unsigned int a3);
int __fastcall sub_2AA60(int a1, int a2, int a3);
unsigned int __fastcall sub_2AA84(unsigned int result, int a2, unsigned int a3, unsigned int a4);
unsigned int __fastcall sub_2AAEC(unsigned int a1, int a2, unsigned int a3);
unsigned int __fastcall sub_2AAFC(unsigned int a1, int a2, unsigned int a3);
int __fastcall sub_2AB78(int a1, android::String8 *a2);
int __fastcall sub_2B1E8(char *a1);
int __fastcall sub_2B300(android::VectorImpl *a1);
android::Thread *__fastcall sub_2B3D0(int a1);
void __fastcall sub_2B424(int a1);
int __fastcall sub_2B47C(char *a1);
void __fastcall sub_2B4D0(char *a1);
signed int __fastcall sub_2B948(int a1);
int __fastcall sub_2BA24(int a1, int a2, android::String8 *a3, char **a4, char **a5, int a6, android::String8 *a7);
int __fastcall sub_2BC3C(int a1, int a2);
int __fastcall sub_2BCDC(int a1);
int __fastcall sub_2BD04(int a1);
int __fastcall sub_2BD54(int a1);
int __fastcall sub_2BD7C(_DWORD *a1);
void __fastcall sub_2BDA8(int a1);
void __fastcall sub_2BDD4(int a1);
void __fastcall sub_2BE38(int a1);
void __fastcall sub_2BE6C(char *a1);
int __fastcall sub_2BEA0(int a1, char a2);
int __fastcall sub_2BF60(int a1);
int __fastcall sub_2BFD4(int a1, signed int a2);
int sub_2C0A0();
signed int __fastcall sub_2C0A4(int a1);
unsigned int **__fastcall sub_2C220(unsigned int **result);
int __fastcall sub_2C4A8(int result, int a2, int a3);
int __fastcall sub_2C4BC(int a1, int a2, void *a3);
int __fastcall sub_2C554(int a1, int a2, void *a3);
int __fastcall sub_2C55C(int a1);
int __fastcall sub_2C568(int a1);
int __fastcall sub_2C574(int a1, unsigned int a2, int a3, int a4, int *a5, int a6);
int __fastcall sub_2C6EC(int a1, signed int *a2, unsigned int **a3, int a4, int a5, int a6, int a7, int a8);
int __fastcall sub_2C864(int a1, signed int *a2, unsigned int **a3, int a4, int a5, int a6, int a7, int a8);
signed int __fastcall sub_2C86C(int a1);
signed int __fastcall sub_2C89C(int a1);
signed int __fastcall sub_2C8CC(int a1);
signed int __fastcall sub_2C8FC(int a1);
signed int __fastcall sub_2C92C(int a1);
signed int __fastcall sub_2C95C(int a1);
int __fastcall sub_2C98C(int a1, int a2, int a3, int a4);
int __fastcall sub_2CB00(int a1, int a2, int a3, int a4);
int __fastcall sub_2CB08(int a1, int a2);
int __fastcall sub_2CBAC(int a1, int a2);
int __fastcall sub_2CBB4(int a1, int a2, _DWORD *a3);
int __fastcall sub_2CBD8(int a1, int a2, _DWORD *a3);
int __fastcall sub_2CBFC(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_2CC44(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_2CC4C(int a1);
int __fastcall sub_2CC58(int a1);
signed int sub_2CC64();
signed int sub_2CC6C();
signed int sub_2CC7C();
signed int sub_2CC84();
signed int sub_2CC8C();
signed int sub_2CCB8();
int __fastcall sub_2CCE4(android::String8 *a1);
int __fastcall sub_2CD00(android::String8 *a1);
int __fastcall sub_2CD1C(int a1);
void __fastcall sub_2CD54(int a1);
int __fastcall sub_2CD90(int a1);
int __fastcall sub_2CD98(const void *a1, char *a2, _DWORD *a3);
int __fastcall sub_2CDF4(const void *a1, int a2, _DWORD *a3);
int __fastcall sub_2CE04(int a1);
int __fastcall sub_2CE84(char *a1);
void __fastcall sub_2CEC0(char *a1);
int __fastcall sub_2CF04(int a1);
void __fastcall sub_2CF3C(int a1);
int __fastcall sub_2CFE8(char *a1);
void __fastcall sub_2D024(char *a1);
int __fastcall sub_2D064(int result);
int __fastcall sub_2D0A8(int result, int a2);
int __fastcall sub_2D0B8(int result, int a2);
int __fastcall sub_2D0C8(int a1);
void __fastcall sub_2D0E0(int a1);
int sub_2D82C();
pthread_mutex_t *__fastcall sub_2D870(pthread_mutex_t *mutex, int a2);
pthread_mutex_t *__fastcall sub_2D8AC(pthread_mutex_t *a1);
int __fastcall sub_2D8B8(int a1, _DWORD *a2, int *a3, int a4);
int __fastcall sub_2D958(int result, char a2);
int __fastcall sub_2D988(int a1, _DWORD *a2);
int __fastcall sub_2D9D8(int result, int a2);
int __fastcall sub_2DA08(int a1);
int __fastcall sub_2DA70(_DWORD *a1, int *a2, int a3);
int __fastcall sub_2DA8C(int a1);
int __fastcall sub_2DB30(int a1);
int __fastcall sub_2DB40(int result, int _R1);
int __fastcall sub_2DB64(int result, int a2);
int __fastcall sub_2DB70(int result, int a2);
signed int __fastcall sub_2DB7C(int a1, int a2);
int __fastcall sub_2DB98(int result);
int __fastcall sub_2DBA0(int result, int a2, int a3, int a4, int a5);
int __fastcall sub_2DBB8(int result, int a2);
int __fastcall sub_2DC24(int result, int a2);
int __fastcall sub_2DD08(int a1);
int __fastcall sub_2DD0C(int a1, int a2, unsigned int a3, int a4, unsigned int a5);
void **__fastcall sub_2DDB0(void **a1);
int __fastcall sub_2DDC0(int a1);
int __fastcall sub_2DDC4(int a1);
int __fastcall sub_2DDC8(int a1);
int __fastcall sub_2DDD4(int a1);
int __fastcall sub_2DDD8(int a1);
int __fastcall sub_2DDDC(int a1);
int __fastcall sub_2DDE0(int a1);
int __fastcall sub_2DDE8(int a1, int a2, int a3, int a4);
int __fastcall sub_2DFCC(int a1, int a2, int a3);
int __fastcall sub_2E074(int a1);
int __fastcall sub_2E078(int a1);
int __fastcall sub_2E080(int a1, int *a2);
int sub_2E0E8();
int __fastcall sub_2E150(int a1);
int __fastcall sub_2E224(int *a1);
int __fastcall sub_2E268(int *a1, int a2);
int __fastcall sub_2E2D8(android::String8 *a1, _BYTE *a2);
android::String8 *__fastcall sub_2E3B0(android::String8 *this, char *a2);
int __fastcall sub_2E404(android::String8 *a1, int *a2);
int __fastcall sub_2E61C(int a1, int a2);
int sub_2E738();
int __fastcall sub_2E780(int a1);
int __fastcall sub_2E7D4(char *a1, const char *a2, const char *a3, const char *a4, char *a5);
signed int __fastcall sub_2E884(int a1, const char *a2);
int __fastcall sub_2E8B8(int a1);
int __fastcall sub_2EE10(char *s); // idb
int __fastcall sub_2EECC(int result);
void **__fastcall sub_2EF28(float a1, float a2, float a3, int a4, int a5, int a6, int a7);
void j_j_j_glFlush(void);
void __fastcall sub_2F07C(int a1, GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha);
void __fastcall sub_2F09C(int a1, GLint x, GLint y, GLsizei width, GLsizei height);
void sub_2F0BC();
void j_j_j_glFinish(void);
void __fastcall sub_2F0C8(int a1, GLsizei a2, GLuint *a3);
void __fastcall sub_2F0D0(int a1, GLsizei a2, const GLuint *a3);
_DWORD *__fastcall sub_2F138(_DWORD *a1, void (__fastcall ***a2)(_DWORD, _DWORD, _DWORD, _DWORD), int a3);
int __fastcall sub_2F190(int a1);
signed int __fastcall sub_2F1A4(int a1);
signed int __fastcall sub_2F1B8(int a1, signed int a2, int a3, _DWORD *a4);
int __fastcall sub_2F4F0(int result);
int __fastcall sub_2F538(int result, int a2, int a3);
int __fastcall sub_2F57C(int result, int a2, int a3);
int __fastcall sub_2F584(int a1, int a2);
int __fastcall sub_2F624(int result, char a2);
int __fastcall sub_2F628(int result, int a2, int a3);
int __fastcall sub_2F630(int a1);
int __fastcall sub_2F634(int a1);
int __fastcall sub_2F6E0(int a1);
int __fastcall sub_2FCD0(int a1);
int __fastcall sub_2FDCC(int a1);
float *__fastcall sub_30188(int a1, int _R1, int a3);
int __fastcall android::SurfaceFlingerEx::checkIfSupportLauncherNsd(android::SurfaceFlingerEx *this);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportLauncherNsd(int a1);
_DWORD *__fastcall android::SurfaceFlingerEx::signalDrawLayer(android::SurfaceFlingerEx *this);
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalDrawLayer(int a1);
_DWORD *__fastcall android::SurfaceFlingerEx::signalClearMessage(android::SurfaceFlingerEx *this);
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalClearMessage(int a1);
signed __int64 __fastcall android::SurfaceFlingerEx::setCurrentInvalidateTime(android::SurfaceFlingerEx *this);
signed __int64 __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::setCurrentInvalidateTime(int a1);
signed int __fastcall android::SurfaceFlingerEx::captureScreen(int a1, char **a2, char **a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, char a12, unsigned int a13);
int __fastcall android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2);
int __fastcall android::SurfaceFlingerEx::handleNsdInvalidate(android::SurfaceFlingerEx *this);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdInvalidate(int a1);
int __fastcall android::SurfaceFlingerEx::handleNsdRefresh(android::SurfaceFlingerEx *this);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdRefresh(int a1);
int __fastcall sub_30A50(int a1);
int __fastcall sub_30AA4(int a1, int a2);
android::RefBase *__fastcall android::SurfaceFlingerEx::initNsd(android::SurfaceFlingerEx *this, char *a2, int a3);
android::RefBase *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::initNsd(int a1, char *a2, int a3);
unsigned int __fastcall sub_30B3C(const char **a1, const char *a2);
int __fastcall sub_30B4C(int a1, int a2);
pthread_mutex_t **__fastcall sub_30B64(pthread_mutex_t **a1);
int __fastcall sub_30B72(pthread_mutex_t *a1);
_QWORD *__fastcall sub_30B7C(_QWORD *a1, int a2);
int __fastcall android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 this);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 a1);
int __fastcall android::SurfaceFlingerEx::captureScreenForKeyguard(int a1, int a2, int a3);
android::SurfaceFlingerEx *__fastcall android::SurfaceFlingerEx::SurfaceFlingerEx(android::SurfaceFlingerEx *this, int a2);
android::SurfaceFlingerEx *__fastcall android::SurfaceFlingerEx::SurfaceFlingerEx(android::SurfaceFlingerEx *this);
android::SurfaceFlingerEx *__fastcall android::createMyComponentSurface(android *this, void *a2);
int __fastcall android::SurfaceFlingerEx::initHwModule(android::SurfaceFlingerEx *this);
int __fastcall android::launchHuawerMediaService(android *this, void *a2);
int __fastcall android::SurfaceFlingerEx::getScreenWidthAndHeight(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::checkIfSupportCursorNsd(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::checkIfSupportNsd(android::SurfaceFlingerEx *this);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportNsd(int a1);
unsigned int __fastcall android::SurfaceFlingerEx::checkIfSupportDuplicate(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::bootFinished(android::SurfaceFlingerEx *this);
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::bootFinished(int a1);
int __fastcall android::SurfaceFlingerEx::handleNsdCursorCmd(android::SurfaceFlingerEx *this);
signed int __fastcall android::SurfaceFlingerEx::nsdOnTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::nsdOnTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall android::SurfaceFlingerEx::handleNsdDrawLauncher(__int64 this);
int __fastcall android::SurfaceFlingerEx::handleNsdDrawCursor(__int64 this);
int __fastcall android::SurfaceFlingerEx::handleNsdRefreshTime(android::SurfaceFlingerEx *this, __int32 a2);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::addBlackList(android::SurfaceFlingerEx *this);
signed int __fastcall android::SurfaceFlingerEx::isBlackPackage(android::SurfaceFlingerEx *this);
int __fastcall android::SurfaceFlingerEx::setSdrEnterFlag(android::SurfaceFlingerEx *this, int a2);
int __fastcall android::SurfaceFlingerEx::restoreSdr(android::SurfaceFlingerEx *this, float _R1, int a3);
int __fastcall android::SurfaceFlingerEx::resetSdr(int result, float _R1, int a3);
unsigned int **__fastcall android::sp<android::DisplayDevice const>::~sp(unsigned int **a1);
unsigned int **__fastcall android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(unsigned int **result, unsigned int **a2);
unsigned int **__fastcall android::SurfaceFlingerEx::handleSdrSetHwComposer(android::SurfaceFlingerEx *this);
unsigned int **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetHwComposer(int a1);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::getVisibleLayerInfo(android::SurfaceFlingerEx *this, android::Parcel *a2);
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::getVisibleLayerInfo(int a1, android::Parcel *a2);
void *__fastcall android::sp<android::GraphicBuffer>::~sp(void *a1);
signed int __fastcall android::SurfaceFlingerEx::isSdrCase(android::SurfaceFlingerEx *this);
signed int __fastcall android::SurfaceFlingerEx::onTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::fillBlack(android::SurfaceFlingerEx *this);
void *__fastcall android::sp<android::Layer>::sp(void *a1, char **a2);
void *__fastcall android::sp<android::Layer>::~sp(void *a1);
pthread_mutex_t **__fastcall sub_321B4(int a1);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleNsdCmd(android::SurfaceFlingerEx *this);
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdCmd(int a1);
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleApsIdentify(android::SurfaceFlingerEx *this, int a2);
_QWORD *__fastcall android::SurfaceFlingerEx::onMessageReceived(__int64 this, int a2);
_QWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onMessageReceived(__int64 a1, int a2);
int __fastcall sub_32A4A(void *dest, int, int, int, int, int, int, int, int); // idb
int __fastcall sub_32B32(void *src, int, int, int, int, int, int, int); // idb
android::Nsd *__fastcall android::Nsd::Nsd(android::Nsd *this);
android::Thread *__fastcall sub_32C14(android::Thread *this, int a2, int a3);
android::Thread *__fastcall sub_32CB2(android::Thread *a1, int a2);
int __fastcall android::Nsd::setSfFlag(int result, int a2);
int __fastcall android::Nsd::getVisibleLayerInfo(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
void __fastcall android::Nsd::PrepareBufferThread::prepareBuffer(android::Nsd::PrepareBufferThread *this, void *dest, void *src, int a4, int a5, int a6, int a7, int a8);
int __fastcall android::Nsd::PrepareBufferThread::threadLoop(android::Nsd::PrepareBufferThread *this);
int __fastcall android::Nsd::PrepareBufferThread::setBufferPara(int result, void *a2, unsigned int *a3, int a4, int a5, int a6, int a7, int a8);
signed int __fastcall android::Nsd::process(int a1, unsigned int *a2, int a3, int a4, int a5);
int __fastcall android::Nsd::setRefreshTime(int result, __int32 a2);
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this);
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this);
void *__fastcall android::sp<android::GraphicBuffer>::sp(void *a1, android::RefBase **a2);
signed int __fastcall android::Nsd::preDraw(int a1, int *a2);
signed int __fastcall android::Nsd::doDraw(android::Nsd *this, __int32 a2, int a3);
signed int __fastcall android::Nsd::cursorOnTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall android::Nsd::setCursorBmp(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
signed int __fastcall android::Nsd::onTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall android::Nsd::doCursorDraw(android::Nsd *this);
int __fastcall android::Nsd::clearCursor(int result);
android::RefBase **__fastcall android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this);
android::RefBase *__fastcall android::Nsd::onFirstRef(android::Nsd *this);
int __fastcall android::Nsd::nsd_is_exit_if_error(android::Nsd *this);
android::RefBase *__fastcall android::Nsd::init(int a1, char **a2, __int16 a3);
android::RefBase **__fastcall android::Nsd::nsd_exit(android::Nsd *this);
int sub_33E78();
int localPowerCtrllOfEglswapbuffer(void);
int getHwApsUtils(void);
int getLauncherIdle(void);
int getCursor(void);
int getExternalInterface(void);
signed int __fastcall sub_34124(int a1, int a2, unsigned int a3, unsigned int a4);
signed int __fastcall sub_34468(int a1, int a2, unsigned int a3, int a4, int *a5);
signed int __fastcall sub_3450C(int a1, int a2, unsigned int a3, int a4);
signed int __fastcall sub_34630(int a1, int a2, int a3);
void sub_34684();
void sub_3468C();
signed int __fastcall sub_34728(int a1, int a2, char a3);
void __fastcall sub_34840(int a1, int a2, int a3);
int __fastcall sub_348C4(int a1, int a2, int a3, int a4, int a5);
int __fastcall sub_348DC(int _R0);
int __fastcall sub_348E4(int _R0);
int __fastcall sub_348EC(int _R0);
void sub_348F4();
void sub_34938();
int __fastcall sub_3494C(int a1, int a2);
signed int __fastcall sub_3499C(int a1, int a2, _DWORD *a3);
signed int __fastcall sub_349CC(int a1, int a2, int a3);
signed int __fastcall sub_34A10(int a1, int a2, _QWORD *a3);
signed int __fastcall sub_34A40(int a1, int a2, int a3, int a4);
int __fastcall sub_34A78(int a1);
signed int __fastcall sub_34A80(int a1, int a2);
signed int __fastcall sub_34AA0(int a1);
int __fastcall sub_34AB8(int a1);
int __fastcall sub_34ED0(int a1, int a2);
void __fastcall sub_34F2C(int a1, int a2, int a3, int a4);
int __fastcall sub_34F60(int a1);
int sub_34FB0(); // weak
int __fastcall sub_35140(int result, int a2, int a3, _DWORD *a4, int a5, int a6, int a7, _DWORD *a8);
int sub_35818(); // weak
int __fastcall sub_3582C(int _R0);
int __fastcall sub_35834(int _R0);
int __fastcall sub_3583C(int _R0);
int __fastcall sub_35844(_DWORD *a1);
int __fastcall sub_35888(_DWORD *a1);
int __fastcall _aeabi_drsub(__int64 a1, __int64 a2);
int _subdf3(void); // weak
int __fastcall _aeabi_dadd(__int64 a1, __int64 a2);
int __fastcall _floatunsidf(int result);
int __fastcall _floatsidf(int result);
int __fastcall _extendsfdf2(int a1, int a2, int a3, unsigned int a4);
int __fastcall _floatundidf(__int64 a1);
int __fastcall _floatdidf(__int64 a1);
int __fastcall _aeabi_frsub(int a1, int a2, int a3, unsigned int a4);
int __fastcall _aeabi_fadd(int result, int a2, int a3, unsigned int a4);
void _floatunsisf();
int __fastcall _floatsisf(int result);
int __fastcall _floatundisf(__int64 a1);
int __fastcall _floatdisf(__int64 a1);
int _aeabi_ldiv0();
unsigned int __fastcall _fixdfdi(unsigned int a1, unsigned int a2);
unsigned int __fastcall _fixunsdfdi(unsigned int a1, unsigned int a2);
signed __int64 __fastcall _gnu_ldivmod_helper(signed __int64 a1, signed __int64 a2, _QWORD *a3);
unsigned __int64 __fastcall _gnu_uldivmod_helper(unsigned __int64 a1, unsigned __int64 a2, _QWORD *a3);
unsigned int __fastcall _lshrdi3(unsigned int a1, unsigned int a2, int a3);
unsigned int __fastcall _muldf3(unsigned int result, unsigned int a2, unsigned int a3, unsigned int a4);
void __fastcall _divdf3(unsigned int a1, unsigned int a2, unsigned int a3, unsigned int a4);
void __fastcall sub_366B8(int a1, int a2, int a3, unsigned int a4);
void _gtdf2();
void _ltdf2();
int __fastcall _nedf2(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4);
unsigned int __fastcall _aeabi_cdrcmple(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4);
void __fastcall __spoils<R1,R2,R3,R12> _aeabi_cdcmple(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4);
signed int __fastcall _aeabi_dcmpeq(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4);
signed int __fastcall _aeabi_dcmplt(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4);
signed int __fastcall _aeabi_dcmple(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4);
signed int __fastcall _aeabi_dcmpge(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4);
signed int __fastcall _aeabi_dcmpgt(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4);
unsigned int __fastcall _fixunsdfsi(unsigned int a1, int a2);
int __fastcall j_android::RefBase::~RefBase(android::RefBase *this);
int __fastcall android::RefBase::~RefBase(android::RefBase *this);
void __fastcall j_operator delete(void *a1);
void __fastcall operator delete(void *a1);
int j_j_pthread_mutex_unlock(pthread_mutex_t *mutex);
int j_pthread_mutex_unlock(pthread_mutex_t *mutex);
int __fastcall j_android::BnSurfaceComposerClient::onTransact(android::BnSurfaceComposerClient *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall android::BnSurfaceComposerClient::onTransact(android::BnSurfaceComposerClient *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5);
int __fastcall j_android::ISurfaceComposerClient::getInterfaceDescriptor(android::ISurfaceComposerClient *this);
int __fastcall android::ISurfaceComposerClient::getInterfaceDescriptor(android::ISurfaceComposerClient *this);
int __fastcall j_android::SortedVectorImpl::~SortedVectorImpl(android::SortedVectorImpl *this);
int __fastcall android::SortedVectorImpl::~SortedVectorImpl(android::SortedVectorImpl *this);
int __fastcall j_j___cxa_atexit(int a1, int a2, int a3);
int __fastcall j___cxa_atexit(int a1, int a2, int a3);
int __fastcall j_android::VectorImpl::~VectorImpl(android::VectorImpl *this);
int __fastcall android::VectorImpl::~VectorImpl(android::VectorImpl *this);
int __fastcall j_android::String8::setTo(android::String8 *this, const android::String8 *a2);
int __fastcall android::String8::setTo(android::String8 *this, const android::String8 *a2);
int __fastcall j_android::RefBase::renameRefId(android::RefBase *this, android::RefBase *a2, const void *a3, const void *a4);
int __fastcall android::RefBase::renameRefId(android::RefBase *this, android::RefBase *a2, const void *a3, const void *a4);
int __fastcall j_android::Thread::~Thread(android::Thread *this);
int __fastcall android::Thread::~Thread(android::Thread *this);
int __fastcall j_android::IDisplayEventConnection::~IDisplayEventConnection(android::IDisplayEventConnection *this);
int __fastcall android::IDisplayEventConnection::~IDisplayEventConnection(android::IDisplayEventConnection *this);
int __fastcall j_android::IDisplayEventConnection::getInterfaceDescriptor(android::IDisplayEventConnection *this);
int __fastcall android::IDisplayEventConnection::getInterfaceDescriptor(android::IDisplayEventConnection *this);
int __fastcall j_android::RefBase::renameRefId(android::RefBase *this, android::RefBase::weakref_type *a2, const void *a3, const void *a4);
int __fastcall android::RefBase::renameRefId(android::RefBase *this, android::RefBase::weakref_type *a2, const void *a3, const void *a4);
int __fastcall j_android::GLConsumer::setTransformHint(android::GLConsumer *this, unsigned int a2);
int __fastcall android::GLConsumer::setTransformHint(android::GLConsumer *this, unsigned int a2);
int __fastcall j_android::ConsumerBase::abandon(android::ConsumerBase *this);
int __fastcall android::ConsumerBase::abandon(android::ConsumerBase *this);
int __fastcall j_android::Region::operator=(int a1);
int __fastcall android::Region::operator=(int a1);
int __fastcall j_android::Region::clear(int a1);
int __fastcall android::Region::clear(int a1);
int __fastcall j_android::ISurfaceComposer::~ISurfaceComposer(android::ISurfaceComposer *this);
int __fastcall android::ISurfaceComposer::~ISurfaceComposer(android::ISurfaceComposer *this);
int __fastcall j_j_property_set(int a1, int a2);
int __fastcall j_property_set(int a1, int a2);
int j_j_pthread_cond_broadcast(pthread_cond_t *cond);
int j_pthread_cond_broadcast(pthread_cond_t *cond);
int __fastcall j_android::ISurfaceComposer::getInterfaceDescriptor(android::ISurfaceComposer *this);
int __fastcall android::ISurfaceComposer::getInterfaceDescriptor(android::ISurfaceComposer *this);
int __fastcall j_j___aeabi_memcpy(int a1, int a2);
int __fastcall j___aeabi_memcpy(int a1, int a2);
int j_j___aeabi_memmove();
int j___aeabi_memmove();
int __fastcall j_android::ConsumerBase::~ConsumerBase(android::ConsumerBase *this);
int __fastcall android::ConsumerBase::~ConsumerBase(android::ConsumerBase *this);
int __fastcall j_android::ConsumerBase::dump(android::ConsumerBase *this, android::String8 *a2);
int __fastcall android::ConsumerBase::dump(android::ConsumerBase *this, android::String8 *a2);
int __fastcall j_android::ConsumerBase::dumpLocked(android::ConsumerBase *this, android::String8 *a2, const char *a3);
int __fastcall android::ConsumerBase::dumpLocked(android::ConsumerBase *this, android::String8 *a2, const char *a3);
int j_j_close(int fd);
int j_close(int fd);
int __fastcall j_android::VectorImpl::clear(android::VectorImpl *this);
int __fastcall android::VectorImpl::clear(android::VectorImpl *this);
int __fastcall j_android::IGraphicBufferProducer::getInterfaceDescriptor(android::IGraphicBufferProducer *this);
int __fastcall android::IGraphicBufferProducer::getInterfaceDescriptor(android::IGraphicBufferProducer *this);
int __fastcall j_j_glUseProgram(int a1);
int __fastcall j_glUseProgram(int a1);
int __fastcall j_j_glUniformMatrix4fv(int a1, int a2, int a3, int a4);
int __fastcall j_glUniformMatrix4fv(int a1, int a2, int a3, int a4);
int j_j_strcmp(const char *s1, const char *s2);
int j_strcmp(const char *s1, const char *s2);
void j_j_glFlush(void);
void j_glFlush(void);
void j_j_glClear(GLbitfield mask);
void j_glClear(GLbitfield mask);
void j_j_glEnable(GLenum cap);
void j_glEnable(GLenum cap);
void j_j_glDisable(GLenum cap);
void j_glDisable(GLenum cap);
void j_j_glFinish(void);
void j_glFinish(void);
void j_j_glGenTextures(GLsizei n, GLuint *textures);
void j_glGenTextures(GLsizei n, GLuint *textures);
void j_j_glDeleteTextures(GLsizei n, const GLuint *textures);
void j_glDeleteTextures(GLsizei n, const GLuint *textures);
void j_j_glBlendFunc(GLenum sfactor, GLenum dfactor);
void j_glBlendFunc(GLenum sfactor, GLenum dfactor);
void j_j_glMatrixMode(GLenum mode);
void j_glMatrixMode(GLenum mode);
void j_j_glColor4f(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha);
void j_glColor4f(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha);
void j_j_glDisableClientState(GLenum cap);
void j_glDisableClientState(GLenum cap);
int j_j_glDisableVertexAttribArray();
int j_glDisableVertexAttribArray();
int __fastcall j_j_atrace_setup(int a1, int a2);
int __fastcall j_atrace_setup(int a1, int a2);
int __fastcall j_j___android_log_print(int a1, int a2, const char *a3);
int __fastcall j___android_log_print(int a1, int a2, const char *a3);
int __fastcall j_j_j__ZN7android3Nsd14setRefreshTimeEl(android::Nsd *this, __int32 a2);
int __fastcall j_android::Nsd::setRefreshTime(android::Nsd *this, __int32 a2);
int __fastcall j_j_j__ZN7android16SurfaceFlingerEx15setSdrEnterFlagEb(android::SurfaceFlingerEx *this, int a2);
int __fastcall j_android::SurfaceFlingerEx::setSdrEnterFlag(android::SurfaceFlingerEx *this, int a2);
void *j_j_memcpy(void *dest, const void *src, size_t n);
void *j_memcpy(void *dest, const void *src, size_t n);
android::RefBase **__fastcall j_j_j__ZN7android2spINS_16LauncherIdleBaseEEaSEPS1__0(void *a1, android::RefBase *this);
android::RefBase **__fastcall j_android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this);
void sub_36E7C();
void sub_36E80();
int __fastcall sub_36E8C(_DWORD *a1);
int __fastcall sub_36E90(_DWORD *a1);
// int __register_atfork(void); weak
// _DWORD __cdecl android::SortedVectorImpl::SortedVectorImpl(android::SortedVectorImpl *__hidden this, unsigned int, unsigned int); idb
// _DWORD __cdecl android::SortedVectorImpl::~SortedVectorImpl(android::SortedVectorImpl *__hidden this); idb
// _DWORD android::ISurfaceComposerClient::ISurfaceComposerClient(android::ISurfaceComposerClient *__hidden this); idb
// _DWORD android::BBinder::BBinder(android::BBinder *__hidden this); idb
// _DWORD __cdecl android::BBinder::~BBinder(android::BBinder *__hidden this); idb
// _DWORD __cdecl android::RefBase::weakref_type::attemptIncStrong(android::RefBase::weakref_type *__hidden this, const void *); idb
// _DWORD __cdecl android::RefBase::weakref_type::decWeak(android::RefBase::weakref_type *__hidden this, const void *); idb
// _DWORD android::RefBase::RefBase(android::RefBase *__hidden this); idb
// _DWORD __cdecl android::RefBase::decStrong(android::RefBase *__hidden this, const void *); idb
// int pthread_mutex_destroy(pthread_mutex_t *mutex);
// int pthread_mutex_init(pthread_mutex_t *mutex, const pthread_mutexattr_t *mutexattr);

//-------------------------------------------------------------------------
// Data declarations

_UNKNOWN loc_13378; // weak
int dword_16B00[4] = { 4294967295, 2147483647, 4294967295, 2147483647 }; // weak
int dword_16D90[4] = { 4294967295, 2147483647, 4294967295, 2147483647 }; // weak
_UNKNOWN loc_17EB8; // weak
_UNKNOWN loc_21EF4; // weak
int dword_293CC[2] = { 1129644032, 1134559232 }; // weak
_UNKNOWN loc_2A81C; // weak
_UNKNOWN loc_2ECAC; // weak
_UNKNOWN loc_34638; // weak
_UNKNOWN loc_35994; // weak
_UNKNOWN loc_359F0; // weak
_UNKNOWN loc_35C10; // weak
_UNKNOWN loc_35E00; // weak
_UNKNOWN loc_35E40; // weak
_UNKNOWN loc_35E58; // weak
_UNKNOWN loc_3639C; // weak
_UNKNOWN loc_3644C; // weak
_UNKNOWN loc_364B4; // weak
_UNKNOWN loc_36500; // weak
_UNKNOWN loc_36518; // weak
_UNKNOWN loc_3673C; // weak
_UNKNOWN unk_3B250; // weak
_DWORD dword_3D344[6] = { 0, 4, 3, 7, 0, 1937339183 }; // idb
_UNKNOWN unk_3D39C; // weak
_UNKNOWN unk_3D3F8; // weak
_UNKNOWN unk_3D3FA; // weak
void **off_3F560[3] = { &off_3FF2C, &off_3FFEC, &off_400AC }; // weak
_UNKNOWN unk_3F5AC; // weak
_UNKNOWN unk_3F5D4; // weak
_UNKNOWN unk_3F624; // weak
void **off_3F658 = &off_4068C; // weak
void *off_3F65C = &unk_406EC; // weak
_UNKNOWN unk_3F670; // weak
_UNKNOWN unk_3F698; // weak
void **off_3F6B8 = &off_40744; // weak
void *off_3F6BC = &unk_4079C; // weak
void **off_3F6D0 = &off_407F4; // weak
void *off_3F6D4 = &unk_4092C; // weak
void **off_3F6F0[3] = { &off_4086C, &off_409DC, &off_40A9C }; // weak
_UNKNOWN unk_3F73C; // weak
_UNKNOWN unk_3F764; // weak
_UNKNOWN unk_3F7D4; // weak
_UNKNOWN unk_3F810; // weak
_UNKNOWN unk_3F850; // weak
_UNKNOWN unk_3F864; // weak
void **off_3F894 = &off_412CC; // weak
void **off_3F8B0 = &off_41498; // weak
void **off_3F8D4[5] = { &off_4165C, &off_416AC, &off_416D4, &off_41688, &off_41634 }; // weak
void **off_3F8F0[3] = { &off_416F8, &off_418BC, &off_419DC }; // weak
_UNKNOWN unk_3F954; // weak
_UNKNOWN unk_3F980; // weak
_UNKNOWN unk_3F9AC; // weak
void **off_3F9F4[5] = { &off_41FEC, &off_4203C, &off_42064, &off_42018, &off_41FC8 }; // weak
void **off_3FA10[7] =
{
  &off_42088,
  &off_420FC,
  &off_4212C,
  &off_4215C,
  &off_42184,
  &off_420D4,
  &off_420AC
}; // weak
void **off_3FA34[5] = { &off_4233C, &off_4238C, &off_423B4, &off_42368, &off_421D4 }; // weak
void *off_3FA50 = (void *)0x25B3D; // weak
void **off_3FA74[5] = { &off_4224C, &off_4229C, &off_422C4, &off_42278, &off_42224 }; // weak
void **off_3FA94[5] = { &off_4233C, &off_4238C, &off_423B4, &off_42368, &off_42314 }; // weak
void **off_3FAE4[5] = { &off_4262C, &off_4267C, &off_426A4, &off_42658, &off_42604 }; // weak
_UNKNOWN unk_3FB00; // weak
_UNKNOWN unk_3FB64; // weak
_UNKNOWN unk_3FBA4; // weak
_UNKNOWN unk_3FBCC; // weak
_UNKNOWN unk_3FBF4; // weak
_UNKNOWN unk_3FC1C; // weak
void **off_3FC44 = &off_42A6C; // weak
void **off_3FC60 = &off_42BA4; // weak
void *off_3FC64 = &unk_42C6C; // weak
char *off_3FC84[8] =
{
  "GLES",
  "HWC",
  "BKGND",
  "FB TARGET",
  "SIDEBAND",
  "HWC_CURSOR",
  "UNKNOWN",
  &off_42DA0
}; // weak
void *off_3FCA4 = &unk_42DFC; // weak
_UNKNOWN unk_3FCB8; // weak
_UNKNOWN unk_3FD2C; // weak
void **off_3FD50 = &off_42E54; // weak
void *off_3FD94 = &unk_4342C; // weak
char *off_3FDF0[6] = { "IDLE", "INVALID", "PREPARED", "GLES", "GLES_DONE", "HWC" }; // weak
_UNKNOWN unk_3FE10; // weak
_UNKNOWN unk_3FE3C; // weak
_UNKNOWN unk_3FE68; // weak
_UNKNOWN unk_3FE94; // weak
_UNKNOWN unk_3FED0; // weak
void *off_3FF2C = (void *)0x120DD; // weak
void *off_3FF60 = (void *)0x126B5; // weak
void *off_3FFC0 = (void *)0x1212D; // weak
_UNKNOWN unk_4032C; // weak
_UNKNOWN unk_40358; // weak
void *off_4068C = (void *)0x14635; // weak
void *off_406C0 = (void *)0x14925; // weak
void *off_40744 = (void *)0x15205; // weak
void *off_40778 = (void *)0x15259; // weak
void *off_407F4 = (void *)0x15F75; // weak
void *off_40820 = (void *)0x15FC9; // weak
void *off_40848 = (void *)0x16025; // weak
void *off_4086C = (void *)0x15D45; // weak
void *off_408A0 = (void *)0x1615D; // weak
void *off_40900 = (void *)0x15D95; // weak
_UNKNOWN unk_40F7C; // weak
_UNKNOWN unk_40FD4; // weak
void *off_4124C = (void *)0x17B1D; // weak
void *off_412A4 = (void *)0x1AC8D; // weak
_UNKNOWN unk_413FC; // weak
_UNKNOWN unk_41428; // weak
_UNKNOWN unk_4144C; // weak
_UNKNOWN unk_41474; // weak
void *off_41498 = (void *)0x1B721; // weak
void *off_41504 = (void *)0x1B749; // weak
void *off_41608 = (void *)0x1B8B9; // weak
void *off_41634 = (void *)0x1B959; // weak
void *off_416F8 = (void *)0x1C821; // weak
void *off_417B0 = (void *)0x2499D; // weak
void *off_41800 = (void *)0x1E7BD; // weak
void *off_41854 = (void *)0x1CB19; // weak
_UNKNOWN unk_41868; // weak
void *off_41894 = (void *)0x1C8F1; // weak
_UNKNOWN unk_41DE4; // weak
_UNKNOWN unk_41E00; // weak
void *off_41E60 = (void *)0x2527D; // weak
void *off_41F9C = (void *)0x252A1; // weak
void *off_41FC8 = (void *)0x25311; // weak
void *off_42088 = (void *)0x25411; // weak
void *off_420AC = (void *)0x25721; // weak
void *off_420D4 = (void *)0x25781; // weak
void *off_421A8 = (void *)0x2587D; // weak
void *off_421D4 = (void *)0x25A71; // weak
void *off_421F8 = (void *)0x25D19; // weak
void *off_42224 = (void *)0x25D81; // weak
void *off_422E8 = (void *)0x25DE1; // weak
void *off_42314 = (void *)0x25F69; // weak
_UNKNOWN unk_423D8; // weak
void *off_4242C = (void *)0x2629D; // weak
void *off_42454 = (void *)0x263AD; // weak
void *off_425D8 = (void *)0x264BD; // weak
void *off_42604 = (void *)0x266D5; // weak
void *off_429FC = (void *)0x27735; // weak
void *off_42A48 = (void *)0x27801; // weak
void *off_42BA4 = (void *)0x28695; // weak
void *off_42BFC = (void *)0x28375; // weak
void *off_42C3C = (void *)0x2874D; // weak
void *off_42DA0 = (void *)0x2B3D1; // weak
void *off_42DD8 = (void *)0x2B47D; // weak
void *off_42E54 = (void *)0x2BEA1; // weak
void *off_42EC4 = (void *)0x2BD05; // weak
void *off_42F28 = (void *)0x2CDF5; // weak
void *off_42F78 = (void *)0x2BD55; // weak
void *off_42FC4 = (void *)0x2BD7D; // weak
_UNKNOWN unk_42FEC; // weak
void *off_4302C = (void *)0x28669; // weak
void *off_4305C = (void *)0x2CD1D; // weak
void *off_430C0 = (void *)0x2CDF5; // weak
void *off_43120 = (void *)0x2CE85; // weak
_UNKNOWN unk_437C8; // weak
_UNKNOWN unk_43868; // weak
_UNKNOWN unk_438B8; // weak
int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD) = NULL; // weak
void *off_45000 = &off_45000; // weak
_UNKNOWN unk_45004; // weak
char byte_45008 = '\x01'; // weak
_UNKNOWN unk_45010; // weak
_UNKNOWN unk_45018; // weak
_UNKNOWN unk_4501C; // weak
_UNKNOWN unk_45020; // weak
_UNKNOWN unk_45024; // weak
_UNKNOWN unk_45028; // weak
_UNKNOWN unk_4502C; // weak
_UNKNOWN unk_45030; // weak
_UNKNOWN unk_45034; // weak
__int64 qword_45038; // weak
_UNKNOWN unk_45044; // weak
_UNKNOWN unk_45045; // weak
_UNKNOWN unk_45048; // weak
_UNKNOWN unk_4504C; // weak
unsigned __int8 byte_45050[4]; // idb
_UNKNOWN unk_45054; // weak
_UNKNOWN unk_45058; // weak
_UNKNOWN unk_4505C; // weak
_UNKNOWN unk_45060; // weak
_UNKNOWN unk_45064; // weak
_UNKNOWN unk_45068; // weak
__int16 word_4506C; // weak
int dword_45070; // weak
int dword_45074; // weak
_UNKNOWN unk_45078; // weak
_UNKNOWN unk_45258; // weak
int dword_4CA58; // weak
_UNKNOWN unk_4CA60; // weak
int dword_54260; // weak
int dword_54264; // weak
_UNKNOWN unk_54270; // weak
_UNKNOWN unk_54450; // weak
_UNKNOWN unk_54630; // weak
int (*dword_5BE30)(void); // weak
char byte_5BE34; // weak
int (*dword_5BE38)(void); // weak
int (*dword_5BE3C)(void); // weak
int (*dword_5BE40)(void); // weak
int (*dword_5BE44)(void); // weak
_UNKNOWN unk_5BE48; // weak


//----- (000108D8) --------------------------------------------------------
int __fastcall j___floatdidf(__int64 a1)
{
  return _floatdidf(a1);
}

//----- (00010908) --------------------------------------------------------
unsigned int __fastcall j___fixdfdi(unsigned int a1, unsigned int a2)
{
  return _fixdfdi(a1, a2);
}

//----- (00010EB4) --------------------------------------------------------
int __fastcall j___floatdisf(__int64 a1)
{
  return _floatdisf(a1);
}

//----- (00011034) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::captureScreenForKeyguard(int a1, int a2, int a3)
{
  return android::SurfaceFlingerEx::captureScreenForKeyguard(a1, a2, a3);
}

//----- (00011778) --------------------------------------------------------
android::Nsd *__fastcall android::Nsd::Nsd(android::Nsd *this)
{
  return android::Nsd::Nsd(this);
}

//----- (00011784) --------------------------------------------------------
android::RefBase *__fastcall android::Nsd::init(int a1, char **a2, __int16 a3)
{
  return android::Nsd::init(a1, a2, a3);
}

//----- (00011790) --------------------------------------------------------
int __fastcall android::Nsd::nsd_is_exit_if_error(android::Nsd *this)
{
  return android::Nsd::nsd_is_exit_if_error(this);
}

//----- (0001179C) --------------------------------------------------------
android::RefBase **__fastcall android::Nsd::nsd_exit(android::Nsd *this)
{
  return android::Nsd::nsd_exit(this);
}

//----- (000117A8) --------------------------------------------------------
signed int __fastcall android::Nsd::doDraw(android::Nsd *this, __int32 a2, int a3)
{
  return android::Nsd::doDraw(this, a2, a3);
}

//----- (000117B4) --------------------------------------------------------
android::SurfaceFlinger *__fastcall android::SurfaceFlinger::SurfaceFlinger(android::SurfaceFlinger *this, int a2)
{
  return android::SurfaceFlinger::SurfaceFlinger(this, a2);
}

//----- (000117CC) --------------------------------------------------------
android::SurfaceFlingerEx *__fastcall android::SurfaceFlingerEx::SurfaceFlingerEx(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::SurfaceFlingerEx(this);
}

//----- (000117FC) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::initHwModule(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::initHwModule(this);
}

//----- (00011814) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::checkIfSupportCursorNsd(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::checkIfSupportCursorNsd(this);
}

//----- (00011820) --------------------------------------------------------
unsigned int __fastcall android::SurfaceFlingerEx::checkIfSupportDuplicate(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::checkIfSupportDuplicate(this);
}

//----- (0001182C) --------------------------------------------------------
int getHwApsUtils(void)
{
  return getHwApsUtils();
}

//----- (00011838) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::getScreenWidthAndHeight(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::getScreenWidthAndHeight(this);
}

//----- (00011844) --------------------------------------------------------
signed int __fastcall android::Nsd::onTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::Nsd::onTransact(this, a2, a3, a4, a5);
}

//----- (00011850) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdCursorCmd(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::handleNsdCursorCmd(this);
}

//----- (0001185C) --------------------------------------------------------
int __fastcall android::Nsd::doCursorDraw(android::Nsd *this)
{
  return android::Nsd::doCursorDraw(this);
}

//----- (00011868) --------------------------------------------------------
int __fastcall android::Nsd::setRefreshTime(android::Nsd *this, __int32 a2)
{
  return android::Nsd::setRefreshTime((int)this, a2);
}

//----- (00011874) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::setSdrEnterFlag(android::SurfaceFlingerEx *this, int a2)
{
  return android::SurfaceFlingerEx::setSdrEnterFlag(this, a2);
}

//----- (00011880) --------------------------------------------------------
unsigned int **__fastcall android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(unsigned int **result, unsigned int **a2)
{
  return android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(result, a2);
}

//----- (0001188C) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::restoreSdr(android::SurfaceFlingerEx *this, float _R1, int a3)
{
  return android::SurfaceFlingerEx::restoreSdr(this, _R1, a3);
}

//----- (00011898) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::resetSdr(android::SurfaceFlingerEx *this, float _R1, int a3)
{
  return android::SurfaceFlingerEx::resetSdr((int)this, _R1, a3);
}

//----- (000118A4) --------------------------------------------------------
unsigned int **__fastcall android::sp<android::DisplayDevice const>::~sp(unsigned int **a1)
{
  return android::sp<android::DisplayDevice const>::~sp(a1);
}

//----- (000118B0) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::isBlackPackage(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::isBlackPackage(this);
}

//----- (000118BC) --------------------------------------------------------
void *__fastcall android::sp<android::GraphicBuffer>::~sp(void *a1)
{
  return android::sp<android::GraphicBuffer>::~sp(a1);
}

//----- (000118D4) --------------------------------------------------------
int __fastcall android::Nsd::isSupportAFBC(android::Nsd *this, void *a2)
{
  return android::Nsd::isSupportAFBC(this, a2);
}

//----- (000118E0) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::isSdrCase(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::isSdrCase(this);
}

//----- (000118EC) --------------------------------------------------------
void *__fastcall android::sp<android::Layer>::sp(void *a1, char **a2)
{
  return android::sp<android::Layer>::sp(a1, a2);
}

//----- (000118F8) --------------------------------------------------------
void *__fastcall android::sp<android::Layer>::~sp(void *a1)
{
  return android::sp<android::Layer>::~sp(a1);
}

//----- (00011904) --------------------------------------------------------
int __fastcall android::Nsd::setSfFlag(android::Nsd *this, int a2)
{
  return android::Nsd::setSfFlag((int)this, a2);
}

//----- (00011910) --------------------------------------------------------
signed int __fastcall android::Nsd::preDraw(int a1, int *a2)
{
  return android::Nsd::preDraw(a1, a2);
}

//----- (0001191C) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdRefreshTime(android::SurfaceFlingerEx *this, __int32 a2)
{
  return android::SurfaceFlingerEx::handleNsdRefreshTime(this, a2);
}

//----- (00011928) --------------------------------------------------------
int __fastcall android::Nsd::clearCursor(android::Nsd *this)
{
  return android::Nsd::clearCursor((int)this);
}

//----- (00011934) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdDrawCursor(__int64 this)
{
  return android::SurfaceFlingerEx::handleNsdDrawCursor(this);
}

//----- (00011940) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleApsIdentify(android::SurfaceFlingerEx *this, int a2)
{
  return android::SurfaceFlingerEx::handleApsIdentify(this, a2);
}

//----- (0001194C) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::fillBlack(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::fillBlack(this);
}

//----- (00011958) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::addBlackList(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::addBlackList(this);
}

//----- (00011964) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::bootFinished(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::bootFinished(this);
}

//----- (00011970) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::captureScreen(int a1, char **a2, char **a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, char a12, unsigned int a13)
{
  return android::SurfaceFlingerEx::captureScreen(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13);
}

//----- (0001197C) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::onTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::SurfaceFlingerEx::onTransact(this, a2, a3, a4, a5);
}

//----- (00011988) --------------------------------------------------------
_QWORD *__fastcall android::SurfaceFlingerEx::onMessageReceived(__int64 this, int a2)
{
  return android::SurfaceFlingerEx::onMessageReceived(this, a2);
}

//----- (00011994) --------------------------------------------------------
_DWORD *__fastcall android::SurfaceFlingerEx::signalDrawLayer(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::signalDrawLayer(this);
}

//----- (000119A0) --------------------------------------------------------
_DWORD *__fastcall android::SurfaceFlingerEx::signalClearMessage(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::signalClearMessage(this);
}

//----- (000119AC) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::checkIfSupportNsd(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::checkIfSupportNsd(this);
}

//----- (000119B8) --------------------------------------------------------
android::RefBase *__fastcall android::SurfaceFlingerEx::initNsd(android::SurfaceFlingerEx *this, char *a2, int a3)
{
  return android::SurfaceFlingerEx::initNsd(this, a2, a3);
}

//----- (000119C4) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::checkIfSupportLauncherNsd(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::checkIfSupportLauncherNsd(this);
}

//----- (000119D0) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleNsdCmd(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::handleNsdCmd(this);
}

//----- (000119DC) --------------------------------------------------------
unsigned int **__fastcall android::SurfaceFlingerEx::handleSdrSetHwComposer(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::handleSdrSetHwComposer(this);
}

//----- (000119E8) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2)
{
  return android::SurfaceFlingerEx::handleSdrSetGpuComposer(a1, a2);
}

//----- (000119F4) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::nsdOnTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::SurfaceFlingerEx::nsdOnTransact(this, a2, a3, a4, a5);
}

//----- (00011A00) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 this)
{
  return android::SurfaceFlingerEx::handleNsdDrawLayer(this);
}

//----- (00011A0C) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdRefresh(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::handleNsdRefresh(this);
}

//----- (00011A18) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdInvalidate(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::handleNsdInvalidate(this);
}

//----- (00011A24) --------------------------------------------------------
signed __int64 __fastcall android::SurfaceFlingerEx::setCurrentInvalidateTime(android::SurfaceFlingerEx *this)
{
  return android::SurfaceFlingerEx::setCurrentInvalidateTime(this);
}

//----- (00011A30) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::getVisibleLayerInfo(android::SurfaceFlingerEx *this, android::Parcel *a2)
{
  return android::SurfaceFlingerEx::getVisibleLayerInfo(this, a2);
}

//----- (00011A3C) --------------------------------------------------------
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::onTransact(a1, a2, a3, a4, a5);
}

//----- (00011A48) --------------------------------------------------------
_QWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onMessageReceived(__int64 a1, int a2)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::onMessageReceived(a1, a2);
}

//----- (00011A54) --------------------------------------------------------
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalDrawLayer(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::signalDrawLayer(a1);
}

//----- (00011A60) --------------------------------------------------------
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalClearMessage(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::signalClearMessage(a1);
}

//----- (00011A6C) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportNsd(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportNsd(a1);
}

//----- (00011A78) --------------------------------------------------------
android::RefBase *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::initNsd(int a1, char *a2, int a3)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::initNsd(a1, a2, a3);
}

//----- (00011A84) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportLauncherNsd(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportLauncherNsd(a1);
}

//----- (00011A90) --------------------------------------------------------
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::nsdOnTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::nsdOnTransact(a1, a2, a3, a4, a5);
}

//----- (00011A9C) --------------------------------------------------------
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdCmd(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdCmd(a1);
}

//----- (00011AA8) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdDrawLayer(a1);
}

//----- (00011AB4) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdRefresh(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdRefresh(a1);
}

//----- (00011AC0) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdInvalidate(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdInvalidate(a1);
}

//----- (00011ACC) --------------------------------------------------------
signed __int64 __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::setCurrentInvalidateTime(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::setCurrentInvalidateTime(a1);
}

//----- (00011AD8) --------------------------------------------------------
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::getVisibleLayerInfo(int a1, android::Parcel *a2)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::getVisibleLayerInfo(a1, a2);
}

//----- (00011AE4) --------------------------------------------------------
unsigned int **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetHwComposer(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetHwComposer(a1);
}

//----- (00011AF0) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetGpuComposer(a1, a2);
}

//----- (00011AFC) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::bootFinished(int a1)
{
  return `non-virtual thunk to'android::SurfaceFlingerEx::bootFinished(a1);
}

//----- (00011B20) --------------------------------------------------------
void __fastcall android::Nsd::PrepareBufferThread::prepareBuffer(android::Nsd::PrepareBufferThread *this, void *dest, void *src, int a4, int a5, int a6, int a7, int a8)
{
  android::Nsd::PrepareBufferThread::prepareBuffer(this, dest, src, a4, a5, a6, a7, a8);
}

//----- (00011B38) --------------------------------------------------------
int __fastcall android::Nsd::PrepareBufferThread::setBufferPara(android::Nsd::PrepareBufferThread *this, void *a2, unsigned int *a3, int a4, int a5, int a6, int a7, int a8)
{
  return android::Nsd::PrepareBufferThread::setBufferPara((int)this, a2, a3, a4, a5, a6, a7, a8);
}

//----- (00011B50) --------------------------------------------------------
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this)
{
  return android::Nsd::~Nsd(this);
}

//----- (00011B5C) --------------------------------------------------------
void *__fastcall android::sp<android::GraphicBuffer>::sp(void *a1, android::RefBase **a2)
{
  return android::sp<android::GraphicBuffer>::sp(a1, a2);
}

//----- (00011B74) --------------------------------------------------------
signed int __fastcall android::Nsd::process(int a1, unsigned int *a2, int a3, int a4, int a5)
{
  return android::Nsd::process(a1, a2, a3, a4, a5);
}

//----- (00011B8C) --------------------------------------------------------
signed int __fastcall android::Nsd::cursorOnTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::Nsd::cursorOnTransact(this, a2, a3, a4, a5);
}

//----- (00011B98) --------------------------------------------------------
android::RefBase **__fastcall android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this)
{
  return android::sp<android::LauncherIdleBase>::operator=(a1, this);
}

//----- (00011BA4) --------------------------------------------------------
int getLauncherIdle(void)
{
  return getLauncherIdle();
}

//----- (00011BBC) --------------------------------------------------------
android::RefBase **__fastcall android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this)
{
  return android::sp<android::LauncherIdleBase>::operator=(a1, this);
}

//----- (00011BC8) --------------------------------------------------------
int getCursor(void)
{
  return getCursor();
}

//----- (00011BD4) --------------------------------------------------------
int __fastcall android::Nsd::PrepareBufferThread::threadLoop(android::Nsd::PrepareBufferThread *this)
{
  return android::Nsd::PrepareBufferThread::threadLoop(this);
}

//----- (00011BE0) --------------------------------------------------------
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this)
{
  return android::Nsd::~Nsd(this);
}

//----- (00011BEC) --------------------------------------------------------
android::RefBase *__fastcall android::Nsd::onFirstRef(android::Nsd *this)
{
  return android::Nsd::onFirstRef(this);
}

//----- (00011C28) --------------------------------------------------------
int j___aeabi_ldiv0()
{
  return _aeabi_ldiv0();
}

//----- (00011C34) --------------------------------------------------------
signed __int64 __fastcall j___gnu_ldivmod_helper(signed __int64 a1, signed __int64 a2, _QWORD *a3)
{
  return _gnu_ldivmod_helper(a1, a2, a3);
}

//----- (00011C40) --------------------------------------------------------
unsigned __int64 __fastcall j___gnu_uldivmod_helper(unsigned __int64 a1, unsigned __int64 a2, _QWORD *a3)
{
  return _gnu_uldivmod_helper(a1, a2, a3);
}

//----- (00011C58) --------------------------------------------------------
signed int __fastcall j___aeabi_dcmplt(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4)
{
  return _aeabi_dcmplt(a1, a2, a3, a4);
}

//----- (00011C64) --------------------------------------------------------
unsigned int __fastcall j___fixunsdfdi(unsigned int a1, unsigned int a2)
{
  return _fixunsdfdi(a1, a2);
}

//----- (00011C70) --------------------------------------------------------
unsigned int __fastcall j___muldf3(unsigned int result, unsigned int a2, unsigned int a3, unsigned int a4)
{
  return _muldf3(result, a2, a3, a4);
}

//----- (00011C7C) --------------------------------------------------------
unsigned int __fastcall j___fixunsdfsi(unsigned int a1, int a2)
{
  return _fixunsdfsi(a1, a2);
}

//----- (00011C88) --------------------------------------------------------
int __fastcall j___floatunsidf(int result)
{
  return _floatunsidf(result);
}

//----- (00011C94) --------------------------------------------------------
int j___subdf3()
{
  return _subdf3();
}
// 358A4: using guessed type int _subdf3(void);

//----- (00011CAC) --------------------------------------------------------
unsigned int __fastcall j___lshrdi3(unsigned int a1, unsigned int a2, int a3)
{
  return _lshrdi3(a1, a2, a3);
}

//----- (00011CD0) --------------------------------------------------------
int __fastcall j___nedf2(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4)
{
  return _nedf2(a1, a2, a3, a4);
}

//----- (00011CDC) --------------------------------------------------------
unsigned int __fastcall j___aeabi_cdcmple(unsigned int result, unsigned int a2, unsigned int a3, signed int a4)
{
  _aeabi_cdcmple(result, a2, a3, a4);
  return result;
}

//----- (00011CE8) --------------------------------------------------------
unsigned int __fastcall j___aeabi_cdrcmple(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4)
{
  return _aeabi_cdrcmple(a1, a2, a3, a4);
}

//----- (00011D00) --------------------------------------------------------
int sub_11D00()
{
  android::String16::String16((android::String16 *)&unk_45010, "android.permission.ACCESS_SURFACE_FLINGER");
  return j_j___cxa_atexit(0, (int)&unk_45010, (int)&off_45000);
}
// 45000: using guessed type void *off_45000;

//----- (00011D3C) --------------------------------------------------------
int sub_11D3C()
{
  android::String16::String16((android::String16 *)&unk_45018, "android.permission.HARDWARE_TEST");
  _cxa_atexit(0, &unk_45018, &off_45000);
  android::String16::String16((android::String16 *)&unk_4501C, "android.permission.ACCESS_SURFACE_FLINGER");
  _cxa_atexit(0, &unk_4501C, &off_45000);
  android::String16::String16((android::String16 *)&unk_45020, "android.permission.READ_FRAME_BUFFER");
  _cxa_atexit(0, &unk_45020, &off_45000);
  android::String16::String16((android::String16 *)&unk_45024, "android.permission.DUMP");
  return j_j___cxa_atexit(0, (int)&unk_45024, (int)&off_45000);
}
// 103B0: using guessed type int __fastcall _cxa_atexit(_DWORD, _DWORD, _DWORD);
// 45000: using guessed type void *off_45000;

//----- (00011DDC) --------------------------------------------------------
int sub_11DDC()
{
  sub_2D870((pthread_mutex_t *)&unk_45054, 0);
  return j_j___cxa_atexit((int)sub_2D8AC, (int)&unk_45054, (int)&off_45000);
}
// 45000: using guessed type void *off_45000;

//----- (00011E14) --------------------------------------------------------
int sub_11E14()
{
  sub_2D870((pthread_mutex_t *)&unk_4505C, 0);
  return j_j___cxa_atexit((int)sub_2D8AC, (int)&unk_4505C, (int)&off_45000);
}
// 45000: using guessed type void *off_45000;

//----- (00011E4C) --------------------------------------------------------
int sub_11E4C()
{
  sub_2D870((pthread_mutex_t *)&unk_45064, 0);
  return j_j___cxa_atexit((int)sub_2D8AC, (int)&unk_45064, (int)&off_45000);
}
// 45000: using guessed type void *off_45000;

//----- (00011E84) --------------------------------------------------------
int sub_11E84()
{
  return _cxa_finalize(&off_45000);
}
// 103A4: using guessed type int __fastcall _cxa_finalize(_DWORD);
// 45000: using guessed type void *off_45000;

//----- (00011EA4) --------------------------------------------------------
int (*__fastcall sub_11EA4(int (*result)(void)))(void)
{
  if ( result )
    result = (int (*)(void))result();
  return result;
}

//----- (00011F64) --------------------------------------------------------
int __fastcall sub_11F64(int a1, char **a2)
{
  int v2; // r4@1
  char **v3; // r5@1
  char *v4; // r0@1
  bool v5; // zf@1

  v2 = a1;
  v3 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 52));
  android::ISurfaceComposerClient::ISurfaceComposerClient((android::ISurfaceComposerClient *)v2);
  android::BBinder::BBinder((android::BBinder *)(v2 + 4));
  *(_DWORD *)v2 = &off_3FF2C;
  *(_DWORD *)(v2 + 52) = &off_3FFC0;
  *(_DWORD *)(v2 + 4) = &off_3FF60;
  v4 = *v3;
  v5 = *v3 == 0;
  *(_DWORD *)(v2 + 16) = *v3;
  if ( !v5 )
    android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 16));
  android::SortedVectorImpl::SortedVectorImpl((android::SortedVectorImpl *)(v2 + 20), 0x10u, 0);
  *(_DWORD *)(v2 + 20) = &unk_3F5AC;
  *(_DWORD *)(v2 + 40) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v2 + 48), 0);
  return v2;
}
// 3FF2C: using guessed type void *off_3FF2C;
// 3FF60: using guessed type void *off_3FF60;
// 3FFC0: using guessed type void *off_3FFC0;

//----- (00011FFC) --------------------------------------------------------
int __fastcall sub_11FFC(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int v4; // r6@1
  signed int v5; // r5@2
  int v6; // r0@3
  int v7; // r7@3
  char *v8; // r0@5
  char *v9; // r0@14
  char *v11; // [sp+0h] [bp-28h]@3

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 60);
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 64);
  v4 = *(_DWORD *)(v2 + 28);
  if ( v4 )
  {
    v5 = 12;
    do
    {
      v6 = *(_DWORD *)(v2 + 24);
      v11 = 0;
      v7 = v6 + v5;
      if ( *(_DWORD *)(v6 + v5 - 4) )
      {
        if ( android::RefBase::weakref_type::attemptIncStrong(*(android::RefBase::weakref_type **)(v6 + v5), &v11) == 1 )
        {
          v8 = *(char **)(v7 - 4);
          v11 = *(char **)(v7 - 4);
        }
        else
        {
          v8 = v11;
        }
        if ( v8 )
        {
          sub_216B4(*(_DWORD *)(v2 + 16), &v11);
          v8 = v11;
        }
        if ( v8 )
          android::RefBase::decStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], &v11);
      }
      v5 += 16;
      --v4;
    }
    while ( v4 );
  }
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 48));
  if ( *(_DWORD *)(v2 + 40) )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(v2 + 44), (const void *)(v2 + 40));
  *(_DWORD *)(v2 + 20) = &unk_3F5AC;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 20));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 20));
  v9 = *(char **)(v2 + 16);
  if ( v9 )
    android::RefBase::decStrong((android::RefBase *)&v9[*(_DWORD *)(*(_DWORD *)v9 - 12)], (const void *)(v2 + 16));
  android::BBinder::~BBinder((android::BBinder *)(v2 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v2);
  return v2;
}

//----- (000120DC) --------------------------------------------------------
int __fastcall sub_120DC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_11FFC(a1, (int)off_3F560);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  return v1;
}
// 3F560: using guessed type void **off_3F560[3];

//----- (0001212C) --------------------------------------------------------
int __fastcall sub_1212C(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_11FFC((int)a1 + *(_DWORD *)(*a1 - 12), (int)off_3F560);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
}
// 3F560: using guessed type void **off_3F560[3];

//----- (00012158) --------------------------------------------------------
void __fastcall sub_12158(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_11FFC(a1, (int)off_3F560);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  j_operator delete((void *)v1);
}
// 3F560: using guessed type void **off_3F560[3];

//----- (000121B4) --------------------------------------------------------
void __fastcall sub_121B4(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_11FFC(v1, (int)off_3F560);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  j_operator delete((void *)v1);
}
// 3F560: using guessed type void **off_3F560[3];

//----- (000121E8) --------------------------------------------------------
int __fastcall android::Nsd::isSupportAFBC(android::Nsd *this, void *a2)
{
  return 0;
}

//----- (000121EC) --------------------------------------------------------
int __fastcall sub_121EC(int a1, char **a2, char **a3)
{
  int v3; // r5@1
  char **v4; // r6@1
  pthread_mutex_t *v5; // r4@1
  char **v6; // r7@1
  char *v7; // r0@1
  char *v8; // r0@3
  char *v10; // [sp+0h] [bp-38h]@3
  android::RefBase::weakref_type *v11; // [sp+4h] [bp-34h]@4
  char *v12; // [sp+8h] [bp-30h]@1
  android::RefBase::weakref_type *v13; // [sp+Ch] [bp-2Ch]@2
  int v14; // [sp+10h] [bp-28h]@5
  android::RefBase::weakref_type *v15; // [sp+14h] [bp-24h]@8
  int v16; // [sp+18h] [bp-20h]@5
  android::RefBase::weakref_type *v17; // [sp+1Ch] [bp-1Ch]@6

  v3 = a1;
  v4 = a3;
  v5 = (pthread_mutex_t *)(a1 + 48);
  v6 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 48));
  v7 = *v6;
  v12 = *v6;
  if ( v12 )
    v13 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)],
                                              &v12);
  v8 = *v4;
  v10 = *v4;
  if ( v10 )
    v11 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)],
                                              &v10);
  sub_12C84(&v14, (int)&v12, (int)&v10);
  android::SortedVectorImpl::add((android::SortedVectorImpl *)(v3 + 20), &v14);
  if ( v16 )
    android::RefBase::weakref_type::decWeak(v17, &v16);
  if ( v14 )
    android::RefBase::weakref_type::decWeak(v15, &v14);
  if ( v10 )
    android::RefBase::weakref_type::decWeak(v11, &v10);
  if ( v12 )
    android::RefBase::weakref_type::decWeak(v13, &v12);
  return pthread_mutex_unlock(v5);
}

//----- (00012288) --------------------------------------------------------
int __fastcall sub_12288(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  pthread_mutex_t *v4; // r4@1
  unsigned int v5; // r0@1
  _DWORD *v6; // r2@2
  unsigned int v7; // r1@2

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 48);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 48));
  v5 = *(_DWORD *)(v2 + 28);
  if ( v5 )
  {
    v6 = (_DWORD *)(*(_DWORD *)(v2 + 24) + 8);
    v7 = 0;
    while ( *v6 != v3 )
    {
      ++v7;
      v6 += 4;
      if ( v7 >= v5 )
        return j_j_pthread_mutex_unlock(v4);
    }
    android::VectorImpl::removeItemsAt((android::VectorImpl *)(v2 + 20), v7, 1u);
  }
  return j_j_pthread_mutex_unlock(v4);
}

//----- (000122C8) --------------------------------------------------------
int __fastcall sub_122C8(void *a1, int a2, char **a3)
{
  int v3; // r7@1
  void *v4; // r6@1
  pthread_mutex_t *v5; // r4@1
  char **v6; // r5@1
  char *v7; // r0@1
  int v8; // r0@3
  int v9; // r0@4
  bool v10; // zf@6
  android::RefBase::weakref_type *v11; // r0@6
  char *v13; // [sp+4h] [bp-2Ch]@11
  char *v14; // [sp+8h] [bp-28h]@1
  android::RefBase::weakref_type *v15; // [sp+Ch] [bp-24h]@2
  char *v16; // [sp+10h] [bp-20h]@6
  android::RefBase::weakref_type *v17; // [sp+14h] [bp-1Ch]@6

  v3 = a2;
  v4 = a1;
  v5 = (pthread_mutex_t *)(a2 + 48);
  v6 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a2 + 48));
  *(_DWORD *)v4 = 0;
  v7 = *v6;
  v14 = *v6;
  if ( v14 )
    v15 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)],
                                              &v14);
  v8 = sub_12CB8((android::SortedVectorImpl *)(v3 + 20), (int)&v14);
  if ( v8 < 0 )
    v9 = v3 + 40;
  else
    v9 = *(_DWORD *)(v3 + 24) + 16 * v8 + 8;
  v10 = *(_DWORD *)v9 == 0;
  v16 = *(char **)v9;
  v11 = *(android::RefBase::weakref_type **)(v9 + 4);
  v17 = v11;
  if ( !v10 )
    android::RefBase::weakref_type::incWeak(v11, &v16);
  if ( v14 )
    android::RefBase::weakref_type::decWeak(v15, &v14);
  if ( v16 )
  {
    v13 = 0;
    if ( android::RefBase::weakref_type::attemptIncStrong(v17, &v13) == 1 )
      v13 = v16;
    sub_123A8(v4, &v13);
    if ( v13 )
      android::RefBase::decStrong((android::RefBase *)&v13[*(_DWORD *)(*(_DWORD *)v13 - 12)], &v13);
    if ( !*(_DWORD *)v4 )
      _android_log_print(6, "SurfaceFlinger", "getLayerUser(name=%p) is dead", *v6);
    if ( v16 )
      android::RefBase::weakref_type::decWeak(v17, &v16);
  }
  return pthread_mutex_unlock(v5);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000123A8) --------------------------------------------------------
void *__fastcall sub_123A8(void *a1, char **a2)
{
  char *v2; // r5@1
  void *v3; // r4@1
  void *result; // r0@5

  v2 = *a2;
  v3 = a1;
  if ( *a2 )
    android::RefBase::incStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], a1);
  if ( *(_DWORD *)v3 )
    android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)v3 + *(_DWORD *)(**(_DWORD **)v3 - 12)), v3);
  result = v3;
  *(_DWORD *)v3 = v2;
  return result;
}

//----- (000123DC) --------------------------------------------------------
int __fastcall sub_123DC(android::IPCThreadState *a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  android::Parcel *v5; // r8@1
  const android::Parcel *v6; // r9@1
  unsigned int v7; // r7@1
  android::BnSurfaceComposerClient *v8; // r4@1
  android::IPCThreadState *v9; // r6@1
  int v10; // r5@1
  int v11; // r6@1
  int result; // r0@6

  v5 = a4;
  v6 = a3;
  v7 = a2;
  v8 = a1;
  v9 = (android::IPCThreadState *)android::IPCThreadState::self(a1);
  v10 = android::IPCThreadState::getCallingPid(v9);
  v11 = android::IPCThreadState::getCallingUid(v9);
  if ( v10 != getpid()
    && v11
    && v11 != 1000
    && v11 != 1003
    && android::PermissionCache::checkCallingPermission(
         (android::PermissionCache *)&unk_45010,
         (const android::String16 *)&GLOBAL_OFFSET_TABLE_) != 1 )
  {
    _android_log_print(6, "SurfaceFlinger", "Permission Denial: can't openGlobalTransaction pid=%d, uid=%d", v10, v11);
    result = -1;
  }
  else
  {
    result = j_android::BnSurfaceComposerClient::onTransact(v8, v7, v6, v5, a5);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00012474) --------------------------------------------------------
int __fastcall sub_12474(int a1, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // r4@1
  int v9; // r8@1
  int v10; // r9@1
  int v11; // r10@1
  int v12; // r5@1
  int v13; // r11@1
  int v14; // r4@1
  int v16; // [sp+8h] [bp-28h]@1

  v8 = a1;
  v9 = a4;
  v10 = a3;
  v11 = a2;
  v12 = operator new(0x40u);
  v13 = *(_DWORD *)(v8 + 16);
  android::RefBase::RefBase((android::RefBase *)(v12 + 56));
  sub_1AE68((_DWORD *)v12, (int)&unk_3F5D4);
  *(_DWORD *)v12 = &unk_4032C;
  *(_DWORD *)(v12 + 56) = &unk_40358;
  *(_DWORD *)(v12 + 16) = v13;
  *(_DWORD *)(v12 + 20) = v8;
  *(_DWORD *)(v12 + 24) = a7;
  *(_DWORD *)(v12 + 28) = a8;
  *(_DWORD *)(v12 + 36) = v11;
  *(_DWORD *)(v12 + 40) = v10;
  *(_DWORD *)(v12 + 44) = v9;
  *(_DWORD *)(v12 + 48) = a5;
  *(_DWORD *)(v12 + 52) = a6;
  v16 = v12;
  android::RefBase::incStrong((android::RefBase *)(v12 + 56), &v16);
  sub_1DFF0(*(_DWORD *)(v8 + 16), (char **)&v16, 0, 0);
  v14 = *(_DWORD *)(v16 + 32);
  if ( v16 )
    android::RefBase::decStrong((android::RefBase *)(v16 + *(_DWORD *)(*(_DWORD *)v16 - 12)), &v16);
  return v14;
}

//----- (00012520) --------------------------------------------------------
int __fastcall sub_12520(char *a1, char **a2)
{
  int v2; // r5@1
  char **v3; // r4@1
  int v4; // r4@3
  char *v6; // [sp+4h] [bp-14h]@1

  v2 = *((_DWORD *)a1 + 4);
  v3 = a2;
  v6 = a1;
  if ( a1 )
    android::RefBase::incStrong((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)], &v6);
  v4 = sub_22300(v2, (int *)&v6, v3);
  if ( v6 )
    android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], &v6);
  return v4;
}

//----- (00012564) --------------------------------------------------------
signed int __fastcall sub_12564(int a1, char **a2)
{
  signed int result; // r0@4
  char *v3; // [sp+4h] [bp-Ch]@1

  sub_122C8(&v3, a1, a2);
  if ( v3 )
  {
    sub_1A34C((int)v3);
    if ( v3 )
      android::RefBase::decStrong((android::RefBase *)&v3[*(_DWORD *)(*(_DWORD *)v3 - 12)], &v3);
    result = 0;
  }
  else
  {
    result = -2;
  }
  return result;
}

//----- (000125A0) --------------------------------------------------------
signed int __fastcall sub_125A0(int a1, char **a2, int a3)
{
  int v3; // r4@1
  signed int result; // r0@4
  char *v5; // [sp+4h] [bp-Ch]@1

  v3 = a3;
  sub_122C8(&v5, a1, a2);
  if ( v5 )
  {
    sub_1A364((int)v5, v3);
    if ( v5 )
      android::RefBase::decStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], &v5);
    result = 0;
  }
  else
  {
    result = -2;
  }
  return result;
}

//----- (000125DC) --------------------------------------------------------
int __fastcall sub_125DC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (00012614) --------------------------------------------------------
void __fastcall sub_12614(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (00012650) --------------------------------------------------------
int __fastcall sub_12650(int a1)
{
  return a1 + 4;
}

//----- (00012658) --------------------------------------------------------
int __fastcall sub_12658(const void *a1, char *a2, _DWORD *a3)
{
  const void *v3; // r6@1
  char *v4; // r5@1
  int v5; // r1@2
  int v6; // r3@4
  int result; // r0@5

  v3 = a1;
  v4 = a2;
  if ( *a3 )
    v5 = (*(_DWORD *)(*a3 - 12) >> 1) - 1;
  if ( v0 )
    v6 = (*(_DWORD *)(v0 - 12) >> 1) - 1;
  result = strzcmp16();
  if ( result )
  {
    result = 0;
    *(_DWORD *)v3 = 0;
  }
  else
  {
    *(_DWORD *)v3 = v4;
    if ( v4 )
      result = android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v3);
  }
  return result;
}
// 1053C: using guessed type int strzcmp16(void);

//----- (000126B4) --------------------------------------------------------
int __fastcall sub_126B4(const void *a1, int a2, _DWORD *a3)
{
  return sub_12658(a1, (char *)(a2 - 4), a3);
}

//----- (000126C4) --------------------------------------------------------
int __fastcall sub_126C4(int a1)
{
  return j_android::ISurfaceComposerClient::getInterfaceDescriptor((android::ISurfaceComposerClient *)(a1 - 4));
}

//----- (00012744) --------------------------------------------------------
int __fastcall sub_12744(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (00012780) --------------------------------------------------------
void __fastcall sub_12780(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (000127C4) --------------------------------------------------------
int __fastcall sub_127C4(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (000127FC) --------------------------------------------------------
void __fastcall sub_127FC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (000128A8) --------------------------------------------------------
int __fastcall sub_128A8(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (000128E4) --------------------------------------------------------
void __fastcall sub_128E4(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposerClient::~ISurfaceComposerClient((android::ISurfaceComposerClient *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (00012AE8) --------------------------------------------------------
void *__fastcall sub_12AE8(void *a1, _DWORD *a2)
{
  _DWORD *v2; // r5@1
  void *v3; // r4@1
  int v4; // r1@1
  android::RefBase::weakref_type *v5; // r0@1
  int v6; // r2@3
  android::RefBase::weakref_type *v7; // r0@3

  v2 = a2;
  v3 = a1;
  v4 = *a2;
  *(_DWORD *)a1 = v4;
  v5 = (android::RefBase::weakref_type *)v2[1];
  *((_DWORD *)v3 + 1) = v5;
  if ( v4 )
    android::RefBase::weakref_type::incWeak(v5, v3);
  v6 = v2[2];
  *((_DWORD *)v3 + 2) = v6;
  v7 = (android::RefBase::weakref_type *)v2[3];
  *((_DWORD *)v3 + 3) = v7;
  if ( v6 )
    android::RefBase::weakref_type::incWeak(v7, (char *)v3 + 8);
  return v3;
}

//----- (00012B1C) --------------------------------------------------------
int __fastcall sub_12B1C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  return v1;
}

//----- (00012B2C) --------------------------------------------------------
void __fastcall sub_12B2C(int a1)
{
  void *v1; // r4@1

  v1 = (void *)a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  j_operator delete(v1);
}

//----- (00012B40) --------------------------------------------------------
int __fastcall sub_12B40(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (00012B50) --------------------------------------------------------
void __fastcall sub_12B50(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (00012C84) --------------------------------------------------------
void *__fastcall sub_12C84(void *a1, int a2, int a3)
{
  int v3; // r5@1
  void *v4; // r4@1
  bool v5; // zf@1
  android::RefBase::weakref_type *v6; // r0@1
  android::RefBase::weakref_type *v7; // r0@3

  v3 = a3;
  v4 = a1;
  v5 = *(_DWORD *)a2 == 0;
  *(_DWORD *)a1 = *(_DWORD *)a2;
  v6 = *(android::RefBase::weakref_type **)(a2 + 4);
  *((_DWORD *)v4 + 1) = v6;
  if ( !v5 )
    android::RefBase::weakref_type::incWeak(v6, v4);
  v5 = *(_DWORD *)v3 == 0;
  *((_DWORD *)v4 + 2) = *(_DWORD *)v3;
  v7 = *(android::RefBase::weakref_type **)(v3 + 4);
  *((_DWORD *)v4 + 3) = v7;
  if ( !v5 )
    android::RefBase::weakref_type::incWeak(v7, (char *)v4 + 8);
  return v4;
}

//----- (00012CB8) --------------------------------------------------------
int __fastcall sub_12CB8(android::SortedVectorImpl *this, int a2)
{
  android::SortedVectorImpl *v2; // r4@1
  bool v3; // zf@1
  android::RefBase::weakref_type *v4; // r0@1
  int v5; // r4@3
  int v7; // [sp+0h] [bp-20h]@1
  android::RefBase::weakref_type *v8; // [sp+4h] [bp-1Ch]@1
  int v9; // [sp+8h] [bp-18h]@3
  android::RefBase::weakref_type *v10; // [sp+Ch] [bp-14h]@4

  v2 = this;
  v3 = *(_DWORD *)a2 == 0;
  v7 = *(_DWORD *)a2;
  v4 = *(android::RefBase::weakref_type **)(a2 + 4);
  v8 = *(android::RefBase::weakref_type **)(a2 + 4);
  if ( !v3 )
    android::RefBase::weakref_type::incWeak(v4, &v7);
  v9 = 0;
  v5 = android::SortedVectorImpl::indexOf(v2, &v7);
  if ( v9 )
    android::RefBase::weakref_type::decWeak(v10, &v9);
  if ( v7 )
    android::RefBase::weakref_type::decWeak(v8, &v7);
  return v5;
}

//----- (00012D04) --------------------------------------------------------
_DWORD *__fastcall sub_12D04(_DWORD *a1, char **a2, int a3, int a4, int a5, char a6, int a7, char **a8, int a9, int a10)
{
  _DWORD *v10; // r4@1
  int v11; // r8@1
  int v12; // r6@1
  char **v13; // r7@1
  char *v14; // r0@1
  android::RefBase::weakref_type *v16; // r0@3
  char *v17; // r0@5
  int v21; // ST08_4@7
  int v22; // r6@7
  int v27; // r5@7
  int v28; // r2@7
  int v29; // r3@7
  int v30; // r2@7
  int v31; // r3@7
  int v32; // r0@7
  int v33; // r8@9
  signed int v34; // r11@11
  int v35; // r10@11
  int v36; // r0@13
  signed int v37; // r0@13
  signed int v38; // r0@16
  const char *v39; // r1@16
  android::Rect *v41; // [sp+Ch] [bp-44h]@9
  android::Rect *v42; // [sp+10h] [bp-40h]@9

  v10 = a1;
  v11 = a4;
  v12 = a3;
  v13 = a2;
  *a1 = 0;
  android::Region::Region(a1 + 1);
  android::Region::Region(v10 + 6);
  android::Region::Region(v10 + 11);
  *((_BYTE *)v10 + 64) = 0;
  v14 = *v13;
  v10[17] = *v13;
  if ( v14 )
    android::RefBase::incStrong((android::RefBase *)&v14[*(_DWORD *)(*(_DWORD *)v14 - 12)], v10 + 17);
  v10[18] = v12;
  v10[19] = v11;
  _ZF = *(_DWORD *)a7 == 0;
  v10[20] = *(_DWORD *)a7;
  v16 = *(android::RefBase::weakref_type **)(a7 + 4);
  v10[21] = v16;
  if ( !_ZF )
    android::RefBase::weakref_type::incWeak(v16, v10 + 20);
  v10[22] = 0;
  v17 = *a8;
  _ZF = *a8 == 0;
  v10[23] = *a8;
  if ( !_ZF )
    android::RefBase::incStrong((android::RefBase *)&v17[*(_DWORD *)(*(_DWORD *)v17 - 12)], v10 + 23);
  __asm { VMOV.I32        Q4, #0 }
  v21 = (int)(v10 + 28);
  v22 = a10;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = (int)(v10 + 25);
  __asm { VST1.32         {D8-D9}, [R0] }
  android::String8::String8((android::String8 *)(v10 + 32));
  *((_BYTE *)v10 + 132) = a6;
  android::VectorImpl::VectorImpl((android::VectorImpl *)(v10 + 34), 4u, 0);
  v10[34] = &unk_3F624;
  *((_BYTE *)v10 + 156) = 0;
  *((_BYTE *)v10 + 157) = 0;
  v10[40] = -1;
  _R0 = (int)(v10 + 49);
  v10[53] = 0;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = (int)(v10 + 45);
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = (int)(v10 + 41);
  __asm { VST1.32         {D8-D9}, [R0] }
  sub_279A4((int)(v10 + 54));
  __asm
  {
    VMOV.I32        D16, #0
    VSTR            D16, [R4,#0x104]
  }
  v27 = operator new(0x710u);
  android::Surface::Surface(v27, a9, 0);
  (*(void (__fastcall **)(int, _DWORD, int, int))(v27 + 32))(v27 + 8, *(_DWORD *)(v27 + 32), v28, v29);
  v32 = v10[22];
  if ( v32 )
    (*(void (__fastcall **)(int, _DWORD, int, int))(v32 + 28))(v32, *(_DWORD *)(v32 + 28), v30, v31);
  v42 = (android::Rect *)(v10 + 46);
  v41 = (android::Rect *)(v10 + 42);
  v10[22] = v27 + 8;
  v33 = eglGetDisplay(0);
  if ( !a10 )
    v22 = ((int (*)(void))loc_2ECAC)();
  v34 = 0;
  v35 = eglCreateWindowSurface(v33, v22, v27 + 8, 0);
  eglQuerySurface(v33);
  eglQuerySurface(v33);
  if ( v10[18] >= 2 )
    (*(void (__fastcall **)(int, _DWORD))(v27 + 76))(v27 + 8, 0);
  v36 = (int)(v10 + 24);
  *(_DWORD *)v36 = v22;
  *(_DWORD *)(v36 + 4) = v33;
  *(_DWORD *)(v36 + 8) = v35;
  v10[29] = a5;
  v10[31] = 0;
  android::Rect::makeInvalid(v41);
  android::Rect::makeInvalid(v42);
  v37 = v10[18];
  if ( v37 > 1 )
    v34 = 2;
  v10[65] = v34;
  if ( v37 == 1 )
  {
    v38 = -47951;
    v39 = (const char *)&GLOBAL_OFFSET_TABLE_;
  }
  else if ( v37 )
  {
    v38 = -47939;
    v39 = (const char *)&GLOBAL_OFFSET_TABLE_;
  }
  else
  {
    v38 = -47967;
    v39 = (const char *)&GLOBAL_OFFSET_TABLE_;
  }
  android::String8::setTo((android::String8 *)(v10 + 32), &v39[v38]);
  sub_12F28((int)v10, 0, (int)v41, (int)v42);
  return v10;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 1074C: using guessed type int __fastcall android::Surface::Surface(_DWORD, _DWORD, _DWORD);
// 10758: using guessed type int __fastcall eglGetDisplay(_DWORD);
// 10764: using guessed type int __fastcall eglCreateWindowSurface(_DWORD, _DWORD, _DWORD, _DWORD);
// 10770: using guessed type int __fastcall eglQuerySurface(_DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00012F28) --------------------------------------------------------
int __fastcall sub_12F28(int a1, unsigned int a2, int _R2, int a4)
{
  int v9; // r4@1
  unsigned int v11; // r10@1
  int v12; // r8@1
  int v13; // r5@1
  int v14; // r7@1
  signed int v19; // r1@3
  signed int v20; // r2@3
  int v21; // r6@3
  int v22; // r1@7
  int v24; // r1@12
  int v25; // r9@13
  int *v26; // r5@13
  char v28; // r0@16
  int v29; // r1@16
  int v30; // r0@19
  int v31; // r1@19
  int v40; // r1@23
  int v44; // r1@23
  int v45; // r2@23
  int v46; // r3@23
  int v47; // r7@23
  int v48; // r5@23
  int v49; // r0@23
  int v50; // r1@23
  int v51; // r2@23
  int v52; // r3@23
  int v53; // r5@23
  signed int v54; // r0@23
  char v55; // r1@23
  int v60; // r0@29
  int v61; // r1@29
  int v65; // [sp+0h] [bp-188h]@0
  unsigned int v66; // [sp+8h] [bp-180h]@13
  int v67; // [sp+Ch] [bp-17Ch]@23
  int v68; // [sp+10h] [bp-178h]@1
  int v69; // [sp+10h] [bp-178h]@13
  int v70; // [sp+14h] [bp-174h]@9
  char v71; // [sp+18h] [bp-170h]@27
  char v72; // [sp+28h] [bp-160h]@23
  char v73; // [sp+50h] [bp-138h]@23
  char v74; // [sp+78h] [bp-110h]@23
  int v75; // [sp+7Ch] [bp-10Ch]@23
  int v76; // [sp+80h] [bp-108h]@23
  int v77; // [sp+84h] [bp-104h]@23
  int v78; // [sp+88h] [bp-100h]@23
  int v79; // [sp+8Ch] [bp-FCh]@23
  int v80; // [sp+90h] [bp-F8h]@23
  int v81; // [sp+94h] [bp-F4h]@23
  int v82; // [sp+98h] [bp-F0h]@23
  int v83; // [sp+9Ch] [bp-ECh]@23
  char v84; // [sp+A0h] [bp-E8h]@19
  char v85; // [sp+C8h] [bp-C0h]@19
  char v86; // [sp+F0h] [bp-98h]@19
  int v87; // [sp+118h] [bp-70h]@19
  int v88; // [sp+11Ch] [bp-6Ch]@19
  int v89; // [sp+120h] [bp-68h]@19
  int v90; // [sp+124h] [bp-64h]@19
  char v91; // [sp+128h] [bp-60h]@1
  int v92; // [sp+150h] [bp-38h]@1
  int v93; // [sp+154h] [bp-34h]@13
  int v94; // [sp+158h] [bp-30h]@3
  int v95; // [sp+15Ch] [bp-2Ch]@13

  __asm { VLD1.32         {D16-D17}, [R2] }
  v9 = a1;
  _R0 = &v92;
  v11 = a2;
  __asm { VST1.64         {D16-D17}, [R0] }
  v12 = *(_DWORD *)a4;
  v13 = *(_DWORD *)(a4 + 8);
  v68 = *(_DWORD *)(a4 + 4);
  v14 = *(_DWORD *)(a4 + 12);
  _R11 = *(_DWORD *)(v9 + 108);
  _R9 = *(_DWORD *)(v9 + 112);
  sub_279A4((int)&v91);
  if ( v11 <= 3 )
  {
    __asm
    {
      VMOV            S0, R11
      VMOV            S2, R9
      VCVT.F32.S32    S0, S0
      VCVT.F32.S32    S2, S2
      VMOV            R2, S0
      VMOV            R3, S2
    }
    sub_27A5C((int)&v91, dword_3D344[v11], _R2, _R3);
  }
  v19 = 0;
  v20 = 0;
  v21 = v94;
  if ( v14 >= v68 )
    v20 = 1;
  if ( v13 >= v12 )
    v19 = 1;
  v22 = v19 & v20;
  if ( !v22 )
  {
    v13 = _R11;
    v14 = _R9;
  }
  v70 = v14;
  _R7 = v22;
  if ( v22 )
    _R7 = v68;
  else
    v12 = 0;
  v24 = _R9;
  if ( v94 <= v92 )
  {
    v69 = v13;
    v66 = v11;
    v26 = (int *)((unsigned int)&v92 | 4);
    _R10 = v12;
  }
  else
  {
    v25 = v95;
    v69 = v13;
    v26 = (int *)((unsigned int)&v92 | 4);
    v66 = v11;
    _R10 = v12;
    if ( v95 > v93 )
      goto LABEL_19;
  }
  v92 = 0;
  v93 = 0;
  v94 = _R11;
  v95 = v24;
  v28 = sub_28280((int)&v91);
  v29 = v94;
  v21 = v95;
  if ( v28 & 4 )
  {
    v25 = v94;
    v94 = v95;
    v95 = v29;
  }
  else
  {
    v25 = v95;
    v21 = v94;
  }
LABEL_19:
  v30 = *(_DWORD *)(v9 + 108);
  v31 = *(_DWORD *)(v9 + 112);
  v88 = 0;
  v87 = 0;
  v89 = v30;
  v90 = v31;
  android::Region::set(v9 + 4, &v87);
  sub_279A4((int)&v86);
  sub_279A4((int)&v85);
  sub_279A4((int)&v84);
  _R0 = v70 - _R7;
  __asm
  {
    VMOV            S0, R0
    VCVT.F32.S32    S0, S0
  }
  _R0 = v92;
  _R1 = v69 - _R10;
  _R2 = v21 - v92;
  __asm
  {
    VMOV            S2, R1
    VMOV            S4, R2
    VCVT.F32.S32    S2, S2
  }
  _R1 = *v26;
  __asm { VCVT.F32.S32    S4, S4 }
  _R2 = v25 - *v26;
  __asm
  {
    VMOV            S6, R2
    VCVT.F32.S32    S6, S6
    VCMPE.F32       S4, S2
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
    goto LABEL_33;
  __asm
  {
    VCMPE.F32       S6, S0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
  {
LABEL_33:
    __asm
    {
      VDIV.F32        S2, S2, S4
      VDIV.F32        S0, S0, S6
      VMOV            R1, S2
      VSTR            S0, [SP,#0x188+var_188]
    }
    sub_27E70((int)&v84, _R1, 0, 0, v65);
    _R1 = *v26;
    _R0 = v92;
  }
  __asm
  {
    VMOV            S0, R0
    VCVT.F32.S32    S0, S0
    VMOV            S2, R1
    VCVT.F32.S32    S2, S2
    VMOV            R0, S0
  }
  v40 = _R0 ^ 0x80000000;
  __asm { VMOV            R0, S2 }
  sub_27E38((int)&v86, v40, _R0 ^ 0x80000000);
  __asm
  {
    VMOV            S0, R10
    VMOV            S2, R7
    VCVT.F32.S32    S0, S0
  }
  v67 = _R7;
  __asm
  {
    VCVT.F32.S32    S2, S2
    VMOV            R1, S0
    VMOV            R2, S2
  }
  sub_27E38((int)&v85, _R1, _R2);
  sub_27B8C((int)&v72, (int)&v91, (int)&v85);
  sub_27B8C((int)&v73, (int)&v72, (int)&v84);
  sub_27B8C((int)&v74, (int)&v73, (int)&v86);
  v44 = v75;
  v45 = v76;
  v46 = v77;
  v47 = v78;
  v48 = v79;
  *(_DWORD *)(v9 + 216) = *(_DWORD *)&v74;
  v49 = v9 + 220;
  *(_DWORD *)(v9 + 236) = v48;
  *(_DWORD *)v49 = v44;
  *(_DWORD *)(v49 + 4) = v45;
  *(_DWORD *)(v49 + 8) = v46;
  *(_DWORD *)(v49 + 12) = v47;
  v50 = v81;
  v51 = v82;
  v52 = v83;
  v53 = v9 + 240;
  *(_DWORD *)v53 = v80;
  *(_DWORD *)(v53 + 4) = v50;
  *(_DWORD *)(v53 + 8) = v51;
  *(_DWORD *)(v53 + 12) = v52;
  android::Nsd::postDraw((android::Nsd *)&v74);
  android::Nsd::postDraw((android::Nsd *)&v73);
  android::Nsd::postDraw((android::Nsd *)&v72);
  LOBYTE(v53) = sub_28270(v9 + 216);
  v54 = sub_28188(v9 + 216);
  v55 = v53 & 0xFC;
  _ZF = (v53 & 0xFC) == 0;
  _R5 = &v92;
  if ( !_ZF )
    v55 = 1;
  if ( !v54 )
    v55 = 1;
  _R7 = &v71;
  *(_BYTE *)(v9 + 256) = v55;
  sub_27ED8((int)&v71, v9 + 216, (int)&v92);
  __asm { VLD1.64         {D16-D17}, [R7] }
  _R0 = v9 + 200;
  __asm { VST1.32         {D16-D17}, [R0] }
  if ( *(_DWORD *)(v9 + 208) <= *(_DWORD *)(v9 + 200) || *(_DWORD *)(v9 + 212) <= *(_DWORD *)(v9 + 204) )
  {
    v60 = *(_DWORD *)(v9 + 108);
    v61 = *(_DWORD *)(v9 + 112);
    *(_DWORD *)(v9 + 200) = 0;
    *(_DWORD *)(v9 + 204) = 0;
    *(_DWORD *)(v9 + 208) = v60;
    *(_DWORD *)(v9 + 212) = v61;
  }
  *(_DWORD *)(v9 + 164) = v66;
  _R0 = v9 + 168;
  __asm
  {
    VLD1.64         {D16-D17}, [R5]
    VST1.32         {D16-D17}, [R0]
  }
  *(_DWORD *)(v9 + 184) = _R10;
  *(_DWORD *)(v9 + 188) = v67;
  *(_DWORD *)(v9 + 192) = v69;
  *(_DWORD *)(v9 + 196) = v70;
  android::Nsd::postDraw((android::Nsd *)&v84);
  android::Nsd::postDraw((android::Nsd *)&v85);
  android::Nsd::postDraw((android::Nsd *)&v86);
  return android::Nsd::postDraw((android::Nsd *)&v91);
}
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);

//----- (000131F4) --------------------------------------------------------
int __fastcall sub_131F4(int a1)
{
  int v1; // r4@1
  int v2; // r2@3
  int v3; // r3@3
  char *v4; // r0@3
  int v5; // r0@5
  char *v6; // r0@9
  const void *v7; // r1@9
  int v8; // r1@11
  int v9; // r1@11

  v1 = a1;
  if ( *(_DWORD *)(a1 + 104) )
  {
    eglDestroySurface(*(_DWORD *)(a1 + 100));
    *(_DWORD *)(v1 + 104) = 0;
  }
  android::Nsd::postDraw((android::Nsd *)(v1 + 216));
  *(_DWORD *)(v1 + 136) = &unk_3F624;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v1 + 136));
  android::VectorImpl::~VectorImpl((android::VectorImpl *)(v1 + 136));
  android::String8::~String8((android::String8 *)(v1 + 128));
  v4 = *(char **)(v1 + 92);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v1 + 92));
  v5 = *(_DWORD *)(v1 + 88);
  if ( v5 )
    (*(void (__fastcall **)(int, _DWORD, int, int))(v5 + 28))(v5, *(_DWORD *)(v5 + 28), v2, v3);
  if ( *(_DWORD *)(v1 + 80) )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(v1 + 84), (const void *)(v1 + 80));
  v7 = (const void *)(v1 + 68);
  v6 = *(char **)(v1 + 68);
  if ( v6 )
    android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], v7);
  android::Region::~Region(v1 + 44, v7);
  android::Region::~Region(v1 + 24, v8);
  android::Region::~Region(v1 + 4, v9);
  return v1;
}
// 107A0: using guessed type int __fastcall eglDestroySurface(_DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (000132C0) --------------------------------------------------------
signed int __fastcall sub_132C0(signed int result, int a2)
{
  signed int v2; // r4@1
  int v3; // r5@1
  signed int v4; // r1@2

  v2 = result;
  v3 = a2;
  if ( *(_DWORD *)(result + 76) >= 0 )
  {
    ((void (__fastcall *)(_DWORD))loc_2A81C)(a2);
    v4 = *(_DWORD *)(v2 + 76);
    if ( v4 >= 2 )
      sub_29448(v3, v4);
    result = -1;
    *(_DWORD *)(v2 + 76) = -1;
  }
  return result;
}

//----- (000132EC) --------------------------------------------------------
int __fastcall sub_132EC(int a1)
{
  return *(_DWORD *)(a1 + 108);
}

//----- (000132F0) --------------------------------------------------------
int __fastcall sub_132F0(int a1)
{
  return *(_DWORD *)(a1 + 112);
}

//----- (000132F4) --------------------------------------------------------
int __fastcall sub_132F4(int a1)
{
  return *(_DWORD *)(a1 + 116);
}

//----- (000132F8) --------------------------------------------------------
int __fastcall sub_132F8(int result, const android::String8 *a2)
{
  if ( !*(_DWORD *)a2 || *(_DWORD *)(*(_DWORD *)a2 - 12) != 1 )
    result = j_android::String8::setTo((android::String8 *)(result + 128), a2);
  return result;
}

//----- (0001330C) --------------------------------------------------------
int __fastcall sub_1330C(int a1)
{
  return *(_DWORD *)(a1 + 124);
}

//----- (00013310) --------------------------------------------------------
int __fastcall sub_13310(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 92) + 8))();
}

//----- (00013318) --------------------------------------------------------
int __fastcall sub_13318(int a1)
{
  int v1; // r4@1
  int result; // r0@1

  v1 = a1;
  (*(void (**)(void))(**(_DWORD **)(*(_DWORD *)(a1 + 68) + 200) + 20))();
  result = *(_DWORD *)(v1 + 124) + 1;
  *(_DWORD *)(v1 + 124) = result;
  return result;
}

//----- (00013330) --------------------------------------------------------
int __fastcall sub_13330(int a1)
{
  return (***(int (****)(void))(a1 + 92))();
}

//----- (00013338) --------------------------------------------------------
int __fastcall sub_13338(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  signed int v4; // r6@1
  signed int v5; // r0@1
  signed int v6; // r3@1
  signed int v7; // r1@3

  v2 = a1;
  v3 = a2;
  v4 = sub_2A294(a2, *(_DWORD *)(a1 + 76));
  v5 = sub_2A21C(v3, *(_DWORD *)(v2 + 76));
  v6 = 2;
  if ( v4 )
    v6 = 1;
  v7 = v6;
  if ( v5 )
    v7 = 3;
  if ( !v4 )
    v7 = v6;
  return (*(int (__fastcall **)(_DWORD, signed int))(**(_DWORD **)(v2 + 92) + 4))(*(_DWORD *)(v2 + 92), v7);
}

//----- (0001343C) --------------------------------------------------------
signed int __fastcall sub_1343C(int a1, int a2)
{
  int v2; // r4@1
  signed int result; // r0@1

  v2 = a1;
  result = sub_29228(a2);
  if ( !result )
    result = (*(int (**)(void))(**(_DWORD **)(v2 + 92) + 16))();
  return result;
}

//----- (00013458) --------------------------------------------------------
int __fastcall sub_13458(int a1)
{
  return *(_DWORD *)(a1 + 120);
}

//----- (0001345C) --------------------------------------------------------
int __fastcall sub_1345C(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  int v4; // r5@2

  v2 = a1;
  v3 = a2;
  if ( eglGetCurrentSurface(12377) == *(_DWORD *)(a1 + 104) )
  {
LABEL_5:
    v4 = 1;
    goto LABEL_6;
  }
  v4 = eglMakeCurrent(v3);
  if ( v4 == 1 )
  {
    if ( *(_DWORD *)(v2 + 72) >= 2 )
      eglSwapInterval(v3, 0);
    goto LABEL_5;
  }
LABEL_6:
  (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(*(_DWORD *)(v2 + 68) + 200) + 24))(
    *(_DWORD *)(*(_DWORD *)(v2 + 68) + 200),
    *(_DWORD *)(v2 + 108),
    *(_DWORD *)(v2 + 112),
    0,
    0,
    *(_DWORD *)(v2 + 108));
  return v4;
}
// 10800: using guessed type int __fastcall eglGetCurrentSurface(_DWORD);
// 1080C: using guessed type int __fastcall eglMakeCurrent(_DWORD);
// 10818: using guessed type int __fastcall eglSwapInterval(_DWORD, _DWORD);

//----- (000134BC) --------------------------------------------------------
int __fastcall sub_134BC(int a1)
{
  return (*(int (__cdecl **)(_DWORD, _DWORD, _DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(*(_DWORD *)(a1 + 68) + 200)
                                                                            + 24))(
           *(_DWORD *)(*(_DWORD *)(a1 + 68) + 200),
           *(_DWORD *)(a1 + 108),
           *(_DWORD *)(a1 + 112),
           0,
           0,
           *(_DWORD *)(a1 + 108));
}

//----- (000134EC) --------------------------------------------------------
int __fastcall sub_134EC(int result, char a2)
{
  *(_BYTE *)(result + 157) = a2;
  return result;
}

//----- (000134F4) --------------------------------------------------------
signed int __fastcall sub_134F4(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r7@2
  int v6; // r0@3
  signed int result; // r0@6

  v2 = a1;
  v3 = a2;
  android::VectorImpl::operator=(a1 + 136);
  *(_BYTE *)(v2 + 156) = 0;
  v4 = *(_DWORD *)(v3 + 8);
  if ( v4 )
  {
    v5 = 0;
    do
    {
      v6 = (*(int (**)(void))(**(_DWORD **)(*(_DWORD *)(v3 + 4) + 4 * v5++) + 28))();
      if ( v6 == 1 )
        *(_BYTE *)(v2 + 156) = 1;
    }
    while ( v4 != v5 );
  }
  result = *(_BYTE *)(v2 + 157);
  if ( *(_BYTE *)(v2 + 157) )
  {
    result = 1;
    *(_BYTE *)(v2 + 156) = 1;
  }
  return result;
}
// 10824: using guessed type int __fastcall android::VectorImpl::operator=(_DWORD);

//----- (00013540) --------------------------------------------------------
int __fastcall sub_13540(int a1)
{
  return a1 + 136;
}

//----- (00013544) --------------------------------------------------------
int __fastcall sub_13544(int a1)
{
  return *(_BYTE *)(a1 + 156);
}

//----- (0001354C) --------------------------------------------------------
int __fastcall sub_1354C(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r5@1
  int v6; // r0@2
  int v7; // r1@2
  int result; // r0@2
  int v9; // r1@3
  int v10; // r0@3
  int v11; // r1@3
  int v12; // [sp+4h] [bp-44h]@3
  int v13; // [sp+8h] [bp-40h]@3
  int v14; // [sp+Ch] [bp-3Ch]@3
  int v15; // [sp+10h] [bp-38h]@3
  char v16; // [sp+14h] [bp-34h]@3
  int v17; // [sp+28h] [bp-20h]@2
  int v18; // [sp+2Ch] [bp-1Ch]@2
  int v19; // [sp+30h] [bp-18h]@2
  int v20; // [sp+34h] [bp-14h]@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  android::Region::Region(a1);
  if ( v4 == 1 )
  {
    v6 = *(_DWORD *)(v5 + 108);
    v7 = *(_DWORD *)(v5 + 112);
    v18 = 0;
    v17 = 0;
    v19 = v6;
    v20 = v7;
    result = android::Region::set(v3, &v17);
  }
  else
  {
    sub_280A4((int)&v16, v5 + 216, v5 + 4);
    android::Region::operator=(v3);
    android::Region::~Region(&v16, v9);
    v10 = *(_DWORD *)(v5 + 108);
    v11 = *(_DWORD *)(v5 + 112);
    v13 = 0;
    v12 = 0;
    v14 = v10;
    v15 = v11;
    result = android::Region::andSelf(v3, &v12);
  }
  return result;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 1083C: using guessed type int __fastcall android::Region::andSelf(_DWORD, _DWORD);

//----- (000135AC) --------------------------------------------------------
int __fastcall sub_135AC(int result, int a2)
{
  *(_DWORD *)(result + 260) = a2;
  return result;
}

//----- (000135B4) --------------------------------------------------------
int __fastcall sub_135B4(int a1)
{
  return *(_DWORD *)(a1 + 260);
}

//----- (000135BC) --------------------------------------------------------
_BOOL4 __fastcall sub_135BC(int a1)
{
  return *(_DWORD *)(a1 + 260) != 0;
}

//----- (000135C8) --------------------------------------------------------
int __fastcall sub_135C8(int result, int a2)
{
  *(_DWORD *)(result + 264) = a2;
  return result;
}

//----- (000135D0) --------------------------------------------------------
int __fastcall sub_135D0(int a1)
{
  return *(_DWORD *)(a1 + 264);
}

//----- (000135D8) --------------------------------------------------------
int __fastcall sub_135D8(int a1, int a2)
{
  int v2; // r1@1
  int v3; // r2@1
  int v5; // [sp+0h] [bp-18h]@1
  int v6; // [sp+4h] [bp-14h]@1
  int v7; // [sp+8h] [bp-10h]@1
  int v8; // [sp+Ch] [bp-Ch]@1

  *(_DWORD *)(a1 + 160) = a2;
  v2 = *(_DWORD *)(a1 + 108);
  v3 = *(_DWORD *)(a1 + 112);
  v6 = 0;
  v5 = 0;
  v7 = v2;
  v8 = v3;
  return android::Region::set(a1 + 4, &v5);
}
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);

//----- (00013600) --------------------------------------------------------
int __fastcall sub_13600(int a1)
{
  unsigned int v1; // r0@1
  int result; // r0@2

  v1 = *(_DWORD *)(a1 + 164);
  if ( v1 <= 3 )
    result = dword_3D344[v1];
  else
    result = 0;
  return result;
}

//----- (00013624) --------------------------------------------------------
int __fastcall sub_13624(int a1)
{
  int v1; // r5@1
  int v2; // r0@1
  int v3; // r6@1
  int v4; // r1@1
  int v5; // r1@3
  int v7; // [sp+0h] [bp-30h]@1
  int v8; // [sp+4h] [bp-2Ch]@1
  int v9; // [sp+8h] [bp-28h]@1
  int v10; // [sp+Ch] [bp-24h]@1

  v1 = a1;
  v3 = a1 + 108;
  v2 = *(_DWORD *)(a1 + 108);
  v4 = *(_DWORD *)(v3 + 4);
  v8 = 0;
  v7 = 0;
  v9 = v2;
  v10 = v4;
  android::Region::set(v3 - 104, &v7);
  if ( *(_DWORD *)(v3 - 4) )
  {
    eglDestroySurface(*(_DWORD *)(v1 + 100));
    *(_DWORD *)(v1 + 104) = 0;
  }
  (*(void (**)(void))(**(_DWORD **)(v1 + 92) + 24))();
  *(_DWORD *)(v1 + 104) = eglCreateWindowSurface(*(_DWORD *)(v1 + 100), *(_DWORD *)(v1 + 96), *(_DWORD *)(v1 + 88), 0);
  eglQuerySurface(*(_DWORD *)(v1 + 100));
  v5 = *(_DWORD *)(v1 + 104);
  return eglQuerySurface(*(_DWORD *)(v1 + 100));
}
// 10764: using guessed type int __fastcall eglCreateWindowSurface(_DWORD, _DWORD, _DWORD, _DWORD);
// 10770: using guessed type int __fastcall eglQuerySurface(_DWORD);
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);
// 107A0: using guessed type int __fastcall eglDestroySurface(_DWORD);

//----- (0001369C) --------------------------------------------------------
int __fastcall sub_1369C(int a1, android::String8 *a2)
{
  int v2; // r5@1
  android::String8 *v3; // ST104_4@1
  int v4; // r7@1
  int v5; // STFC_4@1
  int v6; // ST108_4@1
  int v7; // STEC_4@1
  int v8; // STF4_4@1
  int v9; // STF8_4@1
  int v10; // ST100_4@1
  int v11; // STF0_4@1
  int v12; // STE8_4@1
  int v13; // STE4_4@1
  int v14; // r9@1
  int v15; // r6@1
  int v16; // STE0_4@1
  int v17; // r11@1
  int v18; // r10@1
  int v19; // STD8_4@1
  int v20; // r8@1
  int v21; // r4@1
  int v22; // STDC_4@1
  int v23; // STD4_4@1
  int v24; // STD0_4@1
  int v25; // STC0_4@1
  int v26; // STB8_4@1
  int v27; // STCC_4@1
  int v28; // STC8_4@1
  int v29; // STC4_4@1
  int v30; // STBC_4@1
  int v31; // STB4_4@1
  char v46; // [sp+10Ch] [bp-6Ch]@1

  v2 = a1;
  v3 = a2;
  v4 = a1 + 216;
  v5 = *(_DWORD *)(a1 + 76);
  v6 = *(_DWORD *)(a1 + 72);
  v7 = *(_DWORD *)(a1 + 88);
  v8 = *(_DWORD *)(a1 + 112);
  v9 = *(_DWORD *)(a1 + 108);
  v10 = *(_DWORD *)(a1 + 128);
  v11 = *(_DWORD *)(a1 + 160);
  v12 = *(_DWORD *)(a1 + 164);
  v13 = sub_28270(a1 + 216);
  v14 = *(_DWORD *)(v2 + 208);
  v15 = *(_DWORD *)(v2 + 212);
  v16 = *(_BYTE *)(v2 + 132);
  v17 = *(_DWORD *)(v2 + 184);
  v18 = *(_DWORD *)(v2 + 188);
  v19 = *(_BYTE *)(v2 + 156);
  v20 = *(_DWORD *)(v2 + 192);
  v21 = *(_DWORD *)(v2 + 196);
  v22 = *(_DWORD *)(v2 + 124);
  v23 = *(_DWORD *)(v2 + 260);
  v24 = *(_DWORD *)(v2 + 264);
  v25 = *(_DWORD *)(v2 + 200);
  v26 = *(_DWORD *)(v2 + 204);
  v27 = *(_DWORD *)(v2 + 144);
  v28 = *(_DWORD *)(v2 + 172);
  v29 = *(_DWORD *)(v2 + 176);
  v30 = *(_DWORD *)(v2 + 180);
  v31 = *(_DWORD *)(v2 + 168);
  _R0 = sub_27CC4(v4, 0);
  __asm { VLDR            S16, [R0] }
  _R0 = sub_27CC4(v4, 1);
  __asm { VLDR            S18, [R0] }
  _R0 = sub_27CC4(v4, 2);
  __asm { VLDR            S20, [R0] }
  _R0 = sub_27CC4(v4, 0);
  __asm { VLDR            S22, [R0,#4] }
  _R0 = sub_27CC4(v4, 1);
  __asm { VLDR            S24, [R0,#4] }
  _R0 = sub_27CC4(v4, 2);
  __asm { VLDR            S26, [R0,#4] }
  _R0 = sub_27CC4(v4, 0);
  __asm { VLDR            S28, [R0,#8] }
  _R0 = sub_27CC4(v4, 1);
  __asm { VLDR            S30, [R0,#8] }
  _R0 = sub_27CC4(v4, 2);
  __asm
  {
    VLDR            S0, [R0,#8]
    VCVT.F64.F32    D16, S30
    VCVT.F64.F32    D17, S28
    VCVT.F64.F32    D18, S26
    VCVT.F64.F32    D19, S24
    VCVT.F64.F32    D20, S22
    VCVT.F64.F32    D21, S20
    VCVT.F64.F32    D22, S18
    VCVT.F64.F32    D23, S16
    VCVT.F64.F32    D24, S0
    VSTR            D22, [SP,#0x178+var_108]
    VSTR            D21, [SP,#0x178+var_100]
    VSTR            D20, [SP,#0x178+var_F8]
    VSTR            D19, [SP,#0x178+var_F0]
    VSTR            D18, [SP,#0x178+var_E8]
    VSTR            D17, [SP,#0x178+var_E0]
    VSTR            D16, [SP,#0x178+var_D8]
    VSTR            D23, [SP,#0x178+var_110]
    VSTR            D24, [SP,#0x178+var_D0]
  }
  android::String8::appendFormat(
    v3,
    "+ DisplayDevice: %s\n"
    "   type=%x, hwcId=%d, layerStack=%u, (%4dx%4d), ANativeWindow=%p, orient=%2d (type=%08x), flips=%u, isSecure=%d, sec"
    "ureVis=%d, powerMode=%d, activeConfig=%d, numLayers=%zu\n"
    "   v:[%d,%d,%d,%d], f:[%d,%d,%d,%d], s:[%d,%d,%d,%d],transform:[[%0.3f,%0.3f,%0.3f][%0.3f,%0.3f,%0.3f][%0.3f,%0.3f,%0.3f]]\n",
    v10,
    v6,
    v5,
    v11,
    v9,
    v8,
    v7,
    v12,
    v13,
    v22,
    v16,
    v19,
    v23,
    v24,
    v27,
    v31,
    v28,
    v29,
    v30,
    v17,
    v18,
    v20,
    v21,
    v25,
    v26,
    v14,
    v15);
  android::String8::String8((android::String8 *)&v46);
  (*(void (**)(void))(**(_DWORD **)(v2 + 92) + 20))();
  android::String8::append(v3, (const android::String8 *)&v46);
  return android::String8::~String8((android::String8 *)&v46);
}
// 5BE54: using guessed type int __register_atfork(void);

//----- (00013A04) --------------------------------------------------------
int __fastcall sub_13A04(int a1)
{
  int v5; // r4@1
  int v8; // r0@1
  char *v9; // r0@1

  __asm { VMOV.I32        Q8, #0 }
  v5 = a1;
  _R0 = a1 + 308;
  __asm { VST1.32         {D16-D17}, [R0] }
  _R0 = v5 + 292;
  __asm { VST1.32         {D16-D17}, [R0] }
  *(_DWORD *)(v5 + 396) = 0;
  v8 = operator new(0x68u);
  v9 = (char *)sub_13A8C(v8);
  *(_DWORD *)(v5 + 400) = v9;
  android::RefBase::incStrong((android::RefBase *)&v9[*(_DWORD *)(*(_DWORD *)v9 - 12)], (const void *)(v5 + 400));
  pthread_mutex_init((pthread_mutex_t *)(v5 + 404), 0);
  (*(void (**)(void))(**(_DWORD **)(v5 + 400) + 8))();
  sub_13B0C(v5);
  pthread_mutex_lock((pthread_mutex_t *)(v5 + 404));
  *(_DWORD *)(v5 + 284) = 0;
  pthread_mutex_unlock((pthread_mutex_t *)(v5 + 404));
  return v5;
}

//----- (00013A8C) --------------------------------------------------------
int __fastcall sub_13A8C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::RefBase::RefBase((android::RefBase *)(a1 + 92));
  android::Thread::Thread((android::Thread *)v1, (unsigned int)&off_3F65C);
  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)v1 = &off_4068C;
  *(_DWORD *)(v1 + 92) = &off_406C0;
  *(_WORD *)(v1 + 36) = 0;
  *(_DWORD *)(v1 + 60) = 0;
  *(_DWORD *)(v1 + 56) = 0;
  _R0 = v1 + 40;
  __asm { VST1.64         {D16-D17}, [R0] }
  android::VectorImpl::VectorImpl((android::VectorImpl *)(v1 + 64), 0x18u, 0);
  *(_DWORD *)(v1 + 64) = &unk_3F670;
  pthread_mutex_init((pthread_mutex_t *)(v1 + 84), 0);
  pthread_cond_init((pthread_cond_t *)(v1 + 88), 0);
  return v1;
}
// 3F65C: using guessed type void *;
// 4068C: using guessed type void *off_4068C;
// 406C0: using guessed type void *off_406C0;

//----- (00013B0C) --------------------------------------------------------
int __fastcall sub_13B0C(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r8@1
  int v3; // r7@1
  int v4; // r4@1
  int v5; // r5@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  v3 = v1 + 292;
  *(_DWORD *)(v1 + 284) = 0;
  v4 = 0;
  *(_DWORD *)(v1 + 280) = 0;
  *(_DWORD *)(v1 + 288) = 0;
  *(_DWORD *)(v1 + 392) = 0;
  *(_DWORD *)(v1 + 20) = 0;
  *(_DWORD *)(v1 + 16) = 0;
  v5 = v1 + 328;
  do
  {
    sub_13CD0((unsigned int **)(v3 + v4));
    *(_DWORD *)v5 = 0;
    v4 += 4;
    *(_DWORD *)(v5 + 4) = 0;
    v5 += 8;
  }
  while ( v4 != 32 );
  return j_j_pthread_mutex_unlock(v2);
}

//----- (00013B58) --------------------------------------------------------
int __fastcall sub_13B58(int a1)
{
  int v1; // r4@1
  pthread_mutex_t *v2; // r5@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  *(_DWORD *)(v1 + 284) = 0;
  return j_j_pthread_mutex_unlock(v2);
}

//----- (00013B78) --------------------------------------------------------
int __fastcall sub_13B78(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  int v3; // r5@3
  unsigned int *v4; // r0@4
  unsigned int *v5; // t1@4
  unsigned int v6; // r1@6
  void *v7; // r0@8

  v1 = a1;
  pthread_mutex_destroy((pthread_mutex_t *)(a1 + 404));
  v2 = *(char **)(v1 + 400);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], (const void *)(v1 + 400));
  v3 = v1 + 324;
  do
  {
    v5 = *(unsigned int **)(v3 - 4);
    v3 -= 4;
    v4 = v5;
    if ( v5 )
    {
      __dmb();
      do
        v6 = __ldrex(v4);
      while ( __strex(v6 - 1, v4) );
      if ( v6 == 1 )
      {
        v7 = (void *)android::Fence::~Fence((android::Fence *)v4);
        operator delete(v7);
      }
    }
  }
  while ( v3 != v1 + 292 );
  return v1;
}

//----- (00013BD0) --------------------------------------------------------
signed int __fastcall sub_13BD0(int a1, unsigned int **a2)
{
  int v2; // r9@1
  unsigned int **v3; // r6@1
  pthread_mutex_t *v4; // r8@1
  unsigned int *v5; // r4@1
  int v6; // r0@1
  unsigned int v7; // r1@3
  int v8; // r1@4
  unsigned int *v9; // r0@4
  unsigned int **v10; // r5@4
  unsigned int v11; // r1@6
  void *v12; // r0@8
  signed int v13; // r4@9
  signed int v14; // r5@9
  int v15; // r0@9
  android::Fence *v16; // r0@10
  int v17; // r0@11
  int v18; // r1@11
  int v19; // r6@11
  int v20; // r7@11
  signed int v21; // r5@15
  bool v22; // cf@15
  bool v23; // zf@15
  __int64 v24; // r0@15

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  v5 = *v3;
  v6 = *(_DWORD *)(v2 + 392);
  if ( *v3 )
  {
    __dmb();
    do
      v7 = __ldrex(v5);
    while ( __strex(v7 + 1, v5) );
  }
  v8 = v2 + 4 * v6;
  v9 = *(unsigned int **)(v8 + 292);
  v10 = (unsigned int **)(v8 + 292);
  if ( v9 )
  {
    __dmb();
    do
      v11 = __ldrex(v9);
    while ( __strex(v11 - 1, v9) );
    if ( v11 == 1 )
    {
      v12 = (void *)android::Fence::~Fence((android::Fence *)v9);
      operator delete(v12);
    }
  }
  *v10 = v5;
  v13 = 328;
  v14 = 292;
  v15 = v2 + 8 * *(_DWORD *)(v2 + 392);
  *(_DWORD *)(v15 + 328) = 0;
  *(_DWORD *)(v15 + 332) = 0;
  *(_DWORD *)(v2 + 392) = ((unsigned __int8)*(_DWORD *)(v2 + 392) + 1) & 7;
  *(_DWORD *)(v2 + 288) = 0;
  do
  {
    v16 = *(android::Fence **)(v2 + v14);
    if ( v16 )
    {
      v17 = android::Fence::getSignalTime(v16);
      v19 = v18;
      v20 = v17;
      if ( v18 ^ 0x7FFFFFFF | ~v17 )
      {
        sub_13CD0((unsigned int **)(v2 + v14));
        *(_DWORD *)(v2 + v13) = v20;
        *(_DWORD *)(v2 + v13 + 4) = v19;
      }
    }
    v13 += 8;
    v14 += 4;
  }
  while ( v13 != 392 );
  sub_13CFC((signed __int64 *)v2);
  if ( *(_QWORD *)v2 )
  {
    v24 = *(_QWORD *)(v2 + 16);
    v21 = 0;
    v22 = (unsigned int)v24 >= 0x40BE4000;
    v23 = (_DWORD)v24 == 1086210048;
    LODWORD(v24) = 0;
    if ( !v23 && v22 )
      LODWORD(v24) = 1;
    if ( SHIDWORD(v24) > 37 )
      v21 = 1;
    if ( HIDWORD(v24) == 37 )
      v21 = v24;
  }
  else
  {
    v21 = 1;
  }
  pthread_mutex_unlock(v4);
  return v21;
}

//----- (00013CD0) --------------------------------------------------------
unsigned int *__fastcall sub_13CD0(unsigned int **a1)
{
  unsigned int **v1; // r4@1
  unsigned int *result; // r0@1
  unsigned int v3; // r1@3
  void *v4; // r0@5

  v1 = a1;
  result = *a1;
  if ( result )
  {
    __dmb();
    do
      v3 = __ldrex(result);
    while ( __strex(v3 - 1, result) );
    if ( v3 == 1 )
    {
      v4 = (void *)android::Fence::~Fence((android::Fence *)result);
      operator delete(v4);
    }
    result = 0;
    *v1 = 0;
  }
  return result;
}

//----- (00013CFC) --------------------------------------------------------
int __fastcall sub_13CFC(signed __int64 *a1)
{
  signed __int64 *v1; // r6@1
  signed __int64 v2; // r0@1
  signed __int64 v3; // r10@2
  signed __int64 v4; // r4@2
  int v5; // r8@2
  int v6; // r9@2
  unsigned int v7; // off@2
  signed int v8; // r7@2
  __int64 v9; // r0@3
  signed int v10; // r2@3
  signed int v11; // r3@3
  signed __int64 v12; // r0@10
  signed int v13; // r2@10
  signed int v14; // r3@12
  unsigned int v15; // r2@16
  int v16; // r6@16
  __int64 v17; // r0@18
  unsigned __int64 v18; // kr20_8@18
  signed __int64 *v20; // [sp+0h] [bp-38h]@2
  unsigned int v21; // [sp+4h] [bp-34h]@2
  int v22; // [sp+8h] [bp-30h]@2
  unsigned int v23; // [sp+Ch] [bp-2Ch]@2
  unsigned int v24; // [sp+10h] [bp-28h]@2

  v1 = a1;
  v2 = *a1;
  if ( v2 )
  {
    v3 = v1[1];
    v4 = v2 / (*((_DWORD *)v1 + 99) + 1);
    v5 = (int)(v1 + 41);
    v20 = v1;
    v6 = 0;
    v22 = (unsigned __int64)(v4 / 2) >> 32;
    v7 = __RCR__(v4 + (HIDWORD(v4) >> 31), 1);
    v21 = v7;
    v8 = 0;
    v24 = 0;
    v23 = 0;
    do
    {
      v9 = *(_QWORD *)(v5 + v6);
      v10 = 0;
      v11 = 0;
      if ( (unsigned int)v9 <= (unsigned int)v3 )
        v10 = 1;
      if ( SHIDWORD(v9) <= SHIDWORD(v3) )
        v11 = 1;
      if ( HIDWORD(v9) == HIDWORD(v3) )
        v11 = v10;
      if ( !v11 )
      {
        v12 = (v9 - v3) % v4;
        ++v8;
        v13 = 0;
        if ( (unsigned int)v12 > v21 )
          v13 = 1;
        v14 = 0;
        if ( SHIDWORD(v12) > v22 )
          v14 = 1;
        if ( HIDWORD(v12) == v22 )
          v14 = v13;
        v16 = (unsigned __int64)(v12 - v4) >> 32;
        v15 = v12 - v4;
        if ( !v14 )
        {
          v16 = HIDWORD(v12);
          v15 = v12;
        }
        LODWORD(v17) = v15 * v15;
        HIDWORD(v17) = (v15 * (unsigned __int64)v15 >> 32) + v15 * v16 + v15 * v16;
        v18 = __PAIR__(v23, v24) + v17;
        v23 = (__PAIR__(v23, v24) + v17) >> 32;
        v24 = v18;
      }
      v6 += 8;
    }
    while ( v6 != 64 );
    if ( v8 < 1 )
    {
      LODWORD(v2) = 0;
      *((_DWORD *)v20 + 4) = 0;
      *((_DWORD *)v20 + 5) = 0;
    }
    else
    {
      v2 = (signed __int64)__PAIR__(v23, v24) / v8;
      v20[2] = v2;
    }
  }
  return v2;
}

//----- (00013DF4) --------------------------------------------------------
signed int __fastcall sub_13DF4(int a1, int a2, __int64 a3)
{
  int v3; // r9@1
  pthread_mutex_t *v4; // r8@1
  __int64 v5; // r4@1
  unsigned int v6; // r0@1
  signed int v7; // r0@4
  int v8; // r4@5
  int v9; // r5@5
  signed int v10; // r5@8
  bool v11; // cf@8
  bool v12; // zf@8
  __int64 v13; // r0@8

  v3 = a1;
  v4 = (pthread_mutex_t *)(a1 + 404);
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  *(_QWORD *)(v3 + 8 * (((unsigned __int8)*(_DWORD *)(v3 + 280) + (unsigned __int8)*(_DWORD *)(v3 + 284)) & 0x1F) + 24) = v5;
  v6 = *(_DWORD *)(v3 + 284);
  if ( v6 > 0x1F )
    *(_DWORD *)(v3 + 280) = ((unsigned __int8)*(_DWORD *)(v3 + 280) + 1) & 0x1F;
  else
    *(_DWORD *)(v3 + 284) = v6 + 1;
  sub_13EB8(v3);
  v7 = *(_DWORD *)(v3 + 288);
  *(_DWORD *)(v3 + 288) = v7 + 1;
  if ( v7 >= 5 )
  {
    v8 = v3 + 328;
    v9 = 0;
    *(_DWORD *)(v3 + 392) = 0;
    *(_DWORD *)(v3 + 20) = 0;
    *(_DWORD *)(v3 + 16) = 0;
    do
    {
      sub_13CD0((unsigned int **)(v3 + 292 + v9));
      *(_DWORD *)v8 = 0;
      v9 += 4;
      *(_DWORD *)(v8 + 4) = 0;
      v8 += 8;
    }
    while ( v9 != 32 );
  }
  if ( *(_QWORD *)v3 )
  {
    v13 = *(_QWORD *)(v3 + 16);
    v10 = 0;
    v11 = (unsigned int)v13 >= 0x40BE4000;
    v12 = (_DWORD)v13 == 1086210048;
    LODWORD(v13) = 0;
    if ( !v12 && v11 )
      LODWORD(v13) = 1;
    if ( SHIDWORD(v13) > 37 )
      v10 = 1;
    if ( HIDWORD(v13) == 37 )
      v10 = v13;
  }
  else
  {
    v10 = 1;
  }
  pthread_mutex_unlock(v4);
  return v10;
}

//----- (00013EB8) --------------------------------------------------------
int __fastcall sub_13EB8(int result)
{
  int v1; // r8@1
  unsigned int v2; // r9@1
  int v3; // r12@2
  signed __int64 v4; // r0@2
  signed int v5; // r3@2
  unsigned int v6; // r2@3
  __int64 v7; // r0@4
  __int64 v22; // r0@11
  __int64 v23; // r6@11
  __int64 v24; // r0@11
  __int64 v25; // r10@14
  int v26; // r5@14

  v1 = result;
  v2 = *(_DWORD *)(result + 284);
  if ( v2 >= 3 )
  {
    v3 = *(_DWORD *)(result + 280);
    v4 = 0LL;
    v5 = 32;
    do
    {
      v6 = v5 - 30;
      v4 = v4
         + *(_QWORD *)(v1 + 24 + 8 * (((_BYTE)v3 + (_BYTE)v5 - 31) & 0x1F))
         - *(_QWORD *)(v1 + 24 + 8 * (((_BYTE)v3 + (_BYTE)v5) & 0x1F));
      ++v5;
    }
    while ( v6 < v2 );
    v7 = v4 / (v2 - 1);
    _R6 = v7;
    LODWORD(_R0) = j___floatdidf(v7);
    __asm
    {
      VLDR            D16, =6.28318531
      VMOV            D17, R0, R1
      VDIV.F64        D8, D16, D17
    }
    *(_QWORD *)v1 = _R6;
    if ( _ZF )
    {
      __asm
      {
        VMOV.F64        D16, #0.5
        VMOV.I32        D16, #0
        VMOV            D9, D16
        VMOV            D10, D16
      }
    }
    else
    {
      _R0 = j___floatdidf(*(_QWORD *)(v1 + 8 * (*(_DWORD *)(v1 + 280) & 0x1F) + 24) % _R6);
      __asm
      {
        VMOV            D16, R0, R1
        VMUL.F64        D16, D8, D16
        VMOV            R5, R6, D16
      }
      _R0 = COERCE_UNSIGNED_INT64(cos(COERCE_DOUBLE(__PAIR__(_R6, _R5))));
      __asm
      {
        VMOV.F64        D10, #0.5
        VMOV            D9, R0, R1
        VMOV.I32        D10, #0
      }
      _R0 = sin(COERCE_DOUBLE(__PAIR__(_R6, _R5)));
      __asm
      {
        VMOV            D16, R0, R1
        VADD.F64        D9, D9, D10
        VADD.F64        D10, D16, D10
      }
      LODWORD(_R0) = *(_DWORD *)(v1 + 284);
      if ( LODWORD(_R0) >= 2 )
      {
        HIDWORD(_R6) = 1;
        do
        {
          _R0 = j___floatdidf(*(_QWORD *)(v1 + 8 * (((unsigned __int8)*(_DWORD *)(v1 + 280) + BYTE4(_R6)) & 0x1F) + 24) % *(_QWORD *)v1);
          __asm
          {
            VMOV            D16, R0, R1
            VMUL.F64        D16, D8, D16
            VMOV            R5, R6, D16
          }
          _R0 = COERCE_UNSIGNED_INT64(cos(COERCE_DOUBLE(__PAIR__(_R6, _R5))));
          __asm { VMOV            D11, R0, R1 }
          _R0 = sin(COERCE_DOUBLE(__PAIR__(_R6, _R5)));
          __asm { VMOV            D16, R0, R1 }
          ++HIDWORD(_R6);
          __asm
          {
            VADD.F64        D9, D9, D11
            VADD.F64        D10, D10, D16
          }
          LODWORD(_R0) = *(_DWORD *)(v1 + 284);
        }
        while ( HIDWORD(_R6) < LODWORD(_R0) );
      }
      __asm
      {
        VMOV            S0, R0
        VCVT.F64.U32    D16, S0
      }
    }
    __asm
    {
      VDIV.F64        D17, D10, D16
      VDIV.F64        D16, D9, D16
      VMOV            R0, R1, D17
      VMOV            R2, R3, D16
    }
    _R0 = atan2(_R0, _R2);
    __asm
    {
      VMOV            D16, R0, R1
      VDIV.F64        D16, D16, D8
      VMOV            R0, R1, D16
    }
    LODWORD(v22) = j___fixdfdi(LODWORD(_R0), HIDWORD(_R0));
    v23 = v22;
    *(_QWORD *)(v1 + 8) = v22;
    _VF = __OFSUB__(HIDWORD(v22), -1);
    _ZF = HIDWORD(v22) == -1;
    _NF = HIDWORD(v22) + 1 < 0;
    v24 = *(_QWORD *)v1;
    if ( (unsigned __int8)(_NF ^ _VF) | _ZF )
    {
      v23 += v24;
      *(_QWORD *)(v1 + 8) = v23;
    }
    v25 = *(_DWORD *)(v1 + 396) * v24 + v24;
    *(_QWORD *)v1 = v25;
    v26 = *(_DWORD *)(v1 + 400);
    pthread_mutex_lock((pthread_mutex_t *)(v26 + 84));
    *(_QWORD *)(v26 + 40) = v25;
    *(_QWORD *)(v26 + 48) = v23;
    pthread_cond_signal((pthread_cond_t *)(v26 + 88));
    result = j_j_pthread_mutex_unlock((pthread_mutex_t *)(v26 + 84));
  }
  return result;
}

//----- (000140B4) --------------------------------------------------------
signed int __fastcall sub_140B4(int a1, int a2, int a3, int a4, char **a5)
{
  int v5; // r6@1
  int v6; // r4@1
  pthread_mutex_t *v7; // r7@1
  int v8; // r5@1
  signed int v9; // r4@1

  v5 = a1;
  v6 = a4;
  v7 = (pthread_mutex_t *)(a1 + 404);
  v8 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  v9 = sub_140EC(*(_DWORD *)(v5 + 400), (int)a5, v8, v6, a5);
  pthread_mutex_unlock(v7);
  return v9;
}

//----- (000140EC) --------------------------------------------------------
signed int __fastcall sub_140EC(int a1, int a2, int a3, int a4, char **a5)
{
  int v5; // r5@1
  int v6; // r9@1
  pthread_mutex_t *v7; // r8@1
  int v8; // r7@1
  unsigned int v9; // r0@1
  unsigned int v10; // r6@2
  char **v11; // r3@2
  signed int v12; // r6@5
  __int64 v13; // r0@5
  __int64 v14; // r2@5
  unsigned int v15; // off@5
  int v17; // [sp+0h] [bp-38h]@5
  int v18; // [sp+4h] [bp-34h]@5
  unsigned __int64 v19; // [sp+8h] [bp-30h]@5
  char *v20; // [sp+10h] [bp-28h]@5

  v5 = a1;
  v6 = a4;
  v7 = (pthread_mutex_t *)(a1 + 84);
  v8 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 84));
  v9 = *(_DWORD *)(v5 + 72);
  if ( v9 )
  {
    v10 = 0;
    v11 = (char **)(*(_DWORD *)(v5 + 68) + 16);
    while ( *v11 != *a5 )
    {
      ++v10;
      v11 += 6;
      if ( v10 >= v9 )
        goto LABEL_5;
    }
    v12 = -22;
  }
  else
  {
LABEL_5:
    v12 = 0;
    v20 = 0;
    v17 = v8;
    v18 = v6;
    sub_123A8(&v20, a5);
    LODWORD(v13) = systemTime(1);
    v14 = *(_QWORD *)(v5 + 40) + ((unsigned int)(*(_QWORD *)(v5 + 40) >> 32) >> 31);
    v15 = __RCR__(v14, 1);
    v19 = v13 - __PAIR__(SHIDWORD(v14) >> 1, v15);
    android::VectorImpl::push((android::VectorImpl *)(v5 + 64), &v17);
    pthread_cond_signal((pthread_cond_t *)(v5 + 88));
    if ( v20 )
    {
      android::RefBase::decStrong((android::RefBase *)&v20[*(_DWORD *)(*(_DWORD *)v20 - 12)], &v20);
      v12 = 0;
    }
  }
  pthread_mutex_unlock(v7);
  return v12;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (00014190) --------------------------------------------------------
int __fastcall sub_14190(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  pthread_mutex_t *v4; // r6@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  _android_log_print(3, "SurfaceFlinger", "setRefreshSkipCount(%d)", v3);
  *(_DWORD *)(v2 + 396) = v3;
  sub_13EB8(v2);
  return j_j_pthread_mutex_unlock(v4);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000141D4) --------------------------------------------------------
signed int __fastcall sub_141D4(int a1, _DWORD *a2)
{
  int v2; // r5@1
  _DWORD *v3; // r4@1
  pthread_mutex_t *v4; // r6@1
  signed int v5; // r4@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  v5 = sub_141FC(*(_DWORD *)(v2 + 400), v3);
  pthread_mutex_unlock(v4);
  return v5;
}

//----- (000141FC) --------------------------------------------------------
signed int __fastcall sub_141FC(int a1, _DWORD *a2)
{
  int v2; // r5@1
  _DWORD *v3; // r6@1
  pthread_mutex_t *v4; // r4@1
  unsigned int v5; // r0@1
  _DWORD *v6; // r3@2
  unsigned int v7; // r1@2
  signed int v8; // r5@5

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 84);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 84));
  v5 = *(_DWORD *)(v2 + 72);
  if ( v5 )
  {
    v6 = (_DWORD *)(*(_DWORD *)(v2 + 68) + 16);
    v7 = 0;
    while ( *v6 != *v3 )
    {
      ++v7;
      v6 += 6;
      if ( v7 >= v5 )
        goto LABEL_5;
    }
    android::VectorImpl::removeItemsAt((android::VectorImpl *)(v2 + 64), v7, 1u);
    pthread_cond_signal((pthread_cond_t *)(v2 + 88));
    v8 = 0;
  }
  else
  {
LABEL_5:
    v8 = -22;
  }
  pthread_mutex_unlock(v4);
  return v8;
}

//----- (0001424C) --------------------------------------------------------
int __fastcall sub_1424C(int a1)
{
  int v1; // r4@1
  pthread_mutex_t *v2; // r5@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  sub_14270(*(_DWORD *)(v1 + 400));
  return j_j_pthread_mutex_unlock(v2);
}

//----- (00014270) --------------------------------------------------------
int __fastcall sub_14270(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r4@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 84);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 84));
  if ( !*(_BYTE *)(v1 + 37) )
  {
    *(_BYTE *)(v1 + 37) = 1;
    pthread_cond_signal((pthread_cond_t *)(v1 + 88));
  }
  return j_j_pthread_mutex_unlock(v2);
}

//----- (000142A0) --------------------------------------------------------
int __fastcall sub_142A0(int a1, int a2, int a3, int a4)
{
  int v4; // r6@1
  int v5; // r4@1
  pthread_mutex_t *v6; // r8@1
  int v7; // r5@1
  int v8; // r7@1

  v4 = a1;
  v5 = a4;
  v6 = (pthread_mutex_t *)(a1 + 404);
  v7 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  *(_DWORD *)v4 = v7;
  *(_DWORD *)(v4 + 4) = v5;
  *(_DWORD *)(v4 + 8) = 0;
  *(_DWORD *)(v4 + 12) = 0;
  v8 = *(_DWORD *)(v4 + 400);
  pthread_mutex_lock((pthread_mutex_t *)(v8 + 84));
  *(_DWORD *)(v8 + 40) = v7;
  *(_DWORD *)(v8 + 44) = v5;
  *(_DWORD *)(v8 + 48) = 0;
  *(_DWORD *)(v8 + 52) = 0;
  pthread_cond_signal((pthread_cond_t *)(v8 + 88));
  pthread_mutex_unlock((pthread_mutex_t *)(v8 + 84));
  return j_j_pthread_mutex_unlock(v6);
}

//----- (000142F8) --------------------------------------------------------
int __fastcall sub_142F8(int a1)
{
  int *v1; // r4@1
  pthread_mutex_t *v2; // r5@1
  int v3; // r4@1

  v1 = (int *)a1;
  v2 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  v3 = *v1;
  pthread_mutex_unlock(v2);
  return v3;
}

//----- (00014318) --------------------------------------------------------
int __fastcall sub_14318(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r8@1
  pthread_mutex_t *v4; // r6@1
  int v5; // r0@1
  unsigned int v6; // r4@1
  unsigned int v7; // r7@1
  unsigned int v8; // r11@1
  int v9; // r10@1
  unsigned int v10; // r1@1
  unsigned int v11; // r9@1
  unsigned int v12; // r5@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  v5 = systemTime(1);
  v6 = *(_DWORD *)v2;
  v7 = *(_DWORD *)(v2 + 4);
  v8 = *(_DWORD *)(v2 + 8);
  v9 = v5;
  v11 = v10;
  v12 = *(_DWORD *)(v2 + 12);
  pthread_mutex_unlock(v4);
  return ((unsigned __int64)((signed __int64)(__PAIR__(v11, v9) - __PAIR__(v12, v8)) / (signed __int64)__PAIR__(v7, v6))
        + v3
        + 1)
       * v6
       + v8;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (00014380) --------------------------------------------------------
int __fastcall sub_14380(int a1, android::String8 *a2)
{
  int v2; // r6@1
  android::String8 *v3; // r11@1
  __int64 v4; // r8@1
  int v5; // r5@1
  __int64 v11; // r4@1
  signed __int64 v14; // r0@5
  unsigned int v15; // r5@5
  signed __int64 v16; // r8@6
  __int64 v17; // r4@10
  int v18; // r7@10
  unsigned int v19; // r1@10
  unsigned __int64 v20; // r0@11
  int v21; // r2@11
  int v22; // r10@15
  int v23; // r9@15
  __int64 v25; // r0@15
  int v30; // [sp+0h] [bp-70h]@0
  int v31; // [sp+4h] [bp-6Ch]@0
  int v32; // [sp+8h] [bp-68h]@1
  pthread_mutex_t *mutex; // [sp+18h] [bp-58h]@1
  unsigned int v34; // [sp+28h] [bp-48h]@10
  int v35; // [sp+2Ch] [bp-44h]@10

  v2 = a1;
  v3 = a2;
  mutex = (pthread_mutex_t *)(a1 + 404);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 404));
  android::String8::appendFormat(v3, "present fences are %s\n", "used");
  v4 = *(_QWORD *)v2;
  v5 = *(_DWORD *)(v2 + 396);
  _R0 = j___floatdidf(*(_QWORD *)v2);
  __asm
  {
    VLDR            D16, =1.0e9
    VMOV            D17, R0, R1
    VDIV.F64        D16, D16, D17
  }
  v32 = v5;
  __asm { VSTR            D16, [SP,#0x70+var_70] }
  android::String8::appendFormat(v3, "mPeriod: %lld ns (%.3f fps; skipCount=%d)\n", v4);
  android::String8::appendFormat(v3, "mPhase: %lld ns\n", *(_QWORD *)(v2 + 8));
  v11 = *(_QWORD *)(v2 + 16);
  LODWORD(_R0) = j___floatdidf(*(_QWORD *)(v2 + 16));
  __asm
  {
    VMOV            D16, R0, R1
    VSQRT.F64       D16, D16
    VCMPE.F64       D16, D16
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _VF )
  {
    _R0 = COERCE_UNSIGNED_INT64(sqrt(_R0));
    __asm { VMOV            D16, R0, R1 }
  }
  __asm { VSTR            D16, [SP,#0x70+var_70] }
  android::String8::appendFormat(v3, "mError: %lld ns (sqrt=%.1f)\n", v11);
  android::String8::appendFormat(v3, "mNumResyncSamplesSincePresent: %d (limit %d)\n", *(_DWORD *)(v2 + 288), 4);
  android::String8::appendFormat(v3, "mNumResyncSamples: %zd (max %d)\n", *(_DWORD *)(v2 + 284), 32);
  android::String8::appendFormat(v3, "mResyncSamples:\n");
  if ( *(_DWORD *)(v2 + 284) )
  {
    v14 = -1LL;
    v15 = 0;
    do
    {
      v16 = *(_QWORD *)(v2 + 8 * (((unsigned __int8)*(_DWORD *)(v2 + 280) + (_BYTE)v15) & 0x1F) + 24);
      if ( v15 )
        android::String8::appendFormat(
          v3,
          "  %lld (+%lld)\n",
          v16,
          (_DWORD)v16 - (_DWORD)v14,
          (_DWORD)((unsigned __int64)(v16 - v14) >> 32),
          v32);
      else
        android::String8::appendFormat(v3, "  %lld\n", v16, v30, v31, v32);
      ++v15;
      v14 = v16;
    }
    while ( v15 < *(_DWORD *)(v2 + 284) );
  }
  android::String8::appendFormat(v3, "mPresentFences / mPresentTimes [%d]:\n", 8);
  v35 = systemTime(1);
  v17 = 0LL;
  v18 = 0;
  __asm { VLDR            D8, =1000000.0 }
  v34 = v19;
  do
  {
    v20 = __PAIR__(v17, HIDWORD(v17));
    v21 = ((unsigned __int8)*(_DWORD *)(v2 + 392) + (_BYTE)v18) & 7;
    v17 = *(_QWORD *)(v2 + 8 * v21 + 328);
    if ( *(_DWORD *)(v2 + 4 * v21 + 292) )
    {
      android::String8::appendFormat(v3, "  [unsignaled fence]\n");
    }
    else if ( v17 )
    {
      if ( v20 )
      {
        v22 = v17 - HIDWORD(v20);
        v23 = (v17 - __PAIR__(v20, HIDWORD(v20))) >> 32;
        _R0 = j___floatdidf(v17 - __PAIR__(v20, HIDWORD(v20)));
        __asm { VMOV            D9, R0, R1 }
        LODWORD(v25) = v35 - v17;
        HIDWORD(v25) = v34 - (HIDWORD(v17) + !_CF);
        _R0 = j___floatdidf(v25);
        __asm { VMOV            D10, R0, R1 }
        _R0 = j___floatdidf(*(_QWORD *)v2);
        __asm
        {
          VMOV            D16, R0, R1
          VDIV.F64        D17, D10, D8
          VDIV.F64        D16, D9, D16
          VSTR            D16, [SP,#0x70+var_68]
          VSTR            D17, [SP,#0x70+var_60]
        }
        android::String8::appendFormat(v3, "  %lld (+%lld / %.3f)  (%.3f ms ago)\n", v17, v22, v23, v32);
      }
      else
      {
        _R0 = j___floatdidf(__PAIR__(v34, v35) - v17);
        __asm
        {
          VMOV            D16, R0, R1
          VDIV.F64        D16, D16, D8
          VSTR            D16, [SP,#0x70+var_70]
        }
        android::String8::appendFormat(v3, "  %lld  (%.3f ms ago)\n", v17, v30, v31, v32);
      }
    }
    else
    {
      android::String8::appendFormat(v3, "  0\n", 0);
    }
    ++v18;
  }
  while ( v18 != 8 );
  android::String8::appendFormat(v3, "current monotonic time: %lld\n", v35, v34);
  return j_j_pthread_mutex_unlock(mutex);
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (00014634) --------------------------------------------------------
int __fastcall sub_14634(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_14B4C(a1, (int)&off_3F658);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 92));
  return v1;
}
// 3F658: using guessed type void **off_3F658;

//----- (0001465C) --------------------------------------------------------
void __fastcall sub_1465C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_14B4C(a1, (int)&off_3F658);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 92));
  j_operator delete((void *)v1);
}
// 3F658: using guessed type void **off_3F658;

//----- (00014688) --------------------------------------------------------
int __fastcall sub_14688(int a1)
{
  int v1; // r10@1
  int v2; // r1@1
  int v3; // r9@1
  pthread_mutex_t *v4; // r6@1
  android::VectorImpl *v5; // r4@1
  signed int v6; // r7@2
  char *v7; // r0@3
  int v8; // r1@6
  __int64 v9; // r10@6
  signed int v10; // r0@6
  signed int v11; // r1@6
  __int64 v12; // r2@13
  int v13; // r0@13
  __int64 v14; // r0@14
  int v15; // r12@14
  int v16; // lr@14
  int *v17; // r4@14
  signed __int64 v18; // r0@14
  signed __int64 v19; // r2@14
  int v20; // r5@20
  signed int v21; // r0@20
  int v22; // r5@22
  int v23; // r0@23
  int v24; // r7@23
  char *v25; // r0@24
  int v26; // r7@27
  int v27; // r1@28
  pthread_mutex_t *v28; // r9@29
  unsigned int v29; // r5@32
  int v31; // [sp+1Ch] [bp-8Ch]@1
  pthread_cond_t *cond; // [sp+28h] [bp-80h]@1
  pthread_mutex_t *mutex; // [sp+2Ch] [bp-7Ch]@1
  int v34; // [sp+30h] [bp-78h]@29
  unsigned __int64 *v35; // [sp+34h] [bp-74h]@1
  int v36; // [sp+38h] [bp-70h]@1
  unsigned int v37; // [sp+3Ch] [bp-6Ch]@1
  void *v38; // [sp+40h] [bp-68h]@31
  void *v39; // [sp+54h] [bp-54h]@29
  void *v40; // [sp+68h] [bp-40h]@1
  int v41; // [sp+6Ch] [bp-3Ch]@33
  unsigned int v42; // [sp+70h] [bp-38h]@32
  int v43; // [sp+7Ch] [bp-2Ch]@13
  int v44; // [sp+80h] [bp-28h]@13

  v1 = a1;
  v36 = a1;
  v37 = systemTime(1);
  v31 = v1 + 56;
  v3 = v2;
  cond = (pthread_cond_t *)(v1 + 88);
  v35 = (unsigned __int64 *)(v1 + 40);
  v4 = (pthread_mutex_t *)(v1 + 84);
  v5 = (android::VectorImpl *)&v40;
  mutex = (pthread_mutex_t *)(v1 + 84);
  do
  {
    android::VectorImpl::VectorImpl(v5, 0x10u, 0);
    v40 = &unk_3F698;
    pthread_mutex_lock(v4);
    if ( *(_BYTE *)(v1 + 36) )
      goto LABEL_25;
    if ( !*v35 )
    {
      v23 = pthread_cond_wait(cond, v4);
      v24 = v23;
      if ( v23 )
      {
        v25 = strerror(v23);
        _android_log_print(6, "SurfaceFlinger", "error waiting for new events: %s (%d)", v25, -v24);
LABEL_25:
        v6 = 1;
      }
      else
      {
        v6 = 2;
      }
LABEL_26:
      pthread_mutex_unlock(v4);
      goto LABEL_36;
    }
    LODWORD(v9) = sub_14BA0(v1, *v35 >> 32, v37, v3);
    HIDWORD(v9) = v8;
    v10 = 0;
    v11 = 0;
    if ( (unsigned int)v9 <= v37 )
      v10 = 1;
    if ( SHIDWORD(v9) <= v3 )
      v11 = 1;
    if ( HIDWORD(v9) == v3 )
      v11 = v10;
    if ( !v11 )
    {
      v43 = (v9 - __PAIR__(v3, v37)) / 1000000000;
      v44 = (v9 - __PAIR__(v3, v37)) % 1000000000;
      v13 = pthread_cond_timedwait_relative_np(cond, mutex, &v43, HIDWORD(v12));
      if ( v13 == 110 )
      {
        LODWORD(v14) = systemTime(1);
        v16 = HIDWORD(v14);
        v15 = v14;
        v17 = (int *)&v40;
        v18 = 63LL * *(_QWORD *)v31 + v14 - v9;
        v19 = 0LL;
        if ( (unsigned int)v18 > 0x1E8483F )
          LODWORD(v19) = 1;
        if ( SHIDWORD(v18) > 0 )
          HIDWORD(v19) = 1;
        if ( !HIDWORD(v18) )
          HIDWORD(v19) = v19;
        LODWORD(v19) = v15;
        v20 = (unsigned __int64)(v18 / 64) >> 32;
        v21 = v18 / 64;
        if ( HIDWORD(v19) )
        {
          v20 = 0;
          v21 = 500000;
        }
        *(_DWORD *)v31 = v21;
        *(_DWORD *)(v31 + 4) = v20;
        v22 = v36;
        goto LABEL_31;
      }
      v26 = -v13;
      if ( v13 )
      {
        v7 = strerror(v13);
        _android_log_print(6, "SurfaceFlinger", "error waiting for next event: %s (%d)", v7, v26);
        v1 = v36;
        v6 = 1;
        v4 = mutex;
        v5 = (android::VectorImpl *)&v40;
        goto LABEL_26;
      }
    }
    v22 = v36;
    LODWORD(v19) = systemTime(1);
    v16 = v27;
    if ( !*(_BYTE *)(v36 + 37) )
    {
      v17 = (int *)&v40;
LABEL_31:
      HIDWORD(v19) = v16;
      v28 = mutex;
      v34 = v16;
      v37 = v19;
      sub_14DB0((android::VectorImpl *)&v38, v22, v19);
      android::VectorImpl::operator=(v17);
      v38 = &unk_3F698;
      android::VectorImpl::finish_vector((android::VectorImpl *)&v38);
      android::VectorImpl::~VectorImpl((android::VectorImpl *)&v38);
      goto LABEL_32;
    }
    v37 = v19;
    v34 = v27;
    sub_14CD0((android::VectorImpl *)&v39, v36, v19, v27);
    android::VectorImpl::operator=(&v40);
    v39 = &unk_3F698;
    android::VectorImpl::finish_vector((android::VectorImpl *)&v39);
    android::VectorImpl::~VectorImpl((android::VectorImpl *)&v39);
    v28 = mutex;
    *(_BYTE *)(v36 + 37) = 0;
LABEL_32:
    pthread_mutex_unlock(v28);
    v6 = 0u;
    v29 = 0;
    if ( v42 )
    {
      do
      {
        (*(void (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(**(_DWORD **)(v41 + v6) + 8))(
          *(_DWORD *)(v41 + v6),
          *(_DWORD *)(**(_DWORD **)(v41 + v6) + 8),
          *(_QWORD *)(v41 + v6 + 8),
          *(_QWORD *)(v41 + v6 + 8) >> 32);
        ++v29;
        v6 += 16;
      }
      while ( v29 < v42 );
      v6 = 0;
    }
    v4 = v28;
    v1 = v36;
    v3 = v34;
    v5 = (android::VectorImpl *)&v40;
LABEL_36:
    v40 = &unk_3F698;
    android::VectorImpl::finish_vector(v5);
    android::VectorImpl::~VectorImpl(v5);
  }
  while ( v6 != 1 );
  return 0;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10824: using guessed type int __fastcall android::VectorImpl::operator=(_DWORD);
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10950: using guessed type int __fastcall pthread_cond_timedwait_relative_np(_DWORD, _DWORD, _DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00014924) --------------------------------------------------------
int __fastcall sub_14924(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_14B4C((int)a1 + *(_DWORD *)(*a1 - 12), (int)&off_3F658);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 92));
}
// 3F658: using guessed type void **off_3F658;

//----- (00014950) --------------------------------------------------------
void __fastcall sub_14950(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_14B4C(v1, (int)&off_3F658);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 92));
  j_operator delete((void *)v1);
}
// 3F658: using guessed type void **off_3F658;

//----- (00014B4C) --------------------------------------------------------
int __fastcall sub_14B4C(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 12);
  pthread_cond_destroy((pthread_cond_t *)(v2 + 88));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 84));
  *(_DWORD *)(v2 + 64) = &unk_3F670;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 64));
  android::VectorImpl::~VectorImpl((android::VectorImpl *)(v2 + 64));
  return j_android::Thread::~Thread((android::Thread *)v2);
}

//----- (00014BA0) --------------------------------------------------------
signed int __fastcall sub_14BA0(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // r12@1
  unsigned int v5; // lr@1
  int v6; // r3@2
  unsigned int v7; // r8@2
  int v8; // r11@2
  __int64 v9; // r0@2
  unsigned int v10; // off@2
  signed int v11; // r1@2
  signed int result; // r0@2
  signed int v13; // r3@3
  __int64 v14; // r0@3
  unsigned int v15; // r2@3
  int v16; // r10@3
  bool v17; // cf@3
  bool v18; // zf@3
  signed int v19; // r2@3
  unsigned int v20; // r2@9
  unsigned int v21; // r3@9
  unsigned int v22; // r7@11
  unsigned int v23; // r9@11
  signed __int64 v24; // r0@11
  unsigned __int64 v25; // r2@11
  unsigned int v26; // kr08_4@11
  signed int v27; // r7@11
  unsigned __int64 v28; // kr18_8@11
  unsigned int v29; // r9@11
  int v30; // r3@11
  signed int v31; // r2@13
  unsigned int v32; // r3@17
  signed int v33; // r7@17
  signed int v34; // r4@19
  signed int v35; // r5@19
  unsigned int v36; // [sp+4h] [bp-4Ch]@2
  int v37; // [sp+8h] [bp-48h]@2
  unsigned int v38; // [sp+Ch] [bp-44h]@2
  unsigned int v39; // [sp+10h] [bp-40h]@2
  unsigned int v40; // [sp+14h] [bp-3Ch]@2
  unsigned int v41; // [sp+18h] [bp-38h]@1
  unsigned int v42; // [sp+1Ch] [bp-34h]@3
  int v43; // [sp+20h] [bp-30h]@3
  unsigned int v44; // [sp+24h] [bp-2Ch]@3
  signed int v45; // [sp+28h] [bp-28h]@3

  v4 = a4;
  v5 = a3;
  v41 = *(_DWORD *)(a1 + 72);
  if ( *(_DWORD *)(a1 + 72) )
  {
    v6 = 0;
    v7 = *(_DWORD *)(a1 + 44);
    v8 = *(_DWORD *)(a1 + 68);
    v40 = *(_DWORD *)(a1 + 48);
    v39 = *(_DWORD *)(a1 + 52);
    v38 = *(_DWORD *)(a1 + 40);
    v9 = *(_QWORD *)(a1 + 40) + (*(_DWORD *)(a1 + 44) >> 31);
    v10 = __RCR__(v9, 1);
    v37 = SHIDWORD(v9) >> 1;
    v11 = 0x7FFFFFFF;
    v36 = v10;
    result = -1;
    do
    {
      v43 = v6;
      v13 = 0;
      v44 = result;
      v45 = v11;
      v14 = *(_QWORD *)v8;
      v15 = *(_DWORD *)(v8 + 8);
      v16 = *(_DWORD *)(v8 + 12);
      v42 = v15;
      v17 = v15 >= v5;
      v18 = v15 == v5;
      v19 = 0;
      if ( !v18 && v17 )
        v19 = 1;
      if ( v16 > v4 )
        v13 = 1;
      if ( v16 == v4 )
        v13 = v19;
      v20 = v4;
      v18 = v13 == 0;
      v21 = v5;
      if ( !v18 )
      {
        v20 = *(_DWORD *)(v8 + 12);
        v21 = *(_DWORD *)(v8 + 8);
      }
      v23 = (v14 + __PAIR__(v39, v40)) >> 32;
      v22 = v14 + v40;
      v24 = (signed __int64)(__PAIR__(v20, v21) - (v14 + __PAIR__(v39, v40))) / (signed __int64)__PAIR__(v7, v38) + 1;
      v25 = (unsigned int)v24 * (unsigned __int64)v38;
      v8 += 24;
      v26 = v22;
      v27 = 0;
      LODWORD(v24) = HIDWORD(v25) + v24 * v7 + HIDWORD(v24) * v38;
      v11 = v45;
      v28 = __PAIR__(v24, (unsigned int)v25) + __PAIR__(v23, v26);
      v29 = v25 + v26 - v42;
      v30 = (v28 - __PAIR__(v16, v42)) >> 32;
      if ( v30 < v37 )
        v27 = 1;
      v31 = 0;
      if ( v29 < v36 )
        v31 = 1;
      if ( v30 != v37 )
        v31 = v27;
      v33 = (v28 + __PAIR__(v7, v38)) >> 32;
      v32 = v28 + v38;
      if ( !v31 )
        v32 = v28;
      result = v44;
      v34 = 0;
      v35 = 0;
      if ( v32 < v44 )
        v34 = 1;
      if ( !v31 )
        v33 = HIDWORD(v28);
      if ( v33 < v45 )
        v35 = 1;
      if ( v33 == v45 )
        v35 = v34;
      if ( v35 )
      {
        v11 = v33;
        result = v32;
      }
      v6 = v43 + 1;
    }
    while ( v43 + 1 < v41 );
  }
  else
  {
    result = -1;
  }
  return result;
}

//----- (00014CD0) --------------------------------------------------------
unsigned int __fastcall sub_14CD0(android::VectorImpl *a1, int a2, int a3, int a4)
{
  int v4; // r10@1
  int v5; // r4@1
  int v6; // r9@1
  unsigned int result; // r0@1
  unsigned int v8; // r2@2
  _DWORD *v9; // r1@2
  signed int v10; // r8@6
  unsigned int v11; // r5@6
  int v12; // r0@7
  android::VectorImpl *v13; // [sp+4h] [bp-3Ch]@1
  char *v14; // [sp+8h] [bp-38h]@7
  int v15; // [sp+10h] [bp-30h]@7
  int v16; // [sp+14h] [bp-2Ch]@7

  v4 = a3;
  v5 = a2;
  v6 = a4;
  v13 = a1;
  *(_DWORD *)android::VectorImpl::VectorImpl(a1, 0x10u, 0) = &unk_3F698;
  result = *(_DWORD *)(a2 + 72);
  if ( result )
  {
    v8 = 0;
    v9 = (_DWORD *)(*(_DWORD *)(a2 + 68) + 8);
    while ( (unsigned int)(v4 - *v9) >= 0x5B8D80 )
    {
      ++v8;
      v9 += 6;
      if ( v8 >= result )
      {
        if ( result )
        {
          v10 = 16;
          v11 = 0;
          do
          {
            v14 = 0;
            sub_123A8(&v14, (char **)(*(_DWORD *)(v5 + 68) + v10));
            v15 = v4;
            v16 = v6;
            android::VectorImpl::push(v13, &v14);
            v12 = android::VectorImpl::editItemLocation((android::VectorImpl *)(v5 + 64), v11);
            *(_DWORD *)(v12 + 8) = v4;
            *(_DWORD *)(v12 + 12) = v6;
            if ( v14 )
              android::RefBase::decStrong((android::RefBase *)&v14[*(_DWORD *)(*(_DWORD *)v14 - 12)], &v14);
            result = *(_DWORD *)(v5 + 72);
            ++v11;
            v10 += 24;
          }
          while ( v11 < result );
        }
        return result;
      }
    }
  }
  return result;
}

//----- (00014DB0) --------------------------------------------------------
unsigned int __fastcall sub_14DB0(android::VectorImpl *a1, int a2, signed __int64 a3)
{
  unsigned int v3; // r5@1
  int v4; // r6@1
  unsigned int v5; // r11@1
  unsigned int result; // r0@1
  __int64 v7; // r0@2
  int v8; // r3@4
  unsigned int v9; // r4@4
  int v10; // r8@4
  unsigned int v11; // r12@4
  signed int v12; // r3@4
  __int64 v13; // r6@4
  unsigned __int64 v14; // kr08_8@14
  signed __int64 v15; // r0@14
  unsigned int v16; // r7@14
  signed int v17; // r5@14
  unsigned __int64 v18; // kr10_8@14
  unsigned __int64 v19; // r2@14
  unsigned __int64 v20; // kr18_8@14
  unsigned int v21; // r6@14
  unsigned int v22; // off@14
  bool v23; // cf@16
  signed int v24; // r2@16
  unsigned __int64 v25; // r4@20
  signed int v26; // r1@22
  signed int v27; // r0@26
  android::VectorImpl *v28; // [sp+8h] [bp-68h]@2
  android::VectorImpl *v29; // [sp+Ch] [bp-64h]@1
  int v30; // [sp+10h] [bp-60h]@1
  int v31; // [sp+14h] [bp-5Ch]@2
  int v32; // [sp+18h] [bp-58h]@1
  unsigned int v33; // [sp+1Ch] [bp-54h]@1
  int v34; // [sp+20h] [bp-50h]@1
  signed __int64 v35; // [sp+24h] [bp-4Ch]@1
  int v36; // [sp+2Ch] [bp-44h]@4
  int v37; // [sp+30h] [bp-40h]@4
  unsigned int v38; // [sp+34h] [bp-3Ch]@2
  char *v39; // [sp+38h] [bp-38h]@31
  unsigned __int64 v40; // [sp+40h] [bp-30h]@31

  v3 = a3;
  v4 = a2;
  v35 = a3;
  v34 = a2;
  v29 = a1;
  *(_DWORD *)android::VectorImpl::VectorImpl(a1, 0x10u, 0) = &unk_3F698;
  LODWORD(a3) = *(_DWORD *)(a2 + 40);
  v5 = *(_DWORD *)(a2 + 44);
  v30 = a2 + 40;
  result = *(_DWORD *)(a2 + 72);
  v33 = v3 - a3;
  v32 = (__PAIR__(HIDWORD(a3), v3) - __PAIR__(v5, (unsigned int)a3)) >> 32;
  if ( result )
  {
    HIDWORD(v7) = 8;
    v28 = (android::VectorImpl *)(v4 + 64);
    v31 = v4 + 48;
    v38 = 1;
    while ( 1 )
    {
      LODWORD(v7) = *(_DWORD *)(v4 + 68);
      v37 = HIDWORD(v7);
      v8 = v7 + HIDWORD(v7);
      v36 = v8;
      v9 = *(_DWORD *)(v7 + HIDWORD(v7));
      v10 = *(_DWORD *)(v7 + HIDWORD(v7) + 4);
      LODWORD(v7) = *(_DWORD *)(v7 + HIDWORD(v7) - 8);
      v11 = *(_DWORD *)(v8 - 4);
      v12 = 0;
      v13 = v33;
      if ( v9 > v33 )
        HIDWORD(v13) = 1;
      if ( v10 > v32 )
        v12 = 1;
      if ( v10 == v32 )
        v12 = HIDWORD(v13);
      HIDWORD(v13) = v32;
      if ( v12 )
        HIDWORD(v13) = v10;
      if ( v12 )
        LODWORD(v13) = v9;
      HIDWORD(a3) = v5;
      HIDWORD(v7) = *(_DWORD *)(v31 + 4);
      v14 = v7 + __PAIR__(v11, *(_DWORD *)v31);
      v15 = v13 - (v7 + __PAIR__(v11, *(_DWORD *)v31));
      v16 = a3;
      v17 = 0;
      v18 = (v15 / a3 + 1) * __PAIR__(v5, (unsigned int)a3) + v14;
      v19 = v18 - __PAIR__(v10, v9);
      v20 = __PAIR__(v5, v16) + (v5 >> 31);
      v22 = __RCR__(v20, 1);
      v21 = v22;
      if ( (signed int)((v18 - __PAIR__(v10, v9)) >> 32) < SHIDWORD(v20) >> 1 )
        v17 = 1;
      v23 = (unsigned int)v19 >= v21;
      v24 = 0;
      if ( !v23 )
        v24 = 1;
      if ( HIDWORD(v19) != SHIDWORD(v20) >> 1 )
        v24 = v17;
      v25 = v18 + __PAIR__(v5, v16);
      if ( !v24 )
        LODWORD(v25) = v18;
      v26 = 0;
      if ( (unsigned int)v25 >= (unsigned int)v35 )
        v26 = 1;
      if ( !v24 )
        HIDWORD(v25) = HIDWORD(v18);
      v27 = 0;
      if ( SHIDWORD(v25) >= SHIDWORD(v35) )
        v27 = 1;
      if ( HIDWORD(v25) == HIDWORD(v35) )
        v27 = v26;
      if ( !v27 )
      {
        v39 = 0;
        sub_123A8(&v39, (char **)(v36 + 8));
        v40 = v25;
        android::VectorImpl::push(v29, &v39);
        *(_QWORD *)(android::VectorImpl::editItemLocation(v28, v38 - 1) + 8) = v25;
        if ( v39 )
          android::RefBase::decStrong((android::RefBase *)&v39[*(_DWORD *)(*(_DWORD *)v39 - 12)], &v39);
      }
      v4 = v34;
      result = *(_DWORD *)(v34 + 72);
      if ( v38 >= result )
        break;
      LODWORD(a3) = *(_DWORD *)v30;
      v5 = *(_DWORD *)(v30 + 4);
      ++v38;
      HIDWORD(v7) = v37 + 24;
    }
  }
  return result;
}

//----- (000150E4) --------------------------------------------------------
int __fastcall sub_150E4(int a1, char **a2)
{
  int v2; // r4@1
  char **v3; // r5@1
  char *v4; // r0@1
  bool v5; // zf@1

  v2 = a1;
  v3 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 52));
  android::Thread::Thread((android::Thread *)v2, (unsigned int)&off_3F6BC);
  *(_DWORD *)v2 = &off_40744;
  *(_DWORD *)(v2 + 52) = &off_40778;
  v4 = *v3;
  v5 = *v3 == 0;
  *(_DWORD *)(v2 + 36) = *v3;
  if ( !v5 )
    android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 36));
  *(_BYTE *)(v2 + 40) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v2 + 44), 0);
  pthread_cond_init((pthread_cond_t *)(v2 + 48), 0);
  return v2;
}
// 3F6BC: using guessed type void *;
// 40744: using guessed type void *off_40744;
// 40778: using guessed type void *off_40778;

//----- (00015154) --------------------------------------------------------
int __fastcall sub_15154(int a1, char a2)
{
  int v2; // r5@1
  char v3; // r4@1
  pthread_mutex_t *v4; // r6@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 44);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 44));
  *(_BYTE *)(v2 + 40) = v3;
  pthread_cond_signal((pthread_cond_t *)(v2 + 48));
  return j_j_pthread_mutex_unlock(v4);
}

//----- (00015204) --------------------------------------------------------
int __fastcall sub_15204(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_152B8(a1, (int)&off_3F6B8);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  return v1;
}
// 3F6B8: using guessed type void **off_3F6B8;

//----- (0001522C) --------------------------------------------------------
void __fastcall sub_1522C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_152B8(a1, (int)&off_3F6B8);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  j_operator delete((void *)v1);
}
// 3F6B8: using guessed type void **off_3F6B8;

//----- (00015258) --------------------------------------------------------
int __fastcall sub_15258(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_152B8((int)a1 + *(_DWORD *)(*a1 - 12), (int)&off_3F6B8);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
}
// 3F6B8: using guessed type void **off_3F6B8;

//----- (00015284) --------------------------------------------------------
void __fastcall sub_15284(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_152B8(v1, (int)&off_3F6B8);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  j_operator delete((void *)v1);
}
// 3F6B8: using guessed type void **off_3F6B8;

//----- (000152B8) --------------------------------------------------------
int __fastcall sub_152B8(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  char *v4; // r0@1

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 12);
  pthread_cond_destroy((pthread_cond_t *)(v2 + 48));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 44));
  v4 = *(char **)(v2 + 36);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 36));
  return j_android::Thread::~Thread((android::Thread *)v2);
}

//----- (000152FC) --------------------------------------------------------
int __fastcall sub_152FC(int a1)
{
  int v1; // r4@1
  pthread_mutex_t *v2; // r5@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  sub_2B948(v1 + 44);
  *(_BYTE *)(v1 + 155) = 0;
  return j_j_pthread_mutex_unlock(v2);
}

//----- (00015324) --------------------------------------------------------
int __fastcall sub_15324(int a1, char **a2)
{
  int v2; // r4@1
  char **v3; // r5@1
  char *v4; // r0@1
  int v6; // r5@3
  int v12; // [sp+0h] [bp-50h]@5
  int v13; // [sp+8h] [bp-48h]@5
  int (__fastcall *v14)(int); // [sp+Ch] [bp-44h]@5
  int v15; // [sp+10h] [bp-40h]@5

  v2 = a1;
  v3 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 160));
  android::Thread::Thread((android::Thread *)v2, (unsigned int)&off_3F6D4);
  *(_DWORD *)v2 = &off_407F4;
  *(_DWORD *)(v2 + 160) = &off_40848;
  *(_DWORD *)(v2 + 36) = &off_40820;
  v4 = *v3;
  _ZF = *v3 == 0;
  *(_DWORD *)(v2 + 40) = *v3;
  if ( !_ZF )
    android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 40));
  v6 = 0;
  *(_DWORD *)(v2 + 44) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v2 + 48), 0);
  pthread_mutex_init((pthread_mutex_t *)(v2 + 52), 0);
  pthread_cond_init((pthread_cond_t *)(v2 + 56), 0);
  android::SortedVectorImpl::SortedVectorImpl((android::SortedVectorImpl *)(v2 + 60), 8u, 0);
  *(_DWORD *)(v2 + 60) = &unk_3F764;
  android::VectorImpl::VectorImpl((android::VectorImpl *)(v2 + 80), 0x18u, 0);
  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)(v2 + 80) = &unk_3F73C;
  *(_BYTE *)(v2 + 152) = 0;
  *(_BYTE *)(v2 + 153) = 0;
  *(_WORD *)(v2 + 154) = 0;
  do
  {
    _R1 = v2 + v6;
    v6 += 24;
    *(_DWORD *)(_R1 + 104) = 1987279214;
    _R1 += 108;
    __asm { VST1.32         {D16-D17}, [R1] }
  }
  while ( v6 != 48 );
  v13 = 2;
  v12 = v2;
  v14 = sub_152FC;
  v15 = 0;
  timer_create(1, (struct sigevent *)&v12, (timer_t *)(v2 + 156));
  return v2;
}
// 3F6D4: using guessed type void *off_3F6D4;
// 407F4: using guessed type void *off_407F4;
// 40820: using guessed type void *off_40820;
// 40848: using guessed type void *off_40848;

//----- (00015430) --------------------------------------------------------
int __fastcall sub_15430(int a1)
{
  int v1; // r6@1
  pthread_mutex_t *v2; // r7@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  (*(void (**)(void))(**(_DWORD **)(v1 + 40) + 16))();
  return j_j_pthread_mutex_unlock(v2);
}

//----- (0001545C) --------------------------------------------------------
int __fastcall sub_1545C(int a1)
{
  int v1; // r4@1
  double v7; // [sp+0h] [bp-20h]@3
  int v8; // [sp+8h] [bp-18h]@3
  int v9; // [sp+Ch] [bp-14h]@3

  v1 = a1;
  if ( !*(_BYTE *)(a1 + 155) )
  {
    sub_2B948(a1 + 44);
    *(_BYTE *)(v1 + 155) = 1;
  }
  __asm { VMOV.I32        D16, #0 }
  v8 = 0;
  v9 = 40000000;
  __asm { VSTR            D16, [SP,#0x20+var_20] }
  return timer_settime(*(timer_t *)(v1 + 156), 0, (const struct itimerspec *)&v7, 0);
}

//----- (000154C4) --------------------------------------------------------
int __fastcall sub_154C4(char *a1)
{
  return (*(int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 16)] + 8))(
           &a1[*(_DWORD *)(*(_DWORD *)a1 - 16)],
           "EventThread",
           -9,
           0);
}

//----- (000154EC) --------------------------------------------------------
_DWORD *__fastcall sub_154EC(const void *a1, _DWORD *a2)
{
  const void *v2; // r4@1
  _DWORD *v3; // r6@1
  char *v4; // r5@1
  int v5; // r0@3
  _DWORD *result; // r0@3
  _DWORD *v7; // [sp+4h] [bp-14h]@1

  v2 = a1;
  v3 = a2;
  v4 = (char *)operator new(0x24u);
  v7 = v3;
  if ( v3 )
    android::RefBase::incStrong((android::RefBase *)((char *)v3 + *(_DWORD *)(*v3 - 12)), &v7);
  sub_1553C((int)v4, (char **)&v7);
  v5 = *(_DWORD *)v4;
  *(_DWORD *)v2 = v4;
  android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(v5 - 12)], v2);
  result = v7;
  if ( v7 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v7 + *(_DWORD *)(*v7 - 12)), &v7);
  return result;
}

//----- (0001553C) --------------------------------------------------------
int __fastcall sub_1553C(int a1, char **a2)
{
  int v2; // r4@1
  char **v3; // r5@1
  char *v4; // r0@1
  bool v5; // zf@1
  android::BitTube *v6; // r0@3
  android::RefBase *v7; // r0@3

  v2 = a1;
  v3 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 28));
  android::IDisplayEventConnection::IDisplayEventConnection((android::IDisplayEventConnection *)v2);
  android::BBinder::BBinder((android::BBinder *)(v2 + 4));
  *(_DWORD *)v2 = &off_4086C;
  *(_DWORD *)(v2 + 28) = &off_40900;
  *(_DWORD *)(v2 + 4) = &off_408A0;
  *(_DWORD *)(v2 + 16) = -1;
  v4 = *v3;
  v5 = *v3 == 0;
  *(_DWORD *)(v2 + 20) = *v3;
  if ( !v5 )
    android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 20));
  v6 = (android::BitTube *)operator new(0x10u);
  v7 = (android::RefBase *)android::BitTube::BitTube(v6);
  *(_DWORD *)(v2 + 24) = v7;
  android::RefBase::incStrong(v7, (const void *)(v2 + 24));
  return v2;
}
// 4086C: using guessed type void *off_4086C;
// 408A0: using guessed type void *off_408A0;
// 40900: using guessed type void *off_40900;

//----- (000155C0) --------------------------------------------------------
int __fastcall sub_155C0(int a1, char **a2)
{
  int v2; // r5@1
  char **v3; // r6@1
  pthread_mutex_t *v4; // r4@1
  char *v5; // r0@1
  int *v6; // r6@2
  char *v8; // [sp+0h] [bp-18h]@1
  android::RefBase::weakref_type *v9; // [sp+4h] [bp-14h]@2

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  v5 = *v3;
  v8 = *v3;
  if ( v8 )
  {
    v6 = (int *)&v8;
    v9 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                             (android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)],
                                             &v8);
  }
  else
  {
    v6 = (int *)&v8;
  }
  android::SortedVectorImpl::add((android::SortedVectorImpl *)(v2 + 60), v6);
  if ( v8 )
    android::RefBase::weakref_type::decWeak(v9, v6);
  pthread_cond_broadcast((pthread_cond_t *)(v2 + 56));
  pthread_mutex_unlock(v4);
  return 0;
}

//----- (0001561C) --------------------------------------------------------
int __fastcall sub_1561C(int result, signed int a2, int a3)
{
  signed int v3; // r6@1
  int v4; // r7@1
  int v5; // r5@1

  v3 = a2;
  v4 = a3;
  v5 = result;
  if ( a2 >= 0 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(result + 52));
    if ( !v3 )
      v3 = -1;
    if ( *(_DWORD *)(*(_DWORD *)v4 + 16) != v3 )
    {
      *(_DWORD *)(*(_DWORD *)v4 + 16) = v3;
      pthread_cond_broadcast((pthread_cond_t *)(v5 + 56));
    }
    result = j_j_pthread_mutex_unlock((pthread_mutex_t *)(v5 + 52));
  }
  return result;
}

//----- (0001565C) --------------------------------------------------------
int __fastcall sub_1565C(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  pthread_mutex_t *v4; // r4@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  if ( *(_DWORD *)(*(_DWORD *)v3 + 16) <= -1 )
  {
    *(_DWORD *)(*(_DWORD *)v3 + 16) = 0;
    pthread_cond_broadcast((pthread_cond_t *)(v2 + 56));
  }
  return j_j_pthread_mutex_unlock(v4);
}

//----- (0001568C) --------------------------------------------------------
int __fastcall sub_1568C(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r4@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  if ( !*(_BYTE *)(v1 + 152) )
  {
    *(_BYTE *)(v1 + 152) = 1;
    pthread_cond_broadcast((pthread_cond_t *)(v1 + 56));
  }
  return j_j_pthread_mutex_unlock(v2);
}

//----- (000156BC) --------------------------------------------------------
int __fastcall sub_156BC(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r4@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  if ( *(_BYTE *)(v1 + 152) )
  {
    *(_BYTE *)(v1 + 152) = 0;
    pthread_cond_broadcast((pthread_cond_t *)(v1 + 56));
  }
  return j_j_pthread_mutex_unlock(v2);
}

//----- (000156EC) --------------------------------------------------------
int __fastcall sub_156EC(int a1, int a2, int a3, int a4)
{
  int v4; // r6@1
  int v5; // r4@1
  pthread_mutex_t *v6; // r7@1
  int v7; // r5@1

  v4 = a1;
  v5 = a4;
  v6 = (pthread_mutex_t *)(a1 + 52);
  v7 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  *(_DWORD *)(v4 + 104) = 1987279214;
  *(_DWORD *)(v4 + 108) = 0;
  *(_DWORD *)(v4 + 116) = v5;
  *(_DWORD *)(v4 + 112) = v7;
  ++*(_DWORD *)(v4 + 120);
  pthread_cond_broadcast((pthread_cond_t *)(v4 + 56));
  return j_j_pthread_mutex_unlock(v6);
}

//----- (0001572C) --------------------------------------------------------
int __fastcall sub_1572C(int a1, int a2, int a3, int a4)
{
  return sub_156EC(a1 - 36, a2, a3, a4);
}

//----- (00015734) --------------------------------------------------------
int __fastcall sub_15734(int a1, signed int a2, char a3)
{
  signed int v3; // r6@1
  char v4; // r7@1
  int v5; // r4@1
  pthread_mutex_t *v6; // r5@2
  int v7; // r0@2
  int v8; // r1@2
  signed int v10; // [sp+0h] [bp-30h]@2
  signed int v11; // [sp+4h] [bp-2Ch]@2
  int v12; // [sp+8h] [bp-28h]@2
  int v13; // [sp+Ch] [bp-24h]@2
  char v14; // [sp+10h] [bp-20h]@2

  v3 = a2;
  v4 = a3;
  v5 = a1;
  if ( a2 >= 2 )
  {
    _android_log_print(6, "SurfaceFlinger", "received hotplug event for an invalid display (id=%d)", a2);
    v6 = (pthread_mutex_t *)(v5 + 52);
    pthread_mutex_lock((pthread_mutex_t *)(v5 + 52));
  }
  else
  {
    v6 = (pthread_mutex_t *)(a1 + 52);
    pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
    v10 = 1886156135;
    v11 = v3;
    v7 = systemTime(1);
    v13 = v8;
    v12 = v7;
    v14 = v4;
    android::VectorImpl::add((android::VectorImpl *)(v5 + 80), &v10);
    pthread_cond_broadcast((pthread_cond_t *)(v5 + 56));
  }
  return pthread_mutex_unlock(v6);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (000158D0) --------------------------------------------------------
int __fastcall sub_158D0(android::VectorImpl *a1, int a2, int a3)
{
  int v3; // r5@1
  android::VectorImpl *v4; // r4@1
  int *v5; // r9@1
  signed int v6; // r0@1
  int v7; // r1@4
  int v8; // r1@4
  int v9; // t1@4
  signed int v17; // r7@5
  signed int v18; // r6@5
  int v19; // r0@6
  unsigned int v23; // r4@12
  int v24; // r10@12
  int v25; // r0@13
  signed int v26; // r7@13
  unsigned int v27; // r8@13
  int *v28; // r6@13
  int v29; // r9@14
  _DWORD *v30; // r0@16
  signed int v31; // r1@19
  signed int v32; // r2@19
  signed int v33; // r3@19
  signed int v34; // r6@40
  signed int v35; // r4@40
  int v36; // r8@46
  unsigned int v37; // r4@46
  __int64 v38; // r2@48
  __int64 v39; // r0@51
  pthread_cond_t *cond; // [sp+14h] [bp-54h]@1
  pthread_mutex_t *mutex; // [sp+18h] [bp-50h]@1
  int v43; // [sp+1Ch] [bp-4Ch]@1
  unsigned int v44; // [sp+20h] [bp-48h]@5
  signed int v45; // [sp+24h] [bp-44h]@13
  signed int v46; // [sp+28h] [bp-40h]@13
  int v47; // [sp+2Ch] [bp-3Ch]@13
  android::VectorImpl *v48; // [sp+30h] [bp-38h]@1
  _DWORD *v49; // [sp+38h] [bp-30h]@1
  unsigned int v50; // [sp+3Ch] [bp-2Ch]@48
  unsigned int v51; // [sp+40h] [bp-28h]@48

  v3 = a2;
  v4 = a1;
  v43 = a3;
  v48 = a1;
  mutex = (pthread_mutex_t *)(a2 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a2 + 52));
  android::VectorImpl::VectorImpl(v4, 4u, 0);
  v5 = (int *)&v49;
  *(_DWORD *)v4 = &unk_3F7D4;
  cond = (pthread_cond_t *)(v3 + 56);
  v6 = 0;
  do
  {
    while ( v6 <= 1 )
    {
      v7 = v3 + 24 * v6;
      v9 = *(_DWORD *)(v7 + 112);
      v8 = v7 + 112;
      if ( v9 | *(_DWORD *)(v8 + 4) )
      {
        _R0 = (unsigned int *)(v3 + 24 * v6 + 104);
        _R2 = v43;
        __asm { VLD1.64         {D16-D17}, [R0]! }
        v17 = 0;
        v18 = 1;
        __asm
        {
          VLDR            D18, [R0]
          VST1.64         {D16-D17}, [R2]!
          VSTR            D18, [R2]
        }
        *(_DWORD *)v8 = 0;
        *(_DWORD *)(v8 + 4) = 0;
        v44 = *_R0;
        goto LABEL_12;
      }
      ++v6;
    }
    v19 = *(_DWORD *)(v3 + 88);
    v17 = *(_DWORD *)(v3 + 88);
    if ( v19 )
      v17 = 1;
    if ( v19 )
    {
      _R0 = *(_DWORD *)(v3 + 84);
      v18 = 0;
      __asm
      {
        VLD1.64         {D16-D17}, [R0]!
        VLDR            D18, [R0]
      }
      _R0 = v43;
      __asm
      {
        VST1.64         {D16-D17}, [R0]!
        VSTR            D18, [R0]
      }
      android::VectorImpl::removeItemsAt((android::VectorImpl *)(v3 + 80), 0, 1u);
    }
    else
    {
      v18 = 0;
    }
    v44 = 0;
LABEL_12:
    v23 = *(_DWORD *)(v3 + 68);
    v24 = v18 ^ 1;
    if ( v23 )
    {
      v46 = v17;
      v25 = v17 ^ 1 | v18;
      v45 = v18;
      v26 = 0;
      v27 = 0;
      v28 = v5;
      v47 = v25;
      while ( 1 )
      {
        v29 = *(_DWORD *)(v3 + 64);
        v49 = 0;
        if ( *(_DWORD *)(v29 + 8 * v27)
          && (android::RefBase::weakref_type::attemptIncStrong(
                *(android::RefBase::weakref_type **)(v29 + 8 * v27 + 4),
                v28) != 1 ? (v30 = v49) : (v30 = *(_DWORD **)(v29 + 8 * v27), v49 = *(_DWORD **)(v29 + 8 * v27)),
              v30) )
        {
          v31 = v30[4];
          v32 = 0;
          v33 = 0;
          if ( v31 > -1 )
            v32 = 1;
          if ( v31 < 0 )
            v33 = 1;
          if ( v33 | v24 )
          {
            v26 |= v32;
            goto LABEL_25;
          }
          if ( v31 != 1 )
          {
            if ( v31 )
            {
              if ( v44 != v44 / v31 * v31 )
              {
                v26 = 1;
LABEL_25:
                if ( !v47 )
                  android::VectorImpl::add(v48, v28);
                goto LABEL_34;
              }
            }
            else
            {
              v30[4] = -1;
            }
          }
          android::VectorImpl::add(v48, v28);
          v26 = 1;
        }
        else
        {
          android::VectorImpl::removeItemsAt((android::VectorImpl *)(v3 + 60), v27, 1u);
          --v23;
          --v27;
        }
LABEL_34:
        if ( v49 )
          android::RefBase::decStrong((android::RefBase *)((char *)v49 + *(_DWORD *)(*v49 - 12)), v28);
        if ( ++v27 >= v23 )
          goto LABEL_39;
      }
    }
    v45 = v18;
    v28 = v5;
    v46 = v17;
    v26 = 0;
LABEL_39:
    v5 = v28;
    if ( (v26 | v24) & 1 )
    {
      v34 = v45;
      v35 = v46;
      if ( !((v45 | ~v26) & 1) )
        sub_15B94(v3);
    }
    else
    {
      v35 = v46;
      v34 = v45;
      if ( *(_BYTE *)(v3 + 153) )
      {
        *(_BYTE *)(v3 + 153) = 0;
        (*(void (**)(void))(**(_DWORD **)(v3 + 40) + 8))();
        *(_BYTE *)(v3 + 154) = 0;
      }
    }
    if ( !(v34 | v35) )
    {
      if ( v26 & 1 )
      {
        v36 = *(_BYTE *)(v3 + 152);
        v37 = 1000000000;
        if ( *(_BYTE *)(v3 + 152) )
          v37 = 16000000;
        v50 = v37 / 0x3B9ACA00;
        v51 = v37 % 0x3B9ACA00;
        if ( pthread_cond_timedwait_relative_np(cond, mutex, &v50, HIDWORD(v38)) == 110 )
        {
          if ( !v36 )
            _android_log_print(5, "SurfaceFlinger", "Timed out waiting for hw vsync; faking it");
          *(_DWORD *)(v3 + 104) = 1987279214;
          *(_DWORD *)(v3 + 108) = 0;
          LODWORD(v39) = systemTime(1);
          *(_QWORD *)(v3 + 112) = v39;
          ++*(_DWORD *)(v3 + 120);
        }
      }
      else
      {
        pthread_cond_wait(cond, mutex);
      }
    }
    v6 = 0;
  }
  while ( !*((_DWORD *)v48 + 2) );
  return pthread_mutex_unlock(mutex);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10950: using guessed type int __fastcall pthread_cond_timedwait_relative_np(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00015B94) --------------------------------------------------------
int __fastcall sub_15B94(int a1)
{
  int v1; // r4@1
  int v2; // r5@3
  void (__fastcall *v3)(int, char **); // r7@3
  char *v5; // [sp+4h] [bp-1Ch]@3

  v1 = a1;
  if ( !*(_BYTE *)(a1 + 152) && !*(_BYTE *)(a1 + 153) )
  {
    *(_BYTE *)(a1 + 153) = 1;
    v2 = *(_DWORD *)(a1 + 40);
    v3 = *(void (__fastcall **)(int, char **))(*(_DWORD *)v2 + 12);
    v5 = (char *)(a1 + 36);
    android::RefBase::incStrong((android::RefBase *)(a1 + 36 + *(_DWORD *)(*(_DWORD *)(a1 + 36) - 12)), &v5);
    v3(v2, &v5);
    if ( v5 )
      android::RefBase::decStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], &v5);
    (*(void (**)(void))(**(_DWORD **)(v1 + 40) + 8))();
  }
  *(_BYTE *)(v1 + 154) = 1;
  return sub_1545C(v1);
}

//----- (00015C00) --------------------------------------------------------
int __fastcall sub_15C00(int a1, android::String8 *a2)
{
  int v2; // r6@1
  android::String8 *v3; // r11@1
  pthread_mutex_t *v4; // r8@1
  const char *v5; // r5@1
  const char *v6; // r2@1
  unsigned int v7; // r5@6
  int v8; // r4@7
  _DWORD *v9; // r2@9
  int v10; // r3@12
  _DWORD *v12; // [sp+0h] [bp-28h]@7

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 52);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 52));
  v5 = "disabled";
  v6 = "disabled";
  if ( *(_BYTE *)(v2 + 154) )
    v6 = "enabled";
  android::String8::appendFormat(v3, "VSYNC state: %s\n", v6);
  if ( *(_BYTE *)(v2 + 152) )
    v5 = "enabled";
  android::String8::appendFormat(v3, "  soft-vsync: %s\n", v5);
  android::String8::appendFormat(
    v3,
    "  numListeners=%zu,\n  events-delivered: %u\n",
    *(_DWORD *)(v2 + 68),
    *(_DWORD *)(v2 + 120));
  if ( *(_DWORD *)(v2 + 68) )
  {
    v7 = 0;
    do
    {
      v8 = *(_DWORD *)(v2 + 64);
      v12 = 0;
      if ( *(_DWORD *)(v8 + 8 * v7)
        && (android::RefBase::weakref_type::attemptIncStrong(
              *(android::RefBase::weakref_type **)(v8 + 8 * v7 + 4),
              &v12) != 1 ? (v9 = v12) : (v9 = *(_DWORD **)(v8 + 8 * v7), v12 = *(_DWORD **)(v8 + 8 * v7)),
            v9) )
      {
        v10 = v9[4];
      }
      else
      {
        v9 = 0;
        v10 = 0;
      }
      android::String8::appendFormat(v3, "    %p: count=%d\n", v9, v10, v12);
      if ( v12 )
        android::RefBase::decStrong((android::RefBase *)((char *)v12 + *(_DWORD *)(*v12 - 12)), &v12);
      ++v7;
    }
    while ( v7 < *(_DWORD *)(v2 + 68) );
  }
  return pthread_mutex_unlock(v4);
}

//----- (00015CF4) --------------------------------------------------------
int __fastcall sub_15CF4(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  android::RefBase *v4; // r0@1
  char *v5; // r0@3

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 60);
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 64);
  v4 = *(android::RefBase **)(v2 + 24);
  if ( v4 )
    android::RefBase::decStrong(v4, (const void *)(v2 + 24));
  v5 = *(char **)(v2 + 20);
  if ( v5 )
    android::RefBase::decStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], (const void *)(v2 + 20));
  android::BBinder::~BBinder((android::BBinder *)(v2 + 4));
  return j_android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v2);
}

//----- (00015D44) --------------------------------------------------------
int __fastcall sub_15D44(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_15CF4(a1, (int)off_3F6F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  return v1;
}
// 3F6F0: using guessed type void **off_3F6F0[3];

//----- (00015D94) --------------------------------------------------------
int __fastcall sub_15D94(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_15CF4((int)a1 + *(_DWORD *)(*a1 - 12), (int)off_3F6F0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
}
// 3F6F0: using guessed type void **off_3F6F0[3];

//----- (00015DC0) --------------------------------------------------------
void __fastcall sub_15DC0(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_15CF4(a1, (int)off_3F6F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  j_operator delete((void *)v1);
}
// 3F6F0: using guessed type void **off_3F6F0[3];

//----- (00015E1C) --------------------------------------------------------
void __fastcall sub_15E1C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_15CF4(v1, (int)off_3F6F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  j_operator delete((void *)v1);
}
// 3F6F0: using guessed type void **off_3F6F0[3];

//----- (00015E50) --------------------------------------------------------
_DWORD *__fastcall sub_15E50(_DWORD *a1)
{
  int v1; // r4@1
  _DWORD *result; // r0@3
  _DWORD *v3; // [sp+4h] [bp-Ch]@1

  v1 = a1[5];
  v3 = a1;
  if ( a1 )
    android::RefBase::incStrong((android::RefBase *)((char *)a1 + *(_DWORD *)(*a1 - 12)), &v3);
  sub_155C0(v1, (char **)&v3);
  result = v3;
  if ( v3 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v3 + *(_DWORD *)(*v3 - 12)), &v3);
  return result;
}

//----- (00015E88) --------------------------------------------------------
_DWORD *__fastcall sub_15E88(char *a1)
{
  return sub_15E50(&a1[*(_DWORD *)(*(_DWORD *)a1 - 16)]);
}

//----- (00015E94) --------------------------------------------------------
android::RefBase *__fastcall sub_15E94(void *a1, int a2)
{
  void *v2; // r2@1
  android::RefBase *result; // r0@1

  v2 = a1;
  result = *(android::RefBase **)(a2 + 24);
  *(_DWORD *)v2 = result;
  if ( result )
    result = (android::RefBase *)android::RefBase::incStrong(result, v2);
  return result;
}

//----- (00015EAC) --------------------------------------------------------
_DWORD *__fastcall sub_15EAC(_DWORD *a1, signed int a2)
{
  int v2; // r5@1
  signed int v3; // r4@1
  _DWORD *result; // r0@3
  _DWORD *v5; // [sp+4h] [bp-14h]@1

  v2 = a1[5];
  v3 = a2;
  v5 = a1;
  if ( a1 )
    android::RefBase::incStrong((android::RefBase *)((char *)a1 + *(_DWORD *)(*a1 - 12)), &v5);
  sub_1561C(v2, v3, (int)&v5);
  result = v5;
  if ( v5 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v5 + *(_DWORD *)(*v5 - 12)), &v5);
  return result;
}

//----- (00015EEC) --------------------------------------------------------
_DWORD *__fastcall sub_15EEC(_DWORD *a1)
{
  int v1; // r4@1
  _DWORD *result; // r0@3
  _DWORD *v3; // [sp+4h] [bp-Ch]@1

  v1 = a1[5];
  v3 = a1;
  if ( a1 )
    android::RefBase::incStrong((android::RefBase *)((char *)a1 + *(_DWORD *)(*a1 - 12)), &v3);
  sub_1565C(v1, (int)&v3);
  result = v3;
  if ( v3 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v3 + *(_DWORD *)(*v3 - 12)), &v3);
  return result;
}

//----- (00015F24) --------------------------------------------------------
int __fastcall sub_15F24(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  return v1;
}

//----- (00015F34) --------------------------------------------------------
void __fastcall sub_15F34(int a1)
{
  void *v1; // r4@1

  v1 = (void *)a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  j_operator delete(v1);
}

//----- (00015F48) --------------------------------------------------------
int __fastcall sub_15F48(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (00015F58) --------------------------------------------------------
void __fastcall sub_15F58(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (00015F74) --------------------------------------------------------
int __fastcall sub_15F74(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_163CC(a1, (int)&off_3F6D0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 160));
  return v1;
}
// 3F6D0: using guessed type void **off_3F6D0;

//----- (00015F9C) --------------------------------------------------------
void __fastcall sub_15F9C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_163CC(a1, (int)&off_3F6D0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 160));
  j_operator delete((void *)v1);
}
// 3F6D0: using guessed type void **off_3F6D0;

//----- (00015FC8) --------------------------------------------------------
int __fastcall sub_15FC8(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_163CC(a1 - 36, (int)&off_3F6D0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 124));
}
// 3F6D0: using guessed type void **off_3F6D0;

//----- (00015FF0) --------------------------------------------------------
void __fastcall sub_15FF0(int a1)
{
  int v1; // r4@1
  void *v2; // r5@1

  v1 = a1;
  v2 = (void *)(a1 - 36);
  sub_163CC(a1 - 36, (int)&off_3F6D0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 124));
  j_operator delete(v2);
}
// 3F6D0: using guessed type void **off_3F6D0;

//----- (00016024) --------------------------------------------------------
int __fastcall sub_16024(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_163CC((int)a1 + *(_DWORD *)(*a1 - 12), (int)&off_3F6D0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 160));
}
// 3F6D0: using guessed type void **off_3F6D0;

//----- (00016050) --------------------------------------------------------
void __fastcall sub_16050(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_163CC(v1, (int)&off_3F6D0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 160));
  j_operator delete((void *)v1);
}
// 3F6D0: using guessed type void **off_3F6D0;

//----- (00016084) --------------------------------------------------------
int __fastcall sub_16084(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (000160BC) --------------------------------------------------------
void __fastcall sub_160BC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (000160F8) --------------------------------------------------------
int __fastcall sub_160F8(int a1)
{
  return a1 + 4;
}

//----- (00016100) --------------------------------------------------------
int __fastcall sub_16100(const void *a1, char *a2, _DWORD *a3)
{
  const void *v3; // r6@1
  char *v4; // r5@1
  int v5; // r1@2
  int v6; // r3@4
  int result; // r0@5

  v3 = a1;
  v4 = a2;
  if ( *a3 )
    v5 = (*(_DWORD *)(*a3 - 12) >> 1) - 1;
  if ( v0 )
    v6 = (*(_DWORD *)(v0 - 12) >> 1) - 1;
  result = strzcmp16();
  if ( result )
  {
    result = 0;
    *(_DWORD *)v3 = 0;
  }
  else
  {
    *(_DWORD *)v3 = v4;
    if ( v4 )
      result = android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v3);
  }
  return result;
}
// 1053C: using guessed type int strzcmp16(void);

//----- (0001615C) --------------------------------------------------------
int __fastcall sub_1615C(const void *a1, int a2, _DWORD *a3)
{
  return sub_16100(a1, (char *)(a2 - 4), a3);
}

//----- (0001616C) --------------------------------------------------------
int __fastcall sub_1616C(int a1)
{
  return j_android::IDisplayEventConnection::getInterfaceDescriptor((android::IDisplayEventConnection *)(a1 - 4));
}

//----- (000161EC) --------------------------------------------------------
int __fastcall sub_161EC(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (00016228) --------------------------------------------------------
void __fastcall sub_16228(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (0001626C) --------------------------------------------------------
int __fastcall sub_1626C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (000162A4) --------------------------------------------------------
void __fastcall sub_162A4(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (000162E0) --------------------------------------------------------
int __fastcall sub_162E0(android::BBinder *this)
{
  android::BBinder *v1; // r4@1

  v1 = this;
  android::BBinder::~BBinder(this);
  android::IDisplayEventConnection::~IDisplayEventConnection((android::BBinder *)((char *)v1 - 4));
  return j_android::RefBase::~RefBase((android::BBinder *)((char *)v1 + 12));
}

//----- (00016314) --------------------------------------------------------
void __fastcall sub_16314(android::BBinder *this)
{
  android::BBinder *v1; // r4@1

  v1 = this;
  android::BBinder::~BBinder(this);
  android::IDisplayEventConnection::~IDisplayEventConnection((android::BBinder *)((char *)v1 - 4));
  android::RefBase::~RefBase((android::BBinder *)((char *)v1 + 12));
  j_operator delete((char *)v1 - 4);
}

//----- (00016350) --------------------------------------------------------
int __fastcall sub_16350(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (0001638C) --------------------------------------------------------
void __fastcall sub_1638C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IDisplayEventConnection::~IDisplayEventConnection((android::IDisplayEventConnection *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (000163CC) --------------------------------------------------------
int __fastcall sub_163CC(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  char *v4; // r0@1
  char *v5; // r0@3

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(v2 + 36) = *(_DWORD *)(a2 + 24);
  *(_DWORD *)(v2 + 80) = &unk_3F73C;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 80));
  android::VectorImpl::~VectorImpl((android::VectorImpl *)(v2 + 80));
  *(_DWORD *)(v2 + 60) = &unk_3F764;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 60));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 60));
  pthread_cond_destroy((pthread_cond_t *)(v2 + 56));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 52));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 48));
  v4 = *(char **)(v2 + 44);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 44));
  v5 = *(char **)(v2 + 40);
  if ( v5 )
    android::RefBase::decStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], (const void *)(v2 + 40));
  return j_android::Thread::~Thread((android::Thread *)v2);
}

//----- (00016888) --------------------------------------------------------
int __fastcall sub_16888(int a1)
{
  int v5; // r4@1
  int v6; // r0@1

  __asm { VMOV.I32        Q4, #0 }
  v5 = a1;
  v6 = 0;
  do
  {
    _R1 = v5 + v6;
    v6 += 32;
    __asm
    {
      VST1.64         {D8-D9}, [R1]!
      VST1.64         {D8-D9}, [R1]
    }
  }
  while ( !_ZF );
  *(_DWORD *)(v5 + 4096) = 0;
  *(_DWORD *)(v5 + 4100) = 0;
  *(_DWORD *)(v5 + 4140) = 0;
  *(_DWORD *)(v5 + 4136) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v5 + 4144), 0);
  _R0 = v5 + 4116;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = v5 + 4104;
  __asm { VST1.32         {D8-D9}, [R0] }
  return v5;
}

//----- (000168EC) --------------------------------------------------------
int __fastcall sub_168EC(int a1, int a2, int a3, int a4)
{
  int v4; // r6@1
  pthread_mutex_t *v5; // r7@1
  int v6; // r4@1
  int v7; // r5@1
  int v8; // r0@1

  v4 = a1;
  v5 = (pthread_mutex_t *)(a1 + 4144);
  v6 = a4;
  v7 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  v8 = *(_DWORD *)(v4 + 4096);
  *(_DWORD *)(v4 + 32 * v8) = v7;
  *(_DWORD *)(v4 + 32 * v8 + 4) = v6;
  return j_j_pthread_mutex_unlock(v5);
}

//----- (0001691C) --------------------------------------------------------
int __fastcall sub_1691C(int a1, int a2, __int64 a3)
{
  int v3; // r4@1
  pthread_mutex_t *v4; // r5@1
  __int64 v5; // r6@1

  v3 = a1;
  v4 = (pthread_mutex_t *)(a1 + 4144);
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  *(_QWORD *)(v3 + 32 * *(_DWORD *)(v3 + 4096) + 8) = v5;
  return j_j_pthread_mutex_unlock(v4);
}

//----- (0001694C) --------------------------------------------------------
int __fastcall sub_1694C(int a1, unsigned int **a2)
{
  int v2; // r5@1
  pthread_mutex_t *v3; // r6@1
  unsigned int **v4; // r4@1

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 4144);
  v4 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  sub_16984((unsigned int **)(v2 + 32 * *(_DWORD *)(v2 + 4096) + 24), v4);
  ++*(_DWORD *)(v2 + 4100);
  return j_j_pthread_mutex_unlock(v3);
}

//----- (00016984) --------------------------------------------------------
unsigned int **__fastcall sub_16984(unsigned int **a1, unsigned int **a2)
{
  unsigned int *v2; // r5@1
  unsigned int **v3; // r4@1
  unsigned int v4; // r0@3
  unsigned int *v5; // r0@4
  unsigned int v6; // r1@6
  void *v7; // r0@8
  unsigned int **result; // r0@9

  v2 = *a2;
  v3 = a1;
  if ( *a2 )
  {
    __dmb();
    do
      v4 = __ldrex(v2);
    while ( __strex(v4 + 1, v2) );
  }
  v5 = *v3;
  if ( *v3 )
  {
    __dmb();
    do
      v6 = __ldrex(v5);
    while ( __strex(v6 - 1, v5) );
    if ( v6 == 1 )
    {
      v7 = (void *)android::Fence::~Fence((android::Fence *)v5);
      operator delete(v7);
    }
  }
  result = v3;
  *v3 = v2;
  return result;
}

//----- (000169CC) --------------------------------------------------------
int __fastcall sub_169CC(int a1, int a2, __int64 a3)
{
  int v3; // r4@1
  pthread_mutex_t *v4; // r5@1
  __int64 v5; // r6@1

  v3 = a1;
  v4 = (pthread_mutex_t *)(a1 + 4144);
  v5 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  *(_QWORD *)(v3 + 32 * *(_DWORD *)(v3 + 4096) + 16) = v5;
  return j_j_pthread_mutex_unlock(v4);
}

//----- (000169FC) --------------------------------------------------------
int __fastcall sub_169FC(int a1, unsigned int **a2)
{
  int v2; // r5@1
  pthread_mutex_t *v3; // r6@1
  unsigned int **v4; // r4@1

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 4144);
  v4 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  sub_16984((unsigned int **)(v2 + 32 * *(_DWORD *)(v2 + 4096) + 28), v4);
  ++*(_DWORD *)(v2 + 4100);
  return j_j_pthread_mutex_unlock(v3);
}

//----- (00016A34) --------------------------------------------------------
int __fastcall sub_16A34(int a1, int a2, int a3, int a4)
{
  int v4; // r6@1
  pthread_mutex_t *v5; // r7@1
  int v6; // r4@1
  int v7; // r5@1

  v4 = a1;
  v5 = (pthread_mutex_t *)(a1 + 4144);
  v6 = a4;
  v7 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  *(_DWORD *)(v4 + 4140) = v6;
  *(_DWORD *)(v4 + 4136) = v7;
  return j_j_pthread_mutex_unlock(v5);
}

//----- (00016A60) --------------------------------------------------------
int __fastcall sub_16A60(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r4@1
  int v3; // r0@1
  int v5; // r1@1
  int v11; // r0@1
  unsigned int **v13; // r0@1
  int v14; // t1@1
  int v15; // r0@3
  unsigned int **v16; // r0@3
  int v17; // t1@3

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 4144);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  sub_16B10(v1, *(_DWORD *)(v1 + 4096));
  v3 = ((unsigned __int8)*(_DWORD *)(v1 + 4096) + 1) & 0x7F;
  *(_DWORD *)(v1 + 4096) = v3;
  *(_DWORD *)(v1 + 32 * v3) = -1;
  *(_DWORD *)(v1 + 32 * v3 + 4) = 0x7FFFFFFF;
  _R0 = dword_16B00;
  v5 = *(_DWORD *)(v1 + 4096);
  __asm { VLD1.64         {D16-D17}, [R0@128] }
  v11 = v1 + 32 * v5;
  _R2 = v11 + 8;
  __asm { VST1.64         {D16-D17}, [R2] }
  v14 = *(_DWORD *)(v11 + 24);
  v13 = (unsigned int **)(v11 + 24);
  if ( v14 )
  {
    sub_16BF4(v13, 0);
    --*(_DWORD *)(v1 + 4100);
    v5 = *(_DWORD *)(v1 + 4096);
  }
  v15 = v1 + 32 * v5;
  v17 = *(_DWORD *)(v15 + 28);
  v16 = (unsigned int **)(v15 + 28);
  if ( v17 )
  {
    sub_16BF4(v16, 0);
    --*(_DWORD *)(v1 + 4100);
  }
  sub_16C3C(v1);
  return j_j_pthread_mutex_unlock(v2);
}
// 16B00: using guessed type int dword_16B00[4];

//----- (00016B10) --------------------------------------------------------
int __fastcall sub_16B10(int a1, int a2)
{
  int v2; // r4@1
  signed __int64 v3; // r2@1
  int result; // r0@1
  signed int v5; // r5@1
  signed int v6; // r6@5
  int v7; // r0@8
  signed int v8; // r5@8
  int v9; // r7@8
  signed int v10; // r5@16
  int v11; // r1@16
  unsigned int v12; // r6@16
  int v13; // r9@16
  signed int v14; // r1@16
  unsigned int v15; // off@24
  signed int v16; // r0@24
  signed int v17; // r1@24

  v2 = a1;
  v3 = *(_QWORD *)(a1 + 4136);
  result = 0;
  v5 = 0;
  if ( !(_DWORD)v3 )
    result = 1;
  if ( SHIDWORD(v3) < 0 )
    v5 = 1;
  v6 = 0;
  if ( !HIDWORD(v3) )
    v5 = result;
  if ( !v5 )
  {
    v7 = v2 + 32 * a2;
    v8 = 0;
    v9 = *(_DWORD *)(v7 + 20);
    result = *(_DWORD *)(v7 + 16);
    if ( !result )
      v8 = 1;
    if ( v9 < 0 )
      v6 = 1;
    if ( !v9 )
      v6 = v8;
    if ( !v6 && v9 ^ 0x7FFFFFFF | ~result )
    {
      v10 = 0;
      v11 = v2 + 32 * (((_BYTE)a2 + 127) & 0x7F);
      v12 = *(_DWORD *)(v11 + 16);
      v13 = *(_DWORD *)(v11 + 20);
      v14 = 0;
      if ( !v12 )
        v14 = 1;
      if ( v13 < 0 )
        v10 = 1;
      if ( !v13 )
        v10 = v14;
      if ( !v10 && v13 ^ 0x7FFFFFFF | ~v12 )
      {
        v15 = __RCR__(v3 + (HIDWORD(v3) >> 31), 1);
        v16 = (signed __int64)(__PAIR__(v9, result)
                             - __PAIR__(v13, v12)
                             + __PAIR__((unsigned __int64)(v3 / 2) >> 32, v15))
            / v3;
        v17 = 0;
        while ( v17 <= 5 )
        {
          if ( v16 < 1 << ++v17 )
          {
            result = v2 + 4 * v17;
            ++*(_DWORD *)(result + 4100);
            return result;
          }
        }
        result = 4128;
        ++*(_DWORD *)(v2 + 4128);
      }
    }
  }
  return result;
}

//----- (00016BF4) --------------------------------------------------------
unsigned int **__fastcall sub_16BF4(unsigned int **a1, unsigned int *a2)
{
  unsigned int *v2; // r5@1
  unsigned int **v3; // r4@1
  unsigned int v4; // r0@3
  unsigned int *v5; // r0@4
  unsigned int v6; // r1@6
  void *v7; // r0@8
  unsigned int **result; // r0@9

  v2 = a2;
  v3 = a1;
  if ( a2 )
  {
    __dmb();
    do
      v4 = __ldrex(a2);
    while ( __strex(v4 + 1, a2) );
  }
  v5 = *v3;
  if ( *v3 )
  {
    __dmb();
    do
      v6 = __ldrex(v5);
    while ( __strex(v6 - 1, v5) );
    if ( v6 == 1 )
    {
      v7 = (void *)android::Fence::~Fence((android::Fence *)v5);
      operator delete(v7);
    }
  }
  result = v3;
  *v3 = v2;
  return result;
}

//----- (00016C3C) --------------------------------------------------------
android::Fence *__fastcall sub_16C3C(int a1)
{
  int v1; // r9@1
  android::Fence **v2; // r10@1
  signed int v3; // r4@1
  char v4; // r7@1
  android::Fence *result; // r0@2
  int v6; // r5@3
  int v7; // r11@3
  int v8; // r6@3
  android::Fence *v9; // r0@3
  unsigned int **v10; // r6@3
  android::Fence *v11; // t1@3
  __int64 v12; // r0@4
  signed int v13; // r8@5
  __int64 v14; // r0@8
  _DWORD *v15; // [sp+0h] [bp-28h]@1

  v1 = a1;
  v2 = (android::Fence **)(a1 + 4100);
  v3 = 1;
  v4 = -1;
  v15 = (_DWORD *)(a1 + 4096);
  do
  {
    result = *v2;
    if ( (signed int)*v2 < 1 )
      break;
    v6 = ((unsigned __int8)*v15 + v4) & 0x7F;
    v7 = v1 + 32 * v6;
    v8 = v1 + 32 * v6;
    v11 = *(android::Fence **)(v8 + 24);
    v10 = (unsigned int **)(v8 + 24);
    v9 = v11;
    if ( v11
      && (LODWORD(v12) = android::Fence::getSignalTime(v9),
          *(_QWORD *)(v7 + 8) = v12,
          HIDWORD(v12) ^ 0x7FFFFFFF | ~(_DWORD)v12) )
    {
      sub_16BF4(v10, 0);
      v13 = 1;
      *v2 = (android::Fence *)((char *)*v2 - 1);
    }
    else
    {
      v13 = 0;
    }
    result = *(android::Fence **)(v7 + 28);
    if ( result )
    {
      LODWORD(v14) = android::Fence::getSignalTime(result);
      *(_QWORD *)(v7 + 16) = v14;
      result = (android::Fence *)(HIDWORD(v14) ^ 0x7FFFFFFF | ~(_DWORD)v14);
      if ( result )
      {
        sub_16BF4((unsigned int **)(v7 + 28), 0);
        *v2 = (android::Fence *)((char *)*v2 - 1);
LABEL_12:
        result = (android::Fence *)sub_16B10(v1, v6);
        goto LABEL_13;
      }
    }
    if ( v13 == 1 )
      goto LABEL_12;
LABEL_13:
    ++v3;
    --v4;
  }
  while ( v3 < 128 );
  return result;
}

//----- (00016D00) --------------------------------------------------------
int __fastcall sub_16D00(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r8@1
  int v7; // r7@1
  int v9; // r1@3

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 4144);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  __asm { VMOV.I32        Q4, #0 }
  v7 = 0;
  do
  {
    _R0 = v1 + v7;
    *(_DWORD *)(_R0 + 20) = 0;
    __asm { VST1.64         {D8-D9}, [R0]! }
    *(_DWORD *)_R0 = 0;
    sub_13CD0((unsigned int **)(v1 + v7 + 24));
    sub_13CD0((unsigned int **)(v1 + v7 + 28));
    v7 += 32;
  }
  while ( v7 != 4096 );
  *(_DWORD *)(v1 + 4100) = 0;
  v9 = *(_DWORD *)(v1 + 4096);
  *(_DWORD *)(v1 + 32 * v9) = -1;
  *(_DWORD *)(v1 + 32 * v9 + 4) = 0x7FFFFFFF;
  _R1 = dword_16D90;
  __asm { VLD1.64         {D16-D17}, [R1@128] }
  _R0 = v1 + 32 * *(_DWORD *)(v1 + 4096) + 8;
  __asm { VST1.64         {D16-D17}, [R0] }
  return j_j_pthread_mutex_unlock(v2);
}
// 16D90: using guessed type int dword_16D90[4];

//----- (00016DA0) --------------------------------------------------------
int __fastcall sub_16DA0(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r4@1
  signed int v4; // r11@1
  int v5; // r10@1
  int v6; // r1@2
  int v7; // r8@2
  __int64 v8; // r0@2
  __int64 v9; // r0@3
  __int64 v10; // r0@3
  pthread_mutex_t *mutex; // [sp+4h] [bp-44h]@1
  int v13; // [sp+8h] [bp-40h]@3
  int v14; // [sp+Ch] [bp-3Ch]@3
  int v15; // [sp+10h] [bp-38h]@3
  int v16; // [sp+14h] [bp-34h]@3
  __int64 v17; // [sp+18h] [bp-30h]@3

  v2 = a1;
  v3 = a2;
  mutex = (pthread_mutex_t *)(a1 + 4144);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  sub_16C3C(v2);
  v4 = 1;
  *(_QWORD *)v3 = *(_QWORD *)(v2 + 4136);
  v5 = *(_DWORD *)(v2 + 4096);
  do
  {
    v6 = ((_BYTE)v5 + (_BYTE)v4) & 0x7F;
    v7 = v2 + 32 * v6;
    LODWORD(v8) = *(_DWORD *)(v2 + 32 * v6);
    HIDWORD(v8) = *(_DWORD *)(v7 + 4);
    if ( v8 )
    {
      v17 = v8;
      android::VectorImpl::insertAt((android::VectorImpl *)(v3 + 8), &v17, *(_DWORD *)(v3 + 16), 1u);
      v9 = *(_QWORD *)(v7 + 16);
      v16 = *(_QWORD *)(v7 + 16) >> 32;
      v15 = v9;
      android::VectorImpl::insertAt((android::VectorImpl *)(v3 + 28), &v15, *(_DWORD *)(v3 + 36), 1u);
      v10 = *(_QWORD *)(v7 + 8);
      v14 = *(_QWORD *)(v7 + 8) >> 32;
      v13 = v10;
      android::VectorImpl::insertAt((android::VectorImpl *)(v3 + 48), &v13, *(_DWORD *)(v3 + 56), 1u);
    }
    ++v4;
  }
  while ( v4 != 128 );
  return pthread_mutex_unlock(mutex);
}

//----- (00016E4C) --------------------------------------------------------
int __fastcall sub_16E4C(int a1, _DWORD *a2)
{
  int v2; // r6@1
  pthread_mutex_t *v3; // r4@1
  _DWORD *v4; // r5@1
  int v5; // r1@1

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 4144);
  v4 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  v5 = 0;
  while ( *(_DWORD *)(v2 + 4104 + 4 * v5) < 1 )
  {
    if ( ++v5 > 6 )
    {
      _R6 = (int *)(v2 + 4104);
      goto LABEL_6;
    }
  }
  _R6 = (int *)(v2 + 4104);
  sub_2DA70(v4, _R6, 7);
LABEL_6:
  __asm { VMOV.I32        Q8, #0 }
  _R0 = (int)(_R6 + 3);
  __asm
  {
    VST1.32         {D16-D17}, [R0]
    VST1.32         {D16-D17}, [R6]
  }
  return j_j_pthread_mutex_unlock(v3);
}

//----- (00016EA8) --------------------------------------------------------
int __fastcall sub_16EA8(int a1, android::String8 *a2)
{
  int v2; // r6@1
  pthread_mutex_t *v3; // r8@1
  android::String8 *v4; // r9@1
  int v5; // r10@1
  signed int v6; // r5@1
  int v7; // r0@2

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 4144);
  v4 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4144));
  sub_16C3C(v2);
  v5 = *(_DWORD *)(v2 + 4096);
  v6 = 1;
  do
  {
    v7 = ((_BYTE)v5 + (_BYTE)v6) & 0x7F;
    android::String8::appendFormat(
      v4,
      "%lld\t%lld\t%lld\n",
      *(_DWORD *)(v2 + 32 * v7),
      *(_DWORD *)(v2 + 32 * v7 + 4),
      *(_DWORD *)(v2 + 32 * v7 + 16),
      *(_DWORD *)(v2 + 32 * v7 + 20),
      *(_DWORD *)(v2 + 32 * v7 + 8),
      *(_DWORD *)(v2 + 32 * v7 + 12));
    ++v6;
  }
  while ( v6 != 128 );
  android::String8::append(v4, "\n");
  return j_j_pthread_mutex_unlock(v3);
}

//----- (00016F38) --------------------------------------------------------
android::String8 *__fastcall sub_16F38(android::String8 *a1, int a2, int a3, int a4, android::String8 *a5, int a6, int a7, unsigned int a8)
{
  android::String8 *v8; // r4@1
  int v9; // r0@1
  int v10; // r5@1
  char **v11; // r8@1
  int v12; // r0@1
  int v13; // r0@1
  unsigned int v14; // r0@2
  char *v24; // r0@5
  __int64 v29; // r0@9
  char *v30; // r0@9
  android::Rect *v32; // [sp+Ch] [bp-5Ch]@5

  v8 = a1;
  v9 = *(_DWORD *)(a2 + 8);
  v10 = a3;
  v11 = (char **)a4;
  *(_DWORD *)v8 = v9;
  *(_DWORD *)((char *)v8 + *(_DWORD *)(v9 - 12)) = *(_DWORD *)(a2 + 12);
  v12 = *(_DWORD *)(a2 + 4);
  *(_DWORD *)v8 = v12;
  *(_DWORD *)((char *)v8 + *(_DWORD *)(v12 - 12)) = *(_DWORD *)(a2 + 16);
  v13 = *(_DWORD *)a2;
  *(_DWORD *)v8 = *(_DWORD *)a2;
  *(_DWORD *)((char *)v8 + *(_DWORD *)(v13 - 12)) = *(_DWORD *)(a2 + 20);
  *((_BYTE *)v8 + 4) = 0;
  android::Region::Region((char *)v8 + 8);
  android::Region::Region((char *)v8 + 28);
  android::Region::Region((char *)v8 + 48);
  android::Region::Region((char *)v8 + 68);
  __dmb();
  do
    v14 = __ldrex((unsigned int *)&unk_45004);
  while ( __strex(v14 + 1, (unsigned int *)&unk_45004) );
  *((_DWORD *)v8 + 22) = v14;
  *((_DWORD *)v8 + 23) = v10;
  if ( v10 )
    android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)v10 - 12) + v10), (char *)v8 + 92);
  *((_DWORD *)v8 + 24) = 0;
  *((_DWORD *)v8 + 25) = 0;
  *((_DWORD *)v8 + 26) = -1;
  *((_BYTE *)v8 + 108) = 1;
  android::String8::String8((android::String8 *)((char *)v8 + 112), "unnamed");
  __asm { VMOV.I32        Q4, #0 }
  *((_DWORD *)v8 + 29) = 0;
  v32 = (android::String8 *)((char *)v8 + 128);
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = (int)v8 + 152;
  __asm { VST1.32         {D8-D9}, [R0] }
  sub_279A4((int)v8 + 184);
  android::Region::Region((char *)v8 + 224);
  android::Region::Region((char *)v8 + 244);
  _R0 = (int)v8 + 272;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = (int)v8 + 296;
  __asm { VST1.32         {D8-D9}, [R0] }
  sub_279A4((int)v8 + 328);
  android::Region::Region((char *)v8 + 368);
  android::Region::Region((char *)v8 + 388);
  *((_DWORD *)v8 + 102) = 0;
  *((_DWORD *)v8 + 103) = 0;
  *((_DWORD *)v8 + 104) = 0;
  sub_16888((int)v8 + 424);
  _R0 = (int)v8 + 4592;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = (int)v8 + 4576;
  __asm { VST1.32         {D8-D9}, [R0] }
  *((_BYTE *)v8 + 4608) = 1;
  *(_DWORD *)((char *)v8 + 4609) = 0;
  sub_2DD0C((int)v8 + 4616, 6, 4u, 2, 2u);
  sub_2F4F0((int)v8 + 4640);
  *((_BYTE *)v8 + 4724) = 0;
  pthread_mutex_init((pthread_mutex_t *)v8 + 197, 0);
  *((_BYTE *)v8 + 4732) = 0;
  v24 = *v11;
  *((_DWORD *)v8 + 1184) = *v11;
  if ( v24 )
    *((_DWORD *)v8 + 1185) = android::RefBase::createWeak(
                               (android::RefBase *)&v24[*(_DWORD *)(*(_DWORD *)v24 - 12)],
                               (char *)v8 + 4736);
  *((_BYTE *)v8 + 4744) = 0;
  pthread_mutex_init((pthread_mutex_t *)((char *)v8 + 4748), 0);
  pthread_cond_init((pthread_cond_t *)v8 + 99, 0);
  android::VectorImpl::VectorImpl((android::String8 *)((char *)v8 + 4756), 0x68u, 0);
  *((_DWORD *)v8 + 1189) = &unk_3F864;
  *((_DWORD *)v8 + 1195) = 0;
  *((_DWORD *)v8 + 1194) = 0;
  *((_BYTE *)v8 + 4784) = 0;
  _R8 = (int)v8 + 4788;
  __asm { VST1.32         {D8-D9}, [R8] }
  android::Rect::makeInvalid((android::String8 *)((char *)v8 + 4584));
  sub_2F0C8(*(_DWORD *)(*((_DWORD *)v8 + 23) + 200), 1, (GLuint *)v8 + 26);
  sub_2F57C((int)v8 + 4640, 36197, *((_DWORD *)v8 + 26));
  if ( a8 & 0x100 )
    *((_BYTE *)v8 + 108) = 0;
  android::String8::setTo((android::String8 *)((char *)v8 + 112), a5);
  *((_DWORD *)v8 + 30) = a6;
  *((_DWORD *)v8 + 31) = a7;
  android::Rect::makeInvalid(v32);
  *((_DWORD *)v8 + 42) = 0;
  *((_BYTE *)v8 + 176) = -1;
  *((_DWORD *)v8 + 43) = 0;
  *((_BYTE *)v8 + 177) = (a8 >> 2) & 1 | a8 & 0x80 | (a8 >> 9) & 2;
  *((_DWORD *)v8 + 45) = 0;
  sub_27E38((int)v8 + 184, 0, 0);
  _R0 = (int)v8 + 120;
  __asm
  {
    VLD1.32         {D16-D17}, [R0]!
    VLDR            D18, [R0]
  }
  _R0 = (int)v8 + 144;
  __asm
  {
    VST1.32         {D16-D17}, [R0]
    VSTR            D18, [R4,#0xA0]
  }
  _aeabi_memcpy((char *)v8 + 264, (char *)v8 + 120);
  android::Region::operator=((char *)v8 + 368);
  android::Region::operator=((char *)v8 + 388);
  v29 = sub_295A0(*(_DWORD *)(v10 + 196), 0);
  sub_16A34((int)v8 + 424, SHIDWORD(v29), v29, SHIDWORD(v29));
  android::Rect::makeInvalid((android::String8 *)((char *)v8 + 4788));
  *((_BYTE *)v8 + 4804) = 0;
  *((_DWORD *)v8 + 1202) = 0;
  *((_DWORD *)v8 + 1203) = 256;
  v30 = strstr(*((const char **)v8 + 28), "launcher");
  if ( v30 )
    LOBYTE(v30) = 1;
  *((_BYTE *)v8 + 4816) = (_BYTE)v30;
  return v8;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);

//----- (00017268) --------------------------------------------------------
int __fastcall sub_17268(int a1, int a2, char **a3, android::String8 *a4, int a5, int a6, unsigned int a7)
{
  int v7; // r4@1
  char **v8; // r8@1
  int v9; // r7@1
  unsigned int v10; // r0@2
  char *v20; // r0@5
  __int64 v25; // r0@9
  char *v26; // r0@9
  android::Rect *v28; // [sp+8h] [bp-60h]@5
  android::String8 *v29; // [sp+28h] [bp-40h]@1

  v7 = a1;
  v29 = a4;
  v8 = a3;
  v9 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 4820));
  *(_DWORD *)v7 = &unk_40F7C;
  *(_DWORD *)(v7 + 4820) = &unk_40FD4;
  *(_BYTE *)(v7 + 4) = 0;
  android::Region::Region(v7 + 8);
  android::Region::Region(v7 + 28);
  android::Region::Region(v7 + 48);
  android::Region::Region(v7 + 68);
  __dmb();
  do
    v10 = __ldrex((unsigned int *)&unk_45004);
  while ( __strex(v10 + 1, (unsigned int *)&unk_45004) );
  *(_DWORD *)(v7 + 88) = v10;
  *(_DWORD *)(v7 + 92) = v9;
  if ( v9 )
    android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)v9 - 12) + v9), (const void *)(v7 + 92));
  *(_DWORD *)(v7 + 96) = 0;
  *(_DWORD *)(v7 + 100) = 0;
  *(_DWORD *)(v7 + 104) = -1;
  *(_BYTE *)(v7 + 108) = 1;
  android::String8::String8((android::String8 *)(v7 + 112), "unnamed");
  __asm { VMOV.I32        Q4, #0 }
  *(_DWORD *)(v7 + 116) = 0;
  v28 = (android::Rect *)(v7 + 128);
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = v7 + 152;
  __asm { VST1.32         {D8-D9}, [R0] }
  sub_279A4(v7 + 184);
  android::Region::Region(v7 + 224);
  android::Region::Region(v7 + 244);
  _R0 = v7 + 272;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = v7 + 296;
  __asm { VST1.32         {D8-D9}, [R0] }
  sub_279A4(v7 + 328);
  android::Region::Region(v7 + 368);
  android::Region::Region(v7 + 388);
  *(_DWORD *)(v7 + 408) = 0;
  *(_DWORD *)(v7 + 412) = 0;
  *(_DWORD *)(v7 + 416) = 0;
  sub_16888(v7 + 424);
  _R0 = v7 + 4592;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = v7 + 4576;
  __asm { VST1.32         {D8-D9}, [R0] }
  *(_BYTE *)(v7 + 4608) = 1;
  *(_DWORD *)(v7 + 4609) = 0;
  sub_2DD0C(v7 + 4616, 6, 4u, 2, 2u);
  sub_2F4F0(v7 + 4640);
  *(_BYTE *)(v7 + 4724) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v7 + 4728), 0);
  *(_BYTE *)(v7 + 4732) = 0;
  v20 = *v8;
  *(_DWORD *)(v7 + 4736) = *v8;
  if ( v20 )
    *(_DWORD *)(v7 + 4740) = android::RefBase::createWeak(
                               (android::RefBase *)&v20[*(_DWORD *)(*(_DWORD *)v20 - 12)],
                               (const void *)(v7 + 4736));
  *(_BYTE *)(v7 + 4744) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v7 + 4748), 0);
  pthread_cond_init((pthread_cond_t *)(v7 + 4752), 0);
  android::VectorImpl::VectorImpl((android::VectorImpl *)(v7 + 4756), 0x68u, 0);
  *(_DWORD *)(v7 + 4756) = &unk_3F864;
  *(_DWORD *)(v7 + 4780) = 0;
  *(_DWORD *)(v7 + 4776) = 0;
  *(_BYTE *)(v7 + 4784) = 0;
  _R8 = v7 + 4788;
  __asm { VST1.32         {D8-D9}, [R8] }
  android::Rect::makeInvalid((android::Rect *)(v7 + 4584));
  sub_2F0C8(*(_DWORD *)(*(_DWORD *)(v7 + 92) + 200), 1, (GLuint *)(v7 + 104));
  sub_2F57C(v7 + 4640, 36197, *(_DWORD *)(v7 + 104));
  if ( a7 & 0x100 )
    *(_BYTE *)(v7 + 108) = 0;
  android::String8::setTo((android::String8 *)(v7 + 112), v29);
  *(_DWORD *)(v7 + 120) = a5;
  *(_DWORD *)(v7 + 124) = a6;
  android::Rect::makeInvalid(v28);
  *(_DWORD *)(v7 + 168) = 0;
  *(_BYTE *)(v7 + 176) = -1;
  *(_DWORD *)(v7 + 172) = 0;
  *(_BYTE *)(v7 + 177) = (a7 >> 2) & 1 | a7 & 0x80 | (a7 >> 9) & 2;
  *(_DWORD *)(v7 + 180) = 0;
  sub_27E38(v7 + 184, 0, 0);
  _R0 = v7 + 120;
  __asm
  {
    VLD1.32         {D16-D17}, [R0]!
    VLDR            D18, [R0]
  }
  _R0 = v7 + 144;
  __asm
  {
    VST1.32         {D16-D17}, [R0]
    VSTR            D18, [R4,#0xA0]
  }
  _aeabi_memcpy(v7 + 264, v7 + 120);
  android::Region::operator=(v7 + 368);
  android::Region::operator=(v7 + 388);
  v25 = sub_295A0(*(_DWORD *)(v9 + 196), 0);
  sub_16A34(v7 + 424, SHIDWORD(v25), v25, SHIDWORD(v25));
  android::Rect::makeInvalid((android::Rect *)(v7 + 4788));
  *(_BYTE *)(v7 + 4804) = 0;
  *(_DWORD *)(v7 + 4808) = 0;
  *(_DWORD *)(v7 + 4812) = 256;
  v26 = strstr(*(const char **)(v7 + 112), "launcher");
  if ( v26 )
    LOBYTE(v26) = 1;
  *(_BYTE *)(v7 + 4816) = (_BYTE)v26;
  return v7;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);

//----- (00017594) --------------------------------------------------------
_DWORD *__fastcall sub_17594(int a1)
{
  int v1; // r4@1
  char *v2; // r5@3
  char *v3; // r5@3
  signed int v4; // r1@3
  int v5; // r5@7
  unsigned int *v6; // r0@11
  unsigned int v7; // r1@13
  void *v8; // r0@15
  _DWORD *result; // r0@18
  unsigned int *v10; // [sp+0h] [bp-28h]@11
  int v11; // [sp+4h] [bp-24h]@7
  android::RefBase::weakref_type *v12; // [sp+8h] [bp-20h]@8
  char *v13; // [sp+Ch] [bp-1Ch]@1
  char *v14; // [sp+10h] [bp-18h]@1
  _DWORD *v15; // [sp+14h] [bp-14h]@1

  v1 = a1;
  v15 = 0;
  v14 = 0;
  v13 = 0;
  android::BufferQueue::createBufferQueue(&v15, &v14, &v13);
  if ( v13 )
    android::RefBase::decStrong((android::RefBase *)&v13[*(_DWORD *)(*(_DWORD *)v13 - 12)], &v13);
  v2 = (char *)operator new(0x14u);
  sub_1B57C((int)v2, (char **)&v15, (char **)(v1 + 92));
  sub_176BC((void *)(v1 + 100), v2);
  v3 = (char *)operator new(0x6F8u);
  sub_176F0((int)v3, (int)&v14, *(_DWORD *)(v1 + 104));
  sub_176BC((void *)(v1 + 96), v3);
  v4 = *(_BYTE *)(v1 + 4724);
  if ( *(_BYTE *)(v1 + 4724) )
    v4 = 0x4000;
  if ( *(_BYTE *)(v1 + 4744) )
    v4 |= 0x8000u;
  android::GLConsumer::setConsumerUsageBits(*(android::GLConsumer **)(v1 + 96), v4 | 0x800);
  v5 = *(_DWORD *)(v1 + 96);
  v11 = v1;
  if ( v1 )
    v12 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)(*(_DWORD *)(*(_DWORD *)v1 - 12) + v1),
                                              &v11);
  sub_27570(v5, (int)&v11);
  if ( v11 )
    android::RefBase::weakref_type::decWeak(v12, &v11);
  android::GLConsumer::setName(*(android::GLConsumer **)(v1 + 96), (const android::String8 *)(v1 + 112));
  android::GLConsumer::setDefaultMaxBufferCount(*(android::GLConsumer **)(v1 + 96), 3);
  sub_17760(&v10, *(_DWORD *)(v1 + 92));
  sub_177D4(v1, &v10);
  v6 = v10;
  if ( v10 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 - 1, v6) );
    if ( v7 == 1 )
    {
      v8 = (void *)sub_131F4((int)v6);
      operator delete(v8);
    }
  }
  if ( v14 )
    android::RefBase::decStrong((android::RefBase *)&v14[*(_DWORD *)(*(_DWORD *)v14 - 12)], &v14);
  result = v15;
  if ( v15 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v15 + *(_DWORD *)(*v15 - 12)), &v15);
  return result;
}
// 10B00: using guessed type int __fastcall android::BufferQueue::createBufferQueue(_DWORD, _DWORD, _DWORD);

//----- (000176BC) --------------------------------------------------------
void *__fastcall sub_176BC(void *a1, char *a2)
{
  char *v2; // r5@1
  void *v3; // r4@1
  void *result; // r0@5

  v2 = a2;
  v3 = a1;
  if ( a2 )
    android::RefBase::incStrong((android::RefBase *)&a2[*(_DWORD *)(*(_DWORD *)a2 - 12)], a1);
  if ( *(_DWORD *)v3 )
    android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)v3 + *(_DWORD *)(**(_DWORD **)v3 - 12)), v3);
  result = v3;
  *(_DWORD *)v3 = v2;
  return result;
}

//----- (000176F0) --------------------------------------------------------
int __fastcall sub_176F0(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r6@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 1772));
  android::GLConsumer::GLConsumer(v3, &off_3FC44, v5, v4);
  *(_DWORD *)v3 = &off_429FC;
  *(_DWORD *)(v3 + 1772) = &off_42A48;
  *(_DWORD *)(v3 + 1740) = 0;
  *(_BYTE *)(v3 + 1748) = 0;
  android::Region::Region(v3 + 1752);
  return v3;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10B30: using guessed type int __fastcall android::GLConsumer::GLConsumer(_DWORD, _DWORD, _DWORD, _DWORD);
// 3FC44: using guessed type void **;
// 429FC: using guessed type void *off_429FC;
// 42A48: using guessed type void *off_42A48;

//----- (00017760) --------------------------------------------------------
char *__fastcall sub_17760(unsigned int **a1, int a2)
{
  int v2; // r5@1
  unsigned int **v3; // r4@1
  int v4; // r0@3
  unsigned int **v5; // r0@4
  unsigned int *v6; // r0@6
  unsigned int v7; // r1@8
  char *result; // r0@9
  char *v9; // [sp+0h] [bp-18h]@1
  android::RefBase::weakref_type *v10; // [sp+4h] [bp-14h]@2

  v2 = a2;
  v3 = a1;
  v9 = *(char **)(a2 + 240);
  if ( v9 )
    v10 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v9[*(_DWORD *)(*(_DWORD *)v9 - 12)],
                                              &v9);
  v4 = sub_1A49C((android::SortedVectorImpl *)(v2 + 356), (int)&v9);
  if ( v4 < 0 )
    v5 = (unsigned int **)(v2 + 376);
  else
    v5 = (unsigned int **)(*(_DWORD *)(v2 + 360) + 12 * v4 + 8);
  v6 = *v5;
  *v3 = v6;
  if ( v6 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
  }
  result = v9;
  if ( v9 )
    result = (char *)android::RefBase::weakref_type::decWeak(v10, &v9);
  return result;
}

//----- (000177D4) --------------------------------------------------------
int __fastcall sub_177D4(int a1, _DWORD *a2)
{
  int v2; // r4@1
  int v3; // r1@2

  v2 = a1;
  if ( *(_DWORD *)(*(_DWORD *)(a1 + 92) + 392) )
  {
    v3 = 0;
  }
  else
  {
    v3 = sub_28280(*a2 + 216);
    if ( v3 & 0x80 )
      v3 = 0;
  }
  return j_android::GLConsumer::setTransformHint(*(android::GLConsumer **)(v2 + 96), v3);
}

//----- (00017800) --------------------------------------------------------
_DWORD *__fastcall sub_17800(_DWORD *a1)
{
  return sub_17594((int)a1 + *(_DWORD *)(*a1 - 16));
}

//----- (0001780C) --------------------------------------------------------
int __fastcall sub_1780C(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int *v4; // r7@1
  int v5; // r0@3
  _DWORD *v6; // r5@7
  int v7; // r0@11
  unsigned int *v8; // r0@12
  unsigned int v9; // r1@13
  int v10; // r0@15
  android::RefBase *v11; // r0@17
  signed int v12; // r6@19
  int v13; // r1@20
  int v14; // r1@21
  int v15; // r1@21
  int v16; // r1@21
  char *v17; // r0@21
  char *v18; // r0@23
  const void *v19; // r1@23
  int v20; // r1@27
  int v21; // r1@27
  int v22; // r1@27
  char *v24; // [sp+4h] [bp-1Ch]@1

  v2 = a1;
  v3 = *(_DWORD *)a2;
  v4 = (int *)(v2 + 4736);
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 20);
  v24 = 0;
  if ( *(_DWORD *)(v2 + 4736) )
  {
    if ( android::RefBase::weakref_type::attemptIncStrong(*(android::RefBase::weakref_type **)(v2 + 4740), &v24) == 1 )
    {
      v5 = *v4;
      v24 = (char *)*v4;
    }
    else
    {
      v5 = (int)v24;
    }
    if ( v5 )
      sub_12288(v5, v2);
  }
  v6 = (_DWORD *)(v2 + 92);
  sub_1D11C(*(_DWORD *)(v2 + 92), *(_DWORD *)(v2 + 104));
  sub_16E4C(v2 + 424, (_DWORD *)(v2 + 112));
  if ( v24 )
    android::RefBase::decStrong((android::RefBase *)&v24[*(_DWORD *)(*(_DWORD *)v24 - 12)], &v24);
  *(_DWORD *)(v2 + 4756) = &unk_3F864;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 4756));
  android::VectorImpl::~VectorImpl((android::VectorImpl *)(v2 + 4756));
  pthread_cond_destroy((pthread_cond_t *)(v2 + 4752));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 4748));
  if ( *v4 )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(v2 + 4740), (const void *)(v2 + 4736));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 4728));
  android::Nsd::postDraw((android::Nsd *)(v2 + 4640));
  sub_2DDB0((void **)(v2 + 4616));
  v7 = *(_DWORD *)(v2 + 4580);
  if ( v7 )
  {
    v8 = (unsigned int *)(v7 + 4);
    __dmb();
    do
      v9 = __ldrex(v8);
    while ( __strex(v9 - 1, v8) );
    if ( v9 == 1 )
    {
      v10 = (int)(v8 - 1);
      if ( v10 )
        (*(void (__fastcall **)(int, _DWORD, unsigned int, _DWORD))(*(_DWORD *)v10 + 4))(
          v10,
          *(_DWORD *)(*(_DWORD *)v10 + 4),
          v9 - 1,
          0);
    }
  }
  v11 = *(android::RefBase **)(v2 + 4576);
  if ( v11 )
    android::RefBase::decStrong(v11, (const void *)(v2 + 4576));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 4568));
  v12 = 4096;
  do
  {
    sub_17AF0((unsigned int **)(v2 + v12 + 420));
    sub_17AF0((unsigned int **)(v2 + v12 + 416));
    v12 -= 32;
  }
  while ( v12 );
  android::Region::~Region(v2 + 388, v13);
  android::Region::~Region(v2 + 368, v14);
  android::Nsd::postDraw((android::Nsd *)(v2 + 328));
  android::Region::~Region(v2 + 244, v15);
  android::Region::~Region(v2 + 224, v16);
  android::Nsd::postDraw((android::Nsd *)(v2 + 184));
  android::String8::~String8((android::String8 *)(v2 + 112));
  v17 = *(char **)(v2 + 100);
  if ( v17 )
    android::RefBase::decStrong((android::RefBase *)&v17[*(_DWORD *)(*(_DWORD *)v17 - 12)], (const void *)(v2 + 100));
  v19 = (const void *)(v2 + 96);
  v18 = *(char **)(v2 + 96);
  if ( v18 )
    android::RefBase::decStrong((android::RefBase *)&v18[*(_DWORD *)(*(_DWORD *)v18 - 12)], v19);
  if ( *v6 )
    android::RefBase::decStrong((android::RefBase *)(*v6 + *(_DWORD *)(*(_DWORD *)*v6 - 12)), (const void *)(v2 + 92));
  android::Region::~Region(v2 + 68, v19);
  android::Region::~Region(v2 + 48, v20);
  android::Region::~Region(v2 + 28, v21);
  android::Region::~Region(v2 + 8, v22);
  return v2;
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00017A00) --------------------------------------------------------
int __fastcall sub_17A00(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1780C(a1, (int)&unk_3F810);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
  return v1;
}

//----- (00017A28) --------------------------------------------------------
int __fastcall sub_17A28(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_1780C((int)a1 + *(_DWORD *)(*a1 - 12), (int)&unk_3F810);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
}

//----- (00017A58) --------------------------------------------------------
void __fastcall sub_17A58(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1780C(a1, (int)&unk_3F810);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
  j_operator delete((void *)v1);
}

//----- (00017A88) --------------------------------------------------------
void __fastcall sub_17A88(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_1780C(v1, (int)&unk_3F810);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
  j_operator delete((void *)v1);
}

//----- (00017ABC) --------------------------------------------------------
unsigned int **__fastcall sub_17ABC(unsigned int **result, int a2, int a3)
{
  int v3; // r4@1
  unsigned int **v4; // r5@1
  unsigned int *v5; // r5@2
  char v6; // [sp+4h] [bp-14h]@2

  v3 = a3;
  v4 = result;
  if ( a3 )
  {
    (*(void (__fastcall **)(int))(*(_DWORD *)a3 + 76))(a3);
    v5 = v4[24];
    (*(void (__fastcall **)(char *, int))(*(_DWORD *)v3 + 16))(&v6, v3);
    android::GLConsumer::setReleaseFence(v5, &v6);
    result = sub_17AF0((unsigned int **)&v6);
  }
  return result;
}
// 10B48: using guessed type int __fastcall android::GLConsumer::setReleaseFence(_DWORD, _DWORD);

//----- (00017AF0) --------------------------------------------------------
unsigned int **__fastcall sub_17AF0(unsigned int **a1)
{
  unsigned int **v1; // r4@1
  unsigned int *v2; // r0@1
  unsigned int v3; // r1@3
  void *v4; // r0@5

  v1 = a1;
  v2 = *a1;
  if ( v2 )
  {
    __dmb();
    do
      v3 = __ldrex(v2);
    while ( __strex(v3 - 1, v2) );
    if ( v3 == 1 )
    {
      v4 = (void *)android::Fence::~Fence((android::Fence *)v2);
      operator delete(v4);
    }
  }
  return v1;
}

//----- (00017B1C) --------------------------------------------------------
int __fastcall sub_17B1C(int a1, void *a2)
{
  int v2; // r4@1
  void *v3; // r5@1
  __int64 *v4; // r6@1
  _DWORD *v5; // r8@1
  __int64 v6; // r0@1
  signed __int64 v7; // r2@2
  unsigned int *v8; // r0@8
  unsigned int v9; // r1@9
  void *v11; // [sp+0h] [bp-38h]@1
  int v12; // [sp+4h] [bp-34h]@2
  pthread_mutex_t *mutex; // [sp+8h] [bp-30h]@1
  int v14; // [sp+Ch] [bp-2Ch]@5
  int v15; // [sp+10h] [bp-28h]@5

  v2 = a1;
  v3 = a2;
  v11 = a2;
  mutex = (pthread_mutex_t *)(a1 + 4748);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4748));
  v4 = (__int64 *)((char *)v3 + 64);
  LODWORD(v6) = *((_DWORD *)v3 + 16);
  v5 = (_DWORD *)(v2 + 4776);
  HIDWORD(v6) = *((_DWORD *)v3 + 17);
  if ( v6 == 1 )
  {
    v7 = 0x100000000LL;
    *v5 = 0;
    *(_DWORD *)(v2 + 4780) = 0;
    v6 = *v4;
    v12 = v2;
  }
  else
  {
    v12 = v2;
    LODWORD(v7) = (unsigned __int64)(*(_QWORD *)v5 + 1LL) >> 32;
    HIDWORD(v7) = *v5 + 1;
  }
  if ( v6 != __PAIR__(v7, HIDWORD(v7)) )
  {
    do
    {
      v14 = 0;
      v15 = 500000000;
      if ( pthread_cond_timedwait_relative_np(v12 + 4752, mutex, &v14, HIDWORD(v7)) )
        _android_log_print(6, "SurfaceFlinger", "[%s] Timed out waiting on callback", *(_DWORD *)(v12 + 112), v11);
      v7 = *(_QWORD *)v5;
    }
    while ( *v4 != *(_QWORD *)v5 + 1LL );
  }
  android::VectorImpl::insertAt((android::VectorImpl *)(v12 + 4756), v11, *(_DWORD *)(v12 + 4764), 1u);
  v8 = (unsigned int *)(v12 + 412);
  __dmb();
  do
    v9 = __ldrex(v8);
  while ( __strex(v9 + 1, v8) );
  if ( sub_23704(*(_DWORD *)(v12 + 92)) == 1 )
    _android_log_print(6, "SurfaceFlinger", "layer data come: LayerName=%s", *(_DWORD *)(v12 + 112), v11);
  *(_QWORD *)v5 = *v4;
  pthread_cond_broadcast((pthread_cond_t *)(v12 + 4752));
  pthread_mutex_unlock(mutex);
  return sub_1E094(*(_DWORD *)(v12 + 92));
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10950: using guessed type int __fastcall pthread_cond_timedwait_relative_np(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00017C58) --------------------------------------------------------
int __fastcall sub_17C58(int a1)
{
  return a1 + 112;
}

//----- (00017C5C) --------------------------------------------------------
int __fastcall sub_17C5C(int a1, int a2)
{
  int v2; // r8@1
  int v3; // r5@1
  __int64 *v4; // r11@1
  __int64 v5; // r2@1
  int v6; // r7@6
  unsigned int *v7; // r4@6
  unsigned int v8; // r0@8
  unsigned int *v9; // r0@9
  unsigned int v10; // r1@11
  void *v11; // r0@13
  int v13; // [sp+0h] [bp-38h]@1
  __int64 *v14; // [sp+4h] [bp-34h]@1
  pthread_mutex_t *mutex; // [sp+8h] [bp-30h]@1
  int v16; // [sp+Ch] [bp-2Ch]@2
  int v17; // [sp+10h] [bp-28h]@2

  v2 = a1;
  v3 = a2;
  v13 = a2;
  mutex = (pthread_mutex_t *)(a1 + 4748);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4748));
  v4 = (__int64 *)(v3 + 64);
  v14 = (__int64 *)(v2 + 4776);
  for ( HIDWORD(v5) = ((unsigned __int64)(*(_QWORD *)(v2 + 4776) + 1LL) >> 32) ^ *(_DWORD *)(v3 + 68);
        *v4 != *v14 + 1;
        v5 = *v14 )
  {
    v16 = 0;
    v17 = 500000000;
    if ( pthread_cond_timedwait_relative_np(v2 + 4752, mutex, &v16, HIDWORD(v5)) )
      _android_log_print(6, "SurfaceFlinger", "[%s] Timed out waiting on callback", *(_DWORD *)(v2 + 112), v13);
  }
  if ( *(_DWORD *)(v2 + 4764) )
  {
    v6 = android::VectorImpl::editItemLocation((android::VectorImpl *)(v2 + 4756), 0);
    sub_1A074((void *)v6, (android::RefBase **)v13);
    v7 = *(unsigned int **)(v13 + 4);
    if ( v7 )
    {
      __dmb();
      do
        v8 = __ldrex(v7);
      while ( __strex(v8 + 1, v7) );
    }
    v9 = *(unsigned int **)(v6 + 4);
    if ( v9 )
    {
      __dmb();
      do
        v10 = __ldrex(v9);
      while ( __strex(v10 - 1, v9) );
      if ( v10 == 1 )
      {
        v11 = (void *)android::Fence::~Fence((android::Fence *)v9);
        operator delete(v11);
      }
    }
    *(_DWORD *)(v6 + 4) = v7;
    _aeabi_memcpy(v6 + 8, v13 + 8);
    android::Region::operator=(v6 + 80);
    *v14 = *v4;
    pthread_cond_broadcast((pthread_cond_t *)(v2 + 4752));
  }
  else
  {
    _android_log_print(6, "SurfaceFlinger", "Can't replace a frame on an empty queue");
  }
  return pthread_mutex_unlock(mutex);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10950: using guessed type int __fastcall pthread_cond_timedwait_relative_np(_DWORD, _DWORD, _DWORD, _DWORD);
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);

//----- (00017DC0) --------------------------------------------------------
int __fastcall sub_17DC0(int result)
{
  unsigned int *v1; // r1@1
  unsigned int v2; // r3@2

  v1 = (unsigned int *)(result + 416);
  __dmb();
  while ( 1 )
  {
    v2 = __ldrex(v1);
    if ( v2 )
      break;
    if ( !__strex(1u, v1) )
      return sub_1E094(*(_DWORD *)(result + 92));
  }
  return result;
}

//----- (00017DE4) --------------------------------------------------------
int __fastcall sub_17DE4(int a1)
{
  return j_android::ConsumerBase::abandon(*(android::ConsumerBase **)(a1 + 96));
}

//----- (00017DEC) --------------------------------------------------------
signed int __fastcall sub_17DEC(int a1, unsigned int a2, unsigned int a3, int a4, unsigned int a5)
{
  int v5; // r5@1
  int v6; // r8@1
  unsigned int v7; // r7@1
  unsigned int v8; // r4@1
  unsigned int v9; // r6@1
  unsigned int v10; // r0@1
  _BYTE *v11; // r9@5
  bool v12; // r0@7
  signed int result; // r0@8
  signed int v14; // r1@10

  v5 = a1;
  v6 = a4;
  v7 = a3;
  v8 = a2;
  v9 = sub_1DADC(*(_DWORD *)(a1 + 92));
  v10 = sub_1DAE8(*(_DWORD *)(v5 + 92));
  if ( v9 < v10 )
    v10 = v9;
  if ( v10 < v8 || v10 < v7 )
  {
    _android_log_print(6, "SurfaceFlinger", "dimensions too large %u x %u", v8, v7);
    result = -22;
  }
  else
  {
    *(_DWORD *)(v5 + 116) = v6;
    *(_BYTE *)(v5 + 4744) = (a5 >> 13) & 1;
    *(_BYTE *)(v5 + 4724) = (a5 >> 11) & 1;
    v11 = (_BYTE *)(v5 + 4724);
    v12 = (v6 & 0xFFFFFF00) == 256 || (v6 | 4) != 5;
    *(_BYTE *)(v5 + 4608) = v12;
    android::GLConsumer::setDefaultBufferSize(*(android::GLConsumer **)(v5 + 96), v8, v7);
    android::GLConsumer::setDefaultBufferFormat(*(android::GLConsumer **)(v5 + 96), v6);
    v14 = *v11;
    if ( *v11 )
      v14 = 0x4000;
    if ( *(_BYTE *)(v5 + 4744) )
      v14 |= 0x8000u;
    android::GLConsumer::setConsumerUsageBits(*(android::GLConsumer **)(v5 + 96), v14 | 0x800);
    result = 0;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00017FAC) --------------------------------------------------------
char *__fastcall sub_17FAC(void *a1, int a2)
{
  void *v2; // r2@1
  char *result; // r0@1

  v2 = a1;
  result = *(char **)(a2 + 100);
  *(_DWORD *)v2 = result;
  if ( result )
    result = (char *)android::RefBase::incStrong((android::RefBase *)&result[*(_DWORD *)(*(_DWORD *)result - 12)], v2);
  return result;
}

//----- (00017FCC) --------------------------------------------------------
int __fastcall sub_17FCC(int result, int a2)
{
  int v8; // r1@4
  int v9; // r3@5
  int v10; // r1@5

  __asm
  {
    VMOV.I32        Q8, #0
    VST1.32         {D16-D17}, [R0]
  }
  if ( *(_DWORD *)(a2 + 4592) <= *(_DWORD *)(a2 + 4584) || *(_DWORD *)(a2 + 4596) <= *(_DWORD *)(a2 + 4588) )
  {
    v8 = *(_DWORD *)(a2 + 4576);
    if ( v8 )
    {
      v9 = *(_DWORD *)(v8 + 40);
      v10 = *(_DWORD *)(v8 + 44);
      *(_DWORD *)result = 0;
      *(_DWORD *)(result + 4) = 0;
      *(_DWORD *)(result + 8) = v9;
      *(_DWORD *)(result + 12) = v10;
    }
    else
    {
      result = android::Rect::makeInvalid((android::Rect *)result);
    }
  }
  else
  {
    _R1 = a2 + 4584;
    __asm
    {
      VLD1.32         {D16-D17}, [R1]
      VST1.32         {D16-D17}, [R0]
    }
  }
  return result;
}

//----- (0001802C) --------------------------------------------------------
int __fastcall sub_1802C(android::Rect *a1, int a2)
{
  return sub_1803C(a1, a2, a2 + 368);
}

//----- (0001803C) --------------------------------------------------------
int __fastcall sub_1803C(android::Rect *this, int a2, int a3)
{
  int v3; // r6@1
  int v4; // r8@1
  signed int v5; // r7@1
  android::Rect *v6; // r5@1
  signed int v7; // r4@1
  int v9; // [sp+0h] [bp-28h]@5
  int v10; // [sp+4h] [bp-24h]@5
  int v11; // [sp+8h] [bp-20h]@5
  int v12; // [sp+Ch] [bp-1Ch]@5

  v3 = a2;
  v4 = a3;
  v5 = *(_DWORD *)(a2 + 264);
  v6 = this;
  v7 = *(_DWORD *)(a2 + 268);
  if ( v5 <= -1 )
  {
    _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", v5);
    v5 = 0x7FFFFFFF;
  }
  if ( v7 <= -1 )
  {
    _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v7);
    v7 = 0x7FFFFFFF;
  }
  v10 = 0;
  v9 = 0;
  v11 = v5;
  v12 = v7;
  if ( *(_DWORD *)(v3 + 280) > *(_DWORD *)(v3 + 272) && *(_DWORD *)(v3 + 284) > *(_DWORD *)(v3 + 276) )
    android::Rect::intersect((android::Rect *)&v9, (const android::Rect *)(v3 + 272), (android::Rect *)&v9);
  return sub_180E0(v6, (const android::Rect *)&v9, v4);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000180E0) --------------------------------------------------------
int __fastcall sub_180E0(android::Rect *this, const android::Rect *_R1, int a3)
{
  int v3; // r5@1
  int result; // r0@1
  int v6; // r2@1
  int v7; // r7@1
  int v18; // r1@7
  int v19; // [sp+0h] [bp-50h]@7
  char v20; // [sp+14h] [bp-3Ch]@7
  int v21; // [sp+18h] [bp-38h]@7
  int v22; // [sp+1Ch] [bp-34h]@7
  char v23; // [sp+28h] [bp-28h]@6

  v3 = a3;
  _R4 = this;
  result = *(_DWORD *)(a3 + 8);
  v6 = *(_DWORD *)(a3 + 4);
  v7 = *(_DWORD *)(v6 + 16 * (result - 1));
  _R2 = v6 + 16 * (result - 1);
  if ( *(_DWORD *)(_R2 + 8) > v7 && *(_DWORD *)(_R2 + 12) > *(_DWORD *)(_R2 + 4) )
  {
    if ( result == 1 )
    {
      __asm { VLD1.32         {D16-D17}, [R2] }
      _R2 = &v23;
      __asm { VST1.64         {D16-D17}, [R2] }
      result = android::Rect::reduce(_R4, _R1);
    }
    else
    {
      android::Region::Region(&v19);
      android::Region::subtract(&v20, &v19, v3);
      _R0 = v21 + 16 * v22 - 16;
      __asm
      {
        VLD1.32         {D16-D17}, [R0]
        VST1.32         {D16-D17}, [R4]
      }
      android::Region::~Region(&v20, v22);
      result = android::Region::~Region(&v19, v18);
    }
  }
  else
  {
    __asm
    {
      VLD1.32         {D16-D17}, [R1]
      VST1.32         {D16-D17}, [R4]
    }
  }
  return result;
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10B90: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10B9C: using guessed type int __fastcall android::Region::subtract(_DWORD, _DWORD, _DWORD);

//----- (00018160) --------------------------------------------------------
int __fastcall sub_18160(int a1, int a2, int *a3)
{
  int v4; // r6@1
  signed int v11; // r4@1
  signed int v12; // r5@1
  signed int *v13; // r11@5
  int *v14; // r8@5
  int v23; // r0@8
  signed int v29; // r4@13
  signed int v30; // r5@13
  int result; // r0@17
  unsigned int v34; // r4@19
  char v35; // r6@20
  int *v36; // r0@25
  int *v37; // r1@25
  signed int v40; // ST00_4@29
  int v45; // [sp+8h] [bp-160h]@1
  int *v46; // [sp+Ch] [bp-15Ch]@1
  float v47; // [sp+10h] [bp-158h]@29
  int v49; // [sp+18h] [bp-150h]@29
  int v50; // [sp+1Ch] [bp-14Ch]@29
  char v51; // [sp+20h] [bp-148h]@23
  char v52; // [sp+48h] [bp-120h]@23
  char v53; // [sp+70h] [bp-F8h]@23
  char v54; // [sp+98h] [bp-D0h]@17
  int v55; // [sp+A8h] [bp-C0h]@17
  int v56; // [sp+ACh] [bp-BCh]@17
  int v57; // [sp+B0h] [bp-B8h]@17
  int v58; // [sp+B4h] [bp-B4h]@17
  char v59; // [sp+B8h] [bp-B0h]@12
  char v60; // [sp+E0h] [bp-88h]@12
  char v61; // [sp+F0h] [bp-78h]@12
  char v62; // [sp+100h] [bp-68h]@8
  char v63; // [sp+110h] [bp-58h]@8
  int v64; // [sp+120h] [bp-48h]@5
  int v65; // [sp+124h] [bp-44h]@5
  int v66; // [sp+128h] [bp-40h]@5
  int v67; // [sp+12Ch] [bp-3Ch]@5
  char v68; // [sp+130h] [bp-38h]@1

  _R4 = &v68;
  v4 = a2;
  _R5 = a1;
  v46 = a3;
  v45 = a1;
  sub_17FCC((int)&v68, a2);
  __asm
  {
    VLD1.64         {D16-D17}, [R4@128]
    VCVT.F32.S32    Q4, Q8
    VST1.32         {D8-D9}, [R5]
  }
  v11 = *(_DWORD *)(v4 + 264);
  v12 = *(_DWORD *)(v4 + 268);
  if ( v11 <= -1 )
  {
    _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", *(_DWORD *)(v4 + 264));
    v11 = 0x7FFFFFFF;
  }
  if ( v12 <= -1 )
  {
    _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v12);
    v12 = 0x7FFFFFFF;
  }
  v13 = (signed int *)(v4 + 268);
  v65 = 0;
  v14 = (int *)(v4 + 264);
  v64 = 0;
  v66 = v11;
  v67 = v12;
  if ( *(_DWORD *)(v4 + 280) > *(_DWORD *)(v4 + 272) && *(_DWORD *)(v4 + 284) > *(_DWORD *)(v4 + 276) )
  {
    _R0 = v4 + 272;
    __asm { VLD1.32         {D16-D17}, [R0] }
    _R0 = &v64;
    __asm { VST1.64         {D16-D17}, [R0] }
  }
  _R10 = &v64;
  _R5 = &v62;
  __asm { VLD1.64         {D16-D17}, [R10] }
  _R9 = &v63;
  __asm { VST1.64         {D16-D17}, [R9] }
  sub_27ED8((int)&v62, v4 + 328, (int)&v64);
  __asm
  {
    VLD1.64         {D16-D17}, [R5]
    VST1.64         {D16-D17}, [R10]
  }
  v23 = *v46;
  if ( *(_DWORD *)(*v46 + 172) <= v65
    && *(_DWORD *)(v23 + 180) >= v67
    && *(_DWORD *)(v23 + 168) <= v64
    && *(_DWORD *)(v23 + 176) >= v66 )
  {
    __asm
    {
      VLD1.64         {D16-D17}, [R9]
      VST1.64         {D16-D17}, [R10]
    }
  }
  else
  {
    _R0 = v23 + 168;
    _R1 = &v61;
    __asm
    {
      VLD1.32         {D16-D17}, [R0]
      VST1.64         {D16-D17}, [R1]
    }
    android::Rect::intersect((android::Rect *)&v64, (const android::Rect *)&v61, (android::Rect *)&v64);
    sub_281A0((int)&v59, v4 + 328);
    _R4 = &v60;
    sub_27ED8((int)&v60, (int)&v59, (int)&v64);
    __asm
    {
      VLD1.64         {D16-D17}, [R4]
      VST1.64         {D16-D17}, [R10]
    }
    android::Nsd::postDraw((android::Nsd *)&v59);
  }
  v29 = *v14;
  v30 = *v13;
  if ( *v14 <= -1 )
  {
    _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", *v14);
    v29 = 0x7FFFFFFF;
  }
  if ( v30 <= -1 )
  {
    _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v30);
    v30 = 0x7FFFFFFF;
  }
  v56 = 0;
  v55 = 0;
  v57 = v29;
  v58 = v30;
  android::Rect::intersect((android::Rect *)&v64, (const android::Rect *)&v55, (android::Rect *)&v64);
  _R4 = &v54;
  sub_180E0((android::Rect *)&v54, (const android::Rect *)&v64, v4 + 368);
  __asm
  {
    VLD1.64         {D16-D17}, [R4]
    VST1.64         {D16-D17}, [R10]
  }
  result = v64;
  if ( v66 > v64 )
  {
    result = v65;
    if ( v67 > v65 )
    {
      v34 = *(_DWORD *)(v4 + 4600);
      if ( sub_2754C(*(_DWORD *)(v4 + 96)) == 1 )
      {
        v35 = sub_13600(*v46);
        if ( v35 & 4 )
        {
          v35 ^= 3u;
          if ( (v34 ^ (v34 >> 1)) & 1 )
            LOBYTE(v34) = v34 ^ 3;
        }
        sub_27A30((int)&v52, v34);
        sub_27A30((int)&v51, v35);
        sub_27B8C((int)&v53, (int)&v52, (int)&v51);
        v34 = sub_28280((int)&v53);
        android::Nsd::postDraw((android::Nsd *)&v53);
        android::Nsd::postDraw((android::Nsd *)&v51);
        android::Nsd::postDraw((android::Nsd *)&v52);
      }
      if ( v34 & 4 )
      {
        v37 = v13;
        if ( !((v34 ^ (v34 >> 1)) & 1) )
          v34 ^= 3u;
        v36 = v14;
      }
      else
      {
        v36 = v13;
        v37 = v14;
      }
      _R5 = *v36;
      _R6 = *v37;
      v40 = *v13;
      android::Rect::transform((android::Rect *)&v47, (unsigned int)&v64, v34, *v14);
      __asm
      {
        VMOV            S2, R6
        VSUB.F32        S0, S18, S16
        VCVT.F32.S32    S2, S2
        VMOV            S6, R5
        VCVT.F32.S32    S6, S6
        VSUB.F32        S4, S19, S17
        VDIV.F32        S0, S0, S2
      }
      _R0 = _R6 - v49;
      __asm
      {
        VDIV.F32        S2, S4, S6
        VLDR            S4, [SP,#0x168+var_158]
        VLDR            S6, [SP,#0x168+var_154]
        VCVT.F32.S32    S6, S6
        VCVT.F32.S32    S4, S4
        VMOV            S8, R0
      }
      _R0 = _R5 - v50;
      __asm
      {
        VCVT.F32.S32    S8, S8
        VMOV            S10, R0
        VMLA.F32        S16, S0, S4
        VCVT.F32.S32    S10, S10
      }
      _R0 = v45;
      __asm
      {
        VMLA.F32        S17, S2, S6
        VMLS.F32        S18, S0, S8
        VMLS.F32        S19, S2, S10
        VSTMIA          R0, {S16-S19}
      }
    }
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00018458) --------------------------------------------------------
int __fastcall sub_18458(int a1, int *a2, android::RefBase::weakref_type *a3)
{
  android::RefBase::weakref_type *v3; // r11@1
  int v4; // r6@1
  int *v5; // r8@1
  signed int v6; // r5@6
  signed int v7; // r1@6
  signed int v23; // r9@13
  signed int v24; // r7@13
  int v25; // r0@17
  int v26; // r1@17
  int v27; // r2@17
  int v28; // r3@17
  int v32; // r10@18
  void (__fastcall *v33)(android::RefBase::weakref_type *, char *); // r4@18
  void (__cdecl *v34)(android::RefBase::weakref_type *, const void *); // r4@20
  int v35; // r1@20
  char v36; // r7@21
  unsigned int v37; // r0@21
  char v38; // r1@21
  void (__fastcall *v39)(android::RefBase::weakref_type *); // r2@26
  android::RefBase::weakref_type *v40; // r0@26
  int v41; // r1@28
  char v43; // [sp+10h] [bp-230h]@24
  char v44; // [sp+38h] [bp-208h]@24
  char v45; // [sp+60h] [bp-1E0h]@24
  int v46; // [sp+64h] [bp-1DCh]@24
  int v47; // [sp+68h] [bp-1D8h]@24
  int v48; // [sp+6Ch] [bp-1D4h]@24
  int v49; // [sp+70h] [bp-1D0h]@24
  int v50; // [sp+74h] [bp-1CCh]@24
  int v51; // [sp+78h] [bp-1C8h]@24
  int v52; // [sp+7Ch] [bp-1C4h]@24
  int v53; // [sp+80h] [bp-1C0h]@24
  int v54; // [sp+84h] [bp-1BCh]@24
  char v55; // [sp+88h] [bp-1B8h]@20
  char v56; // [sp+B0h] [bp-190h]@20
  int v57; // [sp+B4h] [bp-18Ch]@24
  int v58; // [sp+B8h] [bp-188h]@24
  int v59; // [sp+BCh] [bp-184h]@24
  int v60; // [sp+C0h] [bp-180h]@24
  int v61; // [sp+C4h] [bp-17Ch]@24
  int v62; // [sp+C8h] [bp-178h]@24
  int v63; // [sp+CCh] [bp-174h]@24
  int v64; // [sp+D0h] [bp-170h]@24
  int v65; // [sp+D4h] [bp-16Ch]@24
  char v66; // [sp+D8h] [bp-168h]@20
  char v67; // [sp+100h] [bp-140h]@20
  char v68; // [sp+110h] [bp-130h]@18
  char v69; // [sp+120h] [bp-120h]@18
  char v70; // [sp+130h] [bp-110h]@18
  char v71; // [sp+140h] [bp-100h]@18
  int v72; // [sp+144h] [bp-FCh]@19
  int v73; // [sp+148h] [bp-F8h]@19
  int v74; // [sp+14Ch] [bp-F4h]@19
  int v75; // [sp+150h] [bp-F0h]@17
  int v76; // [sp+154h] [bp-ECh]@17
  int v77; // [sp+158h] [bp-E8h]@17
  int v78; // [sp+15Ch] [bp-E4h]@17
  int v79; // [sp+160h] [bp-E0h]@17
  int v80; // [sp+164h] [bp-DCh]@17
  int v81; // [sp+168h] [bp-D8h]@17
  int v82; // [sp+16Ch] [bp-D4h]@17
  int v83; // [sp+170h] [bp-D0h]@17
  int v84; // [sp+174h] [bp-CCh]@17
  int v85; // [sp+178h] [bp-C8h]@17
  int v86; // [sp+17Ch] [bp-C4h]@17
  int v87; // [sp+180h] [bp-C0h]@17
  int v88; // [sp+184h] [bp-BCh]@17
  int v89; // [sp+188h] [bp-B8h]@17
  int v90; // [sp+18Ch] [bp-B4h]@17
  int v91; // [sp+190h] [bp-B0h]@17
  int v92; // [sp+194h] [bp-ACh]@17
  int v93; // [sp+198h] [bp-A8h]@17
  int v94; // [sp+19Ch] [bp-A4h]@17
  char v95; // [sp+1A0h] [bp-A0h]@13
  char v96; // [sp+1C8h] [bp-78h]@13
  char v97; // [sp+1D8h] [bp-68h]@13
  char v98; // [sp+1E8h] [bp-58h]@13
  int v99; // [sp+1F8h] [bp-48h]@13
  int v100; // [sp+1FCh] [bp-44h]@17
  int v101; // [sp+200h] [bp-40h]@17
  int v102; // [sp+204h] [bp-3Ch]@17
  char v103; // [sp+208h] [bp-38h]@11

  v3 = a3;
  v4 = a1;
  v5 = a2;
  (*(void (__fastcall **)(android::RefBase::weakref_type *))(*(_DWORD *)a3 + 20))(a3);
  (*(void (__fastcall **)(android::RefBase::weakref_type *, _DWORD))(*(_DWORD *)v3 + 24))(v3, 0);
  if ( (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 28))(v4) == 1 && !*(_BYTE *)(*v5 + 132) )
    (*(void (__fastcall **)(android::RefBase::weakref_type *, signed int))(*(_DWORD *)v3 + 24))(v3, 1);
  if ( (*(int (__fastcall **)(int, int))(*(_DWORD *)v4 + 24))(v4, v4 + 264) != 1 || *(_BYTE *)(v4 + 320) != 255 )
  {
    v6 = 1029;
    v7 = 1029;
    if ( *(_BYTE *)(v4 + 108) )
      v7 = 261;
    (*(void (__fastcall **)(android::RefBase::weakref_type *, signed int))(*(_DWORD *)v3 + 32))(v3, v7);
    if ( *(_BYTE *)(v4 + 108) )
      v6 = 261;
    *(_DWORD *)(v4 + 4812) = v6;
  }
  android::Region::Region(&v103, v4 + 368);
  if ( *(_DWORD *)(v4 + 280) > *(_DWORD *)(v4 + 272) && *(_DWORD *)(v4 + 284) > *(_DWORD *)(v4 + 276) )
  {
    _R0 = v4 + 272;
    _R5 = &v99;
    __asm { VLD1.32         {D16-D17}, [R0] }
    _R9 = &v98;
    _R2 = &v99;
    __asm { VST1.64         {D16-D17}, [R5] }
    sub_27ED8((int)&v98, v4 + 328, (int)&v99);
    __asm { VLD1.64         {D16-D17}, [R9] }
    _R1 = &v97;
    __asm { VST1.64         {D16-D17}, [R5] }
    _R0 = *v5 + 168;
    __asm
    {
      VLD1.32         {D16-D17}, [R0]
      VST1.64         {D16-D17}, [R1]
    }
    android::Rect::intersect((android::Rect *)&v99, (const android::Rect *)&v97, (android::Rect *)&v99);
    sub_281A0((int)&v95, v4 + 328);
    _R7 = &v96;
    sub_27ED8((int)&v96, (int)&v95, (int)&v99);
    __asm
    {
      VLD1.64         {D16-D17}, [R7]
      VST1.64         {D16-D17}, [R5]
    }
    android::Nsd::postDraw((android::Nsd *)&v95);
    v23 = *(_DWORD *)(v4 + 264);
    v24 = *(_DWORD *)(v4 + 268);
    if ( v23 <= -1 )
    {
      _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", *(_DWORD *)(v4 + 264));
      v23 = 0x7FFFFFFF;
    }
    if ( v24 <= -1 )
    {
      _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v24);
      v24 = 0x7FFFFFFF;
    }
    v92 = 0;
    v91 = 0;
    v93 = v23;
    v94 = v24;
    android::Rect::intersect((android::Rect *)&v99, (const android::Rect *)&v91, (android::Rect *)&v99);
    v25 = *(_DWORD *)(v4 + 264);
    v87 = 0;
    v88 = 0;
    v89 = v25;
    v90 = v100;
    android::Region::orSelf(&v103, &v87);
    v26 = *(_DWORD *)(v4 + 264);
    v27 = *(_DWORD *)(v4 + 268);
    v83 = 0;
    v84 = v102;
    v85 = v26;
    v86 = v27;
    android::Region::orSelf(&v103, &v83);
    v79 = 0;
    v80 = v100;
    v81 = v99;
    v82 = v102;
    android::Region::orSelf(&v103, &v79);
    v28 = *(_DWORD *)(v4 + 264);
    v75 = v101;
    v76 = v100;
    v77 = v28;
    v78 = v102;
    android::Region::orSelf(&v103, &v75);
  }
  sub_1803C((android::Rect *)&v70, v4, (int)&v103);
  sub_27ED8((int)&v71, v4 + 328, (int)&v70);
  _R1 = &v69;
  _R0 = *v5 + 168;
  __asm
  {
    VLD1.32         {D16-D17}, [R0]
    VST1.64         {D16-D17}, [R1]
  }
  android::Rect::intersect((android::Rect *)&v71, (const android::Rect *)&v69, (android::Rect *)&v71);
  v32 = *v5 + 216;
  v33 = *(void (__fastcall **)(android::RefBase::weakref_type *, char *))(*(_DWORD *)v3 + 44);
  sub_27ED8((int)&v68, v32, (int)&v71);
  v33(v3, &v68);
  if ( sub_23704(*(_DWORD *)(v4 + 92)) == 1 )
    _android_log_print(
      6,
      "SurfaceFlinger",
      "layerName: %s, setFrame: {%d, %d, %d, %d}",
      *(_DWORD *)(v4 + 112),
      *(_DWORD *)&v71,
      v72,
      v73,
      v74);
  v34 = *(void (__cdecl **)(android::RefBase::weakref_type *, const void *))(*(_DWORD *)v3 + 48);
  sub_18160((int)&v67, v4, v5);
  v34(v3, &v67);
  v35 = *(_BYTE *)(v4 + 320);
  (*(void (__cdecl **)(android::BBinder *))(*(_DWORD *)v3 + 72))(v3);
  sub_27A30((int)&v66, *(_DWORD *)(v4 + 4600));
  sub_27B8C((int)&v55, v32, v4 + 328);
  sub_27B8C((int)&v56, (int)&v55, (int)&v66);
  android::Nsd::postDraw((android::Nsd *)&v55);
  if ( sub_2754C(*(_DWORD *)(v4 + 96)) == 1 )
  {
    v36 = sub_13600(*v5);
    v37 = sub_28280((int)&v56);
    v38 = v37;
    if ( v36 & 4 )
    {
      v36 ^= 3u;
      if ( (v37 ^ (v37 >> 1)) & 1 )
        v38 = v37 ^ 3;
    }
    sub_27A30((int)&v44, v38);
    sub_27A30((int)&v43, v36);
    sub_27B8C((int)&v45, (int)&v44, (int)&v43);
    v61 = v50;
    v60 = v49;
    *(_DWORD *)&v56 = *(_DWORD *)&v45;
    v57 = v46;
    v58 = v47;
    v59 = v48;
    v62 = v51;
    v63 = v52;
    v64 = v53;
    v65 = v54;
    android::Nsd::postDraw((android::Nsd *)&v45);
    android::Nsd::postDraw((android::Nsd *)&v43);
    android::Nsd::postDraw((android::Nsd *)&v44);
  }
  if ( sub_28280((int)&v56) & 0x80 )
  {
    v39 = *(void (__fastcall **)(android::RefBase::weakref_type *))(*(_DWORD *)v3 + 24);
    v40 = v3;
  }
  else
  {
    v39 = *(void (__fastcall **)(android::RefBase::weakref_type *))(*(_DWORD *)v3 + 40);
    v40 = v3;
  }
  v39(v40);
  android::Nsd::postDraw((android::Nsd *)&v56);
  android::Nsd::postDraw((android::Nsd *)&v66);
  return android::Region::~Region(&v103, v41);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10BB4: using guessed type int __fastcall android::Region::Region(_DWORD, _DWORD);
// 10BC0: using guessed type int __fastcall android::Region::orSelf(_DWORD, _DWORD);

//----- (000187D8) --------------------------------------------------------
int __fastcall sub_187D8(int a1, int *a2, int a3)
{
  int v3; // r7@1
  int v4; // r5@1
  int v5; // r4@1
  int v13; // r1@1
  int v14; // r1@2
  void (__fastcall *v15)(int, int); // r2@2
  int v16; // r1@4
  char v18; // [sp+0h] [bp-50h]@1
  char v19; // [sp+10h] [bp-40h]@1
  char v20; // [sp+24h] [bp-2Ch]@1

  v3 = *a2;
  v4 = a1;
  v5 = a3;
  _R0 = *a2 + 168;
  _R2 = &v18;
  __asm
  {
    VLD1.32         {D16-D17}, [R0]
    VST1.64         {D16-D17}, [R2,#0x50+var_50]
  }
  android::Region::intersect(&v19, v4 + 8);
  sub_280A4((int)&v20, v3 + 216, (int)&v19);
  android::Region::~Region(&v19, v13);
  (*(void (__fastcall **)(int, char *))(*(_DWORD *)v5 + 52))(v5, &v20);
  (*(void (__fastcall **)(int, int))(*(_DWORD *)v5 + 56))(v5, v4 + 68);
  if ( *(_DWORD *)(v4 + 4580) )
  {
    v14 = v4 + 4580;
    v15 = *(void (__fastcall **)(int, int))(*(_DWORD *)v5 + 60);
  }
  else
  {
    v14 = v4 + 4576;
    v15 = *(void (__fastcall **)(int, int))(*(_DWORD *)v5 + 64);
  }
  v15(v5, v14);
  return android::Region::~Region(&v20, v16);
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10BCC: using guessed type int __fastcall android::Region::intersect(_DWORD, _DWORD);

//----- (00018850) --------------------------------------------------------
int __fastcall sub_18850(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@1
  int v5; // r3@2
  int v6; // r1@3
  signed int v7; // r5@4
  _DWORD *v8; // r0@5
  android::Fence *v10; // [sp+4h] [bp-14h]@3

  v3 = a3;
  v4 = a1;
  if ( (*(int (__fastcall **)(int))(*(_DWORD *)a3 + 8))(a3) != 1
    && (*(int (__fastcall **)(int))(*(_DWORD *)v3 + 8))(v3) != 5 )
  {
    v7 = -1;
    return (*(int (__fastcall **)(int, signed int, _DWORD, int))(*(_DWORD *)v3 + 68))(
             v3,
             v7,
             *(_DWORD *)(*(_DWORD *)v3 + 68),
             v5);
  }
  v6 = *(_DWORD *)(v4 + 96);
  android::GLConsumer::getCurrentFence((android::GLConsumer *)&v10);
  if ( *((_DWORD *)v10 + 1) == -1 )
    goto LABEL_6;
  v7 = android::Fence::dup(v10);
  if ( v7 == -1 )
  {
    v8 = (_DWORD *)_errno();
    _android_log_print(5, "SurfaceFlinger", "failed to dup layer fence, skipping sync: %d", *v8);
LABEL_6:
    v7 = -1;
  }
  sub_17AF0((unsigned int **)&v10);
  return (*(int (__fastcall **)(int, signed int, _DWORD, int))(*(_DWORD *)v3 + 68))(
           v3,
           v7,
           *(_DWORD *)(*(_DWORD *)v3 + 68),
           v5);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10BF0: using guessed type int _errno(void);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (000188D4) --------------------------------------------------------
float __fastcall sub_188D4(int a1, int a2, _DWORD *a3)
{
  int v3; // r6@1
  _DWORD *v4; // r5@1
  signed int v5; // r7@1
  int v6; // r8@1
  signed int v7; // r4@1
  char v16; // [sp+0h] [bp-58h]@8
  char v17; // [sp+10h] [bp-48h]@8
  char v18; // [sp+20h] [bp-38h]@8
  int v19; // [sp+30h] [bp-28h]@5
  int v20; // [sp+34h] [bp-24h]@5
  int v21; // [sp+38h] [bp-20h]@5
  int v22; // [sp+3Ch] [bp-1Ch]@5

  v3 = a2;
  v4 = a3;
  v5 = *(_DWORD *)(a2 + 120);
  v6 = a1;
  v7 = *(_DWORD *)(a2 + 124);
  if ( v5 <= -1 )
  {
    _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", v5);
    v5 = 0x7FFFFFFF;
  }
  if ( v7 <= -1 )
  {
    _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v7);
    v7 = 0x7FFFFFFF;
  }
  v20 = 0;
  v19 = 0;
  v21 = v5;
  v22 = v7;
  if ( *(_DWORD *)(v3 + 136) > *(_DWORD *)(v3 + 128) && *(_DWORD *)(v3 + 140) > *(_DWORD *)(v3 + 132) )
    android::Rect::intersect((android::Rect *)&v19, (const android::Rect *)(v3 + 128), (android::Rect *)&v19);
  sub_180E0((android::Rect *)&v18, (const android::Rect *)&v19, v3 + 224);
  sub_27ED8((int)&v17, v3 + 184, (int)&v18);
  _R1 = &v16;
  _R0 = *v4 + 168;
  __asm
  {
    VLD1.32         {D16-D17}, [R0]
    VST1.64         {D16-D17}, [R1,#0x58+var_58]
  }
  android::Rect::intersect((android::Rect *)&v17, (const android::Rect *)&v16, (android::Rect *)&v17);
  return sub_27ED8(v6, *v4 + 216, (int)&v17);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000189A4) --------------------------------------------------------
int __fastcall sub_189A4(int a1)
{
  return (*(int (**)(void))(*(_DWORD *)a1 + 44))();
}

//----- (000189B0) --------------------------------------------------------
int __fastcall sub_189B0(int a1, int a2, int a3)
{
  int v3; // r5@1
  int v4; // r6@1
  int v5; // r8@1
  void (__fastcall *v6)(int, int, int *, int); // r4@1
  int v7; // ST0C_4@1
  int v8; // ST10_4@1
  int v9; // r1@1
  int v11; // [sp+14h] [bp+0h]@1

  v3 = a2;
  v4 = a1;
  v5 = a3;
  v6 = *(void (__fastcall **)(int, int, int *, int))(*(_DWORD *)a1 + 44);
  v7 = *(_DWORD *)(*(_DWORD *)a2 + 108);
  v8 = *(_DWORD *)(*(_DWORD *)a2 + 112);
  android::Region::Region(&v11);
  v6(v4, v3, &v11, v5);
  return android::Region::~Region(&v11, v9);
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10B90: using guessed type int __fastcall android::Region::Region(_DWORD);

//----- (000189F0) --------------------------------------------------------
int __fastcall sub_189F0(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  void (__fastcall *v4)(int, int, char *, _DWORD); // r7@1
  int v5; // ST0C_4@1
  int v6; // ST10_4@1
  int v7; // r1@1
  char v9; // [sp+14h] [bp-2Ch]@1

  v2 = a2;
  v3 = a1;
  v4 = *(void (__fastcall **)(int, int, char *, _DWORD))(*(_DWORD *)a1 + 44);
  v5 = *(_DWORD *)(*(_DWORD *)a2 + 108);
  v6 = *(_DWORD *)(*(_DWORD *)a2 + 112);
  android::Region::Region(&v9);
  v4(v3, v2, &v9, 0);
  return android::Region::~Region(&v9, v7);
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10B90: using guessed type int __fastcall android::Region::Region(_DWORD);

//----- (00018A30) --------------------------------------------------------
ssize_t __fastcall sub_18A30(int a1, int *a2, int a3, int a4)
{
  int v4; // r10@1
  unsigned int v5; // r4@1
  int v6; // r9@1
  int v7; // r11@1
  int *v8; // r8@1
  int v9; // r0@1
  unsigned int v10; // r5@3
  int v11; // r7@9
  int v12; // r2@10
  int *v13; // r6@12
  int *v14; // r11@15
  char v15; // r8@19
  int v20; // r0@21
  int v24; // r1@23
  int v28; // r1@25
  int v30; // r1@27
  char v36; // r6@29
  int v37; // r0@35
  char *v38; // r6@36
  int v40; // r1@37
  char *v41; // r2@37
  int v42; // r3@38
  char *v43; // r0@38
  int v44; // r4@39
  int v45; // r1@43
  int v46; // r0@44
  ssize_t result; // r0@46
  int v48; // r4@49
  unsigned int v49; // r9@49
  unsigned int v50; // r6@50
  int v51; // r0@51
  int v52; // r1@52
  int v53; // r0@53
  int v54; // r1@53
  int v55; // r4@55
  int v56; // r1@56
  char v57[64]; // [sp+10h] [bp-338h]@36
  char v58; // [sp+50h] [bp-2F8h]@41
  int v59; // [sp+54h] [bp-2F4h]@41
  int v60; // [sp+58h] [bp-2F0h]@41
  int v61; // [sp+5Ch] [bp-2ECh]@41
  int v62; // [sp+60h] [bp-2E8h]@41
  int v63; // [sp+64h] [bp-2E4h]@41
  int v64; // [sp+68h] [bp-2E0h]@41
  int v65; // [sp+6Ch] [bp-2DCh]@41
  int v66; // [sp+70h] [bp-2D8h]@41
  int v67; // [sp+74h] [bp-2D4h]@41
  int v68; // [sp+78h] [bp-2D0h]@41
  int v69; // [sp+7Ch] [bp-2CCh]@41
  int v70; // [sp+80h] [bp-2C8h]@41
  int v71; // [sp+84h] [bp-2C4h]@41
  int v72; // [sp+88h] [bp-2C0h]@41
  int v73; // [sp+8Ch] [bp-2BCh]@41
  char v74; // [sp+90h] [bp-2B8h]@35
  int v75; // [sp+94h] [bp-2B4h]@35
  int v76; // [sp+98h] [bp-2B0h]@35
  int v77; // [sp+9Ch] [bp-2ACh]@35
  int v78; // [sp+A0h] [bp-2A8h]@35
  int v79; // [sp+A4h] [bp-2A4h]@35
  int v80; // [sp+A8h] [bp-2A0h]@35
  int v81; // [sp+ACh] [bp-29Ch]@35
  int v82; // [sp+B0h] [bp-298h]@35
  int v83; // [sp+B4h] [bp-294h]@35
  int v84; // [sp+B8h] [bp-290h]@35
  int v85; // [sp+BCh] [bp-28Ch]@35
  int v86; // [sp+C0h] [bp-288h]@35
  int v87; // [sp+C4h] [bp-284h]@35
  int v88; // [sp+C8h] [bp-280h]@35
  int v89; // [sp+CCh] [bp-27Ch]@35
  char v90; // [sp+D0h] [bp-278h]@34
  int v91; // [sp+D4h] [bp-274h]@34
  int v92; // [sp+D8h] [bp-270h]@34
  int v93; // [sp+DCh] [bp-26Ch]@34
  int v94; // [sp+E0h] [bp-268h]@34
  int v95; // [sp+E4h] [bp-264h]@34
  int v96; // [sp+E8h] [bp-260h]@34
  int v97; // [sp+ECh] [bp-25Ch]@34
  int v98; // [sp+F0h] [bp-258h]@34
  int v99; // [sp+F4h] [bp-254h]@34
  int v100; // [sp+F8h] [bp-250h]@34
  int v101; // [sp+FCh] [bp-24Ch]@34
  int v102; // [sp+100h] [bp-248h]@34
  int v103; // [sp+104h] [bp-244h]@34
  int v104; // [sp+108h] [bp-240h]@34
  int v105; // [sp+10Ch] [bp-23Ch]@34
  int v106; // [sp+110h] [bp-238h]@32
  int v107; // [sp+114h] [bp-234h]@32
  int v108; // [sp+118h] [bp-230h]@32
  int v109; // [sp+11Ch] [bp-22Ch]@32
  int v110; // [sp+120h] [bp-228h]@32
  int v111; // [sp+124h] [bp-224h]@32
  int v112; // [sp+128h] [bp-220h]@32
  int v113; // [sp+12Ch] [bp-21Ch]@32
  int v114; // [sp+130h] [bp-218h]@32
  int v115; // [sp+134h] [bp-214h]@32
  int v116; // [sp+138h] [bp-210h]@32
  int v117; // [sp+13Ch] [bp-20Ch]@32
  int v118; // [sp+140h] [bp-208h]@32
  int v119; // [sp+144h] [bp-204h]@32
  int v120; // [sp+148h] [bp-200h]@32
  int v121; // [sp+14Ch] [bp-1FCh]@32
  int v122; // [sp+150h] [bp-1F8h]@30
  int v123; // [sp+154h] [bp-1F4h]@30
  int v124; // [sp+158h] [bp-1F0h]@30
  int v125; // [sp+15Ch] [bp-1ECh]@30
  int v126; // [sp+160h] [bp-1E8h]@30
  int v127; // [sp+164h] [bp-1E4h]@30
  int v128; // [sp+168h] [bp-1E0h]@30
  int v129; // [sp+16Ch] [bp-1DCh]@30
  int v130; // [sp+170h] [bp-1D8h]@30
  int v131; // [sp+174h] [bp-1D4h]@30
  int v132; // [sp+178h] [bp-1D0h]@30
  int v133; // [sp+17Ch] [bp-1CCh]@30
  int v134; // [sp+180h] [bp-1C8h]@30
  int v135; // [sp+184h] [bp-1C4h]@30
  int v136; // [sp+188h] [bp-1C0h]@30
  int v137; // [sp+18Ch] [bp-1BCh]@30
  int v138; // [sp+190h] [bp-1B8h]@28
  int v139; // [sp+194h] [bp-1B4h]@30
  int v140; // [sp+198h] [bp-1B0h]@30
  int v141; // [sp+19Ch] [bp-1ACh]@30
  int v142; // [sp+1A0h] [bp-1A8h]@30
  int v143; // [sp+1A4h] [bp-1A4h]@29
  int v144; // [sp+1A8h] [bp-1A0h]@29
  int v145; // [sp+1ACh] [bp-19Ch]@30
  int v146; // [sp+1B0h] [bp-198h]@30
  int v147; // [sp+1B4h] [bp-194h]@30
  int v148; // [sp+1B8h] [bp-190h]@29
  int v149; // [sp+1BCh] [bp-18Ch]@29
  int v150; // [sp+1C0h] [bp-188h]@30
  int v151; // [sp+1C4h] [bp-184h]@30
  int v152; // [sp+1C8h] [bp-180h]@30
  int v153; // [sp+1CCh] [bp-17Ch]@29
  int v154; // [sp+1D0h] [bp-178h]@26
  int v155; // [sp+1D4h] [bp-174h]@27
  int v156; // [sp+1D8h] [bp-170h]@27
  int v157; // [sp+1DCh] [bp-16Ch]@27
  int v158; // [sp+1E0h] [bp-168h]@27
  int v159; // [sp+1E4h] [bp-164h]@27
  int v160; // [sp+1F4h] [bp-154h]@27
  int v161; // [sp+1F8h] [bp-150h]@27
  int v162; // [sp+1FCh] [bp-14Ch]@27
  int v163; // [sp+200h] [bp-148h]@27
  int v164; // [sp+204h] [bp-144h]@27
  int v165; // [sp+208h] [bp-140h]@27
  int v166; // [sp+20Ch] [bp-13Ch]@27
  int v167[5]; // [sp+210h] [bp-138h]@24
  int v168; // [sp+224h] [bp-124h]@25
  int v169; // [sp+228h] [bp-120h]@25
  int v170; // [sp+238h] [bp-110h]@25
  int v171; // [sp+23Ch] [bp-10Ch]@25
  int v172; // [sp+240h] [bp-108h]@25
  int v173; // [sp+244h] [bp-104h]@25
  int v174; // [sp+248h] [bp-100h]@25
  int v175; // [sp+24Ch] [bp-FCh]@25
  int v176[5]; // [sp+250h] [bp-F8h]@22
  int v177; // [sp+264h] [bp-E4h]@23
  int v178; // [sp+268h] [bp-E0h]@23
  int v179; // [sp+278h] [bp-D0h]@23
  int v180; // [sp+27Ch] [bp-CCh]@23
  int v181; // [sp+280h] [bp-C8h]@23
  int v182; // [sp+284h] [bp-C4h]@23
  int v183; // [sp+288h] [bp-C0h]@23
  int v184; // [sp+28Ch] [bp-BCh]@23
  float buf[3]; // [sp+290h] [bp-B8h]@20
  int v186; // [sp+294h] [bp-B4h]@41
  int v187; // [sp+298h] [bp-B0h]@41
  int v188; // [sp+29Ch] [bp-ACh]@41
  int v189; // [sp+2A0h] [bp-A8h]@41
  int v190; // [sp+2A4h] [bp-A4h]@41
  int v191; // [sp+2A8h] [bp-A0h]@41
  int v192; // [sp+2ACh] [bp-9Ch]@41
  int v193; // [sp+2B0h] [bp-98h]@41
  int v194; // [sp+2B4h] [bp-94h]@41
  int v195; // [sp+2B8h] [bp-90h]@41
  int v196; // [sp+2BCh] [bp-8Ch]@41
  int v197; // [sp+2C0h] [bp-88h]@41
  int v198; // [sp+2C4h] [bp-84h]@41
  int v199; // [sp+2C8h] [bp-80h]@41
  int v200; // [sp+2CCh] [bp-7Ch]@41
  char v201; // [sp+2D4h] [bp-74h]@53
  int v202; // [sp+2D8h] [bp-70h]@53
  int v203; // [sp+2DCh] [bp-6Ch]@53
  char v204; // [sp+2E8h] [bp-60h]@52
  char v205; // [sp+2FCh] [bp-4Ch]@49

  v4 = a1;
  v5 = 0xFFFFFF78;
  v6 = a4;
  v7 = a3;
  v8 = a2;
  v9 = v0;
  __dmb();
  if ( !(v9 & 1) )
    atrace_setup(v9, a2);
  v10 = 0xFFFFFF7C;
  if ( v0 & 2 )
    atrace_begin_body("onDraw");
  if ( *(_DWORD *)(v4 + 4576) )
  {
    if ( sub_274F0(*(_DWORD *)(v4 + 96)) )
      _android_log_print(5, "SurfaceFlinger", "onDraw: bindTextureImage failed (err=%d)");
    if ( (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 32))(v4) == 1 )
    {
      v11 = *(_DWORD *)(*(_DWORD *)(v4 + 92) + 200);
LABEL_10:
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 40))(v11);
LABEL_43:
      sub_18F7C(v4, v8, v12, v6);
      (*(void (__fastcall **)(int))(*(_DWORD *)v11 + 52))(v11);
      goto LABEL_44;
    }
    if ( (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 28))(v4) )
    {
      v13 = (int *)(v4 + 92);
      v11 = *(_DWORD *)(*(_DWORD *)(v4 + 92) + 200);
      if ( !*(_BYTE *)(*v8 + 132) )
        goto LABEL_10;
    }
    else
    {
      v13 = (int *)(v4 + 92);
      v11 = *(_DWORD *)(*(_DWORD *)(v4 + 92) + 200);
    }
    v14 = v8;
    if ( *(_BYTE *)(v4 + 0x1203)
      || *(_BYTE *)(v4 + 4612)
      || *(_BYTE *)(*v8 + 256)
      || (*(int (__fastcall **)(int))(*(_DWORD *)v4 + 40))(v4) )
    {
      v15 = 1;
    }
    else
    {
      v15 = sub_206AC(*v13);
    }
    android::GLConsumer::setFilteringEnabled(*(android::GLConsumer **)(v4 + 96), v15);
    android::GLConsumer::getTransformMatrix(*(android::GLConsumer **)(v4 + 96), buf);
    if ( sub_2754C(*(_DWORD *)(v4 + 96)) == 1 )
    {
      __asm { VMOV.I32        Q4, #0 }
      v20 = 0;
      do
      {
        _R2 = &v176[v20];
        v20 += 4;
        __asm { VST1.64         {D8-D9}, [R2] }
      }
      while ( v20 != 16 );
      _R2 = (unsigned int)v176 | 4;
      _R1 = &v178;
      v176[0] = -1082130432;
      __asm { VST1.32         {D8-D9}, [R2] }
      v177 = 1065353216;
      __asm { VST1.64         {D8-D9}, [R1] }
      v24 = 0;
      v179 = 1065353216;
      v180 = 0;
      v181 = 1065353216;
      v182 = 0;
      v183 = 0;
      v184 = 1065353216;
      do
      {
        _R3 = &v167[v24];
        v24 += 4;
        __asm { VST1.64         {D8-D9}, [R3] }
      }
      while ( v24 != 16 );
      _R1 = (unsigned int)v167 | 4;
      v167[0] = 1065353216;
      __asm { VST1.32         {D8-D9}, [R1] }
      _R1 = &v169;
      v168 = -1082130432;
      __asm { VST1.64         {D8-D9}, [R1] }
      v28 = 0;
      v170 = 1065353216;
      v171 = 0;
      v172 = 0;
      v173 = 1065353216;
      v174 = 0;
      v175 = 1065353216;
      do
      {
        _R3 = (char *)&v154 + v28 * 16;
        ++v28;
        __asm { VST1.32         {D8-D9}, [R3] }
      }
      while ( v28 != 4 );
      v30 = 0;
      v154 = 0;
      v155 = 1065353216;
      v156 = 0;
      v157 = 0;
      v158 = -1082130432;
      _R0 = &v159;
      __asm { VST1.32         {D8-D9}, [R0] }
      v160 = 0;
      v161 = 1065353216;
      v162 = 0;
      v163 = 1065353216;
      v164 = 0;
      v165 = 0;
      v166 = 1065353216;
      do
      {
        _R2 = (char *)&v138 + v30 * 16;
        ++v30;
        __asm { VST1.64         {D8-D9}, [R2] }
      }
      while ( v30 != 4 );
      _R2 = (unsigned int)&v138 | 4;
      v138 = 1065353216;
      __asm { VST1.32         {D8-D9}, [R2] }
      _R2 = &v144;
      _R0 = &v149;
      v143 = 1065353216;
      __asm { VST1.64         {D8-D9}, [R2] }
      v148 = 1065353216;
      __asm { VST1.32         {D8-D9}, [R0] }
      v153 = 1065353216;
      v36 = sub_13600(*v14);
      if ( v36 & 4 )
      {
        sub_1A978((int)&v122, (int)&v138, (int)&v154);
        v143 = v127;
        v142 = v126;
        v141 = v125;
        v140 = v124;
        v139 = v123;
        v138 = v122;
        v149 = v133;
        v148 = v132;
        v147 = v131;
        v146 = v130;
        v145 = v129;
        v144 = v128;
        v150 = v134;
        v151 = v135;
        v152 = v136;
        v153 = v137;
      }
      if ( v36 & 1 )
      {
        sub_1A978((int)&v106, (int)&v138, (int)v176);
        v143 = v111;
        v142 = v110;
        v141 = v109;
        v140 = v108;
        v139 = v107;
        v138 = v106;
        v149 = v117;
        v148 = v116;
        v147 = v115;
        v146 = v114;
        v145 = v113;
        v144 = v112;
        v150 = v118;
        v151 = v119;
        v152 = v120;
        v153 = v121;
      }
      if ( v36 & 2 )
      {
        sub_1A978((int)&v90, (int)&v138, (int)v167);
        v143 = v95;
        v142 = v94;
        v141 = v93;
        v138 = *(_DWORD *)&v90;
        v139 = v91;
        v140 = v92;
        v149 = v101;
        v148 = v100;
        v147 = v99;
        v144 = v96;
        v145 = v97;
        v146 = v98;
        v150 = v102;
        v151 = v103;
        v152 = v104;
        v153 = v105;
      }
      sub_1AA5C((int)&v74, (int)&v138);
      v143 = v79;
      v142 = v78;
      v141 = v77;
      v138 = *(_DWORD *)&v74;
      v139 = v75;
      v140 = v76;
      v149 = v85;
      v148 = v84;
      v147 = v83;
      v144 = v80;
      v145 = v81;
      v146 = v82;
      v150 = v86;
      v151 = v87;
      v152 = v88;
      v153 = v89;
      v37 = 0;
      do
      {
        v38 = v57;
        _R1 = &v57[v37];
        v37 += 16;
        __asm { VST1.32         {D8-D9}, [R1] }
      }
      while ( v37 != 64 );
      v40 = 0;
      v41 = (char *)buf;
      do
      {
        v42 = 0;
        v43 = v38;
        do
        {
          v44 = *(_DWORD *)&v41[4 * v42++];
          *(_DWORD *)v43 = v44;
          v43 += 4;
        }
        while ( v42 != 4 );
        ++v40;
        v38 += 16;
        v41 += 16;
      }
      while ( v40 != 4 );
      sub_1A978((int)&v58, (int)v57, (int)&v138);
      v190 = v63;
      v189 = v62;
      v188 = v61;
      buf[0] = *(float *)&v58;
      v186 = v59;
      v187 = v60;
      v196 = v69;
      v195 = v68;
      v194 = v67;
      v191 = v64;
      v192 = v65;
      v193 = v66;
      v197 = v70;
      v198 = v71;
      v199 = v72;
      v200 = v73;
    }
    sub_2F628(v4 + 4640, *(_DWORD *)(*(_DWORD *)(v4 + 4576) + 40), *(_DWORD *)(*(_DWORD *)(v4 + 4576) + 44));
    sub_2F624(v4 + 4640, v15);
    sub_2F584(v4 + 4640, (int)buf);
    (*(void (__fastcall **)(int, int))(*(_DWORD *)v11 + 36))(v11, v4 + 4640);
    v5 = 0xFFFFFF78;
    v8 = v14;
    v10 = 0xFFFFFF7C;
    goto LABEL_43;
  }
  android::Region::Region(&v205);
  v48 = *(_DWORD *)(v4 + 92);
  v49 = *(_DWORD *)(v48 + 256);
  if ( v49 )
  {
    v50 = 0;
    do
    {
      v51 = *(_DWORD *)(*(_DWORD *)(v48 + 252) + 4 * v50);
      if ( v51 == v4 )
        break;
      sub_280A4((int)&v204, *v8 + 216, v51 + 8);
      android::Region::orSelf(&v205, &v204);
      android::Region::~Region(&v204, v52);
      ++v50;
    }
    while ( v50 < v49 );
  }
  android::Region::subtract(&v201, v7, &v205);
  v53 = v202 + 16 * v203;
  v54 = *(_DWORD *)(v53 - 16);
  if ( *(_DWORD *)(v53 - 8) > v54 )
  {
    v54 = *(_DWORD *)(v53 - 12);
    if ( *(_DWORD *)(v53 - 4) > v54 )
    {
      v55 = *(_DWORD *)(*(_DWORD *)(v4 + 92) + 200);
      sub_190B4(v4, v8, v4 + 0x1208, 0);
      (*(void (__fastcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v55 + 44))(v55, 0, 0, 0);
      (*(void (__fastcall **)(int, int))(*(_DWORD *)v55 + 60))(v55, v4 + 0x1208);
    }
  }
  android::Region::~Region(&v201, v54);
  android::Region::~Region(&v205, v56);
  v5 = 0xFFFFFF78;
  v10 = 0xFFFFFF7C;
LABEL_44:
  v46 = **(_BYTE **)((char *)&GLOBAL_OFFSET_TABLE_ + v5);
  __dmb();
  if ( !(v46 & 1) )
    atrace_setup(v46, v45);
  result = **(_BYTE **)((char *)&GLOBAL_OFFSET_TABLE_ + v10);
  if ( result & 2 )
  {
    LOBYTE(buf[0]) = 69;
    result = write(v0, buf, 1u);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10B9C: using guessed type int __fastcall android::Region::subtract(_DWORD, _DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 10C2C: using guessed type int __fastcall android::Region::orSelf(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);
// 18A30: using guessed type int var_F8[5];
// 18A30: using guessed type int var_138[5];
// 18A30: using guessed type char var_338[64];

//----- (00018F7C) --------------------------------------------------------
void __fastcall sub_18F7C(int a1, int *a2, int a3, int a4)
{
  int v5; // r9@1
  int v10; // r0@1
  int v12; // t1@3
  int v13; // r6@3
  int v14; // r7@3
  void (__fastcall *v15)(int, int, int, _DWORD); // r5@3
  int v16; // r0@3
  float v17; // [sp+0h] [bp-58h]@1

  _R4 = a1;
  v5 = a1 + 4616;
  sub_190B4(a1, a2, a1 + 4616, a4);
  sub_1803C((android::Rect *)&v17, _R4, _R4 + 368);
  __asm
  {
    VLDR            S0, [R4,#0x108]
    VLDR            S2, [R4,#0x10C]
    VLDR            S4, [SP,#0x58+var_58]
    VLDR            S6, [SP,#0x58+var_54]
    VLDR            S8, [SP,#0x58+var_50]
    VLDR            S10, [SP,#0x58+var_4C]
    VCVT.F32.U32    S2, S2
    VCVT.F32.S32    S10, S10
    VCVT.F32.U32    S12, S0
    VCVT.F32.S32    S0, S8
    VCVT.F32.S32    S6, S6
    VCVT.F32.S32    S4, S4
    VDIV.F32        S20, S10, S2
  }
  v10 = *(_BYTE *)(_R4 + 4804);
  __asm
  {
    VDIV.F32        S16, S0, S12
    VDIV.F32        S0, S6, S2
    VDIV.F32        S18, S4, S12
  }
  if ( !_ZF )
  {
    _R0 = _R4 + 4808;
    __asm
    {
      VLDR            S2, [R0]
      VDIV.F32        S4, S20, S2
      VDIV.F32        S0, S0, S2
      VDIV.F32        S16, S16, S2
      VDIV.F32        S18, S18, S2
      VSUB.F32        S2, S20, S4
      VADD.F32        S0, S2, S0
    }
  }
  __asm
  {
    VMOV.F32        S22, #1.0
    VSUB.F32        S24, S22, S0
  }
  sub_2DDC8(v5);
  __asm { VSUB.F32        S0, S22, S20 }
  v12 = *(_DWORD *)(_R4 + 4632);
  __asm
  {
    VSTR            S18, [R0]
    VSTR            S24, [R0,#4]
    VSTR            S18, [R2]
    VSTR            S0, [R2,#4]
    VSTR            S16, [R2]
    VSTR            S0, [R2]
    VSTR            S16, [R0]
    VSTR            S24, [R0,#4]
  }
  v13 = *(_BYTE *)(_R4 + 108);
  v14 = *(_DWORD *)(*(_DWORD *)(_R4 + 92) + 200);
  v15 = *(void (__fastcall **)(int, int, int, _DWORD))(*(_DWORD *)v14 + 28);
  v16 = (*(int (__fastcall **)(int, int))(*(_DWORD *)_R4 + 24))(_R4, _R4 + 264);
  v15(v14, v13, v16, *(_BYTE *)(_R4 + 320));
  (*(void (__fastcall **)(int, int))(*(_DWORD *)v14 + 60))(v14, v5);
  (*(void (__fastcall **)(int))(*(_DWORD *)v14 + 56))(v14);
  if ( sub_206BC(*(_DWORD *)(_R4 + 92)) == 1 )
    j_j_j_glFinish();
}

//----- (000190B4) --------------------------------------------------------
int __fastcall sub_190B4(int a1, int *a2, int a3, int a4)
{
  int *v4; // r4@1
  int v5; // r6@1
  int v6; // r5@1
  int v7; // r1@1
  int v8; // r0@4
  signed int v9; // r7@4
  signed int v11; // r4@4
  int v12; // r2@11
  int v20; // r6@11
  int v21; // r7@11
  int v22; // r1@11
  int v24; // r1@11
  int v25; // r1@11
  int v26; // r1@11
  signed int v27; // r1@11
  int v29; // [sp+0h] [bp-80h]@11
  int v30; // [sp+4h] [bp-7Ch]@11
  int v31; // [sp+8h] [bp-78h]@11
  int v32; // [sp+Ch] [bp-74h]@11
  int v33; // [sp+10h] [bp-70h]@11
  int v34; // [sp+14h] [bp-6Ch]@11
  int v35; // [sp+18h] [bp-68h]@11
  int v36; // [sp+1Ch] [bp-64h]@11
  char v37; // [sp+20h] [bp-60h]@11
  int v38; // [sp+30h] [bp-50h]@8
  int v39; // [sp+34h] [bp-4Ch]@8
  int v40; // [sp+38h] [bp-48h]@8
  int v41; // [sp+3Ch] [bp-44h]@8
  char v42; // [sp+40h] [bp-40h]@2

  v4 = a2;
  v5 = a1;
  v6 = a3;
  v7 = *a2 + 216;
  if ( a4 == 1 )
    sub_279FC((int)&v42, v7);
  else
    sub_27B8C((int)&v42, v7, a1 + 328);
  v8 = sub_132F0(*v4);
  v9 = *(_DWORD *)(v5 + 264);
  _R8 = v8;
  v11 = *(_DWORD *)(v5 + 268);
  if ( v9 <= -1 )
  {
    _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", *(_DWORD *)(v5 + 264));
    v9 = 0x7FFFFFFF;
  }
  if ( v11 <= -1 )
  {
    _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v11);
    v11 = 0x7FFFFFFF;
  }
  v39 = 0;
  v38 = 0;
  v40 = v9;
  v41 = v11;
  if ( *(_DWORD *)(v5 + 280) > *(_DWORD *)(v5 + 272) && *(_DWORD *)(v5 + 284) > *(_DWORD *)(v5 + 276) )
    android::Rect::intersect((android::Rect *)&v38, (const android::Rect *)(v5 + 272), (android::Rect *)&v38);
  v12 = v5 + 368;
  _R4 = &v37;
  _R6 = &v38;
  sub_180E0((android::Rect *)&v37, (const android::Rect *)&v38, v12);
  __asm
  {
    VLD1.64         {D16-D17}, [R4]
    VST1.64         {D16-D17}, [R6]
  }
  v20 = sub_2DDC4(v6);
  v21 = *(_DWORD *)(v6 + 16);
  sub_27E8C((int)&v35, (int)&v42, v38, v39);
  v22 = v36;
  *(_DWORD *)v20 = v35;
  _R5 = v20 + 4;
  *(_DWORD *)(v20 + 4) = v22;
  sub_27E8C((int)&v33, (int)&v42, v38, v41);
  v24 = v34;
  *(_DWORD *)(v20 + 4 * v21) = v33;
  *(_DWORD *)(v20 + 4 * v21 + 4) = v24;
  sub_27E8C((int)&v31, (int)&v42, v40, v41);
  v25 = v32;
  *(_DWORD *)(v20 + 8 * v21) = v31;
  *(_DWORD *)(v20 + 8 * v21 + 4) = v25;
  sub_27E8C((int)&v29, (int)&v42, v40, v39);
  v26 = v30;
  __asm
  {
    VMOV            S0, R8
    VCVT.F32.U32    S0, S0
  }
  *(_DWORD *)(v20 + 12 * v21) = v29;
  *(_DWORD *)(v20 + 12 * v21 + 4) = v26;
  v27 = 4;
  do
  {
    __asm { VLDR            S2, [R5] }
    --v27;
    __asm
    {
      VSUB.F32        S2, S0, S2
      VSTR            S2, [R5]
    }
    _R5 += 4 * v21;
  }
  while ( !_ZF );
  return android::Nsd::postDraw((android::Nsd *)&v42);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00019224) --------------------------------------------------------
int __fastcall sub_19224(int a1, int *a2)
{
  int v2; // r4@1
  int v3; // r5@1

  v2 = *(_DWORD *)(*(_DWORD *)(a1 + 92) + 200);
  v3 = a1 + 4616;
  sub_190B4(a1, a2, a1 + 4616, 0);
  (*(void (__fastcall **)(int, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v2 + 44))(v2, 0, 0, 0);
  return (*(int (__fastcall **)(int, int))(*(_DWORD *)v2 + 60))(v2, v3);
}

//----- (00019260) --------------------------------------------------------
int __fastcall sub_19260(int a1)
{
  int v1; // r0@1
  int v2; // r4@1
  char *v3; // r0@2
  int result; // r0@2
  int v5; // [sp+Ch] [bp-Ch]@1

  v5 = 0;
  v1 = (*(int (**)(void))(**(_DWORD **)(a1 + 100) + 48))();
  v2 = v1;
  if ( v1 )
  {
    v3 = strerror(-v1);
    _android_log_print(
      5,
      "SurfaceFlinger",
      "%s: Error %s (%d) while querying window sticky transform.",
      "getProducerStickyTransform",
      v3,
      v2);
    result = 0;
  }
  else
  {
    result = v5;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000192B4) --------------------------------------------------------
int __fastcall sub_192B4(int result, char a2)
{
  *(_BYTE *)(result + 4611) = a2;
  return result;
}

//----- (000192BC) --------------------------------------------------------
signed int __fastcall sub_192BC(int a1, int a2)
{
  signed int result; // r0@3

  if ( *(_DWORD *)(a1 + 4576) )
  {
    if ( *(_BYTE *)(a2 + 57) & 2 )
      result = 1;
    else
      result = *(_BYTE *)(a1 + 4608) != 0;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (000192E4) --------------------------------------------------------
signed int __fastcall sub_192E4(int a1)
{
  int v1; // r1@1
  signed int result; // r0@1

  v1 = *(_BYTE *)(a1 + 321);
  result = 0;
  if ( v1 < 0 )
    result = 1;
  return result;
}

//----- (000192F4) --------------------------------------------------------
unsigned int __fastcall sub_192F4(int a1)
{
  int v1; // r0@1
  unsigned int result; // r0@2

  v1 = *(_DWORD *)(a1 + 4576);
  if ( v1 )
    result = (*(_BYTE *)(v1 + 57) & 0x40u) >> 6;
  else
    result = 0;
  return result;
}

//----- (00019310) --------------------------------------------------------
_BOOL4 __fastcall sub_19310(int a1)
{
  return *(_DWORD *)(a1 + 4604) != 0;
}

//----- (00019320) --------------------------------------------------------
int __fastcall sub_19320(int a1)
{
  return j_android::Region::operator=(a1 + 8);
}

//----- (00019328) --------------------------------------------------------
int __fastcall sub_19328(int a1)
{
  return j_android::Region::operator=(a1 + 28);
}

//----- (00019330) --------------------------------------------------------
int __fastcall sub_19330(int a1)
{
  return j_android::Region::operator=(a1 + 48);
}

//----- (00019338) --------------------------------------------------------
int __fastcall sub_19338(android::SortedVectorImpl *this, int a2)
{
  android::SortedVectorImpl *v2; // r5@1
  int v3; // r4@1
  int v4; // r0@1
  unsigned int v5; // r1@5
  unsigned int v7; // r2@5
  android::SortedVectorImpl *v8; // r11@5
  android::SortedVectorImpl *v9; // r8@8
  signed int v16; // r0@20
  int v17; // r6@24
  char v18; // r7@27
  signed int v19; // r0@27
  char v20; // r1@27
  int v21; // r1@32
  int v22; // r0@32
  char buf; // [sp+Bh] [bp-25h]@35

  v2 = this;
  v3 = a2;
  v4 = v0;
  __dmb();
  if ( !(v4 & 1) )
    atrace_setup(v4, a2);
  if ( v0 & 2 )
    atrace_begin_body("doTransaction");
  _R7 = (android::SortedVectorImpl *)((char *)v2 + 144);
  v5 = *((_DWORD *)v2 + 36);
  v7 = *((_DWORD *)v2 + 37);
  v8 = (android::SortedVectorImpl *)((char *)v2 + 120);
  if ( v5 != *((_DWORD *)v2 + 72) || v7 != *((_DWORD *)v2 + 73) )
    android::GLConsumer::setDefaultBufferSize(*((android::GLConsumer **)v2 + 24), v5, v7);
  v9 = (android::SortedVectorImpl *)((char *)v2 + 264);
  if ( !(*(_DWORD (__cdecl **)(android::SortedVectorImpl *, unsigned int, unsigned int))(*(_DWORD *)v2 + 40))(
          v2,
          *(_DWORD *)(*(_DWORD *)v2 + 40),
          v7)
    && (*(_DWORD *)_R7 != *(_DWORD *)v8 || *((_DWORD *)v2 + 37) != *((_DWORD *)v2 + 31))
    && !*((_DWORD *)v2 + 1145) )
  {
    v3 |= 1u;
  }
  if ( !(v3 & 1) )
  {
    __asm { VLD1.32         {D16-D17}, [R7]! }
    _R0 = (int)v2 + 120;
    __asm
    {
      VLDR            D18, [R7]
      VST1.32         {D16-D17}, [R0]!
      VSTR            D18, [R0]
    }
  }
  if ( *(_DWORD *)v9 != *(_DWORD *)v8
    || *((_DWORD *)v2 + 67) != *((_DWORD *)v2 + 31)
    || *((_DWORD *)v2 + 68) != *((_DWORD *)v2 + 32)
    || *((_DWORD *)v2 + 69) != *((_DWORD *)v2 + 33)
    || *((_DWORD *)v2 + 70) != *((_DWORD *)v2 + 34) )
  {
    v16 = 1;
  }
  else
  {
    v16 = 0;
    if ( *((_DWORD *)v2 + 71) != *((_DWORD *)v2 + 35) )
      v16 = 1;
  }
  v17 = v3 | 2;
  if ( v16 )
    v3 |= 2u;
  if ( *((_DWORD *)v2 + 45) != *((_DWORD *)v2 + 81) )
  {
    *((_BYTE *)v2 + 4) = 1;
    v18 = sub_28270((int)v2 + 184);
    v19 = sub_28188((int)v2 + 184);
    v20 = v18 & 0xFC;
    v3 = v17;
    if ( v18 & 0xFC )
      v20 = 1;
    if ( !v19 )
      v20 = 1;
    *((_BYTE *)v2 + 4612) = v20;
  }
  _aeabi_memcpy(v9, (char *)v2 + 120);
  android::Region::operator=((char *)v2 + 368);
  android::Region::operator=((char *)v2 + 388);
  v22 = v0;
  __dmb();
  if ( !(v22 & 1) )
    atrace_setup(v22, v21);
  if ( v0 & 2 )
  {
    buf = 69;
    write(v0, &buf, 1u);
  }
  return v3;
}
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);

//----- (00019518) --------------------------------------------------------
int __fastcall sub_19518(int a1, int a2)
{
  unsigned int *v2; // lr@1
  unsigned int v3; // r3@2

  v2 = (unsigned int *)(a1 + 408);
  __dmb();
  do
    v3 = __ldrex(v2);
  while ( __strex(v3 & ~a2, v2) );
  return v3 & a2;
}

//----- (00019540) --------------------------------------------------------
signed int __fastcall sub_19540(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v5; // r7@1
  signed int result; // r0@5
  unsigned int *v14; // r0@6
  unsigned int v15; // r1@7

  v3 = a1;
  _R5 = a3;
  v5 = a1 + 184;
  _R6 = a2;
  __asm
  {
    VMOV            S16, R5
    VMOV            S18, R6
  }
  _R0 = sub_27E30(a1 + 184);
  __asm
  {
    VMOV            S0, R0
    VCMPE.F32       S0, S18
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
    goto LABEL_11;
  _R0 = sub_27E34(v5);
  __asm
  {
    VMOV            S0, R0
    VCMPE.F32       S0, S16
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _ZF )
  {
    result = 0;
  }
  else
  {
LABEL_11:
    ++*(_DWORD *)(v3 + 180);
    sub_27E38(v5, _R6, _R5);
    v14 = (unsigned int *)(v3 + 408);
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 | 1, v14) );
    result = 1;
  }
  return result;
}

//----- (000195C0) --------------------------------------------------------
signed int __fastcall sub_195C0(int a1, int a2)
{
  signed int result; // r0@2
  unsigned int *v3; // r0@3
  unsigned int v4; // r1@4

  if ( *(_DWORD *)(a1 + 168) == a2 )
  {
    result = 0;
  }
  else
  {
    ++*(_DWORD *)(a1 + 180);
    *(_DWORD *)(a1 + 168) = a2;
    v3 = (unsigned int *)(a1 + 408);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 | 1, v3) );
    result = 1;
  }
  return result;
}

//----- (000195F8) --------------------------------------------------------
signed int __fastcall sub_195F8(int a1, int a2, int a3)
{
  signed int result; // r0@3
  unsigned int *v4; // r0@4
  unsigned int v5; // r1@5

  if ( *(_DWORD *)(a1 + 144) != a2 || *(_DWORD *)(a1 + 148) != a3 )
  {
    *(_DWORD *)(a1 + 144) = a2;
    *(_DWORD *)(a1 + 148) = a3;
    v4 = (unsigned int *)(a1 + 408);
    __dmb();
    do
      v5 = __ldrex(v4);
    while ( __strex(v5 | 1, v4) );
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00019630) --------------------------------------------------------
signed int __fastcall sub_19630(int a1, int a2)
{
  signed int result; // r0@2
  unsigned int *v3; // r0@3
  unsigned int v4; // r1@4

  if ( *(_BYTE *)(a1 + 176) == a2 )
  {
    result = 0;
  }
  else
  {
    ++*(_DWORD *)(a1 + 180);
    *(_BYTE *)(a1 + 176) = a2;
    v3 = (unsigned int *)(a1 + 408);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 | 1, v3) );
    result = 1;
  }
  return result;
}

//----- (00019668) --------------------------------------------------------
signed int __fastcall sub_19668(int a1, int _R1)
{
  int v2; // r4@1
  unsigned int *v7; // r0@1
  unsigned int v8; // r1@2
  int v10; // [sp+0h] [bp-10h]@0

  v2 = a1;
  ++*(_DWORD *)(a1 + 180);
  __asm
  {
    VLDR            S0, [R1,#0xC]
    VSTR            S0, [SP,#0x10+var_10]
  }
  sub_27E70(a1 + 184, *(_DWORD *)_R1, *(_DWORD *)(_R1 + 8), *(_DWORD *)(_R1 + 4), v10);
  v7 = (unsigned int *)(v2 + 408);
  __dmb();
  do
    v8 = __ldrex(v7);
  while ( __strex(v8 | 1, v7) );
  return 1;
}

//----- (000196AC) --------------------------------------------------------
signed int __fastcall sub_196AC(int a1)
{
  int v1; // r4@1
  unsigned int *v2; // r0@1
  unsigned int v3; // r1@2

  v1 = a1;
  android::Region::operator=(a1 + 244);
  v2 = (unsigned int *)(v1 + 408);
  __dmb();
  do
    v3 = __ldrex(v2);
  while ( __strex(v3 | 1, v2) );
  return 1;
}
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);

//----- (000196D4) --------------------------------------------------------
signed int __fastcall sub_196D4(int a1, int a2, int a3)
{
  int v3; // r3@1
  int v4; // r1@1
  signed int result; // r0@2
  unsigned int *v6; // r0@3
  unsigned int v7; // r1@4

  v3 = *(_BYTE *)(a1 + 177);
  v4 = a2 & a3 | v3 & ~a3;
  if ( v3 == v4 )
  {
    result = 0;
  }
  else
  {
    ++*(_DWORD *)(a1 + 180);
    *(_BYTE *)(a1 + 177) = v4;
    v6 = (unsigned int *)(a1 + 408);
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 | 1, v6) );
    result = 1;
  }
  return result;
}

//----- (00019714) --------------------------------------------------------
signed int __fastcall sub_19714(int a1, int _R1)
{
  signed int result; // r0@5
  unsigned int *v4; // r0@6
  unsigned int v10; // r1@7

  _R2 = a1 + 152;
  if ( *(_DWORD *)(a1 + 152) != *(_DWORD *)_R1
    || *(_DWORD *)(a1 + 156) != *(_DWORD *)(_R1 + 4)
    || *(_DWORD *)(a1 + 160) != *(_DWORD *)(_R1 + 8)
    || *(_DWORD *)(a1 + 164) != *(_DWORD *)(_R1 + 12) )
  {
    ++*(_DWORD *)(a1 + 180);
    v4 = (unsigned int *)(a1 + 408);
    __asm
    {
      VLD1.32         {D16-D17}, [R1]
      VST1.32         {D16-D17}, [R2]
    }
    __dmb();
    do
      v10 = __ldrex(v4);
    while ( __strex(v10 | 1, v4) );
    result = 1;
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (00019778) --------------------------------------------------------
signed int __fastcall sub_19778(int a1, int a2)
{
  signed int result; // r0@2
  unsigned int *v3; // r0@3
  unsigned int v4; // r1@4

  if ( *(_DWORD *)(a1 + 172) == a2 )
  {
    result = 0;
  }
  else
  {
    ++*(_DWORD *)(a1 + 180);
    *(_DWORD *)(a1 + 172) = a2;
    v3 = (unsigned int *)(a1 + 408);
    __dmb();
    do
      v4 = __ldrex(v3);
    while ( __strex(v4 | 1, v3) );
    result = 1;
  }
  return result;
}

//----- (000197B0) --------------------------------------------------------
int __fastcall sub_197B0(int a1, int _R1)
{
  int result; // r0@1

  __asm { VLD1.32         {D16-D17}, [R1] }
  result = a1 + 4788;
  __asm { VST1.32         {D16-D17}, [R0] }
  return result;
}

//----- (000197C0) --------------------------------------------------------
int __fastcall sub_197C0(int result, char a2)
{
  *(_BYTE *)(result + 4804) = a2;
  return result;
}

//----- (000197C8) --------------------------------------------------------
int __fastcall sub_197C8(int result, int a2)
{
  *(_DWORD *)(result + 4808) = a2;
  return result;
}

//----- (000197D0) --------------------------------------------------------
int __fastcall sub_197D0(int a1)
{
  int v1; // r4@1

  v1 = a1 + 68;
  if ( !*(_BYTE *)(*(_DWORD *)(a1 + 92) + 433) )
    sub_27554(*(_DWORD *)(a1 + 96));
  return j_android::Region::operator=(v1);
}

//----- (00019804) --------------------------------------------------------
int __fastcall sub_19804(int a1)
{
  return j_android::Region::clear(a1 + 68);
}

//----- (0001980C) --------------------------------------------------------
int __fastcall sub_1980C(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r7@1
  int v4; // r5@2
  int v5; // r1@4
  unsigned int v6; // r10@4
  int v7; // r9@4
  unsigned int v8; // r11@4
  int v9; // r12@4
  __int64 v10; // kr00_8@4
  __int64 v11; // r0@4
  signed int v12; // r1@12
  signed int v13; // r2@12
  signed int v14; // r0@18
  signed int v15; // r1@18
  int v17; // r5@11

  v2 = a1;
  v3 = a2;
  if ( *(_DWORD *)(a1 + 416) )
  {
    v4 = 1;
  }
  else
  {
    pthread_mutex_lock((pthread_mutex_t *)(a1 + 4748));
    v4 = 0;
    if ( *(_DWORD *)(v2 + 4764) )
    {
      v5 = *(_DWORD *)(v2 + 4760);
      v6 = *(_DWORD *)(v5 + 48);
      v7 = *(_DWORD *)(v5 + 52);
      v8 = sub_274A8(*(_DWORD *)(v2 + 96), v3);
      LODWORD(v11) = 1000000000;
      v9 = HIDWORD(v11);
      v10 = v11 + v8;
      LODWORD(v11) = 0;
      if ( v6 < (unsigned int)v10 )
        LODWORD(v11) = 1;
      if ( v7 < SHIDWORD(v10) )
        v4 = 1;
      if ( v7 == HIDWORD(v10) )
        v4 = v11;
      if ( !v4 )
      {
        v17 = HIDWORD(v11);
        _android_log_print(
          5,
          "SurfaceFlinger",
          "[%s] Timestamp %lld seems implausible relative to expectedPresent %lld",
          *(_DWORD *)(v2 + 112),
          v6,
          v7,
          v8,
          HIDWORD(v11));
        v9 = v17;
      }
      v12 = 0;
      v13 = 0;
      if ( v6 >= (unsigned int)v10 )
        v12 = 1;
      if ( v7 >= SHIDWORD(v10) )
        v13 = 1;
      if ( v7 == HIDWORD(v10) )
        v13 = v12;
      v14 = 0;
      v15 = 0;
      if ( v6 < v8 )
        v15 = 1;
      if ( v7 < v9 )
        v14 = 1;
      if ( v7 == v9 )
        v14 = v15;
      v4 = v14 | v13;
    }
    pthread_mutex_unlock((pthread_mutex_t *)(v2 + 4748));
  }
  return v4;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000198E0) --------------------------------------------------------
signed int __fastcall sub_198E0(int a1)
{
  signed int result; // r0@2

  *(_BYTE *)(a1 + 4609) = 0;
  if ( *(_DWORD *)(a1 + 412) <= 0 )
    result = *(_DWORD *)(a1 + 416) != 0;
  else
    result = 1;
  return result;
}

//----- (00019900) --------------------------------------------------------
unsigned int **__fastcall sub_19900(int a1)
{
  int v1; // r5@1
  unsigned int **result; // r0@1
  _BYTE *v3; // r8@2
  int v4; // r1@2
  __int64 v5; // r6@2
  int v6; // r4@2
  int v7; // r1@2
  int v8; // r1@2
  int v9; // r5@5
  __int64 v10; // r0@7
  int v11; // [sp+0h] [bp-20h]@5
  int v12; // [sp+4h] [bp-1Ch]@2

  v1 = a1;
  result = (unsigned int **)4610;
  if ( *(_BYTE *)(v1 + 4610) )
  {
    v3 = (_BYTE *)(v1 + 4610);
    LODWORD(v5) = android::GLConsumer::getTimestamp(*(android::GLConsumer **)(v1 + 96));
    HIDWORD(v5) = v4;
    v6 = v1 + 424;
    sub_168EC(v1 + 424, v4, v5, v4);
    v7 = *(_DWORD *)(v1 + 96);
    android::GLConsumer::getCurrentFence((android::GLConsumer *)&v12);
    if ( *(_DWORD *)(v12 + 4) == -1 )
      sub_1691C(v1 + 424, v8, v5);
    else
      sub_1694C(v1 + 424, (unsigned int **)&v12);
    v9 = *(_DWORD *)(*(_DWORD *)(v1 + 92) + 196);
    sub_294E4((unsigned int **)&v11, v9, 0);
    if ( *(_DWORD *)(v11 + 4) == -1 )
    {
      v10 = sub_29480(v9, 0);
      sub_169CC(v6, SHIDWORD(v10), v10);
    }
    else
    {
      sub_169FC(v6, (unsigned int **)&v11);
    }
    sub_16A60(v6);
    *v3 = 0;
    sub_17AF0((unsigned int **)&v11);
    result = sub_17AF0((unsigned int **)&v12);
  }
  return result;
}

//----- (000199A8) --------------------------------------------------------
signed int __fastcall sub_199A8(int a1)
{
  signed int result; // r0@4

  if ( *(_BYTE *)(a1 + 321) & 1 || !*(_BYTE *)(a1 + 320) )
  {
    result = 0;
  }
  else if ( *(_DWORD *)(a1 + 4576) )
  {
    result = 1;
  }
  else
  {
    result = *(_DWORD *)(a1 + 4580) != 0;
  }
  return result;
}

//----- (000199D8) --------------------------------------------------------
ssize_t __fastcall sub_199D8(int a1, int a2, _BYTE *a3)
{
  int v3; // r10@1
  unsigned int v4; // r9@1
  _BYTE *v5; // r6@1
  int v6; // r5@1
  int v7; // r0@1
  unsigned int v8; // r11@3
  unsigned int *v9; // r0@5
  unsigned int v10; // r2@6
  int v11; // r7@8
  unsigned int *v12; // r0@9
  unsigned int v13; // r1@10
  int v14; // r0@11
  int *v15; // r4@11
  unsigned int *v16; // r0@12
  unsigned int v17; // r1@13
  int v18; // r0@15
  unsigned int *v19; // r0@18
  unsigned int v20; // r1@19
  int v21; // r0@21
  unsigned int *v22; // r0@25
  unsigned int v23; // r1@26
  signed int v24; // r6@28
  signed int v25; // r7@28
  int v26; // r5@28
  int v27; // r1@32
  char *v28; // r0@32
  unsigned int *v29; // r10@37
  int v30; // r0@37
  int v31; // r4@39
  int v32; // r7@39
  int v33; // r3@39
  signed int v34; // r0@39
  unsigned int v35; // r4@42
  unsigned int v36; // r1@42
  unsigned int v37; // r9@42
  int v38; // r0@42
  int v39; // r11@42
  int v40; // r7@42
  unsigned int v41; // r0@44
  __int64 v42; // r6@45
  signed int v43; // r0@47
  int v44; // r1@50
  int v45; // r1@55
  int v47; // r7@55
  int v48; // r0@55
  int v55; // r0@66
  bool v56; // r0@68
  unsigned int v57; // r0@70
  unsigned int v58; // r1@75
  int v59; // r0@77
  char *v60; // r1@77
  signed int v61; // r4@84
  signed int v62; // r6@84
  int v63; // r1@89
  int v64; // r1@94
  int v65; // r1@94
  int v66; // r0@95
  int v67; // r2@95
  int v68; // ST04_4@95
  int v69; // ST08_4@95
  int v70; // ST14_4@95
  int v71; // ST18_4@95
  int v72; // r1@100
  int v73; // r0@100
  ssize_t result; // r0@102
  void *v75; // [sp+20h] [bp-F0h]@42
  _BYTE *v76; // [sp+24h] [bp-ECh]@42
  int v77; // [sp+28h] [bp-E8h]@35
  pthread_mutex_t *mutex; // [sp+30h] [bp-E0h]@39
  int v79; // [sp+34h] [bp-DCh]@35
  char v80; // [sp+38h] [bp-D8h]@94
  int v81; // [sp+4Ch] [bp-C4h]@89
  int v82; // [sp+50h] [bp-C0h]@92
  int v83; // [sp+54h] [bp-BCh]@91
  int v84; // [sp+58h] [bp-B8h]@92
  int v85; // [sp+5Ch] [bp-B4h]@88
  int v86; // [sp+60h] [bp-B0h]@88
  int v87; // [sp+64h] [bp-ACh]@88
  int v88; // [sp+68h] [bp-A8h]@88
  char v89; // [sp+6Ch] [bp-A4h]@88
  int v90; // [sp+70h] [bp-A0h]@95
  int v91; // [sp+74h] [bp-9Ch]@95
  int v92; // [sp+80h] [bp-90h]@55
  int v93; // [sp+84h] [bp-8Ch]@56
  int v94; // [sp+88h] [bp-88h]@57
  int v95; // [sp+8Ch] [bp-84h]@58
  android::RefBase *v96; // [sp+90h] [bp-80h]@50
  void *v97; // [sp+94h] [bp-7Ch]@37
  int v98; // [sp+98h] [bp-78h]@37
  int v99; // [sp+9Ch] [bp-74h]@37
  _BYTE *v100; // [sp+A0h] [bp-70h]@37
  char v101; // [sp+A4h] [bp-6Ch]@39
  android::RefBase *v102; // [sp+A8h] [bp-68h]@35
  char v103; // [sp+ACh] [bp-64h]@33
  int v104; // [sp+B0h] [bp-60h]@95
  int v105; // [sp+B4h] [bp-5Ch]@95
  int v106; // [sp+C0h] [bp-50h]@32
  int v107; // [sp+C4h] [bp-4Ch]@32
  int v108; // [sp+C8h] [bp-48h]@32
  int v109; // [sp+CCh] [bp-44h]@32
  char v110; // [sp+D0h] [bp-40h]@32
  int v111; // [sp+E4h] [bp-2Ch]@8
  char buf; // [sp+EBh] [bp-25h]@103

  v3 = a1;
  v4 = 0xFFFFFF78;
  v5 = a3;
  v6 = a2;
  v7 = v0;
  __dmb();
  if ( !(v7 & 1) )
    atrace_setup(v7, a2);
  v8 = 0xFFFFFF7C;
  if ( v0 & 2 )
    atrace_begin_body("latchBuffer");
  v9 = (unsigned int *)(v6 + 416);
  do
  {
    v10 = __ldrex(v9);
    if ( v10 != 1 )
    {
      __dmb();
      android::Region::Region(&v103);
      if ( *(_DWORD *)(v6 + 412) <= 0 || *(_BYTE *)(v6 + 4609) )
      {
LABEL_98:
        android::Region::Region(v3, &v103);
LABEL_99:
        v28 = &v103;
        goto LABEL_100;
      }
      v79 = v3;
      v77 = (*(int (__fastcall **)(int, int))(*(_DWORD *)v6 + 24))(v6, v6 + 264);
      v102 = *(android::RefBase **)(v6 + 4576);
      if ( v102 )
        android::RefBase::incStrong(v102, &v102);
      v29 = (unsigned int *)(v6 + 412);
      v30 = sub_19260(v6);
      v97 = &unk_3F850;
      v98 = v6 + 264;
      v99 = v6 + 120;
      v100 = v5;
      if ( v30 )
        LOBYTE(v30) = 1;
      v101 = v30;
      mutex = (pthread_mutex_t *)(v6 + 4748);
      pthread_mutex_lock((pthread_mutex_t *)(v6 + 4748));
      v31 = *(_DWORD *)(v6 + 4776);
      v32 = *(_DWORD *)(v6 + 4780);
      pthread_mutex_unlock((pthread_mutex_t *)(v6 + 4748));
      v34 = sub_272BC(*(_DWORD *)(v6 + 96), (_DWORD **)&v97, 0x1210 + *(_DWORD *)(v6 + 92), v33, v31, v32);
      if ( v34 == -2147483640 )
      {
        pthread_mutex_lock(mutex);
        android::VectorImpl::removeItemsAt((android::VectorImpl *)(0x1294 + v6), 0, 1u);
        __dmb();
        do
          v57 = __ldrex(v29);
        while ( __strex(v57 - 1, v29) );
        android::Region::Region(v79, &v103);
        pthread_mutex_unlock(mutex);
LABEL_79:
        if ( v102 )
          android::RefBase::decStrong(v102, &v102);
        goto LABEL_99;
      }
      if ( v34 )
      {
        if ( v34 == 3 )
        {
          sub_1E094(*(_DWORD *)(v6 + 92));
LABEL_77:
          v59 = v79;
          v60 = &v103;
LABEL_78:
          android::Region::Region(v59, v60);
          goto LABEL_79;
        }
      }
      else if ( !*(_BYTE *)(v6 + 4784) )
      {
        v76 = v5;
        v75 = (void *)(v6 + 4576);
        v35 = android::GLConsumer::getFrameNumber(*(android::GLConsumer **)(v6 + 96));
        v37 = v36;
        pthread_mutex_lock(mutex);
        v38 = *(_DWORD *)(v6 + 0x1298);
        v39 = *(_DWORD *)(v38 + 64);
        v40 = *(_DWORD *)(v38 + 68);
        android::VectorImpl::removeItemsAt((android::VectorImpl *)(v6 + 4756), 0, 1u);
        if ( v40 ^ v37 | v39 ^ v35 )
        {
          do
          {
            __dmb();
            do
              v41 = __ldrex(v29);
            while ( __strex(v41 - 1, v29) );
            v42 = *(_QWORD *)(*(_DWORD *)(v6 + 0x1298) + 64);
            android::VectorImpl::removeItemsAt((android::VectorImpl *)(v6 + 4756), 0, 1u);
          }
          while ( v42 != __PAIR__(v37, v35) );
        }
        pthread_mutex_unlock(mutex);
        v4 = 0xFFFFFF78;
        __dmb();
        v8 = 0xFFFFFF7C;
        do
          v43 = __ldrex(v29);
        while ( __strex(v43 - 1, v29) );
        if ( v43 >= 2 )
          sub_1E094(*(_DWORD *)(v6 + 92));
        v44 = *(_DWORD *)(v6 + 96);
        android::GLConsumer::getCurrentBuffer((android::GLConsumer *)&v96);
        sub_1A074(v75, &v96);
        v3 = v79;
        if ( v96 )
          android::RefBase::decStrong(v96, &v96);
        if ( *(_DWORD *)v75 )
        {
          *(_BYTE *)(0x1201 + v6) = 1;
          *(_BYTE *)(v6 + 4610) = 1;
          if ( !v102 )
            *v76 = 1;
          v45 = *(_DWORD *)(v6 + 96);
          _R4 = &v92;
          android::GLConsumer::getCurrentCrop((android::GLConsumer *)&v92);
          v47 = android::GLConsumer::getCurrentTransform(*(android::GLConsumer **)(v6 + 96));
          v48 = android::GLConsumer::getCurrentScalingMode(*(android::GLConsumer **)(v6 + 96));
          if ( v92 != *(_DWORD *)(v6 + 4584)
            || v93 != *(_DWORD *)(v6 + 4588)
            || v94 != *(_DWORD *)(v6 + 4592)
            || v95 != *(_DWORD *)(v6 + 4596)
            || v47 != *(_DWORD *)(v6 + 4600)
            || v48 != *(_DWORD *)(v6 + 4604) )
          {
            _R1 = v6 + 4584;
            __asm
            {
              VLD1.64         {D16-D17}, [R4]
              VST1.32         {D16-D17}, [R1]
            }
            *(_DWORD *)(v6 + 4600) = v47;
            *(_DWORD *)(v6 + 4604) = v48;
            *v76 = 1;
          }
          if ( v102
            && (*(_DWORD *)(*(_DWORD *)v75 + 40) != *((_DWORD *)v102 + 10)
             || *(_DWORD *)(*(_DWORD *)v75 + 44) != *((_DWORD *)v102 + 11)) )
          {
            *v76 = 1;
          }
          v55 = *(_DWORD *)(*(_DWORD *)v75 + 52);
          v56 = (v55 & 0xFFFFFF00) == 256 || (v55 | 4) != 5;
          *(_BYTE *)(v6 + 4608) = v56;
          if ( ((*(int (__fastcall **)(int, int))(*(_DWORD *)v6 + 24))(v6, v6 + 264) ^ v77) == 1 )
            *v76 = 1;
          v61 = *(_DWORD *)(v6 + 264);
          v62 = *(_DWORD *)(v6 + 268);
          if ( v61 <= -1 )
          {
            _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", *(_DWORD *)(v6 + 264));
            v61 = 0x7FFFFFFF;
          }
          if ( v62 <= -1 )
          {
            _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v62);
            v62 = 0x7FFFFFFF;
          }
          v86 = 0;
          v85 = 0;
          v87 = v61;
          v88 = v62;
          android::Region::Region(&v89);
          if ( ((int (__fastcall *)(_DWORD))sub_23680)(*(_DWORD *)(v6 + 92)) == 1 )
          {
            v63 = *(_DWORD *)(v6 + 96);
            android::GLConsumer::getCurRefreshDirty((android::GLConsumer *)&v81);
            if ( sub_23704(*(_DWORD *)(v6 + 92)) )
              _android_log_print(3, "SurfaceFlinger", "@@@latchBuffer-refreshDirty=[%d, %d, %d, %d]-w:%d, h:%d");
            if ( v83 > v81 && v84 > v82 )
              android::Region::set(&v89, &v81);
          }
          sub_280A4((int)&v80, v6 + 328, (int)&v89);
          android::Region::operator=(&v103);
          android::Region::~Region(&v80, v64);
          if ( sub_23704(*(_DWORD *)(v6 + 92)) == 1 )
          {
            v66 = v104 + 16 * v105;
            v67 = v90 + 16 * v91;
            v68 = *(_DWORD *)(v66 - 8) - *(_DWORD *)(v66 - 16);
            v69 = *(_DWORD *)(v66 - 4) - *(_DWORD *)(v66 - 12);
            v70 = *(_DWORD *)(v67 - 8) - *(_DWORD *)(v67 - 16);
            v71 = *(_DWORD *)(v67 - 4) - *(_DWORD *)(v67 - 12);
            _android_log_print(
              3,
              "SurfaceFlinger",
              "@@@latchBuffer-outDirty=[%d, %d, w:%d, h:%d], dirtyRegion=[%d, %d, w:%d, h:%d]");
          }
          android::Region::~Region(&v89, v65);
          if ( v102 )
            android::RefBase::decStrong(v102, &v102);
          goto LABEL_98;
        }
        v60 = &v103;
        v59 = v79;
        goto LABEL_78;
      }
      pthread_mutex_lock(mutex);
      android::VectorImpl::clear((android::VectorImpl *)(0x1294 + v6));
      __dmb();
      do
        v58 = __ldrex(v29);
      while ( __strex(0, v29) );
      pthread_mutex_unlock(mutex);
      *(_BYTE *)(v6 + 4784) = 1;
      goto LABEL_77;
    }
  }
  while ( __strex(0, v9) );
  __dmb();
  sub_2755C((int)&v111, *(_DWORD *)(v6 + 96));
  v11 = v111;
  if ( v111 )
  {
    v12 = (unsigned int *)(v111 + 4);
    __dmb();
    do
      v13 = __ldrex(v12);
    while ( __strex(v13 + 1, v12) );
  }
  v14 = *(_DWORD *)(v6 + 4580);
  v15 = (int *)(v6 + 4580);
  if ( v14 )
  {
    v16 = (unsigned int *)(v14 + 4);
    __dmb();
    do
      v17 = __ldrex(v16);
    while ( __strex(v17 - 1, v16) );
    if ( v17 == 1 )
    {
      v18 = (int)(v16 - 1);
      if ( v18 )
        (*(void (**)(void))(*(_DWORD *)v18 + 4))();
    }
  }
  *v15 = v11;
  if ( v111 )
  {
    v19 = (unsigned int *)(v111 + 4);
    __dmb();
    do
      v20 = __ldrex(v19);
    while ( __strex(v20 - 1, v19) );
    if ( v20 == 1 )
    {
      v21 = (int)(v19 - 1);
      if ( v21 )
        (*(void (**)(void))(*(_DWORD *)v21 + 4))();
    }
    v11 = *v15;
  }
  if ( v11 )
  {
    v22 = (unsigned int *)(v6 + 408);
    __dmb();
    do
      v23 = __ldrex(v22);
    while ( __strex(v23 | 1, v22) );
    sub_1CE3C(*(_DWORD *)(v6 + 92), 2);
  }
  *v5 = 1;
  v24 = *(_DWORD *)(v6 + 264);
  v25 = *(_DWORD *)(v6 + 268);
  v26 = v6 + 328;
  if ( v24 <= -1 )
  {
    _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", v24);
    v24 = 0x7FFFFFFF;
  }
  if ( v25 <= -1 )
  {
    _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v25);
    v25 = 0x7FFFFFFF;
  }
  v107 = 0;
  v106 = 0;
  v108 = v24;
  v109 = v25;
  android::Region::Region(&v110);
  sub_280A4(v3, v26, (int)&v110);
  v28 = &v110;
LABEL_100:
  android::Region::~Region(v28, v27);
  v73 = **(_BYTE **)((char *)&GLOBAL_OFFSET_TABLE_ + v4);
  __dmb();
  if ( !(v73 & 1) )
    atrace_setup(v73, v72);
  result = **(_BYTE **)((char *)&GLOBAL_OFFSET_TABLE_ + v8);
  if ( result & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10B90: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10BB4: using guessed type int __fastcall android::Region::Region(_DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 23680: using guessed type int sub_23680();
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001A074) --------------------------------------------------------
android::RefBase **__fastcall sub_1A074(void *a1, android::RefBase **a2)
{
  android::RefBase *v2; // r5@1
  android::RefBase **v3; // r4@1
  android::RefBase **result; // r0@5

  v2 = *a2;
  v3 = (android::RefBase **)a1;
  if ( *a2 )
    android::RefBase::incStrong(*a2, a1);
  if ( *v3 )
    android::RefBase::decStrong(*v3, v3);
  result = v3;
  *v3 = v2;
  return result;
}

//----- (0001A09C) --------------------------------------------------------
_DWORD *__fastcall sub_1A09C(int a1, android::String8 *a2, _BYTE *a3, int a4)
{
  _BYTE *v4; // r6@1
  int v5; // r5@1
  android::String8 *v6; // r10@1
  int v7; // r0@3
  int v8; // ST94_4@8
  int v9; // ST90_4@8
  int v10; // ST7C_4@8
  int v11; // ST74_4@8
  int v12; // ST8C_4@8
  int v13; // r4@8
  int v14; // r11@8
  int v15; // r9@8
  int v16; // r6@8
  int v25; // ST5C_4@8
  int v28; // r3@8
  int v29; // r1@8
  int v30; // r4@8
  int v31; // r7@8
  android::ConsumerBase *v32; // r0@12
  _DWORD *result; // r0@16
  int v34; // [sp+28h] [bp-B8h]@8
  int v35; // [sp+70h] [bp-70h]@8
  int v36; // [sp+78h] [bp-68h]@8
  int v37; // [sp+80h] [bp-60h]@8
  int v38; // [sp+84h] [bp-5Ch]@8
  int v39; // [sp+88h] [bp-58h]@8
  android::RefBase *v40; // [sp+98h] [bp-48h]@8
  _DWORD *v41; // [sp+9Ch] [bp-44h]@5

  v4 = a3;
  v5 = a1;
  v6 = a2;
  if ( *a3 )
    android::String8::appendFormat(a2, "\x1B[%dm", 32);
  v7 = (*(int (__fastcall **)(int, _DWORD, _BYTE *, int))(*(_DWORD *)v5 + 20))(
         v5,
         *(_DWORD *)(*(_DWORD *)v5 + 20),
         a3,
         a4);
  android::String8::appendFormat(v6, "+ %s %p (%s)\n", v7, v5, *(_DWORD *)(v5 + 112));
  if ( *v4 )
    android::String8::append(v6, "\x1B[0m");
  android::Region::dump(v5 + 368, v6, "transparentRegion", 0);
  android::Region::dump(v5 + 8, v6, "visibleRegion", 0);
  android::Region::dump(v5 + 68, v6, "surfaceDamageRegion", 0);
  v41 = 0;
  if ( *(_DWORD *)(v5 + 4736)
    && android::RefBase::weakref_type::attemptIncStrong(*(android::RefBase::weakref_type **)(v5 + 4740), &v41) == 1 )
  {
    v41 = *(_DWORD **)(v5 + 4736);
  }
  v8 = *(_DWORD *)(v5 + 312);
  v9 = *(_DWORD *)(v5 + 316);
  v10 = sub_27E30(v5 + 328);
  v11 = sub_27E34(v5 + 328);
  v12 = *(_DWORD *)(v5 + 264);
  v39 = *(_DWORD *)(v5 + 268);
  v38 = *(_DWORD *)(v5 + 272);
  v37 = *(_DWORD *)(v5 + 276);
  v36 = *(_DWORD *)(v5 + 280);
  v35 = *(_DWORD *)(v5 + 284);
  v13 = (*(int (__fastcall **)(int, int))(*(_DWORD *)v5 + 24))(v5, v5 + 264);
  v14 = *(_BYTE *)(v5 + 4);
  v15 = *(_BYTE *)(v5 + 320);
  v16 = *(_BYTE *)(v5 + 321);
  _R0 = sub_27CC4(v5 + 328, 0);
  __asm { VLDR            S16, [R0] }
  _R0 = sub_27CC4(v5 + 328, 0);
  __asm { VLDR            S18, [R0,#4] }
  _R0 = sub_27CC4(v5 + 328, 1);
  __asm { VLDR            S20, [R0] }
  _R0 = sub_27CC4(v5 + 328, 1);
  __asm { VLDR            S0, [R0,#4] }
  v25 = *(_DWORD *)(v5 + 4788);
  __asm { VCVT.F64.F32    D16, S20 }
  v34 = v13;
  _R0 = v10;
  __asm
  {
    VCVT.F64.F32    D17, S18
    VCVT.F64.F32    D18, S16
    VMOV            S2, R0
  }
  _R0 = v11;
  __asm
  {
    VCVT.F64.F32    D20, S2
    VMOV            S4, R0
    VCVT.F64.F32    D19, S4
    VCVT.F64.F32    D21, S0
    VSTR            D16, [SP,#0xE0+var_98]
    VSTR            D17, [SP,#0xE0+var_A0]
    VSTR            D18, [SP,#0xE0+var_A8]
    VSTR            D19, [SP,#0xE0+var_D8]
    VSTR            D20, [SP,#0xE0+var_E0]
    VSTR            D21, [SP,#0xE0+var_90]
  }
  android::String8::appendFormat(
    v6,
    "      layerStack=%4d, z=%9d, pos=(%g,%g), size=(%4d,%4d), crop=(%4d,%4d,%4d,%4d), isOpaque=%1d, invalidate=%1d, alph"
    "a=0x%02x, flags=0x%08x, tr=[%.2f, %.2f][%.2f, %.2f]\n"
    "      client=%p\n"
    ",  sdr=(%4d,%4d,%4d,%4d)",
    v9,
    v8);
  v28 = 0;
  v29 = 0;
  v30 = 0;
  v31 = 0;
  v40 = *(android::RefBase **)(v5 + 4576);
  if ( v40 )
  {
    android::RefBase::incStrong(v40, &v40);
    if ( v40 )
    {
      v28 = *((_DWORD *)v40 + 10);
      v29 = *((_DWORD *)v40 + 11);
      v30 = *((_DWORD *)v40 + 12);
      v31 = *((_DWORD *)v40 + 13);
    }
    else
    {
      v28 = 0;
      v29 = 0;
      v30 = 0;
      v31 = 0;
    }
  }
  android::String8::appendFormat(
    v6,
    "      format=%2d, activeBuffer=[%4ux%4u:%4u,%3X], queued-frames=%d, mRefreshPending=%d\n",
    *(_DWORD *)(v5 + 116),
    v28,
    v29,
    v30,
    v31,
    *(_DWORD *)(v5 + 412),
    *(_BYTE *)(v5 + 4609),
    v39,
    v38,
    v37,
    v36,
    v35,
    v34,
    v14,
    v15,
    v16);
  v32 = *(android::ConsumerBase **)(v5 + 96);
  if ( v32 )
    android::ConsumerBase::dump(v32, v6, "            ");
  if ( v40 )
    android::RefBase::decStrong(v40, &v40);
  result = v41;
  if ( v41 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v41 + *(_DWORD *)(*v41 - 12)), &v41);
  return result;
}
// 10CB0: using guessed type int __fastcall android::Region::dump(_DWORD, _DWORD, _DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001A344) --------------------------------------------------------
int __fastcall sub_1A344(int a1, android::String8 *a2)
{
  return sub_16EA8(a1 + 424, a2);
}

//----- (0001A34C) --------------------------------------------------------
int __fastcall sub_1A34C(int a1)
{
  return sub_16D00(a1 + 424);
}

//----- (0001A354) --------------------------------------------------------
int __fastcall sub_1A354(int a1)
{
  return sub_16E4C(a1 + 424, (_DWORD *)(a1 + 112));
}

//----- (0001A364) --------------------------------------------------------
int __fastcall sub_1A364(int a1, int a2)
{
  return sub_16DA0(a1 + 424, a2);
}

//----- (0001A36C) --------------------------------------------------------
void *__fastcall sub_1A36C(void *a1, char **a2, char **a3)
{
  void *v3; // r4@1
  char *v4; // r0@1
  char **v5; // r5@1
  bool v6; // zf@1
  char *v7; // r0@3

  v3 = a1;
  v4 = *a2;
  v5 = a3;
  v6 = *a2 == 0;
  *(_DWORD *)v3 = *a2;
  if ( !v6 )
    android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v3);
  v7 = *v5;
  v6 = *v5 == 0;
  *((_DWORD *)v3 + 1) = *v5;
  if ( !v6 )
    *((_DWORD *)v3 + 2) = android::RefBase::createWeak(
                            (android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)],
                            (char *)v3 + 4);
  return v3;
}

//----- (0001A3AC) --------------------------------------------------------
int *__fastcall sub_1A3AC(int *a1)
{
  int *v1; // r4@1
  const void *v2; // r5@1

  v1 = a1;
  v2 = a1 + 1;
  sub_22378(*a1, (int)(a1 + 1));
  if ( *(_DWORD *)v2 )
    android::RefBase::weakref_type::decWeak((android::RefBase::weakref_type *)v1[2], v2);
  if ( *v1 )
    android::RefBase::decStrong((android::RefBase *)(*v1 + *(_DWORD *)(*(_DWORD *)*v1 - 12)), v1);
  return v1;
}

//----- (0001A40C) --------------------------------------------------------
int __fastcall sub_1A40C(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (0001A41C) --------------------------------------------------------
void __fastcall sub_1A41C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (0001A45C) --------------------------------------------------------
int __fastcall sub_1A45C(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (0001A46C) --------------------------------------------------------
void __fastcall sub_1A46C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (0001A488) --------------------------------------------------------
const char *sub_1A488()
{
  return "Layer";
}

//----- (0001A49C) --------------------------------------------------------
int __fastcall sub_1A49C(android::SortedVectorImpl *this, int a2)
{
  android::SortedVectorImpl *v2; // r4@1
  bool v3; // zf@1
  android::RefBase::weakref_type *v4; // r0@1
  int v5; // r4@3
  unsigned int *v6; // r0@3
  unsigned int v7; // r1@5
  void *v8; // r0@7
  int v10; // [sp+4h] [bp-14h]@1
  android::RefBase::weakref_type *v11; // [sp+8h] [bp-10h]@1
  unsigned int *v12; // [sp+Ch] [bp-Ch]@3

  v2 = this;
  v3 = *(_DWORD *)a2 == 0;
  v10 = *(_DWORD *)a2;
  v4 = *(android::RefBase::weakref_type **)(a2 + 4);
  v11 = *(android::RefBase::weakref_type **)(a2 + 4);
  if ( !v3 )
    android::RefBase::weakref_type::incWeak(v4, &v10);
  v12 = 0;
  v5 = android::SortedVectorImpl::indexOf(v2, &v10);
  v6 = v12;
  if ( v12 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 - 1, v6) );
    if ( v7 == 1 )
    {
      v8 = (void *)sub_131F4((int)v6);
      operator delete(v8);
    }
  }
  if ( v10 )
    android::RefBase::weakref_type::decWeak(v11, &v10);
  return v5;
}

//----- (0001A978) --------------------------------------------------------
int __fastcall sub_1A978(int a1, int a2, int a3)
{
  int v7; // r6@1
  int v8; // r8@1
  int v9; // r5@1
  int v10; // r0@1
  int v12; // r4@3
  int result; // r0@4
  int v16; // [sp+0h] [bp-28h]@3

  __asm { VMOV.I32        Q8, #0 }
  v7 = a1;
  v8 = a3;
  v9 = a2;
  v10 = 0;
  do
  {
    _R1 = v7 + v10;
    v10 += 16;
    __asm { VST1.32         {D16-D17}, [R1] }
  }
  while ( v10 != 64 );
  v12 = 0;
  _R7 = &v16;
  do
  {
    sub_1A9BC((int)&v16, v9, v8 + v12);
    result = v7 + v12;
    v12 += 16;
    __asm
    {
      VLD1.64         {D16-D17}, [R7]
      VST1.32         {D16-D17}, [R0]
    }
  }
  while ( !_ZF );
  return result;
}

//----- (0001A9BC) --------------------------------------------------------
int __fastcall sub_1A9BC(int result, int a2, int a3)
{
  int v7; // r12@1
  int v8; // lr@1
  signed int v14; // r5@2
  int v17; // r5@5
  int v20; // [sp+0h] [bp-34h]@1
  float v21[6]; // [sp+10h] [bp-24h]@1

  __asm { VMOV.I32        Q8, #0 }
  v7 = a2 + 4;
  v8 = 0;
  _R3 = v21;
  _R8 = &v20;
  __asm { VST1.32         {D16-D17}, [R0] }
  do
  {
    _R5 = *(_DWORD *)(a3 + 4 * v8);
    _R6 = v7;
    __asm
    {
      VDUP.32         Q8, R5
      VST1.64         {D16-D17}, [R3@128]
      VMOV            S0, R5
    }
    _R5 = a2 + 16 * v8;
    __asm { VLDR            S2, [R5] }
    v14 = 1;
    __asm
    {
      VMUL.F32        S0, S2, S0
      VSTR            S0, [SP,#0x34+var_24]
    }
    do
    {
      _R4 = &v21[v14];
      __asm
      {
        VLDR            S0, [R6]
        VLDR            S2, [R4]
      }
      ++v14;
      __asm { VMUL.F32        S0, S0, S2 }
      _R6 += 4;
      __asm { VSTR            S0, [R4] }
    }
    while ( !_ZF );
    __asm { VLD1.64         {D16-D17}, [R3@128] }
    v17 = 0;
    __asm { VST1.64         {D16-D17}, [R8] }
    do
    {
      _R4 = result + v17;
      _R6 = (char *)&v20 + v17;
      __asm { VLDR            S0, [R4] }
      v17 += 4;
      __asm
      {
        VLDR            S2, [R6]
        VADD.F32        S0, S2, S0
        VSTR            S0, [R4]
      }
    }
    while ( !_ZF );
    ++v8;
    v7 += 16;
  }
  while ( v8 != 4 );
  return result;
}
// 1A9BC: using guessed type float var_24[6];

//----- (0001AA5C) --------------------------------------------------------
int __fastcall sub_1AA5C(int result, int a2)
{
  int v2; // r3@1
  int v3; // r7@1
  int v4; // r6@1
  int v5; // r5@1
  int v6; // r4@1
  int v7; // r3@1
  int v8; // r7@1
  int v9; // r6@1
  int v10; // r5@1
  int v11; // r4@1
  int v12; // r2@1
  int v13; // r3@1
  int v14; // r7@1
  int v19; // r1@1
  int *v23; // r12@3
  int v25; // r8@3
  int v26; // r9@3
  int v27; // lr@4
  int v28; // r4@5
  int v29; // r3@5
  int *v32; // r4@10
  int v33; // r2@10
  int v34; // r3@10
  int v35; // r5@10
  int v36; // r7@11
  int v37; // r7@11
  char *v38; // r4@12
  int v39; // r5@12
  int v41; // r2@12
  int v44; // r2@15
  int v45; // r7@15
  int v46; // r6@17
  int v48; // r3@17
  int v53; // [sp+0h] [bp-60h]@1
  int v54; // [sp+4h] [bp-5Ch]@1
  int v55; // [sp+8h] [bp-58h]@1
  int v56; // [sp+Ch] [bp-54h]@1
  int v57; // [sp+10h] [bp-50h]@1
  int v58; // [sp+14h] [bp-4Ch]@1
  int v59; // [sp+18h] [bp-48h]@1
  int v60; // [sp+1Ch] [bp-44h]@1
  int v61; // [sp+20h] [bp-40h]@1
  int v62; // [sp+24h] [bp-3Ch]@1
  int v63; // [sp+28h] [bp-38h]@1
  int v64; // [sp+2Ch] [bp-34h]@1
  int v65; // [sp+30h] [bp-30h]@1
  int v66; // [sp+34h] [bp-2Ch]@1
  int v67; // [sp+38h] [bp-28h]@1
  int v68; // [sp+3Ch] [bp-24h]@1

  v2 = *(_DWORD *)(a2 + 16);
  v3 = *(_DWORD *)a2;
  v4 = *(_DWORD *)(a2 + 4);
  v5 = *(_DWORD *)(a2 + 8);
  v6 = *(_DWORD *)(a2 + 12);
  v58 = *(_DWORD *)(a2 + 20);
  v57 = v2;
  v56 = v6;
  v55 = v5;
  v54 = v4;
  v53 = v3;
  v7 = *(_DWORD *)(a2 + 40);
  v8 = *(_DWORD *)(a2 + 24);
  v9 = *(_DWORD *)(a2 + 28);
  v10 = *(_DWORD *)(a2 + 32);
  v11 = *(_DWORD *)(a2 + 36);
  v64 = *(_DWORD *)(a2 + 44);
  v63 = v7;
  v62 = v11;
  v61 = v10;
  v60 = v9;
  v59 = v8;
  v12 = *(_DWORD *)(a2 + 48);
  v13 = *(_DWORD *)(a2 + 52);
  v14 = *(_DWORD *)(a2 + 56);
  __asm { VMOV.I32        Q8, #0 }
  v68 = *(_DWORD *)(a2 + 60);
  v19 = 0;
  v65 = v12;
  v66 = v13;
  v67 = v14;
  do
  {
    _R2 = result + v19;
    v19 += 16;
    __asm { VST1.32         {D16-D17}, [R2] }
  }
  while ( v19 != 64 );
  _R2 = result + 4;
  *(_DWORD *)result = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 24;
  *(_DWORD *)(result + 20) = 1065353216;
  v23 = &v57;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 44;
  *(_DWORD *)(result + 40) = 1065353216;
  v25 = 0;
  __asm { VST1.32         {D16-D17}, [R2] }
  v26 = 0;
  *(_DWORD *)(result + 60) = 1065353216;
  __asm { VMOV.F32        S0, #1.0 }
  do
  {
    v27 = v26 + 1;
    if ( (unsigned int)(v26 + 1) <= 3 )
    {
      v28 = v26 + 1;
      v29 = v26;
      _R2 = &v53 + 4 * v26 + v26;
      __asm { VLDR            S2, [R2] }
      _R2 = v23;
      __asm { VABS.F32        S2, S2 }
      do
      {
        __asm { VLDR            S4, [R2] }
        _R2 += 4;
        __asm
        {
          VABS.F32        S4, S4
          VCMPE.F32       S4, S2
          VMRS            APSR_nzcv, FPSCR
        }
        if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
          v29 = v28;
        ++v28;
      }
      while ( v28 != 4 );
      if ( v29 != v26 )
      {
        v32 = &v53 + 4 * v29;
        v33 = result + 16 * v29;
        v34 = 0;
        v35 = v25;
        do
        {
          v36 = *(int *)((char *)&v53 + v35);
          *(int *)((char *)&v53 + v35) = v32[v34];
          v32[v34] = v36;
          v37 = *(_DWORD *)(result + v35);
          *(_DWORD *)(result + v35) = *(_DWORD *)(v33 + 4 * v34);
          v35 += 4;
          *(_DWORD *)(v33 + 4 * v34++) = v37;
        }
        while ( v34 != 4 );
      }
    }
    v38 = (char *)&v53 + v25;
    v39 = result + v25;
    _R2 = &v53 + 4 * v26 + v26;
    __asm { VLDR            S2, [R2] }
    v41 = 0;
    __asm { VDIV.F32        S2, S0, S2 }
    do
    {
      _R3 = (int)&v38[v41];
      __asm
      {
        VLDR            S4, [R3]
        VMUL.F32        S4, S2, S4
        VSTR            S4, [R3]
      }
      _R3 = v39 + v41;
      __asm { VLDR            S4, [R3] }
      v41 += 4;
      __asm
      {
        VMUL.F32        S4, S2, S4
        VSTR            S4, [R3]
      }
    }
    while ( !_ZF );
    v44 = 0;
    v45 = 0;
    do
    {
      if ( v45 != v26 )
      {
        v46 = v44;
        _R3 = &v53 + 4 * v45 + v26;
        __asm { VLDR            S2, [R3] }
        v48 = 0;
        do
        {
          _R1 = (int)&v38[v48];
          __asm { VLDR            S4, [R1] }
          _R1 = (char *)&v53 + v46;
          __asm
          {
            VLDR            S6, [R1]
            VMLS.F32        S6, S2, S4
            VSTR            S6, [R1]
          }
          _R1 = v39 + v48;
          __asm { VLDR            S4, [R1] }
          _R1 = result + v46;
          __asm { VLDR            S6, [R1] }
          v48 += 4;
          __asm { VMLS.F32        S6, S2, S4 }
          v46 += 4;
          __asm { VSTR            S6, [R1] }
        }
        while ( !_ZF );
      }
      ++v45;
      v44 += 16;
    }
    while ( v45 != 4 );
    v25 += 16;
    v23 += 5;
    ++v26;
  }
  while ( v27 != 4 );
  return result;
}

//----- (0001AC00) --------------------------------------------------------
int __fastcall sub_1AC00(int a1, int a2, int a3, android::String8 *a4, int a5, int a6, unsigned int a7)
{
  int v7; // r4@1
  android::String8 *v8; // r5@1
  int v9; // r6@1
  int v10; // r7@1

  v7 = a1;
  v8 = a4;
  v9 = a3;
  v10 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 4820));
  sub_16F38((android::String8 *)v7, (int)&off_3F894, v10, v9, v8, a5, a6, a7);
  *(_DWORD *)v7 = &off_4124C;
  *(_DWORD *)(v7 + 4820) = &off_412A4;
  return v7;
}
// 3F894: using guessed type void **off_3F894;
// 4124C: using guessed type void *off_4124C;
// 412A4: using guessed type void *off_412A4;

//----- (0001AC60) --------------------------------------------------------
int __fastcall sub_1AC60(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1780C(a1, (int)&off_3F894);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
  return v1;
}
// 3F894: using guessed type void **;

//----- (0001AC8C) --------------------------------------------------------
int __fastcall sub_1AC8C(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_1780C((int)a1 + *(_DWORD *)(*a1 - 12), (int)&off_3F894);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
}
// 3F894: using guessed type void **off_3F894;

//----- (0001ACBC) --------------------------------------------------------
void __fastcall sub_1ACBC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1780C(a1, (int)&off_3F894);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
  j_operator delete((void *)v1);
}
// 3F894: using guessed type void **off_3F894;

//----- (0001ACEC) --------------------------------------------------------
void __fastcall sub_1ACEC(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_1780C((int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)], (int)&off_3F894);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4820));
  j_operator delete((void *)v1);
}
// 3F894: using guessed type void **off_3F894;

//----- (0001AD24) --------------------------------------------------------
void **__fastcall sub_1AD24(int a1, int *a2, int a3, int a4)
{
  int v4; // r5@1
  int v5; // r6@1
  void **result; // r0@1
  int *v7; // r7@1
  int v8; // r6@2
  char v9; // [sp+8h] [bp-30h]@2

  v4 = a1;
  v5 = a4;
  result = (void **)*(_BYTE *)(a1 + 320);
  v7 = a2;
  if ( result )
  {
    sub_2DD0C((int)&v9, 6, 4u, 2, 0);
    sub_190B4(v4, v7, (int)&v9, v5);
    v8 = *(_DWORD *)(*(_DWORD *)(v4 + 92) + 200);
    (*(void (__fastcall **)(_DWORD, _DWORD))(*(_DWORD *)v8 + 32))(
      *(_DWORD *)(*(_DWORD *)(v4 + 92) + 200),
      *(_BYTE *)(v4 + 320));
    (*(void (__fastcall **)(int, char *))(*(_DWORD *)v8 + 60))(v8, &v9);
    (*(void (__fastcall **)(int))(*(_DWORD *)v8 + 56))(v8);
    result = sub_2DDB0((void **)&v9);
  }
  return result;
}

//----- (0001AD84) --------------------------------------------------------
int __fastcall sub_1AD84(int a1)
{
  char v1; // r2@1

  v1 = 0;
  if ( !(*(_BYTE *)(a1 + 321) & 1) )
    v1 = 1;
  return (unsigned __int8)v1 & (*(_BYTE *)(a1 + 320) != 0);
}

//----- (0001ADA4) --------------------------------------------------------
int __fastcall sub_1ADA4(int a1, int *a2, android::RefBase::weakref_type *a3)
{
  android::RefBase::weakref_type *v3; // r4@1
  int *v4; // r5@1
  int v5; // r6@1
  int result; // r0@1

  v3 = a3;
  v4 = a2;
  v5 = a1;
  sub_18458(a1, a2, a3);
  (*(void (__fastcall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 24))(v3, 0);
  (*(void (__fastcall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 36))(v3, 1);
  (*(void (__fastcall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 72))(v3, *(_BYTE *)(v5 + 320));
  result = (*(int (__fastcall **)(_DWORD))(*(_DWORD *)v5 + 28))(v5);
  if ( result == 1 )
  {
    result = *(_BYTE *)(*v4 + 132);
    if ( !*(_BYTE *)(*v4 + 132) )
      result = (*(int (__fastcall **)(_DWORD, _DWORD))(*(_DWORD *)v3 + 24))(v3, 1);
  }
  return result;
}

//----- (0001ADF4) --------------------------------------------------------
int __fastcall sub_1ADF4(int a1, int *a2, int a3)
{
  int v3; // r6@1
  int v4; // r4@1
  int v12; // r1@1
  int v13; // r1@1
  char v15; // [sp+0h] [bp-48h]@1
  char v16; // [sp+10h] [bp-38h]@1
  char v17; // [sp+24h] [bp-24h]@1

  v3 = *a2;
  v4 = a3;
  _R2 = &v15;
  _R1 = *a2 + 168;
  __asm
  {
    VLD1.32         {D16-D17}, [R1]
    VST1.64         {D16-D17}, [R2,#0x48+var_48]
  }
  android::Region::intersect(&v16, a1 + 8);
  sub_280A4((int)&v17, v3 + 216, (int)&v16);
  android::Region::~Region(&v16, v12);
  (*(void (__fastcall **)(int, char *))(*(_DWORD *)v4 + 52))(v4, &v17);
  (*(void (__fastcall **)(int, _DWORD))(*(_DWORD *)v4 + 24))(v4, 0);
  return android::Region::~Region(&v17, v13);
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10BCC: using guessed type int __fastcall android::Region::intersect(_DWORD, _DWORD);

//----- (0001AE48) --------------------------------------------------------
const char *sub_1AE48()
{
  return "LayerDim";
}

//----- (0001AE5C) --------------------------------------------------------
int sub_1AE5C()
{
  return 0;
}

//----- (0001AE60) --------------------------------------------------------
int sub_1AE60()
{
  return 0;
}

//----- (0001AE64) --------------------------------------------------------
signed int sub_1AE64()
{
  return 1;
}

//----- (0001AE68) --------------------------------------------------------
_DWORD *__fastcall sub_1AE68(_DWORD *a1, int a2)
{
  _DWORD *v2; // r4@1
  int v3; // r0@1
  int v4; // r0@1

  v2 = a1;
  *a1 = 0;
  v3 = *(_DWORD *)(a2 + 4);
  *v2 = v3;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 8);
  v4 = *(_DWORD *)a2;
  *v2 = *(_DWORD *)a2;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v4 - 12)) = *(_DWORD *)(a2 + 12);
  pthread_mutex_init((pthread_mutex_t *)(v2 + 1), 0);
  pthread_cond_init((pthread_cond_t *)(v2 + 2), 0);
  v2[3] = 1;
  return v2;
}

//----- (0001AEA4) --------------------------------------------------------
int __fastcall sub_1AEA4(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 12);
  pthread_cond_destroy((pthread_cond_t *)(v2 + 8));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 4));
  return v2;
}

//----- (0001AEC8) --------------------------------------------------------
int __fastcall sub_1AEC8(int a1)
{
  int v1; // r4@1

  v1 = a1;
  *(_DWORD *)a1 = &unk_413FC;
  *(_DWORD *)(a1 + 16) = &unk_41428;
  pthread_cond_destroy((pthread_cond_t *)(a1 + 8));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 4));
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (0001AF08) --------------------------------------------------------
int __fastcall sub_1AF08(char *a1)
{
  int v1; // r1@1
  android::RefBase *v2; // r4@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  *(_DWORD *)&a1[v1] = &unk_413FC;
  *(_DWORD *)&a1[v1 + 16] = &unk_41428;
  v2 = (android::RefBase *)&a1[v1 + 16];
  pthread_cond_destroy((pthread_cond_t *)&a1[v1 + 8]);
  pthread_mutex_destroy((pthread_mutex_t *)((char *)v2 - 12));
  return j_android::RefBase::~RefBase(v2);
}

//----- (0001AF4C) --------------------------------------------------------
void __fastcall sub_1AF4C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  *(_DWORD *)a1 = &unk_413FC;
  *(_DWORD *)(a1 + 16) = &unk_41428;
  pthread_cond_destroy((pthread_cond_t *)(a1 + 8));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 4));
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (0001AF90) --------------------------------------------------------
void __fastcall sub_1AF90(_DWORD *a1)
{
  sub_1AF4C((int)a1 + *(_DWORD *)(*a1 - 12));
}

//----- (0001AF9C) --------------------------------------------------------
int __fastcall sub_1AF9C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  (*(void (**)(void))(*(_DWORD *)a1 + 12))();
  pthread_mutex_lock((pthread_mutex_t *)(v1 + 4));
  *(_DWORD *)(v1 + 12) = 0;
  pthread_cond_broadcast((pthread_cond_t *)(v1 + 8));
  return j_j_pthread_mutex_unlock((pthread_mutex_t *)(v1 + 4));
}

//----- (0001AFC8) --------------------------------------------------------
_DWORD *__fastcall sub_1AFC8(_DWORD *result)
{
  unsigned int *v1; // r1@1
  unsigned int v2; // r2@2
  int v3; // r4@4
  int v4; // [sp+0h] [bp-10h]@6
  _DWORD *v5; // [sp+4h] [bp-Ch]@4

  v1 = result + 2;
  __dmb();
  do
    v2 = __ldrex(v1);
  while ( __strex(v2 | 2, v1) );
  if ( !(v2 & 2) )
  {
    v3 = *(_DWORD *)(result[1] + 4);
    v5 = result;
    if ( result )
      android::RefBase::incStrong((android::RefBase *)((char *)result + *(_DWORD *)(*result - 12)), &v5);
    v4 = 1;
    android::Looper::sendMessage(v3, &v5, &v4);
    result = v5;
    if ( v5 )
      result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v5 + *(_DWORD *)(*v5 - 12)), &v5);
  }
  return result;
}
// 10CEC: using guessed type int __fastcall android::Looper::sendMessage(_DWORD, _DWORD, _DWORD);

//----- (0001B028) --------------------------------------------------------
_DWORD *__fastcall sub_1B028(_DWORD *result)
{
  unsigned int *v1; // r1@1
  unsigned int v2; // r2@2
  int v3; // r4@4
  int v4; // [sp+0h] [bp-10h]@6
  _DWORD *v5; // [sp+4h] [bp-Ch]@4

  v1 = result + 2;
  __dmb();
  do
    v2 = __ldrex(v1);
  while ( __strex(v2 | 1, v1) );
  if ( !(v2 & 1) )
  {
    v3 = *(_DWORD *)(result[1] + 4);
    v5 = result;
    if ( result )
      android::RefBase::incStrong((android::RefBase *)((char *)result + *(_DWORD *)(*result - 12)), &v5);
    v4 = 0;
    android::Looper::sendMessage(v3, &v5, &v4);
    result = v5;
    if ( v5 )
      result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v5 + *(_DWORD *)(*v5 - 12)), &v5);
  }
  return result;
}
// 10CEC: using guessed type int __fastcall android::Looper::sendMessage(_DWORD, _DWORD, _DWORD);

//----- (0001B088) --------------------------------------------------------
_DWORD *__fastcall sub_1B088(_DWORD *result)
{
  unsigned int *v1; // r1@1
  unsigned int v2; // r2@2
  int v3; // r4@4
  int v4; // [sp+0h] [bp-10h]@6
  _DWORD *v5; // [sp+4h] [bp-Ch]@4

  v1 = result + 2;
  __dmb();
  do
    v2 = __ldrex(v1);
  while ( __strex(v2 | 4, v1) );
  if ( !(v2 & 4) )
  {
    v3 = *(_DWORD *)(result[1] + 4);
    v5 = result;
    if ( result )
      android::RefBase::incStrong((android::RefBase *)((char *)result + *(_DWORD *)(*result - 12)), &v5);
    v4 = 2;
    android::Looper::sendMessage(v3, &v5, &v4);
    result = v5;
    if ( v5 )
      result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v5 + *(_DWORD *)(*v5 - 12)), &v5);
  }
  return result;
}
// 10CEC: using guessed type int __fastcall android::Looper::sendMessage(_DWORD, _DWORD, _DWORD);

//----- (0001B0E8) --------------------------------------------------------
_DWORD *__fastcall sub_1B0E8(_DWORD *result)
{
  unsigned int *v1; // r1@1
  unsigned int v2; // r2@2
  int v3; // r4@4
  int v4; // [sp+0h] [bp-10h]@6
  _DWORD *v5; // [sp+4h] [bp-Ch]@4

  v1 = result + 2;
  __dmb();
  do
    v2 = __ldrex(v1);
  while ( __strex(v2 | 8, v1) );
  if ( !(v2 & 8) )
  {
    v3 = *(_DWORD *)(result[1] + 4);
    v5 = result;
    if ( result )
      android::RefBase::incStrong((android::RefBase *)((char *)result + *(_DWORD *)(*result - 12)), &v5);
    v4 = 4;
    android::Looper::sendMessage(v3, &v5, &v4);
    result = v5;
    if ( v5 )
      result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v5 + *(_DWORD *)(*v5 - 12)), &v5);
  }
  return result;
}
// 10CEC: using guessed type int __fastcall android::Looper::sendMessage(_DWORD, _DWORD, _DWORD);

//----- (0001B148) --------------------------------------------------------
_DWORD *__fastcall sub_1B148(_DWORD *a1)
{
  int v1; // r4@1
  _DWORD *result; // r0@3
  _DWORD *v3; // [sp+4h] [bp-Ch]@1

  v1 = *(_DWORD *)(a1[1] + 4);
  v3 = a1;
  if ( a1 )
    android::RefBase::incStrong((android::RefBase *)((char *)a1 + *(_DWORD *)(*a1 - 12)), &v3);
  android::Looper::removeMessages(v1, &v3);
  result = v3;
  if ( v3 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v3 + *(_DWORD *)(*v3 - 12)), &v3);
  return result;
}
// 10CF8: using guessed type int __fastcall android::Looper::removeMessages(_DWORD, _DWORD);

//----- (0001B20C) --------------------------------------------------------
int __fastcall sub_1B20C(int result)
{
  __asm { VMOV.I32        Q8, #0 }
  _R2 = result;
  *(_DWORD *)(result + 20) = 0;
  __asm { VST1.32         {D16-D17}, [R2]! }
  *(_DWORD *)result = 0;
  return result;
}

//----- (0001B220) --------------------------------------------------------
void *__fastcall sub_1B220(void *a1)
{
  void *v1; // r4@1
  char *v2; // r0@1
  char *v3; // r1@1
  android::RefBase *v4; // r0@3
  char *v5; // r0@5
  char *v6; // r0@7
  android::RefBase *v7; // r0@9

  v1 = a1;
  v3 = (char *)a1 + 20;
  v2 = (char *)*((_DWORD *)a1 + 5);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], v3);
  v4 = (android::RefBase *)*((_DWORD *)v1 + 4);
  if ( v4 )
    android::RefBase::decStrong(v4, (char *)v1 + 16);
  v5 = (char *)*((_DWORD *)v1 + 3);
  if ( v5 )
    android::RefBase::decStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], (char *)v1 + 12);
  v6 = (char *)*((_DWORD *)v1 + 2);
  if ( v6 )
    android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], (char *)v1 + 8);
  v7 = (android::RefBase *)*((_DWORD *)v1 + 1);
  if ( v7 )
    android::RefBase::decStrong(v7, (char *)v1 + 4);
  if ( *(_DWORD *)v1 )
    android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)v1 + *(_DWORD *)(**(_DWORD **)v1 - 12)), v1);
  return v1;
}

//----- (0001B290) --------------------------------------------------------
void *__fastcall sub_1B290(void *a1, char **a2)
{
  void *v2; // r4@1
  android::Looper *v3; // r5@1
  int v4; // r5@1

  v2 = a1;
  sub_123A8(a1, a2);
  v3 = (android::Looper *)operator new(0x70u);
  android::Looper::Looper(v3, 1);
  sub_1B2F0((char *)v2 + 4, v3);
  v4 = operator new(0x14u);
  android::RefBase::RefBase((android::RefBase *)(v4 + 12));
  *(_DWORD *)v4 = &unk_4144C;
  *(_DWORD *)(v4 + 4) = v2;
  *(_DWORD *)(v4 + 8) = 0;
  *(_DWORD *)(v4 + 12) = &unk_41474;
  return sub_176BC((char *)v2 + 20, (char *)v4);
}

//----- (0001B2F0) --------------------------------------------------------
android::RefBase **__fastcall sub_1B2F0(void *a1, android::RefBase *this)
{
  android::RefBase *v2; // r5@1
  android::RefBase **v3; // r4@1
  android::RefBase **result; // r0@5

  v2 = this;
  v3 = (android::RefBase **)a1;
  if ( this )
    android::RefBase::incStrong(this, a1);
  if ( *v3 )
    android::RefBase::decStrong(*v3, v3);
  result = v3;
  *v3 = v2;
  return result;
}

//----- (0001B314) --------------------------------------------------------
int __fastcall sub_1B314(int a1, char **a2)
{
  int v2; // r4@1
  char **v3; // r5@1
  android::Looper *v4; // r5@5
  int v5; // r0@5
  android::RefBase *v7; // [sp+8h] [bp-18h]@3
  char *v8; // [sp+Ch] [bp-14h]@1

  v2 = a1;
  v3 = a2;
  sub_123A8((void *)(a1 + 8), a2);
  sub_154EC(&v8, *v3);
  sub_123A8((void *)(v2 + 12), &v8);
  if ( v8 )
    android::RefBase::decStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], &v8);
  (*(void (__fastcall **)(android::RefBase **))(**(_DWORD **)(v2 + 12) + 16))(&v7);
  sub_1A074((void *)(v2 + 16), &v7);
  if ( v7 )
    android::RefBase::decStrong(v7, &v7);
  v4 = *(android::Looper **)(v2 + 4);
  v5 = android::BitTube::getFd(*(android::BitTube **)(v2 + 16));
  return android::Looper::addFd(v4, v5, 0, 1, (int (__cdecl *)(int, int, void *))sub_1B39C, (void *)v2);
}

//----- (0001B39C) --------------------------------------------------------
signed int __fastcall sub_1B39C(int a1, int a2, int a3)
{
  sub_1B4D0(a3);
  return 1;
}

//----- (0001B3AC) --------------------------------------------------------
void __fastcall sub_1B3AC(int a1)
{
  int v1; // r4@1
  android::IPCThreadState *v2; // r0@1
  android::IPCThreadState *v3; // r0@3
  int v4; // r0@3
  int v5; // r3@3

  v1 = a1;
  v2 = (android::IPCThreadState *)0xFFFF4E52;
  while ( 1 )
  {
    do
    {
      v3 = (android::IPCThreadState *)android::IPCThreadState::self(v2);
      android::IPCThreadState::flushCommands(v3);
      v4 = android::Looper::pollOnce(*(android::Looper **)(v1 + 4), -1, 0, 0, 0);
      v5 = v4;
      v2 = (android::IPCThreadState *)(v4 + 3);
    }
    while ( (unsigned int)v2 < 3 );
    if ( v5 == -4 )
      v2 = (android::IPCThreadState *)_android_log_print(6, "SurfaceFlinger", "Looper::POLL_ERROR");
    else
      v2 = (android::IPCThreadState *)_android_log_print(
                                        6,
                                        "SurfaceFlinger",
                                        "Looper::pollOnce() returned unknown status %d");
  }
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001B414) --------------------------------------------------------
int __fastcall sub_1B414(int a1, char **a2, int a3, int a4)
{
  int v4; // r6@1
  int v5; // r5@1
  signed int v6; // r2@1
  signed int v7; // r3@1
  int v8; // r4@3
  char *v9; // r0@8
  android::RefBase *v10; // r0@11
  int *v11; // r1@11
  char *v12; // r0@12
  char *v14; // [sp+Ch] [bp-1Ch]@12
  char *v15; // [sp+10h] [bp-18h]@8
  int v16; // [sp+14h] [bp-14h]@1

  v4 = a3;
  v5 = a4;
  v6 = 0;
  v7 = 0;
  v16 = 0;
  if ( !v4 )
    v7 = 1;
  v8 = *(_DWORD *)(a1 + 4);
  if ( v5 < 0 )
    v6 = 1;
  if ( !v5 )
    v6 = v7;
  if ( v6 )
  {
    v12 = *a2;
    v14 = *a2;
    if ( v14 )
      android::RefBase::incStrong((android::RefBase *)&v12[*(_DWORD *)(*(_DWORD *)v12 - 12)], &v14);
    android::Looper::sendMessage(v8, &v14, &v16);
    if ( v14 )
    {
      v10 = (android::RefBase *)&v14[*(_DWORD *)(*(_DWORD *)v14 - 12)];
      v11 = (int *)&v14;
      goto LABEL_16;
    }
  }
  else
  {
    v9 = *a2;
    v15 = *a2;
    if ( v15 )
      android::RefBase::incStrong((android::RefBase *)&v9[*(_DWORD *)(*(_DWORD *)v9 - 12)], &v15);
    android::Looper::sendMessageDelayed(v8);
    if ( v15 )
    {
      v10 = (android::RefBase *)&v15[*(_DWORD *)(*(_DWORD *)v15 - 12)];
      v11 = (int *)&v15;
LABEL_16:
      android::RefBase::decStrong(v10, v11);
      return 0;
    }
  }
  return 0;
}
// 10CEC: using guessed type int __fastcall android::Looper::sendMessage(_DWORD, _DWORD, _DWORD);
// 10D40: using guessed type int __fastcall android::Looper::sendMessageDelayed(_DWORD);

//----- (0001B4A8) --------------------------------------------------------
_DWORD *__fastcall sub_1B4A8(int a1)
{
  return sub_1B088(*(_DWORD **)(a1 + 20));
}

//----- (0001B4B0) --------------------------------------------------------
int __fastcall sub_1B4B0(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 12) + 24))();
}

//----- (0001B4B8) --------------------------------------------------------
_DWORD *__fastcall sub_1B4B8(int a1)
{
  return sub_1AFC8(*(_DWORD **)(a1 + 20));
}

//----- (0001B4D0) --------------------------------------------------------
signed int __fastcall sub_1B4D0(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  int v3; // r0@1
  int v4; // r1@3
  int *v5; // r2@3
  int v7; // [sp+0h] [bp-D8h]@1

  v1 = a1;
  v2 = a1 + 16;
  v3 = android::DisplayEventReceiver::getEvents(a1 + 16, &v7, 8);
  if ( v3 >= 1 )
  {
    do
    {
      if ( v3 > 0 )
      {
        v4 = 0;
        v5 = &v7;
        while ( *v5 != 1987279214 )
        {
          ++v4;
          v5 += 6;
          if ( v4 >= v3 )
            goto LABEL_8;
        }
        sub_1B028(*(_DWORD **)(v1 + 20));
      }
LABEL_8:
      v3 = android::DisplayEventReceiver::getEvents(v2, &v7, 8);
    }
    while ( v3 > 0 );
  }
  return 1;
}
// 10D4C: using guessed type int __fastcall android::DisplayEventReceiver::getEvents(_DWORD, _DWORD, _DWORD);

//----- (0001B57C) --------------------------------------------------------
int __fastcall sub_1B57C(int a1, char **a2, char **a3)
{
  int v3; // r4@1
  char **v4; // r5@1
  char **v5; // r6@1
  char *v6; // r0@1
  bool v7; // zf@1
  char *v8; // r0@3

  v3 = a1;
  v4 = a3;
  v5 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 12));
  android::IGraphicBufferProducer::IGraphicBufferProducer((android::IGraphicBufferProducer *)v3);
  *(_DWORD *)v3 = &off_41498;
  *(_DWORD *)(v3 + 12) = &off_41504;
  v6 = *v5;
  v7 = *v5 == 0;
  *(_DWORD *)(v3 + 4) = *v5;
  if ( !v7 )
    android::RefBase::incStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], (const void *)(v3 + 4));
  v8 = *v4;
  v7 = *v4 == 0;
  *(_DWORD *)(v3 + 8) = *v4;
  if ( !v7 )
    android::RefBase::incStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], (const void *)(v3 + 8));
  return v3;
}
// 41498: using guessed type void *off_41498;
// 41504: using guessed type void *off_41504;

//----- (0001B5F0) --------------------------------------------------------
int __fastcall sub_1B5F0(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  char **v4; // r6@1
  int v5; // r8@1
  int v6; // r7@1
  char *v7; // r0@3
  bool v8; // zf@3
  android::RefBase::weakref_type *v9; // r0@5
  int v10; // r0@7
  char *v11; // r0@15
  _DWORD *v13; // [sp+8h] [bp-30h]@1
  _DWORD *v14; // [sp+Ch] [bp-2Ch]@1
  android::RefBase::weakref_type *v15; // [sp+10h] [bp-28h]@2
  char *v16; // [sp+14h] [bp-24h]@7

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 20);
  v4 = (char **)(v2 + 8);
  v5 = *(_DWORD *)(v2 + 8);
  v6 = operator new(0x24u);
  android::IInterface::asBinder((android::IInterface *)&v13, (const android::IInterface *)v2);
  v14 = v13;
  if ( v13 )
    v15 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)((char *)v13 + *(_DWORD *)(*v13 - 12)),
                                              &v14);
  android::RefBase::RefBase((android::RefBase *)(v6 + 28));
  sub_1AE68((_DWORD *)v6, (int)off_3F8D4);
  *(_DWORD *)v6 = &off_41608;
  *(_DWORD *)(v6 + 28) = &off_41634;
  v7 = *v4;
  v8 = *v4 == 0;
  *(_DWORD *)(v6 + 16) = *v4;
  if ( !v8 )
    android::RefBase::incStrong((android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)], (const void *)(v6 + 16));
  v9 = v15;
  v8 = v14 == 0;
  *(_DWORD *)(v6 + 20) = v14;
  *(_DWORD *)(v6 + 24) = v9;
  if ( !v8 )
    android::RefBase::weakref_type::incWeak(v9, (const void *)(v6 + 20));
  v10 = *(_DWORD *)v6;
  v16 = (char *)v6;
  android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(v10 - 12) + v6), &v16);
  sub_1D1A0(v5, &v16, 0, 0);
  if ( v16 )
    android::RefBase::decStrong((android::RefBase *)&v16[*(_DWORD *)(*(_DWORD *)v16 - 12)], &v16);
  if ( v14 )
    android::RefBase::weakref_type::decWeak(v15, &v14);
  if ( v13 )
    android::RefBase::decStrong((android::RefBase *)((char *)v13 + *(_DWORD *)(*v13 - 12)), &v13);
  if ( *v4 )
    android::RefBase::decStrong((android::RefBase *)&(*v4)[*(_DWORD *)(*(_DWORD *)*v4 - 12)], (const void *)(v2 + 8));
  v11 = *(char **)(v2 + 4);
  if ( v11 )
    android::RefBase::decStrong((android::RefBase *)&v11[*(_DWORD *)(*(_DWORD *)v11 - 12)], (const void *)(v2 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v2);
  return v2;
}
// 3F8D4: using guessed type void **[5];
// 41608: using guessed type void *off_41608;
// 41634: using guessed type void *off_41634;

//----- (0001B720) --------------------------------------------------------
int __fastcall sub_1B720(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1B5F0(a1, (int)&off_3F8B0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 12));
  return v1;
}
// 3F8B0: using guessed type void **off_3F8B0;

//----- (0001B748) --------------------------------------------------------
int __fastcall sub_1B748(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_1B5F0((int)a1 + *(_DWORD *)(*a1 - 12), (int)&off_3F8B0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 12));
}
// 3F8B0: using guessed type void **off_3F8B0;

//----- (0001B774) --------------------------------------------------------
void __fastcall sub_1B774(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1B5F0(a1, (int)&off_3F8B0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 12));
  j_operator delete((void *)v1);
}
// 3F8B0: using guessed type void **off_3F8B0;

//----- (0001B7A0) --------------------------------------------------------
void __fastcall sub_1B7A0(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_1B5F0(v1, (int)&off_3F8B0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 12));
  j_operator delete((void *)v1);
}
// 3F8B0: using guessed type void **off_3F8B0;

//----- (0001B7D4) --------------------------------------------------------
int __fastcall sub_1B7D4(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 16))();
}

//----- (0001B7DC) --------------------------------------------------------
int __fastcall sub_1B7DC(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 20))();
}

//----- (0001B7E4) --------------------------------------------------------
int __fastcall sub_1B7E4(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 24))();
}

//----- (0001B7F0) --------------------------------------------------------
int __fastcall sub_1B7F0(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 28))();
}

//----- (0001B7F8) --------------------------------------------------------
int __fastcall sub_1B7F8(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 32))();
}

//----- (0001B800) --------------------------------------------------------
int __fastcall sub_1B800(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 36))();
}

//----- (0001B808) --------------------------------------------------------
int __fastcall sub_1B808(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 40))();
}

//----- (0001B814) --------------------------------------------------------
int __fastcall sub_1B814(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 44))();
}

//----- (0001B81C) --------------------------------------------------------
int __fastcall sub_1B81C(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 48))();
}

//----- (0001B824) --------------------------------------------------------
int __fastcall sub_1B824(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 52))();
}

//----- (0001B830) --------------------------------------------------------
int __fastcall sub_1B830(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 56))();
}

//----- (0001B838) --------------------------------------------------------
int __fastcall sub_1B838(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 60))();
}

//----- (0001B840) --------------------------------------------------------
int __fastcall sub_1B840(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 64))();
}

//----- (0001B84C) --------------------------------------------------------
int __fastcall sub_1B84C(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 68))();
}

//----- (0001B854) --------------------------------------------------------
int __fastcall sub_1B854(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 4) + 72))();
}

//----- (0001B85C) --------------------------------------------------------
int __fastcall sub_1B85C(int a1, int a2)
{
  return (*(int (**)(void))(**(_DWORD **)(a2 + 4) + 76))();
}

//----- (0001B86C) --------------------------------------------------------
_DWORD *__fastcall sub_1B86C(int a1)
{
  char *v1; // r0@1
  _DWORD *v2; // r4@3
  char *v4; // [sp+0h] [bp-10h]@1
  _DWORD *v5; // [sp+4h] [bp-Ch]@3

  v1 = *(char **)(a1 + 4);
  v4 = v1;
  if ( v1 )
    android::RefBase::incStrong((android::RefBase *)&v1[*(_DWORD *)(*(_DWORD *)v1 - 12)], &v4);
  android::IInterface::asBinder(&v5, &v4);
  v2 = v5;
  if ( v5 )
    android::RefBase::decStrong((android::RefBase *)((char *)v5 + *(_DWORD *)(*v5 - 12)), &v5);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], &v4);
  return v2;
}
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);

//----- (0001B8B8) --------------------------------------------------------
int __fastcall sub_1B8B8(int a1)
{
  int v1; // r4@1
  char *v2; // r0@3

  v1 = a1;
  *(_DWORD *)a1 = &off_41608;
  *(_DWORD *)(a1 + 28) = &off_41634;
  if ( *(_DWORD *)(a1 + 20) )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(a1 + 24), (const void *)(a1 + 20));
  v2 = *(char **)(v1 + 16);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], (const void *)(v1 + 16));
  sub_1AEA4(v1, (int)off_3F8D4);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  return v1;
}
// 3F8D4: using guessed type void **off_3F8D4[5];
// 41608: using guessed type void *off_41608;
// 41634: using guessed type void *off_41634;

//----- (0001B91C) --------------------------------------------------------
void __fastcall sub_1B91C(int a1)
{
  void *v1; // r0@1

  v1 = (void *)sub_1B8B8(a1);
  j_operator delete(v1);
}

//----- (0001B92C) --------------------------------------------------------
signed int __fastcall sub_1B92C(int a1)
{
  int v1; // r4@1
  pthread_mutex_t *v2; // r5@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(*(_DWORD *)(a1 + 16) + 28);
  pthread_mutex_lock(v2);
  android::SortedVectorImpl::remove((android::SortedVectorImpl *)(*(_DWORD *)(v1 + 16) + 168), (const void *)(v1 + 20));
  pthread_mutex_unlock(v2);
  return 1;
}

//----- (0001B958) --------------------------------------------------------
int __fastcall sub_1B958(_DWORD *a1)
{
  return sub_1B8B8((int)a1 + *(_DWORD *)(*a1 - 12));
}

//----- (0001B964) --------------------------------------------------------
void __fastcall sub_1B964(_DWORD *a1)
{
  void *v1; // r0@1

  v1 = (void *)sub_1B8B8((int)a1 + *(_DWORD *)(*a1 - 12));
  j_operator delete(v1);
}

//----- (0001B97C) --------------------------------------------------------
android::SurfaceFlinger *__fastcall android::SurfaceFlinger::SurfaceFlinger(android::SurfaceFlinger *this, int a2)
{
  android::SurfaceFlinger *v2; // r4@1
  int v3; // r5@1
  int v9; // r0@1
  int v10; // r0@1
  int v11; // r0@1
  int v12; // r0@1
  int v13; // r0@1
  int v14; // r0@1
  int v15; // r5@1
  int v16; // r0@1
  int v17; // r1@1
  android::SurfaceFlinger *v19; // r0@1
  char v21; // r8@3
  unsigned int v25; // r7@3
  int v26; // r0@10
  int v27; // r0@17
  char v28; // r1@17
  int v30; // [sp+4h] [bp-9Ch]@1
  char v31; // [sp+8h] [bp-98h]@3
  int v32; // [sp+64h] [bp-3Ch]@1

  v2 = this;
  v3 = a2;
  __asm { VMOV.I32        Q4, #0 }
  _R7 = this;
  v32 = v0;
  __asm { VST1.32         {D8-D9}, [R7]! }
  android::ISurfaceComposer::ISurfaceComposer(this);
  android::BBinder::BBinder((android::SurfaceFlinger *)((char *)v2 + 4));
  v9 = *(_DWORD *)(v3 + 8);
  *(_DWORD *)v2 = v9;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v9 - 12)) = *(_DWORD *)(v3 + 44);
  *((_DWORD *)v2 + 1) = *(_DWORD *)(v3 + 48);
  v10 = *(_DWORD *)(v3 + 4);
  *(_DWORD *)v2 = v10;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v10 - 12)) = *(_DWORD *)(v3 + 52);
  *((_DWORD *)v2 + 1) = *(_DWORD *)(v3 + 56);
  v11 = *(_DWORD *)(v3 + 60);
  *(_DWORD *)_R7 = v11;
  *(_DWORD *)((char *)_R7 + *(_DWORD *)(v11 - 12)) = *(_DWORD *)(v3 + 64);
  v12 = *(_DWORD *)(v3 + 68);
  *((_DWORD *)v2 + 5) = v12;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v12 - 12) + 20) = *(_DWORD *)(v3 + 72);
  *((_DWORD *)v2 + 6) = &unk_41DE4;
  v13 = *(_DWORD *)v3;
  *(_DWORD *)v2 = *(_DWORD *)v3;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v13 - 12)) = *(_DWORD *)(v3 + 76);
  *((_DWORD *)v2 + 1) = *(_DWORD *)(v3 + 80);
  *(_DWORD *)_R7 = *(_DWORD *)(v3 + 84);
  v14 = *(_DWORD *)(v3 + 88);
  v15 = 0;
  *((_DWORD *)v2 + 5) = v14;
  *((_DWORD *)v2 + 6) = &unk_41868;
  pthread_mutex_init((pthread_mutex_t *)((char *)v2 + 28), 0);
  sub_1BE90((android::SurfaceFlinger *)((char *)v2 + 32));
  *((_DWORD *)v2 + 34) = 0;
  pthread_cond_init((pthread_cond_t *)((char *)v2 + 140), 0);
  *((_WORD *)v2 + 72) = 0;
  android::VectorImpl::VectorImpl((android::SurfaceFlinger *)((char *)v2 + 148), 4u, 0);
  *((_DWORD *)v2 + 37) = &unk_3F624;
  android::SortedVectorImpl::SortedVectorImpl((android::SurfaceFlinger *)((char *)v2 + 168), 8u, 0);
  *((_DWORD *)v2 + 42) = &unk_3FB64;
  *((_BYTE *)v2 + 188) = 0;
  *((_DWORD *)v2 + 48) = 0;
  *((_DWORD *)v2 + 50) = 0;
  v16 = systemTime(1);
  *((_DWORD *)v2 + 53) = v17;
  *((_DWORD *)v2 + 52) = v16;
  *((_DWORD *)v2 + 55) = 0;
  *((_DWORD *)v2 + 56) = 0;
  *((_DWORD *)v2 + 57) = 0;
  *((_DWORD *)v2 + 60) = 0;
  *((_DWORD *)v2 + 61) = 0;
  sub_1BE90((android::SurfaceFlinger *)((char *)v2 + 248));
  *((_BYTE *)v2 + 352) = 0;
  *((_BYTE *)v2 + 353) = 0;
  *((_BYTE *)v2 + 354) = 0;
  v30 = 0;
  android::SortedVectorImpl::SortedVectorImpl((android::SurfaceFlinger *)((char *)v2 + 356), 0xCu, 0);
  *((_DWORD *)v2 + 89) = &unk_3F9AC;
  *((_DWORD *)v2 + 94) = 0;
  sub_1BF7C((unsigned int **)&v30);
  _R10 = (android::SurfaceFlinger *)((char *)v2 + 380);
  __asm { VST1.32         {D8-D9}, [R10] }
  *((_DWORD *)v2 + 101) = 0;
  *((_DWORD *)v2 + 100) = 0;
  *((_DWORD *)v2 + 103) = 0;
  *((_DWORD *)v2 + 102) = 0;
  *((_DWORD *)v2 + 105) = 0;
  *((_DWORD *)v2 + 104) = 0;
  *((_DWORD *)v2 + 106) = 0;
  *((_DWORD *)v2 + 107) = 0;
  *((_WORD *)v2 + 216) = 0;
  sub_1B20C((int)v2 + 444);
  sub_16888((int)v2 + 472);
  sub_13A04((int)v2 + 4624);
  pthread_mutex_init((pthread_mutex_t *)((char *)v2 + 5032), 0);
  android::VectorImpl::VectorImpl((android::SurfaceFlinger *)((char *)v2 + 5036), 4u, 7u);
  *((_DWORD *)v2 + 1259) = &unk_3FBA4;
  pthread_mutex_init((pthread_mutex_t *)((char *)v2 + 5056), 0);
  *((_WORD *)v2 + 2530) = 0;
  sub_2D064((int)v2 + 5068);
  *((_BYTE *)v2 + 5144) = 0;
  *((_DWORD *)v2 + 1287) = 0;
  *((_BYTE *)v2 + 5152) = 0;
  v19 = (android::SurfaceFlinger *)((char *)v2 + 5156);
  do
  {
    _R1 = (int)v19 + v15;
    v15 += 16;
    __asm { VST1.32         {D8-D9}, [R1] }
  }
  while ( v15 != 64 );
  v21 = 0;
  *(_DWORD *)v19 = 1065353216;
  _R0 = (int)v2 + 5160;
  __asm { VST1.32         {D8-D9}, [R0] }
  *((_DWORD *)v2 + 1294) = 1065353216;
  _R0 = (int)v2 + 5180;
  __asm { VST1.32         {D8-D9}, [R0] }
  *((_DWORD *)v2 + 1299) = 1065353216;
  _R0 = (int)v2 + 5200;
  __asm { VST1.32         {D8-D9}, [R0] }
  *((_DWORD *)v2 + 1304) = 1065353216;
  *((_BYTE *)v2 + 5220) = 0;
  pthread_mutex_init((pthread_mutex_t *)((char *)v2 + 5224), 0);
  *((_WORD *)v2 + 2614) = 0;
  *((_BYTE *)v2 + 5238) = 0;
  *((_WORD *)v2 + 2618) = 0;
  *((_DWORD *)v2 + 1308) = 0;
  _aeabi_memset((char *)v2 + 5240, 80, 0);
  pthread_mutex_init((pthread_mutex_t *)v2 + 222, 0);
  v25 = 0xFFFF4436;
  _android_log_print(4, "SurfaceFlinger", "SurfaceFlinger is starting");
  property_get("ro.config.ROG", &v31, "false");
  if ( !strcmp(&v31, "true") )
  {
    property_get("persist.sys.res.level", &v31, "0");
    unk_45028 = atoi(&v31);
    property_get("persist.sys.res.levelchanged", &v31, "0");
    unk_4502C = atoi(&v31);
    property_get("persist.sys.default.res.xres", &v31, "0");
    if ( atoi(&v31) <= 0 )
      property_set("persist.sys.default.res.xres", v0);
    property_get("persist.sys.default.res.yres", &v31, "0");
    v25 = 0xFFFF4436;
    if ( atoi(&v31) <= 0 )
      property_set("persist.sys.default.res.yres", v4);
  }
  property_get("ro.bq.gpu_to_cpu_unsupported", &v31, "0");
  if ( !atoi(&v31) )
    v21 = 1;
  *((_BYTE *)v2 + 216) = v21;
  property_get("debug.sf.showupdates", &v31, "0");
  *((_DWORD *)v2 + 95) = atoi(&v31);
  property_get("debug.sf.ddms", &v31, "0");
  v26 = atoi(&v31);
  *((_DWORD *)v2 + 96) = v26;
  if ( v26 && !sub_1BFA8() )
    *((_DWORD *)v2 + 96) = 0;
  if ( *(_DWORD *)_R10 )
    _android_log_print(4, (char *)&GLOBAL_OFFSET_TABLE_ + v25, "showupdates enabled");
  if ( *((_DWORD *)v2 + 96) )
    _android_log_print(4, (char *)&GLOBAL_OFFSET_TABLE_ + v25, "DDMS debugging enabled");
  property_get("sys.refresh.dirty", &v31, "0");
  *((_DWORD *)v2 + 109) = atoi(&v31);
  property_get("debug.refresh.dirty", &v31, "0");
  *((_DWORD *)v2 + 110) = atoi(&v31);
  property_get("persist.sys.perftest.enable", &v31, "false");
  v27 = strcmp(&v31, "true");
  v28 = 0;
  if ( !v27 )
    v28 = 1;
  *((_BYTE *)v2 + 5324) = v28;
  if ( v0 != v32 )
    _stack_chk_fail(v0 - v32);
  return v2;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10860: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001BE90) --------------------------------------------------------
android::SortedVectorImpl *__fastcall sub_1BE90(android::SortedVectorImpl *a1)
{
  android::SortedVectorImpl *v1; // r4@1
  char *v8; // r0@1
  int v9; // r1@3
  int v10; // r12@3
  int v11; // r2@3
  int v12; // r3@3
  int v13; // r7@3
  int v14; // r6@3
  int v15; // r12@3
  int v16; // r0@3
  int v17; // r1@3
  int v18; // r2@3
  int v19; // r3@3
  int v20; // r7@3
  int v22; // [sp+0h] [bp-58h]@1
  char *v23; // [sp+4h] [bp-54h]@1
  int v24; // [sp+8h] [bp-50h]@3
  int v25; // [sp+Ch] [bp-4Ch]@1
  int v26; // [sp+10h] [bp-48h]@3
  int v27; // [sp+14h] [bp-44h]@3
  int v28; // [sp+18h] [bp-40h]@3
  int v29; // [sp+1Ch] [bp-3Ch]@1
  int v30; // [sp+20h] [bp-38h]@3
  int v31; // [sp+24h] [bp-34h]@3
  int v32; // [sp+28h] [bp-30h]@3
  int v33; // [sp+2Ch] [bp-2Ch]@3
  int v34; // [sp+30h] [bp-28h]@1
  int v35; // [sp+34h] [bp-24h]@1
  int v36; // [sp+38h] [bp-20h]@1
  char v37; // [sp+3Ch] [bp-1Ch]@3

  v1 = a1;
  android::SortedVectorImpl::SortedVectorImpl(a1, 4u, 0);
  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)v1 = &unk_3F954;
  v22 = -1;
  v23 = 0;
  _R0 = &v29;
  v34 = 0;
  v35 = 0;
  __asm { VST1.32         {D16-D17}, [R0] }
  _R0 = &v25;
  __asm { VST1.32         {D16-D17}, [R0] }
  android::String8::String8((android::String8 *)&v36);
  android::SortedVectorImpl::SortedVectorImpl((android::SortedVectorImpl *)((char *)v1 + 20), 0x48u, 0);
  *((_DWORD *)v1 + 5) = &unk_3F980;
  *((_DWORD *)v1 + 10) = v22;
  v8 = v23;
  _ZF = v23 == 0;
  *((_DWORD *)v1 + 11) = v23;
  if ( !_ZF )
    android::RefBase::incStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], (char *)v1 + 44);
  v9 = v28;
  v10 = (int)v1 + 48;
  v11 = v24;
  v12 = v25;
  v13 = v26;
  v14 = v27;
  *((_DWORD *)v1 + 17) = v29;
  *((_DWORD *)v1 + 16) = v9;
  *((_DWORD *)v1 + 15) = v14;
  *(_DWORD *)v10 = v11;
  *(_DWORD *)(v10 + 4) = v12;
  *(_DWORD *)(v10 + 8) = v13;
  v15 = (int)v1 + 72;
  v16 = v35;
  v17 = v34;
  v18 = v30;
  v19 = v31;
  v20 = v32;
  *((_DWORD *)v1 + 21) = v33;
  *((_DWORD *)v1 + 22) = v17;
  *((_DWORD *)v1 + 23) = v16;
  *(_DWORD *)v15 = v18;
  *(_DWORD *)(v15 + 4) = v19;
  *(_DWORD *)(v15 + 8) = v20;
  android::String8::String8((android::SortedVectorImpl *)((char *)v1 + 96), (const android::String8 *)&v36);
  *((_BYTE *)v1 + 100) = v37;
  android::String8::~String8((android::String8 *)&v36);
  if ( v23 )
    android::RefBase::decStrong(
      (android::RefBase *)&v23[*(_DWORD *)(*(_DWORD *)v23 - 12)],
      (const void *)((unsigned int)&v22 | 4));
  return v1;
}

//----- (0001BF7C) --------------------------------------------------------
unsigned int **__fastcall sub_1BF7C(unsigned int **a1)
{
  unsigned int **v1; // r4@1
  unsigned int *v2; // r0@1
  unsigned int v3; // r1@3
  void *v4; // r0@5

  v1 = a1;
  v2 = *a1;
  if ( v2 )
  {
    __dmb();
    do
      v3 = __ldrex(v2);
    while ( __strex(v3 - 1, v2) );
    if ( v3 == 1 )
    {
      v4 = (void *)sub_131F4((int)v2);
      operator delete(v4);
    }
  }
  return v1;
}

//----- (0001BFA8) --------------------------------------------------------
signed int sub_1BFA8()
{
  signed int v0; // r5@1
  void *v1; // r0@1
  void *v2; // r4@1
  void (__fastcall *v3)(const char *); // r1@2

  v0 = 0;
  v1 = dlopen("libsurfaceflinger_ddmconnection.so", 0);
  v2 = v1;
  if ( v1 )
  {
    v3 = (void (__fastcall *)(const char *))dlsym(v1, "DdmConnection_start");
    if ( v3 )
    {
      v3("SurfaceFlinger");
      v0 = 1;
    }
    else
    {
      dlclose(v2);
      v0 = 0;
    }
  }
  return v0;
}

//----- (0001C008) --------------------------------------------------------
android::SurfaceFlinger *__fastcall android::SurfaceFlinger::SurfaceFlinger(android::SurfaceFlinger *this)
{
  android::SurfaceFlinger *v1; // r4@1
  int v7; // r6@1
  int v8; // r0@1
  int v9; // r1@1
  android::SurfaceFlinger *v11; // r0@1
  char v13; // r8@3
  unsigned int v17; // r7@3
  int v18; // r0@10
  int v19; // r0@17
  char v20; // r1@17
  int v22; // [sp+4h] [bp-9Ch]@1
  char v23; // [sp+8h] [bp-98h]@3
  int v24; // [sp+64h] [bp-3Ch]@1

  v1 = this;
  v24 = v0;
  android::RefBase::RefBase((android::SurfaceFlinger *)((char *)this + 5332));
  _R7 = v1;
  __asm
  {
    VMOV.I32        Q4, #0
    VST1.32         {D8-D9}, [R7]!
  }
  android::ISurfaceComposer::ISurfaceComposer(v1);
  android::BBinder::BBinder((android::SurfaceFlinger *)((char *)v1 + 4));
  *(_DWORD *)v1 = &off_416F8;
  *((_DWORD *)v1 + 1333) = &off_41894;
  *((_DWORD *)v1 + 1) = &off_417B0;
  *(_DWORD *)v1 = &off_41800;
  *((_DWORD *)v1 + 5) = &off_41854;
  *((_DWORD *)v1 + 6) = &unk_41868;
  v7 = 0;
  pthread_mutex_init((pthread_mutex_t *)((char *)v1 + 28), 0);
  sub_1BE90((android::SurfaceFlinger *)((char *)v1 + 32));
  *((_DWORD *)v1 + 34) = 0;
  pthread_cond_init((pthread_cond_t *)((char *)v1 + 140), 0);
  *((_WORD *)v1 + 72) = 0;
  android::VectorImpl::VectorImpl((android::SurfaceFlinger *)((char *)v1 + 148), 4u, 0);
  *((_DWORD *)v1 + 37) = &unk_3F624;
  android::SortedVectorImpl::SortedVectorImpl((android::SurfaceFlinger *)((char *)v1 + 168), 8u, 0);
  *((_DWORD *)v1 + 42) = &unk_3FB64;
  *((_BYTE *)v1 + 188) = 0;
  *((_DWORD *)v1 + 48) = 0;
  *((_DWORD *)v1 + 50) = 0;
  v8 = systemTime(1);
  *((_DWORD *)v1 + 53) = v9;
  *((_DWORD *)v1 + 52) = v8;
  *((_DWORD *)v1 + 55) = 0;
  *((_DWORD *)v1 + 56) = 0;
  *((_DWORD *)v1 + 57) = 0;
  *((_DWORD *)v1 + 60) = 0;
  *((_DWORD *)v1 + 61) = 0;
  sub_1BE90((android::SurfaceFlinger *)((char *)v1 + 248));
  *((_BYTE *)v1 + 352) = 0;
  *((_BYTE *)v1 + 353) = 0;
  *((_BYTE *)v1 + 354) = 0;
  v22 = 0;
  android::SortedVectorImpl::SortedVectorImpl((android::SurfaceFlinger *)((char *)v1 + 356), 0xCu, 0);
  *((_DWORD *)v1 + 89) = &unk_3F9AC;
  *((_DWORD *)v1 + 94) = 0;
  sub_1BF7C((unsigned int **)&v22);
  _R10 = (android::SurfaceFlinger *)((char *)v1 + 380);
  __asm { VST1.32         {D8-D9}, [R10] }
  *((_DWORD *)v1 + 101) = 0;
  *((_DWORD *)v1 + 100) = 0;
  *((_DWORD *)v1 + 103) = 0;
  *((_DWORD *)v1 + 102) = 0;
  *((_DWORD *)v1 + 105) = 0;
  *((_DWORD *)v1 + 104) = 0;
  *((_DWORD *)v1 + 106) = 0;
  *((_DWORD *)v1 + 107) = 0;
  *((_WORD *)v1 + 216) = 0;
  sub_1B20C((int)v1 + 444);
  sub_16888((int)v1 + 472);
  sub_13A04((int)v1 + 4624);
  pthread_mutex_init((pthread_mutex_t *)((char *)v1 + 5032), 0);
  android::VectorImpl::VectorImpl((android::SurfaceFlinger *)((char *)v1 + 5036), 4u, 7u);
  *((_DWORD *)v1 + 1259) = &unk_3FBA4;
  pthread_mutex_init((pthread_mutex_t *)((char *)v1 + 5056), 0);
  *((_WORD *)v1 + 2530) = 0;
  sub_2D064((int)v1 + 5068);
  *((_BYTE *)v1 + 5144) = 0;
  *((_DWORD *)v1 + 1287) = 0;
  *((_BYTE *)v1 + 5152) = 0;
  v11 = (android::SurfaceFlinger *)((char *)v1 + 5156);
  do
  {
    _R1 = (int)v11 + v7;
    v7 += 16;
    __asm { VST1.32         {D8-D9}, [R1] }
  }
  while ( v7 != 64 );
  v13 = 0;
  *(_DWORD *)v11 = 1065353216;
  _R0 = (int)v1 + 5160;
  __asm { VST1.32         {D8-D9}, [R0] }
  *((_DWORD *)v1 + 1294) = 1065353216;
  _R0 = (int)v1 + 5180;
  __asm { VST1.32         {D8-D9}, [R0] }
  *((_DWORD *)v1 + 1299) = 1065353216;
  _R0 = (int)v1 + 5200;
  __asm { VST1.32         {D8-D9}, [R0] }
  *((_DWORD *)v1 + 1304) = 1065353216;
  *((_BYTE *)v1 + 5220) = 0;
  pthread_mutex_init((pthread_mutex_t *)((char *)v1 + 5224), 0);
  *((_WORD *)v1 + 2614) = 0;
  *((_BYTE *)v1 + 5238) = 0;
  *((_WORD *)v1 + 2618) = 0;
  *((_DWORD *)v1 + 1308) = 0;
  _aeabi_memset((char *)v1 + 5240, 80, 0);
  pthread_mutex_init((pthread_mutex_t *)v1 + 222, 0);
  v17 = 0xFFFF4436;
  _android_log_print(4, "SurfaceFlinger", "SurfaceFlinger is starting");
  property_get("ro.config.ROG", &v23, "false");
  if ( !strcmp(&v23, "true") )
  {
    property_get("persist.sys.res.level", &v23, "0");
    unk_45028 = atoi(&v23);
    property_get("persist.sys.res.levelchanged", &v23, "0");
    unk_4502C = atoi(&v23);
    property_get("persist.sys.default.res.xres", &v23, "0");
    if ( atoi(&v23) <= 0 )
      property_set("persist.sys.default.res.xres", v0);
    property_get("persist.sys.default.res.yres", &v23, "0");
    v17 = 0xFFFF4436;
    if ( atoi(&v23) <= 0 )
      property_set("persist.sys.default.res.yres", v4);
  }
  property_get("ro.bq.gpu_to_cpu_unsupported", &v23, "0");
  if ( !atoi(&v23) )
    v13 = 1;
  *((_BYTE *)v1 + 216) = v13;
  property_get("debug.sf.showupdates", &v23, "0");
  *((_DWORD *)v1 + 95) = atoi(&v23);
  property_get("debug.sf.ddms", &v23, "0");
  v18 = atoi(&v23);
  *((_DWORD *)v1 + 96) = v18;
  if ( v18 && !sub_1BFA8() )
    *((_DWORD *)v1 + 96) = 0;
  if ( *(_DWORD *)_R10 )
    _android_log_print(4, (char *)&GLOBAL_OFFSET_TABLE_ + v17, "showupdates enabled");
  if ( *((_DWORD *)v1 + 96) )
    _android_log_print(4, (char *)&GLOBAL_OFFSET_TABLE_ + v17, "DDMS debugging enabled");
  property_get("sys.refresh.dirty", &v23, "0");
  *((_DWORD *)v1 + 109) = atoi(&v23);
  property_get("debug.refresh.dirty", &v23, "0");
  *((_DWORD *)v1 + 110) = atoi(&v23);
  property_get("persist.sys.perftest.enable", &v23, "false");
  v19 = strcmp(&v23, "true");
  v20 = 0;
  if ( !v19 )
    v20 = 1;
  *((_BYTE *)v1 + 5324) = v20;
  if ( v0 != v24 )
    _stack_chk_fail(v0 - v24);
  return v1;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10860: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 416F8: using guessed type void *off_416F8;
// 417B0: using guessed type void *off_417B0;
// 41800: using guessed type void *off_41800;
// 41854: using guessed type void *off_41854;
// 41894: using guessed type void *off_41894;
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001C4EC) --------------------------------------------------------
_DWORD *__fastcall sub_1C4EC(_DWORD *a1)
{
  void *v1; // r4@1
  _DWORD *result; // r0@3
  _DWORD *v3; // [sp+4h] [bp-Ch]@1

  v1 = a1 + 111;
  v3 = a1;
  if ( a1 )
    android::RefBase::incStrong((android::RefBase *)((char *)a1 + *(_DWORD *)(*a1 - 12)), &v3);
  sub_1B290(v1, (char **)&v3);
  result = v3;
  if ( v3 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v3 + *(_DWORD *)(*v3 - 12)), &v3);
  return result;
}

//----- (0001C524) --------------------------------------------------------
_DWORD *__fastcall sub_1C524(char *a1)
{
  return sub_1C4EC(&a1[*(_DWORD *)(*(_DWORD *)a1 - 16)]);
}

//----- (0001C530) --------------------------------------------------------
int __fastcall sub_1C530(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int v4; // r6@1
  android::RefBase *v5; // r0@1
  signed int v6; // r6@3
  char *v7; // r0@5
  signed int v8; // r6@7
  char *v9; // r0@8
  char *v10; // r0@11
  char *v11; // r0@13
  char *v12; // r0@15
  char *v13; // r0@17

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 76);
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 80);
  *(_DWORD *)(v2 + 16) = *(_DWORD *)(a2 + 84);
  *(_DWORD *)(v2 + 20) = *(_DWORD *)(a2 + 88);
  *(_DWORD *)(v2 + 24) = &unk_41868;
  v4 = eglGetDisplay(0);
  eglMakeCurrent(v4);
  eglTerminate(v4);
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 5328));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 5224));
  v5 = *(android::RefBase **)(v2 + 5148);
  if ( v5 )
    android::RefBase::decStrong(v5, (const void *)(v2 + 5148));
  android::Nsd::postDraw((android::Nsd *)(v2 + 5068));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 5056));
  *(_DWORD *)(v2 + 5036) = &unk_3FBA4;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 5036));
  android::VectorImpl::~VectorImpl((android::VectorImpl *)(v2 + 5036));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 5032));
  sub_13B78(v2 + 4624);
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 4616));
  v6 = 4096;
  do
  {
    sub_17AF0((unsigned int **)(v2 + v6 + 468));
    sub_17AF0((unsigned int **)(v2 + v6 + 464));
    v6 -= 32;
  }
  while ( v6 );
  sub_1B220((void *)(v2 + 444));
  sub_1BF7C((unsigned int **)(v2 + 376));
  *(_DWORD *)(v2 + 356) = &unk_3F9AC;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 356));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 356));
  android::String8::~String8((android::String8 *)(v2 + 344));
  v7 = *(char **)(v2 + 292);
  if ( v7 )
    android::RefBase::decStrong((android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)], (const void *)(v2 + 292));
  *(_DWORD *)(v2 + 268) = &unk_3F980;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 268));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 268));
  *(_DWORD *)(v2 + 248) = &unk_3FB00;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 248));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 248));
  v8 = 244;
  do
  {
    v9 = *(char **)(v2 + v8);
    if ( v9 )
      android::RefBase::decStrong((android::RefBase *)&v9[*(_DWORD *)(*(_DWORD *)v9 - 12)], (const void *)(v2 + v8));
    v8 -= 4;
  }
  while ( v8 != 236 );
  v10 = *(char **)(v2 + 228);
  if ( v10 )
    android::RefBase::decStrong((android::RefBase *)&v10[*(_DWORD *)(*(_DWORD *)v10 - 12)], (const void *)(v2 + 228));
  v11 = *(char **)(v2 + 224);
  if ( v11 )
    android::RefBase::decStrong((android::RefBase *)&v11[*(_DWORD *)(*(_DWORD *)v11 - 12)], (const void *)(v2 + 224));
  v12 = *(char **)(v2 + 220);
  if ( v12 )
    android::RefBase::decStrong((android::RefBase *)&v12[*(_DWORD *)(*(_DWORD *)v12 - 12)], (const void *)(v2 + 220));
  *(_DWORD *)(v2 + 168) = &unk_3FB64;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 168));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 168));
  *(_DWORD *)(v2 + 148) = &unk_3F624;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 148));
  android::VectorImpl::~VectorImpl((android::VectorImpl *)(v2 + 148));
  pthread_cond_destroy((pthread_cond_t *)(v2 + 140));
  android::String8::~String8((android::String8 *)(v2 + 128));
  v13 = *(char **)(v2 + 76);
  if ( v13 )
    android::RefBase::decStrong((android::RefBase *)&v13[*(_DWORD *)(*(_DWORD *)v13 - 12)], (const void *)(v2 + 76));
  *(_DWORD *)(v2 + 52) = &unk_3F980;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 52));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 52));
  *(_DWORD *)(v2 + 32) = &unk_3FB00;
  android::VectorImpl::finish_vector((android::VectorImpl *)(v2 + 32));
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)(v2 + 32));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 28));
  android::BBinder::~BBinder((android::BBinder *)(v2 + 4));
  return j_android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v2);
}
// 10758: using guessed type int __fastcall eglGetDisplay(_DWORD);
// 1080C: using guessed type int __fastcall eglMakeCurrent(_DWORD);
// 10E3C: using guessed type int __fastcall eglTerminate(_DWORD);

//----- (0001C820) --------------------------------------------------------
int __fastcall sub_1C820(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1C530(a1, (int)off_3F8F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 5332));
  return v1;
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001C870) --------------------------------------------------------
int __fastcall sub_1C870(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1C530(a1 - 16, (int)off_3F8F0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 5316));
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001C89C) --------------------------------------------------------
int __fastcall sub_1C89C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1C530(a1 - 20, (int)off_3F8F0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 5312));
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001C8F0) --------------------------------------------------------
int __fastcall sub_1C8F0(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_1C530((int)a1 + *(_DWORD *)(*a1 - 12), (int)off_3F8F0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 5332));
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001C920) --------------------------------------------------------
void __fastcall sub_1C920(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1C530(a1, (int)off_3F8F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 5332));
  j_operator delete((void *)v1);
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001C984) --------------------------------------------------------
void __fastcall sub_1C984(int a1)
{
  int v1; // r4@1
  void *v2; // r5@1

  v1 = a1;
  v2 = (void *)(a1 - 16);
  sub_1C530(a1 - 16, (int)off_3F8F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 5316));
  j_operator delete(v2);
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001C9B8) --------------------------------------------------------
void __fastcall sub_1C9B8(int a1)
{
  int v1; // r4@1
  void *v2; // r5@1

  v1 = a1;
  v2 = (void *)(a1 - 20);
  sub_1C530(a1 - 20, (int)off_3F8F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 5312));
  j_operator delete(v2);
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001CA20) --------------------------------------------------------
void __fastcall sub_1CA20(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_1C530(v1, (int)off_3F8F0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 5332));
  j_operator delete((void *)v1);
}
// 3F8F0: using guessed type void **off_3F8F0[3];

//----- (0001CA54) --------------------------------------------------------
int __fastcall sub_1CA54(int a1)
{
  int v1; // r4@1
  int result; // r0@1

  v1 = a1;
  sub_1CAA0(a1);
  result = *(_BYTE *)(v1 + 5320);
  if ( !(result & 8) )
  {
    property_set("service.bootanim.exit", "0");
    result = j_j_property_set((int)"ctl.start", (int)"bootanim");
  }
  return result;
}
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);

//----- (0001CAA0) --------------------------------------------------------
_DWORD *__fastcall sub_1CAA0(int a1)
{
  int v1; // r4@1
  int v2; // r0@1
  int v3; // r5@1
  android::RefBase *v4; // r6@1
  _DWORD *result; // r0@1
  _DWORD *v6; // [sp+4h] [bp-1Ch]@1

  v1 = a1;
  v2 = operator new(0x1Cu);
  v3 = v2;
  v4 = (android::RefBase *)(v2 + 20);
  android::RefBase::RefBase((android::RefBase *)(v2 + 20));
  sub_1AE68((_DWORD *)v3, (int)off_3FA74);
  v6 = (_DWORD *)v3;
  *(_DWORD *)v3 = &off_421F8;
  *(_DWORD *)(v3 + 16) = v1;
  *(_DWORD *)(v3 + 20) = &off_42224;
  android::RefBase::incStrong(v4, &v6);
  sub_1B414(v1 + 444, (char **)&v6, 0, 0);
  result = v6;
  if ( v6 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v6 + *(_DWORD *)(*v6 - 12)), &v6);
  return result;
}
// 3FA74: using guessed type void **[5];
// 421F8: using guessed type void *off_421F8;
// 42224: using guessed type void *off_42224;

//----- (0001CB18) --------------------------------------------------------
int __fastcall sub_1CB18(int a1)
{
  return sub_1CA54(a1 - 20);
}

//----- (0001CB20) --------------------------------------------------------
android::Nsd *__fastcall sub_1CB20(_DWORD *a1, char *a2)
{
  void *v2; // r4@1
  char *v3; // r6@1
  android::Nsd *v4; // r5@1
  int v5; // r0@3
  void *v6; // r1@3
  android::Nsd *result; // r0@7
  char *v8; // [sp+0h] [bp-18h]@1
  android::Nsd *v9; // [sp+4h] [bp-14h]@3

  v2 = a1;
  *a1 = 0;
  v3 = a2;
  v4 = (android::Nsd *)operator new(0x3Cu);
  v8 = v3;
  if ( v3 )
    android::RefBase::incStrong((android::RefBase *)&v3[*(_DWORD *)(*(_DWORD *)v3 - 12)], &v8);
  sub_11F64((int)v4, &v8);
  v5 = *(_DWORD *)v4;
  v9 = v4;
  android::RefBase::incStrong((android::Nsd *)((char *)v4 + *(_DWORD *)(v5 - 12)), &v9);
  if ( v8 )
    android::RefBase::decStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], &v8);
  if ( !android::Nsd::isSupportAFBC(v9, v6) )
    sub_123A8(v2, (char **)&v9);
  result = v9;
  if ( v9 )
    result = (android::Nsd *)android::RefBase::decStrong(
                               (android::Nsd *)((char *)v9 + *(_DWORD *)(*(_DWORD *)v9 - 12)),
                               &v9);
  return result;
}

//----- (0001CB98) --------------------------------------------------------
_DWORD *__fastcall sub_1CB98(const void *a1, _DWORD *a2, const android::String8 *a3, char a4)
{
  const void *v4; // r8@1
  char v5; // r9@1
  const android::String8 *v6; // r7@1
  _DWORD *v7; // r5@1
  int v8; // r4@1
  _DWORD *v9; // r0@3
  char *v10; // r2@3
  bool v11; // zf@3
  android::String8 *v12; // r6@7
  char *v13; // r0@11
  _DWORD *result; // r0@15
  _DWORD *v15; // [sp+0h] [bp-70h]@7
  android::RefBase::weakref_type *v16; // [sp+4h] [bp-6Ch]@8
  char v17; // [sp+8h] [bp-68h]@7
  char *v18; // [sp+Ch] [bp-64h]@13
  char v19; // [sp+44h] [bp-2Ch]@7
  char *v20; // [sp+48h] [bp-28h]@1
  _DWORD *v21; // [sp+4Ch] [bp-24h]@5

  v4 = a1;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  v8 = operator new(0x18u);
  v20 = (char *)v7;
  if ( v7 )
    android::RefBase::incStrong((android::RefBase *)((char *)v7 + *(_DWORD *)(*v7 - 12)), &v20);
  android::RefBase::RefBase((android::RefBase *)(v8 + 16));
  android::BBinder::BBinder((android::BBinder *)v8);
  v9 = &unk_41E00;
  *(_DWORD *)v8 = &unk_41E00;
  *(_DWORD *)(v8 + 16) = &off_41E60;
  v10 = v20;
  v11 = v20 == 0;
  *(_DWORD *)(v8 + 12) = v20;
  if ( !v11 )
  {
    android::RefBase::incStrong((android::RefBase *)&v10[*(_DWORD *)(*(_DWORD *)v10 - 12)], (const void *)(v8 + 12));
    v9 = *(_DWORD **)v8;
  }
  v21 = (_DWORD *)v8;
  android::RefBase::incStrong((android::RefBase *)(*(v9 - 3) + v8), &v21);
  if ( v20 )
    android::RefBase::decStrong((android::RefBase *)&v20[*(_DWORD *)(*(_DWORD *)v20 - 12)], &v20);
  pthread_mutex_lock((pthread_mutex_t *)(v7 + 7));
  v12 = (android::String8 *)(sub_24704((int)&v17, 2) + 56);
  android::String8::setTo(v12, v6);
  v19 = v5;
  v15 = v21;
  if ( v21 )
    v16 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)((char *)v21 + *(_DWORD *)(*v21 - 12)),
                                              &v15);
  sub_1CCD0((android::SortedVectorImpl *)(v7 + 13), (int)&v15, (int)&v17);
  if ( v15 )
    android::RefBase::weakref_type::decWeak(v16, &v15);
  v13 = (char *)v21;
  v11 = v21 == 0;
  *(_DWORD *)v4 = v21;
  if ( !v11 )
    android::RefBase::incStrong((android::RefBase *)&v13[*(_DWORD *)(*(_DWORD *)v13 - 12)], v4);
  android::String8::~String8(v12);
  if ( v18 )
    android::RefBase::decStrong((android::RefBase *)&v18[*(_DWORD *)(*(_DWORD *)v18 - 12)], &v18);
  pthread_mutex_unlock((pthread_mutex_t *)(v7 + 7));
  result = v21;
  if ( v21 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v21 + *(_DWORD *)(*v21 - 12)), &v21);
  return result;
}
// 41E60: using guessed type void *off_41E60;

//----- (0001CCD0) --------------------------------------------------------
int __fastcall sub_1CCD0(android::SortedVectorImpl *a1, int a2, int a3)
{
  android::SortedVectorImpl *v3; // r4@1
  int v4; // r4@1
  int v6; // [sp+0h] [bp-58h]@1
  android::RefBase::weakref_type *v7; // [sp+4h] [bp-54h]@4
  char *v8; // [sp+Ch] [bp-4Ch]@1
  int v9; // [sp+40h] [bp-18h]@1

  v3 = a1;
  sub_26A88(&v6, a2, a3);
  v4 = android::SortedVectorImpl::add(v3, &v6);
  android::String8::~String8((android::String8 *)&v9);
  if ( v8 )
    android::RefBase::decStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], &v8);
  if ( v6 )
    android::RefBase::weakref_type::decWeak(v7, &v6);
  return v4;
}

//----- (0001CD1C) --------------------------------------------------------
int __fastcall sub_1CD1C(int a1, char **a2)
{
  int v2; // r5@1
  char **v3; // r6@1
  pthread_mutex_t *v4; // r4@1
  char *v5; // r0@1
  int v6; // r7@3
  unsigned int *v7; // r0@7
  unsigned int v8; // r1@8
  char *v10; // [sp+0h] [bp-20h]@1
  android::RefBase::weakref_type *v11; // [sp+4h] [bp-1Ch]@2

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 28);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 28));
  v5 = *v3;
  v10 = v5;
  if ( v5 )
    v11 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)],
                                              &v10);
  v6 = sub_1CDF0((android::SortedVectorImpl *)(v2 + 52), (int)&v10);
  if ( v10 )
    android::RefBase::weakref_type::decWeak(v11, &v10);
  if ( v6 <= -1 )
  {
    _android_log_print(5, "SurfaceFlinger", "destroyDisplay: invalid display token");
  }
  else if ( *(_DWORD *)(*(_DWORD *)(v2 + 56) + 72 * v6 + 8) <= 1 )
  {
    _android_log_print(6, "SurfaceFlinger", "destroyDisplay called for non-virtual display");
  }
  else
  {
    android::VectorImpl::removeItemsAt((android::VectorImpl *)(v2 + 52), v6, 1u);
    v7 = (unsigned int *)(v2 + 136);
    __dmb();
    do
      v8 = __ldrex(v7);
    while ( __strex(v8 | 4, v7) );
    if ( !(v8 & 4) )
      sub_1B4B0(v2 + 444);
  }
  return pthread_mutex_unlock(v4);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001CDF0) --------------------------------------------------------
int __fastcall sub_1CDF0(android::SortedVectorImpl *a1, int a2)
{
  android::SortedVectorImpl *v2; // r4@1
  int v3; // r4@1
  int v5; // [sp+0h] [bp-58h]@1
  android::RefBase::weakref_type *v6; // [sp+4h] [bp-54h]@4
  char *v7; // [sp+Ch] [bp-4Ch]@1
  int v8; // [sp+40h] [bp-18h]@1

  v2 = a1;
  sub_26A44(&v5, a2);
  v3 = android::SortedVectorImpl::indexOf(v2, &v5);
  android::String8::~String8((android::String8 *)&v8);
  if ( v7 )
    android::RefBase::decStrong((android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)], &v7);
  if ( v5 )
    android::RefBase::weakref_type::decWeak(v6, &v5);
  return v3;
}

//----- (0001CE3C) --------------------------------------------------------
unsigned int __fastcall sub_1CE3C(int a1, int a2)
{
  unsigned int *v2; // r12@1
  unsigned int v3; // r4@2

  v2 = (unsigned int *)(a1 + 136);
  __dmb();
  do
    v3 = __ldrex(v2);
  while ( __strex(v3 | a2, v2) );
  if ( !(v3 & a2) )
    sub_1B4B0(a1 + 444);
  return v3;
}

//----- (0001CE68) --------------------------------------------------------
_DWORD *__fastcall sub_1CE68(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r4@1
  int v4; // r5@1
  void *v5; // r5@1
  int v6; // t1@1
  android::BBinder *v7; // r7@3
  char *v8; // r0@3
  _DWORD *result; // r0@7
  char *v10; // [sp+0h] [bp-60h]@3
  android::RefBase::weakref_type *v11; // [sp+4h] [bp-5Ch]@4
  char v12; // [sp+8h] [bp-58h]@3
  _DWORD *v13; // [sp+Ch] [bp-54h]@7
  int v14; // [sp+40h] [bp-20h]@7
  char v15; // [sp+44h] [bp-1Ch]@3

  v2 = a2;
  v3 = a1;
  v4 = a1 + 4 * a2;
  v6 = *(_DWORD *)(v4 + 240);
  v5 = (void *)(v4 + 240);
  if ( v6 )
    _android_log_print(5, "SurfaceFlinger", "Overwriting display token for display type %d", a2);
  v7 = (android::BBinder *)operator new(0x14u);
  android::BBinder::BBinder(v7);
  sub_176BC(v5, (char *)v7);
  sub_24704((int)&v12, v2);
  v15 = 1;
  v8 = *(char **)v5;
  v10 = v8;
  if ( v8 )
    v11 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)],
                                              &v10);
  sub_1CCD0((android::SortedVectorImpl *)(v3 + 52), (int)&v10, (int)&v12);
  if ( v10 )
    android::RefBase::weakref_type::decWeak(v11, &v10);
  android::String8::~String8((android::String8 *)&v14);
  result = v13;
  if ( v13 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v13 + *(_DWORD *)(*v13 - 12)), &v13);
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001CF18) --------------------------------------------------------
char *__fastcall sub_1CF18(void *a1, int a2, unsigned int a3)
{
  void *v3; // r4@1
  char *result; // r0@2

  v3 = a1;
  if ( a3 < 2 )
  {
    result = *(char **)(a2 + 4 * a3 + 240);
    *(_DWORD *)v3 = result;
    if ( result )
      result = (char *)android::RefBase::incStrong((android::RefBase *)&result[*(_DWORD *)(*(_DWORD *)result - 12)], v3);
  }
  else
  {
    _android_log_print(6, "SurfaceFlinger", "getDefaultDisplay: id=%d is not a valid default display id");
    result = 0;
    *(_DWORD *)v3 = 0;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001CF64) --------------------------------------------------------
char *__fastcall sub_1CF64(const void *a1)
{
  const void *v1; // r4@1
  android::GraphicBufferAlloc *v2; // r0@1
  char *v3; // r0@1
  int v4; // r1@1
  char *result; // r0@1
  bool v6; // zf@1
  char *v7; // [sp+4h] [bp-Ch]@1

  v1 = a1;
  v2 = (android::GraphicBufferAlloc *)operator new(0x18u);
  v3 = (char *)android::GraphicBufferAlloc::GraphicBufferAlloc(v2);
  v4 = *(_DWORD *)v3;
  v7 = v3;
  android::RefBase::incStrong((android::RefBase *)&v3[*(_DWORD *)(v4 - 12)], &v7);
  result = v7;
  v6 = v7 == 0;
  *(_DWORD *)v1 = v7;
  if ( !v6 )
  {
    android::RefBase::incStrong((android::RefBase *)&result[*(_DWORD *)(*(_DWORD *)result - 12)], v1);
    result = v7;
  }
  if ( result )
    result = (char *)android::RefBase::decStrong((android::RefBase *)&result[*(_DWORD *)(*(_DWORD *)result - 12)], &v7);
  return result;
}

//----- (0001CFB0) --------------------------------------------------------
int __fastcall sub_1CFB0(int a1)
{
  int v1; // r4@1
  __int64 v2; // r0@1
  int v3; // r5@3
  void (__fastcall *v4)(int, char **, _DWORD, _DWORD); // r6@4
  char *v6; // [sp+0h] [bp-20h]@4
  int v7; // [sp+4h] [bp-1Ch]@1
  int v8; // [sp+8h] [bp-18h]@1
  char v9; // [sp+Ch] [bp-14h]@1

  v1 = a1;
  LODWORD(v2) = systemTime(1);
  _android_log_print(
    4,
    "SurfaceFlinger",
    "Boot is finished (%ld ms)",
    (unsigned int)((v2 - *(_QWORD *)(v1 + 208)) / 1000000));
  *(_BYTE *)(v1 + 432) = 1;
  android::String16::String16((android::String16 *)&v9, "window");
  android::defaultServiceManager((android *)&v7);
  (*(void (__fastcall **)(int *))(*(_DWORD *)v7 + 16))(&v8);
  if ( v7 )
    android::RefBase::decStrong((android::RefBase *)(v7 + *(_DWORD *)(*(_DWORD *)v7 - 12)), &v7);
  v3 = v8;
  if ( v8 )
  {
    v4 = *(void (__fastcall **)(int, char **, _DWORD, _DWORD))(*(_DWORD *)v8 + 24);
    v6 = (char *)(v1 + 20);
    android::RefBase::incStrong((android::RefBase *)(v1 + 20 + *(_DWORD *)(*(_DWORD *)(v1 + 20) - 12)), &v6);
    v4(v3, &v6, 0, 0);
    if ( v6 )
      android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], &v6);
  }
  if ( unk_4502C >= 1 )
  {
    unk_4502C = 0;
    property_set("persist.sys.res.levelchanged", "0");
  }
  property_set("service.bootanim.exit", "1");
  if ( v8 )
    android::RefBase::decStrong((android::RefBase *)(v8 + *(_DWORD *)(*(_DWORD *)v8 - 12)), &v8);
  return android::String16::~String16((android::String16 *)&v9);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001D0D4) --------------------------------------------------------
int __fastcall sub_1D0D4(int a1)
{
  return sub_1CFB0(a1 - 16);
}

//----- (0001D0DC) --------------------------------------------------------
int __fastcall sub_1D0DC(int a1)
{
  unsigned int *v1; // r1@1
  unsigned int v2; // r2@2

  v1 = (unsigned int *)(a1 + 192);
  __dmb();
  do
    v2 = __ldrex(v1);
  while ( __strex(v2 | 1, v1) );
  return sub_1B4B0(a1 + 444);
}

//----- (0001D11C) --------------------------------------------------------
_DWORD *__fastcall sub_1D11C(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r8@1
  int v4; // r0@1
  int v5; // r6@1
  int v6; // r5@1
  android::RefBase *v7; // r7@1
  _DWORD *result; // r0@1
  _DWORD *v9; // [sp+4h] [bp-24h]@1

  v2 = a1;
  v3 = a2;
  v4 = operator new(0x20u);
  v5 = v4;
  v6 = *(_DWORD *)(v2 + 200);
  v7 = (android::RefBase *)(v4 + 24);
  android::RefBase::RefBase((android::RefBase *)(v4 + 24));
  sub_1AE68((_DWORD *)v5, (int)off_3F9F4);
  v9 = (_DWORD *)v5;
  *(_DWORD *)v5 = &off_41F9C;
  *(_DWORD *)(v5 + 16) = v6;
  *(_DWORD *)(v5 + 20) = v3;
  *(_DWORD *)(v5 + 24) = &off_41FC8;
  android::RefBase::incStrong(v7, &v9);
  sub_1B414(v2 + 444, (char **)&v9, 0, 0);
  result = v9;
  if ( v9 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v9 + *(_DWORD *)(*v9 - 12)), &v9);
  return result;
}
// 3F9F4: using guessed type void **[5];
// 41F9C: using guessed type void *off_41F9C;
// 41FC8: using guessed type void *off_41FC8;

//----- (0001D1A0) --------------------------------------------------------
int __fastcall sub_1D1A0(int a1, char **a2, int a3, int a4)
{
  return sub_1B414(a1 + 444, a2, a3, a4);
}

//----- (0001D854) --------------------------------------------------------
int __fastcall sub_1D854(android::SortedVectorImpl *a1, int a2, unsigned int **a3)
{
  android::SortedVectorImpl *v3; // r4@1
  int v4; // r4@1
  int v6; // [sp+4h] [bp-1Ch]@1
  android::RefBase::weakref_type *v7; // [sp+8h] [bp-18h]@2
  int v8; // [sp+Ch] [bp-14h]@1

  v3 = a1;
  sub_26B1C(&v6, a2, a3);
  v4 = android::SortedVectorImpl::add(v3, &v6);
  sub_1BF7C((unsigned int **)&v8);
  if ( v6 )
    android::RefBase::weakref_type::decWeak(v7, &v6);
  return v4;
}

//----- (0001D88C) --------------------------------------------------------
int __fastcall sub_1D88C(int a1, int a2, __int64 a3, char a4, int a5)
{
  int v5; // r4@1
  __int64 v6; // r8@1
  int v7; // r5@1
  int result; // r0@1

  v5 = a1;
  v6 = a3;
  v7 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 52));
  *(_DWORD *)(v5 + 52) = &off_420D4;
  *(_DWORD *)v5 = &off_42088;
  *(_DWORD *)(v5 + 4) = &off_420AC;
  *(_DWORD *)(v5 + 8) = 0;
  *(_BYTE *)(v5 + 12) = a4;
  android::String8::format((android::String8 *)(v5 + 16), "VsyncOn-%s", a5);
  android::String8::format((android::String8 *)(v5 + 20), "VSYNC-%s", a5);
  *(_DWORD *)(v5 + 24) = v7;
  pthread_mutex_init((pthread_mutex_t *)(v5 + 28), 0);
  *(_DWORD *)(v5 + 32) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v5 + 36), 0);
  result = v5;
  *(_QWORD *)(v5 + 40) = v6;
  *(_BYTE *)(v5 + 48) = 0;
  return result;
}
// 42088: using guessed type void *off_42088;
// 420AC: using guessed type void *off_420AC;
// 420D4: using guessed type void *off_420D4;

//----- (0001D918) --------------------------------------------------------
int __fastcall sub_1D918(int a1)
{
  int v1; // r4@1
  pthread_mutex_t *v2; // r5@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 5224);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 5224));
  if ( *(_BYTE *)(v1 + 5229) )
    *(_BYTE *)(v1 + 5228) = 1;
  *(_BYTE *)(v1 + 5236) = 0;
  return j_j_pthread_mutex_unlock(v2);
}

//----- (0001D94C) --------------------------------------------------------
int __fastcall sub_1D94C(int a1, int a2)
{
  int v2; // r5@1
  pthread_mutex_t *v3; // r4@1
  int v4; // r6@1
  signed int v5; // r1@2
  int v6; // r0@3
  signed int v7; // r0@7
  signed int v8; // r3@7
  int v9; // r3@9
  int v10; // r1@9

  v2 = a1;
  v3 = (pthread_mutex_t *)(a1 + 5224);
  v4 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 5224));
  if ( *(_BYTE *)(*(_DWORD *)(v2 + 220) + 153) )
  {
    v5 = 1;
  }
  else
  {
    v6 = *(_DWORD *)(v2 + 224);
    v5 = *(_BYTE *)(v6 + 153);
    if ( *(_BYTE *)(v6 + 153) )
      v5 = 1;
  }
  *(_BYTE *)(v2 + 5229) = v4;
  if ( !v4 )
    *(_BYTE *)(v2 + 5228) = 0;
  v7 = *(_BYTE *)(v2 + 5236);
  v8 = *(_BYTE *)(v2 + 5236);
  if ( *(_BYTE *)(v2 + 5236) )
    v8 = 1;
  v9 = v8 | v5;
  v10 = v4 ^ 1;
  if ( !v9 )
    v7 = 0;
  if ( !v9 && !v10 )
  {
    v7 = 1;
    *(_BYTE *)(v2 + 5236) = 1;
  }
  if ( !*(_BYTE *)(v2 + 5228) && !v10 && v7 )
    sub_1424C(v2 + 4624);
  return j_j_pthread_mutex_unlock(v3);
}

//----- (0001D9D0) --------------------------------------------------------
unsigned int **__fastcall sub_1D9D0(int a1, int a2)
{
  int v2; // r8@1
  int v3; // r9@1
  int v4; // r4@1
  int v5; // r5@1
  int v6; // r10@2
  int v7; // r4@2
  int v8; // r0@3
  int v9; // r11@3
  int v10; // r6@3
  int v11; // r7@3
  int v13; // [sp+0h] [bp-28h]@1

  v2 = a1;
  v3 = a2;
  v4 = *(_DWORD *)(a2 + 8);
  sub_17760((unsigned int **)&v13, a1);
  v5 = v4 - 1;
  if ( v4 - 1 < 0 )
  {
    v7 = 0;
  }
  else
  {
    v6 = v13;
    v7 = 0;
    do
    {
      v8 = *(_DWORD *)(*(_DWORD *)(v3 + 4) + 4 * v5);
      v9 = *(_DWORD *)(v8 + 264);
      v10 = *(_DWORD *)(v8 + 268);
      v11 = sub_132EC(v6);
      --v5;
      if ( v10 * v9 > 3 * sub_132F0(v6) * v11 / 4 )
        ++v7;
    }
    while ( v5 > -1 );
  }
  *(_DWORD *)(v2 + 5232) = v7;
  return sub_1BF7C((unsigned int **)&v13);
}

//----- (0001DA4C) --------------------------------------------------------
signed int __fastcall sub_1DA4C(int a1, int a2, int a3)
{
  int v3; // r0@1
  int v4; // r5@1
  int v5; // r4@1
  signed int result; // r0@3

  v3 = *(_DWORD *)(a1 + 196);
  v4 = a3;
  v5 = a2;
  if ( v3 && !sub_2A6B4(v3) )
  {
    _android_log_print(6, "SurfaceFlinger", "request channel fail, must = %d, channel = %d", v5, v4);
    result = -1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001DA9C) --------------------------------------------------------
signed int __fastcall sub_1DA9C(int a1)
{
  int v1; // r0@1
  signed int result; // r0@3

  v1 = *(_DWORD *)(a1 + 196);
  if ( v1 && !sub_2A6F0(v1) )
  {
    _android_log_print(6, "SurfaceFlinger", "release channe fail");
    result = -1;
  }
  else
  {
    result = 0;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001DADC) --------------------------------------------------------
int __fastcall sub_1DADC(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 200) + 64))();
}

//----- (0001DAE8) --------------------------------------------------------
int __fastcall sub_1DAE8(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 200) + 68))();
}

//----- (0001DAF4) --------------------------------------------------------
signed int __fastcall sub_1DAF4(int a1, char **a2)
{
  int v2; // r5@1
  char **v3; // r6@1
  pthread_mutex_t *v4; // r4@1
  char *v5; // r0@1
  int *v6; // r6@6
  signed int v7; // r5@8
  signed int result; // r0@12
  _DWORD *v9; // [sp+0h] [bp-20h]@5
  android::RefBase::weakref_type *v10; // [sp+4h] [bp-1Ch]@6
  char *v11; // [sp+8h] [bp-18h]@1
  _DWORD *v12; // [sp+Ch] [bp-14h]@3

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 28);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 28));
  v5 = *v3;
  v11 = *v3;
  if ( v11 )
    android::RefBase::incStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], &v11);
  android::IInterface::asBinder(&v12, &v11);
  if ( v11 )
    android::RefBase::decStrong((android::RefBase *)&v11[*(_DWORD *)(*(_DWORD *)v11 - 12)], &v11);
  v9 = v12;
  if ( v12 )
  {
    v6 = (int *)&v9;
    v10 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)((char *)v12 + *(_DWORD *)(*v12 - 12)),
                                              &v9);
  }
  else
  {
    v6 = (int *)&v9;
  }
  v7 = android::SortedVectorImpl::indexOf((android::SortedVectorImpl *)(v2 + 168), v6);
  if ( v9 )
    android::RefBase::weakref_type::decWeak(v10, v6);
  if ( v12 )
    android::RefBase::decStrong((android::RefBase *)((char *)v12 + *(_DWORD *)(*v12 - 12)), &v12);
  pthread_mutex_unlock(v4);
  result = 0;
  if ( v7 > -1 )
    result = 1;
  return result;
}
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);

//----- (0001DB98) --------------------------------------------------------
signed int __fastcall sub_1DB98(int a1, _DWORD *a2, android::VectorImpl *a3)
{
  android::VectorImpl *v3; // r4@1
  int v4; // r5@1
  int v5; // r6@3
  signed int v6; // r2@6
  int v8; // r0@10
  int *v9; // r5@11
  int *v14; // r7@11
  char v15; // r9@11
  int v16; // r8@11
  unsigned int v17; // r10@11
  int v18; // r1@12
  __int64 v25; // r0@23
  int v27; // [sp+20h] [bp-A8h]@14
  android::VectorImpl *v28; // [sp+24h] [bp-A4h]@1
  int v29; // [sp+28h] [bp-A0h]@1
  int v30; // [sp+2Ch] [bp-9Ch]@10
  int v31; // [sp+34h] [bp-94h]@22
  int v32; // [sp+38h] [bp-90h]@11
  int v33; // [sp+3Ch] [bp-8Ch]@23
  int v34; // [sp+4Ch] [bp-7Ch]@13
  char v35; // [sp+50h] [bp-78h]@13
  char v36; // [sp+51h] [bp-77h]@23
  signed int v37; // [sp+58h] [bp-70h]@12
  int v38; // [sp+5Ch] [bp-6Ch]@23
  int v39; // [sp+60h] [bp-68h]@11

  v3 = a3;
  v4 = a1;
  v28 = a3;
  v29 = a1;
  if ( a3 && *a2 )
  {
    v5 = 0;
    while ( *a2 != *(_DWORD *)(a1 + 4 * v5 + 240) )
    {
      if ( ++v5 >= 2 )
        return -2;
    }
    if ( v5 < 0 )
    {
      v6 = v5;
    }
    else
    {
      android::VectorImpl::clear(a3);
      v8 = sub_295BC(*(_DWORD *)(v4 + 196), v5);
      v6 = 0;
      v30 = v8;
      if ( *(_DWORD *)(v8 + 8) )
      {
        v9 = &v32;
        __asm { VMOV.I32        Q4, #0 }
        v14 = &v39;
        v15 = 0;
        v16 = 0;
        v17 = 0;
        __asm
        {
          VLDR            D11, =1.0e9
          VLDR            S20, =160.0
        }
        do
        {
          v18 = *(_DWORD *)(v8 + 4);
          _R0 = &v37;
          _R11 = v18 + v16;
          __asm { VST1.64         {D8-D9}, [R0] }
          _R0 = v9;
          __asm
          {
            VST1.64         {D8-D9}, [R0]!
            VST1.64         {D8-D9}, [R0]
            VLDR            S24, [R11,#8]
            VLDR            S26, [R11,#0xC]
          }
          if ( _ZF )
          {
            v27 = v18;
            _R9 = sub_2582C((int)"persist.sys.dpi");
            if ( _R9 < 1 || _R9 == sub_2582C((int)"ro.sf.lcd_density") )
              _R9 = sub_2582C((int)"ro.sf.lcd_density");
            __asm
            {
              VMOV            S0, R9
              VCVT.F32.S32    S0, S0
              VDIV.F32        S28, S0, S20
              VCMPE.F32       S28, #0.0
              VMRS            APSR_nzcv, FPSCR
            }
            if ( _ZF )
            {
              _android_log_print(6, "SurfaceFlinger", "ro.sf.lcd_density must be defined as a build property");
              __asm { VDIV.F32        S28, S24, S20 }
            }
            if ( sub_2582C((int)"qemu.sf.lcd_density") )
            {
              _R0 = sub_2582C((int)"qemu.sf.lcd_density");
              __asm
              {
                VMOV            S0, R0
                VCVT.F32.S32    S24, S0
                VDIV.F32        S28, S24, S20
                VMOV.F32        S26, S24
              }
            }
            __asm { VSTR            S28, [SP,#0xC8+var_7C] }
            sub_17760((unsigned int **)&v31, v29);
            v35 = *(_DWORD *)(v31 + 164);
            sub_1BF7C((unsigned int **)&v31);
            v14 = &v39;
            v3 = v28;
            v15 = 0;
            v18 = v27;
          }
          else
          {
            v34 = 1068131942;
            v35 = v15;
          }
          v32 = *(_DWORD *)(v18 + v16);
          v33 = *(_DWORD *)(_R11 + 4);
          __asm
          {
            VSTR            S24, [SP,#0xC8+var_88]
            VSTR            S26, [SP,#0xC8+var_84]
          }
          _R0 = j___floatdidf(*(_QWORD *)(_R11 + 16));
          __asm
          {
            VMOV            D16, R0, R1
            VDIV.F64        D16, D11, D16
            VCVT.F32.F64    S0, D16
            VSTR            S0, [SP,#0xC8+var_80]
          }
          v37 = 7500000;
          v38 = (unsigned __int8)v15;
          v25 = *(_QWORD *)(_R11 + 16);
          _CF = __CFADD__((_DWORD)v25, -4000000);
          LODWORD(v25) = v25 - 4000000;
          HIDWORD(v25) -= !_CF;
          *(_QWORD *)v14 = v25;
          v36 = 1;
          if ( unk_45028 <= 1 && !v5 && unk_45028 )
          {
            _R0 = 12 * unk_45028;
            __asm
            {
              VLDR            S0, [R0,#8]
              VCVT.F32.S32    S0, S0
              VDIV.F32        S0, S0, S20
              VSTR            S0, [SP,#0xC8+var_7C]
            }
          }
          v9 = &v32;
          android::VectorImpl::insertAt(v3, &v32, *((_DWORD *)v3 + 2), 1u);
          v8 = v30;
          v16 += 24;
          ++v17;
        }
        while ( v17 < *(_DWORD *)(v30 + 8) );
        v6 = 0;
      }
    }
  }
  else
  {
    v6 = -22;
  }
  return v6;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001DDF0) --------------------------------------------------------
signed int __fastcall sub_1DDF0(int a1, int a2, int a3)
{
  int v8; // r6@2
  signed int v9; // r5@2
  __int64 v10; // r0@2
  __int64 v11; // r0@2

  _R4 = a3;
  if ( a3 )
  {
    __asm { VMOV.I32        Q8, #0 }
    v8 = a1 + 4624;
    v9 = 0;
    __asm { VST1.64         {D16-D17}, [R4] }
    LODWORD(v10) = sub_14318(a1 + 4624, 0);
    *(_QWORD *)_R4 = v10;
    LODWORD(v11) = sub_142F8(v8);
    *(_QWORD *)(_R4 + 8) = v11;
  }
  else
  {
    v9 = -22;
  }
  return v9;
}

//----- (0001DE28) --------------------------------------------------------
int __fastcall sub_1DE28(int a1, char **a2)
{
  int v2; // r4@1
  char *v3; // r0@1
  int v4; // r0@3
  unsigned int **v5; // r0@4
  unsigned int *v6; // r0@6
  unsigned int v7; // r1@8
  int v8; // r4@12
  char *v10; // [sp+4h] [bp-14h]@1
  android::RefBase::weakref_type *v11; // [sp+8h] [bp-10h]@2
  unsigned int *v12; // [sp+Ch] [bp-Ch]@6

  v2 = a1;
  v3 = *a2;
  v10 = *a2;
  if ( v10 )
    v11 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v3[*(_DWORD *)(*(_DWORD *)v3 - 12)],
                                              &v10);
  v4 = sub_1A49C((android::SortedVectorImpl *)(v2 + 356), (int)&v10);
  if ( v4 < 0 )
    v5 = (unsigned int **)(v2 + 376);
  else
    v5 = (unsigned int **)(*(_DWORD *)(v2 + 360) + 12 * v4 + 8);
  v6 = *v5;
  v12 = v6;
  if ( v6 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
  }
  if ( v10 )
    android::RefBase::weakref_type::decWeak(v11, &v10);
  if ( v12 )
    v8 = sub_135D0((int)v12);
  else
    v8 = -22;
  sub_1BF7C(&v12);
  return v8;
}

//----- (0001DEAC) --------------------------------------------------------
int __fastcall sub_1DEAC(int a1, int *a2, int a3)
{
  int *v3; // r6@1
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r7@1
  int result; // r0@2

  v3 = a2;
  v4 = a1;
  v5 = a3;
  _android_log_print(
    3,
    "SurfaceFlinger",
    "Set active config mode=%d, type=%d flinger=%p",
    a3,
    *(_DWORD *)(*a2 + 72),
    a1);
  v6 = *(_DWORD *)(*v3 + 72);
  if ( sub_135D0(*v3) == v5 )
  {
    result = _android_log_print(3, "SurfaceFlinger", "Screen type=%d is already mode=%d", *(_DWORD *)(*v3 + 72), v5);
  }
  else if ( v6 < 2 )
  {
    sub_135C8(*v3, v5);
    result = sub_2A7FC(*(_DWORD *)(v4 + 196), v6, v5);
  }
  else
  {
    result = _android_log_print(5, "SurfaceFlinger", "Trying to set config for virtual display");
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001DF54) --------------------------------------------------------
int __fastcall sub_1DF54(int a1, char **a2, int a3)
{
  int v3; // r4@1
  int v4; // r8@1
  char **v5; // r7@1
  int v6; // r6@1
  void **v7; // r0@1
  char *v8; // r2@1
  bool v9; // zf@1
  char *v11; // [sp+4h] [bp-1Ch]@3

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = operator new(0x24u);
  android::RefBase::RefBase((android::RefBase *)(v6 + 28));
  sub_1AE68((_DWORD *)v6, (int)off_3FA34);
  v7 = &off_421A8;
  *(_DWORD *)v6 = &off_421A8;
  *(_DWORD *)(v6 + 28) = &off_421D4;
  *(_DWORD *)(v6 + 16) = v3;
  v8 = *v5;
  v9 = *v5 == 0;
  *(_DWORD *)(v6 + 20) = *v5;
  if ( !v9 )
  {
    android::RefBase::incStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], (const void *)(v6 + 20));
    v7 = *(void ***)v6;
  }
  *(_DWORD *)(v6 + 24) = v4;
  v11 = (char *)v6;
  android::RefBase::incStrong((android::RefBase *)((char *)*(v7 - 3) + v6), &v11);
  sub_1DFF0(v3, &v11, 0, 0);
  if ( v11 )
    android::RefBase::decStrong((android::RefBase *)&v11[*(_DWORD *)(*(_DWORD *)v11 - 12)], &v11);
  return 0;
}
// 3FA34: using guessed type void **[5];
// 421A8: using guessed type void *off_421A8;
// 421D4: using guessed type void *off_421D4;

//----- (0001DFF0) --------------------------------------------------------
int __fastcall sub_1DFF0(int a1, char **a2, int a3, int a4)
{
  char **v4; // r4@1
  int v5; // r5@1

  v4 = a2;
  v5 = sub_1B414(a1 + 444, a2, a3, a4);
  if ( !v5 )
    sub_25CEC((pthread_mutex_t *)(*v4 + 4));
  return v5;
}

//----- (0001E010) --------------------------------------------------------
int __fastcall sub_1E010(int a1)
{
  int v1; // r4@1
  pthread_mutex_t *v2; // r5@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 28);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 28));
  sub_16D00(v1 + 472);
  pthread_mutex_unlock(v2);
  return 0;
}

//----- (0001E034) --------------------------------------------------------
int __fastcall sub_1E034(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  pthread_mutex_t *v4; // r6@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 28);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 28));
  sub_16DA0(v2 + 472, v3);
  pthread_mutex_unlock(v4);
  return 0;
}

//----- (0001E058) --------------------------------------------------------
char *__fastcall sub_1E058(const void *a1, int a2)
{
  const void *v2; // r4@1
  char *result; // r0@1
  bool v4; // zf@1
  char *v5; // [sp+4h] [bp-Ch]@1

  v2 = a1;
  sub_154EC(&v5, *(_DWORD **)(a2 + 220));
  result = v5;
  v4 = v5 == 0;
  *(_DWORD *)v2 = v5;
  if ( !v4 )
  {
    android::RefBase::incStrong((android::RefBase *)&result[*(_DWORD *)(*(_DWORD *)result - 12)], v2);
    result = v5;
  }
  if ( result )
    result = (char *)android::RefBase::decStrong((android::RefBase *)&result[*(_DWORD *)(*(_DWORD *)result - 12)], &v5);
  return result;
}

//----- (0001E094) --------------------------------------------------------
int __fastcall sub_1E094(int a1)
{
  return sub_1B4B0(a1 + 444);
}

//----- (0001E09C) --------------------------------------------------------
void __fastcall __noreturn android::SurfaceFlinger::run(android::SurfaceFlinger *this)
{
  sub_1B3AC((int)this + 444);
}

//----- (0001E0AC) --------------------------------------------------------
int __fastcall sub_1E0AC(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r4@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 5056);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 5056));
  if ( !*(_BYTE *)(v1 + 5060) && *(_BYTE *)(v1 + 5061) )
  {
    sub_13B58(v1 + 4624);
    sub_15154(*(_DWORD *)(v1 + 228), 1);
    *(_BYTE *)(v1 + 5060) = 1;
  }
  return j_j_pthread_mutex_unlock(v2);
}

//----- (0001E0F0) --------------------------------------------------------
int __fastcall sub_1E0F0(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  pthread_mutex_t *v4; // r8@1
  _BYTE *v5; // r0@1
  __int64 v6; // kr00_8@4
  int v7; // r1@4

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 5056);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 5056));
  v5 = (_BYTE *)(v2 + 5061);
  if ( v3 == 1 )
  {
    *v5 = 1;
  }
  else if ( !*v5 )
  {
    _android_log_print(6, "SurfaceFlinger", "resyncToHardwareVsync called when HW vsync unavailable");
    return j_j_pthread_mutex_unlock(v4);
  }
  v6 = sub_295A0(*(_DWORD *)(v2 + 196), 0);
  sub_13B0C(v2 + 4624);
  sub_142A0(v2 + 4624, v7, v6, SHIDWORD(v6));
  if ( !*(_BYTE *)(v2 + 5060) )
  {
    sub_13B58(v2 + 4624);
    sub_15154(*(_DWORD *)(v2 + 228), 1);
    *(_BYTE *)(v2 + 5060) = 1;
  }
  return j_j_pthread_mutex_unlock(v4);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001E184) --------------------------------------------------------
int __fastcall sub_1E184(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  pthread_mutex_t *v4; // r4@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 5056);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 5056));
  if ( *(_BYTE *)(v2 + 5060) )
  {
    sub_15154(*(_DWORD *)(v2 + 228), 0);
    android::Nsd::postDraw((android::Nsd *)(v2 + 4624));
    *(_BYTE *)(v2 + 5060) = 0;
  }
  if ( v3 == 1 )
    *(_BYTE *)(v2 + 5061) = 0;
  return j_j_pthread_mutex_unlock(v4);
}

//----- (0001E1D4) --------------------------------------------------------
int __fastcall sub_1E1D4(int a1, int a2, unsigned int a3, unsigned int a4)
{
  int v4; // r4@1
  unsigned int v5; // r8@1
  pthread_mutex_t *v6; // r5@1
  unsigned int v7; // r7@1
  int v8; // r6@1
  int v9; // r1@1
  signed int v10; // r6@3

  v4 = a1;
  v5 = a4;
  v6 = (pthread_mutex_t *)(a1 + 5056);
  v7 = a3;
  v8 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 5056));
  if ( v8 || !*(_BYTE *)(v4 + 5060) )
  {
    pthread_mutex_unlock(v6);
  }
  else
  {
    v10 = sub_13DF4(v4 + 4624, v9, __PAIR__(v5, v7));
    pthread_mutex_unlock(v6);
    if ( v10 == 1 )
      return sub_1E0AC(v4);
  }
  return sub_1E184(v4, 0);
}

//----- (0001E234) --------------------------------------------------------
int __fastcall sub_1E234(int a1, unsigned int a2, int a3)
{
  int v3; // r4@1
  int v4; // r7@1
  int result; // r0@1
  int v6; // r6@1
  int v7; // r6@6
  char *v8; // r0@6
  const void *v9; // r6@6
  int v10; // t1@6
  unsigned int *v11; // r0@12
  unsigned int v12; // r1@13
  int v13; // [sp+0h] [bp-20h]@6
  android::RefBase::weakref_type *v14; // [sp+4h] [bp-1Ch]@7

  v3 = a1;
  v4 = a3;
  result = *(_DWORD *)(a1 + 220);
  v6 = a2;
  if ( result )
  {
    if ( a2 <= 1 )
    {
      pthread_mutex_lock((pthread_mutex_t *)(v3 + 28));
      if ( v4 == 1 )
      {
        sub_1CE68(v3, v6);
      }
      else
      {
        v7 = v3 + 4 * v6;
        v10 = *(_DWORD *)(v7 + 240);
        v9 = (const void *)(v7 + 240);
        v8 = (char *)v10;
        v13 = v10;
        if ( v10 )
          v14 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                                    (android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)],
                                                    &v13);
        sub_1E304((android::SortedVectorImpl *)(v3 + 52), (int)&v13);
        if ( v13 )
          android::RefBase::weakref_type::decWeak(v14, &v13);
        if ( *(_DWORD *)v9 )
        {
          android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)v9 + *(_DWORD *)(**(_DWORD **)v9 - 12)), v9);
          *(_DWORD *)v9 = 0;
        }
      }
      v11 = (unsigned int *)(v3 + 136);
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 | 4, v11) );
      if ( !(v12 & 4) )
        sub_1B4B0(v3 + 444);
      result = pthread_mutex_unlock((pthread_mutex_t *)(v3 + 28));
    }
  }
  else
  {
    result = _android_log_print(5, "SurfaceFlinger", "WARNING: EventThread not started, ignoring hotplug");
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0001E304) --------------------------------------------------------
int __fastcall sub_1E304(android::SortedVectorImpl *a1, int a2)
{
  android::SortedVectorImpl *v2; // r4@1
  int v3; // r4@1
  int v5; // [sp+0h] [bp-58h]@1
  android::RefBase::weakref_type *v6; // [sp+4h] [bp-54h]@4
  char *v7; // [sp+Ch] [bp-4Ch]@1
  int v8; // [sp+40h] [bp-18h]@1

  v2 = a1;
  sub_26A44(&v5, a2);
  v3 = android::SortedVectorImpl::remove(v2, &v5);
  android::String8::~String8((android::String8 *)&v8);
  if ( v7 )
    android::RefBase::decStrong((android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)], &v7);
  if ( v5 )
    android::RefBase::weakref_type::decWeak(v6, &v5);
  return v3;
}

//----- (0001E358) --------------------------------------------------------
ssize_t __fastcall sub_1E358(int a1, unsigned int a2, int a3, signed int a4)
{
  int v4; // r7@1
  signed int v5; // r4@1
  int v6; // r5@1
  unsigned int v7; // r6@1
  int v8; // r0@1
  int v9; // r1@5
  int v10; // r0@5
  ssize_t result; // r0@7
  char buf; // [sp+7h] [bp-21h]@8

  v4 = a1;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  v8 = v0;
  __dmb();
  if ( !(v8 & 1) )
    atrace_setup(v8, a2);
  if ( v0 & 2 )
    atrace_begin_body("eventControl");
  sub_28C98(*(_DWORD *)(v4 + 196), v7, v6, v5);
  v10 = v0;
  __dmb();
  if ( !(v10 & 1) )
    atrace_setup(v10, v9);
  result = v0;
  if ( v0 & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);

//----- (0001E428) --------------------------------------------------------
ssize_t __fastcall sub_1E428(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  int v4; // r0@1
  signed int v5; // r5@9
  _BOOL4 v6; // r0@14
  int v7; // r2@14
  int v8; // r0@20
  ssize_t result; // r0@22
  char buf; // [sp+7h] [bp-19h]@23

  v2 = a1;
  v3 = a2;
  v4 = v0;
  __dmb();
  if ( !(v4 & 1) )
    atrace_setup(v4, a2);
  if ( v0 & 2 )
    atrace_begin_body("onMessageReceived");
  if ( v3 )
  {
    if ( v3 == 1 )
    {
      sub_1E5F8(v2, a2);
      sub_1E6EC(v2);
    }
    else if ( v3 == 2 )
    {
      __dmb();
      if ( *(_DWORD *)(v2 + 136) )
        sub_1E7C4(v2);
    }
  }
  else
  {
    __dmb();
    if ( *(_DWORD *)(v2 + 136) )
    {
      sub_1E7C4(v2);
      v5 = 1;
    }
    else
    {
      v5 = 0;
    }
    v6 = sub_1E540(v2, a2);
    a2 = *(_DWORD *)(v2 + 192);
    v7 = a2 | 1;
    if ( v6 )
      a2 |= 1u;
    if ( v5 )
      a2 = v7;
    if ( a2 )
      sub_1B4B8(v2 + 444);
  }
  v8 = v0;
  __dmb();
  if ( !(v8 & 1) )
    atrace_setup(v8, a2);
  result = v0;
  if ( v0 & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);

//----- (0001E540) --------------------------------------------------------
_BOOL4 __fastcall sub_1E540(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int v4; // r1@5
  _BOOL4 v5; // r4@5
  int v6; // r0@5
  char buf; // [sp+7h] [bp-11h]@8

  v2 = a1;
  v3 = v0;
  __dmb();
  if ( !(v3 & 1) )
    atrace_setup(v3, a2);
  if ( v0 & 2 )
    atrace_begin_body("handleMessageInvalidate");
  v5 = sub_1E9D8(v2);
  v6 = v0;
  __dmb();
  if ( !(v6 & 1) )
    atrace_setup(v6, v4);
  if ( v0 & 2 )
  {
    buf = 69;
    write(v0, &buf, 1u);
  }
  return v5;
}
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);

//----- (0001E5F8) --------------------------------------------------------
ssize_t __fastcall sub_1E5F8(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int v4; // r1@5
  int v5; // r1@5
  int v6; // r0@7
  ssize_t result; // r0@9
  char buf; // [sp+7h] [bp-11h]@10

  v2 = a1;
  v3 = v0;
  __dmb();
  if ( !(v3 & 1) )
    atrace_setup(v3, a2);
  if ( v0 & 2 )
    atrace_begin_body("handleMessageRefresh");
  sub_1EB1C(v2);
  sub_1EB5C(v2);
  sub_1EF80(v2);
  sub_1F388(v2);
  sub_1F4F8(v2, v4);
  sub_1F66C(v2);
  if ( *(_BYTE *)(v2 + 5324) )
    _android_janklog_print(4, 2300, "SF handleMessageRefresh");
  v6 = v0;
  __dmb();
  if ( !(v6 & 1) )
    atrace_setup(v6, v5);
  result = v0;
  if ( v0 & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 10EA8: using guessed type int __fastcall _android_janklog_print(_DWORD, _DWORD, _DWORD);

//----- (0001E6EC) --------------------------------------------------------
int __fastcall sub_1E6EC(int a1)
{
  int v1; // r8@1
  __int64 v2; // r0@1
  int v3; // r5@1
  int v4; // r6@1
  signed int v5; // r2@1
  signed int v6; // r3@1
  int v12; // r7@8

  v1 = a1;
  ++unk_45030;
  LODWORD(v2) = systemTime(1);
  v3 = HIDWORD(v2);
  v4 = v2;
  v5 = 0;
  v6 = 0;
  _R0 = v2 - qword_45038;
  if ( SHIDWORD(_R0) < 0 )
    v6 = 1;
  if ( (unsigned int)_R0 < 0xEE6B281 )
    v5 = 1;
  if ( HIDWORD(_R0) )
    v5 = v6;
  if ( !v5 )
  {
    __asm { VLDR            S2, =1.0e9 }
    v12 = unk_45030;
    _R2 = unk_45030 - unk_45034;
    __asm
    {
      VMOV            S0, R2
      VCVT.F32.S32    S0, S0
      VMUL.F32        S16, S0, S2
    }
    LODWORD(_R0) = j___floatdisf(_R0);
    __asm
    {
      VMOV            S0, R0
      VDIV.F32        S0, S16, S0
    }
    LODWORD(qword_45038) = v4;
    unk_45034 = v12;
    __asm { VSTR            S0, [R0] }
    HIDWORD(qword_45038) = v3;
    LODWORD(_R0) = v1 + 5064;
    __asm { VSTR            S0, [R0] }
  }
  return _R0;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 45038: using guessed type __int64 qword_45038;

//----- (0001E7BC) --------------------------------------------------------
ssize_t __fastcall sub_1E7BC(int a1, int a2)
{
  return sub_1E428(a1 - 16, a2);
}

//----- (0001E7C4) --------------------------------------------------------
ssize_t __fastcall sub_1E7C4(int a1)
{
  int v1; // r4@1
  int v2; // r0@1
  int v3; // r1@7
  int v4; // r2@7
  int v5; // r3@7
  int v6; // r6@7
  int v7; // r5@7
  int v8; // r1@7
  int v9; // r2@7
  int v10; // r3@7
  int v11; // r6@7
  int v12; // r5@7
  int v13; // r5@7
  unsigned int v14; // r1@7
  unsigned int v15; // r7@7
  unsigned int *v16; // r0@7
  unsigned int v17; // r1@8
  __int64 v18; // r0@9
  int v19; // r1@11
  int v20; // r0@11
  ssize_t result; // r0@13
  void *buf; // [sp+8h] [bp-90h]@5
  void *v23; // [sp+1Ch] [bp-7Ch]@5
  int v24; // [sp+30h] [bp-68h]@5
  char *v25; // [sp+34h] [bp-64h]@5
  int v26; // [sp+38h] [bp-60h]@7
  int v27; // [sp+3Ch] [bp-5Ch]@7
  int v28; // [sp+40h] [bp-58h]@7
  int v29; // [sp+44h] [bp-54h]@7
  int v30; // [sp+48h] [bp-50h]@7
  int v31; // [sp+4Ch] [bp-4Ch]@7
  int v32; // [sp+50h] [bp-48h]@7
  int v33; // [sp+54h] [bp-44h]@7
  int v34; // [sp+58h] [bp-40h]@7
  int v35; // [sp+5Ch] [bp-3Ch]@7
  int v36; // [sp+60h] [bp-38h]@7
  int v37; // [sp+64h] [bp-34h]@7
  int v38; // [sp+68h] [bp-30h]@7
  char v39; // [sp+6Ch] [bp-2Ch]@7

  v1 = a1;
  v2 = v0;
  __dmb();
  if ( !(v2 & 1) )
    atrace_setup(v2, 0xFFFFFF78);
  if ( v0 & 2 )
    atrace_begin_body("handleTransaction");
  android::VectorImpl::VectorImpl((android::VectorImpl *)&buf, (const android::VectorImpl *)(v1 + 248));
  buf = &unk_3F954;
  android::VectorImpl::VectorImpl((android::VectorImpl *)&v23, (const android::VectorImpl *)(v1 + 268));
  v23 = &unk_3F980;
  v24 = *(_DWORD *)(v1 + 288);
  v25 = *(char **)(v1 + 292);
  if ( v25 )
    android::RefBase::incStrong((android::RefBase *)&v25[*(_DWORD *)(*(_DWORD *)v25 - 12)], &v25);
  v3 = *(_DWORD *)(v1 + 312);
  v4 = *(_DWORD *)(v1 + 296);
  v5 = *(_DWORD *)(v1 + 300);
  v6 = *(_DWORD *)(v1 + 304);
  v7 = *(_DWORD *)(v1 + 308);
  v31 = *(_DWORD *)(v1 + 316);
  v30 = v3;
  v29 = v7;
  v26 = v4;
  v27 = v5;
  v28 = v6;
  v8 = *(_DWORD *)(v1 + 332);
  v9 = *(_DWORD *)(v1 + 336);
  v10 = *(_DWORD *)(v1 + 340);
  v11 = *(_DWORD *)(v1 + 320);
  v12 = *(_DWORD *)(v1 + 324);
  v34 = *(_DWORD *)(v1 + 328);
  v35 = v8;
  v36 = v9;
  v37 = v10;
  v33 = v12;
  v32 = v11;
  android::String8::String8((android::String8 *)&v38, (const android::String8 *)(v1 + 344));
  v39 = *(_BYTE *)(v1 + 348);
  pthread_mutex_lock((pthread_mutex_t *)(v1 + 28));
  v13 = systemTime(1);
  v15 = v14;
  *(_DWORD *)(v1 + 420) = v14;
  v16 = (unsigned int *)(v1 + 136);
  *(_DWORD *)(v1 + 416) = v13;
  __dmb();
  do
    v17 = __ldrex(v16);
  while ( __strex(v17 & 0xFFFFFFF8, v16) );
  sub_209D8(v1, v17 & 7);
  LODWORD(v18) = systemTime(1);
  *(_QWORD *)(v1 + 424) = v18 - __PAIR__(v15, v13);
  *(_DWORD *)(v1 + 420) = 0;
  *(_DWORD *)(v1 + 416) = 0;
  *(_BYTE *)(v1 + 353) = 1;
  pthread_mutex_unlock((pthread_mutex_t *)(v1 + 28));
  android::String8::~String8((android::String8 *)&v38);
  if ( v25 )
    android::RefBase::decStrong((android::RefBase *)&v25[*(_DWORD *)(*(_DWORD *)v25 - 12)], &v25);
  v23 = &unk_3F980;
  android::VectorImpl::finish_vector((android::VectorImpl *)&v23);
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)&v23);
  buf = &unk_3FB00;
  android::VectorImpl::finish_vector((android::VectorImpl *)&buf);
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)&buf);
  v20 = v0;
  __dmb();
  if ( !(v20 & 1) )
    atrace_setup(v20, v19);
  result = v0;
  if ( v0 & 2 )
  {
    LOBYTE(buf) = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);

//----- (0001E9D8) --------------------------------------------------------
_BOOL4 __fastcall sub_1E9D8(int a1)
{
  int v1; // r4@1
  int v2; // r6@1
  signed int v3; // r9@2
  int v4; // r7@2
  int v5; // r5@3
  int v6; // r0@3
  unsigned int v7; // r6@12
  signed int v8; // r10@12
  unsigned int v9; // r5@12
  int v10; // r8@13
  int v11; // r7@14
  int v12; // r1@14
  int v13; // r1@20
  int v15; // [sp+0h] [bp-68h]@14
  int v16; // [sp+14h] [bp-54h]@6
  void *v17; // [sp+18h] [bp-50h]@1
  int v18; // [sp+1Ch] [bp-4Ch]@14
  unsigned int v19; // [sp+20h] [bp-48h]@6
  char v20; // [sp+2Fh] [bp-39h]@1
  char v21; // [sp+30h] [bp-38h]@1

  v1 = a1;
  android::Region::Region(&v21);
  v20 = 0;
  android::VectorImpl::VectorImpl((android::VectorImpl *)&v17, 4u, 7u);
  v17 = &unk_3FBCC;
  v2 = *(_DWORD *)(v1 + 256);
  if ( v2 )
  {
    v3 = 0;
    v4 = 0;
    do
    {
      v5 = *(_DWORD *)(v1 + 252);
      v6 = *(_DWORD *)(v5 + 4 * v4);
      if ( *(_DWORD *)(v6 + 412) > 0 || *(_DWORD *)(v6 + 416) )
      {
        if ( sub_1980C(v6, v1 + 4624) == 1 )
        {
          v16 = *(_DWORD *)(v5 + 4 * v4);
          v3 = 1;
          android::VectorImpl::insertAt((android::VectorImpl *)&v17, &v16, v19, 1u);
        }
        else
        {
          sub_19804(*(_DWORD *)(v5 + 4 * v4));
          v3 = 1;
        }
      }
      else
      {
        sub_19804(v6);
      }
      ++v4;
    }
    while ( v2 != v4 );
  }
  else
  {
    v3 = 0;
  }
  v7 = v19;
  v8 = 0;
  v9 = 0;
  if ( v19 )
  {
    v10 = 0;
    do
    {
      v11 = *(_DWORD *)(v18 + 4 * v10);
      sub_199D8((int)&v15, *(_DWORD *)(v18 + 4 * v10), &v20);
      sub_197D0(v11);
      sub_213D4(v1, *(_DWORD *)(v11 + 316), (int)&v15);
      android::Region::~Region(&v15, v12);
      ++v10;
    }
    while ( v7 != v10 );
    v9 = v19;
  }
  *(_BYTE *)(v1 + 352) |= v20;
  if ( !v9 )
    v8 = 1;
  if ( v3 & v8 )
  {
    sub_1B4B0(v1 + 444);
    v9 = v19;
  }
  v17 = &unk_3FBCC;
  android::VectorImpl::finish_vector((android::VectorImpl *)&v17);
  android::VectorImpl::~VectorImpl((android::VectorImpl *)&v17);
  android::Region::~Region(&v21, v13);
  return v9 != 0;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);

//----- (0001EB1C) --------------------------------------------------------
int __fastcall sub_1EB1C(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  int v3; // r6@2
  char v4; // r7@2
  char v5; // r0@3

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 256);
  if ( v2 )
  {
    v3 = 0;
    v4 = 0;
    do
    {
      v5 = sub_198E0(*(_DWORD *)(*(_DWORD *)(v1 + 252) + 4 * v3++));
      v4 |= v5;
    }
    while ( v2 != v3 );
    if ( v4 & 1 )
      sub_1B4B0(v1 + 444);
  }
  return sub_1D918(v1);
}

//----- (0001EB5C) --------------------------------------------------------
int __fastcall sub_1EB5C(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r4@1
  int v3; // r1@3
  int v5; // r0@7
  signed int v6; // r0@11
  int v7; // r9@11
  char *v8; // r7@12
  char *v9; // r4@12
  android::VectorImpl *v10; // r10@12
  char *v11; // r8@12
  int v12; // r5@12
  void *v13; // r6@12
  int v14; // r11@13
  int *v15; // r11@13
  int v16; // t1@13
  int v17; // r0@13
  int v18; // r2@13
  char *v19; // r5@13
  int v20; // r6@13
  int v21; // r9@16
  int v22; // r7@17
  int v23; // r8@17
  int v24; // r10@17
  int v25; // r4@18
  int v26; // r0@18
  signed int v27; // r0@19
  int *v28; // r1@21
  int *v29; // r4@22
  signed int v30; // r0@26
  int v31; // r5@29
  int v32; // r0@29
  android::RefBase *v33; // r0@30
  const char **v34; // r0@32
  const char *v35; // r1@33
  int v36; // r0@33
  int v37; // r2@37
  int v38; // r3@37
  int v39; // r4@38
  char v40; // r0@38
  int v41; // r0@44
  int v42; // r1@44
  int v43; // r2@44
  bool v44; // zf@44
  bool v45; // nf@44
  unsigned __int8 v46; // vf@44
  int v47; // r4@49
  int v48; // r1@49
  int v49; // r1@49
  int v50; // r1@49
  int v51; // r0@50
  pthread_mutex_t *v52; // [sp+8h] [bp-F8h]@9
  const char *v53; // [sp+Ch] [bp-F4h]@37
  int v54; // [sp+10h] [bp-F0h]@12
  int v55; // [sp+14h] [bp-ECh]@12
  void *v56; // [sp+18h] [bp-E8h]@12
  int v57; // [sp+1Ch] [bp-E4h]@11
  int v58; // [sp+20h] [bp-E0h]@34
  int v59; // [sp+20h] [bp-E0h]@37
  int v60; // [sp+28h] [bp-D8h]@12
  int v61; // [sp+2Ch] [bp-D4h]@17
  int v62; // [sp+30h] [bp-D0h]@13
  unsigned int v63; // [sp+34h] [bp-CCh]@17
  _BYTE *v64; // [sp+38h] [bp-C8h]@12
  signed int v65; // [sp+3Ch] [bp-C4h]@1
  int v66; // [sp+44h] [bp-BCh]@12
  int v67; // [sp+48h] [bp-B8h]@13
  char v68; // [sp+4Ch] [bp-B4h]@49
  android::RefBase *v69; // [sp+60h] [bp-A0h]@30
  char v70; // [sp+64h] [bp-9Ch]@12
  int v71; // [sp+68h] [bp-98h]@44
  int v72; // [sp+6Ch] [bp-94h]@44
  unsigned __int8 v73; // [sp+7Bh] [bp-85h]@14
  unsigned int v74; // [sp+7Ch] [bp-84h]@14
  int v75; // [sp+80h] [bp-80h]@13
  int v76; // [sp+84h] [bp-7Ch]@13
  int v77; // [sp+88h] [bp-78h]@13
  int v78; // [sp+8Ch] [bp-74h]@13
  void *v79; // [sp+90h] [bp-70h]@12
  char v80; // [sp+A4h] [bp-5Ch]@12
  char v81; // [sp+B8h] [bp-48h]@12
  int v82; // [sp+CCh] [bp-34h]@11
  unsigned __int8 v83; // [sp+D3h] [bp-2Dh]@1
  int v84; // [sp+D4h] [bp-2Ch]@1
  char buf; // [sp+DBh] [bp-25h]@53

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 5328);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 5328));
  v84 = 0;
  v83 = 0;
  v65 = 0;
  if ( *(_BYTE *)(v1 + 5320) & 4 )
    v65 = sub_1FE84(v1, v1 + 248, &v84, &v83);
  v3 = *(_BYTE *)(v1 + 5152);
  if ( v3 != unk_45044 )
    *(_BYTE *)(v1 + 352) = 1;
  unk_45044 = v3;
  if ( *(_BYTE *)(v1 + 352) )
  {
    v5 = v0;
    __dmb();
    if ( !(v5 & 1) )
      atrace_setup(v5, 0xFFFFFF78);
    v52 = v2;
    if ( v0 & 2 )
      atrace_begin_body("rebuildLayerStacks");
    *(_BYTE *)(v1 + 352) = 0;
    *(_BYTE *)(v1 + 353) = 1;
    v82 = 0;
    v57 = v1 + 248;
    v6 = sub_200BC(1, v1 + 248, &v82);
    v7 = v1;
    if ( !*(_DWORD *)(v1 + 364) )
    {
LABEL_50:
      v51 = v0;
      __dmb();
      if ( !(v51 & 1) )
        atrace_setup(v51, 0xFFFFFF78);
      v2 = v52;
      if ( v0 & 2 )
      {
        buf = 69;
        write(v0, &buf, 1u);
      }
      return pthread_mutex_unlock(v2);
    }
    v64 = (_BYTE *)(v1 + 5152);
    v8 = &v81;
    v9 = &v80;
    v10 = (android::VectorImpl *)&v79;
    v11 = &v70;
    v66 = v6 ^ 1;
    v12 = 0;
    v54 = v83;
    v60 = v84;
    v55 = v82;
    v56 = (void *)(0x141C + v7);
    v13 = &unk_3F624;
    while ( 1 )
    {
      v62 = v12;
      android::Region::Region(v8);
      android::Region::Region(v9);
      android::VectorImpl::VectorImpl(v10, 4u, 0);
      v79 = v13;
      v14 = *(_DWORD *)(v7 + 360) + 12 * v12;
      v16 = *(_DWORD *)(v14 + 8);
      v15 = (int *)(v14 + 8);
      v17 = *(_DWORD *)(v16 + 108);
      v18 = *(_DWORD *)(v16 + 112);
      v76 = 0;
      v75 = 0;
      v77 = v17;
      v78 = v18;
      v67 = v16 + 216;
      v19 = v11;
      v20 = v7;
      if ( sub_135BC(*v15) == 1 )
      {
        sub_201C4(v57, *(_DWORD *)(*v15 + 160), (int)&v80, (int)&v81);
        v74 = 0;
        v73 = 0;
        if ( *v64 )
          sub_20548(v7, v57, v62, &v74, &v73);
        v21 = *(_DWORD *)(v7 + 256);
        if ( v21 )
          break;
      }
LABEL_49:
      v11 = v19;
      v10 = (android::VectorImpl *)&v79;
      sub_1D9D0(v20, (int)&v79);
      sub_134F4(*v15, (int)&v79);
      android::Region::set(*v15 + 44, &v75);
      v7 = v20;
      v8 = &v81;
      v47 = *v15;
      sub_280A4((int)&v68, v67, (int)&v81);
      android::Region::subtractSelf(v47 + 44, &v68);
      android::Region::~Region(&v68, v48);
      v9 = &v80;
      android::Region::orSelf(*v15 + 4, &v80);
      v13 = &unk_3F624;
      v79 = &unk_3F624;
      android::VectorImpl::finish_vector((android::VectorImpl *)&v79);
      android::VectorImpl::~VectorImpl((android::VectorImpl *)&v79);
      android::Region::~Region(&v80, v49);
      android::Region::~Region(&v81, v50);
      v12 = v62 + 1;
      if ( (unsigned int)(v62 + 1) >= *(_DWORD *)(v7 + 364) )
        goto LABEL_50;
    }
    v22 = 0;
    v23 = v55;
    v24 = v60;
    v61 = v73;
    v63 = v74;
    while ( 1 )
    {
      v25 = *(_DWORD *)(v20 + 252);
      v26 = *(_DWORD *)(v25 + v22);
      if ( *(_DWORD *)(v26 + 316) == *(_DWORD *)(*v15 + 160) )
        break;
LABEL_48:
      --v23;
      v22 += 4;
      --v24;
      if ( !--v21 )
        goto LABEL_49;
    }
    sub_280A4((int)v19, v67, v26 + 48);
    android::Region::andSelf(v19, &v75);
    v27 = v23;
    if ( v23 )
      v27 = 1;
    v28 = (int *)v66;
    if ( !(v27 | v66) || (v29 = (int *)(v25 + v22), *v64) && v63 >= 5 && v61 && sub_2065C(v61, v29) )
    {
LABEL_47:
      android::Region::~Region(v19, v28);
      goto LABEL_48;
    }
    v30 = 0;
    if ( !v24 )
      v30 = 1;
    if ( (v30 & v65) != 1 )
      goto LABEL_44;
    v31 = *(_DWORD *)(v20 + 252);
    v32 = *(_DWORD *)(v31 + 4 * v60);
    if ( !v32 )
      goto LABEL_44;
    v33 = *(android::RefBase **)(v32 + 4576);
    v69 = v33;
    if ( v33 )
      android::RefBase::incStrong(v33, &v69);
    v34 = (const char **)sub_17C58(*(_DWORD *)(v31 + 4 * v60));
    if ( !v69 )
    {
LABEL_44:
      v19 = &v70;
      v41 = v71 + 16 * v72;
      v42 = *(_DWORD *)(v41 - 16);
      v43 = *(_DWORD *)(v41 - 8);
      v46 = __OFSUB__(v43, v42);
      v44 = v43 == v42;
      v45 = v43 - v42 < 0;
      v28 = v29;
      if ( !((unsigned __int8)(v45 ^ v46) | v44) && *(_DWORD *)(v41 - 4) > *(_DWORD *)(v41 - 12) )
        android::VectorImpl::add((android::VectorImpl *)&v79, v29);
      goto LABEL_47;
    }
    v35 = *v34;
    v36 = *(_DWORD *)(v20 + 196);
    if ( v69 == *(android::RefBase **)v56 )
    {
      v53 = v35;
      v59 = *(_DWORD *)(v20 + 196);
      if ( sub_29840(v36) == 1 )
      {
        v39 = *v15;
        v40 = (*(int (__fastcall **)(_DWORD, _DWORD, int, int))(**(_DWORD **)(v31 + 4 * v60) + 28))(
                *(_DWORD *)(v31 + 4 * v60),
                *(_DWORD *)(**(_DWORD **)(v31 + 4 * v60) + 28),
                v37,
                v38);
        sub_134EC(v39, v40);
        v19 = &v70;
        if ( v69 )
          android::RefBase::decStrong(v69, &v69);
        goto LABEL_47;
      }
      sub_29820(v59, v53, 0);
      if ( !v54 )
        goto LABEL_42;
    }
    else
    {
      v58 = *(_DWORD *)(v20 + 196);
      sub_29820(v36, v35, 1);
      sub_1A074(v56, &v69);
      if ( !v54 || sub_29840(v58) )
      {
LABEL_42:
        if ( v69 )
          android::RefBase::decStrong(v69, &v69);
        goto LABEL_44;
      }
    }
    *(_BYTE *)(v20 + 353) = 0;
    goto LABEL_42;
  }
  return pthread_mutex_unlock(v2);
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 1083C: using guessed type int __fastcall android::Region::andSelf(_DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 10C2C: using guessed type int __fastcall android::Region::orSelf(_DWORD, _DWORD);
// 10ECC: using guessed type int __fastcall android::Region::subtractSelf(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001EF80) --------------------------------------------------------
unsigned int __fastcall sub_1EF80(int a1)
{
  int v1; // r10@1
  unsigned int v2; // r4@2
  signed int v3; // r7@2
  int v4; // r0@3
  int v5; // r5@3
  int v6; // r11@3
  int v7; // r8@3
  int v8; // r6@3
  int v9; // r1@3
  int v10; // r0@3
  int v11; // r5@5
  int v12; // r6@5
  int v13; // r11@13
  unsigned int result; // r0@13
  int v15; // r2@13
  int v16; // r3@13
  unsigned int v17; // r4@16
  unsigned int *v18; // r0@17
  unsigned int v19; // r1@18
  signed int v20; // r7@19
  int v21; // r5@20
  unsigned int v22; // r8@20
  int v23; // r2@20
  int v24; // r3@20
  unsigned int v25; // r9@22
  android::RefBase *v26; // r0@23
  void (*v27)(void); // r2@23
  unsigned int v28; // r0@31
  unsigned int v29; // r4@33
  unsigned int *v30; // r0@34
  unsigned int v31; // r1@35
  signed int v32; // r7@36
  int v33; // r5@37
  unsigned int v34; // r9@37
  int v35; // r2@37
  int v36; // r3@37
  int v37; // r1@38
  int v38; // r7@39
  void (*v39)(void); // r2@41
  int v40; // r0@50
  unsigned int v41; // r4@53
  unsigned int *v42; // r0@54
  unsigned int v43; // r1@56
  int v44; // r0@57
  unsigned int v45; // r8@62
  unsigned int *v46; // r0@63
  unsigned int v47; // r1@64
  signed int v48; // r5@65
  int v49; // r7@66
  unsigned int v50; // r6@66
  int v51; // r2@67
  int v52; // r3@67
  unsigned int v53; // r5@69
  android::RefBase::weakref_type *v54; // r0@70
  void (*v55)(void); // r2@75
  char *v56; // r0@51
  unsigned int *v57; // [sp+8h] [bp-78h]@54
  int v58; // [sp+Ch] [bp-74h]@37
  int v59; // [sp+10h] [bp-70h]@38
  android::ISurfaceComposerClient *v60; // [sp+14h] [bp-6Ch]@37
  int v61; // [sp+18h] [bp-68h]@38
  int v62; // [sp+1Ch] [bp-64h]@34
  int v63; // [sp+20h] [bp-60h]@20
  int v64; // [sp+24h] [bp-5Ch]@21
  int v65; // [sp+28h] [bp-58h]@20
  int v66; // [sp+2Ch] [bp-54h]@21
  int v67; // [sp+30h] [bp-50h]@17
  int v68; // [sp+34h] [bp-4Ch]@67
  int v69; // [sp+38h] [bp-48h]@68
  android::RefBase *v70; // [sp+3Ch] [bp-44h]@67
  int v71; // [sp+40h] [bp-40h]@68
  int v72; // [sp+44h] [bp-3Ch]@63
  char v73; // [sp+48h] [bp-38h]@3
  int v74; // [sp+4Ch] [bp-34h]@3
  int v75; // [sp+50h] [bp-30h]@3

  v1 = a1;
  (*(void (**)(void))(*(_DWORD *)a1 + 144))();
  if ( *(_DWORD *)(v1 + 364) )
  {
    v2 = 0;
    v3 = 8;
    do
    {
      sub_1354C((int)&v73, *(_DWORD *)(*(_DWORD *)(v1 + 360) + v3), 0);
      v4 = v74 + 16 * v75;
      v5 = *(_DWORD *)(v4 - 16);
      v6 = *(_DWORD *)(v4 - 12);
      v7 = *(_DWORD *)(v4 - 8);
      v8 = *(_DWORD *)(v4 - 4);
      android::Region::~Region(&v73, v75);
      v9 = sub_13540(*(_DWORD *)(*(_DWORD *)(v1 + 360) + v3));
      v10 = *(_DWORD *)(*(_DWORD *)(v1 + 360) + v3);
      if ( v7 <= v5 || v8 <= v6 )
      {
        sub_13330(v10);
      }
      else
      {
        v11 = *(_DWORD *)(v9 + 8);
        v12 = v11 | *(_BYTE *)(v10 + 64);
        sub_13330(v10);
        if ( v12 )
        {
          if ( v11 )
            LOBYTE(v11) = 1;
          *(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v1 + 360) + v3) + 64) = v11;
        }
      }
      if ( strstr(*(const char **)(*(_DWORD *)(*(_DWORD *)(v1 + 360) + v3) + 128), "ScreenCapture") )
        (*(void (__fastcall **)(int, signed int))(*(_DWORD *)v1 + 144))(v1, 1);
      ++v2;
      v3 += 12;
    }
    while ( v2 < *(_DWORD *)(v1 + 364) );
  }
  v13 = *(_DWORD *)(v1 + 196);
  result = sub_29228(*(_DWORD *)(v1 + 196));
  if ( !result )
  {
    if ( *(_BYTE *)(v1 + 353) )
    {
      *(_BYTE *)(v1 + 353) = 0;
      if ( *(_DWORD *)(v1 + 364) )
      {
        v45 = 0;
        do
        {
          v46 = *(unsigned int **)(*(_DWORD *)(v1 + 360) + 12 * v45 + 8);
          v72 = *(_DWORD *)(*(_DWORD *)(v1 + 360) + 12 * v45 + 8);
          __dmb();
          do
            v47 = __ldrex(v46);
          while ( __strex(v47 + 1, v46) );
          v48 = *(_DWORD *)(v72 + 76);
          if ( v48 >= 0 )
          {
            v49 = sub_13540(v72);
            v50 = *(_DWORD *)(v49 + 8);
            if ( !sub_29640(v13, v48, *(_DWORD *)(v49 + 8)) )
            {
              sub_2AAEC((unsigned int)&v70, v13, v48);
              sub_2AAFC((unsigned int)&v68, v13, v48);
              if ( v50 && v71 != v69 )
              {
                v53 = 0;
                do
                {
                  v54 = *(android::RefBase::weakref_type **)(*(_DWORD *)(v49 + 4) + 4 * v53);
                  (*(void (__cdecl **)(android::RefBase::weakref_type *, const void *))(*(_DWORD *)v54 + 48))(v54, &v72);
                  if ( *(_DWORD *)(v1 + 388) || *(_DWORD *)(v1 + 380) || *(_BYTE *)(v1 + 5144) || *(_BYTE *)(v1 + 5220) )
                    (*(void (__cdecl **)(android::RefBase *))(*(_DWORD *)v70 + 24))(v70);
                  v55 = *(void (**)(void))(*(_DWORD *)v70 + 96);
                  ++v71;
                  v55();
                  ++v53;
                }
                while ( v53 < v50 && v71 != v69 );
              }
              if ( v68 )
                (*(void (__fastcall **)(int, _DWORD, int, int))(*(_DWORD *)v68 + 4))(
                  v68,
                  *(_DWORD *)(*(_DWORD *)v68 + 4),
                  v51,
                  v52);
              if ( v70 )
                (*(void (__fastcall **)(android::RefBase *, _DWORD, int, int))(*(_DWORD *)v70 + 4))(
                  v70,
                  *(_DWORD *)(*(_DWORD *)v70 + 4),
                  v51,
                  v52);
            }
          }
          sub_1BF7C((unsigned int **)&v72);
          ++v45;
        }
        while ( v45 < *(_DWORD *)(v1 + 364) );
      }
    }
    (*(void (__fastcall **)(int, _DWORD, int, int))(*(_DWORD *)(v1 + 16) + 52))(
      v1 + 16,
      *(_DWORD *)(*(_DWORD *)(v1 + 16) + 52),
      v15,
      v16);
    if ( *(_DWORD *)(v1 + 364) )
    {
      v17 = 0;
      do
      {
        v18 = *(unsigned int **)(*(_DWORD *)(v1 + 360) + 12 * v17 + 8);
        v67 = *(_DWORD *)(*(_DWORD *)(v1 + 360) + 12 * v17 + 8);
        __dmb();
        do
          v19 = __ldrex(v18);
        while ( __strex(v19 + 1, v18) );
        v20 = *(_DWORD *)(v67 + 76);
        if ( v20 >= 0 )
        {
          v21 = sub_13540(v67);
          v22 = *(_DWORD *)(v21 + 8);
          sub_2AAEC((unsigned int)&v65, v13, v20);
          sub_2AAFC((unsigned int)&v63, v13, v20);
          if ( v22 && v66 != v64 )
          {
            v25 = 0;
            do
            {
              v26 = *(android::RefBase **)(*(_DWORD *)(v21 + 4) + 4 * v25);
              (*(void (__cdecl **)(android::RefBase *, const void *))(*(_DWORD *)v26 + 52))(v26, &v67);
              v27 = *(void (**)(void))(*(_DWORD *)v65 + 96);
              ++v66;
              v27();
              ++v25;
            }
            while ( v25 < v22 && v66 != v64 );
          }
          if ( !v20 )
            sub_295F8(v13, 0, *(_BYTE *)(v1 + 354));
          if ( v63 )
            (*(void (__fastcall **)(int, _DWORD, int, int))(*(_DWORD *)v63 + 4))(
              v63,
              *(_DWORD *)(*(_DWORD *)v63 + 4),
              v23,
              v24);
          if ( v65 )
            (*(void (__fastcall **)(int, _DWORD, int, int))(*(_DWORD *)v65 + 4))(
              v65,
              *(_DWORD *)(*(_DWORD *)v65 + 4),
              v23,
              v24);
        }
        sub_1BF7C((unsigned int **)&v67);
        v28 = *(_DWORD *)(v1 + 364);
        ++v17;
      }
      while ( v17 < v28 );
      if ( v28 )
      {
        v29 = 0;
        do
        {
          v30 = *(unsigned int **)(*(_DWORD *)(v1 + 360) + 12 * v29 + 8);
          v62 = *(_DWORD *)(*(_DWORD *)(v1 + 360) + 12 * v29 + 8);
          __dmb();
          do
            v31 = __ldrex(v30);
          while ( __strex(v31 + 1, v30) );
          v32 = *(_DWORD *)(v62 + 76);
          if ( v32 >= 0 )
          {
            v33 = sub_13540(v62);
            v34 = *(_DWORD *)(v33 + 8);
            sub_2AAEC((unsigned int)&v60, v13, v32);
            sub_2AAFC((unsigned int)&v58, v13, v32);
            if ( v34 )
            {
              v37 = v61;
              if ( v61 != v59 )
              {
                v38 = 0;
                while ( !*(_BYTE *)(*(_DWORD *)(*(_DWORD *)(v33 + 4) + 4 * v38) + 4744) )
                {
                  v39 = *(void (**)(void))(*(_DWORD *)v60 + 96);
                  v61 = v37 + 1;
                  v39();
                  if ( ++v38 < v34 )
                  {
                    v37 = v61;
                    if ( v61 != v59 )
                      continue;
                  }
                  goto LABEL_45;
                }
                (*(void (__cdecl **)(android::ISurfaceComposerClient *))(*(_DWORD *)v60 + 28))(v60);
              }
            }
LABEL_45:
            if ( v58 )
              (*(void (__fastcall **)(int, _DWORD, int, int))(*(_DWORD *)v58 + 4))(
                v58,
                *(_DWORD *)(*(_DWORD *)v58 + 4),
                v35,
                v36);
            if ( v60 )
              (*(void (__fastcall **)(android::ISurfaceComposerClient *, _DWORD, int, int))(*(_DWORD *)v60 + 4))(
                v60,
                *(_DWORD *)(*(_DWORD *)v60 + 4),
                v35,
                v36);
          }
          sub_1BF7C((unsigned int **)&v62);
          ++v29;
        }
        while ( v29 < *(_DWORD *)(v1 + 364) );
      }
    }
    v40 = sub_2A044(v13);
    if ( v40 )
    {
      v56 = strerror(-v40);
      _android_log_print(6, "SurfaceFlinger", "HWComposer::prepare failed (%s)", v56);
    }
    result = *(_DWORD *)(v1 + 364);
    if ( result )
    {
      v41 = 0;
      do
      {
        v57 = *(unsigned int **)(*(_DWORD *)(v1 + 360) + 12 * v41 + 8);
        v42 = v57;
        if ( v57 )
        {
          __dmb();
          do
            v43 = __ldrex(v42);
          while ( __strex(v43 + 1, v42) );
          v44 = (int)v57;
        }
        else
        {
          v44 = 0;
        }
        sub_13338(v44, v13);
        sub_1BF7C(&v57);
        result = *(_DWORD *)(v1 + 364);
        ++v41;
      }
      while ( v41 < result );
    }
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001F388) --------------------------------------------------------
signed int __fastcall sub_1F388(int a1)
{
  int v1; // r4@1
  signed int result; // r0@1
  int v3; // r7@3
  unsigned int v4; // r8@4
  int v5; // r11@5
  int *v6; // r11@5
  int v7; // t1@5
  int v8; // r2@6
  int v9; // r0@8
  int v10; // r1@8
  unsigned int *v11; // r0@10
  unsigned int v12; // r1@12
  int v13; // ST18_4@13
  int v14; // ST1C_4@13
  int v15; // r1@13
  int v16; // r0@13
  signed int v17; // r0@16
  int v18; // r4@18
  char *v19; // r0@20
  char v20; // [sp+20h] [bp-50h]@13
  int v21; // [sp+34h] [bp-3Ch]@10
  char v22; // [sp+38h] [bp-38h]@8
  int v23; // [sp+3Ch] [bp-34h]@8
  int v24; // [sp+40h] [bp-30h]@8

  v1 = a1;
  result = *(_DWORD *)(a1 + 380);
  if ( result )
  {
    v3 = *(_DWORD *)(v1 + 192);
    if ( *(_DWORD *)(v1 + 364) )
    {
      v4 = 0;
      do
      {
        v5 = *(_DWORD *)(v1 + 360) + 12 * v4;
        v7 = *(_DWORD *)(v5 + 8);
        v6 = (int *)(v5 + 8);
        if ( sub_135BC(v7) == 1 )
        {
          v8 = v3;
          if ( v3 )
            v8 = 1;
          sub_1354C((int)&v22, *v6, v8);
          v9 = v23 + 16 * v24;
          v10 = *(_DWORD *)(v9 - 16);
          if ( *(_DWORD *)(v9 - 8) > v10 )
          {
            v10 = *(_DWORD *)(v9 - 12);
            if ( *(_DWORD *)(v9 - 4) > v10 )
            {
              v11 = (unsigned int *)*v6;
              v21 = *v6;
              if ( v21 )
              {
                __dmb();
                do
                  v12 = __ldrex(v11);
                while ( __strex(v12 + 1, v11) );
              }
              v13 = *(_DWORD *)(*v6 + 108);
              v14 = *(_DWORD *)(*v6 + 112);
              android::Region::Region(&v20);
              sub_1F7D0(v1, &v21, (int)&v20);
              android::Region::~Region(&v20, v15);
              sub_1BF7C((unsigned int **)&v21);
              v16 = sub_132F0(*v6);
              sub_2EF28(*(float *)(v1 + 200), COERCE_FLOAT(&v22), *(float *)&v16, 1065353216, 0, 1065353216, 1065353216);
              sub_13310(*v6);
              ((void (__fastcall *)(int, _DWORD))loc_13378)(*v6, *(_DWORD *)(v1 + 196));
            }
          }
          android::Region::~Region(&v22, v10);
        }
        ++v4;
      }
      while ( v4 < *(_DWORD *)(v1 + 364) );
    }
    sub_1FC0C(v1);
    v17 = *(_DWORD *)(v1 + 380);
    if ( v17 >= 2 )
      usleep(1000 * v17);
    v18 = *(_DWORD *)(v1 + 196);
    result = sub_29228(v18);
    if ( !result )
    {
      result = sub_2A044(v18);
      if ( result )
      {
        v19 = strerror(-result);
        result = _android_log_print(6, "SurfaceFlinger", "HWComposer::prepare failed (%s)", v19);
      }
    }
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10B90: using guessed type int __fastcall android::Region::Region(_DWORD);

//----- (0001F4F8) --------------------------------------------------------
ssize_t __fastcall sub_1F4F8(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  unsigned int *v4; // r0@5
  unsigned int v5; // r7@6
  unsigned int v6; // r6@8
  int v7; // r5@9
  int *v8; // r5@9
  int v9; // t1@9
  int v10; // r2@10
  unsigned int *v11; // r0@12
  unsigned int v12; // r1@14
  int v13; // r1@15
  int v14; // r1@17
  int v15; // r0@17
  ssize_t result; // r0@19
  int v17; // [sp+0h] [bp-40h]@12
  char v18; // [sp+4h] [bp-3Ch]@12
  char buf; // [sp+1Bh] [bp-25h]@20

  v2 = a1;
  v3 = v0;
  __dmb();
  if ( !(v3 & 1) )
    atrace_setup(v3, a2);
  if ( v0 & 2 )
    atrace_begin_body("doComposition");
  v4 = (unsigned int *)(v2 + 192);
  __dmb();
  do
    v5 = __ldrex(v4);
  while ( __strex(0, v4) );
  sub_20704((char *)v2);
  if ( *(_DWORD *)(v2 + 364) )
  {
    v6 = 0;
    do
    {
      v7 = *(_DWORD *)(v2 + 360) + 12 * v6;
      v9 = *(_DWORD *)(v7 + 8);
      v8 = (int *)(v7 + 8);
      if ( sub_135BC(v9) == 1 )
      {
        v10 = v5;
        if ( v5 )
          v10 = 1;
        sub_1354C((int)&v18, *v8, v10);
        v11 = (unsigned int *)*v8;
        v17 = *v8;
        if ( v17 )
        {
          __dmb();
          do
            v12 = __ldrex(v11);
          while ( __strex(v12 + 1, v11) );
        }
        sub_2076C(v2, &v17, (int)&v18);
        sub_1BF7C((unsigned int **)&v17);
        android::Region::clear(*v8 + 4);
        sub_13318(*v8);
        android::Region::clear(*v8 + 24);
        android::Region::~Region(&v18, v13);
      }
      sub_13310(*v8);
      ++v6;
    }
    while ( v6 < *(_DWORD *)(v2 + 364) );
  }
  sub_1FC0C(v2);
  v15 = v0;
  __dmb();
  if ( !(v15 & 1) )
    atrace_setup(v15, v14);
  result = v0;
  if ( v0 & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 10C44: using guessed type int __fastcall android::Region::clear(_DWORD);

//----- (0001F66C) --------------------------------------------------------
unsigned int **__fastcall sub_1F66C(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  int v3; // r6@2
  int v4; // r5@4
  int v5; // r5@10
  __int64 v6; // r0@11
  int v7; // r1@14
  __int64 v8; // r8@14
  _QWORD *v9; // r1@15
  signed __int64 v10; // r0@16
  signed __int64 v11; // r2@16
  __int64 v12; // r0@16
  unsigned int v13; // r6@16
  unsigned int v14; // r5@16
  unsigned int v15; // r0@16
  int v17; // [sp+0h] [bp-20h]@8
  int v18; // [sp+4h] [bp-1Ch]@4

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 256);
  if ( v2 )
  {
    v3 = 0;
    do
      sub_19900(*(_DWORD *)(*(_DWORD *)(v1 + 252) + 4 * v3++));
    while ( v2 != v3 );
  }
  v4 = *(_DWORD *)(v1 + 196);
  sub_294E4((unsigned int **)&v18, *(_DWORD *)(v1 + 196), 0);
  if ( *(_DWORD *)(v18 + 4) != -1 )
  {
    if ( sub_13BD0(v1 + 4624, (unsigned int **)&v18) == 1 )
      sub_1E0AC(v1);
    else
      sub_1E184(v1, 0);
  }
  sub_17760((unsigned int **)&v17, v1);
  if ( *(_BYTE *)(v1 + 354) )
  {
    *(_BYTE *)(v1 + 354) = 0;
    if ( *(_DWORD *)(v18 + 4) == -1 )
    {
      v6 = sub_29480(v4, 0);
      v5 = v1 + 472;
      sub_169CC(v1 + 472, SHIDWORD(v6), v6);
    }
    else
    {
      v5 = v1 + 472;
      sub_169FC(v1 + 472, (unsigned int **)&v18);
    }
    sub_16A60(v5);
  }
  if ( sub_135B4(v17) )
  {
    LODWORD(v8) = systemTime(1);
    HIDWORD(v8) = v7;
    if ( *(_BYTE *)(v1 + 5238) )
    {
      *(_BYTE *)(v1 + 5238) = 0;
      v9 = (_QWORD *)(v1 + 5312);
    }
    else
    {
      LODWORD(v10) = sub_142F8(v1 + 4624);
      v11 = v10;
      v12 = *(_QWORD *)(v1 + 5312);
      v13 = v8 - v12;
      v14 = (unsigned __int64)(v8 - v12) >> 32;
      v15 = (v8 - v12) / v11;
      v9 = (_QWORD *)(v1 + 5312);
      if ( v15 > 6 )
        *(_QWORD *)(v1 + 5296) += __PAIR__(v14, v13);
      else
        *(_QWORD *)(v1 + 8 * v15 + 5240) += __PAIR__(v14, v13);
      *(_QWORD *)(v1 + 5304) += __PAIR__(v14, v13);
    }
    *v9 = v8;
  }
  sub_1BF7C((unsigned int **)&v17);
  return sub_17AF0((unsigned int **)&v18);
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (0001F7D0) --------------------------------------------------------
signed int __fastcall sub_1F7D0(int a1, int *a2, int a3)
{
  int *v3; // r4@1
  int v4; // r7@1
  int v5; // r5@1
  unsigned int v6; // r6@1
  int v7; // r10@1
  signed int v8; // r8@1
  int v9; // r2@2
  int v10; // r2@4
  int v11; // r2@7
  int v12; // r5@7
  signed int v13; // r4@9
  int v14; // r2@9
  int v15; // r6@9
  int v16; // r1@11
  int v17; // r0@11
  int v18; // r0@11
  int v19; // r1@11
  int v20; // r0@13
  int v21; // r1@14
  int v22; // r1@14
  int v23; // r5@15
  int v24; // r0@20
  int v25; // r3@21
  int v26; // r11@21
  unsigned int v27; // r9@21
  int v28; // r7@23
  int v29; // r6@23
  int v30; // r5@24
  int v31; // r1@24
  int v32; // r0@24
  int v33; // r1@24
  int *v34; // r10@29
  int v35; // r7@31
  int v36; // r4@31
  int v37; // r8@31
  int v38; // r5@32
  int v39; // r1@32
  int v40; // r0@32
  char v41; // r0@35
  int v42; // r3@35
  bool v43; // zf@35
  signed int v44; // r0@39
  int v45; // r1@45
  void (__fastcall *v46)(_DWORD, _DWORD, _DWORD, _DWORD); // r2@45
  int v47; // r3@45
  int v49; // [sp+Ch] [bp-F4h]@31
  int v50; // [sp+18h] [bp-E8h]@35
  int v51; // [sp+20h] [bp-E0h]@21
  int v52; // [sp+24h] [bp-DCh]@1
  char v53; // [sp+28h] [bp-D8h]@24
  char v54; // [sp+3Ch] [bp-C4h]@24
  int v55; // [sp+40h] [bp-C0h]@24
  int v56; // [sp+44h] [bp-BCh]@24
  char v57; // [sp+50h] [bp-B0h]@32
  char v58; // [sp+64h] [bp-9Ch]@32
  int v59; // [sp+68h] [bp-98h]@32
  int v60; // [sp+6Ch] [bp-94h]@32
  char v61; // [sp+78h] [bp-88h]@11
  int v62; // [sp+7Ch] [bp-84h]@11
  int v63; // [sp+80h] [bp-80h]@11
  char v64; // [sp+8Ch] [bp-74h]@11
  int v65; // [sp+A0h] [bp-60h]@11
  int v66; // [sp+A4h] [bp-5Ch]@11
  int v67; // [sp+A8h] [bp-58h]@11
  int v68; // [sp+ACh] [bp-54h]@11
  char v69; // [sp+B0h] [bp-50h]@11
  int v70; // [sp+C4h] [bp-3Ch]@9
  int v71; // [sp+C8h] [bp-38h]@7
  int v72; // [sp+CCh] [bp-34h]@1
  int v73; // [sp+D0h] [bp-30h]@21
  int v74; // [sp+D4h] [bp-2Ch]@1
  int v75; // [sp+D8h] [bp-28h]@21

  v3 = a2;
  v4 = a1;
  v5 = *(_DWORD *)(a1 + 196);
  v52 = a3;
  v6 = *(_DWORD *)(*a2 + 76);
  v7 = *(_DWORD *)(a1 + 200);
  sub_2AAEC((unsigned int)&v74, *(_DWORD *)(a1 + 196), v6);
  sub_2AAFC((unsigned int)&v72, v5, v6);
  v8 = sub_2A294(v5, v6);
  if ( sub_2A254(v5, v6) == 1 )
  {
    v9 = *(_DWORD *)(v4 + 232);
    if ( !sub_1345C(*v3, *(_DWORD *)(v4 + 236)) )
    {
      _android_log_print(
        6,
        "SurfaceFlinger",
        "DisplayDevice::makeCurrent failed(hasHwc2DComposition). Aborting surface composition for display %s",
        *(_DWORD *)(*v3 + 128));
      eglMakeCurrent(*(_DWORD *)(v4 + 236));
      sub_17760((unsigned int **)&v71, v4);
      v11 = *(_DWORD *)(v4 + 232);
      v12 = sub_1345C(v71, *(_DWORD *)(v4 + 236));
      sub_1BF7C((unsigned int **)&v71);
      if ( !v12 )
        _android_log_print(
          6,
          "SurfaceFlinger",
          "DisplayDevice::makeCurrent on default display failed(hasHwc2DComposition). Aborting.");
      goto LABEL_48;
    }
  }
  if ( v8 != 1 )
  {
LABEL_21:
    v26 = sub_13540(*v3);
    v27 = *(_DWORD *)(v26 + 8);
    v51 = *v3 + 216;
    if ( v75 == v73 )
    {
      if ( v27 )
      {
        v28 = v4 + 16;
        v29 = 0;
        do
        {
          v30 = *(_DWORD *)(v26 + 4);
          (*(void (__fastcall **)(int, int, _DWORD, int))(*(_DWORD *)v28 + 56))(
            v28,
            v30 + v29,
            *(_DWORD *)(*(_DWORD *)v28 + 56),
            v25);
          sub_280A4((int)&v53, v51, *(_DWORD *)(v30 + v29) + 8);
          android::Region::intersect(&v54, v52, &v53);
          android::Region::~Region(&v53, v31);
          v32 = v55 + 16 * v56;
          v33 = *(_DWORD *)(v32 - 16);
          if ( *(_DWORD *)(v32 - 8) > v33 )
          {
            v33 = *(_DWORD *)(v32 - 12);
            if ( *(_DWORD *)(v32 - 4) > v33 )
              sub_189A4(*(_DWORD *)(v30 + v29));
          }
          android::Region::~Region(&v54, v33);
          v29 += 4;
          --v27;
        }
        while ( v27 );
      }
    }
    else
    {
      v34 = v3;
      if ( v27 && v75 != v73 )
      {
        v49 = v8 ^ 1;
        v35 = v4 + 16;
        v36 = 0;
        v37 = 0;
        do
        {
          v38 = *(_DWORD *)(v26 + 4);
          (*(void (__fastcall **)(int, int, _DWORD, int))(*(_DWORD *)v35 + 56))(
            v35,
            v38 + v36,
            *(_DWORD *)(*(_DWORD *)v35 + 56),
            v25);
          sub_280A4((int)&v57, v51, *(_DWORD *)(v38 + v36) + 8);
          android::Region::intersect(&v58, v52, &v57);
          android::Region::~Region(&v57, v39);
          v40 = v59 + 16 * v60;
          if ( *(_DWORD *)(v40 - 8) > *(_DWORD *)(v40 - 16) && *(_DWORD *)(v40 - 4) > *(_DWORD *)(v40 - 12) )
          {
            switch ( (*(int (**)(void))(*(_DWORD *)v74 + 8))() )
            {
              case 1:
              case 5:
                v50 = *(_DWORD *)(v38 + v36);
                v41 = (*(int (**)(void))(*(_DWORD *)v74 + 12))();
                v43 = v37 == 0;
                if ( v37 )
                  v43 = (v41 & 2) == 0;
                if ( !v43
                  && (*(int (__fastcall **)(_DWORD, int, _DWORD, int))(**(_DWORD **)(v38 + v36) + 24))(
                       *(_DWORD *)(v38 + v36),
                       v50 + 264,
                       *(_DWORD *)(**(_DWORD **)(v38 + v36) + 24),
                       v42) == 1 )
                {
                  v44 = 0;
                  if ( *(_BYTE *)(v50 + 320) != 255 )
                    v44 = 1;
                  if ( !(v44 | v49) )
                    sub_19224(*(_DWORD *)(v38 + v36), v34);
                }
                break;
              case 0:
                sub_189A4(*(_DWORD *)(v38 + v36));
                break;
              case 3:
                _android_log_print(5, "SurfaceFlinger", "HWC_FRAMEBUFFER_TARGET found in hwc list (index=%zu)", v37);
                break;
              default:
                break;
            }
          }
          sub_18850(*(_DWORD *)(v38 + v36), (int)v34, v74);
          android::Region::~Region(&v58, v45);
          v46 = *(void (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)v74 + 96);
          v46(v74, ++v75, v46, v47);
          if ( ++v37 >= v27 )
            break;
          v36 += 4;
        }
        while ( v75 != v73 );
      }
    }
    sub_2F0BC();
LABEL_48:
    v13 = 1;
    goto LABEL_49;
  }
  v10 = *(_DWORD *)(v4 + 232);
  if ( sub_1345C(*v3, *(_DWORD *)(v4 + 236)) )
  {
    if ( sub_2A21C(v5, v6) == 1 )
    {
      sub_2F07C(v7, 0.0, 0.0, 0.0, 0.0);
    }
    else
    {
      v16 = *(_DWORD *)(*v3 + 108);
      v17 = *(_DWORD *)(*v3 + 112);
      v66 = 0;
      v65 = 0;
      v67 = v16;
      v68 = v17;
      android::Region::Region(&v69);
      android::Region::subtract(&v64, &v69, *v3 + 200);
      android::Region::merge(&v61, *v3 + 44, &v64);
      android::Region::andSelf(&v61, v52);
      v18 = v62 + 16 * v63;
      v19 = *(_DWORD *)(v18 - 16);
      if ( *(_DWORD *)(v18 - 8) > v19 )
      {
        v19 = *(_DWORD *)(v18 - 12);
        if ( *(_DWORD *)(v18 - 4) > v19 )
        {
          v20 = sub_132F0(*v3);
          sub_2EF28(*(float *)(v4 + 200), COERCE_FLOAT(&v61), *(float *)&v20, 0, 0, 0, 0);
        }
      }
      android::Region::~Region(&v61, v19);
      android::Region::~Region(&v64, v21);
      android::Region::~Region(&v69, v22);
    }
    v23 = *v3;
    if ( *(_DWORD *)(*v3 + 72)
      && (*(_DWORD *)(v23 + 200)
       || *(_DWORD *)(v23 + 204)
       || *(_DWORD *)(v23 + 208) != *(_DWORD *)(v23 + 108)
       || *(_DWORD *)(v23 + 212) != *(_DWORD *)(v23 + 112)) )
    {
      v24 = sub_132F0(*v3);
      sub_2F09C(
        v7,
        *(_DWORD *)(v23 + 200),
        v24 - *(_DWORD *)(v23 + 212),
        *(_DWORD *)(v23 + 208) - *(_DWORD *)(v23 + 200),
        *(_DWORD *)(v23 + 212) - *(_DWORD *)(v23 + 204));
    }
    goto LABEL_21;
  }
  _android_log_print(
    5,
    "SurfaceFlinger",
    "DisplayDevice::makeCurrent failed. Aborting surface composition for display %s",
    *(_DWORD *)(*v3 + 128));
  v13 = 0;
  eglMakeCurrent(*(_DWORD *)(v4 + 236));
  sub_17760((unsigned int **)&v70, v4);
  v14 = *(_DWORD *)(v4 + 232);
  v15 = sub_1345C(v70, *(_DWORD *)(v4 + 236));
  sub_1BF7C((unsigned int **)&v70);
  if ( !v15 )
  {
    _android_log_print(6, "SurfaceFlinger", "DisplayDevice::makeCurrent on default display failed. Aborting.");
    v13 = 0;
  }
LABEL_49:
  if ( v72 )
    (*(void (**)(void))(*(_DWORD *)v72 + 4))();
  if ( v74 )
    (*(void (**)(void))(*(_DWORD *)v74 + 4))();
  return v13;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 1080C: using guessed type int __fastcall eglMakeCurrent(_DWORD);
// 10B90: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10EE4: using guessed type int __fastcall android::Region::subtract(_DWORD, _DWORD, _DWORD);
// 10EF0: using guessed type int __fastcall android::Region::merge(_DWORD, _DWORD, _DWORD);
// 10EFC: using guessed type int __fastcall android::Region::andSelf(_DWORD, _DWORD);
// 10F08: using guessed type int __fastcall android::Region::intersect(_DWORD, _DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0001FC0C) --------------------------------------------------------
ssize_t __fastcall sub_1FC0C(int a1)
{
  int v1; // r11@1
  int v2; // r0@1
  unsigned int v3; // r1@5
  int v4; // r7@5
  int v5; // r2@7
  int v6; // r2@9
  unsigned int v7; // r9@10
  unsigned int *v8; // r0@11
  unsigned int v9; // r1@13
  int v10; // r0@14
  int v11; // r6@16
  unsigned int v12; // r10@16
  signed int v13; // r8@16
  int v14; // r4@19
  unsigned int v15; // r4@24
  void (*v16)(void); // r2@25
  __int64 v17; // r0@32
  unsigned int v18; // r6@32
  int v19; // r0@34
  ssize_t result; // r0@36
  unsigned int v21; // [sp+8h] [bp-50h]@5
  int v22; // [sp+Ch] [bp-4Ch]@5
  int v23; // [sp+10h] [bp-48h]@32
  int v24; // [sp+14h] [bp-44h]@22
  int v25; // [sp+18h] [bp-40h]@23
  int v26; // [sp+1Ch] [bp-3Ch]@22
  int v27; // [sp+20h] [bp-38h]@23
  int v28; // [sp+24h] [bp-34h]@11
  int v29; // [sp+28h] [bp-30h]@9
  int v30; // [sp+2Ch] [bp-2Ch]@7
  char buf; // [sp+33h] [bp-25h]@37

  v1 = a1;
  v2 = v0;
  __dmb();
  if ( !(v2 & 1) )
    atrace_setup(v2, 0xFFFFFF78);
  if ( v0 & 2 )
    atrace_begin_body("postFramebuffer");
  v22 = systemTime(1);
  v21 = v3;
  *(_DWORD *)(v1 + 404) = v3;
  *(_DWORD *)(v1 + 400) = v22;
  v4 = *(_DWORD *)(v1 + 196);
  if ( !sub_29228(*(_DWORD *)(v1 + 196)) )
  {
    if ( !sub_2A8B4(v4) )
    {
      sub_17760((unsigned int **)&v30, v1);
      v5 = *(_DWORD *)(v1 + 232);
      sub_1345C(v30, *(_DWORD *)(v1 + 236));
      sub_1BF7C((unsigned int **)&v30);
    }
    sub_2A38C(v4);
  }
  sub_17760((unsigned int **)&v29, v1);
  v6 = *(_DWORD *)(v1 + 232);
  sub_1345C(v29, *(_DWORD *)(v1 + 236));
  sub_1BF7C((unsigned int **)&v29);
  if ( *(_DWORD *)(v1 + 364) )
  {
    v7 = 0;
    do
    {
      v28 = *(_DWORD *)(*(_DWORD *)(v1 + 360) + 12 * v7 + 8);
      v8 = (unsigned int *)v28;
      if ( v28 )
      {
        __dmb();
        do
          v9 = __ldrex(v8);
        while ( __strex(v9 + 1, v8) );
        v10 = v28;
      }
      else
      {
        v10 = 0;
      }
      v11 = sub_13540(v10);
      sub_1343C(v28, v4);
      v12 = *(_DWORD *)(v11 + 8);
      v13 = *(_DWORD *)(v28 + 76);
      if ( v13 <= -1 || sub_29228(v4) )
      {
        if ( v12 )
        {
          v14 = 0;
          do
            sub_17ABC(*(unsigned int ***)(*(_DWORD *)(v11 + 4) + 4 * v14++), (int)&v28, 0);
          while ( v12 != v14 );
        }
      }
      else
      {
        sub_2AAEC((unsigned int)&v26, v4, v13);
        sub_2AAFC((unsigned int)&v24, v4, v13);
        if ( v12 && v27 != v25 )
        {
          v15 = 0;
          do
          {
            sub_17ABC(*(unsigned int ***)(*(_DWORD *)(v11 + 4) + 4 * v15), (int)&v28, v26);
            v16 = *(void (**)(void))(*(_DWORD *)v26 + 96);
            ++v27;
            v16();
            ++v15;
          }
          while ( v15 < v12 && v27 != v25 );
        }
        if ( v24 )
          (*(void (**)(void))(*(_DWORD *)v24 + 4))();
        if ( v26 )
          (*(void (**)(void))(*(_DWORD *)v26 + 4))();
      }
      sub_1BF7C((unsigned int **)&v28);
      ++v7;
    }
    while ( v7 < *(_DWORD *)(v1 + 364) );
  }
  LODWORD(v17) = systemTime(1);
  *(_QWORD *)(v1 + 408) = v17 - __PAIR__(v21, v22);
  *(_DWORD *)(v1 + 404) = 0;
  *(_DWORD *)(v1 + 400) = 0;
  sub_17760((unsigned int **)&v23, v1);
  v18 = sub_1330C(v23);
  sub_1BF7C((unsigned int **)&v23);
  if ( v18 == 108000 * (v18 / 0x1A5E0) )
    sub_2098C(v1);
  v19 = v0;
  __dmb();
  if ( !(v19 & 1) )
    atrace_setup(v19, 0xFFFFFF78);
  result = v0;
  if ( v0 & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);

//----- (0001FE84) --------------------------------------------------------
signed int __fastcall sub_1FE84(int a1, int a2, signed int *a3, _BYTE *a4)
{
  int v4; // r6@1
  int v5; // r7@1
  signed int *v6; // r9@1
  signed int v7; // r4@1
  int v8; // r10@1
  _BYTE *v9; // r8@1
  int v10; // r5@1
  int v11; // r1@1
  int v12; // r2@1
  int v13; // r4@3
  signed int v14; // r5@3
  signed int v15; // r9@3
  int v16; // r11@4
  const char **v17; // r0@4
  int v18; // r1@4
  int v19; // r2@5
  const char *v20; // r8@6
  signed int v21; // r2@11
  const char **v22; // r0@20
  int v23; // r4@24
  int *v24; // r0@24
  int v25; // r1@28
  int v26; // r4@28
  signed int v27; // r5@30
  int v28; // r1@32
  int v29; // r1@33
  signed int v31; // [sp+0h] [bp-68h]@0
  _BYTE *v32; // [sp+4h] [bp-64h]@3
  signed int *v33; // [sp+8h] [bp-60h]@3
  int v34; // [sp+10h] [bp-58h]@11
  android::RefBase *v35; // [sp+18h] [bp-50h]@29
  android::RefBase *v36; // [sp+1Ch] [bp-4Ch]@10
  char v37; // [sp+20h] [bp-48h]@4
  int v38; // [sp+24h] [bp-44h]@4
  int v39; // [sp+28h] [bp-40h]@4
  int v40; // [sp+34h] [bp-34h]@1
  int v41; // [sp+38h] [bp-30h]@1
  int v42; // [sp+3Ch] [bp-2Ch]@1
  int v43; // [sp+40h] [bp-28h]@1

  v4 = a1;
  v5 = a2;
  v6 = a3;
  v7 = 0;
  v8 = *(_DWORD *)(a2 + 8);
  v9 = a4;
  v10 = *(_DWORD *)(*(_DWORD *)(a1 + 360) + 8);
  v11 = *(_DWORD *)(v10 + 108);
  v12 = *(_DWORD *)(v10 + 112);
  v41 = 0;
  v40 = 0;
  v42 = v11;
  v43 = v12;
  if ( sub_135BC(v10) != 1 || v8 < 1 )
    return v7;
  v13 = v10 + 216;
  v14 = -1;
  v33 = v6;
  v15 = 0;
  v32 = v9;
  while ( 1 )
  {
    v16 = *(_DWORD *)(v5 + 4);
    sub_280A4((int)&v37, v13, *(_DWORD *)(v16 + 4 * v15) + 48);
    android::Region::andSelf(&v37, &v40);
    v17 = (const char **)sub_17C58(*(_DWORD *)(v16 + 4 * v15));
    v18 = v38 + 16 * v39;
    if ( *(_DWORD *)(v18 - 8) <= *(_DWORD *)(v18 - 16) )
      goto LABEL_26;
    v19 = *(_DWORD *)(v18 - 12);
    v18 = *(_DWORD *)(v18 - 4);
    if ( v18 <= v19 )
      goto LABEL_26;
    v20 = *v17;
    if ( v14 != -1 )
      break;
    v14 = -1;
    if ( _strlen_chk(*v17, -1) == 11 )
    {
      if ( !strncmp(v20, "SurfaceView", 0xBu) )
      {
        if ( *(_DWORD *)(v16 + 4 * v15)
          && (v36 = 0, sub_1A074(&v36, (android::RefBase **)(*(_DWORD *)(v16 + 4 * v15) + 4576)), v36) )
        {
          v31 = *((_DWORD *)v36 + 13);
          v34 = *((_DWORD *)v36 + 14);
          android::RefBase::decStrong(v36, &v36);
          v21 = v31;
        }
        else
        {
          v21 = -1;
          v34 = 0;
        }
        v18 = v34;
        v14 = v15;
        if ( v21 == 842094169 )
          break;
        v14 = v15;
        if ( (unsigned int)(v21 - 16) < 0xFA )
          break;
        if ( (v34 & 0xF0) == 48 && v21 == 4 )
        {
          v14 = v15;
          if ( (v34 & 0xF) == 3 )
            break;
        }
        if ( v21 == 4 && v15 + 1 < v8 )
        {
          v22 = (const char **)sub_17C58(*(_DWORD *)(*(_DWORD *)(v5 + 4) + 4 * v15 + 4));
          v14 = -1;
          if ( sub_29CC0(*(_DWORD *)(v4 + 196), *v22) )
            v14 = v15;
          break;
        }
      }
      v14 = -1;
    }
LABEL_26:
    android::Region::~Region(&v37, v18);
    if ( ++v15 >= v8 )
      return 0;
  }
  if ( v14 == -1 || v15 <= v14 )
    goto LABEL_26;
  v23 = *(_DWORD *)(v5 + 4);
  v24 = (int *)sub_17C58(*(_DWORD *)(v23 + 4 * v15));
  v25 = *(_DWORD *)(v23 + 4 * v15);
  v26 = *v24;
  if ( v25 && (v35 = 0, sub_1A074(&v35, (android::RefBase **)(*(_DWORD *)(v16 + 4 * v15) + 4576)), v35) )
  {
    v27 = *((_DWORD *)v35 + 13);
    android::RefBase::decStrong(v35, &v35);
  }
  else
  {
    v27 = -1;
  }
  if ( (unsigned int)_strlen_chk(v26, -1) >= 0x80 )
  {
    _android_log_print(3, "SurfaceFlinger", "error, SurfaceFlinger checkStartingLayer Layer Name too long:%s", v20, v31);
    v7 = 0;
LABEL_37:
    android::Region::~Region(&v37, v29);
    return v7;
  }
  if ( v27 == 1 )
  {
    v7 = 1;
    v29 = v4;
    *v33 = v15;
    if ( !*(_BYTE *)(v4 + 352) )
    {
      *(_BYTE *)(v4 + 352) = 1;
      *v32 = 1;
    }
    goto LABEL_37;
  }
  android::Region::~Region(&v37, v28);
  return 0;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 1083C: using guessed type int __fastcall android::Region::andSelf(_DWORD, _DWORD);
// 10F14: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);

//----- (000200B4) --------------------------------------------------------
int __fastcall sub_200B4(int result)
{
  *(_BYTE *)(result + 353) = 1;
  return result;
}

//----- (000200BC) --------------------------------------------------------
signed int __fastcall sub_200BC(int a1, int a2, int *a3)
{
  int *v3; // r10@1
  int v4; // r5@1
  signed int v5; // r7@1
  unsigned int v6; // r0@1
  int v7; // r4@2
  int v8; // r0@3
  int v9; // r1@3
  const char *v10; // r7@5
  char v12; // [sp+0h] [bp-A8h]@1
  int v13; // [sp+84h] [bp-24h]@1

  v3 = a3;
  v4 = a2;
  v5 = 0;
  v13 = v0;
  _aeabi_memset(&v12, 128, 0);
  v6 = *(_DWORD *)(v4 + 8);
  if ( v6 >= 3 )
  {
    v7 = v6 - 1;
    if ( ((v6 - 1) & 0x80000000) != 0 )
    {
LABEL_13:
      v5 = 0;
    }
    else
    {
      while ( 1 )
      {
        v5 = 0;
        v8 = *(_DWORD *)(*(_DWORD *)(v4 + 4) + 4 * v7);
        v9 = *(_DWORD *)(v8 + 12) + 16 * *(_DWORD *)(v8 + 16);
        if ( *(_DWORD *)(v9 - 8) <= *(_DWORD *)(v9 - 16) || *(_DWORD *)(v9 - 4) <= *(_DWORD *)(v9 - 12) )
          break;
        v10 = *(const char **)sub_17C58(v8);
        if ( strstr(v10, "Starting ") )
        {
          if ( (unsigned int)_strlen_chk(v10, -1) >= 0x80 )
          {
            _android_log_print(3, "SurfaceFlinger", "error, SurfaceFlinger checkSkipLayer Layer Name too long:%s", v10);
            goto LABEL_13;
          }
          _strcpy_chk(&v12, v10 + 9, 128);
          *v3 = v7;
        }
        else if ( v12 && strstr(v10, &v12) )
        {
          v5 = 1;
          break;
        }
        if ( --v7 <= -1 )
          goto LABEL_13;
      }
    }
  }
  if ( v0 != v13 )
    _stack_chk_fail(v0 - v13);
  return v5;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10860: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 10F14: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);
// 10F2C: using guessed type int __fastcall _strcpy_chk(_DWORD, _DWORD, _DWORD);

//----- (000201C4) --------------------------------------------------------
ssize_t __fastcall sub_201C4(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r6@1
  int v6; // r0@1
  int v7; // r0@5
  int v8; // r11@6
  char *v9; // r5@6
  char *v10; // r10@6
  int v11; // r9@7
  int v12; // r8@7
  int v13; // r6@9
  int v14; // r0@9
  int v15; // r2@14
  char *v16; // r7@14
  int v17; // r1@16
  char v18; // r0@19
  signed int v19; // r1@19
  int v20; // r1@24
  char *v21; // r6@25
  char *v22; // r7@25
  int v23; // r1@26
  int v24; // r1@26
  int v25; // r1@26
  int v26; // r1@26
  int v27; // r1@26
  int v28; // r1@26
  int v29; // r1@26
  int v30; // r6@27
  int v31; // r1@27
  int v32; // r1@27
  int v33; // r1@27
  int v34; // r1@27
  int v35; // r1@27
  int v36; // r1@29
  int v37; // r1@29
  int v38; // r1@29
  int v39; // r0@29
  ssize_t result; // r0@31
  int v41; // [sp+4Ch] [bp-1E4h]@1
  int v42; // [sp+50h] [bp-1E0h]@1
  int v43; // [sp+54h] [bp-1DCh]@1
  int v44; // [sp+58h] [bp-1D8h]@1
  char v45; // [sp+5Ch] [bp-1D4h]@27
  char v46; // [sp+70h] [bp-1C0h]@26
  char v47; // [sp+84h] [bp-1ACh]@26
  char v48; // [sp+98h] [bp-198h]@26
  char v49; // [sp+ACh] [bp-184h]@26
  char v50; // [sp+C0h] [bp-170h]@26
  char v51; // [sp+D4h] [bp-15Ch]@26
  char v52; // [sp+E8h] [bp-148h]@26
  char v53; // [sp+FCh] [bp-134h]@24
  char v54; // [sp+110h] [bp-120h]@15
  char v55; // [sp+124h] [bp-10Ch]@14
  char buf; // [sp+138h] [bp-F8h]@12
  char v57; // [sp+160h] [bp-D0h]@9
  char v58; // [sp+170h] [bp-C0h]@9
  char v59; // [sp+180h] [bp-B0h]@8
  char v60; // [sp+194h] [bp-9Ch]@6
  char v61; // [sp+1A8h] [bp-88h]@6
  int v62; // [sp+1ACh] [bp-84h]@9
  int v63; // [sp+1B0h] [bp-80h]@9
  char v64; // [sp+1BCh] [bp-74h]@8
  char v65; // [sp+1D0h] [bp-60h]@5
  char v66; // [sp+1E4h] [bp-4Ch]@5
  char v67; // [sp+1F8h] [bp-38h]@5

  v4 = a2;
  v5 = a1;
  v41 = a4;
  v44 = a3;
  v42 = a2;
  v43 = a1;
  v6 = v0;
  __dmb();
  if ( !(v6 & 1) )
    atrace_setup(v6, 0xFFFFFF78);
  if ( v0 & 2 )
    atrace_begin_body("computeVisibleRegions");
  android::Region::Region(&v67);
  android::Region::Region(&v66);
  android::Region::Region(&v65);
  android::Region::clear(v44);
  v7 = *(_DWORD *)(v5 + 8);
  if ( v7 )
  {
    v8 = v7 - 1;
    v9 = &v61;
    v10 = &v60;
    while ( 1 )
    {
      v11 = *(_DWORD *)(v5 + 4);
      v12 = *(_DWORD *)(v11 + 4 * v8);
      if ( *(_DWORD *)(v12 + 316) == v4 )
        break;
LABEL_28:
      if ( --v8 == -1 )
        goto LABEL_29;
    }
    android::Region::Region(&v64);
    android::Region::Region(v9);
    android::Region::Region(v10);
    android::Region::Region(&v59);
    if ( (*(int (**)(void))(**(_DWORD **)(v11 + 4 * v8) + 36))() != 1
      || (v13 = (*(int (**)(void))(**(_DWORD **)(v11 + 4 * v8) + 24))(),
          sub_1802C((android::Rect *)&v57, *(_DWORD *)(v11 + 4 * v8)),
          sub_27ED8((int)&v58, v12 + 328, (int)&v57),
          android::Region::set(v9, &v58),
          v14 = v62 + 16 * v63,
          *(_DWORD *)(v14 - 8) <= *(_DWORD *)(v14 - 16))
      || *(_DWORD *)(v14 - 4) <= *(_DWORD *)(v14 - 12) )
    {
LABEL_24:
      android::Region::intersect(&v53, &v66, v9);
      v10 = &v60;
      android::Region::operator=(&v60);
      android::Region::~Region(&v53, v20);
      android::Region::orSelf(&v66, v9);
      android::Region::subtractSelf(v9, &v67);
      if ( *(_BYTE *)(*(_DWORD *)(v11 + 4 * v8) + 4) )
      {
        v21 = &v65;
        android::Region::operator=(&v65);
        android::Region::orSelf(&v65, *(_DWORD *)(v11 + 4 * v8) + 8);
        v22 = v9;
        *(_BYTE *)(*(_DWORD *)(v11 + 4 * v8) + 4) = 0;
      }
      else
      {
        android::Region::subtract(&v52, v9, &v60);
        android::Region::Region(&v51, *(_DWORD *)(v11 + 4 * v8) + 8);
        android::Region::Region(&v50, *(_DWORD *)(v11 + 4 * v8) + 28);
        android::Region::subtract(&v49, &v51, &v50);
        android::Region::intersect(&v47, &v61, &v50);
        android::Region::subtract(&v46, &v52, &v49);
        android::Region::merge(&v48, &v47, &v46);
        android::Region::operator=(&v65);
        android::Region::~Region(&v48, v23);
        android::Region::~Region(&v46, v24);
        android::Region::~Region(&v47, v25);
        android::Region::~Region(&v49, v26);
        v21 = &v65;
        android::Region::~Region(&v50, v27);
        android::Region::~Region(&v51, v28);
        android::Region::~Region(&v52, v29);
        v22 = &v61;
      }
      android::Region::subtractSelf(v21, &v67);
      android::Region::orSelf(v44, v21);
      android::Region::orSelf(&v67, &v64);
      sub_19320(*(_DWORD *)(v11 + 4 * v8));
      sub_19328(*(_DWORD *)(v11 + 4 * v8));
      v30 = *(_DWORD *)(v11 + 4 * v8);
      android::Region::subtract(&v45, v22, &v59);
      sub_19330(v30);
      android::Region::~Region(&v45, v31);
      android::Region::~Region(&v59, v32);
      android::Region::~Region(&v60, v33);
      android::Region::~Region(v22, v34);
      android::Region::~Region(&v64, v35);
      v4 = v42;
      v9 = v22;
      v5 = v43;
      goto LABEL_28;
    }
    if ( v13 )
    {
LABEL_19:
      v18 = sub_28280(v12 + 328);
      v19 = 0;
      if ( *(_BYTE *)(v12 + 320) == 255 )
        v19 = 1;
      if ( !(v18 & 0x80) && (v13 & v19) == 1 )
        android::Region::operator=(&v64);
      goto LABEL_24;
    }
    sub_279FC((int)&buf, v12 + 328);
    if ( sub_27CD0((int)&buf) == 1 )
    {
      if ( sub_28188((int)&buf) != 1 )
      {
        android::Region::clear(&v59);
        goto LABEL_18;
      }
      v15 = v12 + 368;
      v16 = &v55;
    }
    else
    {
      v15 = v12 + 368;
      v16 = &v54;
    }
    sub_280A4((int)v16, (int)&buf, v15);
    android::Region::operator=(&v59);
    android::Region::~Region(v16, v17);
LABEL_18:
    android::Nsd::postDraw((android::Nsd *)&buf);
    goto LABEL_19;
  }
LABEL_29:
  android::Region::operator=(v41);
  android::Region::~Region(&v65, v36);
  android::Region::~Region(&v66, v37);
  android::Region::~Region(&v67, v38);
  v39 = v0;
  __dmb();
  if ( !(v39 & 1) )
    atrace_setup(v39, 0xFFFFFF78);
  result = v0;
  if ( v0 & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10B9C: using guessed type int __fastcall android::Region::subtract(_DWORD, _DWORD, _DWORD);
// 10BB4: using guessed type int __fastcall android::Region::Region(_DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 10C2C: using guessed type int __fastcall android::Region::orSelf(_DWORD, _DWORD);
// 10C44: using guessed type int __fastcall android::Region::clear(_DWORD);
// 10ECC: using guessed type int __fastcall android::Region::subtractSelf(_DWORD, _DWORD);
// 10EF0: using guessed type int __fastcall android::Region::merge(_DWORD, _DWORD, _DWORD);
// 10F08: using guessed type int __fastcall android::Region::intersect(_DWORD, _DWORD, _DWORD);

//----- (00020548) --------------------------------------------------------
int __fastcall sub_20548(int a1, int a2, int a3, _DWORD *a4, _BYTE *a5)
{
  int v5; // r6@1
  int v6; // r5@1
  int v7; // r7@1
  _DWORD *v8; // r11@1
  int v9; // r4@1
  int v10; // r0@1
  int v11; // r4@1
  int v12; // t1@1
  int v13; // r1@1
  int v14; // r2@1
  int v15; // r10@1
  int v16; // r6@2
  int v17; // r8@2
  int v18; // r9@3
  int v19; // r0@3
  int v20; // r0@4
  signed int v21; // r1@4
  const char **v22; // r0@6
  char v24; // [sp+4h] [bp-5Ch]@4
  int v25; // [sp+8h] [bp-58h]@4
  int v26; // [sp+Ch] [bp-54h]@4
  int v27; // [sp+18h] [bp-48h]@1
  int v28; // [sp+1Ch] [bp-44h]@1
  int v29; // [sp+20h] [bp-40h]@1
  int v30; // [sp+24h] [bp-3Ch]@1
  void *v31; // [sp+28h] [bp-38h]@1

  v5 = a3;
  v6 = a2;
  v7 = a1;
  v8 = a4;
  android::VectorImpl::VectorImpl((android::VectorImpl *)&v31, 4u, 0);
  v31 = &unk_3F624;
  v9 = *(_DWORD *)(v7 + 360) + 12 * v5;
  v12 = *(_DWORD *)(v9 + 8);
  v11 = v9 + 8;
  v10 = v12;
  v13 = *(_DWORD *)(v12 + 108);
  v14 = *(_DWORD *)(v12 + 112);
  v28 = 0;
  v27 = 0;
  v29 = v13;
  v30 = v14;
  v15 = *(_DWORD *)(v6 + 8);
  if ( v15 )
  {
    v16 = v10 + 216;
    v17 = 0;
    do
    {
      v18 = *(_DWORD *)(v6 + 4);
      v19 = *(_DWORD *)(v18 + 4 * v17);
      if ( *(_DWORD *)(v19 + 316) == *(_DWORD *)(*(_DWORD *)v11 + 160) )
      {
        sub_280A4((int)&v24, v16, v19 + 48);
        android::Region::andSelf(&v24, &v27);
        v20 = v25 + 16 * v26;
        v21 = *(_DWORD *)(v20 - 16);
        if ( *(_DWORD *)(v20 - 8) > v21 )
        {
          v21 = *(_DWORD *)(v20 - 12);
          if ( *(_DWORD *)(v20 - 4) > v21 )
          {
            v22 = (const char **)sub_17C58(*(_DWORD *)(v18 + 4 * v17));
            if ( strstr(*v22, "com.huawei.android.launcher/com.huawei.android.launcher.Launcher") )
            {
              v21 = 1;
              *a5 = 1;
            }
            ++*v8;
          }
        }
        android::Region::~Region(&v24, v21);
      }
      ++v17;
    }
    while ( v15 != v17 );
  }
  v31 = &unk_3F624;
  android::VectorImpl::finish_vector((android::VectorImpl *)&v31);
  return android::VectorImpl::~VectorImpl((android::VectorImpl *)&v31);
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 1083C: using guessed type int __fastcall android::Region::andSelf(_DWORD, _DWORD);

//----- (0002065C) --------------------------------------------------------
_BOOL4 __fastcall sub_2065C(int a1, int *a2)
{
  int *v2; // r5@1
  const char *v3; // r4@1
  int v5; // [sp+0h] [bp-20h]@1
  int v6; // [sp+4h] [bp-1Ch]@2
  int v7; // [sp+8h] [bp-18h]@1
  int v8; // [sp+Ch] [bp-14h]@2

  v2 = a2;
  v3 = *(const char **)sub_17C58(*a2);
  sub_17FCC((int)&v5, *v2);
  return v7 - v5 <= 159 && v8 - v6 <= 159 && strcmp(v3, "DimLayer");
}

//----- (000206AC) --------------------------------------------------------
signed int __fastcall sub_206AC(int a1)
{
  unsigned int v1; // r1@1
  signed int result; // r0@1

  v1 = *(_DWORD *)(a1 + 364);
  result = 0;
  if ( v1 > 1 )
    result = 1;
  return result;
}

//----- (000206BC) --------------------------------------------------------
signed int __fastcall sub_206BC(int a1)
{
  unsigned int v1; // r5@1
  unsigned int v2; // r7@2
  int v3; // r6@2

  v1 = *(_DWORD *)(a1 + 364);
  if ( v1 >= 2 )
  {
    v2 = 0;
    v3 = *(_DWORD *)(a1 + 360) + 8;
    while ( !strstr(*(const char **)(*(_DWORD *)v3 + 128), "EncodeVirtualDisplayWithCompositionTest") )
    {
      ++v2;
      v3 += 12;
      if ( v2 >= v1 )
        return 1;
    }
  }
  return 0;
}

//----- (00020704) --------------------------------------------------------
char *__fastcall sub_20704(char *result)
{
  unsigned int v1; // r6@1
  unsigned int v2; // r5@2
  int v3; // r7@2

  unk_45045 = 0;
  v1 = *((_DWORD *)result + 91);
  if ( v1 )
  {
    v2 = 0;
    v3 = *((_DWORD *)result + 90) + 8;
    while ( 1 )
    {
      result = strstr(*(const char **)(*(_DWORD *)v3 + 128), "EncodeVirtualDisplayWithCompositionTest");
      if ( result )
        break;
      ++v2;
      v3 += 12;
      if ( v2 >= v1 )
        return result;
    }
    result = (char *)&GLOBAL_OFFSET_TABLE_;
    unk_45045 = 1;
  }
  return result;
}
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002076C) --------------------------------------------------------
int __fastcall sub_2076C(int a1, int *a2, int a3)
{
  int *v3; // r9@1
  int v4; // r5@1
  int result; // r0@2
  int v6; // r1@3
  int v7; // r0@4
  int v8; // r1@5
  int v9; // r0@6
  int v10; // r1@6
  int v20; // r0@10
  int v21; // r1@12
  int v22; // r3@14
  int v23; // r7@14
  int v24; // r2@14
  int v25; // r6@14
  int v26; // r4@14
  int v27; // r8@14
  int v28; // r3@14
  int v29; // r7@14
  int v30; // r2@14
  int v31; // r1@14
  int v32; // r4@14
  int v33; // r2@14
  int v34; // r1@14
  int v35; // r7@14
  int v36; // r0@15
  int v37; // [sp+0h] [bp-168h]@16
  char v38; // [sp+40h] [bp-128h]@16
  char v39; // [sp+80h] [bp-E8h]@15
  int v40; // [sp+84h] [bp-E4h]@15
  int v41; // [sp+88h] [bp-E0h]@15
  int v42; // [sp+8Ch] [bp-DCh]@15
  int v43; // [sp+90h] [bp-D8h]@15
  int v44; // [sp+94h] [bp-D4h]@15
  int v45; // [sp+98h] [bp-D0h]@15
  int v46; // [sp+9Ch] [bp-CCh]@15
  int v47; // [sp+A0h] [bp-C8h]@15
  int v48; // [sp+A4h] [bp-C4h]@15
  int v49; // [sp+A8h] [bp-C0h]@15
  int v50; // [sp+ACh] [bp-BCh]@15
  int v51; // [sp+B0h] [bp-B8h]@15
  int v52; // [sp+B4h] [bp-B4h]@15
  int v53; // [sp+B8h] [bp-B0h]@15
  int v54; // [sp+BCh] [bp-ACh]@15
  int v55; // [sp+C0h] [bp-A8h]@14
  int v56; // [sp+C4h] [bp-A4h]@14
  int v57; // [sp+C8h] [bp-A0h]@14
  int v58; // [sp+CCh] [bp-9Ch]@14
  int v59; // [sp+D0h] [bp-98h]@14
  int v60; // [sp+D4h] [bp-94h]@14
  int v61; // [sp+D8h] [bp-90h]@14
  int v62; // [sp+DCh] [bp-8Ch]@14
  int v63; // [sp+E0h] [bp-88h]@14
  int v64; // [sp+E4h] [bp-84h]@14
  int v65; // [sp+E8h] [bp-80h]@14
  int v66; // [sp+ECh] [bp-7Ch]@14
  int v67; // [sp+F0h] [bp-78h]@14
  int v68; // [sp+F4h] [bp-74h]@14
  int v69; // [sp+F8h] [bp-70h]@14
  int v70; // [sp+FCh] [bp-6Ch]@14
  int v71; // [sp+100h] [bp-68h]@6
  int v72; // [sp+104h] [bp-64h]@6
  int v73; // [sp+108h] [bp-60h]@6
  int v74; // [sp+10Ch] [bp-5Ch]@6
  char v75; // [sp+110h] [bp-58h]@8
  char v76; // [sp+120h] [bp-48h]@7
  char v77; // [sp+134h] [bp-34h]@4

  v3 = a2;
  v4 = a1;
  if ( *(_DWORD *)(*a2 + 76) > -1
    || (result = *(_DWORD *)(a3 + 4) + 16 * *(_DWORD *)(a3 + 8), *(_DWORD *)(result - 8) > *(_DWORD *)(result - 16))
    && (v6 = *(_DWORD *)(result - 12), result = *(_DWORD *)(result - 4), result > v6) )
  {
    android::Region::Region(&v77, a3);
    android::Region::orSelf(*v3 + 24, &v77);
    v7 = sub_13458(*v3);
    if ( v7 & 0x80000 )
    {
      _R1 = &v76;
      _R0 = *(_DWORD *)(*v3 + 28) + 16 * *(_DWORD *)(*v3 + 32) - 16;
      __asm { VLD1.32         {D16-D17}, [R0] }
    }
    else
    {
      v8 = *v3;
      if ( !(v7 & 0x20000) )
      {
        v9 = *(_DWORD *)(v8 + 108);
        v10 = *(_DWORD *)(v8 + 112);
        v72 = 0;
        v71 = 0;
        v73 = v9;
        v74 = v10;
        android::Region::set(&v77, &v71);
        android::Region::operator=(*v3 + 24);
LABEL_10:
        v20 = *(_BYTE *)(v4 + 5144);
        if ( *(_BYTE *)(v4 + 5144) || *(_BYTE *)(v4 + 5220) )
        {
          v22 = *(_DWORD *)(v4 + 5156);
          v23 = *(_DWORD *)(v4 + 5160);
          v24 = *(_DWORD *)(v4 + 5164);
          v25 = *(_DWORD *)(v4 + 5172);
          v26 = *(_DWORD *)(v4 + 5168);
          v27 = *(_DWORD *)(v4 + 200);
          v60 = *(_DWORD *)(v4 + 5176);
          v57 = v24;
          v58 = v26;
          v59 = v25;
          v56 = v23;
          v55 = v22;
          v28 = *(_DWORD *)(v4 + 5180);
          v29 = *(_DWORD *)(v4 + 5184);
          v30 = *(_DWORD *)(v4 + 5188);
          v31 = *(_DWORD *)(v4 + 5196);
          v32 = *(_DWORD *)(v4 + 5192);
          v66 = *(_DWORD *)(v4 + 5200);
          v65 = v31;
          v64 = v32;
          v63 = v30;
          v62 = v29;
          v61 = v28;
          v33 = *(_DWORD *)(v4 + 5204);
          v34 = *(_DWORD *)(v4 + 5212);
          v35 = *(_DWORD *)(v4 + 5208);
          v70 = *(_DWORD *)(v4 + 5216);
          v69 = v34;
          v68 = v35;
          v67 = v33;
          if ( v20 )
          {
            v36 = sub_2D0C8(v4 + 5068);
            sub_1A978((int)&v39, (int)&v55, v36);
            v60 = v44;
            v59 = v43;
            v58 = v42;
            v55 = *(_DWORD *)&v39;
            v56 = v40;
            v57 = v41;
            v66 = v50;
            v65 = v49;
            v64 = v48;
            v61 = v45;
            v62 = v46;
            v63 = v47;
            v67 = v51;
            v68 = v52;
            v69 = v53;
            v70 = v54;
          }
          (*(void (__fastcall **)(char *, int, int *))(*(_DWORD *)v27 + 48))(&v38, v27, &v55);
          sub_1F7D0(v4, v3, (int)&v77);
          (*(void (__fastcall **)(int *, int, char *))(*(_DWORD *)v27 + 48))(&v37, v27, &v38);
        }
        else if ( !sub_1F7D0(v4, v3, (int)&v77) )
        {
          return android::Region::~Region(&v77, v21);
        }
        android::Region::orSelf(*v3 + 24, &v77);
        if ( unk_45045 )
          usleep(0x13880u);
        ((void (__fastcall *)(int, _DWORD))loc_13378)(*v3, *(_DWORD *)(v4 + 196));
        return android::Region::~Region(&v77, v21);
      }
      _R0 = *(_DWORD *)(v8 + 28) + 16 * *(_DWORD *)(v8 + 32);
      _R1 = &v75;
      _R0 -= 16;
      __asm { VLD1.32         {D16-D17}, [R0] }
    }
    __asm { VST1.64         {D16-D17}, [R1] }
    android::Region::set(&v77, _R1);
    goto LABEL_10;
  }
  return result;
}
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10BB4: using guessed type int __fastcall android::Region::Region(_DWORD, _DWORD);
// 10C2C: using guessed type int __fastcall android::Region::orSelf(_DWORD, _DWORD);

//----- (0002098C) --------------------------------------------------------
int __fastcall sub_2098C(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  int v3; // r6@2
  char v5; // [sp+4h] [bp-14h]@4

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 256);
  if ( v2 )
  {
    v3 = 0;
    do
      sub_1A354(*(_DWORD *)(*(_DWORD *)(v1 + 252) + 4 * v3++));
    while ( v2 != v3 );
  }
  android::String8::String8((android::String8 *)&v5, "<win-anim>");
  sub_16E4C(v1 + 472, &v5);
  return android::String8::~String8((android::String8 *)&v5);
}

//----- (000209D8) --------------------------------------------------------
unsigned int __fastcall sub_209D8(int a1, char a2)
{
  int v2; // r8@1
  char v3; // r5@1
  int v4; // r7@1
  int v5; // r4@3
  int v6; // r6@4
  int v7; // r0@9
  unsigned int v8; // r4@10
  unsigned int v9; // r6@11
  int *v10; // r9@11
  int i; // r0@11
  int v12; // r4@14
  int *v13; // r5@20
  _DWORD *v14; // r11@22
  _DWORD *v15; // r9@22
  int v16; // r0@22
  unsigned int **v17; // r1@23
  unsigned int *v18; // r0@25
  unsigned int v19; // r1@27
  int v20; // r2@32
  int v21; // r0@32
  unsigned int **v22; // r1@32
  unsigned int *v23; // r0@34
  unsigned int v24; // r1@36
  int v25; // r0@39
  signed int v26; // r1@39
  unsigned int **v27; // r1@44
  unsigned int *v28; // r0@46
  unsigned int v29; // r1@48
  int v30; // r3@50
  int v31; // r1@50
  int v32; // r0@52
  unsigned int v33; // r1@52
  int v34; // r0@62
  int v35; // r4@72
  int *v36; // r6@73
  int v37; // r9@73
  int v38; // r4@75
  android::GraphicBufferAlloc *v39; // r0@75
  char *v40; // r0@75
  int v41; // r1@75
  int v42; // r4@77
  int v43; // r4@77
  android::String8 *v44; // r10@77
  signed int v45; // t1@77
  int v46; // r3@77
  int v47; // r7@77
  int v48; // r0@85
  char *v49; // r0@85
  int v50; // r1@85
  int v51; // r7@92
  unsigned int *v52; // r0@95
  unsigned int *v53; // r7@95
  int v54; // r4@95
  int v55; // r5@95
  char v56; // r11@95
  int v57; // r0@95
  unsigned int v58; // r0@96
  int v59; // r5@101
  int v60; // r7@101
  int v61; // r6@101
  int v62; // r0@101
  int v63; // r5@115
  int v64; // r11@115
  int v65; // r9@116
  int v66; // r4@116
  unsigned int *v67; // r0@118
  unsigned int v68; // r1@120
  void *v69; // r0@122
  unsigned int v70; // r6@125
  unsigned int *v71; // r0@126
  unsigned int v72; // r1@127
  unsigned int *v73; // r0@129
  unsigned int v74; // r1@134
  void *v75; // r0@136
  unsigned int v76; // r11@143
  android::SortedVectorImpl *v77; // r6@147
  int v78; // r7@147
  int v79; // r4@148
  int v80; // r6@149
  signed int v81; // r10@149
  int v82; // r1@154
  int v83; // r1@154
  char v85; // [sp+30h] [bp-D0h]@8
  int v86; // [sp+34h] [bp-CCh]@10
  int v87; // [sp+3Ch] [bp-C4h]@95
  unsigned int v88; // [sp+40h] [bp-C0h]@14
  signed int *v89; // [sp+40h] [bp-C0h]@95
  android::VectorImpl *v90; // [sp+44h] [bp-BCh]@10
  android::SortedVectorImpl *v91; // [sp+48h] [bp-B8h]@11
  android::SortedVectorImpl *v92; // [sp+48h] [bp-B8h]@77
  int v93; // [sp+4Ch] [bp-B4h]@8
  int v94; // [sp+4Ch] [bp-B4h]@150
  char v95; // [sp+60h] [bp-A0h]@154
  char v96; // [sp+74h] [bp-8Ch]@154
  char v97; // [sp+88h] [bp-78h]@140
  int v98; // [sp+8Ch] [bp-74h]@126
  unsigned int *v99; // [sp+90h] [bp-70h]@114
  char *v100; // [sp+94h] [bp-6Ch]@95
  unsigned int *v101; // [sp+98h] [bp-68h]@95
  char *v102; // [sp+9Ch] [bp-64h]@85
  int v103; // [sp+A0h] [bp-60h]@81
  int v104; // [sp+A4h] [bp-5Ch]@79
  char *v105; // [sp+A8h] [bp-58h]@73
  char *v106; // [sp+ACh] [bp-54h]@75
  char *v107; // [sp+B0h] [bp-50h]@75
  char *v108; // [sp+B4h] [bp-4Ch]@75
  char *v109; // [sp+B8h] [bp-48h]@75
  unsigned int *v110; // [sp+BCh] [bp-44h]@46
  unsigned int *v111; // [sp+C0h] [bp-40h]@25
  char *v112; // [sp+C4h] [bp-3Ch]@18
  _DWORD *v113; // [sp+C8h] [bp-38h]@20
  char *v114; // [sp+CCh] [bp-34h]@11
  _DWORD *v115; // [sp+D0h] [bp-30h]@16
  unsigned int *v116; // [sp+D4h] [bp-2Ch]@34
  int v117; // [sp+D8h] [bp-28h]@32

  v2 = a1;
  v3 = a2;
  v4 = *(_DWORD *)(a1 + 40);
  if ( a2 & 2 && v4 )
  {
    v5 = 0;
    do
    {
      v6 = *(_DWORD *)(v2 + 36);
      if ( sub_19518(*(_DWORD *)(v6 + 4 * v5), 1) && sub_19338(*(android::SortedVectorImpl **)(v6 + 4 * v5), 0) & 2 )
        *(_BYTE *)(v2 + 352) = 1;
      ++v5;
    }
    while ( v4 != v5 );
  }
  v93 = v4;
  v85 = v3;
  if ( v3 & 4 )
  {
    v7 = *(_DWORD *)(v2 + 272);
    if ( *(_DWORD *)(v2 + 56) != v7 )
    {
      v90 = (android::VectorImpl *)(v2 + 268);
      *(_BYTE *)(v2 + 352) = 1;
      v8 = *(_DWORD *)(v2 + 276);
      v86 = *(_DWORD *)(v2 + 60);
      if ( v8 )
      {
        v91 = (android::SortedVectorImpl *)(v2 + 356);
        v9 = 0;
        v10 = (int *)&v114;
        for ( i = sub_1CDF0((android::SortedVectorImpl *)(v2 + 52), v7);
              ;
              i = sub_1CDF0((android::SortedVectorImpl *)(v2 + 52), *(_DWORD *)(v2 + 272) + 72 * v9) )
        {
          if ( i <= -1 )
          {
            if ( *(_DWORD *)(*(_DWORD *)(v2 + 272) + 72 * v9 + 8) )
            {
              sub_17760((unsigned int **)&v117, v2);
              v20 = *(_DWORD *)(v2 + 232);
              sub_1345C(v117, *(_DWORD *)(v2 + 236));
              v21 = sub_1A49C(v91, *(_DWORD *)(v2 + 272) + 72 * v9);
              v22 = (unsigned int **)(v2 + 376);
              if ( v21 >= 0 )
                v22 = (unsigned int **)(*(_DWORD *)(v2 + 360) + 12 * v21 + 8);
              v23 = *v22;
              v116 = *v22;
              if ( v116 )
              {
                __dmb();
                do
                  v24 = __ldrex(v23);
                while ( __strex(v24 + 1, v23) );
                if ( v116 )
                  sub_132C0((signed int)v116, *(_DWORD *)(v2 + 196));
              }
              v25 = *(_DWORD *)(v2 + 272);
              v26 = *(_DWORD *)(v25 + 72 * v9 + 8);
              if ( v26 <= 1 )
              {
                sub_15734(*(_DWORD *)(v2 + 220), v26, 0);
                v25 = *(_DWORD *)(v2 + 272);
              }
              sub_212CC(v91, v25 + 72 * v9);
              if ( *(_DWORD *)(*(_DWORD *)(v2 + 272) + 72 * v9 + 8) >= 2 )
                sub_2A674(*(_DWORD *)(v2 + 196));
              sub_1BF7C(&v116);
              sub_1BF7C((unsigned int **)&v117);
            }
            else
            {
              _android_log_print(5, "SurfaceFlinger", "trying to remove the main display");
            }
          }
          else
          {
            v88 = v8;
            v12 = *(_DWORD *)(v2 + 56) + 72 * i;
            v114 = *(char **)(v12 + 12);
            if ( v114 )
              android::RefBase::incStrong((android::RefBase *)&v114[*(_DWORD *)(*(_DWORD *)v114 - 12)], v10);
            android::IInterface::asBinder(&v115, v10);
            if ( v114 )
              android::RefBase::decStrong((android::RefBase *)&v114[*(_DWORD *)(*(_DWORD *)v114 - 12)], v10);
            v112 = *(char **)(*(_DWORD *)(v2 + 272) + 72 * v9 + 12);
            if ( v112 )
              android::RefBase::incStrong((android::RefBase *)&v112[*(_DWORD *)(*(_DWORD *)v112 - 12)], &v112);
            v13 = v10;
            android::IInterface::asBinder(&v113, &v112);
            if ( v112 )
              android::RefBase::decStrong((android::RefBase *)&v112[*(_DWORD *)(*(_DWORD *)v112 - 12)], &v112);
            v14 = v113;
            v15 = v115;
            v16 = sub_1A49C(v91, v12);
            if ( v15 == v14 )
            {
              v27 = (unsigned int **)(v2 + 376);
              v10 = v13;
              if ( v16 >= 0 )
                v27 = (unsigned int **)(*(_DWORD *)(v2 + 360) + 12 * v16 + 8);
              v28 = *v27;
              v110 = *v27;
              if ( v110 )
              {
                __dmb();
                do
                  v29 = __ldrex(v28);
                while ( __strex(v29 + 1, v28) );
                if ( v110 )
                {
                  v30 = *(_DWORD *)(v2 + 272);
                  v31 = *(_DWORD *)(v12 + 16);
                  if ( v31 != *(_DWORD *)(v30 + 72 * v9 + 16) )
                  {
                    sub_135D8((int)v110, v31);
                    v30 = *(_DWORD *)(v2 + 272);
                  }
                  v32 = v30 + 72 * v9;
                  v33 = *(_BYTE *)(v12 + 52);
                  if ( v33 != *(_BYTE *)(v32 + 52)
                    || *(_DWORD *)(v12 + 20) != *(_DWORD *)(v32 + 20)
                    || *(_DWORD *)(v12 + 24) != *(_DWORD *)(v32 + 24)
                    || *(_DWORD *)(v12 + 28) != *(_DWORD *)(v32 + 28)
                    || *(_DWORD *)(v12 + 32) != *(_DWORD *)(v32 + 32)
                    || *(_DWORD *)(v12 + 36) != *(_DWORD *)(v32 + 36)
                    || *(_DWORD *)(v12 + 40) != *(_DWORD *)(v32 + 40)
                    || *(_DWORD *)(v12 + 44) != *(_DWORD *)(v32 + 44)
                    || *(_DWORD *)(v12 + 48) != *(_DWORD *)(v32 + 48) )
                  {
                    sub_12F28((int)v110, v33, v12 + 20, v12 + 36);
                    v30 = *(_DWORD *)(v2 + 272);
                  }
                  v34 = v30 + 72 * v9;
                  if ( *(_DWORD *)(v12 + 56) != *(_DWORD *)(v34 + 56) || *(_DWORD *)(v12 + 60) != *(_DWORD *)(v34 + 60) )
                    sub_13624((int)v110);
                }
              }
              sub_1BF7C(&v110);
              v8 = v88;
            }
            else
            {
              v17 = (unsigned int **)(v2 + 376);
              v10 = v13;
              if ( v16 >= 0 )
                v17 = (unsigned int **)(*(_DWORD *)(v2 + 360) + 12 * v16 + 8);
              v18 = *v17;
              v111 = *v17;
              if ( v111 )
              {
                __dmb();
                do
                  v19 = __ldrex(v18);
                while ( __strex(v19 + 1, v18) );
                if ( v111 )
                  sub_132C0((signed int)v111, *(_DWORD *)(v2 + 196));
              }
              sub_212CC(v91, v12);
              android::VectorImpl::removeItemsAt(v90, v9, 1u);
              sub_1BF7C(&v111);
              --v9;
              v8 = v88 - 1;
            }
            if ( v113 )
              android::RefBase::decStrong((android::RefBase *)((char *)v113 + *(_DWORD *)(*v113 - 12)), &v113);
            if ( v115 )
              android::RefBase::decStrong((android::RefBase *)((char *)v115 + *(_DWORD *)(*v115 - 12)), &v115);
          }
          if ( ++v9 >= v8 )
            break;
        }
      }
      v35 = v86;
      if ( v86 )
      {
        v36 = (int *)&v105;
        v37 = 0;
        do
        {
          if ( sub_1CDF0(v90, *(_DWORD *)(v2 + 56) + 72 * v37) <= -1 )
          {
            v38 = *(_DWORD *)(v2 + 56);
            v109 = 0;
            v108 = 0;
            v107 = 0;
            v106 = 0;
            v39 = (android::GraphicBufferAlloc *)operator new(0x18u);
            v40 = (char *)android::GraphicBufferAlloc::GraphicBufferAlloc(v39);
            v41 = *(_DWORD *)v40;
            v105 = v40;
            android::RefBase::incStrong((android::RefBase *)&v40[*(_DWORD *)(v41 - 12)], v36);
            android::BufferQueue::createBufferQueue(&v107, &v106, v36);
            if ( v105 )
              android::RefBase::decStrong((android::RefBase *)&v105[*(_DWORD *)(*(_DWORD *)v105 - 12)], v36);
            v42 = v38 + 72 * v37;
            v92 = (android::SortedVectorImpl *)v42;
            v45 = *(_DWORD *)(v42 + 8);
            v43 = v42 + 8;
            v44 = (android::String8 *)v45;
            v47 = v43 + 4;
            v46 = *(_DWORD *)(v43 + 4);
            if ( v45 < 2 )
            {
              if ( v46 )
              {
                _android_log_print(
                  6,
                  "SurfaceFlinger",
                  "adding a supported display, but rendering surface is provided (%p), ignoring it");
                v44 = *(android::String8 **)v43;
              }
              if ( (unsigned int)v44 >= 2 )
                v44 = (android::String8 *)sub_293D4(*(_DWORD *)(v2 + 196));
              v51 = operator new(0x440u);
              sub_28290(v51, *(_DWORD *)(v2 + 196), *(_DWORD *)v43, (int)&v106);
              sub_2134C(&v109, v51);
              sub_123A8(&v108, &v107);
            }
            else if ( v46 )
            {
              v104 = 0;
              if ( (*(int (**)(void))(**(_DWORD **)v47 + 48))() )
                _android_log_print(6, "SurfaceFlinger", "Unable to query width (%d)");
              v103 = 0;
              if ( (*(int (**)(void))(**(_DWORD **)v47 + 48))() )
                _android_log_print(6, "SurfaceFlinger", "Unable to query height (%d)");
              v44 = *(android::String8 **)v43;
              if ( *(_DWORD *)v43 >= 2u )
                v44 = (android::String8 *)sub_293D4(*(_DWORD *)(v2 + 196));
              v48 = operator new(0x5A0u);
              v49 = (char *)sub_2BA24(
                              v48,
                              *(_DWORD *)(v2 + 196),
                              v44,
                              (char **)(v43 + 4),
                              &v107,
                              (int)&v106,
                              (android::SortedVectorImpl *)((char *)v92 + 64));
              v50 = *(_DWORD *)v49;
              v102 = v49;
              android::RefBase::incStrong((android::RefBase *)&v49[*(_DWORD *)(v50 - 12)], &v102);
              sub_2A634(*(_DWORD *)(v2 + 196));
              sub_123A8(&v109, &v102);
              sub_21314(&v108, &v102);
              if ( v102 )
                android::RefBase::decStrong((android::RefBase *)&v102[*(_DWORD *)(*(_DWORD *)v102 - 12)], &v102);
            }
            else
            {
              v44 = (android::String8 *)-1;
            }
            if ( v109 )
            {
              v87 = *(_DWORD *)(v2 + 56) + 72 * v37;
              v52 = (unsigned int *)operator new(0x10Cu);
              v100 = (char *)v2;
              v53 = v52;
              android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)v2 - 12) + v2), &v100);
              v89 = (signed int *)v43;
              v54 = *(_DWORD *)v43;
              v55 = sub_2950C(*(_DWORD *)(v2 + 196), (unsigned int)v44);
              v56 = *((_BYTE *)v92 + 68);
              v57 = sub_2DDD4(*(_DWORD *)(v2 + 200));
              sub_12D04(v53, &v100, v54, (int)v44, v55, v56, v87, &v109, (int)&v108, v57);
              v101 = v53;
              __dmb();
              do
                v58 = __ldrex(v53);
              while ( __strex(v58 + 1, v53) );
              if ( v100 )
                android::RefBase::decStrong((android::RefBase *)&v100[*(_DWORD *)(*(_DWORD *)v100 - 12)], &v100);
              sub_135D8((int)v101, *((_DWORD *)v92 + 4));
              sub_12F28((int)v101, *((_BYTE *)v92 + 52), (int)v92 + 20, (int)v92 + 36);
              sub_132F8((int)v101, (android::SortedVectorImpl *)((char *)v92 + 64));
              sub_1D854((android::SortedVectorImpl *)(v2 + 356), v87, &v101);
              if ( *v89 < 2 )
              {
                sub_15734(*(_DWORD *)(v2 + 220), *v89, 1);
              }
              else if ( (signed int)v44 >= 0 )
              {
                v59 = *(_DWORD *)(v2 + 196);
                v60 = sub_132EC((int)v101);
                v61 = sub_132F0((int)v101);
                v62 = sub_132F4((int)v101);
                sub_29364(v59, (signed int)v44, v60, v61, v62);
              }
              sub_1BF7C(&v101);
            }
            if ( v106 )
              android::RefBase::decStrong((android::RefBase *)&v106[*(_DWORD *)(*(_DWORD *)v106 - 12)], &v106);
            v36 = (int *)&v105;
            v35 = v86;
            if ( v107 )
              android::RefBase::decStrong((android::RefBase *)&v107[*(_DWORD *)(*(_DWORD *)v107 - 12)], &v107);
            if ( v108 )
              android::RefBase::decStrong((android::RefBase *)&v108[*(_DWORD *)(*(_DWORD *)v108 - 12)], &v108);
            if ( v109 )
              android::RefBase::decStrong((android::RefBase *)&v109[*(_DWORD *)(*(_DWORD *)v109 - 12)], &v109);
          }
          ++v37;
        }
        while ( v37 != v35 );
      }
    }
  }
  if ( v85 & 6 )
  {
    v99 = 0;
    if ( v93 )
    {
      v63 = 0;
      v64 = 0;
      do
      {
        v65 = *(_DWORD *)(v2 + 36);
        v66 = *(_DWORD *)(*(_DWORD *)(v65 + 4 * v63) + 316);
        if ( !v63 || v64 != v66 )
        {
          v67 = v99;
          if ( v99 )
          {
            __dmb();
            do
              v68 = __ldrex(v67);
            while ( __strex(v68 - 1, v67) );
            if ( v68 == 1 )
            {
              v69 = (void *)sub_131F4((int)v67);
              operator delete(v69);
            }
            v99 = 0;
          }
          if ( *(_DWORD *)(v2 + 364) )
          {
            v70 = 0;
            do
            {
              v71 = *(unsigned int **)(*(_DWORD *)(v2 + 360) + 12 * v70 + 8);
              v98 = *(_DWORD *)(*(_DWORD *)(v2 + 360) + 12 * v70 + 8);
              __dmb();
              do
                v72 = __ldrex(v71);
              while ( __strex(v72 + 1, v71) );
              if ( *(_DWORD *)(v98 + 160) == v66 )
              {
                v73 = v99;
                if ( v99 )
                {
                  __dmb();
                  do
                    v74 = __ldrex(v73);
                  while ( __strex(v74 - 1, v73) );
                  if ( v74 == 1 )
                  {
                    v75 = (void *)sub_131F4((int)v73);
                    operator delete(v75);
                  }
                  v99 = 0;
                  sub_1BF7C((unsigned int **)&v98);
                  break;
                }
                sub_2138C(&v99, (unsigned int **)&v98);
              }
              sub_1BF7C((unsigned int **)&v98);
              ++v70;
            }
            while ( v70 < *(_DWORD *)(v2 + 364) );
          }
          v64 = v66;
        }
        if ( !v99 )
        {
          sub_17760((unsigned int **)&v97, v2);
          sub_2138C(&v99, (unsigned int **)&v97);
          sub_1BF7C((unsigned int **)&v97);
        }
        sub_177D4(*(_DWORD *)(v65 + 4 * v63++), &v99);
      }
      while ( v63 != v93 );
    }
    sub_1BF7C(&v99);
  }
  v76 = *(_DWORD *)(v2 + 256);
  if ( *(_DWORD *)(v2 + 40) > v76 )
    *(_BYTE *)(v2 + 352) = 1;
  if ( *(_BYTE *)(v2 + 188) )
  {
    *(_BYTE *)(v2 + 188) = 0;
    *(_BYTE *)(v2 + 352) = 1;
    if ( v76 )
    {
      v77 = (android::SortedVectorImpl *)(v2 + 32);
      v78 = 0;
      do
      {
        v79 = *(_DWORD *)(v2 + 252);
        if ( android::SortedVectorImpl::indexOf(v77, (const void *)(v79 + v78)) <= -1 )
        {
          v80 = *(_DWORD *)(v79 + v78);
          v81 = *(_DWORD *)(v80 + 268);
          if ( *(_DWORD *)(v80 + 264) <= -1 )
          {
            v94 = v80 + 328;
            _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", *(_DWORD *)(v80 + 264));
          }
          else
          {
            v94 = v80 + 328;
          }
          if ( v81 <= -1 )
            _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v81);
          android::Region::Region(&v95);
          sub_280A4((int)&v96, v94, (int)&v95);
          android::Region::~Region(&v95, v82);
          sub_213D4(v2, *(_DWORD *)(v80 + 316), (int)&v96);
          android::Region::~Region(&v96, v83);
          v77 = (android::SortedVectorImpl *)(v2 + 32);
        }
        v78 += 4;
        --v76;
      }
      while ( v76 );
    }
  }
  sub_21410(v2);
  return sub_214D8(v2);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10B00: using guessed type int __fastcall android::BufferQueue::createBufferQueue(_DWORD, _DWORD, _DWORD);
// 10B90: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);

//----- (000212CC) --------------------------------------------------------
int __fastcall sub_212CC(android::SortedVectorImpl *this, int a2)
{
  android::SortedVectorImpl *v2; // r4@1
  bool v3; // zf@1
  android::RefBase::weakref_type *v4; // r0@1
  int v5; // r4@3
  int v7; // [sp+4h] [bp-1Ch]@1
  android::RefBase::weakref_type *v8; // [sp+8h] [bp-18h]@1
  int v9; // [sp+Ch] [bp-14h]@3

  v2 = this;
  v3 = *(_DWORD *)a2 == 0;
  v7 = *(_DWORD *)a2;
  v4 = *(android::RefBase::weakref_type **)(a2 + 4);
  v8 = *(android::RefBase::weakref_type **)(a2 + 4);
  if ( !v3 )
    android::RefBase::weakref_type::incWeak(v4, &v7);
  v9 = 0;
  v5 = android::SortedVectorImpl::remove(v2, &v7);
  sub_1BF7C((unsigned int **)&v9);
  if ( v7 )
    android::RefBase::weakref_type::decWeak(v8, &v7);
  return v5;
}

//----- (00021314) --------------------------------------------------------
void *__fastcall sub_21314(void *a1, char **a2)
{
  char *v2; // r5@1
  void *v3; // r4@1
  void *result; // r0@7

  v2 = *a2;
  v3 = a1;
  if ( *a2 )
    v2 += 4;
  if ( v2 )
    android::RefBase::incStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], a1);
  if ( *(_DWORD *)v3 )
    android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)v3 + *(_DWORD *)(**(_DWORD **)v3 - 12)), v3);
  result = v3;
  *(_DWORD *)v3 = v2;
  return result;
}

//----- (0002134C) --------------------------------------------------------
void *__fastcall sub_2134C(void *a1, int a2)
{
  int v2; // r5@1
  void *v3; // r4@1
  void *result; // r0@7

  v2 = a2;
  v3 = a1;
  if ( a2 )
    android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)(a2 + 1056) - 12) + a2 + 1056), a1);
  if ( *(_DWORD *)v3 )
    android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)v3 + *(_DWORD *)(**(_DWORD **)v3 - 12)), v3);
  if ( v2 )
    v2 += 1056;
  result = v3;
  *(_DWORD *)v3 = v2;
  return result;
}

//----- (0002138C) --------------------------------------------------------
unsigned int **__fastcall sub_2138C(unsigned int **a1, unsigned int **a2)
{
  unsigned int *v2; // r5@1
  unsigned int **v3; // r4@1
  unsigned int v4; // r0@3
  unsigned int *v5; // r0@4
  unsigned int v6; // r1@6
  void *v7; // r0@8
  unsigned int **result; // r0@9

  v2 = *a2;
  v3 = a1;
  if ( *a2 )
  {
    __dmb();
    do
      v4 = __ldrex(v2);
    while ( __strex(v4 + 1, v2) );
  }
  v5 = *v3;
  if ( *v3 )
  {
    __dmb();
    do
      v6 = __ldrex(v5);
    while ( __strex(v6 - 1, v5) );
    if ( v6 == 1 )
    {
      v7 = (void *)sub_131F4((int)v5);
      operator delete(v7);
    }
  }
  result = v3;
  *v3 = v2;
  return result;
}

//----- (000213D4) --------------------------------------------------------
unsigned int __fastcall sub_213D4(int a1, int a2, int a3)
{
  int v3; // r6@1
  int v4; // r8@1
  unsigned int result; // r0@1
  int v6; // r5@1
  unsigned int v7; // r7@2
  signed int v8; // r4@2
  int v9; // r1@3

  v3 = a1;
  v4 = a3;
  result = *(_DWORD *)(a1 + 364);
  v6 = a2;
  if ( result )
  {
    v7 = 0;
    v8 = 8;
    do
    {
      v9 = *(_DWORD *)(*(_DWORD *)(v3 + 360) + v8);
      if ( *(_DWORD *)(v9 + 160) == v6 )
      {
        android::Region::orSelf(v9 + 4, v4);
        result = *(_DWORD *)(v3 + 364);
      }
      ++v7;
      v8 += 12;
    }
    while ( v7 < result );
  }
  return result;
}
// 10C2C: using guessed type int __fastcall android::Region::orSelf(_DWORD, _DWORD);

//----- (00021410) --------------------------------------------------------
int __fastcall sub_21410(int a1)
{
  int v1; // r4@1
  unsigned int v2; // r5@2
  int v3; // r11@5
  int v4; // r1@5
  int v5; // r12@5
  int v6; // r3@5
  int v7; // r5@5
  int v8; // r2@5
  int v9; // r1@5
  int v10; // r2@5
  int v11; // r3@5
  int v12; // r12@5
  int v13; // r5@5

  v1 = a1;
  if ( *(_DWORD *)(a1 + 156) )
  {
    v2 = 0;
    do
      sub_17DE4(*(_DWORD *)(*(_DWORD *)(v1 + 152) + 4 * v2++));
    while ( v2 < *(_DWORD *)(v1 + 156) );
    android::VectorImpl::clear((android::VectorImpl *)(v1 + 148));
  }
  *(_BYTE *)(v1 + 354) = *(_BYTE *)(v1 + 145);
  android::SortedVectorImpl::operator=(v1 + 248, v1 + 32);
  android::SortedVectorImpl::operator=(v1 + 268, v1 + 52);
  *(_DWORD *)(v1 + 288) = *(_DWORD *)(v1 + 72);
  sub_123A8((void *)(v1 + 292), (char **)(v1 + 76));
  v3 = v1 + 328;
  v4 = *(_DWORD *)(v1 + 96);
  v5 = *(_DWORD *)(v1 + 80);
  v6 = *(_DWORD *)(v1 + 84);
  v7 = *(_DWORD *)(v1 + 88);
  v8 = *(_DWORD *)(v1 + 92);
  *(_DWORD *)(v1 + 316) = *(_DWORD *)(v1 + 100);
  *(_DWORD *)(v1 + 312) = v4;
  *(_DWORD *)(v1 + 308) = v8;
  *(_DWORD *)(v1 + 304) = v7;
  *(_DWORD *)(v1 + 300) = v6;
  *(_DWORD *)(v1 + 296) = v5;
  v9 = *(_DWORD *)(v1 + 116);
  v10 = *(_DWORD *)(v1 + 120);
  v11 = *(_DWORD *)(v1 + 124);
  v12 = *(_DWORD *)(v1 + 104);
  v13 = *(_DWORD *)(v1 + 108);
  *(_DWORD *)v3 = *(_DWORD *)(v1 + 112);
  *(_DWORD *)(v3 + 4) = v9;
  *(_DWORD *)(v3 + 8) = v10;
  *(_DWORD *)(v3 + 12) = v11;
  *(_DWORD *)(v1 + 324) = v13;
  *(_DWORD *)(v1 + 320) = v12;
  android::String8::setTo((android::String8 *)(v1 + 344), (const android::String8 *)(v1 + 128));
  *(_BYTE *)(v1 + 348) = *(_BYTE *)(v1 + 132);
  *(_WORD *)(v1 + 144) = 0;
  return j_j_pthread_cond_broadcast((pthread_cond_t *)(v1 + 140));
}
// 10E90: using guessed type int __fastcall android::SortedVectorImpl::operator=(_DWORD, _DWORD);

//----- (000214D8) --------------------------------------------------------
unsigned int __fastcall sub_214D8(int a1)
{
  int v1; // r4@1
  unsigned int result; // r0@1
  int v3; // r5@2
  unsigned int v4; // r9@2
  unsigned int *v5; // r0@3
  unsigned int v6; // r1@4
  signed int v7; // r7@5
  int v8; // r6@6
  unsigned int v9; // r8@6
  int v10; // r10@8
  void (*v11)(void); // r2@10
  char v12; // [sp+8h] [bp-48h]@13
  int v13; // [sp+18h] [bp-38h]@6
  int v14; // [sp+1Ch] [bp-34h]@7
  int v15; // [sp+20h] [bp-30h]@6
  int v16; // [sp+24h] [bp-2Ch]@7
  int v17; // [sp+28h] [bp-28h]@3

  v1 = a1;
  result = *(_DWORD *)(a1 + 364);
  if ( result )
  {
    v3 = *(_DWORD *)(v1 + 196);
    v4 = 0;
    do
    {
      v5 = *(unsigned int **)(*(_DWORD *)(v1 + 360) + 12 * v4 + 8);
      v17 = *(_DWORD *)(*(_DWORD *)(v1 + 360) + 12 * v4 + 8);
      __dmb();
      do
        v6 = __ldrex(v5);
      while ( __strex(v6 + 1, v5) );
      v7 = *(_DWORD *)(v17 + 76);
      if ( v7 >= 0 )
      {
        v8 = sub_13540(v17);
        v9 = *(_DWORD *)(v8 + 8);
        sub_2AAEC((unsigned int)&v15, v3, v7);
        sub_2AAFC((unsigned int)&v13, v3, v7);
        if ( v9 && v16 != v14 )
        {
          v10 = 0;
          while ( (*(int (**)(void))(*(_DWORD *)v15 + 8))() != 5 )
          {
            v11 = *(void (**)(void))(*(_DWORD *)v15 + 96);
            ++v16;
            v11();
            if ( ++v10 >= v9 || v16 == v14 )
              goto LABEL_14;
          }
          sub_188D4((int)&v12, *(_DWORD *)(*(_DWORD *)(v8 + 4) + 4 * v10), &v17);
          sub_2AA60(v3, v7, (int)&v12);
        }
LABEL_14:
        if ( v13 )
          (*(void (**)(void))(*(_DWORD *)v13 + 4))();
        if ( v15 )
          (*(void (**)(void))(*(_DWORD *)v15 + 4))();
      }
      sub_1BF7C((unsigned int **)&v17);
      result = *(_DWORD *)(v1 + 364);
      ++v4;
    }
    while ( v4 < result );
  }
  return result;
}

//----- (000215E8) --------------------------------------------------------
int __fastcall sub_215E8(void *a1, int *a2, char **a3, char **a4, void *a5)
{
  void *v5; // r7@1
  char **v6; // r4@1
  pthread_mutex_t *v7; // r6@1
  char **v8; // r9@1
  int *v9; // r5@1
  int result; // r0@2
  char *v11; // r0@3
  int *v12; // r4@6
  char *v13; // [sp+0h] [bp-30h]@3
  _DWORD *v14; // [sp+4h] [bp-2Ch]@5
  _DWORD *v15; // [sp+8h] [bp-28h]@5
  android::RefBase::weakref_type *v16; // [sp+Ch] [bp-24h]@6

  v5 = a1;
  v6 = a4;
  v7 = (pthread_mutex_t *)((char *)a1 + 28);
  v8 = a3;
  v9 = a2;
  pthread_mutex_lock((pthread_mutex_t *)((char *)a1 + 28));
  if ( *((_DWORD *)v5 + 10) >> 12 )
  {
    pthread_mutex_unlock(v7);
    result = -12;
  }
  else
  {
    android::SortedVectorImpl::add((android::SortedVectorImpl *)((char *)v5 + 32), a5);
    v11 = *v6;
    v13 = *v6;
    if ( v13 )
      android::RefBase::incStrong((android::RefBase *)&v11[*(_DWORD *)(*(_DWORD *)v11 - 12)], &v13);
    android::IInterface::asBinder(&v14, &v13);
    v15 = v14;
    if ( v14 )
    {
      v12 = (int *)&v15;
      v16 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                                (android::RefBase *)((char *)v14 + *(_DWORD *)(*v14 - 12)),
                                                &v15);
    }
    else
    {
      v12 = (int *)&v15;
    }
    android::SortedVectorImpl::add((android::SortedVectorImpl *)((char *)v5 + 168), v12);
    if ( v15 )
      android::RefBase::weakref_type::decWeak(v16, v12);
    if ( v14 )
      android::RefBase::decStrong((android::RefBase *)((char *)v14 + *(_DWORD *)(*v14 - 12)), &v14);
    if ( v13 )
      android::RefBase::decStrong((android::RefBase *)&v13[*(_DWORD *)(*(_DWORD *)v13 - 12)], &v13);
    pthread_mutex_unlock(v7);
    sub_121EC(*v9, v8, (char **)a5);
    result = 0;
  }
  return result;
}
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);

//----- (000216B4) --------------------------------------------------------
int __fastcall sub_216B4(int a1, const void *a2)
{
  int v2; // r5@1
  const void *v3; // r6@1
  pthread_mutex_t *v4; // r4@1
  int v5; // r7@1
  unsigned int *v6; // r0@2
  unsigned int v7; // r1@3

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 28);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 28));
  v5 = android::SortedVectorImpl::remove((android::SortedVectorImpl *)(v2 + 32), v3);
  if ( v5 >= 0 )
  {
    android::VectorImpl::push((android::VectorImpl *)(v2 + 148), v3);
    *(_BYTE *)(v2 + 188) = 1;
    v6 = (unsigned int *)(v2 + 136);
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 | 1, v6) );
    if ( !(v7 & 1) )
      sub_1B4B0(v2 + 444);
    v5 = 0;
  }
  pthread_mutex_unlock(v4);
  return v5;
}

//----- (0002171C) --------------------------------------------------------
ssize_t __fastcall sub_2171C(int a1, int a2, int a3, char a4)
{
  int v4; // r10@1
  int v5; // r8@1
  char v6; // r4@1
  int v7; // r9@1
  int v8; // r0@1
  pthread_mutex_t *v9; // r11@5
  int v10; // r3@5
  int v11; // r0@7
  int v12; // r5@11
  int v13; // r4@12
  int v14; // r7@12
  int v15; // r5@16
  int v16; // r10@17
  int v17; // r9@18
  char *v18; // r0@18
  const android::String16 *v19; // r0@22
  int v20; // r1@23
  int v21; // r3@25
  unsigned int *v22; // r0@35
  unsigned int v23; // r1@36
  unsigned int v24; // r3@36
  int v25; // r0@44
  int v26; // r0@48
  ssize_t result; // r0@50
  int v28; // [sp+4h] [bp-4Ch]@5
  char v29; // [sp+8h] [bp-48h]@5
  int v30; // [sp+10h] [bp-40h]@16
  char *v31; // [sp+14h] [bp-3Ch]@27
  int v32; // [sp+18h] [bp-38h]@22
  char *v33; // [sp+1Ch] [bp-34h]@19
  int v34; // [sp+20h] [bp-30h]@19
  int buf; // [sp+24h] [bp-2Ch]@7
  int v36; // [sp+28h] [bp-28h]@7

  v4 = a2;
  v5 = a1;
  v6 = a4;
  v7 = a3;
  v8 = v0;
  __dmb();
  if ( !(v8 & 1) )
    atrace_setup(v8, 0xFFFFFF78);
  if ( v0 & 2 )
    atrace_begin_body("setTransactionState");
  v9 = (pthread_mutex_t *)(v5 + 28);
  pthread_mutex_lock((pthread_mutex_t *)(v5 + 28));
  v29 = v6;
  v28 = v6 & 2;
  if ( v6 & 2 )
  {
    while ( *(_BYTE *)(v5 + 145) )
    {
      buf = 5;
      v36 = 0;
      v11 = pthread_cond_timedwait_relative_np(v5 + 140, v5 + 28, &buf, v10);
      if ( v11 )
      {
        if ( -v11 == -110 )
          _android_log_print(5, "SurfaceFlinger", "setTransactionState timed out waiting for previous animation frame");
        *(_BYTE *)(v5 + 145) = 0;
        break;
      }
    }
  }
  v12 = *(_DWORD *)(v7 + 8);
  if ( v12 )
  {
    v13 = 0u;
    v14 = 0;
    do
    {
      v14 |= sub_21A00(v5, *(_DWORD *)(v7 + 4) + v13);
      v13 += 60;
      --v12;
    }
    while ( v12 );
  }
  else
  {
    v14 = 0;
  }
  v15 = *(_DWORD *)(v4 + 8);
  v30 = v4;
  if ( v15 )
  {
    v16 = 0;
    do
    {
      v17 = *(_DWORD *)(v30 + 4);
      v18 = *(char **)(v17 + v16);
      if ( v18 )
      {
        v33 = *(char **)(v17 + v16);
        android::RefBase::incStrong((android::RefBase *)&v18[*(_DWORD *)(*(_DWORD *)v18 - 12)], &v33);
        android::IInterface::asBinder(&v34, &v33);
        if ( v33 )
          android::RefBase::decStrong((android::RefBase *)&v33[*(_DWORD *)(*(_DWORD *)v33 - 12)], &v33);
        if ( v34 )
        {
          v19 = (const android::String16 *)(*(int (**)(void))(*(_DWORD *)v34 + 4))();
          android::String16::String16((android::String16 *)&v32, v19);
          if ( v32 )
            v20 = (*(_DWORD *)(v32 - 12) >> 1) - 1;
          if ( v0 )
            v21 = (*(_DWORD *)(v0 - 12) >> 1) - 1;
          if ( !strzcmp16() )
          {
            v31 = *(char **)(v17 + v16);
            if ( v31 )
              android::RefBase::incStrong((android::RefBase *)&v31[*(_DWORD *)(*(_DWORD *)v31 - 12)], &v31);
            v14 |= sub_21CB0(v5, (int *)&v31, (char **)(v17 + v16 + 4));
            if ( v31 )
              android::RefBase::decStrong((android::RefBase *)&v31[*(_DWORD *)(*(_DWORD *)v31 - 12)], &v31);
          }
          android::String16::~String16((android::String16 *)&v32);
          if ( v34 )
            android::RefBase::decStrong((android::RefBase *)(v34 + *(_DWORD *)(*(_DWORD *)v34 - 12)), &v34);
        }
      }
      v16 += 96;
      --v15;
    }
    while ( v15 );
  }
  if ( v14 )
  {
    v22 = (unsigned int *)(v5 + 136);
    __dmb();
    do
    {
      v23 = __ldrex(v22);
      v24 = __strex(v23 | v14, v22);
    }
    while ( v24 );
    if ( !(v23 & v14) )
      sub_1B4B0(v5 + 444);
    if ( v29 & 1 )
      *(_BYTE *)(v5 + 144) = 1;
    if ( v28 )
      *(_BYTE *)(v5 + 145) = 1;
    while ( *(_BYTE *)(v5 + 144) )
    {
      buf = 5;
      v36 = 0;
      v25 = pthread_cond_timedwait_relative_np(v5 + 140, v9, &buf, v24);
      if ( v25 )
      {
        if ( -v25 == -110 )
          _android_log_print(5, "SurfaceFlinger", "setTransactionState timed out!");
        *(_BYTE *)(v5 + 144) = 0;
        break;
      }
    }
  }
  pthread_mutex_unlock(v9);
  v26 = v0;
  __dmb();
  if ( !(v26 & 1) )
    atrace_setup(v26, 0xFFFFFF78);
  result = v0;
  if ( v0 & 2 )
  {
    LOBYTE(buf) = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 1053C: using guessed type int strzcmp16(void);
// 10950: using guessed type int __fastcall pthread_cond_timedwait_relative_np(_DWORD, _DWORD, _DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);

//----- (00021A00) --------------------------------------------------------
signed int __fastcall sub_21A00(int a1, int a2)
{
  int v2; // r10@1
  int v3; // r6@1
  int v4; // r4@3
  int v5; // r5@6
  int v6; // r11@7
  _DWORD *v7; // r4@12
  signed int v8; // r9@21
  signed int v9; // r3@25
  _DWORD *v10; // r4@27
  int v11; // r1@28
  int v12; // r11@35
  unsigned int v13; // r8@35
  int v14; // r5@36
  signed int v15; // r2@40
  char *v16; // r3@40
  int v17; // r0@44
  int v28; // r0@57
  int v29; // r0@59
  char v31; // [sp+4h] [bp-44h]@34
  _DWORD *v32; // [sp+8h] [bp-40h]@12
  int v33; // [sp+8h] [bp-40h]@34
  char *v34; // [sp+Ch] [bp-3Ch]@10
  _DWORD *v35; // [sp+10h] [bp-38h]@12
  char *v36; // [sp+14h] [bp-34h]@8
  _DWORD *v37; // [sp+18h] [bp-30h]@10
  char *v38; // [sp+1Ch] [bp-2Ch]@1
  android::RefBase::weakref_type *v39; // [sp+20h] [bp-28h]@2

  v2 = a2;
  v3 = a1;
  v38 = *(char **)(a2 + 4);
  if ( v38 )
    v39 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v38[*(_DWORD *)(*(_DWORD *)v38 - 12)],
                                              &v38);
  v4 = sub_1CDF0((android::SortedVectorImpl *)(v3 + 52), (int)&v38);
  if ( v38 )
    android::RefBase::weakref_type::decWeak(v39, &v38);
  if ( v4 < 0 )
    return 0;
  v5 = android::VectorImpl::editItemLocation((android::VectorImpl *)(v3 + 52), v4);
  if ( *(_DWORD *)(v5 + 8) < 0 )
    return 0;
  v6 = *(_DWORD *)v2;
  if ( !(*(_DWORD *)v2 & 1) )
    goto LABEL_64;
  v36 = *(char **)(v5 + 12);
  if ( v36 )
    android::RefBase::incStrong((android::RefBase *)&v36[*(_DWORD *)(*(_DWORD *)v36 - 12)], &v36);
  android::IInterface::asBinder(&v37, &v36);
  v34 = *(char **)(v2 + 8);
  if ( v34 )
    android::RefBase::incStrong((android::RefBase *)&v34[*(_DWORD *)(*(_DWORD *)v34 - 12)], &v34);
  android::IInterface::asBinder(&v35, &v34);
  v7 = v35;
  v32 = v37;
  if ( v35 )
    android::RefBase::decStrong((android::RefBase *)((char *)v35 + *(_DWORD *)(*v35 - 12)), &v35);
  if ( v34 )
    android::RefBase::decStrong((android::RefBase *)&v34[*(_DWORD *)(*(_DWORD *)v34 - 12)], &v34);
  if ( v37 )
    android::RefBase::decStrong((android::RefBase *)((char *)v37 + *(_DWORD *)(*v37 - 12)), &v37);
  if ( v36 )
    android::RefBase::decStrong((android::RefBase *)&v36[*(_DWORD *)(*(_DWORD *)v36 - 12)], &v36);
  if ( v32 != v7 )
  {
    sub_123A8((void *)(v5 + 12), (char **)(v2 + 8));
    v8 = 4;
  }
  else
  {
LABEL_64:
    v8 = 0;
  }
  if ( v6 & 2 )
  {
    v9 = *(_DWORD *)(v5 + 8);
    if ( v9 <= 1 && v9 )
    {
      v10 = (_DWORD *)(v2 + 12);
    }
    else
    {
      v11 = 0;
      v10 = (_DWORD *)(v2 + 12);
      if ( v9 > 1 )
        v11 = 2;
      sub_2A784(*(_DWORD *)(v3 + 196), v11, *(_DWORD *)(v2 + 12));
    }
    if ( *(_DWORD *)(v5 + 16) != *v10 )
    {
      *(_DWORD *)(v5 + 16) = *v10;
      v8 = 4;
    }
  }
  if ( v6 & 4 )
  {
    v31 = v6;
    v33 = v5;
    if ( *(_DWORD *)(v3 + 60) )
    {
      v12 = 0;
      v13 = 0;
      while ( 1 )
      {
        v14 = ((int (__fastcall *)(int, int))loc_21EF4)(v3 + 52, *(_DWORD *)(v3 + 56) + v12);
        if ( !strncmp("HMP", *(const char **)(v14 + 56), 3u) && *(_DWORD *)v14 > 1 )
          break;
        ++v13;
        v12 += 72;
        if ( v13 >= *(_DWORD *)(v3 + 60) )
          goto LABEL_39;
      }
      v5 = v33;
      if ( *(_DWORD *)(v33 + 8) < 2 )
        goto LABEL_44;
      sub_2A730(*(_DWORD *)(v3 + 196), 1);
      v15 = -42834;
      v16 = (char *)&GLOBAL_OFFSET_TABLE_;
    }
    else
    {
LABEL_39:
      v5 = v33;
      if ( *(_DWORD *)(v33 + 8) )
      {
LABEL_44:
        v17 = *(_DWORD *)(v2 + 16);
        if ( *(_BYTE *)(v5 + 52) != v17 )
        {
          v8 = 4;
          *(_BYTE *)(v5 + 52) = v17;
        }
        _R0 = v2 + 36;
        _R1 = v5 + 36;
        LOBYTE(v6) = v31;
        if ( *(_DWORD *)(v5 + 36) != *(_DWORD *)(v2 + 36)
          || *(_DWORD *)(v5 + 40) != *(_DWORD *)(v2 + 40)
          || *(_DWORD *)(v5 + 44) != *(_DWORD *)(v2 + 44)
          || *(_DWORD *)(v5 + 48) != *(_DWORD *)(v2 + 48) )
        {
          __asm { VLD1.32         {D16-D17}, [R0] }
          v8 = 4;
          __asm { VST1.32         {D16-D17}, [R1] }
        }
        _R0 = v2 + 20;
        _R1 = v5 + 20;
        if ( *(_DWORD *)(v5 + 20) != *(_DWORD *)(v2 + 20)
          || *(_DWORD *)(v5 + 24) != *(_DWORD *)(v2 + 24)
          || *(_DWORD *)(v5 + 28) != *(_DWORD *)(v2 + 28)
          || *(_DWORD *)(v5 + 32) != *(_DWORD *)(v2 + 32) )
        {
          __asm { VLD1.32         {D16-D17}, [R0] }
          v8 |= 4u;
          __asm { VST1.32         {D16-D17}, [R1] }
        }
        goto LABEL_56;
      }
      sub_2A730(*(_DWORD *)(v3 + 196), *(_DWORD *)(v2 + 16));
      v15 = -42794;
      v16 = (char *)&GLOBAL_OFFSET_TABLE_;
    }
    _android_log_print(4, v16 - 48074, &v16[v15], *(_DWORD *)(v2 + 16));
    goto LABEL_44;
  }
LABEL_56:
  if ( v6 & 8 )
  {
    v28 = *(_DWORD *)(v2 + 52);
    if ( *(_DWORD *)(v5 + 56) != v28 )
    {
      *(_DWORD *)(v5 + 56) = v28;
      v8 |= 4u;
    }
    v29 = *(_DWORD *)(v2 + 56);
    if ( *(_DWORD *)(v5 + 60) != v29 )
    {
      *(_DWORD *)(v5 + 60) = v29;
      v8 |= 4u;
    }
  }
  return v8;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00021CB0) --------------------------------------------------------
signed int __fastcall sub_21CB0(int a1, int *a2, char **a3)
{
  int v4; // r8@1
  char *v5; // r6@2
  signed int v6; // r4@3
  unsigned int v7; // r9@8
  unsigned int v13; // r7@29
  char *v15; // [sp+4h] [bp-24h]@1

  _R5 = a3;
  v4 = a1;
  sub_122C8(&v15, *a2, a3);
  if ( v15 )
  {
    v5 = _R5[1];
    if ( (unsigned __int8)v5 & 1 )
    {
      v6 = sub_19540((int)v15, (int)_R5[2], (int)_R5[3]);
      if ( v6 )
        v6 = 2;
    }
    else
    {
      v6 = 0;
    }
    if ( (unsigned __int8)v5 & 2 )
    {
      v7 = android::SortedVectorImpl::indexOf((android::SortedVectorImpl *)(v4 + 32), &v15);
      if ( sub_195C0((int)v15, (int)_R5[4]) == 1 )
      {
        android::VectorImpl::removeItemsAt((android::VectorImpl *)(v4 + 32), v7, 1u);
        android::SortedVectorImpl::add((android::SortedVectorImpl *)(v4 + 32), &v15);
        v6 = 3;
      }
    }
    if ( (unsigned __int8)v5 & 4 && sub_195F8((int)v15, (int)_R5[5], (int)_R5[6]) )
      v6 |= 2u;
    if ( (unsigned __int8)v5 & 8 )
    {
      __asm
      {
        VMOV.F32        S0, #0.5
        VLDR            S2, =255.0
        VLDR            S4, [R5,#0x20]
        VMLA.F32        S0, S4, S2
        VCVTR.U32.F32   S0, S0
        VMOV            R1, S0
      }
      if ( sub_19630((int)v15, _R1) )
        v6 |= 2u;
    }
    if ( (unsigned __int8)v5 & 0x10 && sub_19668((int)v15, (int)(_R5 + 10)) )
      v6 |= 2u;
    if ( (unsigned __int8)v5 & 0x20 && sub_196AC((int)v15) )
      v6 |= 2u;
    if ( (unsigned __int8)v5 & 0x40 && sub_196D4((int)v15, *((_BYTE *)_R5 + 36), *((_BYTE *)_R5 + 37)) )
      v6 |= 2u;
    if ( (unsigned __int16)v5 & 0x100 && sub_19714((int)v15, (int)(_R5 + 14)) )
      v6 |= 2u;
    if ( (unsigned __int8)v5 & 0x80 )
    {
      v13 = android::SortedVectorImpl::indexOf((android::SortedVectorImpl *)(v4 + 32), &v15);
      if ( sub_19778((int)v15, (int)_R5[7]) == 1 )
      {
        android::VectorImpl::removeItemsAt((android::VectorImpl *)(v4 + 32), v13, 1u);
        android::SortedVectorImpl::add((android::SortedVectorImpl *)(v4 + 32), &v15);
        v6 |= 3u;
      }
    }
    if ( v15 )
      android::RefBase::decStrong((android::RefBase *)&v15[*(_DWORD *)(*(_DWORD *)v15 - 12)], &v15);
  }
  else
  {
    v6 = 0;
  }
  return v6;
}

//----- (00021E18) --------------------------------------------------------
int __fastcall sub_21E18(int result, int a2, unsigned int a3)
{
  unsigned int v3; // r6@1
  int v4; // r5@1
  int v5; // r7@2
  unsigned int *v6; // r0@4
  unsigned int v7; // r1@5
  int v8; // [sp+Ch] [bp-1Ch]@2

  v3 = a3;
  v4 = result;
  if ( !a2 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(result + 28));
    sub_17760((unsigned int **)&v8, v4);
    v5 = v8;
    _android_log_print(
      4,
      "SurfaceFlinger",
      "%s, orientationOld=%d, orientationNew=%d",
      "setOrientation",
      *(_DWORD *)(v8 + 164),
      v3);
    if ( v3 <= 0x10E && *(_DWORD *)(v5 + 164) != v3 )
    {
      v6 = (unsigned int *)(v4 + 136);
      __dmb();
      do
        v7 = __ldrex(v6);
      while ( __strex(v7 | 1, v6) );
      if ( !(v7 & 1) )
        sub_1B4B0(v4 + 444);
      pthread_cond_wait((pthread_cond_t *)(v4 + 140), (pthread_mutex_t *)(v4 + 28));
    }
    sub_1BF7C((unsigned int **)&v8);
    result = pthread_mutex_unlock((pthread_mutex_t *)(v4 + 28));
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00021EBC) --------------------------------------------------------
int __fastcall sub_21EBC(int a1, int a2)
{
  return sub_2A554(*(_DWORD *)(a1 + 196), a2);
}

//----- (00021EC4) --------------------------------------------------------
int __fastcall sub_21EC4(int a1, int a2)
{
  return sub_2A5A4(*(_DWORD *)(a1 + 196), a2);
}

//----- (00021ECC) --------------------------------------------------------
int __fastcall sub_21ECC(int a1, int a2)
{
  return sub_2A5F4(*(_DWORD *)(a1 + 196), a2 != 0);
}

//----- (00021EDC) --------------------------------------------------------
int __fastcall sub_21EDC(int a1, int a2)
{
  return sub_2A514(*(_DWORD *)(a1 + 196), a2 != 0);
}

//----- (00021EEC) --------------------------------------------------------
int __fastcall sub_21EEC(int a1)
{
  int result; // r0@1
  int (*v2)(void); // r2@2

  result = *(_DWORD *)(*(_DWORD *)(a1 + 196) + 8);
  if ( result )
  {
    v2 = *(int (**)(void))(result + 156);
    if ( v2 )
      result = v2();
  }
  return result;
}

//----- (00021F40) --------------------------------------------------------
int __fastcall sub_21F40(int a1, int a2)
{
  int v2; // r4@1
  int result; // r0@1
  int (__fastcall **v4)(_DWORD, _DWORD, _DWORD, _DWORD); // r2@3
  int v5; // r1@3

  v2 = a2;
  result = unk_45028;
  if ( unk_45028 != a2 )
  {
    unk_4502C = 1;
    property_set("persist.sys.res.levelchanged", "1");
    unk_45028 = v2;
    if ( v2 == 1 )
    {
      v4 = &GLOBAL_OFFSET_TABLE_;
      v5 = v14;
    }
    else
    {
      v4 = &GLOBAL_OFFSET_TABLE_;
      v5 = v8;
    }
    result = j_j_property_set((int)v4 - 44661, v5);
  }
  return result;
}
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00021FB8) --------------------------------------------------------
void sub_21FB8()
{
  _android_log_print(4, "SurfaceFlinger", "updateDisplay");
  sub_291A8(unk_45028);
  exit(0);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00021FEC) --------------------------------------------------------
ssize_t __fastcall sub_21FEC(int a1, const char *a2, int a3)
{
  const char *v3; // r4@1
  ssize_t v4; // r5@1
  int v9; // r7@1
  signed int v11; // r6@1
  size_t v12; // r0@2
  ssize_t v13; // r7@2
  int v15; // [sp+0h] [bp-38h]@2
  char v16; // [sp+8h] [bp-30h]@1
  int v17; // [sp+1Ch] [bp-1Ch]@1

  v3 = a2;
  v4 = 0;
  __asm { VMOV.I32        Q8, #0 }
  v9 = a3;
  v17 = v0;
  _R0 = &v16;
  __asm { VST1.64         {D16-D17}, [R0]! }
  *(_DWORD *)&v16 = 0;
  v11 = open(a2, 2);
  if ( v11 >= 1 )
  {
    v4 = 0;
    v15 = v9;
    v12 = _sprintf_chk(&v16, 0, 20, "%d\n");
    v13 = write(v11, &v16, v12);
    close(v11);
    if ( v13 )
    {
      _android_log_print(6, "SurfaceFlinger", "write_int failed to open %s\n", v3, v15);
      v4 = v13;
    }
  }
  if ( v0 != v17 )
    _stack_chk_fail(v0 - v17);
  return v4;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 10F5C: using guessed type int _sprintf_chk(_DWORD, _DWORD, _DWORD, const char *, ...);

//----- (000220A0) --------------------------------------------------------
int __fastcall sub_220A0(int a1, void *a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int *v9; // r5@1
  int v10; // r4@1
  int v11; // r6@3
  unsigned int *v12; // r0@9
  unsigned int v13; // r1@10
  char *v15; // [sp+18h] [bp-28h]@2
  int v16; // [sp+1Ch] [bp-24h]@1

  v9 = (int *)a3;
  v10 = a1;
  v16 = a6;
  if ( (a5 | a4) <= -1 )
  {
    _android_log_print(6, "SurfaceFlinger", "createLayer() failed, w or h is negative (w=%d, h=%d)");
    return -22;
  }
  v15 = 0;
  if ( a7 & 0xF0000 )
  {
    if ( (a7 & 0xF0000) == 0x20000 )
    {
      sub_22274(a1, a3, a2, a4, (void *)a5, a7, (void *)a8, (void *)a9, &v15);
      goto LABEL_8;
    }
    return -22;
  }
  v11 = sub_22188(a1, a3, (int)a2, a4, a5, (void *)a7, &v16, (void *)a8, (void *)a9, &v15);
  if ( !v11 )
  {
LABEL_8:
    v11 = sub_215E8((void *)v10, v9, (char **)a8, (char **)a9, &v15);
    if ( !v11 )
    {
      v12 = (unsigned int *)(v10 + 136);
      __dmb();
      do
        v13 = __ldrex(v12);
      while ( __strex(v13 | 1, v12) );
      if ( !(v13 & 1) )
        sub_1B4B0(v10 + 444);
      v11 = 0;
    }
  }
  if ( v15 )
    android::RefBase::decStrong((android::RefBase *)&v15[*(_DWORD *)(*(_DWORD *)v15 - 12)], &v15);
  return v11;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00022188) --------------------------------------------------------
int __fastcall sub_22188(int a1, int a2, int a3, int a4, int a5, void *a6, int *a7, void *a8, void *a9, _DWORD *a10)
{
  int v10; // r6@1
  int v11; // r5@1
  android::String8 *v12; // r10@1
  char **v13; // r4@1
  signed int v14; // r0@3
  char *v15; // r7@6
  signed int v16; // r0@6
  signed int v17; // r5@6
  char *v18; // r0@11
  char *v20; // [sp+Ch] [bp-2Ch]@9
  char *v21; // [sp+10h] [bp-28h]@7

  v10 = a1;
  v11 = a4;
  v12 = (android::String8 *)a3;
  v13 = (char **)a2;
  if ( *a7 == -1 )
  {
    v14 = 2;
  }
  else
  {
    if ( (unsigned int)(*a7 + 3) > 1 )
      goto LABEL_6;
    v14 = 1;
  }
  *a7 = v14;
LABEL_6:
  v15 = (char *)operator new(0x12E0u);
  sub_17268((int)v15, v10, v13, v12, v11, a5, (unsigned int)a6);
  sub_176BC(a10, v15);
  v16 = sub_17DEC(*a10, v11, a5, *a7, (unsigned int)a6);
  v17 = v16;
  if ( v16 )
  {
    v18 = strerror(-v16);
    _android_log_print(6, "SurfaceFlinger", "createNormalLayer() failed (%s)", v18);
  }
  else
  {
    ((void (__fastcall *)(char **, _DWORD))loc_17EB8)(&v21, *a10);
    sub_123A8(a8, &v21);
    if ( v21 )
      android::RefBase::decStrong((android::RefBase *)&v21[*(_DWORD *)(*(_DWORD *)v21 - 12)], &v21);
    sub_17FAC(&v20, *a10);
    sub_123A8(a9, &v20);
    if ( v20 )
      android::RefBase::decStrong((android::RefBase *)&v20[*(_DWORD *)(*(_DWORD *)v20 - 12)], &v20);
  }
  return v17;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00022274) --------------------------------------------------------
int __fastcall sub_22274(int a1, int a2, void *a3, int a4, void *a5, unsigned int a6, void *a7, void *a8, _DWORD *a9)
{
  int v9; // r7@1
  int v10; // r4@1
  android::String8 *v11; // r8@1
  int v12; // r6@1
  char *v13; // r5@1
  char *v15; // [sp+10h] [bp-20h]@3
  char *v16; // [sp+14h] [bp-1Ch]@1

  v9 = a1;
  v10 = a4;
  v11 = (android::String8 *)a3;
  v12 = a2;
  v13 = (char *)operator new(0x12E0u);
  sub_1AC00((int)v13, v9, v12, v11, v10, (int)a5, a6);
  sub_176BC(a9, v13);
  ((void (__fastcall *)(char **, _DWORD))loc_17EB8)(&v16, *a9);
  sub_123A8(a7, &v16);
  if ( v16 )
    android::RefBase::decStrong((android::RefBase *)&v16[*(_DWORD *)(*(_DWORD *)v16 - 12)], &v16);
  sub_17FAC(&v15, *a9);
  sub_123A8(a8, &v15);
  if ( v15 )
    android::RefBase::decStrong((android::RefBase *)&v15[*(_DWORD *)(*(_DWORD *)v15 - 12)], &v15);
  return 0;
}

//----- (00022300) --------------------------------------------------------
int __fastcall sub_22300(int a1, int *a2, char **a3)
{
  int v3; // r4@1
  int v4; // r0@2
  int v5; // r4@2
  _DWORD *v7; // r5@4
  char *v8; // r0@4
  _DWORD *v9; // [sp+4h] [bp-14h]@1

  v3 = a1;
  sub_122C8(&v9, *a2, a3);
  if ( v9 )
  {
    v4 = sub_216B4(v3, &v9);
    v5 = v4;
    if ( v4 <= -1 && v4 != -2 )
    {
      v7 = v9;
      v8 = strerror(-v4);
      _android_log_print(6, "SurfaceFlinger", "error removing layer=%p (%s)", v7, v8);
    }
    if ( v9 )
      android::RefBase::decStrong((android::RefBase *)((char *)v9 + *(_DWORD *)(*v9 - 12)), &v9);
  }
  else
  {
    v5 = 0;
  }
  return v5;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00022378) --------------------------------------------------------
int __fastcall sub_22378(int a1, int a2)
{
  int v2; // r4@1
  _DWORD *v3; // r6@1
  int v4; // r5@1
  _DWORD *v5; // r0@3
  int v6; // r0@6
  _DWORD *v7; // r5@8
  char *v8; // r0@8
  _DWORD *v10; // [sp+4h] [bp-14h]@1

  v2 = 0;
  v3 = (_DWORD *)a2;
  v10 = 0;
  v4 = a1;
  if ( *(_DWORD *)a2 )
  {
    if ( android::RefBase::weakref_type::attemptIncStrong(*(android::RefBase::weakref_type **)(a2 + 4), &v10) == 1 )
    {
      v5 = (_DWORD *)*v3;
      v10 = (_DWORD *)*v3;
    }
    else
    {
      v5 = v10;
    }
    if ( v5 )
    {
      v6 = sub_216B4(v4, &v10);
      v2 = v6;
      if ( v6 <= -1 && v6 != -2 )
      {
        v7 = v10;
        v8 = strerror(-v6);
        _android_log_print(6, "SurfaceFlinger", "error removing layer=%p (%s)", v7, v8);
      }
    }
    else
    {
      v2 = 0;
    }
    if ( v10 )
      android::RefBase::decStrong((android::RefBase *)((char *)v10 + *(_DWORD *)(*v10 - 12)), &v10);
  }
  return v2;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000223FC) --------------------------------------------------------
int __fastcall sub_223FC(int a1)
{
  int v1; // r4@1
  int v8; // r0@3
  unsigned int **v9; // r0@4
  unsigned int *v10; // r0@6
  unsigned int v11; // r1@8
  __int64 v12; // r0@11
  int v14; // [sp+0h] [bp-A0h]@1
  android::RefBase::weakref_type *v15; // [sp+4h] [bp-9Ch]@2
  unsigned int *v16; // [sp+8h] [bp-98h]@6
  int v17; // [sp+Ch] [bp-94h]@1
  double v18; // [sp+10h] [bp-90h]@1
  int v19; // [sp+20h] [bp-80h]@1
  int v20; // [sp+30h] [bp-70h]@1
  void *v21; // [sp+48h] [bp-58h]@1
  void *v22; // [sp+5Ch] [bp-44h]@1

  v1 = a1;
  android::VectorImpl::VectorImpl((android::VectorImpl *)&v22, 0x60u, 0);
  v22 = &unk_3FBF4;
  android::VectorImpl::VectorImpl((android::VectorImpl *)&v21, 0x3Cu, 0);
  __asm { VMOV.F64        D8, #0.5 }
  _R7 = &v19;
  __asm
  {
    VMOV.I32        D8, #0
    VMOV.I32        Q8, #0
  }
  v21 = &unk_3FC1C;
  _R6 = &v20;
  __asm
  {
    VSTR            D8, [SP,#0xA0+var_90]
    VST1.32         {D16-D17}, [R6]
    VST1.32         {D16-D17}, [R7]
  }
  v17 = 6;
  sub_123A8(&v18, (char **)(v1 + 240));
  __asm { VSTR            D8, [SP,#0xA0+var_88] }
  android::Rect::makeInvalid((android::Rect *)&v20);
  android::Rect::makeInvalid((android::Rect *)&v19);
  __asm { VSTR            D8, [SP,#0xA0+var_60] }
  android::VectorImpl::add((android::VectorImpl *)&v21, &v17);
  (*(void (__fastcall **)(int, void **, void **, _DWORD))(*(_DWORD *)v1 + 40))(v1, &v22, &v21, 0);
  v14 = LODWORD(v18);
  if ( LODWORD(v18) )
    v15 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)(LODWORD(v18)
                                                                 + *(_DWORD *)(*(_DWORD *)LODWORD(v18) - 12)),
                                              &v14);
  v8 = sub_1A49C((android::SortedVectorImpl *)(v1 + 356), (int)&v14);
  if ( v8 < 0 )
    v9 = (unsigned int **)(v1 + 376);
  else
    v9 = (unsigned int **)(*(_DWORD *)(v1 + 360) + 12 * v8 + 8);
  v10 = *v9;
  v16 = v10;
  if ( v10 )
  {
    __dmb();
    do
      v11 = __ldrex(v10);
    while ( __strex(v11 + 1, v10) );
  }
  sub_22598(v1, (int *)&v16, 2);
  sub_1BF7C(&v16);
  if ( v14 )
    android::RefBase::weakref_type::decWeak(v15, &v14);
  v12 = sub_295A0(*(_DWORD *)(v1 + 196), 0);
  sub_16A34(v1 + 472, SHIDWORD(v12), v12, SHIDWORD(v12));
  if ( HIDWORD(v18) )
    android::RefBase::decStrong(
      (android::RefBase *)(HIDWORD(v18) + *(_DWORD *)(*(_DWORD *)HIDWORD(v18) - 12)),
      (char *)&v18 + 4);
  if ( LODWORD(v18) )
    android::RefBase::decStrong((android::RefBase *)(LODWORD(v18) + *(_DWORD *)(*(_DWORD *)LODWORD(v18) - 12)), &v18);
  v21 = &unk_3FC1C;
  android::VectorImpl::finish_vector((android::VectorImpl *)&v21);
  android::VectorImpl::~VectorImpl((android::VectorImpl *)&v21);
  v22 = &unk_3FBF4;
  android::VectorImpl::finish_vector((android::VectorImpl *)&v22);
  return android::VectorImpl::~VectorImpl((android::VectorImpl *)&v22);
}

//----- (00022598) --------------------------------------------------------
int __fastcall sub_22598(int a1, int *a2, int a3)
{
  int *v3; // r4@1
  int v4; // r8@1
  int v5; // r5@1
  signed int v6; // r6@1
  int v7; // r7@1
  int v8; // r0@1
  int result; // r0@2
  unsigned int *v10; // r0@10
  unsigned int v11; // r1@11

  v3 = a2;
  v4 = a1;
  v5 = a3;
  _android_log_print(3, "SurfaceFlinger", "Set power mode=%d, type=%d flinger=%p", a3, *(_DWORD *)(*a2 + 72), a1);
  v6 = *(_DWORD *)(*v3 + 72);
  v7 = sub_135B4(*v3);
  v8 = *v3;
  if ( v7 == v5 )
  {
    result = _android_log_print(3, "SurfaceFlinger", "Screen type=%d is already mode=%d", *(_DWORD *)(v8 + 72), v5);
  }
  else
  {
    sub_135AC(v8, v5);
    if ( v6 < 2 )
    {
      if ( v7 )
      {
        if ( v5 )
        {
          result = sub_2A4CC(*(_DWORD *)(v4 + 196), v6, v5);
        }
        else
        {
          if ( !v6 )
          {
            sub_1E184(v4, 1);
            sub_1568C(*(_DWORD *)(v4 + 220));
          }
          sub_2A4CC(*(_DWORD *)(v4 + 196), v6, 0);
          result = 1;
          *(_BYTE *)(v4 + 352) = 1;
        }
      }
      else
      {
        sub_2A4CC(*(_DWORD *)(v4 + 196), v6, v5);
        if ( !v6 )
        {
          sub_156BC(*(_DWORD *)(v4 + 220));
          sub_1E0F0(v4, 1);
        }
        *(_BYTE *)(v4 + 352) = 1;
        *(_BYTE *)(v4 + 5238) = 1;
        v10 = (unsigned int *)(v4 + 192);
        __dmb();
        do
          v11 = __ldrex(v10);
        while ( __strex(v11 | 1, v10) );
        result = sub_1B4B0(v4 + 444);
      }
    }
    else
    {
      result = _android_log_print(5, "SurfaceFlinger", "Trying to set power mode for virtual display");
    }
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00022714) --------------------------------------------------------
_DWORD *__fastcall sub_22714(int a1, char **a2, int a3)
{
  int v3; // r4@1
  int v4; // r8@1
  char **v5; // r7@1
  int v6; // r6@1
  void **v7; // r0@1
  char *v8; // r2@1
  bool v9; // zf@1
  _DWORD *result; // r0@3
  _DWORD *v11; // [sp+4h] [bp-1Ch]@3

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = operator new(0x24u);
  android::RefBase::RefBase((android::RefBase *)(v6 + 28));
  sub_1AE68((_DWORD *)v6, (int)off_3FA94);
  v7 = &off_422E8;
  *(_DWORD *)v6 = &off_422E8;
  *(_DWORD *)(v6 + 28) = &off_42314;
  *(_DWORD *)(v6 + 16) = v3;
  v8 = *v5;
  v9 = *v5 == 0;
  *(_DWORD *)(v6 + 20) = *v5;
  if ( !v9 )
  {
    android::RefBase::incStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], (const void *)(v6 + 20));
    v7 = *(void ***)v6;
  }
  *(_DWORD *)(v6 + 24) = v4;
  v11 = (_DWORD *)v6;
  android::RefBase::incStrong((android::RefBase *)((char *)*(v7 - 3) + v6), &v11);
  sub_1DFF0(v3, (char **)&v11, 0, 0);
  result = v11;
  if ( v11 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v11 + *(_DWORD *)(*v11 - 12)), &v11);
  return result;
}
// 3FA94: using guessed type void **[5];
// 422E8: using guessed type void *off_422E8;
// 42314: using guessed type void *off_42314;

//----- (000227B0) --------------------------------------------------------
int __fastcall sub_227B0(int a1, int a2, int a3)
{
  int v3; // r10@1
  int v4; // r9@1
  int v5; // r6@1
  android::IPCThreadState *v6; // r0@1
  android::IPCThreadState *v7; // r7@1
  const android::String16 *v8; // r4@1
  int v9; // r0@1
  unsigned int v10; // r3@1
  int v11; // r7@1
  pthread_mutex_t *v12; // r7@3
  int v13; // r0@3
  int v14; // r11@3
  char *v15; // r0@4
  unsigned int v16; // r5@5
  _DWORD *v17; // r4@6
  int v18; // r1@7
  int v19; // r3@9
  int v20; // r7@10
  int v21; // r1@10
  int v22; // r2@10
  signed int v23; // r8@10
  unsigned int v24; // r4@11
  int v25; // r7@15
  int v26; // r0@15
  int v27; // r1@16
  int v28; // r3@18
  int v29; // r7@19
  int v30; // r7@22
  int v31; // r0@22
  int v32; // r1@23
  int v33; // r3@25
  int v34; // r7@26
  int v35; // r7@29
  int v36; // r0@29
  int v37; // r1@30
  int v38; // r3@32
  int v39; // r7@33
  int v40; // r5@36
  int v41; // r0@36
  int v42; // r1@37
  int v43; // r3@39
  int v44; // r7@40
  size_t v45; // r2@47
  int v47; // [sp+8h] [bp-48h]@36
  int v48; // [sp+Ch] [bp-44h]@29
  int v49; // [sp+10h] [bp-40h]@22
  int v50; // [sp+14h] [bp-3Ch]@15
  int v51; // [sp+18h] [bp-38h]@6
  unsigned int v52; // [sp+1Ch] [bp-34h]@5
  void *buf; // [sp+20h] [bp-30h]@1
  struct timespec abstime; // [sp+24h] [bp-2Ch]@3

  v3 = a1;
  v4 = a3;
  v5 = a2;
  v6 = (android::IPCThreadState *)android::String8::String8((android::String8 *)&buf);
  v7 = (android::IPCThreadState *)android::IPCThreadState::self(v6);
  v8 = (const android::String16 *)android::IPCThreadState::getCallingPid(v7);
  v9 = android::IPCThreadState::getCallingUid(v7);
  v11 = v9;
  if ( v9 != 2000 && !android::PermissionCache::checkPermission((android::PermissionCache *)&unk_45024, v8, v9, v10) )
  {
    android::String8::appendFormat(
      (android::String8 *)&buf,
      "Permission Denial: can't dump SurfaceFlinger from pid=%d, uid=%d\n",
      v8,
      v11);
    goto LABEL_46;
  }
  v12 = (pthread_mutex_t *)(v3 + 28);
  abstime.tv_sec = 1;
  abstime.tv_nsec = 0;
  v13 = pthread_mutex_timedlock((pthread_mutex_t *)(v3 + 28), &abstime);
  v14 = v13;
  if ( v13 )
  {
    v15 = strerror(v13);
    android::String8::appendFormat(
      (android::String8 *)&buf,
      "SurfaceFlinger appears to be unresponsive (%s [%d]), dumping anyways (no locks held)\n",
      v15,
      -v14);
  }
  v52 = 0;
  v16 = *(_DWORD *)(v4 + 8);
  if ( !v16 )
  {
LABEL_42:
    sub_22D60(v3, v4, &v52, (android::String8 *)&buf);
    goto LABEL_44;
  }
  v17 = *(_DWORD **)(v4 + 4);
  android::String16::String16((android::String16 *)&v51, "--list");
  if ( *v17 )
    v18 = (*(_DWORD *)(*v17 - 12) >> 1) - 1;
  if ( v51 )
    v19 = (*(_DWORD *)(v51 - 12) >> 1) - 1;
  v20 = strzcmp16();
  android::String16::~String16((android::String16 *)&v51);
  v23 = 1;
  if ( v20 )
  {
    v24 = 0;
  }
  else
  {
    v52 = 1;
    sub_22A90(v3, v21, v22, (android::String8 *)&buf);
    v23 = 0;
    v24 = 1;
  }
  if ( v24 < v16 )
  {
    v25 = *(_DWORD *)(v4 + 4);
    android::String16::String16((android::String16 *)&v50, "--latency");
    v26 = *(_DWORD *)(v25 + 4 * v24);
    if ( v26 )
      v27 = (*(_DWORD *)(v26 - 12) >> 1) - 1;
    if ( v50 )
      v28 = (*(_DWORD *)(v50 - 12) >> 1) - 1;
    v29 = strzcmp16();
    android::String16::~String16((android::String16 *)&v50);
    if ( !v29 )
    {
      v52 = v24 + 1;
      sub_22AF0(v3, v4, &v52, (android::String8 *)&buf);
      v24 = v52;
      v23 = 0;
    }
  }
  if ( v24 < v16 )
  {
    v30 = *(_DWORD *)(v4 + 4);
    android::String16::String16((android::String16 *)&v49, "--latency-clear");
    v31 = *(_DWORD *)(v30 + 4 * v24);
    if ( v31 )
      v32 = (*(_DWORD *)(v31 - 12) >> 1) - 1;
    if ( v49 )
      v33 = (*(_DWORD *)(v49 - 12) >> 1) - 1;
    v34 = strzcmp16();
    android::String16::~String16((android::String16 *)&v49);
    if ( !v34 )
    {
      v52 = v24 + 1;
      sub_22BA0(v3, v4, &v52);
      v24 = v52;
      v23 = 0;
    }
  }
  if ( v24 < v16 )
  {
    v35 = *(_DWORD *)(v4 + 4);
    android::String16::String16((android::String16 *)&v48, "--dispsync");
    v36 = *(_DWORD *)(v35 + 4 * v24);
    if ( v36 )
      v37 = (*(_DWORD *)(v36 - 12) >> 1) - 1;
    if ( v48 )
      v38 = (*(_DWORD *)(v48 - 12) >> 1) - 1;
    v39 = strzcmp16();
    android::String16::~String16((android::String16 *)&v48);
    if ( !v39 )
    {
      v52 = ++v24;
      sub_14380(v3 + 4624, (android::String8 *)&buf);
      v23 = 0;
    }
  }
  if ( v24 >= v16 )
    goto LABEL_52;
  v40 = *(_DWORD *)(v4 + 4);
  android::String16::String16((android::String16 *)&v47, "--static-screen");
  v41 = *(_DWORD *)(v40 + 4 * v24);
  if ( v41 )
    v42 = (*(_DWORD *)(v41 - 12) >> 1) - 1;
  if ( v47 )
    v43 = (*(_DWORD *)(v47 - 12) >> 1) - 1;
  v44 = strzcmp16();
  android::String16::~String16((android::String16 *)&v47);
  if ( v44 )
  {
LABEL_52:
    v12 = (pthread_mutex_t *)(v3 + 28);
    if ( v23 != 1 )
      goto LABEL_44;
    goto LABEL_42;
  }
  v52 = v24 + 1;
  sub_22C38(v3, (android::String8 *)&buf);
  v12 = (pthread_mutex_t *)(v3 + 28);
LABEL_44:
  if ( !v14 )
    pthread_mutex_unlock(v12);
LABEL_46:
  if ( buf )
    v45 = *((_DWORD *)buf - 3) - 1;
  else
    v45 = -1;
  write(v5, buf, v45);
  android::String8::~String8((android::String8 *)&buf);
  return 0;
}
// 1053C: using guessed type int strzcmp16(void);

//----- (00022A90) --------------------------------------------------------
int __fastcall sub_22A90(int result, int a2, int a3, android::String8 *a4)
{
  int v4; // r10@1
  android::String8 *v5; // r8@1
  int v6; // r4@1
  int v7; // r7@2
  int v8; // r5@3
  android::String8 *v9; // r0@3
  _DWORD *v10; // r0@4

  v4 = result;
  v5 = a4;
  v6 = *(_DWORD *)(result + 40);
  if ( v6 )
  {
    v7 = 0;
    do
    {
      v8 = *(_DWORD *)(v4 + 36);
      v9 = (android::String8 *)sub_17C58(*(_DWORD *)(v8 + 4 * v7));
      result = android::String8::find(v9, "hwSingleMode_window", 0);
      if ( result == -1 )
      {
        v10 = (_DWORD *)sub_17C58(*(_DWORD *)(v8 + 4 * v7));
        result = android::String8::appendFormat(v5, "%s\n", *v10);
      }
      ++v7;
    }
    while ( v6 != v7 );
  }
  return result;
}

//----- (00022AF0) --------------------------------------------------------
int __fastcall sub_22AF0(int a1, int a2, _DWORD *a3, android::String8 *a4)
{
  int v4; // r5@1
  android::String8 *v5; // r8@1
  _DWORD *v6; // r6@1
  int v7; // r7@1
  __int64 v8; // r0@3
  int v9; // r6@6
  int v10; // r7@7
  int v11; // r4@8
  const char **v12; // r0@8
  int v14; // [sp+0h] [bp-20h]@2
  char *s1; // [sp+4h] [bp-1Ch]@1

  v4 = a1;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  android::String8::String8((android::String8 *)&s1);
  if ( *v6 < *(_DWORD *)(v7 + 8) )
  {
    android::String8::String8((android::String8 *)&v14, (const android::String16 *)(*(_DWORD *)(v7 + 4) + 4 * *v6));
    android::String8::setTo((android::String8 *)&s1, (const android::String8 *)&v14);
    android::String8::~String8((android::String8 *)&v14);
    ++*v6;
  }
  v8 = sub_295A0(*(_DWORD *)(v4 + 196), 0);
  android::String8::appendFormat(v5, "%lld\n", v8);
  if ( s1 && *((_DWORD *)s1 - 3) == 1 )
  {
    sub_16EA8(v4 + 472, v5);
  }
  else
  {
    v9 = *(_DWORD *)(v4 + 40);
    if ( v9 )
    {
      v10 = 0;
      do
      {
        v11 = *(_DWORD *)(v4 + 36);
        v12 = (const char **)sub_17C58(*(_DWORD *)(v11 + 4 * v10));
        if ( !strcmp(s1, *v12) )
          sub_1A344(*(_DWORD *)(v11 + 4 * v10), v5);
        ++v10;
      }
      while ( v9 != v10 );
    }
  }
  return android::String8::~String8((android::String8 *)&s1);
}

//----- (00022BA0) --------------------------------------------------------
int __fastcall sub_22BA0(int a1, int a2, _DWORD *a3)
{
  int v3; // r8@1
  _DWORD *v4; // r5@1
  int v5; // r6@1
  int v6; // r5@3
  int v7; // r6@4
  int v8; // r7@4
  int v9; // r4@5
  int *v10; // r0@7
  const char **v11; // r0@8
  int v13; // [sp+0h] [bp-20h]@2
  char *s1; // [sp+4h] [bp-1Ch]@1

  v3 = a1;
  v4 = a3;
  v5 = a2;
  android::String8::String8((android::String8 *)&s1);
  if ( *v4 < *(_DWORD *)(v5 + 8) )
  {
    android::String8::String8((android::String8 *)&v13, (const android::String16 *)(*(_DWORD *)(v5 + 4) + 4 * *v4));
    android::String8::setTo((android::String8 *)&s1, (const android::String8 *)&v13);
    android::String8::~String8((android::String8 *)&v13);
    ++*v4;
  }
  v6 = *(_DWORD *)(v3 + 40);
  if ( v6 )
  {
    v7 = 0;
    v8 = 0;
    while ( 1 )
    {
      v9 = *(_DWORD *)(v3 + 36);
      if ( s1 )
      {
        if ( *((_DWORD *)s1 - 3) == 1 )
          break;
      }
      v11 = (const char **)sub_17C58(*(_DWORD *)(v9 + v7));
      if ( !strcmp(s1, *v11) )
      {
        v10 = (int *)(v9 + 4 * v8);
        goto LABEL_10;
      }
LABEL_11:
      v7 += 4;
      --v6;
      ++v8;
      if ( !v6 )
        goto LABEL_12;
    }
    v10 = (int *)(v9 + v7);
LABEL_10:
    sub_1A34C(*v10);
    goto LABEL_11;
  }
LABEL_12:
  sub_16D00(v3 + 472);
  return android::String8::~String8((android::String8 *)&s1);
}

//----- (00022C38) --------------------------------------------------------
int __fastcall sub_22C38(int a1, android::String8 *a2)
{
  int v2; // r8@1
  android::String8 *v3; // r9@1
  __int64 *v8; // r4@1
  __int64 *v9; // r5@1
  signed int v10; // r6@1
  __int64 v11; // r10@2
  __int64 v15; // r6@3

  v2 = a1;
  v3 = a2;
  android::String8::appendFormat(a2, "Static screen stats:\n");
  __asm { VLDR            D9, =1.0e9 }
  v8 = (__int64 *)(v2 + 5240);
  v9 = (__int64 *)(v2 + 5304);
  v10 = 1;
  __asm { VLDR            S16, =100.0 }
  do
  {
    v11 = *v8;
    _R0 = j___floatdidf(*v8);
    __asm
    {
      VMOV            D16, R0, R1
      VDIV.F64        D10, D16, D9
    }
    _R0 = j___floatdisf(v11);
    __asm
    {
      VMOV            S0, R0
      VMUL.F32        S22, S0, S16
    }
    _R0 = j___floatdisf(*v9);
    __asm
    {
      VMOV            S0, R0
      VDIV.F32        S0, S22, S0
      VCVT.F32.F64    S2, D10
      VCVT.F64.F32    D17, S2
      VCVT.F64.F32    D16, S0
      VSTR            D17, [SP,#0x58+var_58]
      VSTR            D16, [SP,#0x58+var_50]
    }
    android::String8::appendFormat(v3, "  < %zd frames: %.3f s (%.1f%%)\n", v10++);
    ++v8;
  }
  while ( v10 != 8 );
  v15 = *(_QWORD *)(v2 + 5296);
  _R0 = j___floatdidf(*(_QWORD *)(v2 + 5296));
  __asm
  {
    VMOV            D16, R0, R1
    VDIV.F64        D9, D16, D9
  }
  _R0 = j___floatdisf(v15);
  __asm
  {
    VMOV            S0, R0
    VMUL.F32        S16, S0, S16
  }
  _R0 = j___floatdisf(*v9);
  __asm
  {
    VMOV            S0, R0
    VDIV.F32        S0, S16, S0
    VCVT.F32.F64    S2, D9
    VCVT.F64.F32    D17, S2
    VCVT.F64.F32    D16, S0
    VSTR            D17, [SP,#0x58+var_58]
    VSTR            D16, [SP,#0x58+var_50]
  }
  return android::String8::appendFormat(v3, "  %zd+ frames: %.3f s (%.1f%%)\n", 7);
}

//----- (00022D60) --------------------------------------------------------
unsigned int **__fastcall sub_22D60(int a1, int a2, _DWORD *a3, android::String8 *a4)
{
  _DWORD *v4; // r6@1
  int v5; // r10@1
  int v6; // r4@1
  android::String8 *v7; // r9@1
  int v8; // r5@2
  int v9; // r0@2
  int v10; // r1@3
  int v11; // r3@5
  int v12; // r7@6
  signed int v13; // r11@7
  __int64 v14; // r0@9
  __int64 v15; // r6@9
  int v16; // r4@9
  unsigned int v17; // r5@9
  unsigned int v18; // r8@9
  int v19; // r0@9
  int v20; // r4@11
  android::String8 *v21; // r1@14
  android::String8 *v22; // r1@14
  int v23; // r4@16
  int v24; // r5@20
  int v25; // r8@21
  int v26; // r7@24
  int v27; // r4@26
  int v28; // r5@27
  android::String8 *v29; // r0@28
  int v30; // r4@34
  int v31; // r5@35
  android::String8 *v32; // r0@35
  int v33; // r3@35
  unsigned int v34; // r7@43
  unsigned int *v35; // r0@44
  unsigned int v36; // r1@46
  int v37; // r0@47
  int v38; // r11@54
  int v45; // r0@56
  int v46; // r0@58
  int v47; // r7@58
  int v48; // r6@58
  _BOOL4 v49; // r0@58
  __int64 v50; // r4@58
  __int64 v51; // ST38_8@58
  int v52; // ST40_4@58
  __int64 v53; // r0@58
  int v61; // ST28_4@58
  const char *v66; // r7@66
  const char *v67; // r3@69
  android::GraphicBufferAllocator *v68; // r0@76
  int v70; // [sp+2Ch] [bp-94h]@10
  __int64 v71; // [sp+30h] [bp-90h]@10
  int v72; // [sp+3Ch] [bp-84h]@10
  int v73; // [sp+4Ch] [bp-74h]@54
  unsigned int *v74; // [sp+50h] [bp-70h]@44
  char v75; // [sp+54h] [bp-6Ch]@19
  unsigned __int8 v76; // [sp+58h] [bp-68h]@9
  int v77; // [sp+5Ch] [bp-64h]@2

  v4 = a3;
  v5 = a1;
  v6 = *a3;
  v7 = a4;
  if ( *a3 >= *(_DWORD *)(a2 + 8) )
    goto LABEL_79;
  v8 = *(_DWORD *)(a2 + 4);
  android::String16::String16((android::String16 *)&v77, "--color");
  v9 = *(_DWORD *)(v8 + 4 * v6);
  if ( v9 )
    v10 = (*(_DWORD *)(v9 - 12) >> 1) - 1;
  if ( v77 )
    v11 = (*(_DWORD *)(v77 - 12) >> 1) - 1;
  v12 = strzcmp16();
  android::String16::~String16((android::String16 *)&v77);
  if ( v12 )
  {
LABEL_79:
    v13 = 0;
  }
  else
  {
    v13 = 1;
    ++*v4;
  }
  v76 = v13;
  LODWORD(v14) = systemTime(1);
  v15 = v14;
  v16 = j___floatdidf(v14 - *(_QWORD *)(v5 + 400));
  v17 = *(_DWORD *)(v5 + 416);
  v18 = *(_DWORD *)(v5 + 420);
  v19 = j___floatdidf(v15 - __PAIR__(v18, v17));
  if ( v13 )
  {
    v70 = v16;
    v72 = v19;
    HIDWORD(v71) = v17;
    android::String8::append(v7, "\x1B[1m");
    android::String8::append(v7, "Build configuration:");
    if ( v76 )
    {
      android::String8::append(v7, "\x1B[0m");
      v20 = v76;
      goto LABEL_14;
    }
  }
  else
  {
    v72 = v19;
    v70 = v16;
    HIDWORD(v71) = v17;
    android::String8::append(v7, "Build configuration:");
  }
  v20 = 0;
LABEL_14:
  android::String8::append(v7, " [sf]");
  android::appendUiConfigString(v7, v21);
  android::appendGuiConfigString(v7, v22);
  android::String8::append(v7, "\n");
  if ( v20 )
  {
    android::String8::append(v7, "\x1B[1m");
    android::String8::append(v7, "Sync configuration: ");
    if ( v76 )
    {
      android::String8::append(v7, "\x1B[0m");
      v23 = v76;
      goto LABEL_19;
    }
  }
  else
  {
    android::String8::append(v7, "Sync configuration: ");
  }
  v23 = 0;
LABEL_19:
  sub_234F0();
  android::SyncFeatures::toString((android::SyncFeatures *)&v75);
  android::String8::append(v7, (const android::String8 *)&v75);
  android::String8::~String8((android::String8 *)&v75);
  android::String8::append(v7, "\n");
  if ( v23 )
  {
    LODWORD(v71) = v18;
    android::String8::append(v7, "\x1B[1m");
    v24 = v76;
    android::String8::append(v7, "DispSync configuration: ");
    if ( v24 )
    {
      android::String8::append(v7, "\x1B[0m");
      v25 = v76;
      goto LABEL_24;
    }
  }
  else
  {
    LODWORD(v71) = v18;
    android::String8::append(v7, "DispSync configuration: ");
  }
  v25 = 0;
LABEL_24:
  sub_295A0(*(_DWORD *)(v5 + 196), 0);
  android::String8::appendFormat(
    v7,
    "app phase %lld ns, sf phase %lld ns, present offset %d ns (refresh %lld ns)",
    7500000,
    0,
    5000000,
    0,
    0);
  android::String8::append(v7, "\n");
  android::String8::append(v7, "\n");
  sub_22C38(v5, v7);
  android::String8::append(v7, "\n");
  v26 = *(_DWORD *)(v5 + 40);
  if ( v25 )
    android::String8::append(v7, "\x1B[1m");
  v27 = 0;
  if ( v26 )
  {
    v28 = 0;
    do
    {
      v29 = (android::String8 *)sub_17C58(*(_DWORD *)(*(_DWORD *)(v5 + 36) + 4 * v28));
      if ( android::String8::find(v29, "hwSingleMode_window", 0) != -1 )
        ++v27;
      ++v28;
    }
    while ( v26 != v28 );
  }
  android::String8::appendFormat(v7, "Visible layers (count = %zu)\n", v26 - v27);
  if ( v76 )
    android::String8::append(v7, "\x1B[0m");
  if ( v26 )
  {
    v30 = 0;
    do
    {
      v31 = *(_DWORD *)(v5 + 36);
      v32 = (android::String8 *)sub_17C58(*(_DWORD *)(v31 + 4 * v30));
      if ( android::String8::find(v32, "hwSingleMode_window", 0) == -1 )
        sub_1A09C(*(_DWORD *)(v31 + 4 * v30), v7, &v76, v33);
      ++v30;
    }
    while ( v26 != v30 );
  }
  if ( v76 )
    android::String8::append(v7, "\x1B[1m");
  android::String8::appendFormat(v7, "Displays (%zu entries)\n", *(_DWORD *)(v5 + 364));
  if ( v76 )
    android::String8::append(v7, "\x1B[0m");
  if ( *(_DWORD *)(v5 + 364) )
  {
    v34 = 0;
    do
    {
      v74 = *(unsigned int **)(*(_DWORD *)(v5 + 360) + 12 * v34 + 8);
      v35 = v74;
      if ( v74 )
      {
        __dmb();
        do
          v36 = __ldrex(v35);
        while ( __strex(v36 + 1, v35) );
        v37 = (int)v74;
      }
      else
      {
        v37 = 0;
      }
      sub_1369C(v37, v7);
      sub_1BF7C(&v74);
      ++v34;
    }
    while ( v34 < *(_DWORD *)(v5 + 364) );
  }
  if ( v76 )
    android::String8::append(v7, "\x1B[1m");
  android::String8::append(v7, "SurfaceFlinger global state:\n");
  if ( v76 )
    android::String8::append(v7, "\x1B[0m");
  v38 = *(_DWORD *)(v5 + 196);
  sub_17760((unsigned int **)&v73, v5);
  if ( v76 )
    android::String8::append(v7, "\x1B[1m");
  _R1 = v70;
  __asm { VMOV            D9, R1, R0 }
  _R0 = v72;
  __asm { VMOV            D8, R0, R1 }
  v45 = eglQueryStringImplementationANDROID(*(void **)(v5 + 236), 12372);
  android::String8::appendFormat(v7, "EGL implementation : %s\n", v45);
  if ( v76 )
    android::String8::append(v7, "\x1B[0m");
  v46 = eglQueryStringImplementationANDROID(*(void **)(v5 + 236), 12373);
  android::String8::appendFormat(v7, "%s\n", v46);
  (*(void (**)(void))(**(_DWORD **)(v5 + 200) + 16))();
  v47 = v73;
  android::Region::dump(v73 + 44, v7, "undefinedRegion", 0);
  v48 = *(_DWORD *)(v47 + 164);
  v49 = sub_135BC(v47);
  android::String8::appendFormat(v7, "  orientation=%d, isDisplayOn=%d\n", v48, v49);
  v50 = *(_QWORD *)(v5 + 424);
  v51 = *(_QWORD *)(v5 + 408);
  v52 = *(_DWORD *)(v5 + 136);
  v53 = sub_295A0(v38, 0);
  _R6 = j___floatdidf(v53);
  _R0 = j___floatdidf(v50);
  __asm
  {
    VMOV            D12, R0, R1
    VLDR            D10, =1.0e9
    VLDR            D11, =1000.0
    VMOV            D13, R6, R7
  }
  _R0 = j___floatdidf(v51);
  __asm
  {
    VMOV            D16, R0, R1
    VDIV.F64        D10, D10, D13
    VDIV.F64        D12, D12, D11
    VDIV.F64        D13, D16, D11
  }
  _R0 = sub_29570(v38, 0);
  __asm
  {
    VMOV            S0, R0
    VCVT.F64.F32    D14, S0
  }
  _R0 = sub_29588(v38, 0);
  __asm
  {
    VMOV            S0, R0
    VCVT.F64.F32    D16, S0
    VSTR            D14, [SP,#0xC0+var_A8]
    VMOV            R2, R3, D13
    VSTR            D16, [SP,#0xC0+var_A0]
  }
  v61 = *(_BYTE *)(v5 + 216) ^ 1;
  __asm
  {
    VSTR            D12, [SP,#0xC0+var_C0]
    VSTR            D10, [SP,#0xC0+var_B0]
  }
  android::String8::appendFormat(
    v7,
    "  last eglSwapBuffers() time: %f us\n"
    "  last transaction time     : %f us\n"
    "  transaction-flags         : %08x\n"
    "  refresh-rate              : %f fps\n"
    "  x-dpi                     : %f\n"
    "  y-dpi                     : %f\n"
    "  gpu_to_cpu_unsupported    : %d\n",
    _R2);
  __asm
  {
    VDIV.F64        D16, D9, D11
    VMOV.F64        D9, #0.5
    VMOV.I32        D9, #0
  }
  if ( _ZF )
    __asm { VMOVEQ.F64      D16, D9 }
  __asm { VMOV            R2, R3, D16 }
  android::String8::appendFormat(v7, "  eglSwapBuffers time: %f us\n", _R2);
  __asm { VDIV.F64        D16, D8, D11 }
  if ( !v71 )
    __asm { VMOVEQ.F64      D16, D9 }
  __asm { VMOV            R2, R3, D16 }
  android::String8::appendFormat(v7, "  transaction time: %f us\n", _R2);
  sub_15C00(*(_DWORD *)(v5 + 220), v7);
  if ( v76 )
    android::String8::append(v7, "\x1B[1m");
  android::String8::append(v7, "h/w composer state:\n");
  if ( v76 )
    android::String8::append(v7, "\x1B[0m");
  v66 = "not present";
  if ( !sub_29228(v38) )
    v66 = "present";
  if ( *(_DWORD *)(v5 + 388) )
  {
    v67 = "disabled";
  }
  else if ( *(_DWORD *)(v5 + 380) )
  {
    v67 = "disabled";
  }
  else if ( *(_BYTE *)(v5 + 5144) )
  {
    v67 = "disabled";
  }
  else
  {
    v67 = "enabled";
    if ( *(_BYTE *)(v5 + 5220) )
      v67 = "disabled";
  }
  android::String8::appendFormat(v7, "  h/w composer %s and %s\n", v66, v67);
  sub_2AB78(v38, v7);
  v68 = sub_26034();
  android::GraphicBufferAllocator::dump(v68, v7);
  return sub_1BF7C((unsigned int **)&v73);
}
// 1053C: using guessed type int strzcmp16(void);
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10CB0: using guessed type int __fastcall android::Region::dump(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (000234E0) --------------------------------------------------------
int __fastcall sub_234E0(int a1, int a2, int a3)
{
  sub_227B0(a1 - 4, a2, a3);
  return 0;
}

//----- (000234F0) --------------------------------------------------------
android::SyncFeatures *sub_234F0()
{
  android::SyncFeatures *v0; // r4@1

  pthread_mutex_lock(0);
  v0 = (android::SyncFeatures *)::v0;
  if ( !::v0 )
  {
    v0 = (android::SyncFeatures *)operator new(8u);
    android::SyncFeatures::SyncFeatures(v0);
    ::v0 = v0;
  }
  pthread_mutex_unlock(0);
  return v0;
}

//----- (0002353C) --------------------------------------------------------
int __fastcall sub_2353C(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  unsigned int v4; // r0@1
  int v5; // r1@2
  unsigned int v6; // r2@2
  int v7; // r0@9
  unsigned int **v8; // r0@10
  unsigned int *v9; // r0@12
  unsigned int v10; // r1@14
  int v11; // r0@15
  int v12; // r4@17
  unsigned int *v14; // [sp+0h] [bp-20h]@12
  char *v15; // [sp+4h] [bp-1Ch]@7
  int v16; // [sp+8h] [bp-18h]@1
  android::RefBase::weakref_type *v17; // [sp+Ch] [bp-14h]@18

  v2 = a1;
  v16 = 0;
  v3 = a2;
  v4 = *(_DWORD *)(a1 + 364);
  if ( !v4 )
    goto LABEL_7;
  v5 = *(_DWORD *)(v2 + 360);
  v6 = 0;
  while ( *(_DWORD *)(*(_DWORD *)(v5 + 8) + 76) != v3 )
  {
    ++v6;
    v5 += 12;
    if ( v6 >= v4 )
      goto LABEL_7;
  }
  sub_2361C(&v16, v5);
  if ( !v16 )
  {
LABEL_7:
    _android_log_print(6, "SurfaceFlinger", "getLayerSortedByZForHwcDisplay: invalid hwc display id %d", v3);
    (*(void (__fastcall **)(char **, int, _DWORD, _DWORD))(*(_DWORD *)v2 + 36))(
      &v15,
      v2,
      0,
      *(_DWORD *)(*(_DWORD *)v2 + 36));
    sub_23644(&v16, &v15);
    if ( v15 )
      android::RefBase::decStrong((android::RefBase *)&v15[*(_DWORD *)(*(_DWORD *)v15 - 12)], &v15);
  }
  v7 = sub_1A49C((android::SortedVectorImpl *)(v2 + 356), (int)&v16);
  if ( v7 < 0 )
    v8 = (unsigned int **)(v2 + 376);
  else
    v8 = (unsigned int **)(*(_DWORD *)(v2 + 360) + 12 * v7 + 8);
  v9 = *v8;
  v14 = v9;
  if ( v9 )
  {
    __dmb();
    do
      v10 = __ldrex(v9);
    while ( __strex(v10 + 1, v9) );
    v11 = (int)v14;
  }
  else
  {
    v11 = 0;
  }
  v12 = sub_13540(v11);
  sub_1BF7C(&v14);
  if ( v16 )
    android::RefBase::weakref_type::decWeak(v17, &v16);
  return v12;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002361C) --------------------------------------------------------
void *__fastcall sub_2361C(void *a1, int a2)
{
  int v2; // r6@1
  void *v3; // r4@1
  int v4; // r5@1
  void *result; // r0@5

  v2 = *(_DWORD *)a2;
  v3 = a1;
  v4 = *(_DWORD *)(a2 + 4);
  if ( *(_DWORD *)a2 )
    android::RefBase::weakref_type::incWeak(*(android::RefBase::weakref_type **)(a2 + 4), a1);
  if ( *(_DWORD *)v3 )
    android::RefBase::weakref_type::decWeak(*((android::RefBase::weakref_type **)v3 + 1), v3);
  result = v3;
  *(_DWORD *)v3 = v2;
  *((_DWORD *)v3 + 1) = v4;
  return result;
}

//----- (00023644) --------------------------------------------------------
void *__fastcall sub_23644(void *a1, char **a2)
{
  char **v2; // r6@1
  void *v3; // r4@1
  char *v4; // r7@1
  int v5; // r0@2
  int v6; // r5@2
  void *result; // r0@6

  v2 = a2;
  v3 = a1;
  v4 = *a2;
  if ( *a2 )
  {
    v5 = android::RefBase::createWeak((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], a1);
    v4 = *v2;
    v6 = v5;
  }
  else
  {
    v6 = 0;
  }
  if ( *(_DWORD *)v3 )
    android::RefBase::weakref_type::decWeak(*((android::RefBase::weakref_type **)v3 + 1), v3);
  result = v3;
  *(_DWORD *)v3 = v4;
  *((_DWORD *)v3 + 1) = v6;
  return result;
}

//----- (00023704) --------------------------------------------------------
signed int __fastcall sub_23704(int a1)
{
  int v1; // r1@1
  signed int result; // r0@1

  v1 = *(_DWORD *)(a1 + 440);
  result = 0;
  if ( v1 > 0 )
    result = 1;
  return result;
}

//----- (00023714) --------------------------------------------------------
signed int __fastcall sub_23714(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  signed int v5; // r7@1
  android::Parcel *v6; // r10@1
  const android::Parcel *v7; // r5@1
  int v8; // r8@1
  android::IPCThreadState *v9; // r0@2
  android::IPCThreadState *v10; // r4@3
  const android::String16 *v11; // r9@3
  unsigned int v12; // r3@3
  int v13; // r4@3
  signed int v14; // r0@6
  unsigned int v15; // r1@6
  char *v16; // r2@6
  const char *v17; // r1@7
  const char *v18; // r2@7
  const android::String16 *v19; // r3@7
  android::IPCThreadState *v20; // r4@9
  unsigned int v21; // r3@9
  int v22; // r4@9
  int v23; // r0@11
  int v24; // r4@11
  int v25; // r7@17
  signed int v26; // r0@18
  unsigned int *v27; // r0@21
  unsigned int v28; // r1@22
  int v29; // r5@25
  int v30; // r0@27
  unsigned int **v31; // r0@28
  unsigned int *v32; // r0@31
  unsigned int v33; // r1@33
  android::IPCThreadState *v34; // r4@37
  const android::String16 *v35; // r5@37
  unsigned int *v36; // r0@41
  unsigned int v37; // r1@42
  unsigned int *v38; // r0@44
  unsigned int v39; // r1@45
  unsigned int *v40; // r0@49
  unsigned int v41; // r1@50
  unsigned int *v42; // r0@52
  unsigned int v43; // r1@53
  int v44; // r0@56
  int v52; // r0@57
  int v53; // r1@59
  int v54; // r4@59
  int v55; // r0@59
  int v56; // r0@60
  char v57; // r1@60
  int v58; // r6@63
  int v59; // r9@63
  signed int v60; // r7@64
  _DWORD *v61; // r4@64
  int v62; // r0@68
  int v63; // r0@69
  int v64; // r0@72
  int v65; // r1@75
  int v70; // r2@77
  int v71; // r3@77
  int v72; // r7@77
  int v73; // r6@77
  int v74; // r1@77
  int v75; // r2@77
  int v76; // r3@77
  int v77; // r7@77
  int v78; // r6@77
  int v79; // r0@77
  int v80; // r1@77
  int v81; // r2@77
  unsigned int *v82; // r0@78
  unsigned int v83; // r1@79
  char v84; // r0@86
  unsigned int *v85; // r0@88
  unsigned int v86; // r1@89
  int v88; // [sp+0h] [bp-78h]@6
  char *v89; // [sp+4h] [bp-74h]@25
  android::RefBase::weakref_type *v90; // [sp+8h] [bp-70h]@26
  unsigned int *v91; // [sp+Ch] [bp-6Ch]@31
  int v92[4]; // [sp+10h] [bp-68h]@76
  int v93; // [sp+14h] [bp-64h]@77
  int v94; // [sp+18h] [bp-60h]@77
  int v95; // [sp+1Ch] [bp-5Ch]@77
  int v96; // [sp+20h] [bp-58h]@77
  int v97; // [sp+24h] [bp-54h]@77
  char v98; // [sp+28h] [bp-50h]@77
  int v99; // [sp+2Ch] [bp-4Ch]@77
  int v100; // [sp+30h] [bp-48h]@77
  int v101; // [sp+34h] [bp-44h]@77
  int v102; // [sp+38h] [bp-40h]@77
  int v103; // [sp+3Ch] [bp-3Ch]@77
  int v104; // [sp+40h] [bp-38h]@77
  int v105; // [sp+44h] [bp-34h]@77
  int v106; // [sp+48h] [bp-30h]@77
  int v107; // [sp+4Ch] [bp-2Ch]@77
  int v108; // [sp+54h] [bp-24h]@56

  v5 = a2;
  v6 = a4;
  v7 = a3;
  v8 = a1;
  if ( a2 <= 0x11 )
  {
    v9 = (android::IPCThreadState *)(1 << a2);
    if ( (1 << a2) & 0x38126 )
    {
      v10 = (android::IPCThreadState *)android::IPCThreadState::self(v9);
      v11 = (const android::String16 *)android::IPCThreadState::getCallingPid(v10);
      v13 = android::IPCThreadState::getCallingUid(v10);
      if ( v13 != 1000
        && v13 != 1003
        && !android::PermissionCache::checkPermission((android::PermissionCache *)&unk_4501C, v11, v13, v12) )
      {
        v14 = 0xFFFF5E67;
        v15 = 0xFFFF4436;
        v16 = (char *)&GLOBAL_OFFSET_TABLE_;
        v88 = v13;
LABEL_7:
        v17 = &v16[v15];
        v18 = &v16[v14];
        v19 = v11;
LABEL_38:
        _android_log_print(6, v17, v18, v19, v88);
        return -1;
      }
    }
    else if ( a2 == 14 )
    {
      v20 = (android::IPCThreadState *)android::IPCThreadState::self(v9);
      v11 = (const android::String16 *)android::IPCThreadState::getCallingPid(v20);
      v22 = android::IPCThreadState::getCallingUid(v20);
      if ( v22 != 1003
        && !android::PermissionCache::checkPermission((android::PermissionCache *)&unk_45020, v11, v22, v21) )
      {
        v14 = -41307;
        v15 = 0xFFFF4436;
        v16 = (char *)&GLOBAL_OFFSET_TABLE_;
        v88 = v22;
        goto LABEL_7;
      }
    }
  }
  v23 = android::BnSurfaceComposer::onTransact((android::BnSurfaceComposer *)v8, v5, v7, v6, a5);
  v24 = v23;
  if ( v23 == -74 || v23 == -1 )
  {
    if ( android::Parcel::checkInterface(v7, (android::IBinder *)(v8 + 4)) != 1 )
      return -1;
    if ( !(*(_DWORD (__cdecl **)(android::RefBase *))(*(_DWORD *)(v8 + 16) + 24))((android::RefBase *)(v8 + 16)) )
      return 0;
    if ( !android::PermissionCache::checkCallingPermission(
            (android::PermissionCache *)&unk_45018,
            (const android::String16 *)&GLOBAL_OFFSET_TABLE_) )
    {
      v34 = (android::IPCThreadState *)android::IPCThreadState::self(0);
      v35 = (const android::String16 *)android::IPCThreadState::getCallingPid(v34);
      v88 = android::IPCThreadState::getCallingUid(v34);
      v19 = v35;
      v18 = "Permission Denial: can't access SurfaceFlinger pid=%d, uid=%d";
      v17 = "SurfaceFlinger";
      goto LABEL_38;
    }
    if ( v5 <= 4000 )
    {
      v25 = 0;
      switch ( 0 )
      {
        case 1002:
          v26 = android::Parcel::readInt32(v7);
          if ( !v26 )
          {
            v26 = 0;
            if ( !*(_DWORD *)(v8 + 380) )
              v26 = 1;
          }
          *(_DWORD *)(v8 + 380) = v26;
          *(_BYTE *)(v8 + 353) = 1;
          v27 = (unsigned int *)(v8 + 192);
          __dmb();
          do
            v28 = __ldrex(v27);
          while ( __strex(v28 | 1, v27) );
          goto LABEL_90;
        default:
          return v24;
        case 1004:
          v36 = (unsigned int *)(v8 + 192);
          __dmb();
          do
            v37 = __ldrex(v36);
          while ( __strex(v37 | 1, v36) );
          goto LABEL_90;
        case 1005:
          v38 = (unsigned int *)(v8 + 136);
          __dmb();
          do
            v39 = __ldrex(v38);
          while ( __strex(v39 | 7, v38) );
          if ( !(v39 & 7) )
            goto LABEL_90;
          return 0;
        case 1006:
          sub_1B4B8(v8 + 444);
          return 0;
        case 1008:
          *(_DWORD *)(v8 + 388) = android::Parcel::readInt32(v7) != 0;
          *(_BYTE *)(v8 + 353) = 1;
          v40 = (unsigned int *)(v8 + 192);
          __dmb();
          do
            v41 = __ldrex(v40);
          while ( __strex(v41 | 1, v40) );
          goto LABEL_90;
        case 1009:
          *(_DWORD *)(v8 + 392) = android::Parcel::readInt32(v7) != 0;
          *(_BYTE *)(v8 + 353) = 1;
          v42 = (unsigned int *)(v8 + 192);
          __dmb();
          do
            v43 = __ldrex(v42);
          while ( __strex(v43 | 1, v42) );
          goto LABEL_90;
        case 1010:
          v25 = 0;
          android::Parcel::writeInt32(v6, 0);
          android::Parcel::writeInt32(v6, 0);
          android::Parcel::writeInt32(v6, *(_DWORD *)(v8 + 380));
          android::Parcel::writeInt32(v6, 0);
          android::Parcel::writeInt32(v6, *(_DWORD *)(v8 + 388));
          return v25;
        case 1013:
          pthread_mutex_lock((pthread_mutex_t *)(v8 + 28));
          sub_17760((unsigned int **)&v108, v8);
          v44 = sub_1330C(v108);
          android::Parcel::writeInt32(v6, v44);
          sub_1BF7C((unsigned int **)&v108);
          pthread_mutex_unlock((pthread_mutex_t *)(v8 + 28));
          return 0;
        case 1014:
          _R5 = android::Parcel::readInt32(v7);
          _R0 = 1717986919;
          __asm { SMMUL.W         R0, R5, R0 }
          v52 = _R5 - 10 * (((signed int)_R0 >> 2) + (_R0 >> 31));
          if ( v52 == 1 )
          {
            v53 = 3;
            v54 = v8 + 5068;
            v55 = v8 + 5068;
            goto LABEL_84;
          }
          if ( v52 == 2 )
          {
            v53 = 4;
            v54 = v8 + 5068;
            v55 = v8 + 5068;
LABEL_84:
            sub_2D0A8(v55, v53);
            goto LABEL_86;
          }
          if ( v52 == 3 )
          {
            v53 = 5;
            v54 = v8 + 5068;
            v55 = v8 + 5068;
            goto LABEL_84;
          }
          v54 = v8 + 5068;
LABEL_86:
          sub_2D0B8(v54, _R5 >= 10);
          v84 = 0;
          if ( _R5 > 0 )
            v84 = 1;
          *(_BYTE *)(v8 + 5144) = v84;
          *(_BYTE *)(v8 + 353) = 1;
          v85 = (unsigned int *)(v8 + 192);
          __dmb();
          do
            v86 = __ldrex(v85);
          while ( __strex(v86 | 1, v85) );
LABEL_90:
          sub_1B4B0(v8 + 444);
          break;
        case 1015:
          v56 = android::Parcel::readInt32(v7);
          v57 = v56;
          if ( v56 )
            v57 = 1;
          *(_BYTE *)(v8 + 5220) = v57;
          if ( v56 )
          {
            v58 = 0;
            v59 = v8 + 5156;
            do
            {
              v60 = 4;
              v61 = (_DWORD *)v59;
              do
              {
                *v61 = android::Parcel::readFloat(v7);
                ++v61;
                --v60;
              }
              while ( v60 );
              ++v58;
              v59 += 16;
            }
            while ( v58 != 4 );
          }
          else
          {
            __asm { VMOV.I32        Q8, #0 }
            v65 = 0;
            do
            {
              _R2 = &v92[v65];
              v65 += 4;
              __asm { VST1.64         {D16-D17}, [R2] }
            }
            while ( v65 != 16 );
            _R2 = (unsigned int)v92 | 4;
            v92[0] = 1065353216;
            __asm { VST1.32         {D16-D17}, [R2] }
            _R2 = &v98;
            _R0 = &v103;
            v97 = 1065353216;
            __asm { VST1.64         {D16-D17}, [R2] }
            v102 = 1065353216;
            __asm { VST1.32         {D16-D17}, [R0] }
            v107 = 1065353216;
            v70 = v93;
            v71 = v94;
            v72 = v95;
            v73 = v96;
            *(_DWORD *)(v8 + 5176) = 1065353216;
            *(_DWORD *)(v8 + 5172) = v73;
            *(_DWORD *)(v8 + 5168) = v72;
            *(_DWORD *)(v8 + 5164) = v71;
            *(_DWORD *)(v8 + 5160) = v70;
            *(_DWORD *)(v8 + 5156) = 1065353216;
            v74 = *(_DWORD *)&v98;
            v75 = v99;
            v76 = v100;
            v77 = v101;
            v78 = v102;
            *(_DWORD *)(v8 + 5200) = v103;
            *(_DWORD *)(v8 + 5196) = v78;
            *(_DWORD *)(v8 + 5192) = v77;
            *(_DWORD *)(v8 + 5188) = v76;
            *(_DWORD *)(v8 + 5184) = v75;
            *(_DWORD *)(v8 + 5180) = v74;
            v79 = v104;
            v80 = v105;
            v81 = v106;
            *(_DWORD *)(v8 + 5216) = v107;
            *(_DWORD *)(v8 + 5212) = v81;
            *(_DWORD *)(v8 + 5208) = v80;
            *(_DWORD *)(v8 + 5204) = v79;
          }
          *(_BYTE *)(v8 + 353) = 1;
          v82 = (unsigned int *)(v8 + 192);
          __dmb();
          do
            v83 = __ldrex(v82);
          while ( __strex(v83 | 1, v82) );
          goto LABEL_90;
        case 1016:
          v62 = android::Parcel::readInt32(v7);
          sub_14190(v8 + 4624, v62);
          return 0;
        case 1017:
          v63 = android::Parcel::readInt32(v7);
          if ( v63 )
            LOBYTE(v63) = 1;
          *(_BYTE *)(v8 + 433) = v63;
          return 0;
        case 1018:
          android::Parcel::readInt32(v7);
          v64 = *(_DWORD *)(v8 + 220);
          goto LABEL_74;
        case 1019:
          android::Parcel::readInt32(v7);
          v64 = *(_DWORD *)(v8 + 224);
LABEL_74:
          sub_15430(v64);
          return 0;
        case 1000:
        case 1001:
          return v25;
      }
      return 0;
    }
    if ( v5 == 4001 )
    {
      v29 = android::Parcel::readInt32(v7);
      v89 = *(char **)(v8 + 240);
      if ( v89 )
        v90 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                                  (android::RefBase *)&v89[*(_DWORD *)(*(_DWORD *)v89 - 12)],
                                                  &v89);
      v30 = sub_1A49C((android::SortedVectorImpl *)(v8 + 356), (int)&v89);
      if ( v30 < 0 )
        v31 = (unsigned int **)(v8 + 376);
      else
        v31 = (unsigned int **)(*(_DWORD *)(v8 + 360) + 12 * v30 + 8);
      v32 = *v31;
      v91 = v32;
      if ( v32 )
      {
        __dmb();
        do
          v33 = __ldrex(v32);
        while ( __strex(v33 + 1, v32) );
      }
      if ( v89 )
        android::RefBase::weakref_type::decWeak(v90, &v89);
      sub_22598(v8, (int *)&v91, v29);
      sub_1BF7C(&v91);
      return 0;
    }
  }
  return v24;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);
// 23714: using guessed type int var_68[4];

//----- (00023CCC) --------------------------------------------------------
signed int __fastcall sub_23CCC(int a1, char **a2, char **a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, char a12, unsigned int a13)
{
  char **v13; // r5@1
  int v14; // r6@1
  int v15; // r8@1
  char **v16; // r7@1
  char *v17; // r0@2
  int v18; // r4@3
  char *v19; // r0@8
  int v20; // r0@10
  unsigned int **v21; // r0@11
  int v22; // r4@12
  unsigned int *v23; // r0@14
  unsigned int v24; // r1@16
  unsigned int *v25; // r0@17
  unsigned int v26; // r1@19
  int v27; // r0@28
  int v28; // r0@30
  char *v29; // r0@30
  int v30; // r1@30
  int v31; // r7@30
  char *v32; // r0@32
  bool v33; // zf@32
  char *v34; // r0@34
  char v35; // r2@34
  int v37; // [sp+0h] [bp-58h]@30
  char *v38; // [sp+Ch] [bp-4Ch]@30
  char *v39; // [sp+10h] [bp-48h]@32
  char *v40; // [sp+14h] [bp-44h]@36
  char *v41; // [sp+18h] [bp-40h]@30
  char *v42; // [sp+1Ch] [bp-3Ch]@8
  android::RefBase::weakref_type *v43; // [sp+20h] [bp-38h]@9
  unsigned int *v44; // [sp+24h] [bp-34h]@14
  unsigned int *v45; // [sp+28h] [bp-30h]@17
  char *v46; // [sp+2Ch] [bp-2Ch]@3
  int v47; // [sp+30h] [bp-28h]@3

  v13 = a2;
  v14 = a1;
  v15 = a4;
  v16 = a3;
  if ( *a2 && (v17 = *a3) != 0 )
  {
    v46 = *a3;
    android::RefBase::incStrong((android::RefBase *)&v17[*(_DWORD *)(*(_DWORD *)v17 - 12)], &v46);
    android::IInterface::asBinder(&v47, &v46);
    v18 = (*(int (**)(void))(*(_DWORD *)v47 + 48))();
    if ( v47 )
      android::RefBase::decStrong((android::RefBase *)(v47 + *(_DWORD *)(*(_DWORD *)v47 - 12)), &v47);
    if ( v46 )
      android::RefBase::decStrong((android::RefBase *)&v46[*(_DWORD *)(*(_DWORD *)v46 - 12)], &v46);
    if ( !v18 )
    {
      pthread_mutex_lock((pthread_mutex_t *)(v14 + 28));
      v19 = *v13;
      v42 = *v13;
      if ( v42 )
        v43 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                                  (android::RefBase *)&v19[*(_DWORD *)(*(_DWORD *)v19 - 12)],
                                                  &v42);
      v20 = sub_1A49C((android::SortedVectorImpl *)(v14 + 356), (int)&v42);
      if ( v20 < 0 )
        v21 = (unsigned int **)(v14 + 376);
      else
        v21 = (unsigned int **)(*(_DWORD *)(v14 + 360) + 12 * v20 + 8);
      v23 = *v21;
      v44 = v23;
      if ( v23 )
      {
        __dmb();
        do
          v24 = __ldrex(v23);
        while ( __strex(v24 + 1, v23) );
        v25 = v44;
        v45 = v44;
        if ( v44 )
        {
          __dmb();
          do
            v26 = __ldrex(v25);
          while ( __strex(v26 + 1, v25) );
        }
      }
      else
      {
        v45 = 0;
      }
      sub_1BF7C(&v44);
      if ( v42 )
        android::RefBase::weakref_type::decWeak(v43, &v42);
      if ( sub_13544((int)v45) == 1 )
      {
        _android_log_print(5, "SurfaceFlinger", "FB is protected: PERMISSION_DENIED");
        sub_1BF7C(&v45);
        pthread_mutex_unlock((pthread_mutex_t *)(v14 + 28));
        return -1;
      }
      sub_1BF7C(&v45);
      pthread_mutex_unlock((pthread_mutex_t *)(v14 + 28));
    }
    if ( a13 >= 4 )
    {
      _android_log_print(6, "SurfaceFlinger", "Invalid rotation passed to captureScreen(): %d\n");
      v27 = 0;
    }
    else
    {
      v27 = dword_3D344[a13];
    }
    v37 = v27;
    sub_1B4A8(v14 + 444);
    v28 = operator new(0x40u);
    v29 = (char *)sub_23FB8(v28, v16);
    v30 = *(_DWORD *)v29;
    v41 = v29;
    android::RefBase::incStrong((android::RefBase *)&v29[*(_DWORD *)(v30 - 12)], &v41);
    v31 = operator new(0x50u);
    v38 = v41;
    if ( v41 )
      android::RefBase::incStrong((android::RefBase *)&v41[*(_DWORD *)(*(_DWORD *)v41 - 12)], &v38);
    android::IGraphicBufferProducer::asInterface(&v39, &v38);
    android::RefBase::RefBase((android::RefBase *)(v31 + 72));
    sub_1AE68((_DWORD *)v31, (int)off_3FAE4);
    *(_DWORD *)v31 = &off_425D8;
    *(_DWORD *)(v31 + 72) = &off_42604;
    *(_DWORD *)(v31 + 16) = v14;
    v32 = *v13;
    v33 = *v13 == 0;
    *(_DWORD *)(v31 + 20) = *v13;
    if ( !v33 )
      android::RefBase::incStrong((android::RefBase *)&v32[*(_DWORD *)(*(_DWORD *)v32 - 12)], (const void *)(v31 + 20));
    v34 = v39;
    v33 = v39 == 0;
    v35 = a12;
    *(_DWORD *)(v31 + 24) = v39;
    if ( !v33 )
    {
      android::RefBase::incStrong((android::RefBase *)&v34[*(_DWORD *)(*(_DWORD *)v34 - 12)], (const void *)(v31 + 24));
      v35 = a12;
    }
    v40 = (char *)v31;
    *(_DWORD *)(v31 + 28) = v15;
    *(_DWORD *)(v31 + 32) = a5;
    *(_DWORD *)(v31 + 36) = a6;
    *(_DWORD *)(v31 + 40) = a7;
    *(_DWORD *)(v31 + 44) = a8;
    *(_DWORD *)(v31 + 48) = a9;
    *(_DWORD *)(v31 + 52) = a10;
    *(_DWORD *)(v31 + 56) = a11;
    *(_BYTE *)(v31 + 60) = v35;
    *(_DWORD *)(v31 + 64) = v37;
    *(_DWORD *)(v31 + 68) = -1;
    android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)v31 - 12) + v31), &v40);
    if ( v39 )
      android::RefBase::decStrong((android::RefBase *)&v39[*(_DWORD *)(*(_DWORD *)v39 - 12)], &v39);
    if ( v38 )
      android::RefBase::decStrong((android::RefBase *)&v38[*(_DWORD *)(*(_DWORD *)v38 - 12)], &v38);
    v22 = sub_1B414(v14 + 444, &v40, 0, 0);
    if ( !v22 )
      v22 = sub_24044((int)v41);
    if ( v40 )
      android::RefBase::decStrong((android::RefBase *)&v40[*(_DWORD *)(*(_DWORD *)v40 - 12)], &v40);
    if ( v41 )
      android::RefBase::decStrong((android::RefBase *)&v41[*(_DWORD *)(*(_DWORD *)v41 - 12)], &v41);
  }
  else
  {
    v22 = -22;
  }
  return v22;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);
// 11028: using guessed type int __fastcall android::IGraphicBufferProducer::asInterface(_DWORD, _DWORD);
// 3FAE4: using guessed type void **[5];
// 425D8: using guessed type void *off_425D8;
// 42604: using guessed type void *off_42604;

//----- (00023FB8) --------------------------------------------------------
int __fastcall sub_23FB8(int a1, char **a2)
{
  int v2; // r4@1
  char **v3; // r5@1
  char *v4; // r0@1
  bool v5; // zf@1
  android::Looper *v6; // r0@3
  android::RefBase *v7; // r0@3
  int result; // r0@3

  v2 = a1;
  v3 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 56));
  android::BBinder::BBinder((android::BBinder *)v2);
  *(_DWORD *)v2 = &unk_423D8;
  *(_DWORD *)(v2 + 56) = &off_42454;
  *(_DWORD *)(v2 + 12) = &off_4242C;
  v4 = *v3;
  v5 = *v3 == 0;
  *(_DWORD *)(v2 + 16) = *v3;
  if ( !v5 )
    android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 16));
  v6 = (android::Looper *)operator new(0x70u);
  v7 = (android::RefBase *)android::Looper::Looper(v6, 1);
  *(_DWORD *)(v2 + 20) = v7;
  android::RefBase::incStrong(v7, (const void *)(v2 + 20));
  *(_WORD *)(v2 + 28) = 0;
  pthread_mutex_init((pthread_mutex_t *)(v2 + 32), 0);
  pthread_cond_init((pthread_cond_t *)(v2 + 36), 0);
  result = v2;
  *(_DWORD *)(v2 + 40) = 1;
  return result;
}
// 4242C: using guessed type void *off_4242C;
// 42454: using guessed type void *off_42454;

//----- (00024044) --------------------------------------------------------
int __fastcall sub_24044(int a1)
{
  int v1; // r4@1

  v1 = a1;
  do
    android::Looper::pollOnce(*(android::Looper **)(v1 + 20), -1, 0, 0, 0);
  while ( !*(_BYTE *)(v1 + 29) );
  return *(_DWORD *)(v1 + 24);
}

//----- (00024070) --------------------------------------------------------
ssize_t __fastcall sub_24070(int a1, int *a2, signed int a3, signed int a4, int a5, signed int a6, int a7, int a8, unsigned int a9, unsigned int a10, int a11, int a12)
{
  int *v12; // r11@1
  int v13; // r10@1
  signed int v14; // r5@1
  int v15; // r0@1
  int v16; // r7@5
  int v17; // r8@5
  signed int v18; // r1@5
  int v19; // r0@7
  signed int v20; // r1@7
  int v21; // r3@9
  int v22; // r9@12
  GLclampf alpha; // ST00_4@14
  int v24; // r8@14
  int v25; // r5@14
  int v26; // r5@16
  int v27; // r8@16
  signed int v28; // r0@19
  unsigned int v29; // r4@22
  int v30; // r7@26
  int v31; // r6@27
  int v32; // r5@28
  int v33; // r0@28
  unsigned int v34; // r1@29
  int v35; // r0@32
  int v36; // r0@36
  ssize_t result; // r0@38
  signed int v38; // [sp+18h] [bp-38h]@10
  signed int v39; // [sp+1Ch] [bp-34h]@7
  signed int v40; // [sp+20h] [bp-30h]@1
  int v41; // [sp+20h] [bp-30h]@22
  signed int v42; // [sp+24h] [bp-2Ch]@3
  char buf; // [sp+2Bh] [bp-25h]@39

  v12 = a2;
  v13 = a1;
  v14 = a3;
  v40 = a4;
  v15 = v0;
  __dmb();
  if ( !(v15 & 1) )
    atrace_setup(v15, 0xFFFFFF78);
  v42 = v14;
  if ( v0 & 2 )
    atrace_begin_body("renderScreenImplLocked");
  v16 = *(_DWORD *)(v13 + 200);
  v17 = sub_132EC(*v12);
  v18 = 0;
  if ( v17 != a7 )
    v18 = 1;
  v39 = v18;
  v19 = sub_132F0(*v12);
  v20 = 0;
  if ( v19 != a8 )
    v20 = 1;
  v21 = a6;
  if ( a6 <= v40 )
  {
    v42 = 0;
    v28 = v39;
  }
  else
  {
    v38 = v20;
    if ( a5 <= v14 )
    {
      v42 = 0;
    }
    else
    {
      if ( v14 <= -1 )
      {
        v22 = v19;
        _android_log_print(6, "SurfaceFlinger", "Invalid crop rect: l = %d (< 0)", v14);
        v19 = v22;
        v21 = a6;
      }
      if ( a5 > v17 )
      {
        alpha = *(float *)&v17;
        v24 = v19;
        v25 = v21;
        _android_log_print(6, "SurfaceFlinger", "Invalid crop rect: r = %d (> %d)", a5, alpha);
        v19 = v24;
        v21 = v25;
      }
      if ( v40 <= -1 )
      {
        v26 = v21;
        v27 = v19;
        _android_log_print(6, "SurfaceFlinger", "Invalid crop rect: t = %d (< 0)", v40);
        v19 = v27;
        v21 = v26;
      }
      if ( v21 > v19 )
        _android_log_print(6, "SurfaceFlinger", "Invalid crop rect: b = %d (> %d)");
    }
    v28 = v39;
    v20 = v38;
  }
  v41 = v28 | v20;
  (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 20))(v16);
  (*(void (__fastcall **)(int, int, int, signed int))(*(_DWORD *)v16 + 24))(v16, a7, a8, v42);
  (*(void (__fastcall **)(int))(*(_DWORD *)v16 + 52))(v16);
  v29 = a10;
  if ( a10 == -1001 )
  {
    sub_2F07C(v16, 0.0, 0.0, 0.0, 0.0);
    v29 = 21999;
  }
  else
  {
    sub_2F07C(v16, 0.0, 0.0, 0.0, 1.0);
    if ( a10 == -1000 )
    {
      _android_log_print(6, "SurfaceFlinger", "captureScreenImplLocked comes, captureScreenForKeyguard...");
      android::SurfaceFlingerEx::captureScreenForKeyguard(v13 + 32, v41, (int)v12);
      goto LABEL_36;
    }
  }
  v30 = *(_DWORD *)(v13 + 256);
  if ( v30 )
  {
    v31 = 0;
    do
    {
      v32 = *(_DWORD *)(v13 + 252);
      v33 = *(_DWORD *)(v32 + 4 * v31);
      if ( *(_DWORD *)(v33 + 316) == *(_DWORD *)(*v12 + 160) )
      {
        v34 = *(_DWORD *)(v33 + 312);
        if ( v34 >= a9 && v34 <= v29 && (*(int (**)(void))(*(_DWORD *)v33 + 36))() == 1 )
        {
          v35 = *(_DWORD *)(v32 + 4 * v31);
          if ( v41 == 1 )
          {
            sub_192B4(v35, 1);
            sub_189B0(*(_DWORD *)(v32 + 4 * v31), (int)v12, a12);
            sub_192B4(*(_DWORD *)(v32 + 4 * v31), 0);
          }
          else
          {
            sub_189B0(v35, (int)v12, a12);
          }
        }
      }
      ++v31;
    }
    while ( v30 != v31 );
  }
LABEL_36:
  sub_13310(*v12);
  sub_134BC(*v12);
  v36 = v0;
  __dmb();
  if ( !(v36 & 1) )
    atrace_setup(v36, 0xFFFFFF78);
  result = v0;
  if ( v0 & 2 )
  {
    buf = 69;
    result = write(v0, &buf, 1u);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);

//----- (0002435C) --------------------------------------------------------
int __fastcall sub_2435C(int a1, int *a2, int a3, signed int a4, signed int a5, int a6, signed int a7, unsigned int a8, unsigned int a9, unsigned int a10, unsigned int a11, int a12, char a13)
{
  int v13; // r8@1
  int *v14; // r11@1
  unsigned int v15; // r5@1
  int v16; // r0@1
  int v17; // r6@5
  unsigned int v18; // r4@5
  unsigned int v19; // r7@5
  int v20; // r0@9
  android::RefBase *v21; // r8@9
  int v22; // r0@11
  int v23; // r1@11
  int v24; // r6@13
  int v25; // r5@16
  int v26; // r5@16
  int v27; // r5@16
  int v28; // r3@16
  int v29; // r5@20
  _DWORD *v30; // r0@21
  int v31; // r4@23
  int v32; // r7@25
  int v33; // r0@25
  int v34; // r0@25
  int v35; // r0@34
  int v37; // r4@39
  int v38; // r7@40
  int v39; // r1@40
  int v40; // r3@40
  int v41; // r0@42
  signed int v42; // [sp+28h] [bp-48h]@1
  int v43; // [sp+2Ch] [bp-44h]@1
  char v44; // [sp+30h] [bp-40h]@21
  int v45; // [sp+40h] [bp-30h]@19
  android::RefBase *v46; // [sp+44h] [bp-2Ch]@9
  char buf; // [sp+4Bh] [bp-25h]@37

  v43 = a1;
  v13 = a3;
  v14 = a2;
  v15 = 0xFFFFFF78;
  v42 = a4;
  v16 = v0;
  __dmb();
  if ( !(v16 & 1) )
    atrace_setup(v16, a2);
  if ( v0 & 2 )
    atrace_begin_body("captureScreenImplLocked");
  v17 = sub_132EC(*v14);
  v18 = sub_132F0(*v14);
  v19 = v17;
  if ( !(a13 & 4) )
  {
    v19 = v18;
    v18 = v17;
  }
  if ( v18 < a8 || v19 < a9 )
  {
    _android_log_print(6, "SurfaceFlinger", "size mismatch (%d, %d) > (%d, %d)", a8, a9, v18, v19);
    v24 = -22;
    goto LABEL_34;
  }
  v20 = operator new(0x710u);
  v46 = (android::RefBase *)android::Surface::Surface(v20, v13, 0);
  android::RefBase::incStrong(v46, &v46);
  v21 = v46;
  if ( v46 )
    v21 = (android::RefBase *)((char *)v46 + 8);
  v22 = (*((int (__fastcall **)(_DWORD, _DWORD, _DWORD))v21 + 22))(v21, 13, 1);
  if ( a9 )
    v19 = a9;
  v24 = v22;
  if ( a8 )
    v18 = a8;
  if ( !v22 )
  {
    v25 = (*((int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))v21 + 22))(v21, 8, v18, v19);
    v26 = v25 | (*((int (__fastcall **)(_DWORD, _DWORD, _DWORD))v21 + 22))(v21, 10, 1);
    v27 = v26 | (*((int (__fastcall **)(_DWORD, _DWORD, _DWORD))v21 + 22))(v21, 9, 1);
    if ( (*((int (__fastcall **)(_DWORD, _DWORD, _DWORD))v21 + 22))(v21, 0, 819) | v27 )
    {
      v24 = -22;
LABEL_31:
      (*((void (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))v21 + 22))(v21, 14, 1, *((_DWORD *)v21 + 22));
      goto LABEL_32;
    }
    v24 = (*((int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))v21 + 18))(v21, &v45, *((_DWORD *)v21 + 18), v28);
    if ( v24 )
      goto LABEL_31;
    v29 = eglCreateImageKHR(*(_DWORD *)(v43 + 236), 0, 12608, v45);
    if ( !v29 )
    {
      v31 = -1;
LABEL_30:
      v24 = (*((int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))v21 + 25))(v21, v45, v31, *((_DWORD *)v21 + 25));
      goto LABEL_31;
    }
    v30 = sub_2F138(&v44, *(void (__fastcall ****)(_DWORD, _DWORD, _DWORD, _DWORD))(v43 + 200), v29);
    if ( sub_2F1A4((int)v30) )
    {
      _android_log_print(6, "SurfaceFlinger", "got GL_FRAMEBUFFER_COMPLETE_OES error while taking screenshot");
    }
    else
    {
      sub_24070(v43, v14, v42, a5, a6, a7, v18, v19, a10, a11, 1, a12);
      v32 = eglCreateSyncKHR(*(_DWORD *)(v43 + 236), 12612, 0);
      v33 = *(_DWORD *)(v43 + 200);
      j_j_j_glFlush();
      v34 = *(_DWORD *)(v43 + 236);
      if ( v32 )
      {
        v31 = eglDupNativeFenceFDANDROID(v34, v32);
        if ( v31 == -1 )
        {
          _android_log_print(5, "SurfaceFlinger", "captureScreen: failed to dup sync khr object");
          v31 = -1;
        }
        eglDestroySyncKHR(*(_DWORD *)(v43 + 236), v32);
        goto LABEL_29;
      }
      v37 = eglCreateSyncKHR(v34, 12537, 0);
      if ( v37 )
      {
        v38 = eglClientWaitSyncKHR(*(_DWORD *)(v43 + 236), v37, 1);
        v40 = eglGetError(v38, v39);
        if ( v38 == 12533 )
        {
          _android_log_print(5, "SurfaceFlinger", "captureScreen: fence wait timed out");
        }
        else if ( v40 != 12288 )
        {
          _android_log_print(5, "SurfaceFlinger", "captureScreen: error waiting on EGL fence: %#x");
        }
        eglDestroySyncKHR(*(_DWORD *)(v43 + 236), v37);
      }
      else
      {
        v41 = ((int (*)(void))eglGetError)();
        _android_log_print(5, "SurfaceFlinger", "captureScreen: error creating EGL fence: %#x", v41);
      }
    }
    v31 = -1;
LABEL_29:
    eglDestroyImageKHR(*(_DWORD *)(v43 + 236), v29);
    sub_2F190((int)&v44);
    goto LABEL_30;
  }
LABEL_32:
  v15 = 0xFFFFFF78;
  if ( v46 )
    android::RefBase::decStrong(v46, &v46);
LABEL_34:
  v35 = **(_BYTE **)((char *)&GLOBAL_OFFSET_TABLE_ + v15);
  __dmb();
  if ( !(v35 & 1) )
    atrace_setup(v35, v23);
  if ( v0 & 2 )
  {
    buf = 69;
    write(v0, &buf, 1u);
  }
  return v24;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 1074C: using guessed type int __fastcall android::Surface::Surface(_DWORD, _DWORD, _DWORD);
// 107E8: using guessed type int __cdecl eglGetError(_DWORD, _DWORD);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 11040: using guessed type int __fastcall eglCreateImageKHR(_DWORD, _DWORD, _DWORD, _DWORD);
// 1104C: using guessed type int __fastcall eglCreateSyncKHR(_DWORD, _DWORD, _DWORD);
// 11058: using guessed type int __fastcall eglDupNativeFenceFDANDROID(_DWORD, _DWORD);
// 11064: using guessed type int __fastcall eglDestroySyncKHR(_DWORD, _DWORD);
// 11070: using guessed type int __fastcall eglDestroyImageKHR(_DWORD, _DWORD);
// 1107C: using guessed type int __fastcall eglClientWaitSyncKHR(_DWORD, _DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00024704) --------------------------------------------------------
int __fastcall sub_24704(int a1, int a2)
{
  int v2; // r4@1

  v2 = a1;
  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)a1 = a2;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = -1;
  _R5 = (android::Rect *)(a1 + 28);
  *(_DWORD *)(a1 + 48) = 0;
  _R6 = (android::Rect *)(a1 + 12);
  *(_DWORD *)(a1 + 52) = 0;
  *(_BYTE *)(a1 + 44) = 0;
  __asm
  {
    VST1.32         {D16-D17}, [R5]
    VST1.32         {D16-D17}, [R6]
  }
  android::String8::String8((android::String8 *)(a1 + 56));
  android::Rect::makeInvalid(_R6);
  android::Rect::makeInvalid(_R5);
  return v2;
}

//----- (000248AC) --------------------------------------------------------
int __fastcall sub_248AC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (000248E4) --------------------------------------------------------
void __fastcall sub_248E4(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (00024920) --------------------------------------------------------
int __fastcall sub_24920(int a1)
{
  return a1 + 4;
}

//----- (00024940) --------------------------------------------------------
int __fastcall sub_24940(const void *a1, char *a2, _DWORD *a3)
{
  const void *v3; // r6@1
  char *v4; // r5@1
  int v5; // r1@2
  int v6; // r3@4
  int result; // r0@5

  v3 = a1;
  v4 = a2;
  if ( *a3 )
    v5 = (*(_DWORD *)(*a3 - 12) >> 1) - 1;
  if ( v0 )
    v6 = (*(_DWORD *)(v0 - 12) >> 1) - 1;
  result = strzcmp16();
  if ( result )
  {
    result = 0;
    *(_DWORD *)v3 = 0;
  }
  else
  {
    *(_DWORD *)v3 = v4;
    if ( v4 )
      result = android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v3);
  }
  return result;
}
// 1053C: using guessed type int strzcmp16(void);

//----- (0002499C) --------------------------------------------------------
int __fastcall sub_2499C(const void *a1, int a2, _DWORD *a3)
{
  return sub_24940(a1, (char *)(a2 - 4), a3);
}

//----- (000249AC) --------------------------------------------------------
int __fastcall sub_249AC(int a1)
{
  return j_android::ISurfaceComposer::getInterfaceDescriptor((android::ISurfaceComposer *)(a1 - 4));
}

//----- (00024A2C) --------------------------------------------------------
int __fastcall sub_24A2C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (00024A68) --------------------------------------------------------
void __fastcall sub_24A68(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (00024AAC) --------------------------------------------------------
int __fastcall sub_24AAC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (00024AE4) --------------------------------------------------------
void __fastcall sub_24AE4(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (00024B90) --------------------------------------------------------
int __fastcall sub_24B90(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (00024BCC) --------------------------------------------------------
void __fastcall sub_24BCC(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::ISurfaceComposer::~ISurfaceComposer((android::ISurfaceComposer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (00024C18) --------------------------------------------------------
int sub_24C18()
{
  return 0;
}

//----- (00024C20) --------------------------------------------------------
int sub_24C20()
{
  return 0;
}

//----- (00024C24) --------------------------------------------------------
int sub_24C24()
{
  return 0;
}

//----- (00024C2C) --------------------------------------------------------
int sub_24C2C()
{
  return 0;
}

//----- (00024C48) --------------------------------------------------------
int __fastcall sub_24C48(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  return v1;
}

//----- (00024C58) --------------------------------------------------------
void __fastcall sub_24C58(int a1)
{
  void *v1; // r4@1

  v1 = (void *)a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  j_operator delete(v1);
}

//----- (00024C6C) --------------------------------------------------------
int __fastcall sub_24C6C(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (00024C7C) --------------------------------------------------------
void __fastcall sub_24C7C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (00024CBC) --------------------------------------------------------
int __fastcall sub_24CBC(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (00024CCC) --------------------------------------------------------
void __fastcall sub_24CCC(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (00024CE8) --------------------------------------------------------
int __fastcall sub_24CE8(int a1)
{
  return *(_DWORD *)(a1 + 5064);
}

//----- (00024F24) --------------------------------------------------------
void *__fastcall sub_24F24(void *a1, _DWORD *a2)
{
  _DWORD *v2; // r5@1
  void *v3; // r4@1
  int v4; // r1@1
  android::RefBase::weakref_type *v5; // r0@1
  char *v6; // r0@3
  int v7; // r11@5
  int v8; // r1@5
  int v9; // r12@5
  int v10; // lr@5
  int v11; // r2@5
  int v12; // r3@5
  int v13; // r1@5
  int v14; // r2@5
  int v15; // r3@5
  int v16; // r0@5
  int v17; // r12@5

  v2 = a2;
  v3 = a1;
  v4 = *a2;
  *(_DWORD *)a1 = v4;
  v5 = (android::RefBase::weakref_type *)v2[1];
  *((_DWORD *)v3 + 1) = v5;
  if ( v4 )
    android::RefBase::weakref_type::incWeak(v5, v3);
  *((_DWORD *)v3 + 2) = v2[2];
  v6 = (char *)v2[3];
  *((_DWORD *)v3 + 3) = v6;
  if ( v6 )
    android::RefBase::incStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], (char *)v3 + 12);
  v7 = (int)v3 + 52;
  v8 = v2[8];
  v9 = v2[4];
  v10 = v2[5];
  v11 = v2[6];
  v12 = v2[7];
  *((_DWORD *)v3 + 9) = v2[9];
  *((_DWORD *)v3 + 8) = v8;
  *((_DWORD *)v3 + 7) = v12;
  *((_DWORD *)v3 + 6) = v11;
  *((_DWORD *)v3 + 5) = v10;
  *((_DWORD *)v3 + 4) = v9;
  v13 = v2[13];
  v14 = v2[14];
  v15 = v2[15];
  v16 = v2[11];
  v17 = v2[10];
  *((_DWORD *)v3 + 12) = v2[12];
  *(_DWORD *)v7 = v13;
  *(_DWORD *)(v7 + 4) = v14;
  *(_DWORD *)(v7 + 8) = v15;
  *((_DWORD *)v3 + 11) = v16;
  *((_DWORD *)v3 + 10) = v17;
  android::String8::String8((android::String8 *)((char *)v3 + 64), (const android::String8 *)(v2 + 16));
  *((_BYTE *)v3 + 68) = *((_BYTE *)v2 + 68);
  return v3;
}

//----- (00025164) --------------------------------------------------------
_DWORD *__fastcall sub_25164(void *a1, _DWORD *a2)
{
  _DWORD *v2; // r5@1
  _DWORD *v3; // r4@1
  int v4; // r1@1
  android::RefBase::weakref_type *v5; // r0@1
  unsigned int *v6; // r0@3
  unsigned int v7; // r1@5

  v2 = a2;
  v3 = a1;
  v4 = *a2;
  *(_DWORD *)a1 = v4;
  v5 = (android::RefBase::weakref_type *)v2[1];
  v3[1] = v5;
  if ( v4 )
    android::RefBase::weakref_type::incWeak(v5, v3);
  v6 = (unsigned int *)v2[2];
  v3[2] = v6;
  if ( v6 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
  }
  return v3;
}

//----- (000251A0) --------------------------------------------------------
int __fastcall sub_251A0(int a1)
{
  int v1; // r4@1
  const void *v2; // r5@1
  pthread_mutex_t *v3; // r6@1
  _DWORD *v4; // r0@1
  android::SortedVectorImpl *v5; // r7@1
  _DWORD *v6; // r0@5
  unsigned int *v7; // r1@5
  unsigned int v8; // r2@6
  int v10; // [sp+0h] [bp-20h]@1
  android::RefBase::weakref_type *v11; // [sp+4h] [bp-1Ch]@2

  v1 = a1;
  *(_DWORD *)a1 = &unk_41E00;
  *(_DWORD *)(a1 + 16) = &off_41E60;
  v2 = (const void *)(a1 + 12);
  v3 = (pthread_mutex_t *)(*(_DWORD *)(a1 + 12) + 28);
  pthread_mutex_lock(v3);
  v4 = *(_DWORD **)v2;
  v10 = v1;
  v5 = (android::SortedVectorImpl *)(v4 + 13);
  if ( v1 )
    v11 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)(*(_DWORD *)(*(_DWORD *)v1 - 12) + v1),
                                              &v10);
  sub_1E304(v5, (int)&v10);
  if ( v10 )
    android::RefBase::weakref_type::decWeak(v11, &v10);
  v6 = *(_DWORD **)v2;
  __dmb();
  v7 = v6 + 34;
  do
    v8 = __ldrex(v7);
  while ( __strex(v8 | 4, v7) );
  if ( !(v8 & 4) )
    sub_1B4B0((int)(v6 + 111));
  pthread_mutex_unlock(v3);
  if ( *(_DWORD *)v2 )
    android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)v2 + *(_DWORD *)(**(_DWORD **)v2 - 12)), v2);
  android::BBinder::~BBinder((android::BBinder *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}
// 41E60: using guessed type void *off_41E60;

//----- (0002527C) --------------------------------------------------------
int __fastcall sub_2527C(_DWORD *a1)
{
  return sub_251A0((int)a1 + *(_DWORD *)(*a1 - 12));
}

//----- (00025288) --------------------------------------------------------
void __fastcall sub_25288(_DWORD *a1)
{
  void *v1; // r0@1

  v1 = (void *)sub_251A0((int)a1 + *(_DWORD *)(*a1 - 12));
  j_operator delete(v1);
}

//----- (000252A0) --------------------------------------------------------
int __fastcall sub_252A0(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1AEA4(a1, (int)off_3F9F4);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 24));
  return v1;
}
// 3F9F4: using guessed type void **off_3F9F4[5];

//----- (000252C8) --------------------------------------------------------
void __fastcall sub_252C8(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1AEA4(a1, (int)off_3F9F4);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 24));
  j_operator delete((void *)v1);
}
// 3F9F4: using guessed type void **off_3F9F4[5];

//----- (000252F8) --------------------------------------------------------
signed int __fastcall sub_252F8(int a1)
{
  sub_2F0D0(*(_DWORD *)(a1 + 16), 1, (const GLuint *)(a1 + 20));
  return 1;
}

//----- (00025310) --------------------------------------------------------
int __fastcall sub_25310(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_1AEA4((int)a1 + *(_DWORD *)(*a1 - 12), (int)off_3F9F4);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 24));
}
// 3F9F4: using guessed type void **off_3F9F4[5];

//----- (0002533C) --------------------------------------------------------
void __fastcall sub_2533C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_1AEA4((int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)], (int)off_3F9F4);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 24));
  j_operator delete((void *)v1);
}
// 3F9F4: using guessed type void **off_3F9F4[5];

//----- (00025370) --------------------------------------------------------
int __fastcall sub_25370(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  return v1;
}

//----- (00025380) --------------------------------------------------------
void __fastcall sub_25380(int a1)
{
  void *v1; // r4@1

  v1 = (void *)a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  j_operator delete(v1);
}

//----- (00025394) --------------------------------------------------------
int __fastcall sub_25394(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (000253A4) --------------------------------------------------------
void __fastcall sub_253A4(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (000253C0) --------------------------------------------------------
int __fastcall sub_253C0(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  return v1;
}

//----- (000253D0) --------------------------------------------------------
void __fastcall sub_253D0(int a1)
{
  void *v1; // r4@1

  v1 = (void *)a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  j_operator delete(v1);
}

//----- (000253E4) --------------------------------------------------------
int __fastcall sub_253E4(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (000253F4) --------------------------------------------------------
void __fastcall sub_253F4(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (00025410) --------------------------------------------------------
int __fastcall sub_25410(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_257E0(a1, (int)off_3FA10);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  return v1;
}
// 3FA10: using guessed type void **[7];

//----- (00025438) --------------------------------------------------------
void __fastcall sub_25438(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_257E0(a1, (int)off_3FA10);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  j_operator delete((void *)v1);
}
// 3FA10: using guessed type void **off_3FA10[7];

//----- (00025464) --------------------------------------------------------
int __fastcall sub_25464(int a1, int a2)
{
  int v2; // r6@1
  int v3; // r8@1
  pthread_mutex_t *v4; // r5@1
  int v5; // r7@1
  __int64 v6; // r10@2
  int v7; // r1@2
  signed int v8; // r7@2
  char *v9; // r3@5
  signed int v10; // r0@5
  char *v11; // r2@5
  signed int v12; // r7@6
  signed int v14; // [sp+0h] [bp-30h]@5
  char *v15; // [sp+8h] [bp-28h]@6
  char *v16; // [sp+Ch] [bp-24h]@2

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 36);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 36));
  v5 = *(_DWORD *)(v2 + 24);
  if ( v3 == 1 )
  {
    v6 = *(_QWORD *)(v2 + 40);
    v16 = (char *)(v2 + 4);
    android::RefBase::incStrong((android::RefBase *)(v2 + 4 + *(_DWORD *)(*(_DWORD *)(v2 + 4) - 12)), &v16);
    v8 = sub_140B4(v5, v7, v6, SHIDWORD(v6), &v16);
    if ( v16 )
      android::RefBase::decStrong((android::RefBase *)&v16[*(_DWORD *)(*(_DWORD *)v16 - 12)], &v16);
    if ( v8 )
    {
      v9 = strerror(-v8);
      v10 = -40642;
      v11 = (char *)&GLOBAL_OFFSET_TABLE_;
      v14 = v8;
LABEL_10:
      _android_log_print(6, v11 - 48074, &v11[v10], v9, v14);
      goto LABEL_11;
    }
  }
  else
  {
    v15 = (char *)(v2 + 4);
    android::RefBase::incStrong((android::RefBase *)(v2 + 4 + *(_DWORD *)(*(_DWORD *)(v2 + 4) - 12)), &v15);
    v12 = sub_141D4(v5, &v15);
    if ( v15 )
      android::RefBase::decStrong((android::RefBase *)&v15[*(_DWORD *)(*(_DWORD *)v15 - 12)], &v15);
    if ( v12 )
    {
      v9 = strerror(-v12);
      v10 = -40600;
      v11 = (char *)&GLOBAL_OFFSET_TABLE_;
      v14 = v12;
      goto LABEL_10;
    }
  }
LABEL_11:
  *(_BYTE *)(v2 + 48) = v3;
  return pthread_mutex_unlock(v4);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00025540) --------------------------------------------------------
int __fastcall sub_25540(int a1, char **a2)
{
  int v2; // r5@1
  char **v3; // r4@1
  pthread_mutex_t *v4; // r6@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 28);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 28));
  sub_123A8((void *)(v2 + 32), v3);
  return j_j_pthread_mutex_unlock(v4);
}

//----- (00025564) --------------------------------------------------------
int __fastcall sub_25564(int a1, int a2, unsigned int a3, unsigned int a4)
{
  int v4; // r5@1
  unsigned int v5; // r9@1
  pthread_mutex_t *v6; // r8@1
  unsigned int v7; // r7@1
  signed __int64 v8; // r0@1
  signed __int64 v9; // kr00_8@1
  signed __int64 v10; // r0@1
  signed __int64 v11; // r2@1
  int v12; // r4@4
  signed int v13; // r6@4
  char *v14; // r0@7
  int v15; // r6@8
  int v16; // r9@8
  int v17; // r4@8
  int v18; // r1@8
  signed int v19; // r5@8
  char *v20; // r0@11
  char *v22; // [sp+8h] [bp-28h]@8
  char *v23; // [sp+Ch] [bp-24h]@4

  v4 = a1;
  v5 = a4;
  v6 = (pthread_mutex_t *)(a1 + 36);
  v7 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 36));
  LODWORD(v8) = sub_142F8(*(_DWORD *)(v4 + 24));
  v9 = v8;
  v10 = (signed __int64)__PAIR__(v5, v7) % v8;
  v11 = v10 + v9;
  if ( SHIDWORD(v10) >= 0 )
    v11 = v10;
  *(_QWORD *)(v4 + 40) = v11;
  if ( *(_BYTE *)(v4 + 48) )
  {
    v12 = *(_DWORD *)(v4 + 24);
    v23 = (char *)(v4 + 4);
    android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)(v4 + 4) - 12) + v4 + 4), &v23);
    v13 = sub_141D4(v12, &v23);
    if ( v23 )
      android::RefBase::decStrong((android::RefBase *)&v23[*(_DWORD *)(*(_DWORD *)v23 - 12)], &v23);
    if ( v13 )
    {
      v14 = strerror(-v13);
      _android_log_print(6, "SurfaceFlinger", "error unregistering vsync callback: %s (%d)", v14, v13);
    }
    v15 = *(_DWORD *)(v4 + 40);
    v16 = *(_DWORD *)(v4 + 44);
    v17 = *(_DWORD *)(v4 + 24);
    v22 = (char *)(v4 + 4);
    android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)(v4 + 4) - 12) + v4 + 4), &v22);
    v19 = sub_140B4(v17, v18, v15, v16, &v22);
    if ( v22 )
      android::RefBase::decStrong((android::RefBase *)&v22[*(_DWORD *)(*(_DWORD *)v22 - 12)], &v22);
    if ( v19 )
    {
      v20 = strerror(-v19);
      _android_log_print(6, "SurfaceFlinger", "error registering vsync callback: %s (%d)", v20, v19);
    }
  }
  return pthread_mutex_unlock(v6);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00025674) --------------------------------------------------------
int __fastcall sub_25674(int a1, int a2, int a3, int a4)
{
  int v4; // r7@1
  pthread_mutex_t *v5; // r6@1
  int v6; // r8@1
  int v7; // r5@1
  signed int v8; // r1@2
  int v9; // r4@2
  int v10; // r7@2
  int v11; // r0@2
  int result; // r0@6
  int v13; // [sp+4h] [bp-1Ch]@1

  v4 = a1;
  v5 = (pthread_mutex_t *)(a1 + 28);
  v13 = 0;
  v6 = a4;
  v7 = a3;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 28));
  sub_123A8(&v13, (char **)(v4 + 32));
  if ( *(_BYTE *)(v4 + 12) )
  {
    v8 = *(_DWORD *)(v4 + 8) + 1;
    v9 = v8 % 2;
    *(_DWORD *)(v4 + 8) = v8 % 2;
    v10 = *(_DWORD *)(v4 + 20);
    v11 = v0;
    __dmb();
    if ( !(v11 & 1) )
      atrace_setup(v11, v8);
    if ( v0 & 2 )
      atrace_int_body(v10, v9);
  }
  pthread_mutex_unlock(v5);
  result = v13;
  if ( v13 )
  {
    (*(void (__fastcall **)(int, _DWORD, int, int))(*(_DWORD *)v13 + 8))(v13, *(_DWORD *)(*(_DWORD *)v13 + 8), v7, v6);
    result = v13;
    if ( v13 )
      result = android::RefBase::decStrong((android::RefBase *)(v13 + *(_DWORD *)(*(_DWORD *)v13 - 12)), &v13);
  }
  return result;
}
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 11094: using guessed type int __fastcall atrace_int_body(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00025720) --------------------------------------------------------
int __fastcall sub_25720(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_257E0(a1 - 4, (int)off_3FA10);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 48));
}
// 3FA10: using guessed type void **off_3FA10[7];

//----- (00025748) --------------------------------------------------------
void __fastcall sub_25748(int a1)
{
  int v1; // r4@1
  void *v2; // r5@1

  v1 = a1;
  v2 = (void *)(a1 - 4);
  sub_257E0(a1 - 4, (int)off_3FA10);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 48));
  j_operator delete(v2);
}
// 3FA10: using guessed type void **off_3FA10[7];

//----- (00025778) --------------------------------------------------------
int __fastcall sub_25778(int a1, int a2, int a3, int a4)
{
  return sub_25674(a1 - 4, a2, a3, a4);
}

//----- (00025780) --------------------------------------------------------
int __fastcall sub_25780(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_257E0((int)a1 + *(_DWORD *)(*a1 - 12), (int)off_3FA10);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
}
// 3FA10: using guessed type void **off_3FA10[7];

//----- (000257AC) --------------------------------------------------------
void __fastcall sub_257AC(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_257E0(v1, (int)off_3FA10);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 52));
  j_operator delete((void *)v1);
}
// 3FA10: using guessed type void **off_3FA10[7];

//----- (000257E0) --------------------------------------------------------
int __fastcall sub_257E0(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  char *v4; // r0@1

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 24);
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 36));
  v4 = *(char **)(v2 + 32);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v2 + 32));
  pthread_mutex_destroy((pthread_mutex_t *)(v2 + 28));
  android::String8::~String8((android::String8 *)(v2 + 20));
  android::String8::~String8((android::String8 *)(v2 + 16));
  return v2;
}

//----- (0002582C) --------------------------------------------------------
int __fastcall sub_2582C(int a1)
{
  int v1; // r4@1
  int v3; // [sp+0h] [bp-70h]@1
  int v4; // [sp+5Ch] [bp-14h]@1

  v1 = 0;
  v4 = v0;
  if ( property_get(a1, &v3, 0) >= 1 )
    v1 = atoi((const char *)&v3);
  if ( v0 != v4 )
    _stack_chk_fail(v0 - v4);
  return v1;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (0002587C) --------------------------------------------------------
int __fastcall sub_2587C(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  const void *v3; // r1@1

  v1 = a1;
  *(_DWORD *)a1 = &off_421A8;
  *(_DWORD *)(a1 + 28) = &off_421D4;
  v3 = (const void *)(a1 + 20);
  v2 = *(char **)(a1 + 20);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], v3);
  sub_1AEA4(v1, (int)off_3FA34);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  return v1;
}
// 3FA34: using guessed type void **off_3FA34[5];
// 421A8: using guessed type void *off_421A8;
// 421D4: using guessed type void *off_421D4;

//----- (000258D4) --------------------------------------------------------
void __fastcall sub_258D4(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  const void *v3; // r1@1

  v1 = a1;
  *(_DWORD *)a1 = &off_421A8;
  *(_DWORD *)(a1 + 28) = &off_421D4;
  v3 = (const void *)(a1 + 20);
  v2 = *(char **)(a1 + 20);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], v3);
  sub_1AEA4(v1, (int)off_3FA34);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  j_operator delete((void *)v1);
}
// 3FA34: using guessed type void **off_3FA34[5];
// 421A8: using guessed type void *off_421A8;
// 421D4: using guessed type void *off_421D4;

//----- (00025930) --------------------------------------------------------
signed int __fastcall sub_25930(int a1)
{
  int v1; // r4@1
  int v2; // r3@1
  int v3; // r5@4
  int v4; // r0@6
  unsigned int **v5; // r0@7
  unsigned int *v6; // r0@9
  unsigned int v7; // r1@11
  int v9; // [sp+0h] [bp-38h]@0
  char *v10; // [sp+8h] [bp-30h]@4
  android::RefBase::weakref_type *v11; // [sp+Ch] [bp-2Ch]@5
  unsigned int *v12; // [sp+10h] [bp-28h]@9
  void **v13; // [sp+14h] [bp-24h]@1
  int v14; // [sp+1Ch] [bp-1Ch]@2

  v1 = a1;
  android::VectorImpl::VectorImpl((android::VectorImpl *)&v13, 0x30u, 0);
  v13 = &off_3FA50;
  (*(void (**)(void))(**(_DWORD **)(v1 + 16) + 56))();
  v2 = *(_DWORD *)(v1 + 24);
  if ( v2 < 0 || v2 >= v14 )
  {
    v9 = v14;
    _android_log_print(6, "SurfaceFlinger", "Attempt to set active config = %d for display with %zu configs");
  }
  v3 = *(_DWORD *)(v1 + 16);
  v10 = *(char **)(v1 + 20);
  if ( v10 )
    v11 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v10[*(_DWORD *)(*(_DWORD *)v10 - 12)],
                                              &v10);
  v4 = sub_1A49C((android::SortedVectorImpl *)(v3 + 356), (int)&v10);
  if ( v4 < 0 )
    v5 = (unsigned int **)(v3 + 376);
  else
    v5 = (unsigned int **)(*(_DWORD *)(v3 + 360) + 12 * v4 + 8);
  v6 = *v5;
  v12 = v6;
  if ( v6 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
  }
  if ( v10 )
    android::RefBase::weakref_type::decWeak(v11, &v10);
  if ( v12 )
  {
    if ( (signed int)v12[18] < 2 )
      sub_1DEAC(*(_DWORD *)(v1 + 16), (int *)&v12, *(_DWORD *)(v1 + 24));
    else
      _android_log_print(
        5,
        "SurfaceFlinger",
        "Attempt to set active config = %d for virtual display",
        *(_DWORD *)(v1 + 24),
        v9);
  }
  else
  {
    _android_log_print(
      6,
      "SurfaceFlinger",
      "Attempt to set active config = %d for null display %p",
      *(_DWORD *)(v1 + 24),
      *(_DWORD *)(v1 + 20));
  }
  sub_1BF7C(&v12);
  v13 = &off_3FA50;
  android::VectorImpl::finish_vector((android::VectorImpl *)&v13);
  android::VectorImpl::~VectorImpl((android::VectorImpl *)&v13);
  return 1;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FA50: using guessed type void *;

//----- (00025A70) --------------------------------------------------------
int __fastcall sub_25A70(char *a1)
{
  int v1; // r1@1
  int v2; // r5@1
  android::RefBase *v3; // r4@1
  char *v4; // r0@1
  char *v5; // r1@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_421A8;
  *(_DWORD *)(v2 + 28) = &off_421D4;
  v3 = (android::RefBase *)&a1[v1 + 28];
  v5 = &a1[v1 + 20];
  v4 = *(char **)(v2 + 20);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v5);
  sub_1AEA4(v2, (int)off_3FA34);
  return j_android::RefBase::~RefBase(v3);
}
// 3FA34: using guessed type void **off_3FA34[5];
// 421A8: using guessed type void *off_421A8;
// 421D4: using guessed type void *off_421D4;

//----- (00025AD4) --------------------------------------------------------
void __fastcall sub_25AD4(char *a1)
{
  int v1; // r1@1
  int v2; // r4@1
  android::RefBase *v3; // r5@1
  char *v4; // r0@1
  char *v5; // r1@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_421A8;
  *(_DWORD *)(v2 + 28) = &off_421D4;
  v3 = (android::RefBase *)&a1[v1 + 28];
  v5 = &a1[v1 + 20];
  v4 = *(char **)(v2 + 20);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v5);
  sub_1AEA4(v2, (int)off_3FA34);
  android::RefBase::~RefBase(v3);
  j_operator delete((void *)v2);
}
// 3FA34: using guessed type void **off_3FA34[5];
// 421A8: using guessed type void *off_421A8;
// 421D4: using guessed type void *off_421D4;

//----- (00025B3C) --------------------------------------------------------
int __fastcall sub_25B3C(android::VectorImpl *this)
{
  android::VectorImpl *v1; // r4@1

  v1 = this;
  *(_DWORD *)this = &off_3FA50;
  android::VectorImpl::finish_vector(this);
  return j_android::VectorImpl::~VectorImpl(v1);
}
// 3FA50: using guessed type void *off_3FA50;

//----- (00025B64) --------------------------------------------------------
void __fastcall sub_25B64(android::VectorImpl *this)
{
  android::VectorImpl *v1; // r4@1

  v1 = this;
  *(_DWORD *)this = &off_3FA50;
  android::VectorImpl::finish_vector(this);
  android::VectorImpl::~VectorImpl(v1);
  j_operator delete((void *)v1);
}
// 3FA50: using guessed type void *off_3FA50;

//----- (00025B9C) --------------------------------------------------------
void __fastcall sub_25B9C(int a1, int a2, int a3, int a4)
{
  int v4; // lr@2
  int v5; // r4@2
  int v6; // r5@2
  int v7; // r6@2
  int v8; // r12@2
  int v9; // lr@2
  int v10; // r6@2
  int v11; // r5@2
  int v12; // r4@2
  int v13; // r12@2
  int v14; // r0@2

  for ( ; a4; a2 += 48 )
  {
    v4 = *(_DWORD *)a3;
    --a4;
    v5 = *(_DWORD *)(a3 + 4);
    v6 = *(_DWORD *)(a3 + 8);
    v7 = *(_DWORD *)(a3 + 12);
    v8 = *(_DWORD *)(a3 + 16);
    *(_DWORD *)(a2 + 20) = *(_DWORD *)(a3 + 20);
    *(_DWORD *)(a2 + 16) = v8;
    *(_DWORD *)(a2 + 12) = v7;
    *(_DWORD *)(a2 + 8) = v6;
    *(_DWORD *)(a2 + 4) = v5;
    *(_DWORD *)a2 = v4;
    v9 = *(_DWORD *)(a3 + 32);
    v10 = *(_DWORD *)(a3 + 36);
    v11 = *(_DWORD *)(a3 + 40);
    v12 = *(_DWORD *)(a3 + 44);
    v13 = *(_DWORD *)(a3 + 24);
    v14 = *(_DWORD *)(a3 + 28);
    a3 += 48;
    *(_DWORD *)(a2 + 32) = v9;
    *(_DWORD *)(a2 + 36) = v10;
    *(_DWORD *)(a2 + 40) = v11;
    *(_DWORD *)(a2 + 44) = v12;
    *(_DWORD *)(a2 + 28) = v14;
    *(_DWORD *)(a2 + 24) = v13;
  }
}

//----- (00025BEC) --------------------------------------------------------
void __fastcall sub_25BEC(int a1, int a2, int a3, int a4)
{
  int v4; // lr@2
  int v5; // r4@2
  int v6; // r5@2
  int v7; // r6@2
  int v8; // r12@2
  int v9; // r6@2
  int v10; // r5@2
  int v11; // r4@2
  int v12; // r12@2
  int v13; // r0@2

  for ( ; a4; a2 += 48 )
  {
    v4 = *(_DWORD *)a3;
    --a4;
    v5 = *(_DWORD *)(a3 + 4);
    v6 = *(_DWORD *)(a3 + 8);
    v7 = *(_DWORD *)(a3 + 12);
    v8 = *(_DWORD *)(a3 + 16);
    *(_DWORD *)(a2 + 20) = *(_DWORD *)(a3 + 20);
    *(_DWORD *)(a2 + 16) = v8;
    *(_DWORD *)(a2 + 12) = v7;
    *(_DWORD *)(a2 + 8) = v6;
    *(_DWORD *)(a2 + 4) = v5;
    *(_DWORD *)a2 = v4;
    v9 = *(_DWORD *)(a3 + 36);
    v10 = *(_DWORD *)(a3 + 40);
    v11 = *(_DWORD *)(a3 + 44);
    v12 = *(_DWORD *)(a3 + 24);
    v13 = *(_DWORD *)(a3 + 28);
    *(_DWORD *)(a2 + 32) = *(_DWORD *)(a3 + 32);
    *(_DWORD *)(a2 + 36) = v9;
    *(_DWORD *)(a2 + 40) = v10;
    *(_DWORD *)(a2 + 44) = v11;
    *(_DWORD *)(a2 + 28) = v13;
    *(_DWORD *)(a2 + 24) = v12;
  }
}

//----- (00025C38) --------------------------------------------------------
void __fastcall sub_25C38(int a1, int a2, int a3, int a4)
{
  int v4; // r12@2
  int v5; // r0@2
  int v6; // r1@2
  int v7; // lr@3
  int v8; // r4@3
  int v9; // r5@3
  int v10; // r6@3
  int v11; // r12@3
  int v12; // lr@3
  int v13; // r6@3
  int v14; // r5@3
  int v15; // r4@3
  int v16; // r12@3
  int v17; // r2@3

  if ( a4 )
  {
    v4 = 48 * a4 - 48;
    v5 = a2 + v4;
    v6 = a3 + v4;
    do
    {
      v7 = *(_DWORD *)v6;
      --a4;
      v8 = *(_DWORD *)(v6 + 4);
      v9 = *(_DWORD *)(v6 + 8);
      v10 = *(_DWORD *)(v6 + 12);
      v11 = *(_DWORD *)(v6 + 16);
      *(_DWORD *)(v5 + 20) = *(_DWORD *)(v6 + 20);
      *(_DWORD *)(v5 + 16) = v11;
      *(_DWORD *)(v5 + 12) = v10;
      *(_DWORD *)(v5 + 8) = v9;
      *(_DWORD *)(v5 + 4) = v8;
      *(_DWORD *)v5 = v7;
      v12 = *(_DWORD *)(v6 + 32);
      v13 = *(_DWORD *)(v6 + 36);
      v14 = *(_DWORD *)(v6 + 40);
      v15 = *(_DWORD *)(v6 + 44);
      v16 = *(_DWORD *)(v6 + 24);
      v17 = *(_DWORD *)(v6 + 28);
      v6 -= 48;
      *(_DWORD *)(v5 + 32) = v12;
      *(_DWORD *)(v5 + 36) = v13;
      *(_DWORD *)(v5 + 40) = v14;
      *(_DWORD *)(v5 + 44) = v15;
      *(_DWORD *)(v5 + 28) = v17;
      *(_DWORD *)(v5 + 24) = v16;
      v5 -= 48;
    }
    while ( a4 );
  }
}

//----- (00025C9C) --------------------------------------------------------
void __fastcall sub_25C9C(int a1, int a2, int a3, int a4)
{
  int v4; // lr@2
  int v5; // r4@2
  int v6; // r5@2
  int v7; // r6@2
  int v8; // r12@2
  int v9; // lr@2
  int v10; // r6@2
  int v11; // r5@2
  int v12; // r4@2
  int v13; // r12@2
  int v14; // r0@2

  for ( ; a4; a2 += 48 )
  {
    v4 = *(_DWORD *)a3;
    --a4;
    v5 = *(_DWORD *)(a3 + 4);
    v6 = *(_DWORD *)(a3 + 8);
    v7 = *(_DWORD *)(a3 + 12);
    v8 = *(_DWORD *)(a3 + 16);
    *(_DWORD *)(a2 + 20) = *(_DWORD *)(a3 + 20);
    *(_DWORD *)(a2 + 16) = v8;
    *(_DWORD *)(a2 + 12) = v7;
    *(_DWORD *)(a2 + 8) = v6;
    *(_DWORD *)(a2 + 4) = v5;
    *(_DWORD *)a2 = v4;
    v9 = *(_DWORD *)(a3 + 32);
    v10 = *(_DWORD *)(a3 + 36);
    v11 = *(_DWORD *)(a3 + 40);
    v12 = *(_DWORD *)(a3 + 44);
    v13 = *(_DWORD *)(a3 + 24);
    v14 = *(_DWORD *)(a3 + 28);
    a3 += 48;
    *(_DWORD *)(a2 + 32) = v9;
    *(_DWORD *)(a2 + 36) = v10;
    *(_DWORD *)(a2 + 40) = v11;
    *(_DWORD *)(a2 + 44) = v12;
    *(_DWORD *)(a2 + 28) = v14;
    *(_DWORD *)(a2 + 24) = v13;
  }
}

//----- (00025CEC) --------------------------------------------------------
int __fastcall sub_25CEC(pthread_mutex_t *a1)
{
  pthread_mutex_t *v1; // r4@1

  v1 = a1;
  pthread_mutex_lock(a1);
  while ( v1->__owner == 1 )
    pthread_cond_wait((pthread_cond_t *)&v1->__count, v1);
  return j_j_pthread_mutex_unlock(v1);
}

//----- (00025D18) --------------------------------------------------------
int __fastcall sub_25D18(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1AEA4(a1, (int)off_3FA74);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 20));
  return v1;
}
// 3FA74: using guessed type void **off_3FA74[5];

//----- (00025D40) --------------------------------------------------------
void __fastcall sub_25D40(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_1AEA4(a1, (int)off_3FA74);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 20));
  j_operator delete((void *)v1);
}
// 3FA74: using guessed type void **off_3FA74[5];

//----- (00025D70) --------------------------------------------------------
signed int __fastcall sub_25D70(int a1)
{
  sub_223FC(*(_DWORD *)(a1 + 16));
  return 1;
}

//----- (00025D80) --------------------------------------------------------
int __fastcall sub_25D80(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_1AEA4((int)a1 + *(_DWORD *)(*a1 - 12), (int)off_3FA74);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 20));
}
// 3FA74: using guessed type void **off_3FA74[5];

//----- (00025DAC) --------------------------------------------------------
void __fastcall sub_25DAC(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_1AEA4((int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)], (int)off_3FA74);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 20));
  j_operator delete((void *)v1);
}
// 3FA74: using guessed type void **off_3FA74[5];

//----- (00025DE0) --------------------------------------------------------
int __fastcall sub_25DE0(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  const void *v3; // r1@1

  v1 = a1;
  *(_DWORD *)a1 = &off_422E8;
  *(_DWORD *)(a1 + 28) = &off_42314;
  v3 = (const void *)(a1 + 20);
  v2 = *(char **)(a1 + 20);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], v3);
  sub_1AEA4(v1, (int)off_3FA94);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  return v1;
}
// 3FA94: using guessed type void **off_3FA94[5];
// 422E8: using guessed type void *off_422E8;
// 42314: using guessed type void *off_42314;

//----- (00025E38) --------------------------------------------------------
void __fastcall sub_25E38(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  const void *v3; // r1@1

  v1 = a1;
  *(_DWORD *)a1 = &off_422E8;
  *(_DWORD *)(a1 + 28) = &off_42314;
  v3 = (const void *)(a1 + 20);
  v2 = *(char **)(a1 + 20);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], v3);
  sub_1AEA4(v1, (int)off_3FA94);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 28));
  j_operator delete((void *)v1);
}
// 3FA94: using guessed type void **off_3FA94[5];
// 422E8: using guessed type void *off_422E8;
// 42314: using guessed type void *off_42314;

//----- (00025E94) --------------------------------------------------------
signed int __fastcall sub_25E94(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  int v3; // r5@1
  int v4; // r0@3
  unsigned int **v5; // r0@4
  unsigned int *v6; // r0@6
  unsigned int v7; // r1@8
  char *v9; // [sp+4h] [bp-1Ch]@1
  android::RefBase::weakref_type *v10; // [sp+8h] [bp-18h]@2
  unsigned int *v11; // [sp+Ch] [bp-14h]@6

  v1 = a1;
  v2 = *(char **)(a1 + 20);
  v3 = *(_DWORD *)(v1 + 16);
  v9 = v2;
  if ( v2 )
    v10 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)],
                                              &v9);
  v4 = sub_1A49C((android::SortedVectorImpl *)(v3 + 356), (int)&v9);
  if ( v4 < 0 )
    v5 = (unsigned int **)(v3 + 376);
  else
    v5 = (unsigned int **)(*(_DWORD *)(v3 + 360) + 12 * v4 + 8);
  v6 = *v5;
  v11 = v6;
  if ( v6 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
  }
  if ( v9 )
    android::RefBase::weakref_type::decWeak(v10, &v9);
  if ( v11 )
  {
    if ( (signed int)v11[18] < 2 )
      sub_22598(*(_DWORD *)(v1 + 16), (int *)&v11, *(_DWORD *)(v1 + 24));
    else
      _android_log_print(
        5,
        "SurfaceFlinger",
        "Attempt to set power mode = %d for virtual display",
        *(_DWORD *)(v1 + 24));
  }
  else
  {
    _android_log_print(
      6,
      "SurfaceFlinger",
      "Attempt to set power mode = %d for null display %p",
      *(_DWORD *)(v1 + 24),
      *(_DWORD *)(v1 + 20));
  }
  sub_1BF7C(&v11);
  return 1;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00025F68) --------------------------------------------------------
int __fastcall sub_25F68(char *a1)
{
  int v1; // r1@1
  int v2; // r5@1
  android::RefBase *v3; // r4@1
  char *v4; // r0@1
  char *v5; // r1@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_422E8;
  *(_DWORD *)(v2 + 28) = &off_42314;
  v3 = (android::RefBase *)&a1[v1 + 28];
  v5 = &a1[v1 + 20];
  v4 = *(char **)(v2 + 20);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v5);
  sub_1AEA4(v2, (int)off_3FA94);
  return j_android::RefBase::~RefBase(v3);
}
// 3FA94: using guessed type void **off_3FA94[5];
// 422E8: using guessed type void *off_422E8;
// 42314: using guessed type void *off_42314;

//----- (00025FCC) --------------------------------------------------------
void __fastcall sub_25FCC(char *a1)
{
  int v1; // r1@1
  int v2; // r4@1
  android::RefBase *v3; // r5@1
  char *v4; // r0@1
  char *v5; // r1@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_422E8;
  *(_DWORD *)(v2 + 28) = &off_42314;
  v3 = (android::RefBase *)&a1[v1 + 28];
  v5 = &a1[v1 + 20];
  v4 = *(char **)(v2 + 20);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v5);
  sub_1AEA4(v2, (int)off_3FA94);
  android::RefBase::~RefBase(v3);
  j_operator delete((void *)v2);
}
// 3FA94: using guessed type void **off_3FA94[5];
// 422E8: using guessed type void *off_422E8;
// 42314: using guessed type void *off_42314;

//----- (00026034) --------------------------------------------------------
android::GraphicBufferAllocator *sub_26034()
{
  android::GraphicBufferAllocator *v0; // r4@1

  pthread_mutex_lock(0);
  v0 = (android::GraphicBufferAllocator *)::v0;
  if ( !::v0 )
  {
    v0 = (android::GraphicBufferAllocator *)operator new(4u);
    android::GraphicBufferAllocator::GraphicBufferAllocator(v0);
    ::v0 = v0;
  }
  pthread_mutex_unlock(0);
  return v0;
}

//----- (00026208) --------------------------------------------------------
int __fastcall sub_26208(int a1, int *a2)
{
  int v2; // r4@1
  int result; // r0@1
  int v4; // r1@6
  char *v5; // [sp+8h] [bp-18h]@4
  int v6; // [sp+Ch] [bp-14h]@6

  v2 = a1;
  result = *a2;
  __dmb();
  if ( result == 1 )
  {
    result = 1;
    *(_BYTE *)(v2 + 29) = 1;
  }
  else if ( !result )
  {
    v5 = *(char **)(v2 + 16);
    if ( v5 )
      android::RefBase::incStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], &v5);
    android::IInterface::asBinder(&v6, &v5);
    v4 = *(_DWORD *)(v2 + 44);
    *(_DWORD *)(v2 + 24) = (*(int (__cdecl **)(int))(*(_DWORD *)v6 + 20))(v6);
    if ( v6 )
      android::RefBase::decStrong((android::RefBase *)(v6 + *(_DWORD *)(*(_DWORD *)v6 - 12)), &v6);
    if ( v5 )
      android::RefBase::decStrong((android::RefBase *)&v5[*(_DWORD *)(*(_DWORD *)v5 - 12)], &v5);
    pthread_mutex_lock((pthread_mutex_t *)(v2 + 32));
    *(_DWORD *)(v2 + 40) = 0;
    pthread_cond_broadcast((pthread_cond_t *)(v2 + 36));
    result = pthread_mutex_unlock((pthread_mutex_t *)(v2 + 32));
  }
  return result;
}
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);

//----- (0002629C) --------------------------------------------------------
int __fastcall sub_2629C(int a1)
{
  int v1; // r6@1
  int v2; // r5@1
  android::RefBase *v3; // r4@1
  android::RefBase *v4; // r0@1
  const void *v5; // r6@1
  android::RefBase *v6; // t1@1
  char *v7; // r0@3

  v1 = a1;
  *(_DWORD *)(a1 - 12) = &unk_423D8;
  v2 = a1 - 12;
  *(_DWORD *)(a1 + 44) = &off_42454;
  v3 = (android::RefBase *)(a1 + 44);
  *(_DWORD *)a1 = &off_4242C;
  pthread_cond_destroy((pthread_cond_t *)(a1 + 24));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 20));
  v6 = *(android::RefBase **)(v1 + 8);
  v5 = (const void *)(v1 + 8);
  v4 = v6;
  if ( v6 )
    android::RefBase::decStrong(v4, v5);
  v7 = *(char **)(v2 + 16);
  if ( v7 )
    android::RefBase::decStrong((android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)], (const void *)(v2 + 16));
  android::BBinder::~BBinder((android::BBinder *)v2);
  return j_android::RefBase::~RefBase(v3);
}
// 4242C: using guessed type void *off_4242C;
// 42454: using guessed type void *off_42454;

//----- (0002631C) --------------------------------------------------------
void __fastcall sub_2631C(int a1)
{
  int v1; // r6@1
  int v2; // r4@1
  android::RefBase *v3; // r5@1
  android::RefBase *v4; // r0@1
  const void *v5; // r6@1
  android::RefBase *v6; // t1@1
  char *v7; // r0@3

  v1 = a1;
  *(_DWORD *)(a1 - 12) = &unk_423D8;
  v2 = a1 - 12;
  *(_DWORD *)(a1 + 44) = &off_42454;
  v3 = (android::RefBase *)(a1 + 44);
  *(_DWORD *)a1 = &off_4242C;
  pthread_cond_destroy((pthread_cond_t *)(a1 + 24));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 20));
  v6 = *(android::RefBase **)(v1 + 8);
  v5 = (const void *)(v1 + 8);
  v4 = v6;
  if ( v6 )
    android::RefBase::decStrong(v4, v5);
  v7 = *(char **)(v2 + 16);
  if ( v7 )
    android::RefBase::decStrong((android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)], (const void *)(v2 + 16));
  android::BBinder::~BBinder((android::BBinder *)v2);
  android::RefBase::~RefBase(v3);
  j_operator delete((void *)v2);
}
// 4242C: using guessed type void *off_4242C;
// 42454: using guessed type void *off_42454;

//----- (000263A4) --------------------------------------------------------
int __fastcall sub_263A4(int a1, int *a2)
{
  return sub_26208(a1 - 12, a2);
}

//----- (000263AC) --------------------------------------------------------
int __fastcall sub_263AC(char *a1)
{
  int v1; // r5@1
  android::RefBase *v2; // r0@1
  char *v3; // r0@3

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  *(_DWORD *)v1 = &unk_423D8;
  *(_DWORD *)(v1 + 56) = &off_42454;
  *(_DWORD *)(v1 + 12) = &off_4242C;
  pthread_cond_destroy((pthread_cond_t *)(v1 + 36));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 32));
  v2 = *(android::RefBase **)(v1 + 20);
  if ( v2 )
    android::RefBase::decStrong(v2, (const void *)(v1 + 20));
  v3 = *(char **)(v1 + 16);
  if ( v3 )
    android::RefBase::decStrong((android::RefBase *)&v3[*(_DWORD *)(*(_DWORD *)v3 - 12)], (const void *)(v1 + 16));
  android::BBinder::~BBinder((android::BBinder *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 56));
}
// 4242C: using guessed type void *off_4242C;
// 42454: using guessed type void *off_42454;

//----- (00026430) --------------------------------------------------------
void __fastcall sub_26430(char *a1)
{
  int v1; // r4@1
  android::RefBase *v2; // r0@1
  char *v3; // r0@3

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  *(_DWORD *)v1 = &unk_423D8;
  *(_DWORD *)(v1 + 56) = &off_42454;
  *(_DWORD *)(v1 + 12) = &off_4242C;
  pthread_cond_destroy((pthread_cond_t *)(v1 + 36));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 32));
  v2 = *(android::RefBase **)(v1 + 20);
  if ( v2 )
    android::RefBase::decStrong(v2, (const void *)(v1 + 20));
  v3 = *(char **)(v1 + 16);
  if ( v3 )
    android::RefBase::decStrong((android::RefBase *)&v3[*(_DWORD *)(*(_DWORD *)v3 - 12)], (const void *)(v1 + 16));
  android::BBinder::~BBinder((android::BBinder *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 56));
  j_operator delete((void *)v1);
}
// 4242C: using guessed type void *off_4242C;
// 42454: using guessed type void *off_42454;

//----- (000264BC) --------------------------------------------------------
int __fastcall sub_264BC(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  const void *v3; // r1@1
  char *v4; // r0@3

  v1 = a1;
  *(_DWORD *)a1 = &off_425D8;
  *(_DWORD *)(a1 + 72) = &off_42604;
  v3 = (const void *)(a1 + 24);
  v2 = *(char **)(a1 + 24);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], v3);
  v4 = *(char **)(v1 + 20);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v1 + 20));
  sub_1AEA4(v1, (int)off_3FAE4);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 72));
  return v1;
}
// 3FAE4: using guessed type void **off_3FAE4[5];
// 425D8: using guessed type void *off_425D8;
// 42604: using guessed type void *off_42604;

//----- (00026528) --------------------------------------------------------
void __fastcall sub_26528(int a1)
{
  int v1; // r4@1
  char *v2; // r0@1
  const void *v3; // r1@1
  char *v4; // r0@3

  v1 = a1;
  *(_DWORD *)a1 = &off_425D8;
  *(_DWORD *)(a1 + 72) = &off_42604;
  v3 = (const void *)(a1 + 24);
  v2 = *(char **)(a1 + 24);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], v3);
  v4 = *(char **)(v1 + 20);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], (const void *)(v1 + 20));
  sub_1AEA4(v1, (int)off_3FAE4);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 72));
  j_operator delete((void *)v1);
}
// 3FAE4: using guessed type void **off_3FAE4[5];
// 425D8: using guessed type void *off_425D8;
// 42604: using guessed type void *off_42604;

//----- (00026598) --------------------------------------------------------
signed int __fastcall sub_26598(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r8@1
  int v3; // r6@1
  int v4; // r0@3
  unsigned int **v5; // r0@4
  unsigned int *v6; // r0@6
  unsigned int v7; // r1@8
  unsigned int *v8; // r0@9
  unsigned int v9; // r1@11
  char *v11; // [sp+28h] [bp-38h]@16
  char *v12; // [sp+2Ch] [bp-34h]@18
  char *v13; // [sp+30h] [bp-30h]@1
  android::RefBase::weakref_type *v14; // [sp+34h] [bp-2Ch]@2
  unsigned int *v15; // [sp+38h] [bp-28h]@6
  unsigned int *v16; // [sp+3Ch] [bp-24h]@9

  v1 = a1;
  v2 = (pthread_mutex_t *)(*(_DWORD *)(a1 + 16) + 28);
  pthread_mutex_lock(v2);
  v3 = *(_DWORD *)(v1 + 16);
  v13 = *(char **)(v1 + 20);
  if ( v13 )
    v14 = (android::RefBase::weakref_type *)android::RefBase::createWeak(
                                              (android::RefBase *)&v13[*(_DWORD *)(*(_DWORD *)v13 - 12)],
                                              &v13);
  v4 = sub_1A49C((android::SortedVectorImpl *)(v3 + 356), (int)&v13);
  if ( v4 < 0 )
    v5 = (unsigned int **)(v3 + 376);
  else
    v5 = (unsigned int **)(*(_DWORD *)(v3 + 360) + 12 * v4 + 8);
  v6 = *v5;
  v15 = v6;
  if ( v6 )
  {
    __dmb();
    do
      v7 = __ldrex(v6);
    while ( __strex(v7 + 1, v6) );
    v8 = v15;
    v16 = v15;
    if ( v15 )
    {
      __dmb();
      do
        v9 = __ldrex(v8);
      while ( __strex(v9 + 1, v8) );
    }
  }
  else
  {
    v16 = 0;
  }
  sub_1BF7C(&v15);
  if ( v13 )
    android::RefBase::weakref_type::decWeak(v14, &v13);
  *(_DWORD *)(v1 + 68) = sub_2435C(
                           *(_DWORD *)(v1 + 16),
                           (int *)&v16,
                           v1 + 24,
                           *(_DWORD *)(v1 + 28),
                           *(_DWORD *)(v1 + 32),
                           *(_DWORD *)(v1 + 36),
                           *(_DWORD *)(v1 + 40),
                           *(_DWORD *)(v1 + 44),
                           *(_DWORD *)(v1 + 48),
                           *(_DWORD *)(v1 + 52),
                           *(_DWORD *)(v1 + 56),
                           *(_BYTE *)(v1 + 60),
                           *(_DWORD *)(v1 + 64));
  v11 = *(char **)(v1 + 24);
  if ( v11 )
    android::RefBase::incStrong((android::RefBase *)&v11[*(_DWORD *)(*(_DWORD *)v11 - 12)], &v11);
  android::IInterface::asBinder(&v12, &v11);
  sub_267C8(v12, *(_DWORD *)(v1 + 68));
  if ( v12 )
    android::RefBase::decStrong((android::RefBase *)&v12[*(_DWORD *)(*(_DWORD *)v12 - 12)], &v12);
  if ( v11 )
    android::RefBase::decStrong((android::RefBase *)&v11[*(_DWORD *)(*(_DWORD *)v11 - 12)], &v11);
  sub_1BF7C(&v16);
  pthread_mutex_unlock(v2);
  return 1;
}
// 10D7C: using guessed type int __fastcall android::IInterface::asBinder(_DWORD, _DWORD);

//----- (000266D4) --------------------------------------------------------
int __fastcall sub_266D4(char *a1)
{
  int v1; // r1@1
  int v2; // r5@1
  android::RefBase *v3; // r4@1
  char *v4; // r0@1
  char *v5; // r1@1
  char *v6; // r0@3

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_425D8;
  *(_DWORD *)(v2 + 72) = &off_42604;
  v3 = (android::RefBase *)&a1[v1 + 72];
  v5 = &a1[v1 + 24];
  v4 = *(char **)(v2 + 24);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v5);
  v6 = *(char **)(v2 + 20);
  if ( v6 )
    android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], (const void *)(v2 + 20));
  sub_1AEA4(v2, (int)off_3FAE4);
  return j_android::RefBase::~RefBase(v3);
}
// 3FAE4: using guessed type void **off_3FAE4[5];
// 425D8: using guessed type void *off_425D8;
// 42604: using guessed type void *off_42604;

//----- (0002674C) --------------------------------------------------------
void __fastcall sub_2674C(char *a1)
{
  int v1; // r1@1
  int v2; // r4@1
  android::RefBase *v3; // r5@1
  char *v4; // r0@1
  char *v5; // r1@1
  char *v6; // r0@3

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_425D8;
  *(_DWORD *)(v2 + 72) = &off_42604;
  v3 = (android::RefBase *)&a1[v1 + 72];
  v5 = &a1[v1 + 24];
  v4 = *(char **)(v2 + 24);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v5);
  v6 = *(char **)(v2 + 20);
  if ( v6 )
    android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], (const void *)(v2 + 20));
  sub_1AEA4(v2, (int)off_3FAE4);
  android::RefBase::~RefBase(v3);
  j_operator delete((void *)v2);
}
// 3FAE4: using guessed type void **off_3FAE4[5];
// 425D8: using guessed type void *off_425D8;
// 42604: using guessed type void *off_42604;

//----- (000267C8) --------------------------------------------------------
_DWORD *__fastcall sub_267C8(_DWORD *a1, int a2)
{
  bool v2; // zf@1
  int v3; // r4@1
  _DWORD *result; // r0@5
  int v5; // [sp+0h] [bp-18h]@5
  _DWORD *v6; // [sp+4h] [bp-14h]@3

  a1[6] = a2;
  *((_BYTE *)a1 + 28) = 1;
  v2 = a1 == 0;
  __dmb();
  v3 = a1[5];
  if ( a1 )
    a1 += 3;
  v6 = a1;
  if ( !v2 )
    android::RefBase::incStrong((android::RefBase *)((char *)a1 + *(_DWORD *)(*a1 - 12)), &v6);
  v5 = 1;
  android::Looper::sendMessage(v3, &v6, &v5);
  result = v6;
  if ( v6 )
    result = (_DWORD *)android::RefBase::decStrong((android::RefBase *)((char *)v6 + *(_DWORD *)(*v6 - 12)), &v6);
  return result;
}
// 10CEC: using guessed type int __fastcall android::Looper::sendMessage(_DWORD, _DWORD, _DWORD);

//----- (00026A44) --------------------------------------------------------
void *__fastcall sub_26A44(void *a1, int a2)
{
  void *v2; // r4@1
  android::RefBase::weakref_type *v4; // r0@1

  v2 = a1;
  _ZF = *(_DWORD *)a2 == 0;
  *(_DWORD *)a1 = *(_DWORD *)a2;
  v4 = *(android::RefBase::weakref_type **)(a2 + 4);
  *((_DWORD *)v2 + 1) = v4;
  if ( !_ZF )
    android::RefBase::weakref_type::incWeak(v4, v2);
  __asm { VMOV.I32        Q8, #0 }
  *((_DWORD *)v2 + 2) = -1;
  *((_DWORD *)v2 + 3) = 0;
  *((_DWORD *)v2 + 14) = 0;
  *((_DWORD *)v2 + 15) = 0;
  _R0 = (int)v2 + 36;
  __asm { VST1.32         {D16-D17}, [R0] }
  _R0 = (int)v2 + 20;
  __asm { VST1.32         {D16-D17}, [R0] }
  android::String8::String8((android::String8 *)((char *)v2 + 64));
  return v2;
}

//----- (00026A88) --------------------------------------------------------
void *__fastcall sub_26A88(void *a1, int a2, int a3)
{
  int v3; // r5@1
  void *v4; // r4@1
  bool v5; // zf@1
  android::RefBase::weakref_type *v6; // r0@1
  char *v7; // r0@3
  int v8; // r11@5
  int v9; // r1@5
  int v10; // r12@5
  int v11; // lr@5
  int v12; // r2@5
  int v13; // r3@5
  int v14; // r1@5
  int v15; // r2@5
  int v16; // r3@5
  int v17; // r0@5
  int v18; // r12@5

  v3 = a3;
  v4 = a1;
  v5 = *(_DWORD *)a2 == 0;
  *(_DWORD *)a1 = *(_DWORD *)a2;
  v6 = *(android::RefBase::weakref_type **)(a2 + 4);
  *((_DWORD *)v4 + 1) = v6;
  if ( !v5 )
    android::RefBase::weakref_type::incWeak(v6, v4);
  *((_DWORD *)v4 + 2) = *(_DWORD *)v3;
  v7 = *(char **)(v3 + 4);
  *((_DWORD *)v4 + 3) = v7;
  if ( v7 )
    android::RefBase::incStrong((android::RefBase *)&v7[*(_DWORD *)(*(_DWORD *)v7 - 12)], (char *)v4 + 12);
  v8 = (int)v4 + 52;
  v9 = *(_DWORD *)(v3 + 24);
  v10 = *(_DWORD *)(v3 + 8);
  v11 = *(_DWORD *)(v3 + 12);
  v12 = *(_DWORD *)(v3 + 16);
  v13 = *(_DWORD *)(v3 + 20);
  *((_DWORD *)v4 + 9) = *(_DWORD *)(v3 + 28);
  *((_DWORD *)v4 + 8) = v9;
  *((_DWORD *)v4 + 7) = v13;
  *((_DWORD *)v4 + 6) = v12;
  *((_DWORD *)v4 + 5) = v11;
  *((_DWORD *)v4 + 4) = v10;
  v14 = *(_DWORD *)(v3 + 44);
  v15 = *(_DWORD *)(v3 + 48);
  v16 = *(_DWORD *)(v3 + 52);
  v17 = *(_DWORD *)(v3 + 36);
  v18 = *(_DWORD *)(v3 + 32);
  *((_DWORD *)v4 + 12) = *(_DWORD *)(v3 + 40);
  *(_DWORD *)v8 = v14;
  *(_DWORD *)(v8 + 4) = v15;
  *(_DWORD *)(v8 + 8) = v16;
  *((_DWORD *)v4 + 11) = v17;
  *((_DWORD *)v4 + 10) = v18;
  android::String8::String8((android::String8 *)((char *)v4 + 64), (const android::String8 *)(v3 + 56));
  *((_BYTE *)v4 + 68) = *(_BYTE *)(v3 + 60);
  return v4;
}

//----- (00026B1C) --------------------------------------------------------
_DWORD *__fastcall sub_26B1C(void *a1, int a2, unsigned int **a3)
{
  unsigned int **v3; // r5@1
  _DWORD *v4; // r4@1
  bool v5; // zf@1
  android::RefBase::weakref_type *v6; // r0@1
  unsigned int *v7; // r0@3
  unsigned int v8; // r1@5

  v3 = a3;
  v4 = a1;
  v5 = *(_DWORD *)a2 == 0;
  *(_DWORD *)a1 = *(_DWORD *)a2;
  v6 = *(android::RefBase::weakref_type **)(a2 + 4);
  v4[1] = v6;
  if ( !v5 )
    android::RefBase::weakref_type::incWeak(v6, v4);
  v7 = *v3;
  v5 = *v3 == 0;
  v4[2] = *v3;
  if ( !v5 )
  {
    __dmb();
    do
      v8 = __ldrex(v7);
    while ( __strex(v8 + 1, v7) );
  }
  return v4;
}

//----- (000272BC) --------------------------------------------------------
signed int __fastcall sub_272BC(int a1, _DWORD **a2, int a3, int a4, int a5, int a6)
{
  int v6; // r5@1
  int v7; // r10@1
  _DWORD **v8; // r8@1
  int v9; // r0@1
  unsigned int v10; // r7@3
  signed int v11; // r6@6
  int (__fastcall *v12)(int, char *, int, int); // r9@8
  int v13; // r0@8
  int v14; // r1@8
  int v15; // r0@8
  int v16; // r9@8
  int v17; // r9@10
  android::RefBase **v18; // r6@10
  android::RefBase *v19; // r0@11
  android::SyncFeatures *v20; // r0@20
  char *v21; // r0@22
  int v22; // r1@25
  int v23; // r0@25
  android::RefBase *v25; // [sp+Ch] [bp-94h]@11
  char buf; // [sp+10h] [bp-90h]@8
  int v27; // [sp+58h] [bp-48h]@10

  v6 = a1;
  v7 = a3;
  v8 = a2;
  v9 = v0;
  __dmb();
  if ( !(v9 & 1) )
    atrace_setup(v9, a2);
  v10 = 0xFFFFFF7C;
  if ( v0 & 2 )
    atrace_begin_body("updateTexImage");
  pthread_mutex_lock((pthread_mutex_t *)(v6 + 1052));
  if ( *(_BYTE *)(v6 + 1032) )
  {
    _android_log_print(6, "SurfaceFlinger", "updateTexImage: GLConsumer is abandoned!");
    v11 = -19;
  }
  else
  {
    v11 = android::GLConsumer::checkAndUpdateEglStateLocked((android::GLConsumer *)v6, 0);
    if ( !v11 )
    {
      android::BufferItem::BufferItem((android::BufferItem *)&buf);
      v11 = 0;
      v12 = *(int (__fastcall **)(int, char *, int, int))(*(_DWORD *)v6 + 40);
      v13 = sub_14318(v7, 0);
      v15 = v12(v6, &buf, v13, v14);
      v16 = v15;
      if ( v15 )
      {
        v10 = 0xFFFFFF7C;
        if ( v15 != 2 )
        {
          if ( v15 == 3 )
          {
            v11 = 3;
          }
          else
          {
            v21 = strerror(-v15);
            _android_log_print(6, "SurfaceFlinger", "updateTexImage: acquire failed: %s (%d)", v21, v16, a6);
            v11 = v16;
          }
        }
      }
      else
      {
        v10 = 0xFFFFFF7C;
        if ( v8
          && (v17 = v27,
              v18 = (android::RefBase **)(v6 + 16 * v27 + 8),
              ((int (__fastcall *)(_DWORD **, android::RefBase **, char *, _DWORD))**v8)(v8, v18, &buf, **v8) == 1) )
        {
          v19 = *v18;
          v25 = *v18;
          if ( v25 )
            android::RefBase::incStrong(v19, &v25);
          sub_274B0((_DWORD *)v6, v17, &v25);
          if ( v25 )
            android::RefBase::decStrong(v25, &v25);
          v11 = -2147483640;
        }
        else
        {
          v11 = android::GLConsumer::updateAndReleaseLocked(
                  (android::GLConsumer *)v6,
                  (const android::BufferItem *)&buf);
          if ( !v11 )
          {
            v20 = sub_234F0();
            if ( android::SyncFeatures::useNativeFenceSync(v20) )
              v11 = 0;
            else
              v11 = android::GLConsumer::bindTextureImageLocked((android::GLConsumer *)v6);
          }
        }
      }
      android::BufferItem::~BufferItem((android::BufferItem *)&buf);
    }
  }
  pthread_mutex_unlock((pthread_mutex_t *)(v6 + 1052));
  v23 = v0;
  __dmb();
  if ( !(v23 & 1) )
    atrace_setup(v23, v22);
  if ( **(_BYTE **)((char *)&GLOBAL_OFFSET_TABLE_ + v10) & 2 )
  {
    buf = 69;
    write(v0, &buf, 1u);
  }
  return v11;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (000274A8) --------------------------------------------------------
int __fastcall sub_274A8(int a1, int a2)
{
  return sub_14318(a2, 0);
}

//----- (000274B0) --------------------------------------------------------
int __fastcall sub_274B0(_DWORD *a1, int a2, android::RefBase **a3)
{
  _DWORD *v3; // r6@1
  int v4; // r4@1
  int v5; // r1@1
  android::RefBase *v6; // r0@1
  int (__fastcall *v7)(_DWORD *, int, android::RefBase **, _DWORD); // r7@1
  int v8; // r4@3
  android::RefBase *v10; // [sp+4h] [bp-1Ch]@1

  v3 = a1;
  v4 = a2;
  v5 = *a1;
  v6 = *a3;
  v7 = *(int (__fastcall **)(_DWORD *, int, android::RefBase **, _DWORD))(v5 + 44);
  v10 = *a3;
  if ( v10 )
    android::RefBase::incStrong(v6, &v10);
  v8 = v7(v3, v4, &v10, v3[302]);
  if ( v10 )
    android::RefBase::decStrong(v10, &v10);
  return v8;
}

//----- (000274F0) --------------------------------------------------------
int __fastcall sub_274F0(int a1)
{
  android::GLConsumer *v1; // r4@1
  pthread_mutex_t *v2; // r5@1
  int v3; // r4@1

  v1 = (android::GLConsumer *)a1;
  v2 = (pthread_mutex_t *)(a1 + 1052);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 1052));
  v3 = android::GLConsumer::bindTextureImageLocked(v1);
  pthread_mutex_unlock(v2);
  return v3;
}

//----- (0002754C) --------------------------------------------------------
int __fastcall sub_2754C(int a1)
{
  return *(_BYTE *)(a1 + 1748);
}

//----- (00027554) --------------------------------------------------------
int __fastcall sub_27554(int a1)
{
  return a1 + 1752;
}

//----- (0002755C) --------------------------------------------------------
int __fastcall sub_2755C(int a1, int a2)
{
  return (*(int (**)(void))(**(_DWORD **)(a2 + 1048) + 76))();
}

//----- (00027570) --------------------------------------------------------
int __fastcall sub_27570(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1
  int v5; // [sp+0h] [bp-18h]@1
  android::RefBase::weakref_type *v6; // [sp+4h] [bp-14h]@2

  v2 = a2;
  v3 = a1;
  v5 = *(_DWORD *)a2;
  if ( v5 )
  {
    v6 = *(android::RefBase::weakref_type **)(a2 + 4);
    android::RefBase::weakref_type::incWeak(v6, &v5);
  }
  android::ConsumerBase::setFrameAvailableListener(v3, &v5);
  if ( v5 )
    android::RefBase::weakref_type::decWeak(v6, &v5);
  pthread_mutex_lock((pthread_mutex_t *)(v3 + 1052));
  sub_2361C((void *)(v3 + 1740), v2);
  return pthread_mutex_unlock((pthread_mutex_t *)(v3 + 1052));
}
// 11124: using guessed type int __fastcall android::ConsumerBase::setFrameAvailableListener(_DWORD, _DWORD);

//----- (000275BC) --------------------------------------------------------
int __fastcall sub_275BC(int a1)
{
  int v1; // r5@1
  pthread_mutex_t *v2; // r4@1
  int result; // r0@6
  char *v4; // [sp+0h] [bp-18h]@1
  int v5; // [sp+4h] [bp-14h]@1

  v1 = a1;
  v2 = (pthread_mutex_t *)(a1 + 1052);
  v5 = 0;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 1052));
  v4 = 0;
  if ( *(_DWORD *)(v1 + 1740)
    && android::RefBase::weakref_type::attemptIncStrong(*(android::RefBase::weakref_type **)(v1 + 1744), &v4) == 1 )
  {
    v4 = *(char **)(v1 + 1740);
  }
  sub_123A8(&v5, &v4);
  if ( v4 )
    android::RefBase::decStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], &v4);
  pthread_mutex_unlock(v2);
  result = v5;
  if ( v5 )
  {
    (*(void (**)(void))(*(_DWORD *)v5 + 16))();
    result = v5;
    if ( v5 )
      result = android::RefBase::decStrong((android::RefBase *)(v5 + *(_DWORD *)(*(_DWORD *)v5 - 12)), &v5);
  }
  return result;
}

//----- (0002762C) --------------------------------------------------------
android::ConsumerBase *__fastcall sub_2762C(android::ConsumerBase *this)
{
  android::ConsumerBase *v1; // r4@1

  v1 = this;
  sub_278DC(this, 0);
  android::RefBase::~RefBase((android::ConsumerBase *)((char *)v1 + 1740));
  return v1;
}

//----- (00027654) --------------------------------------------------------
void __fastcall sub_27654(android::ConsumerBase *this)
{
  android::ConsumerBase *v1; // r4@1

  v1 = this;
  sub_278DC(this, 0);
  android::RefBase::~RefBase((android::ConsumerBase *)((char *)v1 + 1740));
  j_operator delete((void *)v1);
}

//----- (00027680) --------------------------------------------------------
int __fastcall sub_27680(char *a1)
{
  int v1; // r0@1

  v1 = sub_278DC((android::ConsumerBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)], 0);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 1740));
}

//----- (000276AC) --------------------------------------------------------
void __fastcall sub_276AC(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_278DC((android::ConsumerBase *)v1, 0);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1740));
  j_operator delete((void *)v1);
}

//----- (000276E0) --------------------------------------------------------
int __fastcall sub_276E0(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  return v1;
}

//----- (000276F0) --------------------------------------------------------
void __fastcall sub_276F0(int a1)
{
  void *v1; // r4@1

  v1 = (void *)a1;
  android::RefBase::~RefBase((android::RefBase *)(a1 + 4));
  j_operator delete(v1);
}

//----- (00027708) --------------------------------------------------------
int __fastcall sub_27708(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (00027718) --------------------------------------------------------
void __fastcall sub_27718(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (00027734) --------------------------------------------------------
int __fastcall sub_27734(int a1)
{
  int v1; // r4@1

  v1 = a1;
  *(_DWORD *)a1 = &off_429FC;
  *(_DWORD *)(a1 + 1772) = &off_42A48;
  android::Region::~Region(a1 + 1752, &off_429FC);
  if ( *(_DWORD *)(v1 + 1740) )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(v1 + 1744), (const void *)(v1 + 1740));
  sub_278DC((android::ConsumerBase *)v1, (int)&off_3FC44);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1772));
  return v1;
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 3FC44: using guessed type void **off_3FC44;
// 429FC: using guessed type void *off_429FC;
// 42A48: using guessed type void *off_42A48;

//----- (00027798) --------------------------------------------------------
void __fastcall sub_27798(int a1)
{
  int v1; // r4@1

  v1 = a1;
  *(_DWORD *)a1 = &off_429FC;
  *(_DWORD *)(a1 + 1772) = &off_42A48;
  android::Region::~Region(a1 + 1752, &off_429FC);
  if ( *(_DWORD *)(v1 + 1740) )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(v1 + 1744), (const void *)(v1 + 1740));
  sub_278DC((android::ConsumerBase *)v1, (int)&off_3FC44);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1772));
  j_operator delete((void *)v1);
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 3FC44: using guessed type void **off_3FC44;
// 429FC: using guessed type void *off_429FC;
// 42A48: using guessed type void *off_42A48;

//----- (00027800) --------------------------------------------------------
int __fastcall sub_27800(char *a1)
{
  int v1; // r1@1
  int v2; // r4@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_429FC;
  *(_DWORD *)&a1[v1 + 1772] = &off_42A48;
  android::Region::~Region(&a1[v1 + 1752], v1);
  if ( *(_DWORD *)(v2 + 1740) )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(v2 + 1744), (const void *)(v2 + 1740));
  sub_278DC((android::ConsumerBase *)v2, (int)&off_3FC44);
  return j_android::RefBase::~RefBase((android::RefBase *)(v2 + 1772));
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 3FC44: using guessed type void **off_3FC44;
// 429FC: using guessed type void *off_429FC;
// 42A48: using guessed type void *off_42A48;

//----- (0002786C) --------------------------------------------------------
void __fastcall sub_2786C(char *a1)
{
  int v1; // r1@1
  int v2; // r4@1

  v1 = *(_DWORD *)(*(_DWORD *)a1 - 12);
  v2 = (int)&a1[v1];
  *(_DWORD *)&a1[v1] = &off_429FC;
  *(_DWORD *)&a1[v1 + 1772] = &off_42A48;
  android::Region::~Region(&a1[v1 + 1752], v1);
  if ( *(_DWORD *)(v2 + 1740) )
    android::RefBase::weakref_type::decWeak(*(android::RefBase::weakref_type **)(v2 + 1744), (const void *)(v2 + 1740));
  sub_278DC((android::ConsumerBase *)v2, (int)&off_3FC44);
  android::RefBase::~RefBase((android::RefBase *)(v2 + 1772));
  j_operator delete((void *)v2);
}
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 3FC44: using guessed type void **off_3FC44;
// 429FC: using guessed type void *off_429FC;
// 42A48: using guessed type void *off_42A48;

//----- (000278DC) --------------------------------------------------------
int __fastcall sub_278DC(android::ConsumerBase *this, int a2)
{
  android::ConsumerBase *v2; // r4@1
  int v3; // r0@1
  int v4; // r0@1
  unsigned int *v5; // r0@2
  unsigned int v6; // r1@3
  int v7; // r0@5
  int v8; // r6@7
  int v9; // r0@8
  int v10; // t1@8
  unsigned int *v11; // r0@9
  unsigned int v12; // r1@10
  int v13; // r0@12
  unsigned int *v14; // r0@15
  unsigned int v15; // r1@17
  void *v16; // r0@19
  int v17; // r0@20
  unsigned int *v18; // r0@21
  unsigned int v19; // r1@22
  int v20; // r0@24

  v2 = this;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 20);
  v4 = *((_DWORD *)v2 + 434);
  if ( v4 )
  {
    v5 = (unsigned int *)(v4 + 4);
    __dmb();
    do
      v6 = __ldrex(v5);
    while ( __strex(v6 - 1, v5) );
    if ( v6 == 1 )
    {
      v7 = (int)(v5 - 1);
      if ( v7 )
        (*(void (**)(void))(*(_DWORD *)v7 + 4))();
    }
  }
  v8 = (int)v2 + 1728;
  do
  {
    v10 = *(_DWORD *)(v8 - 8);
    v8 -= 8;
    v9 = v10;
    if ( v10 )
    {
      v11 = (unsigned int *)(v9 + 4);
      __dmb();
      do
        v12 = __ldrex(v11);
      while ( __strex(v12 - 1, v11) );
      if ( v12 == 1 )
      {
        v13 = (int)(v11 - 1);
        if ( v13 )
          (*(void (**)(void))(*(_DWORD *)v13 + 4))();
      }
    }
  }
  while ( (android::ConsumerBase *)v8 != (android::ConsumerBase *)((char *)v2 + 1216) );
  v14 = (unsigned int *)*((_DWORD *)v2 + 275);
  if ( v14 )
  {
    __dmb();
    do
      v15 = __ldrex(v14);
    while ( __strex(v15 - 1, v14) );
    if ( v15 == 1 )
    {
      v16 = (void *)android::Fence::~Fence((android::Fence *)v14);
      operator delete(v16);
    }
  }
  v17 = *((_DWORD *)v2 + 264);
  if ( v17 )
  {
    v18 = (unsigned int *)(v17 + 4);
    __dmb();
    do
      v19 = __ldrex(v18);
    while ( __strex(v19 - 1, v18) );
    if ( v19 == 1 )
    {
      v20 = (int)(v18 - 1);
      if ( v20 )
        (*(void (**)(void))(*(_DWORD *)v20 + 4))();
    }
  }
  return j_android::ConsumerBase::~ConsumerBase(v2);
}

//----- (000279A4) --------------------------------------------------------
int __fastcall sub_279A4(int result)
{
  _DWORD *v5; // r3@1
  int v6; // r1@3
  int v7; // r12@3
  int v8; // r3@5

  __asm { VMOV.I32        D16, #0 }
  v5 = (_DWORD *)result;
  do
  {
    *v5 = 0;
    __asm { VSTR            D16, [R3,#4] }
    v5 += 3;
  }
  while ( v5 != (_DWORD *)(result + 36) );
  v6 = 0;
  __asm
  {
    VMOV.F32        S0, #1.0
    VLDR            S2, =0.0
  }
  v7 = result;
  *(_DWORD *)(result + 36) = 0;
  do
  {
    v8 = 0;
    _R2 = v7;
    do
    {
      __asm { VMOV.F32        S4, S2 }
      _ZF = v6 == v8++;
      if ( _ZF )
        __asm { VMOVEQ.F32      S4, S0 }
      __asm { VSTMIA          R2!, {S4} }
    }
    while ( !_ZF );
    ++v6;
    v7 += 12;
  }
  while ( v6 != 3 );
  return result;
}

//----- (000279FC) --------------------------------------------------------
int __fastcall sub_279FC(int result, int a2)
{
  int v2; // r3@1
  int v3; // r12@1
  int v4; // lr@1
  int v5; // r4@1
  int v6; // r5@1
  int v7; // r4@1
  int v8; // r3@1
  int v9; // r5@1

  v2 = *(_DWORD *)(a2 + 16);
  v3 = *(_DWORD *)a2;
  v4 = *(_DWORD *)(a2 + 4);
  v5 = *(_DWORD *)(a2 + 8);
  v6 = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(result + 20) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(result + 16) = v2;
  *(_DWORD *)(result + 12) = v6;
  *(_DWORD *)(result + 8) = v5;
  v7 = result + 24;
  *(_DWORD *)result = v3;
  *(_DWORD *)(result + 4) = v4;
  v8 = *(_DWORD *)(a2 + 28);
  v9 = *(_DWORD *)(a2 + 32);
  *(_DWORD *)v7 = *(_DWORD *)(a2 + 24);
  *(_DWORD *)(v7 + 4) = v8;
  *(_DWORD *)(v7 + 8) = v9;
  *(_DWORD *)(result + 36) = *(_DWORD *)(a2 + 36);
  return result;
}

//----- (00027A30) --------------------------------------------------------
int __fastcall sub_27A30(int a1, char a2)
{
  int v6; // r4@1
  int v7; // r0@1
  _DWORD *v8; // r3@1

  __asm { VMOV.I32        D16, #0 }
  v6 = a1;
  v7 = a1 + 36;
  v8 = (_DWORD *)v6;
  do
  {
    *v8 = 0;
    __asm { VSTR            D16, [R3,#4] }
    v8 += 3;
  }
  while ( v8 != (_DWORD *)v7 );
  sub_27A5C(v6, a2, 0, 0);
  return v6;
}

//----- (00027A5C) --------------------------------------------------------
signed int __fastcall sub_27A5C(int a1, char a2, int a3, int a4)
{
  char v4; // r5@1
  int v5; // r7@1
  int v7; // r4@1
  signed int v13; // r2@5
  signed int v14; // r2@9
  signed int v15; // r1@13
  int v16; // r1@16
  int v17; // r5@16
  int v18; // r2@16
  int v19; // r3@16
  int v20; // r7@16
  int v21; // r6@16
  int v22; // r1@16
  int v23; // r2@16
  int v24; // r3@16
  signed int result; // r0@16
  int v26; // r0@17
  int v27; // r1@18
  int v29; // [sp+0h] [bp-E0h]@16
  char v30; // [sp+28h] [bp-B8h]@16
  int v31; // [sp+2Ch] [bp-B4h]@16
  int v32; // [sp+30h] [bp-B0h]@16
  int v33; // [sp+34h] [bp-ACh]@16
  int v34; // [sp+38h] [bp-A8h]@16
  int v35; // [sp+3Ch] [bp-A4h]@16
  int v36; // [sp+40h] [bp-A0h]@16
  int v37; // [sp+44h] [bp-9Ch]@16
  int v38; // [sp+48h] [bp-98h]@16
  int v39; // [sp+4Ch] [bp-94h]@16
  int v40; // [sp+50h] [bp-90h]@2
  int v41; // [sp+54h] [bp-8Ch]@15
  int v42; // [sp+5Ch] [bp-84h]@15
  int v43; // [sp+60h] [bp-80h]@15
  int v44; // [sp+68h] [bp-78h]@15
  int v45; // [sp+74h] [bp-6Ch]@15
  char v46; // [sp+78h] [bp-68h]@2
  int v47; // [sp+88h] [bp-58h]@11
  int v48; // [sp+94h] [bp-4Ch]@11
  int v49; // [sp+9Ch] [bp-44h]@11
  int v50; // [sp+A0h] [bp-40h]@2
  int v51; // [sp+B8h] [bp-28h]@7
  int v52; // [sp+C4h] [bp-1Ch]@7

  v4 = a2;
  v5 = a4;
  _R6 = a3;
  v7 = a1;
  if ( a2 & 0x80 )
  {
    v26 = 0;
    __asm
    {
      VMOV.F32        S0, #1.0
      VLDR            S2, =0.0
    }
    *(_DWORD *)(v7 + 36) = 0;
    do
    {
      v27 = 0;
      _R2 = v7;
      do
      {
        __asm { VMOV.F32        S4, S2 }
        _ZF = v26 == v27++;
        if ( _ZF )
          __asm { VMOVEQ.F32      S4, S0 }
        __asm { VSTMIA          R2!, {S4} }
      }
      while ( !_ZF );
      ++v26;
      v7 += 12;
    }
    while ( v26 != 3 );
    result = -22;
  }
  else
  {
    sub_279A4((int)&v50);
    sub_279A4((int)&v46);
    sub_279A4((int)&v40);
    _R0 = v5;
    if ( v4 & 4 )
    {
      _R0 = _R6;
      _R6 = v5;
    }
    if ( v4 & 1 )
    {
      __asm { VMOV            S0, R6 }
      v13 = 260;
      __asm
      {
        VCMPE.F32       S0, #0.0
        VMRS            APSR_nzcv, FPSCR
      }
      if ( !_ZF )
        v13 = 261;
      v52 = v13;
      v50 = -1082130432;
      v51 = _R6;
    }
    if ( v4 & 2 )
    {
      __asm { VMOV            S0, R0 }
      v14 = 516;
      __asm
      {
        VCMPE.F32       S0, #0.0
        VMRS            APSR_nzcv, FPSCR
      }
      if ( !_ZF )
        v14 = 517;
      v49 = v14;
      v47 = -1082130432;
      v48 = _R0;
    }
    if ( v4 & 4 )
    {
      __asm { VMOV            S0, R0 }
      v15 = 1026;
      __asm
      {
        VCMPE.F32       S0, #0.0
        VMRS            APSR_nzcv, FPSCR
      }
      if ( !_ZF )
        v15 = 1027;
      v45 = v15;
      v40 = 0;
      v42 = -1082130432;
      v44 = _R0;
      v41 = 1065353216;
      v43 = 0;
    }
    sub_27B8C((int)&v29, (int)&v50, (int)&v46);
    sub_27B8C((int)&v30, (int)&v40, (int)&v29);
    v16 = v34;
    v17 = v7 + 24;
    v18 = *(_DWORD *)&v30;
    v19 = v31;
    v20 = v32;
    v21 = v33;
    *(_DWORD *)(v7 + 20) = v35;
    *(_DWORD *)(v7 + 16) = v16;
    *(_DWORD *)(v7 + 12) = v21;
    *(_DWORD *)v7 = v18;
    *(_DWORD *)(v7 + 4) = v19;
    *(_DWORD *)(v7 + 8) = v20;
    v22 = v37;
    v23 = v38;
    v24 = v39;
    *(_DWORD *)v17 = v36;
    *(_DWORD *)(v17 + 4) = v22;
    *(_DWORD *)(v17 + 8) = v23;
    *(_DWORD *)(v17 + 12) = v24;
    result = 0;
  }
  return result;
}

//----- (00027B8C) --------------------------------------------------------
int __fastcall sub_27B8C(int result, int a2, int _R2)
{
  int v3; // r3@1
  int v4; // r3@2
  int v5; // r12@2
  int v6; // lr@2
  int v7; // r4@2
  int v8; // r5@2
  int v9; // r4@2
  int v10; // r3@2
  int v11; // r5@2
  unsigned int v12; // r1@2
  int v13; // r12@5
  signed int v18; // r2@6
  int v20; // r4@9
  int v21; // r4@10
  int v22; // [sp+0h] [bp-40h]@5
  int v23; // [sp+4h] [bp-3Ch]@5
  int v24; // [sp+8h] [bp-38h]@5
  int v25; // [sp+Ch] [bp-34h]@5
  int v26; // [sp+10h] [bp-30h]@5
  int v27; // [sp+14h] [bp-2Ch]@5
  int v28; // [sp+18h] [bp-28h]@5
  int v29; // [sp+1Ch] [bp-24h]@5
  int v30; // [sp+20h] [bp-20h]@5

  v3 = *(_DWORD *)(a2 + 36);
  if ( !v3 )
  {
    v4 = *(_DWORD *)(_R2 + 16);
    v5 = *(_DWORD *)_R2;
    v6 = *(_DWORD *)(_R2 + 4);
    v7 = *(_DWORD *)(_R2 + 8);
    v8 = *(_DWORD *)(_R2 + 12);
    *(_DWORD *)(result + 20) = *(_DWORD *)(_R2 + 20);
    *(_DWORD *)(result + 16) = v4;
    *(_DWORD *)(result + 12) = v8;
    *(_DWORD *)(result + 8) = v7;
    v9 = result + 24;
    *(_DWORD *)result = v5;
    *(_DWORD *)(result + 4) = v6;
    v10 = *(_DWORD *)(_R2 + 28);
    v11 = *(_DWORD *)(_R2 + 32);
    *(_DWORD *)v9 = *(_DWORD *)(_R2 + 24);
    *(_DWORD *)(v9 + 4) = v10;
    *(_DWORD *)(v9 + 8) = v11;
    v12 = *(_DWORD *)(_R2 + 36);
LABEL_3:
    *(_DWORD *)(result + 36) = v12;
    return result;
  }
  v27 = *(_DWORD *)(a2 + 20);
  v26 = *(_DWORD *)(a2 + 16);
  v25 = *(_DWORD *)(a2 + 12);
  v24 = *(_DWORD *)(a2 + 8);
  v22 = *(_DWORD *)a2;
  v23 = *(_DWORD *)(a2 + 4);
  v30 = *(_DWORD *)(a2 + 32);
  v29 = *(_DWORD *)(a2 + 28);
  v28 = *(_DWORD *)(a2 + 24);
  v13 = *(_DWORD *)(_R2 + 36);
  if ( v13 )
  {
    __asm
    {
      VLDR            S0, [R2,#4]
      VLDR            S2, [R2,#8]
      VLDR            S4, [R2,#0xC]
      VLDR            S6, [R2,#0x10]
      VLDR            S8, [R2,#0x14]
      VLDR            S10, [R2,#0x18]
      VLDR            S12, [R2,#0x1C]
      VLDR            S14, [R2]
      VLDR            S1, [R2,#0x20]
    }
    v18 = -12;
    do
    {
      _R7 = a2 + v18;
      __asm
      {
        VLDR            S5, [R7,#0x18]
        VMUL.F32        S9, S5, S0
        VMUL.F32        S11, S5, S6
        VMUL.F32        S5, S5, S12
        VLDR            S3, [R7,#0xC]
        VLDR            S7, [R7,#0x24]
        VMLA.F32        S9, S3, S14
      }
      v18 += 4;
      __asm
      {
        VMLA.F32        S11, S3, S4
        VMLA.F32        S5, S3, S10
        VMLA.F32        S9, S7, S2
        VMLA.F32        S11, S7, S8
        VMLA.F32        S5, S7, S1
        VSTR            S9, [R7,#0xC]
        VSTR            S11, [R7,#0x18]
        VSTR            S5, [R7,#0x24]
      }
    }
    while ( !_ZF );
    v12 = (unsigned __int8)(v3 | v13) | 0x80000000;
    *(_DWORD *)(result + 20) = v27;
    *(_DWORD *)(result + 16) = v26;
    *(_DWORD *)(result + 12) = v25;
    v20 = result + 24;
    *(_DWORD *)(result + 8) = v24;
    *(_DWORD *)(result + 4) = v23;
    *(_DWORD *)result = v22;
    *(_DWORD *)v20 = v28;
    *(_DWORD *)(v20 + 4) = v29;
    *(_DWORD *)(v20 + 8) = v30;
    goto LABEL_3;
  }
  *(_DWORD *)(result + 20) = v27;
  *(_DWORD *)(result + 16) = v26;
  *(_DWORD *)(result + 12) = v25;
  v21 = result + 24;
  *(_DWORD *)(result + 8) = v24;
  *(_DWORD *)(result + 4) = v23;
  *(_DWORD *)result = v22;
  *(_DWORD *)v21 = v28;
  *(_DWORD *)(v21 + 4) = v29;
  *(_DWORD *)(v21 + 8) = v30;
  *(_DWORD *)(result + 36) = v3;
  return result;
}

//----- (00027CC4) --------------------------------------------------------
int __fastcall sub_27CC4(int a1, int a2)
{
  return a1 + 12 * a2;
}

//----- (00027CD0) --------------------------------------------------------
signed int __fastcall sub_27CD0(int a1)
{
  unsigned int v1; // r0@1
  signed int v2; // r1@1

  v1 = sub_27CE8(a1);
  v2 = 0;
  if ( v1 > 1 )
    v2 = 1;
  return v2;
}

//----- (00027CE8) --------------------------------------------------------
signed int __fastcall sub_27CE8(int _R0)
{
  signed int v1; // r1@1
  signed int v6; // r2@6
  signed int v7; // r12@26

  v1 = *(_DWORD *)(_R0 + 36);
  if ( v1 > -1 )
    return v1;
  __asm
  {
    VLDR            S8, [R0,#0xC]
    VCMPE.F32       S8, #0.0
    VLDR            S4, [R0,#4]
    VLDR            S10, [R0]
    VLDR            S6, [R0,#0x10]
    VLDR            S2, [R0,#0x18]
    VLDR            S0, [R0,#0x1C]
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
    goto LABEL_48;
  __asm
  {
    VCMPE.F32       S4, #0.0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _ZF )
  {
    __asm { VCMPE.F32       S10, #0.0 }
    v6 = 0;
    __asm
    {
      VMOV.F32        S4, #-1.0
      VABS.F32        S8, S10
      VADD.F32        S8, S8, S4
      VMRS            APSR_nzcv, FPSCR
      VCMPE.F32       S6, #0.0
    }
    if ( _NF )
      v6 = 1;
    __asm
    {
      VMRS            APSR_nzcv, FPSCR
      VCMPE.F32       S8, #0.0
    }
    if ( _NF )
      v6 |= 2u;
    __asm { VMRS            APSR_nzcv, FPSCR }
    if ( !_ZF )
      goto LABEL_27;
    __asm
    {
      VABS.F32        S6, S6
      VADD.F32        S4, S6, S4
    }
  }
  else
  {
LABEL_48:
    __asm
    {
      VCMPE.F32       S10, #0.0
      VMRS            APSR_nzcv, FPSCR
    }
    if ( !_ZF )
      goto LABEL_49;
    __asm
    {
      VCMPE.F32       S6, #0.0
      VMRS            APSR_nzcv, FPSCR
    }
    if ( !_ZF )
    {
LABEL_49:
      v1 = 0x8000;
      *(_DWORD *)(_R0 + 36) = 0x8000;
      goto LABEL_39;
    }
    __asm { VCMPE.F32       S8, #0.0 }
    v6 = 4;
    __asm
    {
      VMOV.F32        S6, #-1.0
      VABS.F32        S10, S8
      VADD.F32        S10, S10, S6
      VMRS            APSR_nzcv, FPSCR
      VCMPE.F32       S4, #0.0
    }
    if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
      v6 = 6;
    __asm
    {
      VMRS            APSR_nzcv, FPSCR
      VCMPE.F32       S10, #0.0
    }
    if ( _NF )
      v6 |= 1u;
    __asm { VMRS            APSR_nzcv, FPSCR }
    if ( !_ZF )
      goto LABEL_27;
    __asm
    {
      VABS.F32        S4, S4
      VADD.F32        S4, S4, S6
    }
  }
  __asm
  {
    VCMPE.F32       S4, #0.0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _ZF )
  {
    v7 = 0;
    goto LABEL_28;
  }
LABEL_27:
  v7 = 1;
LABEL_28:
  v1 = v6 << 8;
  *(_DWORD *)(_R0 + 36) = v6 << 8;
  if ( v6 & 0x80 )
  {
LABEL_39:
    v1 |= 8u;
    goto LABEL_40;
  }
  if ( v6 & 4 || (v6 & 3) == 3 )
  {
    v1 |= 2u;
    *(_DWORD *)(_R0 + 36) = v1;
  }
  if ( v6 & 1 )
  {
    v1 ^= 4u;
    *(_DWORD *)(_R0 + 36) = v1;
  }
  if ( v6 & 2 )
  {
    v1 ^= 4u;
    *(_DWORD *)(_R0 + 36) = v1;
  }
  if ( v7 != 1 )
    goto LABEL_41;
  v1 |= 4u;
LABEL_40:
  *(_DWORD *)(_R0 + 36) = v1;
LABEL_41:
  __asm
  {
    VCMPE.F32       S2, #0.0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
    goto LABEL_50;
  __asm
  {
    VCMPE.F32       S0, #0.0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
  {
LABEL_50:
    v1 |= 1u;
    *(_DWORD *)(_R0 + 36) = v1;
  }
  return v1;
}

//----- (00027E30) --------------------------------------------------------
int __fastcall sub_27E30(int a1)
{
  return *(_DWORD *)(a1 + 24);
}

//----- (00027E34) --------------------------------------------------------
int __fastcall sub_27E34(int a1)
{
  return *(_DWORD *)(a1 + 28);
}

//----- (00027E38) --------------------------------------------------------
int __fastcall sub_27E38(int result, int _R1, int _R2)
{
  int v7; // r3@1
  unsigned int v8; // r2@1

  __asm
  {
    VMOV            S2, R2
    VCMPE.F32       S2, #0.0
  }
  *(_DWORD *)(result + 24) = _R1;
  *(_DWORD *)(result + 28) = _R2;
  *(_DWORD *)(result + 32) = 1065353216;
  __asm { VMOV            S0, R1 }
  v7 = *(_DWORD *)(result + 36);
  __asm
  {
    VMRS            APSR_nzcv, FPSCR
    VCMPE.F32       S0, #0.0
  }
  v8 = v7 | 1;
  if ( _ZF )
    v8 = v7 & 0xFFFFFFFE;
  __asm { VMRS            APSR_nzcv, FPSCR }
  if ( !_ZF )
    v8 = v7 | 1;
  *(_DWORD *)(result + 36) = v8;
  return result;
}

//----- (00027E70) --------------------------------------------------------
int __fastcall sub_27E70(int result, int a2, int a3, int a4, int a5)
{
  *(_DWORD *)(result + 12) = a3;
  *(_DWORD *)result = a2;
  *(_DWORD *)(result + 4) = a4;
  __asm
  {
    VLDR            S0, [SP,#arg_0]
    VSTR            S0, [R0,#0x10]
  }
  *(_DWORD *)(result + 8) = 0;
  *(_DWORD *)(result + 20) = 0;
  *(_DWORD *)(result + 36) = 2147483648;
  return result;
}

//----- (00027E8C) --------------------------------------------------------
void __fastcall sub_27E8C(int a1, int _R1, int _R2, int _R3)
{
  __asm
  {
    VMOV            S0, R3
    VCVT.F32.S32    S0, S0
    VLDR            S4, [R1,#0xC]
    VMOV            S8, R2
    VLDR            S2, [R1]
    VMUL.F32        S4, S0, S4
    VLDR            S6, [R1,#0x18]
    VCVT.F32.S32    S8, S8
    VMLA.F32        S4, S8, S2
    VADD.F32        S2, S6, S4
    VSTR            S2, [R0]
    VLDR            S4, [R1,#0x10]
    VMUL.F32        S0, S0, S4
    VLDR            S2, [R1,#4]
    VLDR            S6, [R1,#0x1C]
    VMLA.F32        S0, S8, S2
    VADD.F32        S0, S6, S0
    VSTR            S0, [R0,#4]
  }
}

//----- (00027ED8) --------------------------------------------------------
float __fastcall sub_27ED8(int a1, int a2, int _R2)
{
  float result; // r0@25

  *(_DWORD *)a1 = 0;
  _R5 = a2;
  *(_DWORD *)(a1 + 4) = 0;
  *(_DWORD *)(a1 + 8) = 0;
  __asm
  {
    VLDR            S0, [R2]
    VLDR            S2, [R2,#4]
    VLDR            S4, [R2,#8]
    VLDR            S6, [R2,#0xC]
    VCVT.F32.S32    S18, S6
    VCVT.F32.S32    S20, S2
    VCVT.F32.S32    S22, S0
    VLDR            S0, [R5]
    VLDR            S24, [R5,#4]
    VLDR            S2, [R5,#0xC]
    VLDR            S26, [R5,#0x10]
    VCVT.F32.S32    S28, S4
    VMUL.F32        S4, S18, S2
    VMUL.F32        S6, S22, S0
    VMUL.F32        S2, S20, S2
    VMUL.F32        S0, S28, S0
    VMOV.F32        S16, #0.5
    VADD.F32        S8, S6, S4
    VADD.F32        S10, S0, S2
    VADD.F32        S0, S0, S4
    VLDR            S4, [R5,#0x18]
    VADD.F32        S30, S4, S8
    VADD.F32        S17, S4, S10
    VADD.F32        S19, S4, S0
    VADD.F32        S2, S6, S2
    VCMPE.F32       S30, S19
    VMOV.F32        S0, S19
    VADD.F32        S21, S4, S2
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _NF )
    __asm { VMOVMI.F32      S0, S30 }
  __asm
  {
    VCMPE.F32       S0, S17
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
    __asm { VMOVGT.F32      S0, S17 }
  __asm
  {
    VCMPE.F32       S0, S21
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
    __asm { VMOVGT.F32      S0, S21 }
  __asm
  {
    VADD.F32        S0, S0, S16
    VMOV            R0, S0
  }
  _R0 = floorf(_R0);
  __asm
  {
    VMUL.F32        S0, S18, S26
    VMUL.F32        S2, S22, S24
    VMUL.F32        S6, S28, S24
    VMUL.F32        S4, S20, S26
    VADD.F32        S8, S2, S0
    VADD.F32        S0, S6, S0
    VADD.F32        S10, S6, S4
    VLDR            S6, [R5,#0x1C]
    VADD.F32        S18, S6, S8
    VADD.F32        S22, S6, S0
    VADD.F32        S20, S6, S10
    VADD.F32        S2, S2, S4
    VCMPE.F32       S18, S22
    VMOV.F32        S0, S22
    VADD.F32        S24, S6, S2
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _NF )
    __asm { VMOVMI.F32      S0, S18 }
  __asm
  {
    VCMPE.F32       S0, S20
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
    __asm { VMOVGT.F32      S0, S20 }
  __asm
  {
    VCMPE.F32       S0, S24
    VMRS            APSR_nzcv, FPSCR
    VCMPE.F32       S30, S19
  }
  if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
    __asm { VMOVGT.F32      S0, S24 }
  __asm
  {
    VADD.F32        S0, S0, S16
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
    __asm { VMOVGT.F32      S19, S30 }
  __asm
  {
    VMOV            R1, S0
    VMOV            S0, R0
    VCMPE.F32       S19, S17
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _NF )
    __asm { VMOVMI.F32      S19, S17 }
  __asm
  {
    VCMPE.F32       S19, S21
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _NF )
    __asm { VMOVMI.F32      S19, S21 }
  __asm
  {
    VCVTR.S32.F32   S28, S0
    VADD.F32        S26, S19, S16
  }
  _R0 = floorf(_R1);
  __asm
  {
    VMOV            S0, R0
    VMOV            R0, S26
    VSTR            S28, [R4]
    VCVTR.S32.F32   S26, S0
  }
  _R0 = floorf(_R0);
  __asm
  {
    VCMPE.F32       S18, S22
    VMOV            S2, R0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
    __asm { VMOVGT.F32      S22, S18 }
  __asm
  {
    VCMPE.F32       S22, S20
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _NF )
    __asm { VMOVMI.F32      S22, S20 }
  __asm
  {
    VCMPE.F32       S22, S24
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _NF )
    __asm { VMOVMI.F32      S22, S24 }
  __asm
  {
    VSTR            S26, [R4,#4]
    VADD.F32        S0, S22, S16
    VCVTR.S32.F32   S16, S2
    VMOV            R0, S0
  }
  result = floorf(_R0);
  __asm
  {
    VMOV            S0, R0
    VSTR            S16, [R4,#8]
    VCVTR.S32.F32   S0, S0
    VSTR            S0, [R4,#0xC]
  }
  return result;
}

//----- (000280A4) --------------------------------------------------------
int __fastcall sub_280A4(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v16; // r1@2
  int result; // r0@2
  int v18; // r7@5
  int i; // r8@5
  char v23; // [sp+4h] [bp-6Ch]@2
  char v24; // [sp+18h] [bp-58h]@8
  char v25; // [sp+28h] [bp-48h]@8
  char v26; // [sp+38h] [bp-38h]@6

  v3 = a1;
  v4 = a3;
  _R5 = a2;
  android::Region::Region(a1);
  if ( (unsigned int)sub_27CE8(_R5) >= 2 )
  {
    if ( sub_27CE8(_R5) & 0x8000 )
    {
      _R2 = &v24;
      _R0 = *(_DWORD *)(v4 + 4) + 16 * *(_DWORD *)(v4 + 8) - 16;
      __asm
      {
        VLD1.32         {D16-D17}, [R0]
        VST1.64         {D16-D17}, [R2]
      }
      sub_27ED8((int)&v25, _R5, (int)&v24);
      result = android::Region::set(v3, &v25);
    }
    else
    {
      v18 = android::Region::begin(v4);
      result = android::Region::end(v4);
      for ( i = result; i != v18; v18 += 16 )
      {
        sub_27ED8((int)&v26, _R5, v18);
        result = android::Region::orSelf(v3, &v26);
      }
    }
  }
  else
  {
    __asm
    {
      VMOV.F32        S16, #0.5
      VLDR            S0, [R5,#0x18]
      VADD.F32        S0, S0, S16
      VLDR            S18, [R5,#0x1C]
      VMOV            R0, S0
    }
    _R0 = floorf(_R0);
    __asm
    {
      VADD.F32        S0, S18, S16
      VMOV            S16, R0
      VMOV            R1, S0
    }
    _R0 = floorf(_R1);
    __asm
    {
      VMOV            S0, R0
      VCVTR.S32.F32   S2, S16
      VCVTR.S32.F32   S0, S0
      VMOV            R2, S2
      VMOV            R3, S0
    }
    android::Region::translate(&v23, v4, _R2, _R3);
    android::Region::operator=(v3);
    result = android::Region::~Region(&v23, v16);
  }
  return result;
}
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 10794: using guessed type int __fastcall android::Region::set(_DWORD, _DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);
// 10BC0: using guessed type int __fastcall android::Region::orSelf(_DWORD, _DWORD);
// 1122C: using guessed type int __fastcall android::Region::translate(_DWORD, _DWORD, _DWORD, _DWORD);
// 11238: using guessed type int __fastcall android::Region::begin(_DWORD);
// 11244: using guessed type int __fastcall android::Region::end(_DWORD);

//----- (00028188) --------------------------------------------------------
signed int __fastcall sub_28188(int a1)
{
  __int16 v1; // r0@1
  signed int v2; // r1@1

  v1 = sub_27CE8(a1);
  v2 = 0;
  if ( !(v1 & 0x8000) )
    v2 = 1;
  return v2;
}

//----- (000281A0) --------------------------------------------------------
int __fastcall sub_281A0(int a1, int a2)
{
  int result; // r0@1
  unsigned int v4; // r1@1
  int v5; // r2@2
  int v6; // r12@2
  int v7; // lr@2
  int v8; // r3@2
  int v9; // r5@2
  int v10; // r5@2
  int v11; // r4@2
  int v12; // r1@2
  int v13; // r2@2
  int v14; // r3@2
  int v15; // r5@2

  _R4 = a2;
  result = sub_279A4(a1);
  v4 = *(_DWORD *)(_R4 + 36);
  if ( v4 > 1 )
  {
    __asm
    {
      VLDR            S2, [R4]
      VLDR            S6, [R4,#0x10]
      VMUL.F32        S8, S2, S6
      VLDR            S0, [R4,#4]
      VLDR            S4, [R4,#0xC]
      VMOV.F32        S10, #1.0
      VLDR            S14, [R4,#0x18]
      VMLS.F32        S8, S4, S0
      VLDR            S1, [R4,#0x1C]
      VDIV.F32        S8, S10, S8
      VMUL.F32        S10, S4, S8
      VMUL.F32        S12, S0, S8
      VMUL.F32        S6, S6, S8
      VMUL.F32        S2, S2, S8
      VNMUL.F32       S0, S0, S8
      VMUL.F32        S10, S10, S1
      VMUL.F32        S12, S12, S14
      VNMUL.F32       S4, S4, S8
      VSTR            S6, [R0]
      VSTR            S0, [R0,#4]
      VMLS.F32        S10, S14, S6
      VMLS.F32        S12, S1, S2
      VSTR            S4, [R0,#0xC]
      VSTR            S2, [R0,#0x10]
    }
    *(_DWORD *)(result + 36) = v4;
    __asm
    {
      VLDR            S0, [R0,#0x18]
      VLDR            S2, [R0,#0x1C]
      VADD.F32        S0, S0, S10
      VADD.F32        S2, S2, S12
      VSTR            S0, [R0,#0x18]
      VSTR            S2, [R0,#0x1C]
    }
  }
  else
  {
    v5 = *(_DWORD *)(_R4 + 16);
    v6 = *(_DWORD *)_R4;
    v7 = *(_DWORD *)(_R4 + 4);
    v8 = *(_DWORD *)(_R4 + 8);
    v9 = *(_DWORD *)(_R4 + 12);
    *(_DWORD *)(result + 20) = *(_DWORD *)(_R4 + 20);
    *(_DWORD *)(result + 16) = v5;
    *(_DWORD *)(result + 12) = v9;
    v10 = _R4 + 24;
    *(_DWORD *)(result + 8) = v8;
    v11 = result + 24;
    *(_DWORD *)result = v6;
    *(_DWORD *)(result + 4) = v7;
    v12 = *(_DWORD *)v10;
    v13 = *(_DWORD *)(v10 + 4);
    v14 = *(_DWORD *)(v10 + 8);
    v15 = *(_DWORD *)(v10 + 12);
    *(_DWORD *)v11 = v12;
    *(_DWORD *)(v11 + 4) = v13;
    *(_DWORD *)(v11 + 8) = v14;
    *(_DWORD *)(v11 + 12) = v15;
    __asm
    {
      VLDR            S0, [R0,#0x18]
      VNEG.F32        S0, S0
      VSTR            S0, [R0,#0x18]
      VLDR            S0, [R0,#0x1C]
      VNEG.F32        S0, S0
      VSTR            S0, [R0,#0x1C]
    }
  }
  return result;
}

//----- (00028270) --------------------------------------------------------
int __fastcall sub_28270(int a1)
{
  return (unsigned __int8)sub_27CE8(a1);
}

//----- (00028280) --------------------------------------------------------
int __fastcall sub_28280(int a1)
{
  return (unsigned __int16)sub_27CE8(a1) >> 8;
}

//----- (00028290) --------------------------------------------------------
int __fastcall sub_28290(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // r4@1
  int v5; // r6@1
  unsigned int v6; // r10@1
  int v7; // r8@1
  int v8; // r6@1
  void (__fastcall *v9)(int, signed int, int, int); // r7@1
  signed int v10; // r0@1
  int v11; // r2@1
  int v12; // r3@1
  int v13; // r6@1
  void (__fastcall *v14)(int, int, int); // r5@1
  int v15; // r7@1
  int v16; // r0@1

  v4 = a1;
  v5 = a4;
  v6 = a3;
  v7 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 1076));
  android::ConsumerBase::ConsumerBase(v4, &off_3FC64, v5, 0);
  *(_DWORD *)v4 = &off_42BA4;
  *(_DWORD *)(v4 + 1056) = &off_42BFC;
  *(_DWORD *)(v4 + 1060) = v6;
  *(_DWORD *)(v4 + 1064) = -1;
  *(_DWORD *)(v4 + 1068) = 0;
  *(_DWORD *)(v4 + 1072) = v7;
  *(_DWORD *)(v4 + 1076) = &off_42C3C;
  android::String8::setTo((android::String8 *)(v4 + 1036), "FramebufferSurface");
  (*(void (**)(void))(**(_DWORD **)(v4 + 1048) + 56))();
  (*(void (**)(void))(**(_DWORD **)(v4 + 1048) + 68))();
  v8 = *(_DWORD *)(v4 + 1048);
  v9 = *(void (__fastcall **)(int, signed int, int, int))(*(_DWORD *)v8 + 60);
  v10 = sub_2950C(*(_DWORD *)(v4 + 1072), v6);
  v9(v8, v10, v11, v12);
  v13 = *(_DWORD *)(v4 + 1048);
  v14 = *(void (__fastcall **)(int, int, int))(*(_DWORD *)v13 + 40);
  v15 = sub_29540(*(_DWORD *)(v4 + 1072), v6);
  v16 = sub_29558(*(_DWORD *)(v4 + 1072), v6);
  v14(v13, v15, v16);
  (*(void (**)(void))(**(_DWORD **)(v4 + 1048) + 44))();
  return v4;
}
// 11250: using guessed type int __fastcall android::ConsumerBase::ConsumerBase(_DWORD, _DWORD, _DWORD, _DWORD);
// 3FC64: using guessed type void *;
// 42BA4: using guessed type void *off_42BA4;
// 42BFC: using guessed type void *off_42BFC;
// 42C3C: using guessed type void *off_42C3C;
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00028374) --------------------------------------------------------
int sub_28374()
{
  return 0;
}

//----- (0002837C) --------------------------------------------------------
int sub_2837C()
{
  return 0;
}

//----- (00028384) --------------------------------------------------------
int sub_28384()
{
  return 0;
}

//----- (00028388) --------------------------------------------------------
int __fastcall sub_28388(int a1, void *a2, unsigned int **a3)
{
  int v3; // r7@1
  unsigned int **v4; // r10@1
  pthread_mutex_t *v5; // r4@1
  void *v6; // r8@1
  int v7; // r0@1
  int v8; // r5@1
  int v9; // r5@2
  int (__fastcall *v10)(int, int, android::RefBase **, _DWORD); // r9@4
  int v11; // r0@9
  int v12; // r5@9
  unsigned int *v13; // r7@9
  unsigned int v14; // r0@11
  unsigned int *v15; // r0@12
  unsigned int v16; // r1@14
  void *v17; // r0@16
  void *v18; // r0@17
  android::RefBase **v19; // r1@17
  char *v20; // r3@21
  signed int v21; // r0@21
  char *v22; // r2@21
  int v24; // [sp+0h] [bp-98h]@21
  android::RefBase *v25; // [sp+Ch] [bp-8Ch]@4
  char v26; // [sp+10h] [bp-88h]@1
  unsigned int *v27; // [sp+14h] [bp-84h]@9
  int v28; // [sp+58h] [bp-40h]@3

  v3 = a1;
  v4 = a3;
  v5 = (pthread_mutex_t *)(a1 + 1052);
  v6 = a2;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 1052));
  android::BufferItem::BufferItem((android::BufferItem *)&v26);
  v7 = (*(int (__fastcall **)(int, char *, _DWORD, _DWORD))(*(_DWORD *)v3 + 40))(v3, &v26, 0, 0);
  v8 = v7;
  if ( !v7 )
  {
    v9 = *(_DWORD *)(v3 + 1064);
    if ( v9 == -1 || v28 == v9 )
      goto LABEL_27;
    v10 = *(int (__fastcall **)(int, int, android::RefBase **, _DWORD))(*(_DWORD *)v3 + 44);
    v25 = *(android::RefBase **)(v3 + 1068);
    if ( v25 )
      android::RefBase::incStrong(v25, &v25);
    v8 = v10(v3, v9, &v25, 0);
    if ( v25 )
      android::RefBase::decStrong(v25, &v25);
    if ( v8 > -1 )
    {
LABEL_27:
      v11 = v28;
      v12 = v3 + 1068;
      *(_DWORD *)(v3 + 1064) = v28;
      sub_1A074((void *)(v3 + 1068), (android::RefBase **)(v3 + 16 * v11 + 8));
      v13 = v27;
      if ( v27 )
      {
        __dmb();
        do
          v14 = __ldrex(v13);
        while ( __strex(v14 + 1, v13) );
      }
      v15 = *v4;
      if ( *v4 )
      {
        __dmb();
        do
          v16 = __ldrex(v15);
        while ( __strex(v16 - 1, v15) );
        if ( v16 == 1 )
        {
          v17 = (void *)android::Fence::~Fence((android::Fence *)v15);
          operator delete(v17);
        }
      }
      v18 = v6;
      v19 = (android::RefBase **)v12;
      *v4 = v13;
      goto LABEL_20;
    }
    v20 = strerror(-v8);
    v21 = -39825;
    v22 = (char *)&GLOBAL_OFFSET_TABLE_;
    v24 = v8;
LABEL_23:
    _android_log_print(6, v22 - 48074, &v22[v21], v20, v24, 0);
    goto LABEL_24;
  }
  if ( v7 != 2 )
  {
    v20 = strerror(-v7);
    v21 = -39857;
    v22 = (char *)&GLOBAL_OFFSET_TABLE_;
    v24 = v8;
    goto LABEL_23;
  }
  v19 = (android::RefBase **)(v3 + 1068);
  v18 = v6;
LABEL_20:
  sub_1A074(v18, v19);
  v8 = 0;
LABEL_24:
  android::BufferItem::~BufferItem((android::BufferItem *)&v26);
  pthread_mutex_unlock(v5);
  return v8;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (000284D0) --------------------------------------------------------
android::RefBase *__fastcall sub_284D0(int a1)
{
  int v1; // r4@1
  int v2; // r0@1
  int v3; // r5@1
  char *v4; // r3@2
  signed int v5; // r3@3
  android::RefBase *result; // r0@5
  int v7; // [sp+8h] [bp-18h]@1
  android::RefBase *v8; // [sp+Ch] [bp-14h]@1

  v1 = a1;
  v8 = 0;
  v7 = 0;
  v2 = sub_28388(a1, &v8, (unsigned int **)&v7);
  v3 = v2;
  if ( v2 )
  {
    v4 = strerror(-v2);
    _android_log_print(6, "SurfaceFlinger", "error latching nnext FramebufferSurface buffer: %s (%d)", v4, v3);
  }
  else
  {
    v5 = sub_2A8D0(*(_DWORD *)(v1 + 1072), *(_DWORD *)(v1 + 1060), (android::Fence **)&v7, (int)&v8);
    if ( v5 )
      _android_log_print(6, "SurfaceFlinger", "error posting framebuffer: %d", v5);
  }
  sub_17AF0((unsigned int **)&v7);
  result = v8;
  if ( v8 )
    result = (android::RefBase *)android::RefBase::decStrong(v8, &v8);
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00028554) --------------------------------------------------------
signed int __fastcall sub_28554(android::ConsumerBase *a1, int a2)
{
  int v2; // r5@1
  android::ConsumerBase *v3; // r4@1
  signed int result; // r0@1

  v2 = a2;
  v3 = a1;
  android::ConsumerBase::freeBufferLocked(a1, a2);
  result = *((_DWORD *)v3 + 266);
  if ( result == v2 )
  {
    result = -1;
    *((_DWORD *)v3 + 266) = -1;
  }
  return result;
}

//----- (00028574) --------------------------------------------------------
unsigned int **__fastcall sub_28574(int a1)
{
  int v1; // r4@1
  int v2; // r5@2
  int v3; // r4@5
  char *v5; // r0@8
  android::RefBase *v6; // [sp+8h] [bp-18h]@3
  int v7; // [sp+Ch] [bp-14h]@1

  v1 = a1;
  sub_2A2CC((unsigned int **)&v7, *(_DWORD *)(v1 + 1072), *(_DWORD *)(v1 + 1060));
  if ( *(_DWORD *)(v7 + 4) != -1 )
  {
    v2 = *(_DWORD *)(v1 + 1064);
    if ( v2 != -1 )
    {
      v6 = *(android::RefBase **)(v1 + 1068);
      if ( v6 )
        android::RefBase::incStrong(v6, &v6);
      v3 = android::ConsumerBase::addReleaseFence(v1, v2, &v6, &v7);
      if ( v6 )
        android::RefBase::decStrong(v6, &v6);
      if ( v3 )
      {
        v5 = strerror(-v3);
        _android_log_print(6, "SurfaceFlinger", "setReleaseFenceFd: failed to add the fence: %s (%d)", v5, v3);
      }
    }
  }
  return sub_17AF0((unsigned int **)&v7);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 1125C: using guessed type int __fastcall android::ConsumerBase::addReleaseFence(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00028600) --------------------------------------------------------
unsigned int **__fastcall sub_28600(int a1)
{
  return sub_28574(a1 - 1056);
}

//----- (00028610) --------------------------------------------------------
int __fastcall sub_28610(int a1)
{
  int v1; // r0@1
  int v2; // r1@1
  int result; // r0@3
  int (*v4)(void); // r1@4

  v1 = *(_DWORD *)(a1 + 16);
  v2 = *(_DWORD *)(v1 + 8);
  if ( v2 && *(_DWORD *)(v2 + 4) > 0x100FFFFu )
  {
    result = 0;
  }
  else
  {
    v4 = *(int (**)(void))(*(_DWORD *)(v1 + 4) + 148);
    if ( v4 )
      result = v4();
    else
      result = -38;
  }
  return result;
}

//----- (0002861C) --------------------------------------------------------
int __fastcall sub_2861C(int a1, android::String8 *a2)
{
  return j_android::ConsumerBase::dump((android::ConsumerBase *)(a1 - 1056), a2);
}

//----- (00028624) --------------------------------------------------------
int __fastcall sub_28624(int a1, android::String8 *a2, const char *a3)
{
  android::ConsumerBase *v3; // r6@1
  android::String8 *v4; // r5@1
  const char *v5; // r4@1

  v3 = (android::ConsumerBase *)a1;
  v4 = a2;
  v5 = a3;
  sub_2A944(*(_DWORD *)(a1 + 1072), a2);
  return j_android::ConsumerBase::dumpLocked(v3, v4, v5);
}

//----- (00028668) --------------------------------------------------------
int __fastcall sub_28668(char *a1)
{
  return j_android::RefBase::~RefBase((android::RefBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12) + 4]);
}

//----- (00028678) --------------------------------------------------------
void __fastcall sub_28678(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::RefBase::~RefBase((android::RefBase *)(v1 + 4));
  j_operator delete((void *)v1);
}

//----- (00028694) --------------------------------------------------------
android::ConsumerBase *__fastcall sub_28694(android::ConsumerBase *this)
{
  android::ConsumerBase *v1; // r4@1

  v1 = this;
  sub_287AC(this, (int)&off_3FC60);
  android::RefBase::~RefBase((android::ConsumerBase *)((char *)v1 + 1076));
  return v1;
}
// 3FC60: using guessed type void **off_3FC60;

//----- (000286BC) --------------------------------------------------------
void __fastcall sub_286BC(android::ConsumerBase *this)
{
  android::ConsumerBase *v1; // r4@1

  v1 = this;
  sub_287AC(this, (int)&off_3FC60);
  android::RefBase::~RefBase((android::ConsumerBase *)((char *)v1 + 1076));
  j_operator delete((void *)v1);
}
// 3FC60: using guessed type void **off_3FC60;

//----- (000286F0) --------------------------------------------------------
int __fastcall sub_286F0(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_287AC((android::ConsumerBase *)(a1 - 1056), (int)&off_3FC60);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 20));
}
// 3FC60: using guessed type void **off_3FC60;

//----- (00028718) --------------------------------------------------------
void __fastcall sub_28718(int a1)
{
  int v1; // r4@1
  void *v2; // r5@1

  v1 = a1;
  v2 = (void *)(a1 - 1056);
  sub_287AC((android::ConsumerBase *)(a1 - 1056), (int)&off_3FC60);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 20));
  j_operator delete(v2);
}
// 3FC60: using guessed type void **off_3FC60;

//----- (0002874C) --------------------------------------------------------
int __fastcall sub_2874C(char *a1)
{
  int v1; // r0@1

  v1 = sub_287AC((android::ConsumerBase *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)], (int)&off_3FC60);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 1076));
}
// 3FC60: using guessed type void **off_3FC60;

//----- (00028778) --------------------------------------------------------
void __fastcall sub_28778(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_287AC((android::ConsumerBase *)v1, (int)&off_3FC60);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1076));
  j_operator delete((void *)v1);
}
// 3FC60: using guessed type void **off_3FC60;

//----- (000287AC) --------------------------------------------------------
int __fastcall sub_287AC(android::ConsumerBase *this, int a2)
{
  android::ConsumerBase *v2; // r4@1
  int v3; // r0@1
  android::RefBase *v4; // r0@1

  v2 = this;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)((char *)v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 28);
  *((_DWORD *)v2 + 264) = *(_DWORD *)(a2 + 32);
  v4 = (android::RefBase *)*((_DWORD *)v2 + 267);
  if ( v4 )
    android::RefBase::decStrong(v4, (char *)v2 + 1068);
  return j_android::ConsumerBase::~ConsumerBase(v2);
}

//----- (00028B08) --------------------------------------------------------
int sub_28B08()
{
  int v0; // r4@1
  int v2; // [sp+4h] [bp-14h]@1

  v0 = hw_get_module("gralloc", &v2);
  if ( v0 )
    _android_log_print(6, "SurfaceFlinger", "%s module not found", "gralloc");
  else
    v0 = (**(int (***)(void))(v2 + 20))();
  return v0;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 11280: using guessed type int __fastcall hw_get_module(_DWORD, _DWORD);

//----- (00028B6C) --------------------------------------------------------
unsigned int __fastcall sub_28B6C(int a1)
{
  int v1; // r4@1
  const char *v2; // r1@2
  const char *v3; // r2@2
  const char *v4; // r3@2
  android::RefBase::weakref_type **v5; // r4@3
  int v6; // r0@3
  unsigned int result; // r0@5
  char *v8; // [sp+0h] [bp-18h]@0
  int v9; // [sp+4h] [bp-14h]@1

  v1 = a1;
  if ( hw_get_module("hwcomposer", &v9) )
  {
    v2 = "SurfaceFlinger";
    v3 = "%s module not found";
    v4 = "hwcomposer";
    return _android_log_print(6, v2, v3, v4, v8);
  }
  v5 = (android::RefBase::weakref_type **)(v1 + 8);
  v6 = (**(int (***)(void))(v9 + 20))();
  if ( v6 )
  {
    v8 = strerror(-v6);
    v2 = "SurfaceFlinger";
    v4 = "composer";
    v3 = "%s device failed to initialize (%s)";
    return _android_log_print(6, v2, v3, v4, v8);
  }
  result = *((_DWORD *)*v5 + 1);
  if ( result < 0x1000000 || (unsigned __int16)result != 1 )
  {
    _android_log_print(
      6,
      "SurfaceFlinger",
      "%s device version %#x unsupported, will not be used",
      "composer",
      *((_DWORD *)*v5 + 1));
    (*((void (__cdecl **)(android::RefBase::weakref_type *, const void *))*v5 + 15))(*v5, *((const void **)*v5 + 15));
    result = 0;
    *v5 = 0;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 11280: using guessed type int __fastcall hw_get_module(_DWORD, _DWORD);

//----- (00028C98) --------------------------------------------------------
int __fastcall sub_28C98(int a1, unsigned int a2, int a3, signed int a4)
{
  int v4; // r5@1
  signed int v5; // r4@1
  unsigned int v6; // r7@1
  int (__fastcall **v7)(_DWORD, _DWORD, _DWORD, _DWORD); // r0@4
  int result; // r0@6
  signed int v9; // r11@10
  int v10; // r10@10
  char v11; // r0@10
  unsigned int *v12; // r10@10
  int v13; // t1@10
  int v14; // r0@13
  int v15; // r0@17
  _DWORD (__cdecl *v16)(android::BBinder *); // r12@17
  int v17; // r9@18
  int v18; // r1@19
  int v19; // r0@19
  int v20; // r0@24
  int v21; // r0@30
  char *v22; // r0@33
  char buf; // [sp+Fh] [bp-39h]@27
  char v24; // [sp+10h] [bp-38h]@19
  int v25; // [sp+20h] [bp-28h]@1

  v4 = a1;
  v5 = a4;
  v6 = a2;
  v25 = v0;
  if ( a2 > 0x1F || !(*(_DWORD *)(a1 + 260) & (0x80000000 >> a2)) )
  {
    _android_log_print(3, "SurfaceFlinger", "eventControl ignoring event %d on unallocated disp %d (en=%d)", a3, a2, a4);
    v7 = &GLOBAL_OFFSET_TABLE_;
    goto LABEL_6;
  }
  if ( a3 )
  {
    _android_log_print(5, "SurfaceFlinger", "eventControl got unexpected event %d (disp=%d en=%d)", a3, a2, a4);
    v7 = &GLOBAL_OFFSET_TABLE_;
    goto LABEL_6;
  }
  if ( !*(_DWORD *)(a1 + 8) || *(_BYTE *)(a1 + 256) )
    goto LABEL_30;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 288));
  v9 = v5;
  v10 = v4 + 68 * v6;
  v13 = *(_DWORD *)(v10 + 88);
  v12 = (unsigned int *)(v10 + 88);
  v11 = v13;
  if ( v5 )
    v9 = 1;
  if ( v9 == (v11 & 1) )
    goto LABEL_36;
  v14 = v0;
  __dmb();
  if ( !(v14 & 1) )
    atrace_setup(v14, 0xFFFFFF78);
  if ( v0 & 2 )
    atrace_begin_body("eventControl");
  v15 = *(_DWORD *)(v4 + 8);
  v16 = *(_DWORD (__cdecl **)(android::BBinder *))(v15 + 72);
  if ( !v16 || (v17 = v16((android::BBinder *)v15)) == 0 )
  {
    *v12 = *v12 & 0xFFFFFFFE | v9;
    _snprintf_chk(&v24, 16, 0, 16);
    v19 = v0;
    __dmb();
    if ( !(v19 & 1) )
      atrace_setup(v19, v18);
    if ( v0 & 2 )
      atrace_int_body(&v24, v5);
    v17 = 0;
  }
  v20 = v0;
  __dmb();
  if ( !(v20 & 1) )
    atrace_setup(v20, 0xFFFFFF78);
  if ( v0 & 2 )
  {
    buf = 69;
    write(v0, &buf, 1u);
  }
  if ( !v17 )
  {
LABEL_36:
    pthread_mutex_unlock((pthread_mutex_t *)(v4 + 288));
LABEL_30:
    v21 = *(_DWORD *)(v4 + 252);
    if ( v21 )
      sub_295C8(v21, v5 != 0);
    goto LABEL_32;
  }
  v22 = strerror(-v17);
  _android_log_print(6, "SurfaceFlinger", "eventControl(%d, %d) failed %s", 0, v5, v22);
  pthread_mutex_unlock((pthread_mutex_t *)(v4 + 288));
LABEL_32:
  v7 = &GLOBAL_OFFSET_TABLE_;
LABEL_6:
  result = **(_DWORD **)((char *)v7 + 0xFFFFFF88) - v25;
  if ( result )
    _stack_chk_fail(result);
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);
// 10C20: using guessed type int __fastcall atrace_begin_body(_DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 11094: using guessed type int __fastcall atrace_int_body(_DWORD, _DWORD);
// 1128C: using guessed type int __fastcall _snprintf_chk(_DWORD, _DWORD, _DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (000290D8) --------------------------------------------------------
int __fastcall sub_290D8(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r5@1

  v2 = a1;
  v3 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 72));
  android::Thread::Thread((android::Thread *)v2, (unsigned int)&off_3FCA4);
  *(_DWORD *)v2 = &off_42DA0;
  *(_DWORD *)(v2 + 72) = &off_42DD8;
  *(_DWORD *)(v2 + 36) = v3;
  pthread_mutex_init((pthread_mutex_t *)(v2 + 40), 0);
  pthread_cond_init((pthread_cond_t *)(v2 + 44), 0);
  *(_BYTE *)(v2 + 48) = 0;
  *(_DWORD *)(v2 + 60) = 0;
  *(_DWORD *)(v2 + 56) = 0;
  *(_QWORD *)(v2 + 64) = *(_QWORD *)(*(_DWORD *)(v3 + 28) + 24 * *(_DWORD *)(v3 + 44) + 16);
  return v2;
}
// 3FCA4: using guessed type void *;
// 42DA0: using guessed type void *off_42DA0;
// 42DD8: using guessed type void *off_42DD8;

//----- (0002914C) --------------------------------------------------------
signed int __fastcall sub_2914C(int a1)
{
  signed int v1; // r0@1
  signed int result; // r0@2

  unk_45048 = a1;
  v1 = open("/dev/graphics/fb0", 2, 0);
  if ( v1 <= -1 )
  {
    _android_log_print(4, "SurfaceFlinger", "open fb0 failed");
    result = -1;
  }
  else
  {
    close(v1);
    result = 0;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (000291A8) --------------------------------------------------------
int __fastcall sub_291A8(int a1)
{
  signed int v1; // r0@2
  int result; // r0@3

  if ( unk_45048 == a1 )
  {
    v1 = open("/dev/graphics/fb0", 2, 0);
    if ( v1 <= -1 )
      result = _android_log_print(4, "SurfaceFlinger", "open fb0 failed");
    else
      result = j_j_close(v1);
  }
  else
  {
    result = _android_log_print(6, "SurfaceFlinger", "update display error");
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00029228) --------------------------------------------------------
signed int __fastcall sub_29228(int a1)
{
  int v1; // r1@1
  signed int result; // r0@1

  v1 = *(_DWORD *)(a1 + 8);
  result = -19;
  if ( v1 )
    result = 0;
  return result;
}

//----- (00029364) --------------------------------------------------------
signed int __fastcall sub_29364(int a1, signed int a2, unsigned int a3, unsigned int a4, int a5)
{
  unsigned int v5; // r4@1
  unsigned int v6; // r5@1
  int v7; // r0@4
  unsigned int v8; // r1@4
  int v9; // r0@4
  unsigned int v10; // r1@4
  signed int result; // r0@8

  v5 = a4;
  v6 = a3;
  if ( a2 >= 2 && *(_DWORD *)(a1 + 232) > a2 && *(_DWORD *)(a1 + 260) & (0x80000000 >> a2) )
  {
    v7 = a1 + 68 * a2;
    v8 = *(_DWORD *)(v7 + 44);
    *(_DWORD *)(v7 + 48) = a5;
    v9 = android::VectorImpl::editItemLocation((android::VectorImpl *)(v7 + 24), v8);
    v10 = v5;
    if ( v6 < v5 )
      v10 = v6;
    _R2 = dword_293CC;
    if ( v10 >> 3 > 0x86 )
      _R2 = &dword_293CC[1];
    __asm { VLDR            S0, [R2] }
    *(_DWORD *)v9 = v6;
    *(_DWORD *)(v9 + 4) = v5;
    __asm
    {
      VSTR            S0, [R0,#8]
      VSTR            S0, [R0,#0xC]
    }
    result = 0;
  }
  else
  {
    result = -75;
  }
  return result;
}
// 293CC: using guessed type int dword_293CC[2];

//----- (000293D4) --------------------------------------------------------
unsigned int __fastcall sub_293D4(int a1)
{
  unsigned int v1; // r1@1
  unsigned int v2; // r3@1
  unsigned int v3; // r4@2
  int v4; // r5@2

  v1 = *(_DWORD *)(a1 + 260);
  v2 = ((v1 - ((v1 >> 1) & 0x55555555)) & 0x33333333) + (((v1 - ((v1 >> 1) & 0x55555555)) >> 2) & 0x33333333);
  if ( 16843009 * ((v2 + (v2 >> 4)) & 0xF0F0F0F) >> 24 >= *(_DWORD *)(a1 + 232) )
  {
    v3 = -12;
  }
  else
  {
    v3 = __clz(~v1);
    *(_DWORD *)(a1 + 260) = v1 | (0x80000000 >> v3);
    v4 = a1 + 68 * v3;
    *(_BYTE *)(v4 + 52) = 1;
    android::VectorImpl::resize((android::VectorImpl *)(v4 + 24), 1u);
    *(_DWORD *)(v4 + 44) = 0;
  }
  return v3;
}

//----- (00029448) --------------------------------------------------------
signed int __fastcall sub_29448(int a1, signed int a2)
{
  signed int result; // r0@2
  int v3; // r2@4
  int v4; // r1@5

  if ( a2 >= 2 )
  {
    if ( (unsigned int)a2 <= 0x1F && (v3 = *(_DWORD *)(a1 + 260), v3 & (0x80000000 >> a2)) )
    {
      *(_DWORD *)(a1 + 260) = v3 & ~(0x80000000 >> a2);
      v4 = a1 + 68 * a2;
      result = 0;
      *(_BYTE *)(v4 + 52) = 0;
    }
    else
    {
      result = -75;
    }
  }
  else
  {
    result = -22;
  }
  return result;
}

//----- (00029480) --------------------------------------------------------
unsigned __int64 __fastcall sub_29480(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  pthread_mutex_t *v4; // r6@1
  int v5; // r7@1
  int v6; // r0@1
  unsigned int v7; // r1@1
  unsigned int v8; // r8@1
  int v9; // r9@1
  __int64 v10; // r4@1
  signed __int64 v11; // r10@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 264);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 264));
  v5 = v2 + 68 * v3;
  v6 = systemTime(1);
  v8 = v7;
  v9 = v6;
  v10 = *(_QWORD *)(v2 + 8 * v3 + 272);
  v11 = *(_QWORD *)(*(_DWORD *)(v5 + 28) + 24 * *(_DWORD *)(v5 + 44) + 16);
  pthread_mutex_unlock(v4);
  return __PAIR__(v8, v9) - (signed __int64)(__PAIR__(v8, v9) - v10) % v11;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (000294E4) --------------------------------------------------------
unsigned int **__fastcall sub_294E4(unsigned int **result, int a2, int a3)
{
  unsigned int *v3; // r1@1
  unsigned int v4; // r0@3

  v3 = *(unsigned int **)(a2 + 68 * a3 + 76);
  *result = v3;
  if ( v3 )
  {
    __dmb();
    do
    {
      v4 = __ldrex(v3);
      result = (unsigned int **)(v4 + 1);
    }
    while ( __strex((unsigned int)result, v3) );
  }
  return result;
}

//----- (0002950C) --------------------------------------------------------
signed int __fastcall sub_2950C(int a1, unsigned int a2)
{
  signed int result; // r0@3

  if ( a2 <= 2 && *(_DWORD *)(a1 + 260) & (0x80000000 >> a2) )
    result = *(_DWORD *)(a1 + 68 * a2 + 48);
  else
    result = 1;
  return result;
}

//----- (00029530) --------------------------------------------------------
int __fastcall sub_29530(int a1, int a2)
{
  return *(_BYTE *)(a1 + 68 * a2 + 52);
}

//----- (00029540) --------------------------------------------------------
int __fastcall sub_29540(int a1, int a2)
{
  return *(_DWORD *)(*(_DWORD *)(a1 + 68 * a2 + 28) + 24 * *(_DWORD *)(a1 + 68 * a2 + 44));
}

//----- (00029558) --------------------------------------------------------
int __fastcall sub_29558(int a1, int a2)
{
  return *(_DWORD *)(*(_DWORD *)(a1 + 68 * a2 + 28) + 24 * *(_DWORD *)(a1 + 68 * a2 + 44) + 4);
}

//----- (00029570) --------------------------------------------------------
int __fastcall sub_29570(int a1, int a2)
{
  return *(_DWORD *)(*(_DWORD *)(a1 + 68 * a2 + 28) + 24 * *(_DWORD *)(a1 + 68 * a2 + 44) + 8);
}

//----- (00029588) --------------------------------------------------------
int __fastcall sub_29588(int a1, int a2)
{
  return *(_DWORD *)(*(_DWORD *)(a1 + 68 * a2 + 28) + 24 * *(_DWORD *)(a1 + 68 * a2 + 44) + 12);
}

//----- (000295A0) --------------------------------------------------------
__int64 __fastcall sub_295A0(int a1, int a2)
{
  return *(_QWORD *)(*(_DWORD *)(a1 + 68 * a2 + 28) + 24 * *(_DWORD *)(a1 + 68 * a2 + 44) + 16);
}

//----- (000295BC) --------------------------------------------------------
int __fastcall sub_295BC(int a1, int a2)
{
  return a1 + 68 * a2 + 24;
}

//----- (000295C8) --------------------------------------------------------
int __fastcall sub_295C8(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r6@1
  pthread_mutex_t *v4; // r4@1

  v2 = a1;
  v3 = a2;
  v4 = (pthread_mutex_t *)(a1 + 40);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 40));
  if ( *(_BYTE *)(v2 + 48) != v3 )
  {
    *(_BYTE *)(v2 + 48) = v3;
    pthread_cond_signal((pthread_cond_t *)(v2 + 44));
  }
  return j_j_pthread_mutex_unlock(v4);
}

//----- (000295F8) --------------------------------------------------------
signed int __fastcall sub_295F8(int a1, unsigned int a2, int a3)
{
  int v3; // r0@4
  int v4; // r1@4
  unsigned int v5; // r1@5
  signed int result; // r0@6

  if ( a2 <= 0x1F && *(_DWORD *)(a1 + 260) & (0x80000000 >> a2) )
  {
    if ( *(_DWORD *)(a1 + 8) )
    {
      v3 = *(_DWORD *)(a1 + 68 * a2 + 60);
      v4 = *(_DWORD *)(v3 + 12);
      if ( a3 )
        v5 = v4 | 4;
      else
        v5 = v4 & 0xFFFFFFFB;
      *(_DWORD *)(v3 + 12) = v5;
    }
    result = 0;
  }
  else
  {
    result = -75;
  }
  return result;
}

//----- (00029640) --------------------------------------------------------
signed int __fastcall sub_29640(int a1, unsigned int a2, unsigned int a3)
{
  unsigned int v3; // r4@1
  int v4; // r5@1
  int v5; // r0@3
  unsigned int v6; // r2@4
  unsigned int v7; // r1@4
  int v8; // r6@4
  int v9; // r7@4
  unsigned int v10; // r0@4
  unsigned int *v11; // r7@4
  unsigned int v12; // t1@4
  void **v13; // r9@6
  char *v14; // r0@7
  int v16; // r0@12
  int v17; // r6@12
  int v18; // r1@12
  int v20; // r12@12
  int v22; // lr@12
  int v23; // r1@12
  int v24; // r2@12
  int v25; // r5@12
  int v30; // t1@13
  int v31; // r0@13
  int v32; // r0@15
  int v33; // r3@16

  v3 = a3;
  v4 = a1;
  if ( a2 > 0x1F || !(*(_DWORD *)(a1 + 260) & (0x80000000 >> a2)) )
    return -75;
  v5 = *(_DWORD *)(a1 + 8);
  if ( v5 )
  {
    v6 = 17 * a2;
    v7 = *(_DWORD *)(v5 + 4);
    v8 = v4 + 4 * v6;
    v9 = v4 + 4 * v6;
    v12 = *(_DWORD *)(v9 + 56);
    v11 = (unsigned int *)(v9 + 56);
    v10 = v12;
    if ( v7 > 0x100FFFF )
      ++v3;
    v13 = (void **)(v11 + 1);
    if ( v10 >= v3 )
    {
      v14 = (char *)*v13;
      if ( *v13 )
      {
LABEL_11:
        if ( v7 <= 0x100FFFF )
        {
          v23 = v8 + 60;
        }
        else
        {
          v16 = (int)&v14[112 * v3 - 92];
          *(_DWORD *)(v8 + 64) = v16;
          v17 = v8 + 64;
          _aeabi_memset(v16, 112, 0);
          v18 = *(_DWORD *)(v17 - 36);
          _R0 = v18 + 24 * *(_DWORD *)(v17 - 20);
          v20 = *(_DWORD *)(v18 + 24 * *(_DWORD *)(v17 - 20));
          _R3 = _R0 + 4;
          v22 = *(_DWORD *)(_R0 + 4);
          **(_DWORD **)v17 = 3;
          *(_DWORD *)(*(_DWORD *)v17 + 4) = 0;
          *(_DWORD *)(*(_DWORD *)v17 + 8) = 0;
          *(_DWORD *)(*(_DWORD *)v17 + 12) = *(_DWORD *)(v17 + 4);
          *(_DWORD *)(*(_DWORD *)v17 + 16) = 0;
          *(_DWORD *)(*(_DWORD *)v17 + 20) = 261;
          v23 = v17 - 4;
          v24 = *(_DWORD *)(v4 + 8);
          v25 = *(_DWORD *)v17;
          if ( *(_DWORD *)(v24 + 4) < 0x1030000u )
          {
            v32 = v25 + 28;
            *(_DWORD *)(v25 + 24) = 0;
            *(_DWORD *)v32 = 0;
            *(_DWORD *)(v32 + 4) = v20;
            *(_DWORD *)(v32 + 8) = v22;
          }
          else
          {
            *(_DWORD *)(v25 + 24) = 0;
            *(_DWORD *)(*(_DWORD *)v17 + 28) = 0;
            __asm
            {
              VLDR            S0, [R0]
              VCVT.F32.U32    S0, S0
            }
            v30 = *(_DWORD *)v17;
            __asm
            {
              VSTR            S0, [R0,#0x20]
              VLDR            S0, [R3]
              VCVT.F32.U32    S0, S0
            }
            v31 = *(_DWORD *)v17;
            __asm { VSTR            S0, [R0,#0x24] }
          }
          v33 = *(_DWORD *)v17 + 44;
          *(_DWORD *)(*(_DWORD *)v17 + 40) = 0;
          *(_DWORD *)v33 = 0;
          *(_DWORD *)(v33 + 4) = v20;
          *(_DWORD *)(v33 + 8) = v22;
          *(_DWORD *)(*(_DWORD *)v17 + 56) = 1;
          *(_DWORD *)(*(_DWORD *)v17 + 60) = *(_DWORD *)v17 + 40;
          *(_DWORD *)(*(_DWORD *)v17 + 64) = -1;
          *(_DWORD *)(*(_DWORD *)v17 + 68) = -1;
          *(_BYTE *)(*(_DWORD *)v17 + 72) = -1;
          v14 = *(char **)v23;
        }
        *(_DWORD *)v14 = -1;
        *(_DWORD *)(*(_DWORD *)v23 + 12) = 1;
        *(_DWORD *)(*(_DWORD *)v23 + 16) = v3;
        return 0;
      }
    }
    else
    {
      v14 = (char *)*v13;
    }
    free(v14);
    v14 = (char *)malloc(112 * v3 + 20);
    *v13 = v14;
    *v11 = v3;
    v7 = *(_DWORD *)(*(_DWORD *)(v4 + 8) + 4);
    goto LABEL_11;
  }
  return 0;
}
// 10860: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);

//----- (000297AC) --------------------------------------------------------
signed int __fastcall sub_297AC(int a1, unsigned int a2, android::Fence **a3, int a4)
{
  int v4; // r4@1
  int v5; // r6@3
  int v6; // r5@3
  int v7; // r1@3
  int v8; // r5@3
  int v9; // t1@3
  signed int v10; // r0@5
  signed int result; // r0@6
  int v12; // r2@9

  v4 = a4;
  if ( a2 <= 0x1F && *(_DWORD *)(a1 + 260) & (0x80000000 >> a2) )
  {
    v5 = a1 + 68 * a2;
    v6 = a1 + 68 * a2;
    v9 = *(_DWORD *)(v6 + 64);
    v8 = v6 + 64;
    v7 = v9;
    if ( v9 )
    {
      if ( *((_DWORD *)*a3 + 1) == -1 )
      {
        v10 = -1;
      }
      else
      {
        v10 = android::Fence::dup(*a3);
        v7 = *(_DWORD *)v8;
      }
      v12 = *(_DWORD *)(*(_DWORD *)v4 + 68);
      *(_DWORD *)(v5 + 68) = v12;
      *(_DWORD *)(v7 + 12) = v12;
      *(_DWORD *)(*(_DWORD *)v8 + 64) = v10;
    }
    else
    {
      _android_log_print(6, "SurfaceFlinger", "HWComposer: framebufferTarget is null");
    }
    result = 0;
  }
  else
  {
    result = -75;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00029820) --------------------------------------------------------
char *__fastcall sub_29820(int a1, const char *a2, char a3)
{
  int v3; // r5@1
  char v4; // r4@1
  char *result; // r0@1

  v3 = a1;
  *(_BYTE *)(a1 + 421) = 1;
  v4 = a3;
  result = strcpy((char *)(a1 + 292), a2);
  *(_BYTE *)(v3 + 422) = v4;
  return result;
}

//----- (00029840) --------------------------------------------------------
int __fastcall sub_29840(int a1)
{
  return *(_BYTE *)(a1 + 420);
}

//----- (00029848) --------------------------------------------------------
signed int __fastcall sub_29848(int a1, int a2, int a3, int a4, int a5, int a6)
{
  int v6; // r6@1
  int v7; // r4@2
  signed int v8; // r5@2
  int v10; // r0@3
  float v17; // r4@3
  float v18; // r8@3
  float v19; // r10@3
  signed int v35; // r0@6
  signed int v37; // r1@6
  signed int v44; // r0@6
  int v50; // r3@7
  int *v51; // r1@7
  int v52; // r2@7
  char *v53; // r0@7
  int v55; // r3@12
  int v56; // r11@13
  int v57; // r6@13
  int v58; // r1@15
  int v59; // r5@17
  int v60; // r0@19
  signed int v61; // kr00_4@19
  signed int v62; // r12@19
  int v63; // r1@19
  int v64; // lr@19
  int v65; // r9@19
  int v66; // r2@19
  int v67; // r0@19
  int v68; // r4@21
  int v69; // r1@23
  int v74; // r9@31
  unsigned int v75; // r0@33
  unsigned int v76; // r10@33
  unsigned int v77; // lr@34
  unsigned int v78; // r8@35
  unsigned int *v79; // r3@37
  int i; // r5@37
  unsigned int v81; // t1@38
  int v82; // r4@39
  int v83; // r1@39
  int v84; // r12@40
  int v85; // r0@42
  int v86; // r4@44
  int v87; // r0@44
  int v88; // r8@50
  unsigned int v89; // r0@51
  unsigned int v90; // r9@51
  unsigned int v91; // r11@52
  unsigned int v92; // lr@53
  int v93; // r3@55
  unsigned int *v94; // r1@55
  unsigned int v95; // t1@56
  int v96; // r6@57
  int v97; // r5@57
  int v98; // r5@58
  int v99; // r0@60
  int v100; // r0@62
  int v101; // r5@62
  signed int v103; // [sp+10h] [bp-A8h]@19
  int v104; // [sp+14h] [bp-A4h]@19
  int v105; // [sp+18h] [bp-A0h]@3
  int v106; // [sp+1Ch] [bp-9Ch]@3
  int v107; // [sp+20h] [bp-98h]@3
  int v108; // [sp+20h] [bp-98h]@19
  int v109; // [sp+24h] [bp-94h]@3
  int v110; // [sp+24h] [bp-94h]@32
  int v111; // [sp+24h] [bp-94h]@50
  int v112; // [sp+28h] [bp-90h]@3
  int v113; // [sp+2Ch] [bp-8Ch]@3
  char v114; // [sp+30h] [bp-88h]@7
  char v115; // [sp+40h] [bp-78h]@9
  char v116; // [sp+50h] [bp-68h]@8
  char v117; // [sp+60h] [bp-58h]@5
  int v118; // [sp+70h] [bp-48h]@3
  int v119; // [sp+74h] [bp-44h]@3
  int v120; // [sp+78h] [bp-40h]@3
  int v121; // [sp+7Ch] [bp-3Ch]@12
  char v122; // [sp+80h] [bp-38h]@3
  int v123; // [sp+90h] [bp-28h]@1
  int v124; // [sp+94h] [bp-24h]@1
  int v125; // [sp+98h] [bp-20h]@1
  int v126; // [sp+9Ch] [bp-1Ch]@1

  v6 = a2;
  v123 = a3;
  v124 = a4;
  v125 = a5;
  v126 = a6;
  if ( !a2 )
    return 0;
  v7 = *(_DWORD *)(a2 + 12);
  v8 = 0;
  if ( v7 )
  {
    v113 = private_handle_get_base(*(_DWORD *)(a2 + 12));
    v112 = private_handle_get_width(v7);
    v109 = private_handle_get_height(v7);
    v105 = private_handle_get_stride(v7);
    _R9 = &v122;
    v10 = *(_DWORD *)(v6 + 16);
    v119 = 0;
    v118 = 0;
    v107 = v10;
    _R0 = v6 + 40;
    v120 = 0;
    __asm { VLD1.32         {D16-D17}, [R0] }
    v106 = v6 + 40;
    __asm { VST1.64         {D16-D17}, [R9] }
    v17 = *(float *)(v6 + 28);
    v18 = *(float *)(v6 + 32);
    v19 = *(float *)(v6 + 36);
    _R11 = ceilf(*(float *)(v6 + 24));
    _R4 = ceilf(v17);
    _R6 = floorf(v18);
    _R0 = floorf(v19);
    __asm { VMOV            S3, R0 }
    _R8 = &v123;
    __asm { VMOV            S2, R6 }
    _R10 = &v118;
    __asm
    {
      VMOV            S1, R4
      VMOV            S0, R11
      VDUP.32         D16, D0[0]
      VDUP.32         D17, D0[1]
      VDUP.32         D18, D1[0]
      VDUP.32         D19, D1[1]
      VEXT.8          D16, D16, D17, #4
      VEXT.8          D17, D18, D19, #4
      VCVT.S32.F32    Q8, Q8
      VST1.64         {D16-D17}, [R10@128]
    }
    if ( android::Rect::intersect((android::Rect *)&v123, (const android::Rect *)&v122, (android::Rect *)&v123) == 1 )
    {
      if ( v107 )
      {
        _R4 = &v117;
        android::Rect::transform((android::Rect *)&v117, (unsigned int)&v118, v107, v112);
        __asm
        {
          VLD1.64         {D16-D17}, [R4]
          VST1.64         {D16-D17}, [R10@128]
        }
      }
      _R0 = v106;
      v8 = 0;
      __asm
      {
        VLD1.64         {D16-D17}, [R10@128]
        VMOV.32         R2, D17[0]
        VLD1.32         {D18-D19}, [R0]
        VLD1.64         {D22-D23}, [R8@128]
        VMOV.32         R0, D18[0]
        VMOV.32         R1, D19[0]
      }
      v35 = _R1 - _R0;
      __asm { VMOV.32         R1, D16[0] }
      v37 = _R2 - _R1;
      __asm { VMOV.32         R2, D17[1] }
      _R0 = v37 / v35;
      __asm
      {
        VMOV.32         R1, D19[1]
        VMOV.32         D20[0], R0
        VMOV.32         D20[1], R0
        VMOV.32         R0, D18[1]
        VSUB.I32        Q9, Q11, Q9
      }
      v44 = _R1 - _R0;
      __asm
      {
        VMOV.32         R1, D16[1]
        VCVT.F32.S32    Q9, Q9
      }
      _R0 = (_R2 - _R1) / v44;
      __asm
      {
        VCVT.F32.S32    Q8, Q8
        VMOV.32         D21[0], R0
        VMOV.32         D21[1], R0
        VCVT.F32.S32    Q10, Q10
        VMLA.F32        Q8, Q10, Q9
        VMOV.I32        Q9, #0x3F000000
        VADD.F32        Q8, Q8, Q9
        VCVT.S32.F32    Q8, Q8
        VST1.64         {D16-D17}, [R10@128]
      }
      switch ( v107 )
      {
        case 3:
          _R4 = &v114;
          v50 = v112;
          v51 = &v118;
          v52 = 3;
          v53 = &v114;
          goto LABEL_11;
        case 4:
          _R4 = &v116;
          v51 = &v118;
          v52 = 7;
          v53 = &v116;
          goto LABEL_10;
        case 7:
          _R4 = &v115;
          v51 = &v118;
          v52 = 4;
          v53 = &v115;
LABEL_10:
          v50 = v109;
LABEL_11:
          android::Rect::transform((android::Rect *)v53, (unsigned int)v51, v52, v50);
          __asm
          {
            VLD1.64         {D16-D17}, [R4]
            VST1.64         {D16-D17}, [R10@128]
          }
          goto LABEL_12;
        case 0:
LABEL_12:
          v8 = 0;
          v55 = v121;
          if ( v121 - v119 < 1 )
            return v8;
          v56 = v118;
          v57 = v120;
          if ( (v119 | v121 | v118 | v120) < 0 )
            return v8;
          if ( v121 - v119 < 17 )
          {
            v58 = v119;
          }
          else
          {
            v55 = v121 - 8;
            v58 = v119 + 8;
            v121 -= 8;
            v119 += 8;
          }
          v59 = 4 * v105;
          if ( v120 - v118 >= 17 )
          {
            v57 = v120 - 8;
            v56 = v118 + 8;
            v120 -= 8;
            v118 += 8;
          }
          v60 = v55 - v58;
          v104 = v55;
          v61 = v55 - v58;
          v103 = v58;
          v62 = 0;
          v63 = v58 + (v55 - v58) / 2;
          __asm { VMOV.I32        Q8, #0 }
          v108 = 4 * v105;
          v64 = v113 + v63 * v59;
          v65 = v63 * v59;
          v66 = v60 & 1;
          v67 = v60 - 1;
          break;
        default:
          return v8;
      }
      while ( v62 < v67 )
      {
        v68 = v64;
        if ( v62 )
        {
          if ( v66 )
            v69 = v65 + ((~(2 * v62) & 2) - 1) * v108 * (v61 / 2 + 1 + (v62 << 31 >> 31) - v62 / 2);
          else
            v69 = v65 + v108 * ((~(2 * v62) & 2) - 1) * (v61 / 2 - v62 / 2);
          v68 = v113 + v69;
        }
        if ( v56 + 3 < v57 )
        {
          _R8 = v68 + 4 * v56;
          do
          {
            __asm
            {
              VLD1.32         {D18-D19}, [R8]!
              VADD.I32        Q8, Q9, Q8
            }
          }
          while ( _R8 + 28 < (unsigned int)(v68 + 4 * v57) );
        }
        __asm { VADD.I32        D18, D17, D16 }
        ++v62;
        v8 = 0;
        __asm
        {
          VMOV.32         R1, D18[1]
          VMOV.32         R4, D18[0]
        }
        if ( _R4 + _R1 )
          return v8;
      }
      v74 = v109 - 1;
      if ( v109 - 1 <= v55 + 1 )
      {
LABEL_49:
        if ( v103 < 2 )
          return 1;
        v88 = v103 - 1;
        v111 = v113 + 4 * v105 * (v103 - 1) + 4;
        while ( 1 )
        {
          v89 = *(_DWORD *)(v113 + v88 * v108);
          v90 = *(_DWORD *)(v113 + v88 * v108);
          if ( v90 > 0x14 )
            break;
          v91 = (unsigned __int16)v89 >> 8;
          if ( v91 > 0x14 )
            break;
          v92 = v89 >> 16;
          if ( v89 >> 16 > 0x14 )
            break;
          if ( v112 >= 1 )
          {
            v93 = 0;
            v94 = (unsigned int *)v111;
            while ( 1 )
            {
              v96 = (v89 >> 16) & 0xFF;
              v97 = (unsigned __int16)v89 >> 8;
              if ( (v89 & 0xFF0000FF | (v96 << 16) | (v97 << 8)) != (*(_DWORD *)(v113 + v88 * v108) & 0xFF0000FF | (v92 << 16) | (v91 << 8)) )
              {
                v89 = (unsigned __int8)v89;
                v98 = v91 - v97;
                if ( v98 < 0 )
                  v98 = -v98;
                v99 = v90 - v89;
                if ( v99 < 0 )
                  v99 = -v99;
                v100 = v99 + v98;
                v101 = v92 - v96;
                if ( ((v92 - v96) & 0x80000000) != 0 )
                  v101 = -v101;
                if ( v100 + v101 > 8 )
                  return 0;
              }
              if ( v93 >= v112 - 1 )
                break;
              v95 = *v94;
              ++v94;
              v89 = v95;
              ++v93;
            }
          }
          _VF = __OFSUB__(v88, 16);
          v88 -= 16;
          v8 = 1;
          v111 += -64 * v105;
          if ( (unsigned __int8)((v88 < 0) ^ _VF) | (v88 == 0) )
            return v8;
        }
      }
      else
      {
        v110 = v113 + 4 * v105 * v74 + 4;
        while ( 1 )
        {
          v75 = *(_DWORD *)(v113 + v74 * v108);
          v76 = *(_DWORD *)(v113 + v74 * v108);
          if ( v76 > 0x14 )
            break;
          v77 = (unsigned __int16)v75 >> 8;
          if ( v77 > 0x14 )
            break;
          v78 = v75 >> 16;
          if ( v75 >> 16 > 0x14 )
            break;
          if ( v112 >= 1 )
          {
            v79 = (unsigned int *)v110;
            for ( i = 0; ; ++i )
            {
              v82 = (v75 >> 16) & 0xFF;
              v83 = (unsigned __int16)v75 >> 8;
              if ( (v75 & 0xFF0000FF | (v82 << 16) | (v83 << 8)) != (*(_DWORD *)(v113 + v74 * v108) & 0xFF0000FF | (v78 << 16) | (v77 << 8)) )
              {
                v75 = (unsigned __int8)v75;
                v84 = v77 - v83;
                if ( ((v77 - v83) & 0x80000000) != 0 )
                  v84 = -v84;
                v85 = v76 - v75;
                if ( v85 < 0 )
                  v85 = -v85;
                v86 = v78 - v82;
                v87 = v85 + v84;
                if ( v86 < 0 )
                  v86 = -v86;
                if ( v87 + v86 > 8 )
                  break;
              }
              if ( i >= v112 - 1 )
                goto LABEL_48;
              v81 = *v79;
              ++v79;
              v75 = v81;
            }
            return 0;
          }
LABEL_48:
          v74 -= 16;
          v110 += -64 * v105;
          if ( v74 <= v104 + 1 )
            goto LABEL_49;
        }
      }
      return 0;
    }
  }
  return v8;
}
// 112C8: using guessed type int __fastcall private_handle_get_base(_DWORD);
// 112D4: using guessed type int __fastcall private_handle_get_width(_DWORD);
// 112E0: using guessed type int __fastcall private_handle_get_height(_DWORD);
// 112EC: using guessed type int __fastcall private_handle_get_stride(_DWORD);

//----- (00029CC0) --------------------------------------------------------
signed int __fastcall sub_29CC0(int a1, const char *a2)
{
  const char *v2; // r4@1
  signed int result; // r0@2

  v2 = a2;
  if ( strstr(a2, ".youku.") )
    result = 1;
  else
    result = strstr(v2, ".baidu.") != 0;
  return result;
}

//----- (00029D00) --------------------------------------------------------
int (__fastcall **__fastcall sub_29D00(int *a1, char *a2))(_DWORD, _DWORD, _DWORD, _DWORD)
{
  int *v2; // r8@1
  int v3; // r0@1
  int (__fastcall **result)(_DWORD, _DWORD, _DWORD, _DWORD); // r0@1
  signed int v5; // r9@2
  signed int v6; // r10@2
  signed int v7; // r11@2
  signed int v8; // r7@3
  int v9; // r5@3
  const char **v10; // r0@3
  int v11; // r4@3
  const char *v12; // r6@3
  int v13; // r6@10
  signed int v14; // r5@12
  const char **v15; // r0@14
  const char *v16; // r1@16
  int v17; // r0@16
  int v18; // r6@21
  int v19; // r2@21
  int v20; // r3@21
  int v21; // r5@21
  char v22; // r0@24
  signed int v23; // r1@40
  signed int v24; // r2@42
  signed int v25; // r3@44
  int v26; // r6@48
  const char **v27; // r0@52
  int v28; // r0@52
  char *s1; // [sp+14h] [bp-5Ch]@1
  int v30; // [sp+18h] [bp-58h]@2
  int v31; // [sp+1Ch] [bp-54h]@2
  int v32; // [sp+20h] [bp-50h]@2
  int v33; // [sp+24h] [bp-4Ch]@2
  int v34; // [sp+28h] [bp-48h]@2
  char v35; // [sp+30h] [bp-40h]@2
  int v36; // [sp+34h] [bp-3Ch]@6
  int v37; // [sp+38h] [bp-38h]@3
  int v38; // [sp+3Ch] [bp-34h]@1
  int (__fastcall **v39)(_DWORD, _DWORD, _DWORD, _DWORD); // [sp+40h] [bp-30h]@1
  android::RefBase *v40; // [sp+44h] [bp-2Ch]@11
  android::RefBase *v41; // [sp+48h] [bp-28h]@49

  v2 = a1;
  s1 = a2;
  v3 = sub_2353C(*a1, 0);
  v38 = v3;
  result = *(int (__fastcall ***)(_DWORD, _DWORD, _DWORD, _DWORD))(v3 + 8);
  v39 = result;
  if ( (signed int)result < 1 )
    return result;
  v5 = -1;
  v6 = 72;
  v7 = 0;
  v35 = 0;
  v30 = 0;
  v34 = 0;
  v33 = 0;
  v31 = 0;
  v32 = 0;
  while ( 1 )
  {
    v8 = v7;
    v9 = *(_DWORD *)(v38 + 4);
    v37 = v2[3];
    v10 = (const char **)sub_17C58(*(_DWORD *)(v9 + 4 * v7));
    v11 = *(_DWORD *)(v9 + 4 * v7);
    v12 = *v10;
    if ( v5 != -1 && v7 > v5 && byte_45050[0] == 1 )
      break;
    v36 = *(_DWORD *)(v9 + 4 * v7++);
    if ( _strlen_chk(v12, -1) == 11 && v7 < (signed int)v39 )
    {
      if ( !strncmp(v12, "SurfaceView", 0xBu) )
      {
        LOBYTE(v13) = 0;
        if ( *(_DWORD *)(v9 + 4 * v8)
          && (v40 = 0, sub_1A074(&v40, (android::RefBase **)(*(_DWORD *)(v9 + 4 * v8) + 4576)), v40) )
        {
          v14 = *((_DWORD *)v40 + 13);
          v13 = *((_DWORD *)v40 + 14);
          android::RefBase::decStrong(v40, &v40);
        }
        else
        {
          v14 = -1;
        }
        v15 = (const char **)sub_17C58(*(_DWORD *)(*(_DWORD *)(v38 + 4) + 4 * v8 + 4));
        if ( v14 != 842094169 && (unsigned int)(v14 - 16) >= 0xFA )
        {
          v16 = *v15;
          v17 = v13 & 0xF0;
          if ( v17 != 48 || v14 != 4 || (v17 = v13 & 0xF, v17 != 3) )
          {
            if ( v14 != 4 || sub_29CC0(v17, v16) != 1 )
              goto LABEL_37;
          }
        }
        v18 = *(_DWORD *)(v37 + v6);
        v19 = *(_DWORD *)(v37 + v6 - 12);
        v20 = *(_DWORD *)(v37 + v6 - 8);
        v21 = *(_DWORD *)(v37 + v6 - 4);
        if ( v2[106] != v19 || v2[107] != v20 || v2[108] != v21 )
        {
          v22 = 1;
        }
        else
        {
          v22 = 0;
          if ( v2[109] != v18 )
            v22 = 1;
        }
        v35 = v22;
        v2[106] = v19;
        v2[107] = v20;
        v2[108] = v21;
        v2[109] = v18;
        v34 = v19;
        v33 = v20;
        v31 = v21;
        v32 = v18;
        v30 = *(_DWORD *)(v36 + 312);
      }
      else
      {
        v8 = v5;
      }
      if ( v35 & 1 || *((_BYTE *)v2 + 422) )
      {
        unk_4504C = 0;
        byte_45050[0] = 1;
        *((_BYTE *)v2 + 420) = 0;
        result = (int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))unk_4504C;
      }
      else
      {
        result = (int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(unk_4504C++ + 1);
      }
      if ( (signed int)result < 20 )
        return result;
      if ( (signed int)result >= 21 )
        unk_4504C = 20;
      v5 = v8;
    }
LABEL_37:
    result = v39;
    v6 += 112;
    if ( v7 >= (signed int)v39 )
      return result;
  }
  if ( v5 < 1 )
    goto LABEL_60;
  v23 = 0;
  if ( *(_DWORD *)(v37 + v6 - 12) != v34 )
    v23 = 1;
  v24 = 0;
  if ( *(_DWORD *)(v37 + v6 - 8) != v33 )
    v24 = 1;
  v25 = 0;
  if ( *(_DWORD *)(v37 + v6 - 4) != v31 )
    v25 = 1;
  result = (int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))v32;
  if ( *(_DWORD *)(v37 + v6) != v32 || (v23 | v24 | v25) == 1 )
  {
    byte_45050[0] = 0;
  }
  else
  {
LABEL_60:
    v26 = 0;
    if ( v11 )
    {
      v41 = 0;
      sub_1A074(&v41, (android::RefBase **)(*(_DWORD *)(v9 + 4 * v7) + 4576));
      if ( v41 )
      {
        v26 = *((_DWORD *)v41 + 13);
        android::RefBase::decStrong(v41, &v41);
        if ( v26 != 1 )
          v26 = 0;
      }
    }
    v27 = (const char **)sub_17C58(*(_DWORD *)(v9 + 4 * v7));
    v28 = strcmp(s1, *v27);
    if ( v26 == 1 && !v28 && (unsigned int)(*(_DWORD *)(v11 + 312) - v30) <= 0xA )
      *((_BYTE *)v2 + 420) = sub_29848(v37 + v6, v37 + v6 - 52, v34, v33, v31, v32);
    result = &GLOBAL_OFFSET_TABLE_;
    byte_45050[0] = 0;
  }
  return result;
}
// 10F14: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00029FD4) --------------------------------------------------------
int __fastcall sub_29FD4(int a1)
{
  int v1; // r1@1
  int result; // r0@1
  int v3; // r1@1
  int v4; // [sp+4h] [bp-Ch]@1

  v1 = a1;
  result = 0;
  v4 = 0;
  v3 = *(_DWORD *)(v1 + 8);
  if ( v3 )
  {
    (*(void (__fastcall **)(int, signed int, int *))(v3 + 80))(v3, 3, &v4);
    result = v4;
  }
  return result;
}

//----- (00029FF8) --------------------------------------------------------
int __fastcall sub_29FF8(int a1)
{
  int result; // r0@1

  result = *(_DWORD *)(a1 + 8);
  if ( result )
    result = (*(int (**)(void))(result + 116))();
  return result;
}

//----- (0002A004) --------------------------------------------------------
int __fastcall sub_2A004(int result, int a2)
{
  _R2 = *(_DWORD *)(a2 + 60);
  _R1 = a2 + 440;
  _R2 += 44;
  __asm
  {
    VLD1.32         {D16-D17}, [R2]
    VST1.32         {D16-D17}, [R1]
    VLD1.32         {D16-D17}, [R2]
    VST1.32         {D16-D17}, [R0]
  }
  return result;
}

//----- (0002A020) --------------------------------------------------------
int __fastcall sub_2A020(int a1, int a2, int a3, int a4, int a5)
{
  int result; // r0@1

  result = *(_DWORD *)(a1 + 60);
  *(_DWORD *)(result + 44) = a2;
  *(_DWORD *)(result + 48) = a3;
  *(_DWORD *)(result + 52) = a4;
  *(_DWORD *)(result + 56) = a5;
  return result;
}

//----- (0002A034) --------------------------------------------------------
int __fastcall sub_2A034(int result, int a2)
{
  _R1 = *(_DWORD *)(a2 + 60) + 60;
  __asm
  {
    VLD1.32         {D16-D17}, [R1]
    VST1.32         {D16-D17}, [R0]
  }
  return result;
}

//----- (0002A044) --------------------------------------------------------
int __fastcall sub_2A044(int a1)
{
  int v1; // r10@1
  int v2; // r4@1
  int v3; // r9@2
  unsigned int v4; // r6@2
  int v5; // r5@3
  _DWORD *v6; // r0@3
  int v7; // r0@6
  int v8; // r1@8
  int v9; // r0@8
  unsigned int v10; // r2@9
  int v11; // r0@20
  int v12; // r8@20
  unsigned int v13; // r11@22
  int v14; // r9@23
  int v15; // r12@23
  _BYTE *v16; // r7@23
  int v17; // r4@23
  _BYTE *v18; // r12@23
  int v19; // r4@23
  int v20; // r6@23
  int v21; // t1@23
  int v22; // r5@24
  _BYTE *v23; // r3@25
  unsigned int v24; // r0@25
  int v25; // r6@26
  int v26; // r2@27
  unsigned int v27; // r2@35
  char *v28; // r0@45
  pthread_mutex_t *mutex; // [sp+4h] [bp-34h]@2

  v1 = a1;
  v2 = a1 + 228;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 228));
  if ( *(_DWORD *)(v1 + 232) )
  {
    mutex = (pthread_mutex_t *)v2;
    v3 = 0;
    v4 = 0;
    do
    {
      v5 = v1 + 4 * v3;
      v6 = *(_DWORD **)(v5 + 64);
      if ( v6 )
        *v6 = 3;
      if ( !*(_BYTE *)(v5 + 52) )
      {
        v7 = *(_DWORD *)(v5 + 60);
        if ( v7 )
          _android_log_print(
            5,
            "SurfaceFlinger",
            "WARNING: disp %zu: connected, non-null list, layers=%zu",
            v4,
            *(_DWORD *)(v7 + 16),
            mutex);
      }
      v8 = *(_DWORD *)(v5 + 60);
      v9 = v1 + 4 * v4;
      *(_DWORD *)(v9 + 12) = v8;
      if ( v8 )
      {
        v10 = *(_DWORD *)(*(_DWORD *)(v1 + 8) + 4) & 0xFFFF0000;
        if ( v10 < 0x1030000 )
        {
          if ( v10 < 0x1010000 )
          {
            *(_DWORD *)(v8 + 4) = 0;
            *(_DWORD *)(*(_DWORD *)(v9 + 12) + 8) = 0;
          }
          else
          {
            *(_DWORD *)(v8 + 4) = -559038737;
            *(_DWORD *)(*(_DWORD *)(v9 + 12) + 8) = -559038737;
          }
        }
        else
        {
          *(_DWORD *)(v8 + 4) = *(_DWORD *)(v5 + 80);
          *(_DWORD *)(*(_DWORD *)(v9 + 12) + 8) = -1;
        }
      }
      if ( !v4 && *(_BYTE *)(v1 + 421) )
      {
        *(_BYTE *)(v1 + 420) = 0;
        sub_29D00((int *)v1, (char *)(v1 + 292));
        *(_BYTE *)(v1 + 421) = 0;
      }
      ++v4;
      v3 += 17;
    }
    while ( v4 < *(_DWORD *)(v1 + 232) );
  }
  else
  {
    mutex = (pthread_mutex_t *)v2;
  }
  v11 = (*(int (**)(void))(*(_DWORD *)(v1 + 8) + 64))();
  v12 = v11;
  if ( v11 )
  {
    v28 = strerror(-v11);
    _android_log_print(6, "SurfaceFlinger", "HWComposer: prepare failed (%s)", v28);
  }
  else if ( *(_DWORD *)(v1 + 232) )
  {
    v13 = 0;
    do
    {
      v14 = v1 + 68 * v13;
      v15 = v1 + 68 * v13;
      *(_WORD *)(v14 + 53) = 0;
      v16 = (_BYTE *)(v14 + 53);
      v17 = v1 + 68 * v13;
      *(_BYTE *)(v15 + 55) = 0;
      v18 = (_BYTE *)(v15 + 55);
      v21 = *(_DWORD *)(v17 + 60);
      v19 = v17 + 60;
      v20 = v21;
      if ( v21 )
      {
        v22 = 0;
        if ( *(_DWORD *)(v20 + 16) )
        {
          v23 = (_BYTE *)(v19 - 6);
          v24 = 0;
          while ( 1 )
          {
            v25 = v20 + v22;
            if ( *(_BYTE *)(v25 + 28) & 1 )
              break;
            v26 = *(_DWORD *)(v25 + 20);
            if ( !v26 )
              goto LABEL_30;
LABEL_31:
            if ( v26 == 1 )
            {
              *v23 = 1;
              v26 = *(_DWORD *)(v25 + 20);
            }
            if ( v26 == 5 )
              *v23 = 1;
            v20 = *(_DWORD *)v19;
            v22 += 112;
            ++v24;
            v27 = *(_DWORD *)(*(_DWORD *)v19 + 16);
            if ( v24 >= v27 )
              goto LABEL_39;
          }
          *(_DWORD *)(v25 + 20) = 0;
LABEL_30:
          *v16 = 1;
          v26 = *(_DWORD *)(v25 + 20);
          goto LABEL_31;
        }
        v27 = 0;
LABEL_39:
        if ( v27 == (*(_DWORD *)(v14 + 64) != 0) )
          *v16 = 1;
        if ( *(_BYTE *)(v20 + 12) & 2 )
          *v18 = 1;
      }
      else
      {
        *v16 = 1;
      }
      ++v13;
    }
    while ( v13 < *(_DWORD *)(v1 + 232) );
  }
  pthread_mutex_unlock(mutex);
  return v12;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A21C) --------------------------------------------------------
signed int __fastcall sub_2A21C(int a1, unsigned int a2)
{
  int v2; // r2@1
  signed int result; // r0@1

  v2 = a1;
  result = 0;
  if ( a2 <= 0x1F && *(_DWORD *)(v2 + 8) )
  {
    if ( *(_DWORD *)(v2 + 260) & (0x80000000 >> a2) )
    {
      result = *(_BYTE *)(v2 + 68 * a2 + 54);
      if ( *(_BYTE *)(v2 + 68 * a2 + 54) )
        result = 1;
    }
    else
    {
      result = 0;
    }
  }
  return result;
}

//----- (0002A254) --------------------------------------------------------
int __fastcall sub_2A254(int a1, unsigned int a2)
{
  int v2; // r2@1
  int result; // r0@1
  int v4; // r0@4

  v2 = a1;
  result = 0;
  if ( a2 <= 0x1F && *(_DWORD *)(v2 + 8) )
  {
    if ( *(_DWORD *)(v2 + 260) & (0x80000000 >> a2) && (v4 = v2 + 68 * a2, *(_BYTE *)(v4 + 54)) )
      result = *(_BYTE *)(v4 + 55) != 0;
    else
      result = 0;
  }
  return result;
}

//----- (0002A294) --------------------------------------------------------
signed int __fastcall sub_2A294(int a1, unsigned int a2)
{
  int v2; // r2@1
  signed int result; // r0@1

  v2 = a1;
  result = 1;
  if ( a2 <= 0x1F && *(_DWORD *)(v2 + 8) )
  {
    if ( *(_DWORD *)(v2 + 260) & (0x80000000 >> a2) )
    {
      result = *(_BYTE *)(v2 + 68 * a2 + 53);
      if ( *(_BYTE *)(v2 + 68 * a2 + 53) )
        result = 1;
    }
    else
    {
      result = 1;
    }
  }
  return result;
}

//----- (0002A2CC) --------------------------------------------------------
unsigned int *__fastcall sub_2A2CC(unsigned int **a1, int a2, unsigned int a3)
{
  unsigned int **v3; // r4@1
  int v4; // r0@3
  int v5; // r0@5
  int v6; // r0@5
  int v7; // r1@5
  int v8; // t1@5
  int v9; // r5@6
  android::Fence *v10; // r0@7
  unsigned int *result; // r0@7
  unsigned int v12; // r1@8
  bool v13; // zf@10
  unsigned int v14; // r1@12
  unsigned int v15; // r1@16

  v3 = a1;
  if ( a3 <= 0x1F && *(_DWORD *)(a2 + 260) & (0x80000000 >> a3) )
  {
    v4 = *(_DWORD *)(a2 + 8);
    if ( v4
      && *(_DWORD *)(v4 + 4) >= 0x1010000u
      && (v5 = a2 + 68 * a3, v8 = *(_DWORD *)(v5 + 64), v6 = v5 + 64, (v7 = v8) != 0)
      && (v9 = *(_DWORD *)(v7 + 68), *(_DWORD *)(v7 + 64) = -1, *(_DWORD *)(*(_DWORD *)v6 + 68) = -1, v9 >= 0) )
    {
      v10 = (android::Fence *)operator new(8u);
      result = (unsigned int *)android::Fence::Fence(v10, v9);
      *v3 = result;
      __dmb();
      do
        v12 = __ldrex(result);
      while ( __strex(v12 + 1, result) );
    }
    else
    {
      result = (unsigned int *)v0;
      v13 = v0 == 0;
      *v3 = (unsigned int *)v0;
      if ( !v13 )
      {
        __dmb();
        do
          v15 = __ldrex(result);
        while ( __strex(v15 + 1, result) );
      }
    }
  }
  else
  {
    result = (unsigned int *)v0;
    v13 = v0 == 0;
    *v3 = (unsigned int *)v0;
    if ( !v13 )
    {
      __dmb();
      do
        v14 = __ldrex(result);
      while ( __strex(v14 + 1, result) );
    }
  }
  return result;
}

//----- (0002A38C) --------------------------------------------------------
int __fastcall sub_2A38C(int a1)
{
  int v1; // r11@1
  int v2; // r0@1
  unsigned int v3; // r1@4
  int v4; // r4@5
  signed int v5; // r5@5
  unsigned int v6; // r2@8
  int result; // r0@9
  unsigned int v8; // r6@10
  int v9; // r4@11
  unsigned int **v10; // r7@11
  int **v11; // r4@11
  int *v12; // r8@11
  int *v13; // t1@11
  android::Fence *v14; // r5@13
  unsigned int v15; // r0@14
  unsigned int *v16; // r0@15
  unsigned int v17; // r1@17
  void *v18; // r0@19
  int v19; // [sp+0h] [bp-28h]@10

  v1 = a1;
  v2 = *(_DWORD *)(a1 + 8);
  if ( v2 )
  {
    if ( *(_DWORD *)(v2 + 4) <= 0x100FFFFu )
    {
      *(_DWORD *)(*(_DWORD *)(v1 + 12) + 4) = eglGetCurrentDisplay();
      *(_DWORD *)(*(_DWORD *)(v1 + 12) + 8) = eglGetCurrentSurface(12377);
    }
    v3 = *(_DWORD *)(v1 + 232);
    if ( v3 >= 3 )
    {
      v4 = v1 + 216;
      v5 = 5;
      do
      {
        if ( *(_DWORD *)v4 )
        {
          *(_DWORD *)(*(_DWORD *)(v1 + 4 * v5) + 4) = *(_DWORD *)v4;
          *(_DWORD *)(*(_DWORD *)(v1 + 4 * v5) + 8) = android::Fence::dup(*(android::Fence **)(v4 + 4));
          v3 = *(_DWORD *)(v1 + 232);
        }
        v6 = v5 - 2;
        v4 += 68;
        ++v5;
      }
      while ( v6 < v3 );
    }
    result = (*(int (**)(void))(*(_DWORD *)(v1 + 8) + 68))();
    if ( *(_DWORD *)(v1 + 232) )
    {
      v8 = 0;
      v19 = result;
      do
      {
        v9 = v1 + 68 * v8;
        v10 = (unsigned int **)(v9 + 72);
        sub_16984((unsigned int **)(v9 + 76), (unsigned int **)(v9 + 72));
        sub_16984((unsigned int **)(v9 + 72), 0);
        v13 = *(int **)(v9 + 60);
        v11 = (int **)(v9 + 60);
        v12 = v13;
        if ( v13 )
        {
          if ( *v12 != -1 )
          {
            v14 = (android::Fence *)operator new(8u);
            android::Fence::Fence(v14, *v12);
            __dmb();
            do
              v15 = __ldrex((unsigned int *)v14);
            while ( __strex(v15 + 1, (unsigned int *)v14) );
            v16 = *v10;
            if ( *v10 )
            {
              __dmb();
              do
                v17 = __ldrex(v16);
              while ( __strex(v17 - 1, v16) );
              if ( v17 == 1 )
              {
                v18 = (void *)android::Fence::~Fence((android::Fence *)v16);
                operator delete(v18);
              }
            }
            *v10 = (unsigned int *)v14;
            **v11 = -1;
            v12 = *v11;
          }
          v12[3] &= 0xFFFFFFFE;
        }
        ++v8;
      }
      while ( v8 < *(_DWORD *)(v1 + 232) );
      result = v19;
    }
  }
  else
  {
    result = 0;
  }
  return result;
}
// 10800: using guessed type int __fastcall eglGetCurrentSurface(_DWORD);
// 11310: using guessed type int eglGetCurrentDisplay(void);

//----- (0002A4CC) --------------------------------------------------------
int __fastcall sub_2A4CC(int a1, unsigned int a2, int a3)
{
  int v3; // r6@1
  int v4; // r0@1
  int (*v5)(void); // r3@4
  int result; // r0@5

  v3 = a1;
  v4 = *(_DWORD *)(a1 + 8);
  if ( !v4 )
    goto LABEL_11;
  if ( !a3 )
  {
    sub_28C98(v3, a2, 0, 0);
    v4 = *(_DWORD *)(v3 + 8);
  }
  v5 = *(int (**)(void))(v4 + 76);
  if ( *(_DWORD *)(v4 + 4) >= 0x1040000u )
    return v5();
  if ( v5 )
    result = v5();
  else
LABEL_11:
    result = 0;
  return result;
}

//----- (0002A514) --------------------------------------------------------
int __fastcall sub_2A514(int a1, int a2)
{
  int v2; // r5@1
  int result; // r0@1
  int (*v4)(void); // r2@2

  v2 = a1;
  _android_log_print(3, "SurfaceFlinger", "HWComposer enable HDMIDisplay enable = %d", a2);
  result = *(_DWORD *)(v2 + 8);
  if ( result )
  {
    v4 = *(int (**)(void))(result + 152);
    if ( v4 )
      result = v4();
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A554) --------------------------------------------------------
int __fastcall sub_2A554(int a1, int a2)
{
  int v7; // r5@1
  int v8; // r3@1
  int result; // r0@1
  int (__fastcall *v10)(_DWORD, _DWORD, _DWORD, _DWORD); // r2@2

  _R4 = a2;
  __asm { VMOV            S0, R4 }
  v7 = a1;
  __asm
  {
    VCVT.F64.F32    D16, S0
    VSTR            D16, [SP,#0x18+var_18]
  }
  _android_log_print(3, "SurfaceFlinger", "HWComposer setReproductionWidthRatio widthRatio = %0.2f");
  result = *(_DWORD *)(v7 + 8);
  if ( result )
  {
    v10 = *(int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(result + 140);
    if ( v10 )
      result = v10(result, _R4, v10, v8);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002A5A4) --------------------------------------------------------
int __fastcall sub_2A5A4(int a1, int a2)
{
  int v7; // r5@1
  int v8; // r3@1
  int result; // r0@1
  int (__fastcall *v10)(_DWORD, _DWORD, _DWORD, _DWORD); // r2@2

  _R4 = a2;
  __asm { VMOV            S0, R4 }
  v7 = a1;
  __asm
  {
    VCVT.F64.F32    D16, S0
    VSTR            D16, [SP,#0x18+var_18]
  }
  _android_log_print(3, "SurfaceFlinger", "HWComposer setReproductionHeightRatio heightRatio = %0.2f");
  result = *(_DWORD *)(v7 + 8);
  if ( result )
  {
    v10 = *(int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(result + 144);
    if ( v10 )
      result = v10(result, _R4, v10, v8);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002A5F4) --------------------------------------------------------
int __fastcall sub_2A5F4(int a1, int a2)
{
  int v2; // r5@1
  int result; // r0@1
  int (*v4)(void); // r2@2

  v2 = a1;
  _android_log_print(3, "SurfaceFlinger", "HWComposer enableFullScreen enable is %d", a2);
  result = *(_DWORD *)(v2 + 8);
  if ( result )
  {
    v4 = *(int (**)(void))(result + 148);
    if ( v4 )
      result = v4();
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A634) --------------------------------------------------------
int __fastcall sub_2A634(int a1)
{
  int v1; // r5@1
  int result; // r0@1
  int (*v3)(void); // r2@2

  v1 = a1;
  _android_log_print(3, "SurfaceFlinger", "HWComposer add a virtual display.");
  result = *(_DWORD *)(v1 + 8);
  if ( result )
  {
    v3 = *(int (**)(void))(result + 128);
    if ( v3 )
      result = v3();
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A674) --------------------------------------------------------
int __fastcall sub_2A674(int a1)
{
  int v1; // r5@1
  int result; // r0@1
  int (*v3)(void); // r2@2

  v1 = a1;
  _android_log_print(3, "SurfaceFlinger", "HWComposer remove a virtual display.");
  result = *(_DWORD *)(v1 + 8);
  if ( result )
  {
    v3 = *(int (**)(void))(result + 132);
    if ( v3 )
      result = v3();
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A6B4) --------------------------------------------------------
int __fastcall sub_2A6B4(int a1)
{
  int v1; // r6@1
  int v2; // r0@1
  int (*v3)(void); // r2@2
  int result; // r0@3

  v1 = a1;
  _android_log_print(3, "SurfaceFlinger", "HWComposer request channel.");
  v2 = *(_DWORD *)(v1 + 8);
  if ( v2 && (v3 = *(int (**)(void))(v2 + 160)) != 0 )
    result = v3();
  else
    result = 1;
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A6F0) --------------------------------------------------------
int __fastcall sub_2A6F0(int a1)
{
  int v1; // r5@1
  int v2; // r0@1
  int (*v3)(void); // r2@2
  int result; // r0@3

  v1 = a1;
  _android_log_print(3, "SurfaceFlinger", "HWComposer release channel.");
  v2 = *(_DWORD *)(v1 + 8);
  if ( v2 && (v3 = *(int (**)(void))(v2 + 164)) != 0 )
    result = v3();
  else
    result = 1;
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A730) --------------------------------------------------------
int __fastcall sub_2A730(int a1, int a2)
{
  int v2; // r5@1
  int v3; // r4@1
  int v4; // r3@1
  int result; // r0@1
  int (__fastcall *v6)(_DWORD, _DWORD, _DWORD, _DWORD); // r2@2

  v2 = a1;
  v3 = a2;
  _android_log_print(3, "SurfaceFlinger", "HWComposer setOrientation = %d", a2);
  result = *(_DWORD *)(v2 + 8);
  if ( result )
  {
    v6 = *(int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(result + 120);
    if ( v6 )
      result = v6(result, v3, v6, v4);
    else
      result = _android_log_print(6, "SurfaceFlinger", "HWComposer mHwc->setOrientation is NULL.");
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002A784) --------------------------------------------------------
int __fastcall sub_2A784(int a1, int a2, int a3)
{
  int v3; // r6@1
  int result; // r0@1
  int (*v5)(void); // r3@2

  v3 = a1;
  _android_log_print(3, "SurfaceFlinger", "HWComposer setLayerStack(displayId = %d, layerStack = %d)", a2, a3);
  result = *(_DWORD *)(v3 + 8);
  if ( result )
  {
    v5 = *(int (**)(void))(result + 124);
    if ( v5 )
      result = v5();
    else
      result = _android_log_print(6, "SurfaceFlinger", "HWComposer mHwc->setLayerStack is NULL.");
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002A7FC) --------------------------------------------------------
int __fastcall sub_2A7FC(int a1, int a2, int a3)
{
  int v3; // r0@1
  int result; // r0@3

  *(_DWORD *)(a1 + 68 * a2 + 44) = a3;
  v3 = *(_DWORD *)(a1 + 8);
  if ( v3 && *(_DWORD *)(v3 + 4) >= 0x1040000u )
    result = (*(int (**)(void))(v3 + 104))();
  else
    result = 0;
  return result;
}

//----- (0002A898) --------------------------------------------------------
signed int __fastcall sub_2A898(int a1)
{
  int v1; // r1@1
  signed int result; // r0@3

  v1 = *(_DWORD *)(a1 + 8);
  if ( v1 && *(_DWORD *)(v1 + 4) > 0x100FFFFu )
    result = 1;
  else
    result = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 80);
  return result;
}

//----- (0002A8B4) --------------------------------------------------------
signed int __fastcall sub_2A8B4(int a1)
{
  int v1; // r1@1
  signed int result; // r0@1

  v1 = *(_DWORD *)(a1 + 8);
  result = 0;
  if ( v1 )
  {
    if ( *(_DWORD *)(v1 + 4) > 0x100FFFFu )
      result = 1;
  }
  return result;
}

//----- (0002A8D0) --------------------------------------------------------
signed int __fastcall sub_2A8D0(int a1, unsigned int a2, android::Fence **a3, int a4)
{
  int v4; // r5@1
  int v5; // r4@1
  int v6; // r0@1
  signed int result; // r0@3
  int v8; // r1@4

  v4 = a1;
  v5 = a4;
  v6 = *(_DWORD *)(a1 + 8);
  if ( v6 && *(_DWORD *)(v6 + 4) >= 0x1010000u )
  {
    result = sub_297AC(v4, a2, a3, a4);
  }
  else
  {
    android::Fence::waitForever(*a3, "HWComposer::fbPost");
    v8 = *(_DWORD *)(*(_DWORD *)v5 + 68);
    result = (*(int (**)(void))(*(_DWORD *)(v4 + 4) + 144))();
  }
  return result;
}

//----- (0002A944) --------------------------------------------------------
int __fastcall sub_2A944(int a1, android::String8 *a2)
{
  android::String8 *v2; // r4@1
  int v3; // r0@1
  void (*v4)(void); // r3@3
  int result; // r0@5
  int v6; // [sp+0h] [bp-1020h]@1
  char v7; // [sp+4h] [bp-101Ch]@4

  v2 = a2;
  v6 = v0;
  v3 = *(_DWORD *)(a1 + 4);
  if ( v3 )
  {
    if ( *(_DWORD *)(v3 + 4) )
    {
      v4 = *(void (**)(void))(v3 + 152);
      if ( v4 )
      {
        v4();
        android::String8::append(v2, &v7);
      }
    }
  }
  result = v0 - v6;
  if ( v0 != v6 )
    _stack_chk_fail(result);
  return result;
}
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (0002A9A8) --------------------------------------------------------
signed int __fastcall sub_2A9A8(int a1, signed int a2, unsigned int **a3, int a4)
{
  signed int result; // r0@4
  int v5; // r0@6

  if ( (unsigned int)a2 <= 0x1F && *(_DWORD *)(a1 + 260) & (0x80000000 >> a2) )
  {
    if ( a2 >= 2 )
    {
      v5 = a1 + 68 * a2;
      *(_DWORD *)(v5 + 80) = *(_DWORD *)(*(_DWORD *)a4 + 68);
      sub_16984((unsigned int **)(v5 + 84), a3);
      result = 0;
    }
    else
    {
      result = -38;
    }
  }
  else
  {
    result = -75;
  }
  return result;
}

//----- (0002A9F4) --------------------------------------------------------
unsigned int **__fastcall sub_2A9F4(unsigned int **result, int a2, unsigned int a3)
{
  unsigned int *v3; // r1@3
  unsigned int v4; // r0@5
  unsigned int *v5; // r1@7
  bool v6; // zf@7
  unsigned int v7; // r0@9

  if ( a3 <= 0x1F && *(_DWORD *)(a2 + 260) & (0x80000000 >> a3) )
  {
    v3 = *(unsigned int **)(a2 + 68 * a3 + 72);
    *result = v3;
    if ( v3 )
    {
      __dmb();
      do
      {
        v4 = __ldrex(v3);
        result = (unsigned int **)(v4 + 1);
      }
      while ( __strex((unsigned int)result, v3) );
    }
  }
  else
  {
    v5 = (unsigned int *)v0;
    v6 = v0 == 0;
    *result = (unsigned int *)v0;
    if ( !v6 )
    {
      __dmb();
      do
      {
        v7 = __ldrex(v5);
        result = (unsigned int **)(v7 + 1);
      }
      while ( __strex((unsigned int)result, v5) );
    }
  }
  return result;
}

//----- (0002AA60) --------------------------------------------------------
int __fastcall sub_2AA60(int a1, int a2, int a3)
{
  int (*v3)(void); // r12@1
  int v4; // r3@2
  int v5; // r2@2
  int result; // r0@2

  v3 = *(int (**)(void))(*(_DWORD *)(a1 + 8) + 108);
  if ( v3 )
  {
    v4 = *(_DWORD *)(a3 + 4);
    v5 = *(_DWORD *)a3;
    result = v3();
  }
  else
  {
    result = 0;
  }
  return result;
}

//----- (0002AA84) --------------------------------------------------------
unsigned int __fastcall sub_2AA84(unsigned int result, int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // r5@1
  unsigned int v5; // r4@1
  int v6; // r6@3
  int v7; // r7@4

  v4 = a4;
  v5 = result;
  if ( a3 <= 0x1F
    && (result = 0x80000000 >> a3, *(_DWORD *)(a2 + 260) & (0x80000000 >> a3))
    && (v6 = *(_DWORD *)(a2 + 8)) != 0
    && (result = a2 + 68 * a3, (v7 = *(_DWORD *)(result + 60)) != 0)
    && (result = *(_DWORD *)(v7 + 16), result >= a4) )
  {
    result = operator new(0x10u);
    *(_DWORD *)(result + 4) = v7 + 20;
    *(_DWORD *)(result + 8) = v7 + 20;
    *(_DWORD *)result = &unk_3FCB8;
    *(_DWORD *)(result + 12) = v6;
    *(_DWORD *)v5 = result;
    *(_DWORD *)(v5 + 4) = v4;
  }
  else
  {
    __asm
    {
      VMOV.I32        D16, #0
      VSTR            D16, [R4]
    }
  }
  return result;
}

//----- (0002AAEC) --------------------------------------------------------
unsigned int __fastcall sub_2AAEC(unsigned int a1, int a2, unsigned int a3)
{
  return sub_2AA84(a1, a2, a3, 0);
}

//----- (0002AAFC) --------------------------------------------------------
unsigned int __fastcall sub_2AAFC(unsigned int a1, int a2, unsigned int a3)
{
  unsigned int v3; // r4@1
  int v4; // r5@1
  unsigned int v5; // r6@1
  int v6; // r0@3
  int v7; // r1@4
  unsigned int v8; // r7@5

  v3 = a3;
  v4 = a2;
  v5 = a1;
  if ( a3 <= 0x1F
    && *(_DWORD *)(a2 + 260) & (0x80000000 >> a3)
    && (v6 = *(_DWORD *)(a2 + 8)) != 0
    && (v7 = *(_DWORD *)(a2 + 68 * a3 + 60)) != 0 )
  {
    v8 = *(_DWORD *)(v7 + 16);
    if ( *(_DWORD *)(v6 + 4) >= 0x1010000u )
    {
      if ( !v8 )
        _android_log_print(6, "SurfaceFlinger", "mDisplayData[%d].list->numHwLayers is 0", a3);
      if ( v8 )
        --v8;
    }
  }
  else
  {
    v8 = 0;
  }
  return sub_2AA84(v5, v4, v3, v8);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002AB78) --------------------------------------------------------
int __fastcall sub_2AB78(int a1, android::String8 *a2)
{
  int v2; // r5@1
  unsigned int v3; // r6@1
  android::String8 *v4; // r4@1
  char *v5; // r8@1
  pthread_mutex_t *v6; // r7@1
  int v7; // r0@1
  int v9; // r2@3
  int (__fastcall **v10)(_DWORD, _DWORD, _DWORD, _DWORD); // r9@3
  const char *v11; // r7@3
  int v12; // r5@4
  android::String8 *v13; // r11@5
  unsigned int *v14; // r8@5
  const char *v15; // r12@5
  int v16; // r5@6
  unsigned int v17; // r7@6
  android::String8 *v18; // r6@7
  int v19; // t1@7
  void *v25; // r2@7
  int v26; // r11@7
  int v27; // ST18_4@7
  android::String8 *v28; // r0@7
  const char *v29; // r6@7
  int v30; // r0@10
  int v31; // r4@12
  unsigned int v32; // r5@12
  const android::String8 *v33; // r0@14
  int v34; // r7@15
  unsigned int v35; // r1@17
  int v36; // r6@20
  char **v37; // r5@20
  int v38; // r4@20
  unsigned int v39; // r8@21
  signed int v40; // r11@21
  int v41; // r0@23
  int v42; // r1@23
  signed int v43; // r7@24
  const android::String8 *v44; // r0@27
  signed int v46; // r6@29
  int v47; // ST38_4@46
  int v48; // ST3C_4@46
  int v49; // r7@47
  int v50; // ST38_4@48
  int v51; // ST3C_4@48
  int v52; // ST40_4@48
  int v53; // ST44_4@48
  int v54; // r0@53
  void (*v55)(void); // r3@54
  int result; // r0@56
  pthread_mutex_t *v57; // [sp+54h] [bp-10BCh]@2
  int v58; // [sp+7Ch] [bp-1094h]@2
  int v59; // [sp+A4h] [bp-106Ch]@4
  int v60; // [sp+B4h] [bp-105Ch]@5
  android::String8 *v61; // [sp+BCh] [bp-1054h]@2
  int v62; // [sp+C0h] [bp-1050h]@5
  _DWORD *v63; // [sp+C8h] [bp-1048h]@6
  signed int v64; // [sp+C8h] [bp-1048h]@35
  int v65; // [sp+D4h] [bp-103Ch]@10
  char v66; // [sp+D8h] [bp-1038h]@1
  int v67; // [sp+DCh] [bp-1034h]@35
  char *s1; // [sp+E0h] [bp-1030h]@20
  char v69; // [sp+E4h] [bp-102Ch]@13
  char v70; // [sp+E8h] [bp-1028h]@42

  v2 = a1;
  v3 = 0xFFFFFF88;
  v4 = a2;
  v5 = &v66;
  v6 = (pthread_mutex_t *)(a1 + 228);
  *(_DWORD *)&v66 = v0;
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 228));
  v7 = *(_DWORD *)(v2 + 8);
  if ( v7 )
  {
    v57 = v6;
    android::String8::appendFormat(v4, "Hardware Composer state (version %08x):\n", *(_DWORD *)(v7 + 4) & 0xFFFF0000);
    v61 = v4;
    android::String8::appendFormat(v4, "  mDebugForceFakeVSync=%d\n", *(_BYTE *)(v2 + 256));
    _R10 = v2;
    v58 = v2;
    if ( *(_DWORD *)(v2 + 232) )
    {
      v9 = 0;
      v10 = &GLOBAL_OFFSET_TABLE_;
      v11 = "    %s%zd: %ux%u, xdpi=%f, ydpi=%f, refresh=%lld\n";
      do
      {
        v59 = v9;
        v12 = _R10 + 68 * v9;
        if ( *(_BYTE *)(v12 + 52) )
        {
          v13 = v61;
          v62 = sub_2353C(*(_DWORD *)_R10, v9);
          android::String8::appendFormat(v61, "  Display[%zd] configurations (* current):\n", v59);
          v60 = v12;
          v14 = (unsigned int *)(v12 + 32);
          v15 = v11;
          if ( *(_DWORD *)(v12 + 32) )
          {
            v16 = 0;
            v17 = 0;
            v63 = (_DWORD *)(v60 + 28);
            do
            {
              v18 = v13;
              v19 = *(_DWORD *)(v60 + 44);
              _R1 = *v63 + v16;
              __asm
              {
                VLDR            S0, [R1,#0xC]
                VLDR            S2, [R1,#8]
              }
              v25 = &unk_3B250;
              v26 = *(_DWORD *)(_R1 + 20);
              __asm
              {
                VCVT.F64.F32    D16, S2
                VCVT.F64.F32    D17, S0
              }
              v27 = *(_DWORD *)(_R1 + 16);
              v13 = v18;
              v28 = v18;
              v29 = v15;
              __asm
              {
                VSTR            D17, [SP,#0x1110+var_1100]
                VSTR            D16, [SP,#0x1110+var_1108]
              }
              if ( _ZF )
                v25 = (char *)v10 + 0xFFFF6AC9;
              android::String8::appendFormat(v28, v15, v25, v17++, *(_DWORD *)(*v63 + v16), *(_DWORD *)(_R1 + 4));
              v15 = v29;
              v16 += 24;
            }
            while ( v17 < *v14 );
          }
          v11 = v15;
          v30 = *(_DWORD *)(v60 + 60);
          v65 = v60 + 60;
          _R10 = v58;
          if ( v30 )
          {
            if ( *(_DWORD *)(v30 + 16) )
            {
              v31 = 0;
              v32 = 0;
              do
              {
                android::String8::String8((android::String8 *)&v69, "unknown");
                if ( v32 < *(_DWORD *)(v62 + 8) )
                {
                  v33 = (const android::String8 *)sub_17C58(*(_DWORD *)(*(_DWORD *)(v62 + 4) + 4 * v32));
                  android::String8::setTo((android::String8 *)&v69, v33);
                }
                v34 = android::String8::find((android::String8 *)&v69, "hwSingleMode_window", 0);
                android::String8::~String8((android::String8 *)&v69);
                ++v32;
                v30 = *(_DWORD *)v65;
                if ( v34 != -1 )
                  ++v31;
                v35 = *(_DWORD *)(v30 + 16);
              }
              while ( v32 < v35 );
            }
            else
            {
              v35 = 0;
              v31 = 0;
            }
            android::String8::appendFormat(v61, "  numHwLayers=%zu, flags=%08x\n", v35 - v31, *(_DWORD *)(v30 + 12));
            android::String8::append(
              v61,
              "    type   |  handle  | hint | flag | tr | blnd |   format    |     source crop (l,t,r,b)      |          "
              "frame         | name \n"
              "-----------+----------+------+------+----+------+-------------+--------------------------------+----------"
              "--------------+------\n");
            v36 = v62;
            v11 = "    %s%zd: %ux%u, xdpi=%f, ydpi=%f, refresh=%lld\n";
            v37 = &s1;
            _R10 = v58;
            v38 = *(_DWORD *)v65;
            if ( *(_DWORD *)(*(_DWORD *)v65 + 16) )
            {
              v39 = 0;
              v40 = 36;
              do
              {
                android::String8::String8((android::String8 *)v37, "unknown");
                if ( v39 >= *(_DWORD *)(v36 + 8) )
                {
                  v43 = -1;
                }
                else
                {
                  v41 = *(_DWORD *)(*(_DWORD *)(v36 + 4) + 4 * v39);
                  v42 = *(_DWORD *)(v41 + 4576);
                  if ( v42 )
                    v43 = *(_DWORD *)(v42 + 52);
                  else
                    v43 = -1;
                  v44 = (const android::String8 *)sub_17C58(v41);
                  android::String8::setTo((android::String8 *)v37, v44);
                }
                if ( android::String8::find((android::String8 *)v37, "hwSingleMode_window", 0) == -1 )
                {
                  _R9 = v38 + v40;
                  v46 = *(_DWORD *)(v38 + v40 - 16);
                  if ( v46 == 3 )
                  {
                    android::String8::setTo((android::String8 *)v37, "HWC_FRAMEBUFFER_TARGET");
                    v43 = *(_DWORD *)(v60 + 48);
                  }
                  if ( v46 > 6 )
                    v46 = 6;
                  if ( v43 > 33 )
                  {
                    if ( v43 == 34 )
                    {
                      v64 = v46;
                      android::String8::String8((android::String8 *)&v67, "ImplDef");
                    }
                    else
                    {
def_2AE80:
                      v64 = v46;
                      android::String8::String8((android::String8 *)&v70);
                      android::String8::appendFormat((android::String8 *)&v70, "? %08x", v43);
                      android::String8::String8((android::String8 *)&v67, (const android::String8 *)&v70);
                      android::String8::~String8((android::String8 *)&v70);
                    }
                  }
                  else
                  {
                    switch ( v43 )
                    {
                      case 5:
                        v64 = v46;
                        android::String8::String8((android::String8 *)&v67, "BGRA_8888");
                        break;
                      case 4:
                        v64 = v46;
                        android::String8::String8((android::String8 *)&v67, "RGB_565");
                        break;
                      case 3:
                        v64 = v46;
                        android::String8::String8((android::String8 *)&v67, "RGB_888");
                        break;
                      case 2:
                        v64 = v46;
                        android::String8::String8((android::String8 *)&v67, "RGBx_8888");
                        break;
                      case 1:
                        v64 = v46;
                        android::String8::String8((android::String8 *)&v67, "RGBA_8888");
                        break;
                      default:
                        goto def_2AE80;
                    }
                  }
                  if ( *(_DWORD *)(*(_DWORD *)(_R10 + 8) + 4) < 0x1030000u )
                  {
                    v49 = _R10;
                    android::String8::appendFormat(
                      v61,
                      " %9s | %08x | %04x | %04x | %02x | %04x | %-11s |%7d,%7d,%7d,%7d |%5d,%5d,%5d,%5d | %s\n",
                      off_3FC84[v64],
                      *(_DWORD *)(_R9 - 4),
                      *(_DWORD *)(_R9 - 12),
                      *(_DWORD *)(_R9 - 8),
                      *(_DWORD *)(v38 + v40),
                      *(_DWORD *)(_R9 + 4),
                      v67,
                      *(_DWORD *)(_R9 + 8),
                      *(_DWORD *)(_R9 + 12),
                      *(_DWORD *)(_R9 + 16),
                      *(_DWORD *)(_R9 + 20),
                      *(_DWORD *)(_R9 + 24),
                      *(_DWORD *)(_R9 + 28),
                      *(_DWORD *)(_R9 + 32),
                      *(_DWORD *)(_R9 + 36),
                      s1);
                    v36 = v62;
                    v37 = &s1;
                    v10 = &GLOBAL_OFFSET_TABLE_;
                  }
                  else
                  {
                    property_get("sys.sdr.enter", &v70, "0");
                    v36 = v62;
                    if ( atoi(&v70) == 1 && !strcmp(s1, "SurfaceView") )
                    {
                      __asm
                      {
                        VLDR            S0, [R10,#0x1B8]
                        VLDR            S2, [R10,#0x1BC]
                        VLDR            S4, [R10,#0x1C0]
                        VLDR            S6, [R10,#0x1C4]
                      }
                      v50 = *(_DWORD *)(_R9 + 24);
                      v51 = *(_DWORD *)(_R9 + 28);
                      v52 = *(_DWORD *)(_R9 + 32);
                      __asm
                      {
                        VCVT.F64.F32    D16, S6
                        VCVT.F64.F32    D17, S4
                        VCVT.F64.F32    D18, S2
                        VCVT.F64.F32    D19, S0
                      }
                      v53 = *(_DWORD *)(_R9 + 36);
                      __asm
                      {
                        VSTR            D16, [SP,#0x1110+var_10E0]
                        VSTR            D17, [SP,#0x1110+var_10E8]
                        VSTR            D18, [SP,#0x1110+var_10F0]
                        VSTR            D19, [SP,#0x1110+var_10F8]
                      }
                      android::String8::appendFormat(
                        v61,
                        " %9s | %08x | %04x | %04x | %02x | %04x | %-11s |%7.1f,%7.1f,%7.1f,%7.1f |%5d,%5d,%5d,%5d | %s\n",
                        off_3FC84[v64],
                        *(_DWORD *)(_R9 - 4),
                        *(_DWORD *)(_R9 - 12),
                        *(_DWORD *)(_R9 - 8),
                        *(_DWORD *)(v38 + v40),
                        *(_DWORD *)(_R9 + 4),
                        v67);
                    }
                    else
                    {
                      __asm
                      {
                        VLDR            S0, [R9,#0xC]
                        VLDR            S2, [R9,#0x10]
                        VLDR            S4, [R9,#0x14]
                        VLDR            S6, [R9,#8]
                        VCVT.F64.F32    D16, S4
                        VCVT.F64.F32    D17, S2
                      }
                      v47 = *(_DWORD *)(_R9 + 24);
                      v48 = *(_DWORD *)(_R9 + 28);
                      __asm
                      {
                        VCVT.F64.F32    D18, S0
                        VCVT.F64.F32    D19, S6
                        VSTR            D16, [SP,#0x1110+var_10E0]
                        VSTR            D17, [SP,#0x1110+var_10E8]
                        VSTR            D18, [SP,#0x1110+var_10F0]
                        VSTR            D19, [SP,#0x1110+var_10F8]
                      }
                      android::String8::appendFormat(
                        v61,
                        " %9s | %08x | %04x | %04x | %02x | %04x | %-11s |%7.1f,%7.1f,%7.1f,%7.1f |%5d,%5d,%5d,%5d | %s\n",
                        off_3FC84[v64],
                        *(_DWORD *)(_R9 - 4),
                        *(_DWORD *)(_R9 - 12),
                        *(_DWORD *)(_R9 - 8),
                        *(_DWORD *)(v38 + v40),
                        *(_DWORD *)(_R9 + 4),
                        v67);
                    }
                    v37 = &s1;
                    v49 = _R10;
                    v10 = &GLOBAL_OFFSET_TABLE_;
                  }
                  android::String8::~String8((android::String8 *)&v67);
                  _R10 = v49;
                }
                android::String8::~String8((android::String8 *)v37);
                v40 += 112;
                v11 = "    %s%zd: %ux%u, xdpi=%f, ydpi=%f, refresh=%lld\n";
                ++v39;
                v38 = *(_DWORD *)v65;
              }
              while ( v39 < *(_DWORD *)(*(_DWORD *)v65 + 16) );
            }
          }
        }
        v9 = v59 + 1;
      }
      while ( (unsigned int)(v59 + 1) < *(_DWORD *)(_R10 + 232) );
    }
    v54 = *(_DWORD *)(_R10 + 8);
    v5 = &v66;
    v3 = 0xFFFFFF88;
    v6 = v57;
    if ( v54 )
    {
      v55 = *(void (**)(void))(v54 + 88);
      if ( v55 )
      {
        v55();
        android::String8::append(v61, &v70);
      }
    }
  }
  pthread_mutex_unlock(v6);
  result = **(_DWORD **)((char *)&GLOBAL_OFFSET_TABLE_ + v3) - *(_DWORD *)v5;
  if ( **(_DWORD **)((char *)&GLOBAL_OFFSET_TABLE_ + v3) != *(_DWORD *)v5 )
    _stack_chk_fail(result);
  return result;
}
// 12: found interdependent unknown calls
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 3FC84: using guessed type char *off_3FC84[8];
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002B1E8) --------------------------------------------------------
int __fastcall sub_2B1E8(char *a1)
{
  return (*(int (__fastcall **)(_DWORD, _DWORD, _DWORD, _DWORD))(*(_DWORD *)&a1[*(_DWORD *)(*(_DWORD *)a1 - 16)] + 8))(
           &a1[*(_DWORD *)(*(_DWORD *)a1 - 16)],
           "VSyncThread",
           -9,
           0);
}

//----- (0002B300) --------------------------------------------------------
int __fastcall sub_2B300(android::VectorImpl *a1)
{
  int result; // r0@1
  unsigned int *v7; // r2@1
  unsigned int v8; // r3@3
  unsigned int *v9; // r2@4
  unsigned int v10; // r3@6
  unsigned int *v11; // r2@7
  unsigned int v12; // r3@9

  result = android::VectorImpl::VectorImpl(a1, 0x18u, 0);
  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)result = &unk_3FD2C;
  *(_DWORD *)(result + 20) = 0;
  *(_DWORD *)(result + 24) = 1;
  _R2 = result + 28;
  *(_DWORD *)(result + 44) = 0;
  __asm { VST1.8          {D16-D17}, [R2] }
  v7 = (unsigned int *)v0;
  _ZF = v0 == 0;
  *(_DWORD *)(result + 48) = v0;
  if ( !_ZF )
  {
    __dmb();
    do
      v8 = __ldrex(v7);
    while ( __strex(v8 + 1, v7) );
  }
  v9 = (unsigned int *)v0;
  *(_DWORD *)(result + 52) = v0;
  if ( v9 )
  {
    __dmb();
    do
      v10 = __ldrex(v9);
    while ( __strex(v10 + 1, v9) );
  }
  *(_DWORD *)(result + 56) = 0;
  v11 = (unsigned int *)v0;
  *(_DWORD *)(result + 60) = v0;
  if ( v11 )
  {
    __dmb();
    do
      v12 = __ldrex(v11);
    while ( __strex(v12 + 1, v11) );
  }
  *(_DWORD *)(result + 64) = 0;
  return result;
}

//----- (0002B3D0) --------------------------------------------------------
android::Thread *__fastcall sub_2B3D0(int a1)
{
  android::Thread *v1; // r4@1
  pthread_mutex_t *v2; // r5@1
  android::RefBase *v3; // r6@1

  v1 = (android::Thread *)a1;
  *(_DWORD *)a1 = &off_42DA0;
  v2 = (pthread_mutex_t *)(a1 + 40);
  *(_DWORD *)(a1 + 72) = &off_42DD8;
  v3 = (android::RefBase *)(a1 + 72);
  pthread_cond_destroy((pthread_cond_t *)(a1 + 44));
  pthread_mutex_destroy(v2);
  android::Thread::~Thread(v1);
  android::RefBase::~RefBase(v3);
  return v1;
}
// 42DA0: using guessed type void *off_42DA0;
// 42DD8: using guessed type void *off_42DD8;

//----- (0002B424) --------------------------------------------------------
void __fastcall sub_2B424(int a1)
{
  android::Thread *v1; // r4@1
  pthread_mutex_t *v2; // r5@1
  android::RefBase *v3; // r6@1

  v1 = (android::Thread *)a1;
  *(_DWORD *)a1 = &off_42DA0;
  v2 = (pthread_mutex_t *)(a1 + 40);
  *(_DWORD *)(a1 + 72) = &off_42DD8;
  v3 = (android::RefBase *)(a1 + 72);
  pthread_cond_destroy((pthread_cond_t *)(a1 + 44));
  pthread_mutex_destroy(v2);
  android::Thread::~Thread(v1);
  android::RefBase::~RefBase(v3);
  j_operator delete((void *)v1);
}
// 42DA0: using guessed type void *off_42DA0;
// 42DD8: using guessed type void *off_42DD8;

//----- (0002B47C) --------------------------------------------------------
int __fastcall sub_2B47C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  *(_DWORD *)v1 = &off_42DA0;
  *(_DWORD *)(v1 + 72) = &off_42DD8;
  pthread_cond_destroy((pthread_cond_t *)(v1 + 44));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 40));
  android::Thread::~Thread((android::Thread *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 72));
}
// 42DA0: using guessed type void *off_42DA0;
// 42DD8: using guessed type void *off_42DD8;

//----- (0002B4D0) --------------------------------------------------------
void __fastcall sub_2B4D0(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  *(_DWORD *)v1 = &off_42DA0;
  *(_DWORD *)(v1 + 72) = &off_42DD8;
  pthread_cond_destroy((pthread_cond_t *)(v1 + 44));
  pthread_mutex_destroy((pthread_mutex_t *)(v1 + 40));
  android::Thread::~Thread((android::Thread *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 72));
  j_operator delete((void *)v1);
}
// 42DA0: using guessed type void *off_42DA0;
// 42DD8: using guessed type void *off_42DD8;

//----- (0002B948) --------------------------------------------------------
signed int __fastcall sub_2B948(int a1)
{
  android::BBinder **v1; // r5@1
  pthread_mutex_t *v2; // r4@1
  android::BBinder *v3; // r0@1
  signed int v4; // r6@10
  char *v6; // [sp+0h] [bp-28h]@5
  int v7; // [sp+4h] [bp-24h]@2
  char *v8; // [sp+8h] [bp-20h]@2
  char v9; // [sp+Ch] [bp-1Ch]@2

  v1 = (android::BBinder **)a1;
  v2 = (pthread_mutex_t *)(a1 + 4);
  pthread_mutex_lock((pthread_mutex_t *)(a1 + 4));
  v3 = *v1;
  if ( !*v1 )
  {
    android::String16::String16((android::String16 *)&v9, "power");
    android::defaultServiceManager((android *)&v7);
    (*(void (__fastcall **)(char **))(*(_DWORD *)v7 + 20))(&v8);
    if ( v7 )
      android::RefBase::decStrong((android::RefBase *)(v7 + *(_DWORD *)(*(_DWORD *)v7 - 12)), &v7);
    if ( !v8 )
    {
      android::String16::~String16((android::String16 *)&v9);
      v4 = -2;
      goto LABEL_15;
    }
    android::IPowerManager::asInterface(&v6, &v8);
    sub_123A8(v1, &v6);
    if ( v6 )
      android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], &v6);
    if ( v8 )
      android::RefBase::decStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], &v8);
    android::String16::~String16((android::String16 *)&v9);
    v3 = *v1;
  }
  v4 = (*(_DWORD (__cdecl **)(android::BBinder *))(*(_DWORD *)v3 + 32))(v3);
  if ( v4 == -32 )
  {
    if ( *v1 )
      android::RefBase::decStrong((android::BBinder *)((char *)*v1 + *(_DWORD *)(*(_DWORD *)*v1 - 12)), v1);
    v4 = -32;
    *v1 = 0;
  }
LABEL_15:
  pthread_mutex_unlock(v2);
  return v4;
}
// 1134C: using guessed type int __fastcall android::IPowerManager::asInterface(_DWORD, _DWORD);

//----- (0002BA24) --------------------------------------------------------
int __fastcall sub_2BA24(int a1, int a2, android::String8 *a3, char **a4, char **a5, int a6, android::String8 *a7)
{
  int v7; // r4@1
  char **v8; // r5@1
  android::String8 *v9; // r8@1
  int v10; // r9@1
  signed int v11; // r6@1
  const char *v12; // r5@3
  char v14; // [sp+4h] [bp-34h]@6
  int v15; // [sp+8h] [bp-30h]@2
  char v16; // [sp+Ch] [bp-2Ch]@1
  int v17; // [sp+10h] [bp-28h]@1
  int v18; // [sp+14h] [bp-24h]@1

  v7 = a1;
  v8 = a4;
  v9 = a3;
  v10 = a2;
  android::RefBase::RefBase((android::RefBase *)(a1 + 1432));
  *(_DWORD *)v7 = &unk_42FEC;
  *(_DWORD *)(v7 + 1432) = &off_4302C;
  android::IGraphicBufferProducer::IGraphicBufferProducer((android::IGraphicBufferProducer *)(v7 + 4));
  android::BBinder::BBinder((android::BBinder *)(v7 + 8));
  *(_DWORD *)(v7 + 1432) = &off_43120;
  *(_DWORD *)(v7 + 4) = &off_4305C;
  *(_DWORD *)(v7 + 8) = &off_430C0;
  android::ConsumerBase::ConsumerBase(v7 + 24, &off_3FD94, a6, 0);
  *(_DWORD *)v7 = &off_42E54;
  *(_DWORD *)(v7 + 1432) = &off_42FC4;
  *(_DWORD *)(v7 + 4) = &off_42EC4;
  *(_DWORD *)(v7 + 8) = &off_42F28;
  *(_DWORD *)(v7 + 24) = &off_42F78;
  *(_DWORD *)(v7 + 1080) = v10;
  *(_DWORD *)(v7 + 1084) = v9;
  android::String8::String8((android::String8 *)(v7 + 1088), a7);
  *(_DWORD *)(v7 + 1096) = 0;
  *(_DWORD *)(v7 + 1092) = 0;
  *(_DWORD *)(v7 + 1108) = 2048;
  *(_DWORD *)(v7 + 1404) = 0;
  *(_DWORD *)(v7 + 1408) = 0;
  *(_DWORD *)(v7 + 1420) = 0;
  *(_DWORD *)(v7 + 1424) = 0;
  *(_BYTE *)(v7 + 1428) = 0;
  _aeabi_memset(v7 + 1112, 264, 0);
  sub_123A8((void *)(v7 + 1092), v8);
  sub_123A8((void *)(v7 + 1096), a5);
  *(_DWORD *)(v7 + 1400) = 0;
  sub_16984((unsigned int **)(v7 + 1404), 0);
  sub_16984((unsigned int **)(v7 + 1408), 0);
  *(_DWORD *)(v7 + 1412) = -1;
  *(_DWORD *)(v7 + 1416) = -1;
  (*(void (**)(void))(*(_DWORD *)*v8 + 48))();
  v11 = 1;
  (*(void (**)(void))(*(_DWORD *)*v8 + 48))();
  *(_DWORD *)(v7 + 1392) = v18;
  *(_DWORD *)(v7 + 1396) = v17;
  (*(void (**)(void))(*(_DWORD *)*v8 + 48))();
  if ( v16 )
  {
    (*(void (**)(void))(*(_DWORD *)*v8 + 48))();
    v11 = v15;
  }
  *(_DWORD *)(v7 + 1100) = v11;
  v12 = *(const char **)(v7 + 1088);
  if ( strstr(*(const char **)(v7 + 1088), "EncodeVirtualTest") || strstr(v12, "ScreenCapture") )
  {
    v11 = 20;
    *(_DWORD *)(v7 + 1100) = 20;
  }
  *(_DWORD *)(v7 + 1104) = v11;
  android::String8::format((android::String8 *)&v14, "VDS: %s", v12);
  android::String8::setTo((android::String8 *)(v7 + 1060), (const android::String8 *)&v14);
  android::String8::~String8((android::String8 *)&v14);
  (*(void (__cdecl **)(pthread_mutex_t *))(**(_DWORD **)(v7 + 1072) + 56))(*(pthread_mutex_t **)(v7 + 1072));
  (*(void (__cdecl **)(android::SortedVectorImpl *))(**(_DWORD **)(v7 + 1072) + 68))(*(android::SortedVectorImpl **)(v7 + 1072));
  (*(void (**)(void))(**(_DWORD **)(v7 + 1072) + 40))();
  (*(void (__cdecl **)(pthread_mutex_t *, const pthread_mutexattr_t *))(**(_DWORD **)(v7 + 1072) + 44))(
    *(pthread_mutex_t **)(v7 + 1072),
    (const pthread_mutexattr_t *)2);
  return v7;
}
// 10860: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 11250: using guessed type int __fastcall android::ConsumerBase::ConsumerBase(_DWORD, _DWORD, _DWORD, _DWORD);
// 3FD94: using guessed type void *;
// 42E54: using guessed type void *off_42E54;
// 42EC4: using guessed type void *off_42EC4;
// 42F28: using guessed type void *off_42F28;
// 42F78: using guessed type void *off_42F78;
// 42FC4: using guessed type void *off_42FC4;
// 4302C: using guessed type void *off_4302C;
// 4305C: using guessed type void *off_4305C;
// 430C0: using guessed type void *off_430C0;
// 43120: using guessed type void *off_43120;

//----- (0002BC3C) --------------------------------------------------------
int __fastcall sub_2BC3C(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r0@1
  int v4; // r7@1
  int v5; // r6@1
  android::RefBase *v6; // r0@2
  signed int v7; // r6@5
  char *v8; // r0@6

  v2 = a1;
  v3 = *(_DWORD *)a2;
  *(_DWORD *)v2 = *(_DWORD *)a2;
  *(_DWORD *)(v2 + *(_DWORD *)(v3 - 12)) = *(_DWORD *)(a2 + 84);
  *(_DWORD *)(v2 + 4) = *(_DWORD *)(a2 + 88);
  *(_DWORD *)(v2 + 8) = *(_DWORD *)(a2 + 92);
  *(_DWORD *)(v2 + 24) = *(_DWORD *)(a2 + 96);
  sub_17AF0((unsigned int **)(v2 + 1408));
  sub_17AF0((unsigned int **)(v2 + 1404));
  v4 = v2 + 1372;
  v5 = 0;
  do
  {
    v6 = *(android::RefBase **)(v4 + v5);
    if ( v6 )
      android::RefBase::decStrong(v6, (const void *)(v4 + v5));
    v5 -= 4;
  }
  while ( v5 != -256 );
  v7 = 1096;
  do
  {
    v8 = *(char **)(v2 + v7);
    if ( v8 )
      android::RefBase::decStrong((android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)], (const void *)(v2 + v7));
    v7 -= 4;
  }
  while ( v7 != 1088 );
  android::String8::~String8((android::String8 *)(v2 + 1088));
  android::ConsumerBase::~ConsumerBase((android::ConsumerBase *)(v2 + 24));
  android::BBinder::~BBinder((android::BBinder *)(v2 + 8));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)(v2 + 4));
  return v2;
}

//----- (0002BCDC) --------------------------------------------------------
int __fastcall sub_2BCDC(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_2BC3C(a1, (int)&off_3FD50);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1432));
  return v1;
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BD04) --------------------------------------------------------
int __fastcall sub_2BD04(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_2BC3C(a1 - 4, (int)&off_3FD50);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 1428));
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BD54) --------------------------------------------------------
int __fastcall sub_2BD54(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_2BC3C(a1 - 24, (int)&off_3FD50);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 1408));
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BD7C) --------------------------------------------------------
int __fastcall sub_2BD7C(_DWORD *a1)
{
  int v1; // r0@1

  v1 = sub_2BC3C((int)a1 + *(_DWORD *)(*a1 - 12), (int)&off_3FD50);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 1432));
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BDA8) --------------------------------------------------------
void __fastcall sub_2BDA8(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_2BC3C(a1, (int)&off_3FD50);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1432));
  j_operator delete((void *)v1);
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BDD4) --------------------------------------------------------
void __fastcall sub_2BDD4(int a1)
{
  int v1; // r4@1
  void *v2; // r5@1

  v1 = a1;
  v2 = (void *)(a1 - 4);
  sub_2BC3C(a1 - 4, (int)&off_3FD50);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1428));
  j_operator delete(v2);
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BE38) --------------------------------------------------------
void __fastcall sub_2BE38(int a1)
{
  int v1; // r4@1
  void *v2; // r5@1

  v1 = a1;
  v2 = (void *)(a1 - 24);
  sub_2BC3C(a1 - 24, (int)&off_3FD50);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1408));
  j_operator delete(v2);
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BE6C) --------------------------------------------------------
void __fastcall sub_2BE6C(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  sub_2BC3C(v1, (int)&off_3FD50);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 1432));
  j_operator delete((void *)v1);
}
// 3FD50: using guessed type void **off_3FD50;

//----- (0002BEA0) --------------------------------------------------------
int __fastcall sub_2BEA0(int a1, char a2)
{
  int v2; // r4@1
  int v3; // r5@2
  char *v4; // r1@2
  int v5; // r0@2
  unsigned int v6; // r0@5
  const char *v8; // r0@9

  v2 = a1;
  if ( *(_DWORD *)(a1 + 1084) < 0 )
    return 0;
  *(_BYTE *)(a1 + 1428) = a2;
  v3 = sub_29FD4(*(_DWORD *)(a1 + 1080));
  v4 = strstr(*(const char **)(v2 + 1088), "EncodeVirtualTest");
  v5 = *(_DWORD *)(v2 + 1080);
  if ( !v4 )
  {
    sub_29FF8(v5);
    if ( v3 )
      goto LABEL_5;
    return 0;
  }
  sub_29FF8(v5);
LABEL_5:
  v6 = *(_DWORD *)(v2 + 1420);
  if ( v6 )
  {
    if ( v6 > 5 )
      v8 = "INVALID";
    else
      v8 = off_3FDF0[v6];
    _android_log_print(5, "SurfaceFlinger", "[%s] Unexpected beginFrame() in %s state", *(_DWORD *)(v2 + 1088), v8);
  }
  *(_DWORD *)(v2 + 1420) = 1;
  return sub_2BF60(v2);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FDF0: using guessed type char *off_3FDF0[6];

//----- (0002BF60) --------------------------------------------------------
int __fastcall sub_2BF60(int a1)
{
  int v1; // r4@1
  int v2; // r5@2
  int result; // r0@4
  int v4; // r0@5
  int v5; // [sp+Ch] [bp-14h]@4

  v1 = a1;
  if ( *(_DWORD *)(a1 + 1416) <= -1 )
  {
    v2 = a1 + 1408;
  }
  else
  {
    v2 = a1 + 1408;
    (*(void (**)(void))(**(_DWORD **)(a1 + 1092) + 44))();
  }
  result = sub_2C574(v1, 0, *(_DWORD *)(v1 + 1104), *(_DWORD *)(v1 + 1108), &v5, v2);
  if ( result >= 0 )
  {
    v4 = v5;
    *(_DWORD *)(v1 + 1416) = v5;
    result = sub_2A9A8(*(_DWORD *)(v1 + 1080), *(_DWORD *)(v1 + 1084), 0, v1 + 4 * v4 + 1120);
  }
  return result;
}

//----- (0002BFD4) --------------------------------------------------------
int __fastcall sub_2BFD4(int a1, signed int a2)
{
  int v2; // r4@1
  signed int v3; // r5@1
  unsigned int v4; // r0@2
  int v5; // r0@3
  int v6; // r1@12
  const char *v8; // r0@17

  v2 = a1;
  v3 = a2;
  if ( *(_DWORD *)(a1 + 1084) < 0 )
    return 0;
  v4 = *(_DWORD *)(a1 + 1420);
  if ( v4 != 1 )
  {
    if ( v4 > 5 )
      v8 = "INVALID";
    else
      v8 = off_3FDF0[v4];
    _android_log_print(5, "SurfaceFlinger", "[%s] Unexpected prepareFrame() in %s state", *(_DWORD *)(v2 + 1088), v8);
  }
  *(_DWORD *)(v2 + 1420) = 2;
  *(_DWORD *)(v2 + 1400) = v3;
  v5 = *(_DWORD *)(v2 + 1104);
  if ( v3 == 1 && v5 == 20 )
  {
    v3 = 3;
LABEL_8:
    *(_DWORD *)(v2 + 1400) = v3;
    goto LABEL_9;
  }
  if ( v5 == 1 )
  {
    v3 = 1;
    goto LABEL_8;
  }
LABEL_9:
  if ( v3 != *(_DWORD *)(v2 + 1424) )
    *(_DWORD *)(v2 + 1424) = v3;
  if ( v3 != 1 )
  {
    v6 = *(_DWORD *)(v2 + 1100);
    if ( v5 != v6 || *(_DWORD *)(v2 + 1108) != 2048 )
    {
      *(_DWORD *)(v2 + 1104) = v6;
      *(_DWORD *)(v2 + 1108) = 2048;
      sub_2BF60(v2);
    }
  }
  return 0;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FDF0: using guessed type char *off_3FDF0[6];

//----- (0002C0A0) --------------------------------------------------------
int sub_2C0A0()
{
  return 0;
}

//----- (0002C0A4) --------------------------------------------------------
signed int __fastcall sub_2C0A4(int a1)
{
  int v1; // r4@1
  unsigned int v2; // r0@2
  const char *v3; // r0@5
  signed int v4; // r4@6
  int v5; // r1@8
  int v6; // r0@9
  android::RefBase **v7; // r5@11
  android::RefBase *v8; // r0@13
  const char *v10; // r0@27
  android::RefBase *v11; // [sp+8h] [bp-18h]@15
  android::RefBase *v12; // [sp+Ch] [bp-14h]@11

  v1 = a1;
  if ( *(_DWORD *)(a1 + 1084) < 0 )
    return 0;
  v2 = *(_DWORD *)(a1 + 1420);
  if ( *(_DWORD *)(v1 + 1400) == 2 )
  {
    if ( v2 != 2 )
    {
      if ( v2 > 5 )
        v3 = "INVALID";
      else
        v3 = off_3FDF0[v2];
      _android_log_print(
        5,
        "SurfaceFlinger",
        "[%s] Unexpected advanceFrame() in %s state on HWC frame",
        *(_DWORD *)(v1 + 1088),
        v3);
    }
  }
  else if ( v2 != 4 )
  {
    if ( v2 > 5 )
      v10 = "INVALID";
    else
      v10 = off_3FDF0[v2];
    _android_log_print(
      5,
      "SurfaceFlinger",
      "[%s] Unexpected advanceFrame() in %s state on GLES/MIXED frame",
      *(_DWORD *)(v1 + 1088),
      v10);
  }
  *(_DWORD *)(v1 + 1420) = 5;
  v5 = *(_DWORD *)(v1 + 1416);
  if ( v5 < 0 )
    goto LABEL_19;
  v6 = *(_DWORD *)(v1 + 1412);
  if ( *(_DWORD *)(v1 + 1400) != 2 )
  {
    if ( v6 >= 0 )
    {
LABEL_13:
      v7 = &v12;
      v8 = *(android::RefBase **)(v1 + 4 * v6 + 1120);
      v12 = v8;
      if ( v8 )
      {
        android::RefBase::incStrong(v8, &v12);
        v5 = *(_DWORD *)(v1 + 1416);
      }
      goto LABEL_15;
    }
LABEL_19:
    _android_log_print(6, "SurfaceFlinger", "[%s] advanceFrame: no buffer, bailing out", *(_DWORD *)(v1 + 1088));
    return -12;
  }
  if ( v6 >= 0 )
    goto LABEL_13;
  v7 = &v12;
  v12 = 0;
LABEL_15:
  v11 = *(android::RefBase **)(v1 + 4 * v5 + 1120);
  if ( v11 )
    android::RefBase::incStrong(v11, &v11);
  sub_2A9A8(*(_DWORD *)(v1 + 1080), *(_DWORD *)(v1 + 1084), (unsigned int **)(v1 + 1408), (int)&v11);
  if ( *v7 )
    v4 = sub_2A8D0(*(_DWORD *)(v1 + 1080), *(_DWORD *)(v1 + 1084), (android::Fence **)(v1 + 1404), (int)&v12);
  else
    v4 = 0;
  if ( v11 )
    android::RefBase::decStrong(v11, &v11);
  if ( *v7 )
    android::RefBase::decStrong(*v7, &v12);
  return v4;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FDF0: using guessed type char *off_3FDF0[6];

//----- (0002C220) --------------------------------------------------------
unsigned int **__fastcall sub_2C220(unsigned int **result)
{
  unsigned int **v1; // r4@1
  signed int v2; // r2@1
  unsigned int v3; // r0@2
  unsigned int *v4; // r1@5
  int v5; // r7@5
  void (__fastcall *v6)(unsigned int **, int, android::RefBase **, _DWORD); // r5@9
  unsigned int *v7; // r5@14
  unsigned int *v8; // r10@15
  int (__fastcall *v9)(unsigned int *, unsigned int *, int *, unsigned int **); // r11@16
  int v10; // r0@16
  signed int v11; // r7@16
  int v12; // r9@16
  signed int v13; // r6@16
  int v14; // r1@16
  int v15; // r8@16
  unsigned int *v21; // r0@20
  unsigned int v22; // r1@22
  int v24; // r5@23
  int v25; // r1@23
  int v26; // r1@24
  int v27; // r2@24
  const char *v28; // r0@30
  int v29; // [sp+0h] [bp-B8h]@0
  int v30; // [sp+8h] [bp-B0h]@20
  int v31; // [sp+Ch] [bp-ACh]@20
  int v32; // [sp+10h] [bp-A8h]@20
  int v33; // [sp+20h] [bp-98h]@20
  int v34; // [sp+24h] [bp-94h]@20
  int v35; // [sp+28h] [bp-90h]@20
  int v36; // [sp+2Ch] [bp-8Ch]@20
  int v37; // [sp+30h] [bp-88h]@20
  int v38; // [sp+34h] [bp-84h]@20
  unsigned int *v39; // [sp+38h] [bp-80h]@20
  int v40; // [sp+3Ch] [bp-7Ch]@23
  int v41; // [sp+50h] [bp-68h]@23
  unsigned int *v42; // [sp+60h] [bp-58h]@15
  unsigned int *v43; // [sp+64h] [bp-54h]@23
  int v44; // [sp+68h] [bp-50h]@24
  int v45; // [sp+70h] [bp-48h]@24
  android::RefBase *v46; // [sp+74h] [bp-44h]@9
  android::RefBase *v47; // [sp+78h] [bp-40h]@5
  char v48; // [sp+7Ch] [bp-3Ch]@3

  v1 = result;
  v2 = (signed int)result[271];
  if ( v2 >= 0 )
  {
    v3 = (unsigned int)result[355];
    if ( v3 != 5 )
    {
      if ( v3 > 5 )
        v28 = "INVALID";
      else
        v28 = off_3FDF0[v3];
      _android_log_print(5, "SurfaceFlinger", "[%s] Unexpected onFrameCommitted() in %s state", v1[272], v28);
      v2 = (signed int)v1[271];
    }
    v1[355] = 0;
    sub_2A2CC((unsigned int **)&v48, (int)v1[270], v2);
    if ( v1[350] == (unsigned int *)3 && (signed int)v1[353] >= 0 )
    {
      pthread_mutex_lock((pthread_mutex_t *)(v1 + 269));
      v4 = v1[353];
      v5 = 63 - (_DWORD)v4;
      v47 = (android::RefBase *)v1[(_DWORD)v4 + 280];
      if ( v47 )
        android::RefBase::incStrong(v47, &v47);
      android::ConsumerBase::addReleaseFenceLocked(v1 + 6, v5, &v47, &v48);
      if ( v47 )
        android::RefBase::decStrong(v47, &v47);
      v6 = (void (__fastcall *)(unsigned int **, int, android::RefBase **, _DWORD))v1[6][11];
      v46 = (android::RefBase *)v1[(_DWORD)v1[353] + 280];
      if ( v46 )
        android::RefBase::incStrong(v46, &v46);
      v29 = 0;
      v6(v1 + 6, v5, &v46, 0);
      if ( v46 )
        android::RefBase::decStrong(v46, &v46);
      pthread_mutex_unlock((pthread_mutex_t *)(v1 + 269));
    }
    v7 = v1[354];
    if ( (signed int)v7 >= 0 )
    {
      sub_2A9F4(&v42, (int)v1[270], (unsigned int)v1[271]);
      v8 = v1[273];
      if ( *((_BYTE *)v1 + 1428) )
      {
        v9 = *(int (__fastcall **)(unsigned int *, unsigned int *, int *, unsigned int **))(*v8 + 40);
        v10 = systemTime(1);
        v11 = (signed int)v1[348];
        v12 = v10;
        v13 = (signed int)v1[349];
        v15 = v14;
        if ( v11 <= -1 )
        {
          _android_log_print(5, "Rect", "Width %u too large for Rect class, clamping", v1[348], v29);
          v11 = 0x7FFFFFFF;
        }
        if ( v13 <= -1 )
        {
          _android_log_print(5, "Rect", "Height %u too large for Rect class, clamping", v13, v29);
          v13 = 0x7FFFFFFF;
        }
        __asm { VMOV.I32        Q4, #0 }
        v30 = v12;
        v31 = v15;
        _R0 = &v32;
        __asm { VST1.64         {D8-D9}, [R0] }
        v33 = v11;
        v34 = v13;
        v35 = 0;
        v36 = 0;
        v37 = 0;
        v38 = 1;
        v21 = v42;
        v39 = v42;
        if ( v42 )
        {
          __dmb();
          do
            v22 = __ldrex(v21);
          while ( __strex(v22 + 1, v21) );
        }
        android::Region::Region(&v40);
        _R0 = &v41;
        __asm { VST1.64         {D8-D9}, [R0] }
        v24 = v9(v8, v7, &v30, &v43);
        android::Region::~Region(&v40, v25);
        sub_17AF0(&v39);
        if ( !v24 )
        {
          v26 = v44;
          v27 = v45;
          v1[344] = v43;
          v1[345] = (unsigned int *)v26;
          v1[346] = 0;
          v1[347] = (unsigned int *)v27;
        }
      }
      else
      {
        (*(void (__fastcall **)(unsigned int *, unsigned int *, unsigned int **, _DWORD))(*v8 + 44))(
          v1[273],
          v7,
          &v42,
          *(_DWORD *)(*v8 + 44));
      }
      sub_17AF0(&v42);
    }
    v1[350] = 0;
    sub_16984(v1 + 351, 0);
    sub_16984(v1 + 352, 0);
    v1[353] = (unsigned int *)-1;
    v1[354] = (unsigned int *)-1;
    result = sub_17AF0((unsigned int **)&v48);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10728: using guessed type int __fastcall android::Region::Region(_DWORD);
// 107C4: using guessed type int __fastcall android::Region::~Region(_DWORD, _DWORD);
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 11358: using guessed type int __fastcall android::ConsumerBase::addReleaseFenceLocked(_DWORD, _DWORD, _DWORD, _DWORD);
// 3FDF0: using guessed type char *off_3FDF0[6];
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002C4A8) --------------------------------------------------------
int __fastcall sub_2C4A8(int result, int a2, int a3)
{
  *(_DWORD *)(result + 1376) = a2;
  *(_DWORD *)(result + 1380) = a3;
  *(_DWORD *)(result + 1392) = a2;
  *(_DWORD *)(result + 1396) = a3;
  return result;
}

//----- (0002C4BC) --------------------------------------------------------
int __fastcall sub_2C4BC(int a1, int a2, void *a3)
{
  int v3; // r6@1
  void *v4; // r4@1
  int v5; // r5@1
  unsigned int v6; // r0@2
  int result; // r0@3
  const char *v8; // r0@6

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( *(_DWORD *)(a1 + 1084) <= -1 )
  {
    result = (*(int (**)(void))(**(_DWORD **)(a1 + 1092) + 16))();
  }
  else
  {
    v6 = *(_DWORD *)(a1 + 1420);
    if ( v6 != 3 )
    {
      if ( v6 > 5 )
        v8 = "INVALID";
      else
        v8 = off_3FDF0[v6];
      _android_log_print(
        5,
        "SurfaceFlinger",
        "[%s] Unexpected requestBuffer pslot=%d in %s state",
        *(_DWORD *)(v3 + 1088),
        a2,
        v8);
    }
    sub_1A074(v4, (android::RefBase **)(v3 + 4 * v5 + 1120));
    result = 0;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FDF0: using guessed type char *off_3FDF0[6];

//----- (0002C554) --------------------------------------------------------
int __fastcall sub_2C554(int a1, int a2, void *a3)
{
  return sub_2C4BC(a1 - 4, a2, a3);
}

//----- (0002C55C) --------------------------------------------------------
int __fastcall sub_2C55C(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 1092) + 20))();
}

//----- (0002C568) --------------------------------------------------------
int __fastcall sub_2C568(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 1088) + 20))();
}

//----- (0002C574) --------------------------------------------------------
int __fastcall sub_2C574(int a1, unsigned int a2, int a3, int a4, int *a5, int a6)
{
  int v6; // r4@1
  unsigned int v7; // r5@1
  int v8; // r9@1
  int v9; // r6@1
  signed int v10; // r3@1
  int v11; // ST04_4@1
  int v12; // r0@3
  int v13; // r7@3
  int v14; // r12@4
  int v15; // r7@4
  int v16; // r3@6
  unsigned int v17; // r6@6
  unsigned int v18; // r2@6
  __int64 v19; // r0@8
  unsigned int v20; // r8@10
  __int64 *v21; // r9@10
  int v22; // r11@14
  android::RefBase **i; // r5@14
  unsigned int v24; // r3@16
  int v25; // r3@23
  android::RefBase **v26; // r5@23
  int v28; // [sp+10h] [bp-30h]@6
  int v29; // [sp+14h] [bp-2Ch]@4

  v6 = a1;
  v7 = a2;
  v8 = a1 + 4 * a2;
  v9 = *(_DWORD *)(a1 + 1392);
  v10 = 0;
  v11 = *(_DWORD *)(a1 + 1396);
  if ( !a2 )
    v10 = 1;
  v12 = (*(int (__cdecl **)(_DWORD, int *, int, signed int))(**(_DWORD **)(v8 + 1092) + 24))(
          *(_DWORD *)(v8 + 1092),
          a5,
          a6,
          v10);
  v13 = v12;
  if ( v12 >= 0 )
  {
    v14 = v12;
    v15 = *a5;
    v29 = v8;
    if ( v7 == 1 )
      v15 = 63 - v15;
    v16 = v15 - 32;
    v17 = v7 >> (32 - v15);
    v18 = 1u >> (32 - v15);
    v28 = v15;
    if ( v15 - 32 >= 0 )
      v17 = v7 << v16;
    v19 = *(_QWORD *)(v6 + 1112);
    if ( v16 >= 0 )
      v18 = 1 << v16;
    v20 = v7 << v15;
    v21 = (__int64 *)(v6 + 1112);
    if ( (1 << v15) & (unsigned int)v19 ^ (v7 << v15) | v18 & HIDWORD(v19) ^ v17 )
    {
      LODWORD(v19) = v19 & ~(1 << v15) | v20;
      HIDWORD(v19) = HIDWORD(v19) & ~v18 | v17;
      v13 = v14 | 1;
      *v21 = v19;
    }
    else
    {
      v13 = v14;
    }
    if ( v13 & 2 )
    {
      v22 = 0;
      for ( i = (android::RefBase **)(v6 + 1120); ; ++i )
      {
        v24 = 1u >> (32 - v22);
        if ( v22 - 32 >= 0 )
          v24 = 1 << (v22 - 32);
        if ( !((unsigned int)v19 & (1 << v22) ^ v20 | HIDWORD(v19) & v24 ^ v17) && *i )
        {
          android::RefBase::decStrong(*i, i);
          *i = 0;
        }
        if ( v22 == 63 )
          break;
        v19 = *v21;
        ++v22;
      }
    }
    if ( v13 & 1 )
    {
      v25 = v6 + 4 * v28;
      v26 = (android::RefBase **)(v25 + 1120);
      v13 = (*(int (__cdecl **)(_DWORD, int, int, int))(**(_DWORD **)(v29 + 1092) + 16))(
              *(_DWORD *)(v29 + 1092),
              *a5,
              v25 + 1120,
              v25);
      if ( v13 <= -1 )
      {
        if ( *v26 )
        {
          android::RefBase::decStrong(*v26, v26);
          *v26 = 0;
        }
        (*(void (__cdecl **)(_DWORD, int, int, _DWORD))(**(_DWORD **)(v29 + 1092) + 44))(
          *(_DWORD *)(v29 + 1092),
          *a5,
          a6,
          *(_DWORD *)(**(_DWORD **)(v29 + 1092) + 44));
      }
    }
  }
  return v13;
}

//----- (0002C6EC) --------------------------------------------------------
int __fastcall sub_2C6EC(int a1, signed int *a2, unsigned int **a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // r6@1
  int v9; // r7@1
  unsigned int **v10; // r5@1
  signed int *v11; // r8@1
  unsigned int v12; // r0@2
  int v13; // r7@6
  signed int v15; // r0@9
  int v16; // r7@10
  const char *v17; // r0@24
  int v18; // [sp+Ch] [bp-1Ch]@6

  v8 = a1;
  v9 = a4;
  v10 = a3;
  v11 = a2;
  if ( *(_DWORD *)(a1 + 1084) <= -1 )
    return (*(int (**)(void))(**(_DWORD **)(a1 + 1092) + 24))();
  v12 = *(_DWORD *)(a1 + 1420);
  if ( v12 != 2 )
  {
    if ( v12 > 5 )
      v17 = "INVALID";
    else
      v17 = off_3FDF0[v12];
    _android_log_print(5, "SurfaceFlinger", "[%s] Unexpected dequeueBuffer() in %s state", *(_DWORD *)(v8 + 1088), v17);
  }
  *(_DWORD *)(v8 + 1420) = 3;
  if ( !v9 )
    _android_log_print(
      5,
      "SurfaceFlinger",
      "[%s] EGL called dequeueBuffer with !async despite eglSwapInterval(0)",
      *(_DWORD *)(v8 + 1088));
  if ( *(_DWORD *)(v8 + 1400) == 3 )
  {
    v13 = sub_2C574(v8, 1u, a7, a8, &v18, (int)v10);
    if ( v13 >= 0 )
      *v11 = 63 - v18;
    return v13;
  }
  v15 = *(_DWORD *)(v8 + 1416);
  if ( v15 <= -1 )
  {
    _android_log_print(6, "SurfaceFlinger", "[%s] dequeueBuffer: no buffer, bailing out", *(_DWORD *)(v8 + 1088));
    return -12;
  }
  v16 = *(_DWORD *)(v8 + 4 * v15 + 1120);
  if ( !((a8 | 0x800) & ~*(_DWORD *)(v16 + 56))
    && (!a7 || *(_DWORD *)(v16 + 52) == a7)
    && (!a5 || *(_DWORD *)(v8 + 1392) == a5)
    && (!a6 || *(_DWORD *)(v8 + 1396) == a6) )
  {
    v13 = 0;
LABEL_20:
    *v11 = v15;
    sub_16984(v10, (unsigned int **)(v8 + 1408));
    return v13;
  }
  *(_DWORD *)(v8 + 1104) = a7;
  *(_DWORD *)(v8 + 1108) = a8 | 0x800;
  v13 = sub_2BF60(v8);
  if ( v13 >= 0 )
  {
    v15 = *(_DWORD *)(v8 + 1416);
    goto LABEL_20;
  }
  return v13;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FDF0: using guessed type char *off_3FDF0[6];

//----- (0002C864) --------------------------------------------------------
int __fastcall sub_2C864(int a1, signed int *a2, unsigned int **a3, int a4, int a5, int a6, int a7, int a8)
{
  return sub_2C6EC(a1 - 4, a2, a3, a4, a5, a6, a7, a8);
}

//----- (0002C86C) --------------------------------------------------------
signed int __fastcall sub_2C86C(int a1)
{
  _android_log_print(
    6,
    "SurfaceFlinger",
    "[%s] detachBuffer is not available for VirtualDisplaySurface",
    *(_DWORD *)(a1 + 1088));
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002C89C) --------------------------------------------------------
signed int __fastcall sub_2C89C(int a1)
{
  _android_log_print(
    6,
    "SurfaceFlinger",
    "[%s] detachBuffer is not available for VirtualDisplaySurface",
    *(_DWORD *)(a1 + 1084));
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002C8CC) --------------------------------------------------------
signed int __fastcall sub_2C8CC(int a1)
{
  _android_log_print(
    6,
    "SurfaceFlinger",
    "[%s] detachNextBuffer is not available for VirtualDisplaySurface",
    *(_DWORD *)(a1 + 1088));
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002C8FC) --------------------------------------------------------
signed int __fastcall sub_2C8FC(int a1)
{
  _android_log_print(
    6,
    "SurfaceFlinger",
    "[%s] detachNextBuffer is not available for VirtualDisplaySurface",
    *(_DWORD *)(a1 + 1084));
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002C92C) --------------------------------------------------------
signed int __fastcall sub_2C92C(int a1)
{
  _android_log_print(
    6,
    "SurfaceFlinger",
    "[%s] attachBuffer is not available for VirtualDisplaySurface",
    *(_DWORD *)(a1 + 1088));
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002C95C) --------------------------------------------------------
signed int __fastcall sub_2C95C(int a1)
{
  _android_log_print(
    6,
    "SurfaceFlinger",
    "[%s] attachBuffer is not available for VirtualDisplaySurface",
    *(_DWORD *)(a1 + 1084));
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002C98C) --------------------------------------------------------
int __fastcall sub_2C98C(int a1, int a2, int a3, int a4)
{
  int v4; // r5@1
  int v6; // r6@1
  int v7; // r7@1
  unsigned int v8; // r0@2
  int v9; // r7@4
  int v10; // r6@4
  const char *v18; // r0@15
  char v19; // [sp+8h] [bp-98h]@5
  int v20; // [sp+50h] [bp-50h]@11

  v4 = a1;
  _R9 = a4;
  v6 = a3;
  v7 = a2;
  if ( *(_DWORD *)(a1 + 1084) <= -1 )
    return (*(int (**)(void))(**(_DWORD **)(a1 + 1092) + 40))();
  v8 = *(_DWORD *)(a1 + 1420);
  if ( v8 != 3 )
  {
    if ( v8 > 5 )
      v18 = "INVALID";
    else
      v18 = off_3FDF0[v8];
    _android_log_print(
      5,
      "SurfaceFlinger",
      "[%s] Unexpected queueBuffer(pslot=%d) in %s state",
      *(_DWORD *)(v4 + 1088),
      a2,
      v18);
  }
  *(_DWORD *)(v4 + 1420) = 4;
  if ( *(_DWORD *)(v4 + 1400) != 3 )
  {
    sub_16984((unsigned int **)(v4 + 1404), (unsigned int **)(v6 + 48));
    *(_DWORD *)(v4 + 1412) = v7;
    sub_16984((unsigned int **)(v4 + 1408), (unsigned int **)(v4 + 1404));
    goto LABEL_9;
  }
  v9 = 63 - v7;
  v10 = (*(int (**)(void))(**(_DWORD **)(v4 + 1096) + 40))();
  if ( !v10 )
  {
    pthread_mutex_lock((pthread_mutex_t *)(v4 + 1076));
    android::BufferItem::BufferItem((android::BufferItem *)&v19);
    v10 = (*(int (__fastcall **)(int, char *, _DWORD, _DWORD))(*(_DWORD *)(v4 + 24) + 40))(v4 + 24, &v19, 0, 0);
    if ( v10 )
    {
      android::BufferItem::~BufferItem((android::BufferItem *)&v19);
      pthread_mutex_unlock((pthread_mutex_t *)(v4 + 1076));
      return v10;
    }
    if ( v20 != v9 )
    {
      _android_log_print(
        5,
        "SurfaceFlinger",
        "[%s] queueBuffer: acquired sslot %d from SCRATCH after queueing sslot %d",
        *(_DWORD *)(v4 + 1088),
        v20,
        v9);
      v9 = v20;
    }
    *(_DWORD *)(v4 + 1412) = 63 - v9;
    sub_16984((unsigned int **)(v4 + 1404), (unsigned int **)(v4 + 16 * v9 + 36));
    android::BufferItem::~BufferItem((android::BufferItem *)&v19);
    pthread_mutex_unlock((pthread_mutex_t *)(v4 + 1076));
LABEL_9:
    _R0 = v4 + 1376;
    v10 = 0;
    __asm
    {
      VLD1.8          {D16-D17}, [R0]
      VST1.8          {D16-D17}, [R9]
    }
  }
  return v10;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FDF0: using guessed type char *off_3FDF0[6];

//----- (0002CB00) --------------------------------------------------------
int __fastcall sub_2CB00(int a1, int a2, int a3, int a4)
{
  return sub_2C98C(a1 - 4, a2, a3, a4);
}

//----- (0002CB08) --------------------------------------------------------
int __fastcall sub_2CB08(int a1, int a2)
{
  int v2; // r6@1
  unsigned int v3; // r0@2
  int v4; // r1@3
  signed int v5; // r0@3
  int (*v6)(void); // r3@5
  const char *v8; // r0@9

  v2 = a1;
  if ( *(_DWORD *)(a1 + 1084) <= -1 )
  {
    v6 = *(int (**)(void))(**(_DWORD **)(a1 + 1092) + 44);
  }
  else
  {
    v3 = *(_DWORD *)(a1 + 1420);
    if ( v3 != 3 )
    {
      if ( v3 > 5 )
        v8 = "INVALID";
      else
        v8 = off_3FDF0[v3];
      _android_log_print(
        5,
        "SurfaceFlinger",
        "[%s] Unexpected cancelBuffer(pslot=%d) in %s state",
        *(_DWORD *)(v2 + 1088),
        a2,
        v8);
    }
    v4 = *(_DWORD *)(v2 + 1400);
    v5 = 0;
    if ( v4 == 3 )
      v5 = 1;
    v6 = *(int (**)(void))(**(_DWORD **)(v2 + 4 * v5 + 1092) + 44);
  }
  return v6();
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 3FDF0: using guessed type char *off_3FDF0[6];

//----- (0002CBAC) --------------------------------------------------------
int __fastcall sub_2CBAC(int a1, int a2)
{
  return sub_2CB08(a1 - 4, a2);
}

//----- (0002CBB4) --------------------------------------------------------
int __fastcall sub_2CBB4(int a1, int a2, _DWORD *a3)
{
  _DWORD *v3; // r0@2

  if ( a2 == 1 )
  {
    v3 = (_DWORD *)(a1 + 1396);
LABEL_5:
    *a3 = *v3;
    return 0;
  }
  if ( !a2 )
  {
    v3 = (_DWORD *)(a1 + 1392);
    goto LABEL_5;
  }
  return (*(int (**)(void))(**(_DWORD **)(a1 + 1092) + 48))();
}

//----- (0002CBD8) --------------------------------------------------------
int __fastcall sub_2CBD8(int a1, int a2, _DWORD *a3)
{
  int v3; // r0@1
  _DWORD *v4; // r0@2

  v3 = a1 - 4;
  if ( a2 == 1 )
  {
    v4 = (_DWORD *)(v3 + 1396);
LABEL_5:
    *a3 = *v4;
    return 0;
  }
  if ( !a2 )
  {
    v4 = (_DWORD *)(v3 + 1392);
    goto LABEL_5;
  }
  return (*(int (**)(void))(**(_DWORD **)(v3 + 1092) + 48))();
}

//----- (0002CBFC) --------------------------------------------------------
int __fastcall sub_2CBFC(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r5@1
  int result; // r0@1
  int v7; // r3@2
  int v8; // r4@2
  int v16; // [sp+8h] [bp-20h]@2
  int v17; // [sp+Ch] [bp-1Ch]@2
  int v18; // [sp+14h] [bp-14h]@2

  v5 = a1;
  result = (*(int (__cdecl **)(_DWORD))(**(_DWORD **)(a1 + 1092) + 52))(*(_DWORD *)(a1 + 1092));
  if ( !result )
  {
    v7 = v17;
    v8 = v18;
    *(_DWORD *)(v5 + 1376) = v16;
    *(_DWORD *)(v5 + 1380) = v7;
    *(_DWORD *)(v5 + 1384) = 0;
    _R2 = v5 + 1376;
    *(_DWORD *)(v5 + 1388) = v8;
    _R1 = a5;
    __asm
    {
      VLD1.8          {D16-D17}, [R2]
      VST1.8          {D16-D17}, [R1]
    }
  }
  return result;
}

//----- (0002CC44) --------------------------------------------------------
int __fastcall sub_2CC44(int a1, int a2, int a3, int a4, int a5)
{
  return sub_2CBFC(a1 - 4, a2, a3, a4, a5);
}

//----- (0002CC4C) --------------------------------------------------------
int __fastcall sub_2CC4C(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 1092) + 56))();
}

//----- (0002CC58) --------------------------------------------------------
int __fastcall sub_2CC58(int a1)
{
  return (*(int (**)(void))(**(_DWORD **)(a1 + 1088) + 56))();
}

//----- (0002CC64) --------------------------------------------------------
signed int sub_2CC64()
{
  return -38;
}

//----- (0002CC6C) --------------------------------------------------------
signed int sub_2CC6C()
{
  return -38;
}

//----- (0002CC7C) --------------------------------------------------------
signed int sub_2CC7C()
{
  return -38;
}

//----- (0002CC84) --------------------------------------------------------
signed int sub_2CC84()
{
  return -38;
}

//----- (0002CC8C) --------------------------------------------------------
signed int sub_2CC8C()
{
  _android_log_print(6, "SurfaceFlinger", "setGenerationNumber not supported on VirtualDisplaySurface");
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002CCB8) --------------------------------------------------------
signed int sub_2CCB8()
{
  _android_log_print(6, "SurfaceFlinger", "setGenerationNumber not supported on VirtualDisplaySurface");
  return -38;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002CCE4) --------------------------------------------------------
int __fastcall sub_2CCE4(android::String8 *a1)
{
  return android::String8::String8(a1, "VirtualDisplaySurface");
}

//----- (0002CD00) --------------------------------------------------------
int __fastcall sub_2CD00(android::String8 *a1)
{
  return android::String8::String8(a1, "VirtualDisplaySurface");
}

//----- (0002CD1C) --------------------------------------------------------
int __fastcall sub_2CD1C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (0002CD54) --------------------------------------------------------
void __fastcall sub_2CD54(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (0002CD90) --------------------------------------------------------
int __fastcall sub_2CD90(int a1)
{
  return a1 + 4;
}

//----- (0002CD98) --------------------------------------------------------
int __fastcall sub_2CD98(const void *a1, char *a2, _DWORD *a3)
{
  const void *v3; // r6@1
  char *v4; // r5@1
  int v5; // r1@2
  int v6; // r3@4
  int result; // r0@5

  v3 = a1;
  v4 = a2;
  if ( *a3 )
    v5 = (*(_DWORD *)(*a3 - 12) >> 1) - 1;
  if ( v0 )
    v6 = (*(_DWORD *)(v0 - 12) >> 1) - 1;
  result = strzcmp16();
  if ( result )
  {
    result = 0;
    *(_DWORD *)v3 = 0;
  }
  else
  {
    *(_DWORD *)v3 = v4;
    if ( v4 )
      result = android::RefBase::incStrong((android::RefBase *)&v4[*(_DWORD *)(*(_DWORD *)v4 - 12)], v3);
  }
  return result;
}
// 1053C: using guessed type int strzcmp16(void);

//----- (0002CDF4) --------------------------------------------------------
int __fastcall sub_2CDF4(const void *a1, int a2, _DWORD *a3)
{
  return sub_2CD98(a1, (char *)(a2 - 4), a3);
}

//----- (0002CE04) --------------------------------------------------------
int __fastcall sub_2CE04(int a1)
{
  return j_android::IGraphicBufferProducer::getInterfaceDescriptor((android::IGraphicBufferProducer *)(a1 - 4));
}

//----- (0002CE84) --------------------------------------------------------
int __fastcall sub_2CE84(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (0002CEC0) --------------------------------------------------------
void __fastcall sub_2CEC0(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (0002CF04) --------------------------------------------------------
int __fastcall sub_2CF04(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  return v1;
}

//----- (0002CF3C) --------------------------------------------------------
void __fastcall sub_2CF3C(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::BBinder::~BBinder((android::BBinder *)(a1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (0002CFE8) --------------------------------------------------------
int __fastcall sub_2CFE8(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  return j_android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
}

//----- (0002D024) --------------------------------------------------------
void __fastcall sub_2D024(char *a1)
{
  int v1; // r4@1

  v1 = (int)&a1[*(_DWORD *)(*(_DWORD *)a1 - 12)];
  android::BBinder::~BBinder((android::BBinder *)(v1 + 4));
  android::IGraphicBufferProducer::~IGraphicBufferProducer((android::IGraphicBufferProducer *)v1);
  android::RefBase::~RefBase((android::RefBase *)(v1 + 16));
  j_operator delete((void *)v1);
}

//----- (0002D064) --------------------------------------------------------
int __fastcall sub_2D064(int result)
{
  signed int v5; // r1@1

  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)result = 4;
  *(_DWORD *)(result + 4) = 0;
  *(_BYTE *)(result + 8) = 1;
  v5 = 12;
  do
  {
    _R2 = result + v5;
    v5 += 16;
    __asm { VST1.32         {D16-D17}, [R2] }
  }
  while ( v5 != 76 );
  _R2 = result + 16;
  *(_DWORD *)(result + 12) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 36;
  *(_DWORD *)(result + 32) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 56;
  *(_DWORD *)(result + 52) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  *(_DWORD *)(result + 72) = 1065353216;
  return result;
}

//----- (0002D0A8) --------------------------------------------------------
int __fastcall sub_2D0A8(int result, int a2)
{
  if ( *(_DWORD *)result != a2 )
  {
    *(_BYTE *)(result + 8) = 1;
    *(_DWORD *)result = a2;
  }
  return result;
}

//----- (0002D0B8) --------------------------------------------------------
int __fastcall sub_2D0B8(int result, int a2)
{
  if ( *(_DWORD *)(result + 4) != a2 )
  {
    *(_BYTE *)(result + 8) = 1;
    *(_DWORD *)(result + 4) = a2;
  }
  return result;
}

//----- (0002D0C8) --------------------------------------------------------
int __fastcall sub_2D0C8(int a1)
{
  int v1; // r4@1

  v1 = a1;
  if ( *(_BYTE *)(a1 + 8) )
  {
    *(_BYTE *)(a1 + 8) = 0;
    sub_2D0E0(a1);
  }
  return v1 + 12;
}

//----- (0002D0E0) --------------------------------------------------------
void __fastcall sub_2D0E0(int a1)
{
  int v5; // r8@1
  int v7; // r1@1
  int v9; // r2@3
  int v12; // r6@5
  int v18; // r1@7
  int v23; // r1@9
  int v26; // r2@11
  int v30; // r3@13
  int v33; // r1@15
  int v37; // r1@17
  int v43; // r1@19
  int v49; // r1@21
  int v53; // r0@23
  char *v54; // r3@27
  int v55; // r0@33
  int v56; // r1@33
  int v57; // r2@33
  int *v58; // r5@34
  int *v59; // r6@34
  int v60; // r0@34
  signed int v61; // r2@35
  char *v64; // r5@39
  int *v65; // r6@39
  int v66; // r4@39
  int v67; // r0@39
  signed int v68; // r2@40
  int v71; // r1@45
  int v72; // r8@45
  int v73; // r2@45
  int v74; // r3@45
  int v75; // r6@45
  int v76; // r5@45
  int v77; // r1@45
  int v78; // r2@45
  int v79; // r3@45
  int v80; // r6@45
  int v81; // r5@45
  int v82; // r5@45
  int v83; // r1@45
  int v84; // r2@45
  int v85; // r3@45
  int v86; // [sp+0h] [bp-53Ch]@34
  int v87; // [sp+2Ch] [bp-510h]@45
  int v88; // [sp+40h] [bp-4FCh]@39
  int v89; // [sp+44h] [bp-4F8h]@39
  int v90; // [sp+48h] [bp-4F4h]@39
  int v91; // [sp+4Ch] [bp-4F0h]@39
  int v92; // [sp+50h] [bp-4ECh]@39
  int v93; // [sp+54h] [bp-4E8h]@39
  int v94; // [sp+58h] [bp-4E4h]@39
  int v95; // [sp+5Ch] [bp-4E0h]@39
  int v96; // [sp+60h] [bp-4DCh]@39
  int v97; // [sp+64h] [bp-4D8h]@39
  int v98; // [sp+68h] [bp-4D4h]@39
  int v99; // [sp+6Ch] [bp-4D0h]@39
  int v100; // [sp+70h] [bp-4CCh]@39
  int v101; // [sp+74h] [bp-4C8h]@39
  int v102; // [sp+78h] [bp-4C4h]@39
  int v103; // [sp+7Ch] [bp-4C0h]@39
  char v104; // [sp+80h] [bp-4BCh]@39
  char v105; // [sp+C0h] [bp-47Ch]@34
  int v106; // [sp+C4h] [bp-478h]@39
  int v107; // [sp+C8h] [bp-474h]@39
  int v108; // [sp+CCh] [bp-470h]@39
  int v109; // [sp+D0h] [bp-46Ch]@39
  int v110; // [sp+D4h] [bp-468h]@39
  int v111; // [sp+D8h] [bp-464h]@39
  int v112; // [sp+DCh] [bp-460h]@39
  int v113; // [sp+E0h] [bp-45Ch]@39
  int v114; // [sp+E4h] [bp-458h]@39
  int v115; // [sp+E8h] [bp-454h]@39
  int v116; // [sp+ECh] [bp-450h]@39
  int v117; // [sp+F0h] [bp-44Ch]@39
  int v118; // [sp+F4h] [bp-448h]@39
  int v119; // [sp+F8h] [bp-444h]@39
  int v120; // [sp+FCh] [bp-440h]@39
  int v121; // [sp+100h] [bp-43Ch]@44
  int v122; // [sp+104h] [bp-438h]@44
  int v123; // [sp+108h] [bp-434h]@44
  int v124; // [sp+10Ch] [bp-430h]@44
  int v125; // [sp+110h] [bp-42Ch]@44
  int v126; // [sp+114h] [bp-428h]@44
  int v127; // [sp+118h] [bp-424h]@44
  int v128; // [sp+11Ch] [bp-420h]@44
  int v129; // [sp+120h] [bp-41Ch]@44
  int v130; // [sp+124h] [bp-418h]@44
  int v131; // [sp+128h] [bp-414h]@44
  int v132; // [sp+12Ch] [bp-410h]@44
  int v133; // [sp+130h] [bp-40Ch]@44
  int v134; // [sp+134h] [bp-408h]@44
  int v135; // [sp+138h] [bp-404h]@44
  int v136; // [sp+13Ch] [bp-400h]@44
  char v137; // [sp+140h] [bp-3FCh]@44
  int v138; // [sp+144h] [bp-3F8h]@45
  int v139; // [sp+148h] [bp-3F4h]@45
  int v140; // [sp+14Ch] [bp-3F0h]@45
  int v141; // [sp+150h] [bp-3ECh]@45
  int v142; // [sp+154h] [bp-3E8h]@45
  int v143; // [sp+158h] [bp-3E4h]@45
  int v144; // [sp+15Ch] [bp-3E0h]@45
  int v145; // [sp+160h] [bp-3DCh]@45
  int v146; // [sp+164h] [bp-3D8h]@45
  int v147; // [sp+168h] [bp-3D4h]@45
  int v148; // [sp+16Ch] [bp-3D0h]@45
  int v149; // [sp+170h] [bp-3CCh]@45
  int v150; // [sp+174h] [bp-3C8h]@45
  int v151; // [sp+178h] [bp-3C4h]@45
  int v152; // [sp+17Ch] [bp-3C0h]@45
  char v153[12]; // [sp+180h] [bp-3BCh]@21
  int v154; // [sp+184h] [bp-3B8h]@27
  int v155; // [sp+188h] [bp-3B4h]@27
  int v156; // [sp+18Ch] [bp-3B0h]@27
  int v157; // [sp+190h] [bp-3ACh]@27
  int v158; // [sp+194h] [bp-3A8h]@27
  int v159; // [sp+198h] [bp-3A4h]@27
  int v160; // [sp+19Ch] [bp-3A0h]@27
  int v161; // [sp+1A0h] [bp-39Ch]@23
  int v162; // [sp+1A4h] [bp-398h]@27
  int v163; // [sp+1A8h] [bp-394h]@27
  int v164; // [sp+1ACh] [bp-390h]@27
  int v165; // [sp+1B0h] [bp-38Ch]@23
  int v166; // [sp+1B4h] [bp-388h]@33
  int v167; // [sp+1B8h] [bp-384h]@33
  int v168; // [sp+1BCh] [bp-380h]@33
  int v169[3]; // [sp+1C0h] [bp-37Ch]@20
  int v170; // [sp+1C4h] [bp-378h]@26
  float v171; // [sp+1C8h] [bp-374h]@26
  int v172; // [sp+1CCh] [bp-370h]@26
  int v173; // [sp+1D0h] [bp-36Ch]@26
  int v174; // [sp+1D4h] [bp-368h]@21
  float v175[3]; // [sp+1D8h] [bp-364h]@21
  int v176; // [sp+1DCh] [bp-360h]@26
  int v177; // [sp+1E0h] [bp-35Ch]@26
  int v178; // [sp+1E4h] [bp-358h]@26
  int v179; // [sp+1E8h] [bp-354h]@21
  int v180; // [sp+1ECh] [bp-350h]@21
  int v181; // [sp+1F0h] [bp-34Ch]@26
  int v182; // [sp+1F4h] [bp-348h]@26
  int v183; // [sp+1F8h] [bp-344h]@26
  int v184; // [sp+1FCh] [bp-340h]@21
  int v185[5]; // [sp+200h] [bp-33Ch]@18
  int v186; // [sp+214h] [bp-328h]@19
  int v187; // [sp+218h] [bp-324h]@19
  int v188; // [sp+228h] [bp-314h]@19
  int v189; // [sp+22Ch] [bp-310h]@19
  int v190; // [sp+23Ch] [bp-300h]@19
  int v191[3]; // [sp+240h] [bp-2FCh]@16
  int v192; // [sp+244h] [bp-2F8h]@32
  int v193; // [sp+248h] [bp-2F4h]@32
  int v194; // [sp+24Ch] [bp-2F0h]@32
  int v195; // [sp+250h] [bp-2ECh]@32
  int v196; // [sp+254h] [bp-2E8h]@17
  int v197; // [sp+258h] [bp-2E4h]@17
  int v198; // [sp+25Ch] [bp-2E0h]@17
  int v199; // [sp+260h] [bp-2DCh]@17
  int v200; // [sp+264h] [bp-2D8h]@17
  int v201; // [sp+268h] [bp-2D4h]@17
  int v202; // [sp+26Ch] [bp-2D0h]@17
  char v203; // [sp+270h] [bp-2CCh]@32
  int v204; // [sp+27Ch] [bp-2C0h]@17
  int v205; // [sp+280h] [bp-2BCh]@14
  int v206; // [sp+284h] [bp-2B8h]@15
  int v207; // [sp+288h] [bp-2B4h]@15
  int v208; // [sp+28Ch] [bp-2B0h]@15
  int v209; // [sp+290h] [bp-2ACh]@15
  int v210; // [sp+294h] [bp-2A8h]@15
  int v211; // [sp+298h] [bp-2A4h]@15
  int v212; // [sp+29Ch] [bp-2A0h]@15
  int v213; // [sp+2A0h] [bp-29Ch]@15
  int v214; // [sp+2A4h] [bp-298h]@15
  int v215; // [sp+2A8h] [bp-294h]@15
  int v216; // [sp+2ACh] [bp-290h]@15
  char v217; // [sp+2B0h] [bp-28Ch]@27
  int v218; // [sp+2BCh] [bp-280h]@15
  int v219; // [sp+2C0h] [bp-27Ch]@12
  int v220; // [sp+2C4h] [bp-278h]@13
  int v221; // [sp+2C8h] [bp-274h]@13
  int v222; // [sp+2CCh] [bp-270h]@13
  int v223; // [sp+2D0h] [bp-26Ch]@13
  int v224; // [sp+2D4h] [bp-268h]@13
  char v225; // [sp+2D8h] [bp-264h]@13
  int v226; // [sp+2DCh] [bp-260h]@29
  int v227; // [sp+2E0h] [bp-25Ch]@29
  int v228; // [sp+2E4h] [bp-258h]@29
  int v229; // [sp+2E8h] [bp-254h]@13
  int v230; // [sp+2ECh] [bp-250h]@13
  char v231; // [sp+2F0h] [bp-24Ch]@29
  int v232; // [sp+2FCh] [bp-240h]@13
  int v233; // [sp+300h] [bp-23Ch]@10
  int v234; // [sp+304h] [bp-238h]@11
  float v235; // [sp+308h] [bp-234h]@31
  int v236; // [sp+30Ch] [bp-230h]@11
  int v237; // [sp+310h] [bp-22Ch]@11
  int v238; // [sp+314h] [bp-228h]@11
  float v239; // [sp+318h] [bp-224h]@31
  int v240; // [sp+31Ch] [bp-220h]@11
  int v241; // [sp+320h] [bp-21Ch]@31
  int v242; // [sp+324h] [bp-218h]@31
  int v243; // [sp+328h] [bp-214h]@31
  int v244; // [sp+32Ch] [bp-210h]@11
  int v245; // [sp+330h] [bp-20Ch]@31
  int v246; // [sp+334h] [bp-208h]@31
  int v247; // [sp+338h] [bp-204h]@31
  int v248; // [sp+33Ch] [bp-200h]@11
  int v249; // [sp+340h] [bp-1FCh]@8
  int v250; // [sp+344h] [bp-1F8h]@26
  float v251; // [sp+348h] [bp-1F4h]@9
  int v252; // [sp+34Ch] [bp-1F0h]@26
  int v253; // [sp+350h] [bp-1ECh]@26
  int v254; // [sp+354h] [bp-1E8h]@9
  float v255; // [sp+358h] [bp-1E4h]@26
  int v256; // [sp+35Ch] [bp-1E0h]@26
  int v257; // [sp+360h] [bp-1DCh]@26
  int v258; // [sp+364h] [bp-1D8h]@26
  int v259; // [sp+368h] [bp-1D4h]@9
  int v260; // [sp+36Ch] [bp-1D0h]@9
  int v261; // [sp+370h] [bp-1CCh]@26
  int v262; // [sp+374h] [bp-1C8h]@26
  int v263; // [sp+378h] [bp-1C4h]@26
  int v264; // [sp+37Ch] [bp-1C0h]@9
  char v265[12]; // [sp+380h] [bp-1BCh]@5
  int v266; // [sp+384h] [bp-1B8h]@28
  float v267; // [sp+388h] [bp-1B4h]@28
  int v268; // [sp+38Ch] [bp-1B0h]@28
  int v269; // [sp+390h] [bp-1ACh]@28
  int v270; // [sp+394h] [bp-1A8h]@7
  float v271; // [sp+398h] [bp-1A4h]@7
  int v272; // [sp+39Ch] [bp-1A0h]@7
  char v273; // [sp+3A0h] [bp-19Ch]@1
  int v274; // [sp+3A4h] [bp-198h]@7
  int v275; // [sp+3A8h] [bp-194h]@7
  int v276; // [sp+3ACh] [bp-190h]@7
  int v277; // [sp+3B0h] [bp-18Ch]@28
  int v278; // [sp+3B4h] [bp-188h]@28
  int v279; // [sp+3B8h] [bp-184h]@28
  int v280; // [sp+3BCh] [bp-180h]@7
  char v281; // [sp+3C0h] [bp-17Ch]@5
  char v282; // [sp+3D0h] [bp-16Ch]@5
  char v283; // [sp+3E0h] [bp-15Ch]@5
  char v284; // [sp+420h] [bp-11Ch]@5
  int v285; // [sp+424h] [bp-118h]@34
  int v286; // [sp+428h] [bp-114h]@34
  int v287; // [sp+42Ch] [bp-110h]@34
  int v288; // [sp+430h] [bp-10Ch]@34
  int v289; // [sp+434h] [bp-108h]@34
  int v290; // [sp+438h] [bp-104h]@34
  int v291; // [sp+43Ch] [bp-100h]@34
  int v292; // [sp+440h] [bp-FCh]@34
  int v293; // [sp+444h] [bp-F8h]@34
  int v294; // [sp+448h] [bp-F4h]@34
  int v295; // [sp+44Ch] [bp-F0h]@34
  int v296; // [sp+450h] [bp-ECh]@34
  int v297; // [sp+454h] [bp-E8h]@34
  int v298; // [sp+458h] [bp-E4h]@34
  int v299; // [sp+45Ch] [bp-E0h]@34
  int v300; // [sp+460h] [bp-DCh]@4
  int v301; // [sp+464h] [bp-D8h]@5
  int v302; // [sp+468h] [bp-D4h]@5
  int v303; // [sp+46Ch] [bp-D0h]@5
  int v304; // [sp+470h] [bp-CCh]@5
  int v305; // [sp+474h] [bp-C8h]@5
  int v306; // [sp+478h] [bp-C4h]@5
  int v307; // [sp+47Ch] [bp-C0h]@5
  int v308; // [sp+480h] [bp-BCh]@5
  int v309; // [sp+484h] [bp-B8h]@5
  int v310; // [sp+488h] [bp-B4h]@5
  int v311; // [sp+48Ch] [bp-B0h]@5
  int v312; // [sp+49Ch] [bp-A0h]@5
  int v313; // [sp+4A0h] [bp-9Ch]@2
  int v314; // [sp+4A4h] [bp-98h]@3
  int v315; // [sp+4A8h] [bp-94h]@3
  int v316; // [sp+4ACh] [bp-90h]@3
  int v317; // [sp+4B0h] [bp-8Ch]@3
  int v318; // [sp+4B4h] [bp-88h]@3
  int v319; // [sp+4B8h] [bp-84h]@3
  int v320; // [sp+4BCh] [bp-80h]@3
  int v321; // [sp+4C0h] [bp-7Ch]@3
  int v322; // [sp+4C4h] [bp-78h]@3
  int v323; // [sp+4C8h] [bp-74h]@3
  int v324; // [sp+4CCh] [bp-70h]@3
  int v325; // [sp+4DCh] [bp-60h]@3
  int v326; // [sp+4E0h] [bp-5Ch]@34
  int v327; // [sp+4E4h] [bp-58h]@34
  int v328; // [sp+4E8h] [bp-54h]@34
  int v329; // [sp+4ECh] [bp-50h]@34
  int v330; // [sp+4F0h] [bp-4Ch]@34
  int v331; // [sp+4F4h] [bp-48h]@34
  int v332; // [sp+4F8h] [bp-44h]@34
  int v333; // [sp+4FCh] [bp-40h]@34
  int v334; // [sp+500h] [bp-3Ch]@34
  int v335; // [sp+504h] [bp-38h]@34
  int v336; // [sp+508h] [bp-34h]@34
  int v337; // [sp+50Ch] [bp-30h]@34
  int v338; // [sp+510h] [bp-2Ch]@34
  int v339; // [sp+514h] [bp-28h]@34
  int v340; // [sp+518h] [bp-24h]@34
  int v341; // [sp+51Ch] [bp-20h]@34

  __asm { VMOV.I32        Q4, #0 }
  v5 = a1;
  _R4 = &v273;
  v7 = 0;
  do
  {
    _R2 = (char *)&v313 + v7 * 16;
    ++v7;
    __asm { VST1.32         {D8-D9}, [R2] }
  }
  while ( v7 != 4 );
  v9 = 0;
  _R0 = &v324;
  v313 = 1054025240;
  v314 = 1046066128;
  v315 = 1016994569;
  v316 = 0;
  v317 = 1052186457;
  v318 = 1060575065;
  v319 = 1039408929;
  v320 = 0;
  v321 = 1043911934;
  v322 = 1033100696;
  v323 = 1064522744;
  __asm { VST1.32         {D8-D9}, [R0] }
  v325 = 1065353216;
  do
  {
    _R0 = (char *)&v300 + v9 * 16;
    ++v9;
    __asm { VST1.32         {D8-D9}, [R0] }
  }
  while ( v9 != 4 );
  v12 = 0;
  v300 = 1060870344;
  v301 = -1087103199;
  v302 = 994352038;
  v303 = 0;
  v304 = 1054602376;
  v305 = 1071204270;
  v306 = 1012847241;
  v307 = 0;
  v308 = -1104786384;
  v309 = 1002955394;
  v310 = 1065074714;
  _R0 = &v311;
  __asm { VST1.32         {D8-D9}, [R0] }
  v312 = 1065353216;
  sub_1A978((int)&v284, (int)&v300, (int)&v313);
  sub_1AA5C((int)&v283, (int)&v284);
  __asm { VMOV.F32        Q8, #1.0 }
  _R2 = &v281;
  __asm { VST1.64         {D16-D17}, [R2@128] }
  sub_1A9BC((int)&v282, (int)&v284, (int)&v281);
  __asm { VLDR            S8, [R4,#0x38] }
  _R0 = v265;
  __asm
  {
    VLDR            S0, [R4,#0xA0]
    VLDR            S12, [R4,#0x30]
    VLDR            S5, [R4,#0xA4]
    VLDR            S6, [R4,#0x80]
    VMUL.F32        S7, S12, S5
    VMUL.F32        S2, S8, S0
    VMUL.F32        S4, S8, S6
    VLDR            S10, [R4,#0x34]
    VLDR            S3, [R4,#0xA8]
    VLDR            S14, [R4,#0x88]
    VMLS.F32        S7, S10, S0
    VMLS.F32        S2, S12, S3
    VMLS.F32        S4, S12, S14
    VLDR            S1, [R4,#0x84]
    VMUL.F32        S0, S10, S6
    VMUL.F32        S6, S8, S1
    VMUL.F32        S5, S8, S5
    VNEG.F32        S8, S7
    VNEG.F32        S7, S2
  }
  do
  {
    _R1 = &v265[v12];
    v12 += 16;
    __asm { VST1.64         {D8-D9}, [R1] }
  }
  while ( v12 != 64 );
  __asm { VNMLS.F32       S5, S10, S3 }
  _R2 = &v276;
  __asm { VNMLS.F32       S0, S12, S1 }
  v18 = 0;
  __asm
  {
    VNMLS.F32       S6, S10, S14
    VDIV.F32        S7, S7, S5
    VNEG.F32        S3, S5
    VDIV.F32        S5, S8, S5
    VDIV.F32        S3, S3, S2
    VST1.64         {D8-D9}, [R0]!
    VSTR            S7, [R0]
  }
  v270 = 1065353216;
  v271 = 0.0;
  v272 = 0;
  __asm { VSTR            S5, [R4] }
  v274 = 0;
  v275 = 1065353216;
  __asm { VST1.32         {D8-D9}, [R2] }
  v280 = 1065353216;
  do
  {
    _R2 = (char *)&v249 + v18 * 16;
    ++v18;
    __asm { VST1.64         {D8-D9}, [R2] }
  }
  while ( v18 != 4 );
  __asm { VDIV.F32        S8, S8, S2 }
  _R2 = &v254;
  v249 = 1065353216;
  __asm
  {
    VSTR            S3, [SP,#0x53C+var_1F8]
    VNEG.F32        S2, S4
    VNEG.F32        S4, S6
    VST1.32         {D8-D9}, [R2]
  }
  _R2 = &v251;
  _R0 = &v260;
  __asm
  {
    VST1.64         {D8-D9}, [R2]
    VSTR            S8, [SP,#0x53C+var_1D8]
  }
  v259 = 1065353216;
  __asm { VST1.32         {D8-D9}, [R0] }
  v264 = 1065353216;
  v23 = 0;
  do
  {
    _R2 = (char *)&v233 + v23 * 16;
    ++v23;
    __asm { VST1.64         {D8-D9}, [R2] }
  }
  while ( v23 != 4 );
  __asm { VDIV.F32        S4, S4, S0 }
  _R3 = &v244;
  v26 = 0;
  _R0 = &v240;
  v233 = 1065353216;
  v234 = 0;
  __asm
  {
    VDIV.F32        S0, S2, S0
    VSTR            S4, [SP,#0x53C+var_234]
  }
  v236 = 0;
  v237 = 0;
  v238 = 1065353216;
  __asm
  {
    VSTR            S0, [SP,#0x53C+var_224]
    VST1.32         {D8-D9}, [R3]
    VST1.32         {D8-D9}, [R0]
  }
  v248 = 1065353216;
  do
  {
    _R0 = (char *)&v219 + v26 * 16;
    ++v26;
    __asm { VST1.64         {D8-D9}, [R0] }
  }
  while ( v26 != 4 );
  _R6 = &v225;
  v30 = 0;
  _R1 = &v230;
  v219 = 1065353216;
  v220 = 1060320051;
  v221 = 1060320051;
  v222 = 0;
  v223 = 0;
  v224 = 1065353216;
  __asm { VST1.64         {D8-D9}, [R6] }
  v229 = 1065353216;
  __asm { VST1.32         {D8-D9}, [R1] }
  v232 = 1065353216;
  do
  {
    _R1 = (char *)&v205 + v30 * 16;
    ++v30;
    __asm { VST1.64         {D8-D9}, [R1] }
  }
  while ( v30 != 4 );
  v33 = 0;
  _R2 = &v216;
  v205 = 1065353216;
  v206 = 0;
  v207 = 0;
  v208 = 0;
  v209 = 1060320051;
  v210 = 1065353216;
  v211 = 1060320051;
  v212 = 0;
  v213 = 0;
  v214 = 0;
  v215 = 1065353216;
  __asm { VST1.32         {D8-D9}, [R2] }
  v218 = 1065353216;
  do
  {
    _R3 = &v191[v33];
    v33 += 4;
    __asm { VST1.64         {D8-D9}, [R3] }
  }
  while ( v33 != 16 );
  _R1 = (unsigned int)v191 | 4;
  v191[0] = 1065353216;
  __asm { VST1.32         {D8-D9}, [R1] }
  v37 = 0;
  v196 = 1065353216;
  v197 = 0;
  v198 = 0;
  v199 = 1060320051;
  v200 = 1060320051;
  _R0 = &v202;
  v201 = 1065353216;
  __asm { VST1.32         {D8-D9}, [R0] }
  v204 = 1065353216;
  do
  {
    _R2 = &v185[v37];
    v37 += 4;
    __asm { VST1.64         {D8-D9}, [R2] }
  }
  while ( v37 != 16 );
  _R2 = (unsigned int)v185 | 4;
  v185[0] = 1065353216;
  __asm { VST1.32         {D8-D9}, [R2] }
  _R2 = &v187;
  _R0 = &v189;
  v186 = 1065353216;
  __asm { VST1.64         {D8-D9}, [R2] }
  v188 = 1065353216;
  __asm { VST1.32         {D8-D9}, [R0] }
  v190 = 1065353216;
  v43 = 0;
  do
  {
    _R2 = &v169[v43];
    v43 += 4;
    __asm { VST1.64         {D8-D9}, [R2] }
  }
  while ( v43 != 16 );
  _R2 = (unsigned int)v169 | 4;
  v169[0] = 1065353216;
  __asm { VST1.32         {D8-D9}, [R2] }
  _R2 = (char *)v175;
  _R0 = &v180;
  v174 = 1065353216;
  __asm { VST1.64         {D8-D9}, [R2] }
  v179 = 1065353216;
  __asm { VST1.32         {D8-D9}, [R0] }
  _R0 = v153;
  v184 = 1065353216;
  v49 = 0;
  do
  {
    _R2 = &v153[v49];
    v49 += 16;
    __asm { VST1.64         {D8-D9}, [R2] }
  }
  while ( v49 != 64 );
  _R1 = &v165;
  __asm { VST1.64         {D8-D9}, [R1] }
  _R1 = &v161;
  __asm
  {
    VST1.64         {D8-D9}, [R1]
    VST1.64         {D8-D9}, [R0]!
    VST1.64         {D8-D9}, [R0]
  }
  v53 = *(_DWORD *)v5;
  if ( *(_DWORD *)v5 > 5u )
    goto LABEL_34;
  if ( (1 << v53) & 9 )
  {
    v174 = v270;
    v173 = v269;
    v172 = v268;
    v169[0] = *(_DWORD *)v265;
    v170 = v266;
    v171 = v267;
    v180 = v276;
    v179 = v275;
    v178 = v274;
    v175[0] = v271;
    v176 = v272;
    v177 = *(_DWORD *)&v273;
    v181 = v277;
    v182 = v278;
    v183 = v279;
    v184 = v280;
    if ( *(_DWORD *)(v5 + 4) == 1 )
    {
      v158 = v224;
      v157 = v223;
      v156 = v222;
      *(_DWORD *)v153 = v219;
      v154 = v220;
      v155 = v221;
      v164 = v230;
      v163 = v229;
      v162 = v228;
      v159 = *(_DWORD *)&v225;
      v160 = v226;
      v161 = v227;
      v54 = &v231;
      goto LABEL_33;
    }
  }
  else
  {
    if ( !((1 << v53) & 0x12) )
    {
      if ( !((1 << v53) & 0x24) )
        goto LABEL_34;
      v174 = v238;
      v173 = v237;
      v172 = v236;
      v169[0] = v233;
      v170 = v234;
      v171 = v235;
      v180 = v244;
      v179 = v243;
      v178 = v242;
      v175[0] = v239;
      v176 = v240;
      v177 = v241;
      v181 = v245;
      v182 = v246;
      v183 = v247;
      v184 = v248;
      if ( *(_DWORD *)(v5 + 4) != 1 )
        goto LABEL_34;
      v158 = v196;
      v157 = v195;
      v156 = v194;
      *(_DWORD *)v153 = v191[0];
      v154 = v192;
      v155 = v193;
      v164 = v202;
      v163 = v201;
      v162 = v200;
      v159 = v197;
      v160 = v198;
      v161 = v199;
      v54 = &v203;
      goto LABEL_33;
    }
    v174 = v254;
    v173 = v253;
    v172 = v252;
    v169[0] = v249;
    v170 = v250;
    v171 = v251;
    v180 = v260;
    v179 = v259;
    v178 = v258;
    v175[0] = v255;
    v176 = v256;
    v177 = v257;
    v181 = v261;
    v182 = v262;
    v183 = v263;
    v184 = v264;
    if ( *(_DWORD *)(v5 + 4) == 1 )
    {
      v158 = v210;
      v157 = v209;
      v156 = v208;
      *(_DWORD *)v153 = v205;
      v154 = v206;
      v155 = v207;
      v164 = v216;
      v163 = v215;
      v162 = v214;
      v159 = v211;
      v160 = v212;
      v161 = v213;
      v54 = &v217;
LABEL_33:
      v55 = *(_DWORD *)v54;
      v56 = *((_DWORD *)v54 + 1);
      v57 = *((_DWORD *)v54 + 2);
      v168 = *((_DWORD *)v54 + 3);
      v167 = v57;
      v166 = v56;
      v165 = v55;
      goto LABEL_34;
    }
  }
LABEL_34:
  sub_1A978((int)&v105, (int)v169, (int)&v284);
  v58 = &v86;
  sub_1A978((int)&v86, (int)v169, (int)&v284);
  v331 = v289;
  v330 = v288;
  v329 = v287;
  v326 = *(_DWORD *)&v284;
  v327 = v285;
  v328 = v286;
  v337 = v295;
  v336 = v294;
  v335 = v293;
  v332 = v290;
  v333 = v291;
  v334 = v292;
  v59 = &v326;
  v338 = v296;
  v339 = v297;
  v340 = v298;
  v341 = v299;
  v60 = 0;
  do
  {
    v61 = 4;
    _R3 = v58;
    _R1 = v59;
    do
    {
      __asm { VLDR            S0, [R3] }
      ++_R3;
      __asm { VLDR            S2, [R1] }
      --v61;
      __asm
      {
        VSUB.F32        S0, S2, S0
        VSTR            S0, [R1]
      }
      ++_R1;
    }
    while ( !_ZF );
    ++v60;
    v58 += 4;
    v59 += 4;
  }
  while ( v60 != 4 );
  v93 = v331;
  v92 = v330;
  v91 = v329;
  v88 = v326;
  v89 = v327;
  v90 = v328;
  v99 = v337;
  v98 = v336;
  v97 = v335;
  v64 = &v104;
  v94 = v332;
  v95 = v333;
  v96 = v334;
  v100 = v338;
  v101 = v339;
  v102 = v340;
  v103 = v341;
  sub_1A978((int)&v104, (int)v153, (int)&v88);
  v331 = v110;
  v330 = v109;
  v329 = v108;
  v326 = *(_DWORD *)&v105;
  v327 = v106;
  v328 = v107;
  v337 = v116;
  v336 = v115;
  v335 = v114;
  v332 = v111;
  v333 = v112;
  v334 = v113;
  v65 = &v326;
  v338 = v117;
  v339 = v118;
  v340 = v119;
  v341 = v120;
  v66 = v5 + 12;
  v67 = 0;
  do
  {
    v68 = 4;
    _R3 = v64;
    _R1 = v65;
    do
    {
      __asm { VLDR            S2, [R3] }
      _R3 += 4;
      __asm { VLDR            S0, [R1] }
      --v68;
      __asm
      {
        VADD.F32        S0, S2, S0
        VSTR            S0, [R1]
      }
      ++_R1;
    }
    while ( !_ZF );
    ++v67;
    v64 += 16;
    v65 += 4;
  }
  while ( v67 != 4 );
  v126 = v331;
  v125 = v330;
  v124 = v329;
  v121 = v326;
  v122 = v327;
  v123 = v328;
  v132 = v337;
  v131 = v336;
  v130 = v335;
  v127 = v332;
  v128 = v333;
  v129 = v334;
  v133 = v338;
  v134 = v339;
  v135 = v340;
  v136 = v341;
  sub_1A978((int)&v137, (int)&v283, (int)&v121);
  v71 = v141;
  v72 = v5 + 36;
  v73 = *(_DWORD *)&v137;
  v74 = v138;
  v75 = v139;
  v76 = v140;
  *(_DWORD *)(v66 + 20) = v142;
  *(_DWORD *)(v66 + 16) = v71;
  *(_DWORD *)(v66 + 12) = v76;
  *(_DWORD *)v66 = v73;
  *(_DWORD *)(v66 + 4) = v74;
  *(_DWORD *)(v66 + 8) = v75;
  v77 = v147;
  v78 = v143;
  v79 = v144;
  v80 = v145;
  v81 = v146;
  *(_DWORD *)(v66 + 44) = v148;
  *(_DWORD *)(v66 + 40) = v77;
  *(_DWORD *)(v66 + 36) = v81;
  v82 = v66 + 48;
  *(_DWORD *)v72 = v78;
  *(_DWORD *)(v72 + 4) = v79;
  *(_DWORD *)(v72 + 8) = v80;
  v83 = v150;
  v84 = v151;
  v85 = v152;
  *(_DWORD *)v82 = v149;
  *(_DWORD *)(v82 + 4) = v83;
  *(_DWORD *)(v82 + 8) = v84;
  *(_DWORD *)(v82 + 12) = v85;
  JUMPOUT(__CS__, v87);
}
// 2D0E0: using guessed type char var_1BC[12];
// 2D0E0: using guessed type int var_2FC[3];
// 2D0E0: using guessed type int var_33C[5];
// 2D0E0: using guessed type int var_37C[3];
// 2D0E0: using guessed type char var_3BC[12];

//----- (0002D82C) --------------------------------------------------------
int sub_2D82C()
{
  int v0; // r4@1

  pthread_mutex_lock((pthread_mutex_t *)&unk_45054);
  v0 = unk_45058;
  if ( !unk_45058 )
  {
    v0 = operator new(1u);
    unk_45058 = v0;
  }
  pthread_mutex_unlock((pthread_mutex_t *)&unk_45054);
  return v0;
}

//----- (0002D870) --------------------------------------------------------
pthread_mutex_t *__fastcall sub_2D870(pthread_mutex_t *mutex, int a2)
{
  pthread_mutex_t *v2; // r4@1
  pthread_mutexattr_t attr; // [sp+4h] [bp-14h]@2

  v2 = mutex;
  if ( a2 == 1 )
  {
    pthread_mutexattr_init(&attr);
    pthread_mutexattr_setpshared(&attr, 1);
    pthread_mutex_init(v2, &attr);
    pthread_mutexattr_destroy(&attr);
  }
  else
  {
    pthread_mutex_init(mutex, 0);
  }
  return v2;
}

//----- (0002D8AC) --------------------------------------------------------
pthread_mutex_t *__fastcall sub_2D8AC(pthread_mutex_t *a1)
{
  pthread_mutex_t *v1; // r4@1

  v1 = a1;
  pthread_mutex_destroy(a1);
  return v1;
}

//----- (0002D8B8) --------------------------------------------------------
int __fastcall sub_2D8B8(int a1, _DWORD *a2, int *a3, int a4)
{
  _DWORD *v4; // r7@1
  int v5; // r4@1
  int *v6; // r5@1
  int v7; // t1@2
  int result; // r0@7
  int v9; // [sp+0h] [bp-A8h]@1
  int v10; // [sp+4h] [bp-A4h]@1
  char v11; // [sp+8h] [bp-A0h]@1
  int v12; // [sp+8Ch] [bp-1Ch]@1

  v4 = a2;
  v5 = a4;
  v6 = a3;
  v12 = v0;
  v9 = 0;
  v10 = 60100;
  v11 = 0;
  sub_2D958((int)&v9, a4 + 1);
  sub_2D988((int)&v9, v4);
  for ( ; v5; --v5 )
  {
    v7 = *v6;
    ++v6;
    sub_2D9D8((int)&v9, v7);
  }
  if ( !v11 )
  {
    if ( (unsigned int)(v9 + 1) < 0x81 )
    {
      *((_BYTE *)&v9 + v9 + 9) = 10;
      ++v9;
    }
    else
    {
      v11 = 1;
    }
  }
  sub_2DA08((int)&v9);
  result = v0 - v12;
  if ( v0 != v12 )
    _stack_chk_fail(result);
  return result;
}
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (0002D958) --------------------------------------------------------
int __fastcall sub_2D958(int result, char a2)
{
  if ( !*(_BYTE *)(result + 8) )
  {
    if ( (unsigned int)(*(_DWORD *)result + 2) < 0x81 )
    {
      *(_BYTE *)(result + 9 + *(_DWORD *)result) = 3;
      *(_BYTE *)(*(_DWORD *)result + result + 9 + 1) = a2;
      *(_DWORD *)result += 2;
    }
    else
    {
      *(_BYTE *)(result + 8) = 1;
    }
  }
  return result;
}

//----- (0002D988) --------------------------------------------------------
int __fastcall sub_2D988(int a1, _DWORD *a2)
{
  int v2; // r4@1
  int result; // r0@1
  int v4; // r2@3
  int v5; // r6@5

  v2 = a1;
  result = *(_BYTE *)(a1 + 8);
  if ( !result )
  {
    if ( *a2 )
      v4 = *(_DWORD *)(*a2 - 12) - 1;
    else
      v4 = -1;
    v5 = v4 + 5;
    if ( (unsigned int)(*(_DWORD *)v2 + v4 + 5) < 0x81 )
    {
      *(_BYTE *)(v2 + 9 + *(_DWORD *)v2) = 2;
      *(_DWORD *)(*(_DWORD *)v2 + v2 + 9 + 1) = v4;
      _aeabi_memcpy(*(_DWORD *)v2 + v2 + 9 + 5, *a2);
      result = *(_DWORD *)v2 + v5;
      *(_DWORD *)v2 = result;
    }
    else
    {
      result = 1;
      *(_BYTE *)(v2 + 8) = 1;
    }
  }
  return result;
}
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);

//----- (0002D9D8) --------------------------------------------------------
int __fastcall sub_2D9D8(int result, int a2)
{
  if ( !*(_BYTE *)(result + 8) )
  {
    if ( (unsigned int)(*(_DWORD *)result + 5) < 0x81 )
    {
      *(_BYTE *)(result + 9 + *(_DWORD *)result) = 0;
      *(_DWORD *)(*(_DWORD *)result + result + 9 + 1) = a2;
      *(_DWORD *)result += 5;
    }
    else
    {
      *(_BYTE *)(result + 8) = 1;
    }
  }
  return result;
}

//----- (0002DA08) --------------------------------------------------------
int __fastcall sub_2DA08(int a1)
{
  int v1; // r4@1
  int *v2; // r0@4
  char *v3; // r0@4
  int result; // r0@5

  v1 = a1;
  if ( *(_BYTE *)(a1 + 8) )
  {
    _android_log_print(5, "SurfaceFlinger", "couldn't log to binary event log: overflow.");
  }
  else if ( _android_log_bwrite(*(_DWORD *)(a1 + 4), a1 + 9, *(_DWORD *)a1) <= -1 )
  {
    v2 = (int *)_errno();
    v3 = strerror(*v2);
    _android_log_print(6, "SurfaceFlinger", "couldn't log to EventLog: %s", v3);
  }
  result = 0;
  *(_DWORD *)v1 = 0;
  *(_BYTE *)(v1 + 8) = 0;
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10BF0: using guessed type int _errno(void);
// 113A0: using guessed type int __fastcall _android_log_bwrite(_DWORD, _DWORD, _DWORD);

//----- (0002DA70) --------------------------------------------------------
int __fastcall sub_2DA70(_DWORD *a1, int *a2, int a3)
{
  int v3; // r4@1
  int *v4; // r5@1
  _DWORD *v5; // r6@1
  int v6; // r0@1

  v3 = a3;
  v4 = a2;
  v5 = a1;
  v6 = sub_2D82C();
  return sub_2D8B8(v6, v5, v4, v3);
}

//----- (0002DA8C) --------------------------------------------------------
int __fastcall sub_2DA8C(int a1)
{
  int v1; // r4@1
  signed int v6; // r0@1
  signed int v11; // r0@3

  v1 = a1;
  sub_2F4F0(a1 + 8);
  __asm { VMOV.I32        Q8, #0 }
  v6 = 112;
  do
  {
    _R1 = v1 + v6;
    v6 += 16;
    __asm { VST1.32         {D16-D17}, [R1] }
  }
  while ( v6 != 176 );
  _R1 = v1 + 116;
  *(_DWORD *)(v1 + 112) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  _R1 = v1 + 136;
  *(_DWORD *)(v1 + 132) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  _R1 = v1 + 156;
  *(_DWORD *)(v1 + 152) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  *(_DWORD *)(v1 + 172) = 1065353216;
  v11 = 180;
  do
  {
    _R1 = v1 + v11;
    v11 += 16;
    __asm { VST1.32         {D16-D17}, [R1] }
  }
  while ( v11 != 244 );
  _R1 = v1 + 184;
  *(_DWORD *)(v1 + 180) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  _R1 = v1 + 204;
  *(_DWORD *)(v1 + 200) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  _R1 = v1 + 224;
  *(_DWORD *)(v1 + 220) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  *(_DWORD *)(v1 + 240) = 1065353216;
  *(_BYTE *)(v1 + 244) = 1;
  *(_DWORD *)v1 = 1065353216;
  *(_BYTE *)(v1 + 4) = 0;
  *(_BYTE *)(v1 + 5) = 1;
  *(_BYTE *)(v1 + 92) = 0;
  *(_BYTE *)(v1 + 176) = 0;
  _R0 = v1 + 96;
  __asm { VST1.32         {D16-D17}, [R0] }
  return v1;
}

//----- (0002DB30) --------------------------------------------------------
int __fastcall sub_2DB30(int a1)
{
  int v1; // r4@1

  v1 = a1;
  android::Nsd::postDraw((android::Nsd *)(a1 + 8));
  return v1;
}

//----- (0002DB40) --------------------------------------------------------
int __fastcall sub_2DB40(int result, int _R1)
{
  __asm
  {
    VMOV            S0, R1
    VLDR            S2, [R0]
    VCMPE.F32       S2, S0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
  {
    *(_BYTE *)(result + 244) = 1;
    __asm { VSTR            S0, [R0] }
  }
  return result;
}

//----- (0002DB64) --------------------------------------------------------
int __fastcall sub_2DB64(int result, int a2)
{
  if ( a2 != *(_BYTE *)(result + 4) )
    *(_BYTE *)(result + 4) = a2;
  return result;
}

//----- (0002DB70) --------------------------------------------------------
int __fastcall sub_2DB70(int result, int a2)
{
  if ( a2 != *(_BYTE *)(result + 5) )
    *(_BYTE *)(result + 5) = a2;
  return result;
}

//----- (0002DB7C) --------------------------------------------------------
signed int __fastcall sub_2DB7C(int a1, int a2)
{
  int v2; // r4@1
  signed int result; // r0@1

  v2 = a1;
  _aeabi_memcpy(a1 + 8, a2);
  result = 1;
  *(_BYTE *)(v2 + 92) = 1;
  *(_BYTE *)(v2 + 244) = 1;
  return result;
}
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);

//----- (0002DB98) --------------------------------------------------------
int __fastcall sub_2DB98(int result)
{
  *(_BYTE *)(result + 92) = 0;
  return result;
}

//----- (0002DBA0) --------------------------------------------------------
int __fastcall sub_2DBA0(int result, int a2, int a3, int a4, int a5)
{
  int v9; // r12@1

  __asm { VLDR            S0, [SP,#arg_0] }
  v9 = result + 96;
  __asm { VSTR            S0, [R0,#0x6C] }
  *(_DWORD *)v9 = a2;
  *(_DWORD *)(v9 + 4) = a3;
  *(_DWORD *)(v9 + 8) = a4;
  *(_BYTE *)(result + 244) = 1;
  return result;
}

//----- (0002DBB8) --------------------------------------------------------
int __fastcall sub_2DBB8(int result, int a2)
{
  int v2; // r3@1
  int v3; // r12@1
  int v4; // lr@1
  int v5; // r4@1
  int v6; // r5@1
  int v7; // r3@1
  int v8; // r12@1
  int v9; // lr@1
  int v10; // r5@1
  int v11; // r4@1
  int v12; // r4@1
  int v13; // r2@1
  int v14; // r3@1
  int v15; // r5@1

  v2 = *(_DWORD *)(a2 + 16);
  v3 = *(_DWORD *)a2;
  v4 = *(_DWORD *)(a2 + 4);
  v5 = *(_DWORD *)(a2 + 8);
  v6 = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(result + 132) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(result + 128) = v2;
  *(_DWORD *)(result + 124) = v6;
  *(_DWORD *)(result + 120) = v5;
  *(_DWORD *)(result + 116) = v4;
  *(_DWORD *)(result + 112) = v3;
  v7 = *(_DWORD *)(a2 + 40);
  v8 = *(_DWORD *)(a2 + 24);
  v9 = *(_DWORD *)(a2 + 28);
  v10 = *(_DWORD *)(a2 + 32);
  v11 = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(result + 156) = *(_DWORD *)(a2 + 44);
  *(_DWORD *)(result + 152) = v7;
  *(_DWORD *)(result + 148) = v11;
  v12 = result + 160;
  *(_DWORD *)(result + 144) = v10;
  *(_DWORD *)(result + 140) = v9;
  *(_DWORD *)(result + 136) = v8;
  v13 = *(_DWORD *)(a2 + 48);
  v14 = *(_DWORD *)(a2 + 52);
  v15 = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(result + 172) = *(_DWORD *)(a2 + 60);
  *(_DWORD *)v12 = v13;
  *(_DWORD *)(v12 + 4) = v14;
  *(_DWORD *)(v12 + 8) = v15;
  *(_BYTE *)(result + 244) = 1;
  return result;
}

//----- (0002DC24) --------------------------------------------------------
int __fastcall sub_2DC24(int result, int a2)
{
  int v6; // r2@1
  int *v7; // lr@1
  int v12; // r3@3
  int v13; // r12@3
  int v14; // r4@3
  int v15; // r5@3
  int v16; // r6@3
  int v17; // r3@3
  int v18; // r12@3
  int v19; // r5@3
  int v20; // r4@3
  int v21; // r6@3
  int v22; // r4@3
  unsigned int v23; // r12@3
  int v24; // r2@3
  int v25; // r3@3
  int v26; // r6@3
  unsigned int v27; // r3@4
  char v30; // r1@6
  int v31[5]; // [sp+0h] [bp-50h]@1
  int v32; // [sp+14h] [bp-3Ch]@3
  int v33; // [sp+18h] [bp-38h]@3
  int v34; // [sp+28h] [bp-28h]@3
  int v35; // [sp+2Ch] [bp-24h]@3
  int v36; // [sp+3Ch] [bp-14h]@3

  __asm { VMOV.I32        Q8, #0 }
  v6 = 0;
  v7 = v31;
  do
  {
    _R3 = &v31[v6];
    v6 += 4;
    __asm { VST1.64         {D16-D17}, [R3] }
  }
  while ( v6 != 16 );
  _R3 = (unsigned int)v31 | 4;
  v31[0] = 1065353216;
  __asm { VST1.32         {D16-D17}, [R3] }
  _R3 = &v33;
  v32 = 1065353216;
  __asm { VST1.64         {D16-D17}, [R3] }
  _R3 = &v35;
  v34 = 1065353216;
  __asm { VST1.32         {D16-D17}, [R3] }
  v36 = 1065353216;
  v12 = *(_DWORD *)(a2 + 16);
  v13 = *(_DWORD *)a2;
  v14 = *(_DWORD *)(a2 + 4);
  v15 = *(_DWORD *)(a2 + 8);
  v16 = *(_DWORD *)(a2 + 12);
  *(_DWORD *)(result + 200) = *(_DWORD *)(a2 + 20);
  *(_DWORD *)(result + 196) = v12;
  *(_DWORD *)(result + 192) = v16;
  *(_DWORD *)(result + 188) = v15;
  *(_DWORD *)(result + 184) = v14;
  *(_DWORD *)(result + 180) = v13;
  v17 = *(_DWORD *)(a2 + 40);
  v18 = *(_DWORD *)(a2 + 24);
  v19 = *(_DWORD *)(a2 + 28);
  v20 = *(_DWORD *)(a2 + 32);
  v21 = *(_DWORD *)(a2 + 36);
  *(_DWORD *)(result + 224) = *(_DWORD *)(a2 + 44);
  *(_DWORD *)(result + 220) = v17;
  *(_DWORD *)(result + 216) = v21;
  *(_DWORD *)(result + 212) = v20;
  v22 = result + 228;
  *(_DWORD *)(result + 208) = v19;
  *(_DWORD *)(result + 204) = v18;
  v23 = 0;
  v24 = *(_DWORD *)(a2 + 48);
  v25 = *(_DWORD *)(a2 + 52);
  v26 = *(_DWORD *)(a2 + 56);
  *(_DWORD *)(result + 240) = *(_DWORD *)(a2 + 60);
  *(_DWORD *)v22 = v24;
  *(_DWORD *)(v22 + 4) = v25;
  *(_DWORD *)(v22 + 8) = v26;
  do
  {
    v27 = 0;
    _R2 = a2;
    _R4 = v7;
    do
    {
      __asm
      {
        VLDR            S0, [R4]
        VLDR            S2, [R2]
        VCMPE.F32       S2, S0
        VMRS            APSR_nzcv, FPSCR
      }
      if ( !_ZF )
      {
        v30 = 1;
        goto LABEL_10;
      }
      ++v27;
      _R2 += 4;
      ++_R4;
    }
    while ( v27 <= 3 );
    ++v23;
    a2 += 16;
    v7 += 4;
  }
  while ( v23 < 4 );
  v30 = 0;
LABEL_10:
  *(_BYTE *)(result + 176) = v30;
  return result;
}
// 2DC24: using guessed type int var_50[5];

//----- (0002DD08) --------------------------------------------------------
int __fastcall sub_2DD08(int a1)
{
  return a1 + 180;
}

//----- (0002DD0C) --------------------------------------------------------
int __fastcall sub_2DD0C(int a1, int a2, unsigned int a3, int a4, unsigned int a5)
{
  int v5; // r5@1
  int v7; // r7@2
  signed int v8; // r1@2
  signed __int64 v9; // r0@6
  _DWORD *v10; // r0@11
  _DWORD *v15; // r0@12

  v5 = a1;
  *(_DWORD *)(a1 + 4) = a3;
  _R6 = a1 + 4;
  *(_DWORD *)(_R6 + 16) = a2;
  *(_DWORD *)(_R6 + 4) = a4;
  *(_DWORD *)(_R6 + 8) = a5;
  if ( a3 )
  {
    v7 = a5 + a4;
    v8 = 1;
    if ( a5 + a4 >= a5 )
      v8 = 0;
    if ( v8 || v7 * a3 / a3 != v7 )
    {
      _android_log_print(6, "SurfaceFlinger", "Overflow in Mesh(..., %zu, %zu, %zu)", a3, a4, a5);
      v10 = (_DWORD *)operator new[](4u);
      __asm { VMOV.I32        Q8, #0 }
      *(_DWORD *)v5 = v10;
      *v10 = 0;
      __asm { VST1.32         {D16-D17}, [R6] }
    }
    else
    {
      v9 = 4LL * v7 * a3;
      if ( !is_mul_ok(4u, v7 * a3) )
        HIDWORD(v9) = 1;
      if ( HIDWORD(v9) )
        LODWORD(v9) = -1;
      *(_DWORD *)v5 = operator new[](v9);
      *(_DWORD *)(v5 + 16) = v7;
    }
  }
  else
  {
    v15 = (_DWORD *)operator new[](4u);
    *(_DWORD *)v5 = v15;
    *v15 = 0;
    *(_DWORD *)(v5 + 16) = 0;
  }
  return v5;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002DDB0) --------------------------------------------------------
void **__fastcall sub_2DDB0(void **a1)
{
  void **v1; // r4@1
  void *v2; // r0@1

  v1 = a1;
  v2 = *a1;
  if ( v2 )
    operator delete[](v2);
  return v1;
}

//----- (0002DDC0) --------------------------------------------------------
int __fastcall sub_2DDC0(int a1)
{
  return *(_DWORD *)(a1 + 20);
}

//----- (0002DDC4) --------------------------------------------------------
int __fastcall sub_2DDC4(int a1)
{
  return *(_DWORD *)a1;
}

//----- (0002DDC8) --------------------------------------------------------
int __fastcall sub_2DDC8(int a1)
{
  return *(_DWORD *)a1 + 4 * *(_DWORD *)(a1 + 8);
}

//----- (0002DDD4) --------------------------------------------------------
int __fastcall sub_2DDD4(int a1)
{
  return *(_DWORD *)(a1 + 4);
}

//----- (0002DDD8) --------------------------------------------------------
int __fastcall sub_2DDD8(int a1)
{
  return *(_DWORD *)(a1 + 8);
}

//----- (0002DDDC) --------------------------------------------------------
int __fastcall sub_2DDDC(int a1)
{
  return *(_DWORD *)(a1 + 12);
}

//----- (0002DDE0) --------------------------------------------------------
int __fastcall sub_2DDE0(int a1)
{
  return 4 * *(_DWORD *)(a1 + 16);
}

//----- (0002DDE8) --------------------------------------------------------
int __fastcall sub_2DDE8(int a1, int a2, int a3, int a4)
{
  int v4; // r4@1
  int v5; // r5@1
  int v6; // r0@1
  int v7; // r8@1
  int v8; // r10@1
  int v9; // r5@1
  int v10; // r1@2
  char *v11; // r9@4
  int *v13; // [sp+0h] [bp-20h]@4
  int v14; // [sp+4h] [bp-1Ch]@3
  int v15; // [sp+8h] [bp-18h]@1
  int v16; // [sp+Ch] [bp-14h]@1

  v4 = a1;
  v5 = a4;
  v6 = v0;
  v16 = v0;
  *(_BYTE *)v4 = 0;
  v7 = sub_2DFCC(v6, a3, 35633);
  v8 = sub_2DFCC(v7, v5, 35632);
  v9 = glCreateProgram();
  ((void (*)(void))glAttachShader)();
  glAttachShader(v9, v8);
  glBindAttribLocation(v9, 0, "position");
  glBindAttribLocation(v9, 1, "texCoords");
  glLinkProgram(v9);
  glGetProgramiv(v9, 35714, &v15);
  if ( v15 == 1 )
  {
    v10 = v4 + 4;
    *(_DWORD *)v10 = v9;
    *(_DWORD *)(v10 + 4) = v7;
    *(_DWORD *)(v10 + 8) = v8;
    *(_BYTE *)v4 = 1;
    *(_DWORD *)(v4 + 20) = glGetUniformLocation(v9, "colorMatrix");
    *(_DWORD *)(v4 + 16) = glGetUniformLocation(v9, "projection");
    *(_DWORD *)(v4 + 24) = glGetUniformLocation(v9, "texture");
    *(_DWORD *)(v4 + 28) = glGetUniformLocation(v9, "sampler");
    *(_DWORD *)(v4 + 36) = glGetUniformLocation(v9, "color");
    *(_DWORD *)(v4 + 32) = glGetUniformLocation(v9, "alphaPlane");
    glUseProgram(v9);
    glUniformMatrix4fv(*(_DWORD *)(v4 + 16), 1, 0, &unk_3D39C);
    glEnableVertexAttribArray(0);
  }
  else
  {
    _android_log_print(6, "SurfaceFlinger", "Error while linking shaders:");
    v14 = 0;
    glGetProgramiv(v9, 35716, &v14);
    if ( v14 >= 2 )
    {
      v13 = (int *)&v13;
      v11 = (char *)&v13 - ((v14 + 7) & 0xFFFFFFF8);
      glGetProgramInfoLog(v9, v14, 0, (char *)&v13 - ((v14 + 7) & 0xFFFFFFF8));
      _android_log_print(6, "SurfaceFlinger", "%s", v11, v13);
    }
    glDetachShader(v9, v7);
    glDetachShader(v9, v8);
    glDeleteShader(v7);
    glDeleteShader(v8);
    glDeleteProgram(v9);
  }
  if ( v0 != v16 )
    _stack_chk_fail(v0 - v16);
  return v4;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 113C4: using guessed type int glCreateProgram(void);
// 113D0: using guessed type int __fastcall glAttachShader(_DWORD, _DWORD);
// 113DC: using guessed type int __fastcall glBindAttribLocation(_DWORD, _DWORD, _DWORD);
// 113E8: using guessed type int __fastcall glLinkProgram(_DWORD);
// 113F4: using guessed type int __fastcall glGetProgramiv(_DWORD, _DWORD, _DWORD);
// 11400: using guessed type int __fastcall glGetUniformLocation(_DWORD, _DWORD);
// 1140C: using guessed type int __fastcall glUseProgram(_DWORD);
// 11418: using guessed type int __fastcall glUniformMatrix4fv(_DWORD, _DWORD, _DWORD, _DWORD);
// 11424: using guessed type int __fastcall glEnableVertexAttribArray(_DWORD);
// 11430: using guessed type int __fastcall glGetProgramInfoLog(_DWORD, _DWORD, _DWORD, _DWORD);
// 1143C: using guessed type int __fastcall glDetachShader(_DWORD, _DWORD);
// 11448: using guessed type int __fastcall glDeleteShader(_DWORD);
// 11454: using guessed type int __fastcall glDeleteProgram(_DWORD);

//----- (0002DFCC) --------------------------------------------------------
int __fastcall sub_2DFCC(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r5@2
  int v6; // [sp+4h] [bp-224h]@1
  int v7; // [sp+8h] [bp-220h]@1
  char v8; // [sp+Ch] [bp-21Ch]@3
  int v9; // [sp+20Ch] [bp-1Ch]@1

  v9 = v0;
  v7 = a2;
  v3 = glCreateShader(a3);
  glShaderSource();
  glCompileShader(v3);
  glGetShaderiv(v3, 35713, &v6);
  if ( v6 == 1 )
  {
    v4 = v3;
  }
  else
  {
    v4 = 0;
    glGetShaderInfoLog(v3, 512, 0, &v8);
    _android_log_print(6, "SurfaceFlinger", "Error while compiling shader: \n%s\n%s", v7, &v8);
    glDeleteShader(v3);
  }
  if ( v0 != v9 )
    _stack_chk_fail(v0 - v9);
  return v4;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);
// 11448: using guessed type int __fastcall glDeleteShader(_DWORD);
// 11460: using guessed type int __fastcall glCreateShader(_DWORD);
// 1146C: using guessed type int glShaderSource(void);
// 11478: using guessed type int __fastcall glCompileShader(_DWORD);
// 11484: using guessed type int __fastcall glGetShaderiv(_DWORD, _DWORD, _DWORD);
// 11490: using guessed type int __fastcall glGetShaderInfoLog(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002E074) --------------------------------------------------------
int __fastcall sub_2E074(int a1)
{
  return *(_BYTE *)a1;
}

//----- (0002E078) --------------------------------------------------------
int __fastcall sub_2E078(int a1)
{
  return j_j_glUseProgram(*(_DWORD *)(a1 + 4));
}

//----- (0002E080) --------------------------------------------------------
int __fastcall sub_2E080(int a1, int *a2)
{
  int v2; // r5@1
  int *v3; // r4@1
  int v4; // r6@2
  int v5; // r0@2
  int v6; // r1@4
  int v7; // r0@7

  v2 = a1;
  v3 = a2;
  if ( *(_DWORD *)(a1 + 28) >= 0 )
  {
    glUniform1i();
    v4 = *(_DWORD *)(v2 + 24);
    v5 = sub_2F630((int)(v3 + 2));
    glUniformMatrix4fv(v4, 1, 0, v5);
  }
  if ( *(_DWORD *)(v2 + 32) >= 0 )
  {
    v6 = *v3;
    glUniform1f();
  }
  if ( *(_DWORD *)(v2 + 36) >= 0 )
    glUniform4fv();
  v7 = *(_DWORD *)(v2 + 20);
  if ( v7 >= 0 )
    glUniformMatrix4fv(v7, 1, 0, v3 + 45);
  return j_j_glUniformMatrix4fv(*(_DWORD *)(v2 + 16), 1, 0, (int)(v3 + 28));
}
// 11418: using guessed type int __fastcall glUniformMatrix4fv(_DWORD, _DWORD, _DWORD, _DWORD);
// 1149C: using guessed type int glUniform1i(void);
// 114A8: using guessed type int glUniform1f(void);
// 114B4: using guessed type int glUniform4fv(void);

//----- (0002E0E8) --------------------------------------------------------
int sub_2E0E8()
{
  int v0; // r4@1

  pthread_mutex_lock((pthread_mutex_t *)&unk_4505C);
  v0 = unk_45060;
  if ( !unk_45060 )
  {
    v0 = operator new(0x18u);
    android::SortedVectorImpl::SortedVectorImpl((android::SortedVectorImpl *)v0, 8u, 7u);
    *(_DWORD *)v0 = &unk_3FE10;
    *(_DWORD *)(v0 + 20) = 0;
    sub_2E150(v0);
    unk_45060 = v0;
  }
  pthread_mutex_unlock((pthread_mutex_t *)&unk_4505C);
  return v0;
}

//----- (0002E150) --------------------------------------------------------
int __fastcall sub_2E150(int a1)
{
  int v1; // r7@1
  int v2; // r4@1
  int v3; // r9@1
  unsigned int v4; // r1@1
  int v5; // r0@4
  _DWORD *v6; // r1@4
  int v7; // r0@7
  __int64 v8; // r0@9
  unsigned int v15; // [sp+8h] [bp-38h]@1
  int v16; // [sp+Ch] [bp-34h]@1
  int v17; // [sp+10h] [bp-30h]@2
  int v18; // [sp+14h] [bp-2Ch]@4
  int v19; // [sp+18h] [bp-28h]@7

  v1 = a1;
  v2 = 0;
  v3 = 0;
  v16 = systemTime(1);
  v15 = v4;
  do
  {
    v17 = v3;
    if ( (v3 & 0x18u) <= 0x10 && (1 << (v3 & 0x18)) & 0x10101 )
    {
      v18 = v3;
      v5 = android::SortedVectorImpl::indexOf((android::SortedVectorImpl *)v1, &v18);
      v6 = (_DWORD *)(v1 + 20);
      if ( v5 >= 0 )
        v6 = (_DWORD *)(*(_DWORD *)(v1 + 4) + 8 * v5 + 4);
      if ( !*v6 )
      {
        v7 = sub_2E224(&v17);
        v18 = v17;
        v19 = v7;
        android::SortedVectorImpl::add((android::SortedVectorImpl *)v1, &v18);
        ++v2;
      }
    }
    ++v3;
  }
  while ( v3 != 32 );
  LODWORD(v8) = systemTime(1);
  _R0 = j___floatdisf(v8 - __PAIR__(v15, v16));
  __asm
  {
    VMOV            S2, R0
    VLDR            S0, =1000000.0
    VDIV.F32        S0, S2, S0
    VCVT.F64.F32    D16, S0
    VSTR            D16, [SP,#0x40+var_40]
  }
  return _android_log_print(3, "SurfaceFlinger", "shader cache generated - %u shaders in %f ms\n", v2);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (0002E224) --------------------------------------------------------
int __fastcall sub_2E224(int *a1)
{
  int *v1; // r5@1
  int v2; // r7@1
  int v4; // [sp+0h] [bp-20h]@1
  int v5; // [sp+4h] [bp-1Ch]@1

  v1 = a1;
  sub_2E2D8((android::String8 *)&v5, a1);
  sub_2E404((android::String8 *)&v4, v1);
  v2 = operator new(0x28u);
  sub_2DDE8(v2, (int)v1, v5, v4);
  android::String8::~String8((android::String8 *)&v4);
  android::String8::~String8((android::String8 *)&v5);
  return v2;
}

//----- (0002E268) --------------------------------------------------------
int __fastcall sub_2E268(int *a1, int a2)
{
  int *v3; // r4@1
  signed int v4; // r1@1
  int v5; // r0@4
  int result; // r0@8

  _R5 = a2;
  v3 = a1;
  v4 = 0;
  *a1 = 0;
  if ( *(_BYTE *)(_R5 + 92) )
  {
    if ( sub_2DDD4(_R5 + 8) == 36197 )
    {
      v4 = 8;
    }
    else
    {
      v5 = sub_2DDD4(_R5 + 8);
      v4 = 0;
      if ( v5 == 3553 )
        v4 = 16;
    }
  }
  __asm
  {
    VMOV.F32        S0, #1.0
    VLDR            S2, [R5]
    VCMPE.F32       S2, S0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _NF )
    v4 |= 4u;
  result = *(_BYTE *)(_R5 + 4) | v4;
  if ( *(_BYTE *)(_R5 + 5) )
    result |= 2u;
  if ( *(_BYTE *)(_R5 + 176) )
    result |= 0x20u;
  *v3 = result;
  return result;
}

//----- (0002E2D8) --------------------------------------------------------
int __fastcall sub_2E2D8(android::String8 *a1, _BYTE *a2)
{
  android::String8 *v2; // r4@1
  _BYTE *v3; // r5@1
  android::String8 *v4; // r0@2
  android::String8 *v5; // r0@3
  android::String8 *v6; // r0@3
  android::String8 *v7; // r0@3
  android::String8 *v8; // r0@3
  int v10; // [sp+0h] [bp-18h]@1
  int v11; // [sp+4h] [bp-14h]@1

  v2 = a1;
  v3 = a2;
  android::String8::String8((android::String8 *)&v10);
  v11 = 0;
  if ( *v3 & 0x18 )
  {
    v4 = sub_2E3B0((android::String8 *)&v10, "attribute vec4 texCoords;");
    sub_2E3B0(v4, "varying vec2 outTexCoords;");
  }
  v5 = sub_2E3B0((android::String8 *)&v10, "attribute vec4 position;");
  v6 = sub_2E3B0(v5, "uniform mat4 projection;");
  v7 = sub_2E3B0(v6, "uniform mat4 texture;");
  v8 = sub_2E3B0(v7, "void main(void) {");
  ++*((_DWORD *)v8 + 1);
  sub_2E3B0(v8, "gl_Position = projection * position;");
  if ( *v3 & 0x18 )
    sub_2E3B0((android::String8 *)&v10, "outTexCoords = (texture * texCoords).st;");
  --v11;
  sub_2E3B0((android::String8 *)&v10, "}");
  android::String8::String8(v2, (const android::String8 *)&v10);
  return android::String8::~String8((android::String8 *)&v10);
}

//----- (0002E3B0) --------------------------------------------------------
android::String8 *__fastcall sub_2E3B0(android::String8 *this, char *a2)
{
  android::String8 *v2; // r4@1
  char *v3; // r5@1
  int v4; // r7@2

  v2 = this;
  v3 = a2;
  if ( *((_DWORD *)this + 1) >= 1 )
  {
    v4 = 0;
    do
    {
      android::String8::append(v2, "    ");
      ++v4;
    }
    while ( v4 < *((_DWORD *)v2 + 1) );
  }
  android::String8::append(v2, v3);
  android::String8::append(v2, "\n");
  return v2;
}

//----- (0002E404) --------------------------------------------------------
int __fastcall sub_2E404(android::String8 *a1, int *a2)
{
  android::String8 *v2; // r4@1
  int *v3; // r5@1
  int v4; // r0@3
  signed int v5; // r0@5
  int (__fastcall **v6)(_DWORD, _DWORD, _DWORD, _DWORD); // r6@5
  char *v7; // r1@6
  android::String8 *v8; // r0@6
  int v9; // r0@11
  android::String8 *v10; // r0@15
  signed int v11; // r0@16
  char *v12; // r1@16
  int v13; // r0@18
  signed int v14; // r0@22
  int (__fastcall **v15)(_DWORD, _DWORD, _DWORD, _DWORD); // r1@22
  int v17; // [sp+0h] [bp-20h]@1
  int v18; // [sp+4h] [bp-1Ch]@1

  v2 = a1;
  v3 = a2;
  android::String8::String8((android::String8 *)&v17);
  v18 = 0;
  if ( (*v3 & 0x18) == 8 )
    sub_2E3B0((android::String8 *)&v17, "#extension GL_OES_EGL_image_external : require");
  sub_2E3B0((android::String8 *)&v17, "precision mediump float;");
  v4 = *v3 & 0x18;
  if ( v4 )
  {
    if ( v4 == 16 )
    {
      v5 = -8943;
      v6 = &GLOBAL_OFFSET_TABLE_;
    }
    else
    {
      if ( v4 != 8 )
        goto LABEL_11;
      v5 = -8952;
      v6 = &GLOBAL_OFFSET_TABLE_;
    }
    v8 = sub_2E3B0((android::String8 *)&v17, (char *)&v6[v5]);
    v7 = (char *)v6 + 0xFFFF7313;
  }
  else
  {
    v7 = "uniform vec4 color;";
    v8 = (android::String8 *)&v17;
  }
  sub_2E3B0(v8, v7);
LABEL_11:
  v9 = *v3;
  if ( *v3 & 4 )
  {
    sub_2E3B0((android::String8 *)&v17, "uniform float alphaPlane;");
    v9 = *v3;
  }
  if ( v9 & 0x20 )
    sub_2E3B0((android::String8 *)&v17, "uniform mat4 colorMatrix;");
  v10 = sub_2E3B0((android::String8 *)&v17, "void main(void) {");
  ++*((_DWORD *)v10 + 1);
  if ( *(_BYTE *)v3 & 0x18 )
  {
    v11 = -35673;
    v12 = (char *)&GLOBAL_OFFSET_TABLE_;
  }
  else
  {
    v11 = -35624;
    v12 = (char *)&GLOBAL_OFFSET_TABLE_;
  }
  sub_2E3B0((android::String8 *)&v17, &v12[v11]);
  v13 = *v3;
  if ( *v3 & 2 )
  {
    sub_2E3B0((android::String8 *)&v17, "gl_FragColor.a = 1.0;");
    v13 = *v3;
  }
  if ( v13 & 4 )
  {
    if ( v13 & 1 )
    {
      v14 = -8895;
      v15 = &GLOBAL_OFFSET_TABLE_;
    }
    else
    {
      v14 = -8888;
      v15 = &GLOBAL_OFFSET_TABLE_;
    }
    sub_2E3B0((android::String8 *)&v17, (char *)&v15[v14]);
  }
  if ( *v3 & 0x20 )
  {
    if ( (*v3 & 3) == 1 )
      sub_2E3B0((android::String8 *)&v17, "gl_FragColor.rgb = gl_FragColor.rgb/gl_FragColor.a;");
    sub_2E3B0((android::String8 *)&v17, "vec4 transformed = colorMatrix * vec4(gl_FragColor.rgb, 1);");
    sub_2E3B0((android::String8 *)&v17, "gl_FragColor.rgb = transformed.rgb/transformed.a;");
    if ( (*v3 & 3) == 1 )
      sub_2E3B0((android::String8 *)&v17, "gl_FragColor.rgb = gl_FragColor.rgb*gl_FragColor.a;");
  }
  --v18;
  sub_2E3B0((android::String8 *)&v17, "}");
  android::String8::String8(v2, (const android::String8 *)&v17);
  return android::String8::~String8((android::String8 *)&v17);
}
// 44784: using guessed type int (__fastcall *GLOBAL_OFFSET_TABLE_)(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002E61C) --------------------------------------------------------
int __fastcall sub_2E61C(int a1, int a2)
{
  int *v2; // r4@1
  int v3; // r5@1
  int v4; // r0@1
  int *v5; // r0@2
  int v6; // r6@4
  int result; // r0@6
  int v8; // [sp+4h] [bp-1Ch]@1
  int v9; // [sp+8h] [bp-18h]@1
  int v10; // [sp+Ch] [bp-14h]@5

  v2 = (int *)a2;
  v3 = a1;
  sub_2E268(&v8, a2);
  v9 = v8;
  v4 = android::SortedVectorImpl::indexOf((android::SortedVectorImpl *)v3, &v9);
  if ( v4 < 0 )
    v5 = (int *)(v3 + 20);
  else
    v5 = (int *)(*(_DWORD *)(v3 + 4) + 8 * v4 + 4);
  v6 = *v5;
  if ( !*v5 )
  {
    systemTime(1);
    v6 = sub_2E224(&v8);
    v9 = v8;
    v10 = v6;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)v3, &v9);
    systemTime(1);
  }
  result = sub_2E074(v6);
  if ( result == 1 )
  {
    sub_2E078(v6);
    result = sub_2E080(v6, v2);
  }
  return result;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (0002E738) --------------------------------------------------------
int sub_2E738()
{
  int v0; // r4@1

  pthread_mutex_lock((pthread_mutex_t *)&unk_45064);
  v0 = unk_45068;
  if ( !unk_45068 )
  {
    v0 = operator new(0x28u);
    sub_2E780(v0);
    unk_45068 = v0;
  }
  pthread_mutex_unlock((pthread_mutex_t *)&unk_45064);
  return v0;
}

//----- (0002E780) --------------------------------------------------------
int __fastcall sub_2E780(int a1)
{
  int v1; // r4@1
  android::String8 *v2; // r6@1
  android::SortedVectorImpl *v3; // r5@1

  v1 = a1;
  v2 = (android::String8 *)(a1 + 16);
  *(_BYTE *)a1 &= 0xFEu;
  v3 = (android::SortedVectorImpl *)(a1 + 20);
  android::String8::String8((android::String8 *)(a1 + 4));
  android::String8::String8((android::String8 *)(v1 + 8));
  android::String8::String8((android::String8 *)(v1 + 12));
  android::String8::String8(v2);
  android::SortedVectorImpl::SortedVectorImpl(v3, 4u, 0);
  *(_DWORD *)v3 = &unk_3FE3C;
  return v1;
}

//----- (0002E7D4) --------------------------------------------------------
int __fastcall sub_2E7D4(char *a1, const char *a2, const char *a3, const char *a4, char *a5)
{
  char *v5; // r8@1
  const char *v6; // r4@1
  const char *v7; // r5@1
  const char *v8; // r7@1
  int v9; // r0@2
  int v10; // r4@2
  unsigned int v11; // r2@3
  int result; // r0@9
  int v13; // [sp+4h] [bp-1Ch]@5

  v5 = a1;
  v6 = a4;
  v7 = a3;
  android::String8::setTo((android::String8 *)(a1 + 4), a2);
  android::String8::setTo((android::String8 *)(v5 + 8), v7);
  android::String8::setTo((android::String8 *)(v5 + 12), v6);
  v8 = a5;
  android::String8::setTo((android::String8 *)(v5 + 16), a5);
  do
  {
    v9 = _strchr_chk(v8, 32, -1);
    v10 = v9;
    if ( v9 )
      v11 = v9 - (_DWORD)v8;
    else
      v11 = _strlen_chk(v8, -1);
    android::String8::String8((android::String8 *)&v13, v8, v11);
    if ( !v13 || *(_DWORD *)(v13 - 12) != 1 )
      android::SortedVectorImpl::add((android::SortedVectorImpl *)(v5 + 20), &v13);
    android::String8::~String8((android::String8 *)&v13);
    v8 = (const char *)(v10 + 1);
  }
  while ( v10 );
  result = sub_2E884((int)v5, "GL_OES_framebuffer_object");
  if ( result == 1 )
  {
    result = (unsigned __int8)*v5 | 1;
    *v5 = result;
  }
  return result;
}
// 10F14: using guessed type int __fastcall _strlen_chk(_DWORD, _DWORD);
// 114C0: using guessed type int __fastcall _strchr_chk(_DWORD, _DWORD, _DWORD);

//----- (0002E884) --------------------------------------------------------
signed int __fastcall sub_2E884(int a1, const char *a2)
{
  int v2; // r4@1
  signed int v3; // r4@1
  signed int result; // r0@1
  char v5; // [sp+4h] [bp-14h]@1

  v2 = a1;
  android::String8::String8((android::String8 *)&v5, a2);
  v3 = android::SortedVectorImpl::indexOf((android::SortedVectorImpl *)(v2 + 20), &v5);
  android::String8::~String8((android::String8 *)&v5);
  result = 0;
  if ( v3 > -1 )
    result = 1;
  return result;
}

//----- (0002E8B8) --------------------------------------------------------
int __fastcall sub_2E8B8(int a1)
{
  return *(_DWORD *)(a1 + 16);
}

//----- (0002EE10) --------------------------------------------------------
int __fastcall sub_2EE10(char *s)
{
  char *v1; // r4@1
  int v2; // r3@3
  const char *v4; // r1@8
  const char *v5; // r2@8
  int v6; // [sp+0h] [bp-18h]@0
  int v7; // [sp+8h] [bp-10h]@1
  int v8; // [sp+Ch] [bp-Ch]@1

  v1 = s;
  if ( sscanf(s, "OpenGL ES-CM %d.%d", &v8, &v7) != 2 && sscanf(v1, "OpenGL ES %d.%d", &v8, &v7) != 2 )
  {
    v4 = "SurfaceFlinger";
    v5 = "Unable to parse GL_VERSION string: \"%s\"";
    v2 = (int)v1;
LABEL_9:
    _android_log_print(5, v4, v5, v2, v6);
    return 0x10000;
  }
  v2 = v8;
  if ( v8 == 1 && !v7 )
    return 0x10000;
  if ( v8 == 1 && v7 > 0 )
    return 65537;
  if ( v8 == 2 && v7 > -1 )
    return 0x20000;
  if ( v8 != 3 || v7 <= -1 )
  {
    v6 = v7;
    v5 = "Unrecognized OpenGL ES version: %d.%d";
    v4 = "SurfaceFlinger";
    goto LABEL_9;
  }
  return 196608;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002EECC) --------------------------------------------------------
int __fastcall sub_2EECC(int result)
{
  *(_DWORD *)result = &unk_437C8;
  *(_DWORD *)(result + 8) = 0;
  return result;
}

//----- (0002EF28) --------------------------------------------------------
void **__fastcall sub_2EF28(float a1, float a2, float a3, int a4, int a5, int a6, int a7)
{
  float v7; // r6@1
  float v8; // r9@1
  int v9; // r8@1
  int v11; // r0@1
  int v16; // r0@1
  unsigned int v17; // r3@2
  int v23; // r4@3
  char v28; // [sp+4h] [bp-54h]@1
  int v29; // [sp+14h] [bp-44h]@3
  unsigned int v30; // [sp+1Ch] [bp-3Ch]@1

  v7 = a3;
  v8 = a1;
  v9 = a4;
  _R7 = android::Region::getArray(LODWORD(a2), &v30);
  v11 = sub_2DD0C((int)&v28, 4, 6 * v30, 2, 0);
  __asm
  {
    VLDR            S20, [SP,#0x58+arg_8]
    VLDR            S16, [SP,#0x58+arg_4]
    VLDR            S18, [SP,#0x58+arg_0]
  }
  v16 = sub_2DDC4(v11);
  if ( v30 )
  {
    v17 = 0;
    do
    {
      __asm { VLDR            S0, [R7] }
      ++v17;
      __asm
      {
        VCVT.F32.S32    S0, S0
        VSTR            S0, [R0]
      }
      _R5 = LODWORD(v7) - *(_DWORD *)(_R7 + 4);
      __asm
      {
        VMOV            S0, R5
        VCVT.F32.U32    S0, S0
        VSTR            S0, [R0,#4]
      }
      v16 += 24 * v29;
      __asm
      {
        VLDR            S0, [R7]
        VCVT.F32.S32    S0, S0
        VSTR            S0, [R5]
      }
      _R4 = LODWORD(v7) - *(_DWORD *)(_R7 + 12);
      __asm
      {
        VMOV            S0, R4
        VCVT.F32.U32    S0, S0
        VSTR            S0, [R5,#4]
        VLDR            S0, [R7,#8]
        VCVT.F32.S32    S0, S0
        VSTR            S0, [R5]
      }
      _R4 = LODWORD(v7) - *(_DWORD *)(_R7 + 12);
      __asm
      {
        VMOV            S0, R4
        VCVT.F32.U32    S0, S0
        VSTR            S0, [R5,#4]
        VLDR            S0, [R7]
        VCVT.F32.S32    S0, S0
        VSTR            S0, [R5]
      }
      _R4 = LODWORD(v7) - *(_DWORD *)(_R7 + 4);
      __asm
      {
        VMOV            S0, R4
        VCVT.F32.U32    S0, S0
        VSTR            S0, [R5,#4]
        VLDR            S0, [R7,#8]
        VCVT.F32.S32    S0, S0
        VSTR            S0, [R5]
      }
      _R4 = LODWORD(v7) - *(_DWORD *)(_R7 + 12);
      __asm
      {
        VMOV            S0, R4
        VCVT.F32.U32    S0, S0
        VSTR            S0, [R5,#4]
        VLDR            S0, [R7,#8]
        VCVT.F32.S32    S0, S0
        VSTR            S0, [R5]
      }
      v23 = *(_DWORD *)(_R7 + 4);
      _R7 += 16;
      _R4 = LODWORD(v7) - v23;
      __asm
      {
        VMOV            S0, R4
        VCVT.F32.U32    S0, S0
        VSTR            S0, [R5,#4]
      }
    }
    while ( v17 < v30 );
  }
  __asm
  {
    VMOV            R2, S18
    VMOV            R3, S16
    VSTR            S20, [SP,#0x58+var_58]
  }
  (*(void (__fastcall **)(_DWORD, int, int, int))(*(_DWORD *)LODWORD(v8) + 44))(LODWORD(v8), v9, _R2, _R3);
  (*(void (__fastcall **)(_DWORD, char *))(*(_DWORD *)LODWORD(v8) + 60))(LODWORD(v8), &v28);
  return sub_2DDB0((void **)&v28);
}
// 1152C: using guessed type int __fastcall android::Region::getArray(_DWORD, _DWORD);

//----- (0002F07C) --------------------------------------------------------
void __fastcall sub_2F07C(int a1, GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha)
{
  glClearColor(red, green, blue, alpha);
  j_j_glClear(0x4000u);
}

//----- (0002F09C) --------------------------------------------------------
void __fastcall sub_2F09C(int a1, GLint x, GLint y, GLsizei width, GLsizei height)
{
  glScissor(x, y, width, height);
  j_j_glEnable(0xC11u);
}

//----- (0002F0BC) --------------------------------------------------------
void sub_2F0BC()
{
  j_j_glDisable(0xC11u);
}

//----- (0002F0C8) --------------------------------------------------------
void __fastcall sub_2F0C8(int a1, GLsizei a2, GLuint *a3)
{
  j_j_glGenTextures(a2, a3);
}

//----- (0002F0D0) --------------------------------------------------------
void __fastcall sub_2F0D0(int a1, GLsizei a2, const GLuint *a3)
{
  j_j_glDeleteTextures(a2, a3);
}

//----- (0002F138) --------------------------------------------------------
_DWORD *__fastcall sub_2F138(_DWORD *a1, void (__fastcall ***a2)(_DWORD, _DWORD, _DWORD, _DWORD), int a3)
{
  _DWORD *v3; // r4@1
  _DWORD *v4; // r5@1

  v3 = a1;
  *a1 = a2;
  v4 = a1 + 3;
  (**a2)(a2, a3, a1 + 1, a1 + 2);
  if ( *v4 != 36053 )
    _android_log_print(6, "SurfaceFlinger", "glCheckFramebufferStatusOES error %d");
  return v3;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (0002F190) --------------------------------------------------------
int __fastcall sub_2F190(int a1)
{
  int v1; // r4@1

  v1 = a1;
  (*(void (**)(void))(**(_DWORD **)a1 + 4))();
  return v1;
}

//----- (0002F1A4) --------------------------------------------------------
signed int __fastcall sub_2F1A4(int a1)
{
  int v1; // r1@1
  signed int result; // r0@1

  v1 = *(_DWORD *)(a1 + 12);
  result = -22;
  if ( v1 == 36053 )
    result = 0;
  return result;
}

//----- (0002F1B8) --------------------------------------------------------
signed int __fastcall sub_2F1B8(int a1, signed int a2, int a3, _DWORD *a4)
{
  int v4; // r5@1
  signed int v5; // r10@1
  int v6; // r9@1
  _DWORD *v7; // r8@1
  android::SortedVectorImpl *v8; // r0@1
  signed int v9; // r7@2
  int v10; // r4@4
  unsigned int v11; // r6@4
  signed __int64 v12; // r0@4
  void *v13; // r5@8
  signed int v14; // r5@10
  int v15; // r11@13
  int v16; // r1@14
  int v17; // r0@16
  int v19; // [sp+4h] [bp-4Ch]@20
  void *v20; // [sp+8h] [bp-48h]@1
  int v21; // [sp+Ch] [bp-44h]@4
  int v22; // [sp+1Ch] [bp-34h]@14
  int v23; // [sp+20h] [bp-30h]@4
  unsigned int v24; // [sp+24h] [bp-2Ch]@1
  int v25; // [sp+28h] [bp-28h]@1

  v4 = a3;
  v5 = a2;
  v6 = a1;
  v7 = a4;
  v8 = (android::SortedVectorImpl *)android::SortedVectorImpl::SortedVectorImpl(
                                      (android::SortedVectorImpl *)&v20,
                                      8u,
                                      0);
  v20 = &unk_3FE68;
  v24 = 12344;
  v25 = 12344;
  android::SortedVectorImpl::add(v8, &v24);
  if ( v4 )
  {
    v24 = 12352;
    v25 = v4;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)&v20, &v24);
    v24 = 12610;
    v25 = 1;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)&v20, &v24);
    v24 = 12339;
    v25 = 5;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)&v20, &v24);
    v24 = 12615;
    v25 = 1;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)&v20, &v24);
    v24 = 12324;
    v25 = 8;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)&v20, &v24);
    v24 = 12323;
    v25 = 8;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)&v20, &v24);
    v24 = 12322;
    v25 = 8;
    android::SortedVectorImpl::add((android::SortedVectorImpl *)&v20, &v24);
    v5 = 12344;
    v9 = 12344;
  }
  else
  {
    v9 = 12334;
  }
  v24 = -1;
  v10 = v21;
  v23 = 0;
  eglGetConfigs(v6, 0, 0, &v24);
  v11 = v24;
  v12 = 4LL * v24;
  if ( !is_mul_ok(4u, v24) )
    HIDWORD(v12) = 1;
  if ( HIDWORD(v12) )
    LODWORD(v12) = -1;
  v13 = (void *)operator new[](v12);
  eglChooseConfig(v6, v10, v13, v11);
  if ( v23 )
  {
    if ( v9 == 12344 )
    {
      *v7 = *(_DWORD *)v13;
      operator delete[](v13);
      v14 = 0;
    }
    else
    {
      if ( v23 <= 0 )
      {
LABEL_16:
        _android_log_print(4, "SurfaceFlinger", "no matching config found, selecting last one");
        v17 = *((_DWORD *)v13 + v23 - 1);
      }
      else
      {
        v15 = 0;
        while ( 1 )
        {
          v16 = *((_DWORD *)v13 + v15);
          v22 = 0;
          eglGetConfigAttrib(v6, v16, v9, &v22);
          if ( v22 == v5 )
            break;
          if ( ++v15 >= v23 )
            goto LABEL_16;
        }
        v17 = *((_DWORD *)v13 + v15);
      }
      *v7 = v17;
      operator delete[](v13);
      v14 = 0;
    }
  }
  else
  {
    operator delete[](v13);
    v14 = -2;
  }
  if ( !v14 && eglGetConfigAttrib(v6, *v7, 12327, &v19) && v19 == 12368 )
    _android_log_print(5, "SurfaceFlinger", "EGL_SLOW_CONFIG selected!");
  v20 = &unk_3FE68;
  android::VectorImpl::finish_vector((android::VectorImpl *)&v20);
  android::SortedVectorImpl::~SortedVectorImpl((android::SortedVectorImpl *)&v20);
  return v14;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 114D8: using guessed type int __fastcall eglGetConfigAttrib(_DWORD, _DWORD, _DWORD, _DWORD);
// 115A4: using guessed type int __fastcall eglGetConfigs(_DWORD, _DWORD, _DWORD, _DWORD);
// 115B0: using guessed type int __fastcall eglChooseConfig(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (0002F4F0) --------------------------------------------------------
int __fastcall sub_2F4F0(int result)
{
  signed int v5; // r1@1

  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)result = 0;
  *(_DWORD *)(result + 4) = 3553;
  *(_DWORD *)(result + 8) = 0;
  *(_DWORD *)(result + 12) = 0;
  *(_BYTE *)(result + 16) = 0;
  v5 = 20;
  do
  {
    _R2 = result + v5;
    v5 += 16;
    __asm { VST1.32         {D16-D17}, [R2] }
  }
  while ( v5 != 84 );
  _R2 = result + 24;
  *(_DWORD *)(result + 20) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 44;
  *(_DWORD *)(result + 40) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 64;
  *(_DWORD *)(result + 60) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  *(_DWORD *)(result + 80) = 1065353216;
  return result;
}

//----- (0002F538) --------------------------------------------------------
int __fastcall sub_2F538(int result, int a2, int a3)
{
  signed int v7; // r1@1

  __asm { VMOV.I32        Q8, #0 }
  *(_DWORD *)result = a3;
  *(_DWORD *)(result + 4) = a2;
  v7 = 20;
  *(_DWORD *)(result + 8) = 0;
  *(_DWORD *)(result + 12) = 0;
  *(_BYTE *)(result + 16) = 0;
  do
  {
    _R2 = result + v7;
    v7 += 16;
    __asm { VST1.32         {D16-D17}, [R2] }
  }
  while ( v7 != 84 );
  _R2 = result + 24;
  *(_DWORD *)(result + 20) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 44;
  *(_DWORD *)(result + 40) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  _R2 = result + 64;
  *(_DWORD *)(result + 60) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R2] }
  *(_DWORD *)(result + 80) = 1065353216;
  return result;
}

//----- (0002F57C) --------------------------------------------------------
int __fastcall sub_2F57C(int result, int a2, int a3)
{
  *(_DWORD *)result = a3;
  *(_DWORD *)(result + 4) = a2;
  return result;
}

//----- (0002F584) --------------------------------------------------------
int __fastcall sub_2F584(int a1, int a2)
{
  int v2; // r12@0
  int v7; // r2@1
  int v9; // r12@3
  int v10; // lr@3
  int *v11; // r2@3
  int v12; // r0@4
  int *v13; // r3@4
  int v14; // r4@5
  int v15; // r1@7
  int v16; // lr@7
  int v17; // r3@7
  int v18; // r4@7
  int v19; // r2@7
  int v20; // r1@7
  int v21; // lr@7
  int v22; // r3@7
  int v23; // r4@7
  int v24; // r2@7
  int v25; // r4@7
  int result; // r0@7
  int v27; // r1@7
  int v28; // r2@7
  int v29; // r3@7
  int v30; // [sp+0h] [bp-48h]@3
  int v31; // [sp+4h] [bp-44h]@7
  int v32; // [sp+8h] [bp-40h]@7
  int v33; // [sp+Ch] [bp-3Ch]@7
  int v34; // [sp+10h] [bp-38h]@7
  int v35; // [sp+14h] [bp-34h]@7
  int v36; // [sp+18h] [bp-30h]@7
  int v37; // [sp+1Ch] [bp-2Ch]@7
  int v38; // [sp+20h] [bp-28h]@7
  int v39; // [sp+24h] [bp-24h]@7
  int v40; // [sp+28h] [bp-20h]@7
  int v41; // [sp+2Ch] [bp-1Ch]@7
  int v42; // [sp+30h] [bp-18h]@7
  int v43; // [sp+34h] [bp-14h]@7
  int v44; // [sp+38h] [bp-10h]@7
  int v45; // [sp+3Ch] [bp-Ch]@7

  __asm { VMOV.I32        Q8, #0 }
  v7 = 0;
  do
  {
    _R3 = v2 + v7;
    v7 += 16;
    __asm { VST1.64         {D16-D17}, [R3] }
  }
  while ( v7 != 64 );
  v9 = a1 + 20;
  v10 = 0;
  v11 = &v30;
  do
  {
    v12 = 0;
    v13 = v11;
    do
    {
      v14 = *(_DWORD *)(a2 + 4 * v12++);
      *v13 = v14;
      ++v13;
    }
    while ( v12 != 4 );
    ++v10;
    v11 += 4;
    a2 += 16;
  }
  while ( v10 != 4 );
  v15 = v34;
  v16 = v30;
  v17 = v31;
  v18 = v32;
  v19 = v33;
  *(_DWORD *)(v9 + 20) = v35;
  *(_DWORD *)(v9 + 16) = v15;
  *(_DWORD *)(v9 + 12) = v19;
  *(_DWORD *)(v9 + 8) = v18;
  *(_DWORD *)(v9 + 4) = v17;
  *(_DWORD *)v9 = v16;
  v20 = v40;
  v21 = v36;
  v22 = v37;
  v23 = v38;
  v24 = v39;
  *(_DWORD *)(v9 + 44) = v41;
  *(_DWORD *)(v9 + 40) = v20;
  *(_DWORD *)(v9 + 36) = v24;
  *(_DWORD *)(v9 + 32) = v23;
  v25 = v9 + 48;
  *(_DWORD *)(v9 + 28) = v22;
  *(_DWORD *)(v9 + 24) = v21;
  result = v42;
  v27 = v43;
  v28 = v44;
  v29 = v45;
  *(_DWORD *)v25 = v42;
  *(_DWORD *)(v25 + 4) = v27;
  *(_DWORD *)(v25 + 8) = v28;
  *(_DWORD *)(v25 + 12) = v29;
  return result;
}

//----- (0002F624) --------------------------------------------------------
int __fastcall sub_2F624(int result, char a2)
{
  *(_BYTE *)(result + 16) = a2;
  return result;
}

//----- (0002F628) --------------------------------------------------------
int __fastcall sub_2F628(int result, int a2, int a3)
{
  *(_DWORD *)(result + 8) = a2;
  *(_DWORD *)(result + 12) = a3;
  return result;
}

//----- (0002F630) --------------------------------------------------------
int __fastcall sub_2F630(int a1)
{
  return a1 + 20;
}

//----- (0002F634) --------------------------------------------------------
int __fastcall sub_2F634(int a1)
{
  return *(_BYTE *)(a1 + 16);
}

//----- (0002F6E0) --------------------------------------------------------
int __fastcall sub_2F6E0(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_2EECC(a1);
  *(_DWORD *)v1 = &unk_43868;
  glGetIntegerv(0xD33u, (GLint *)(v1 + 24));
  glGetIntegerv(0xD3Au, (GLint *)(v1 + 16));
  glPixelStorei(0xCF5u, 4);
  glPixelStorei(0xD05u, 4);
  glEnableClientState(0x8074u);
  glShadeModel(0x1D00u);
  glDisable(0xBD0u);
  glDisable(0xB44u);
  glGenTextures(1, (GLuint *)(v1 + 12));
  glBindTexture(0xDE1u, *(_DWORD *)(v1 + 12));
  glTexParameterx(3553, 10240, 9728);
  glTexParameterx(3553, 10241, 9728);
  glTexParameterx(3553, 10242, 10497);
  glTexParameterx(3553, 10243, 10497);
  glTexImage2D(0xDE1u, 0, 6407, 1, 1, 0, 0x1907u, 0x8363u, &unk_3D3F8);
  return v1;
}
// 1161C: using guessed type int __fastcall glTexParameterx(_DWORD, _DWORD, _DWORD);

//----- (0002FCD0) --------------------------------------------------------
int __fastcall sub_2FCD0(int a1)
{
  int v1; // r4@1

  v1 = a1;
  sub_2EECC(a1);
  *(_DWORD *)v1 = &unk_438B8;
  *(_DWORD *)(v1 + 28) = 0;
  *(_DWORD *)(v1 + 32) = 0;
  sub_2DA8C(v1 + 36);
  android::VectorImpl::VectorImpl((android::VectorImpl *)(v1 + 284), 0x50u, 0);
  *(_DWORD *)(v1 + 284) = &unk_3FE94;
  glGetIntegerv(0xD33u, (GLint *)(v1 + 24));
  glGetIntegerv(0xD3Au, (GLint *)(v1 + 16));
  glPixelStorei(0xCF5u, 4);
  glPixelStorei(0xD05u, 4);
  glGenTextures(1, (GLuint *)(v1 + 12));
  glBindTexture(0xDE1u, *(_DWORD *)(v1 + 12));
  glTexParameteri(0xDE1u, 0x2800u, 9728);
  glTexParameteri(0xDE1u, 0x2801u, 9728);
  glTexParameteri(0xDE1u, 0x2802u, 10497);
  glTexParameteri(0xDE1u, 0x2803u, 10497);
  glTexImage2D(0xDE1u, 0, 6407, 1, 1, 0, 0x1907u, 0x8363u, &unk_3D3FA);
  return v1;
}

//----- (0002FDCC) --------------------------------------------------------
int __fastcall sub_2FDCC(int a1)
{
  android::Nsd *v1; // r4@1
  android::VectorImpl *v2; // r6@1
  int v3; // r5@1

  v1 = (android::Nsd *)a1;
  v2 = (android::VectorImpl *)(a1 + 284);
  *(_DWORD *)a1 = &unk_438B8;
  v3 = a1 + 36;
  *(_DWORD *)(a1 + 284) = &unk_3FE94;
  android::VectorImpl::finish_vector((android::VectorImpl *)(a1 + 284));
  android::VectorImpl::~VectorImpl(v2);
  sub_2DB30(v3);
  return android::Nsd::postDraw(v1);
}

//----- (00030188) --------------------------------------------------------
float *__fastcall sub_30188(int a1, int _R1, int a3)
{
  int v10; // r0@1
  float *result; // r0@3
  int v17; // r1@22
  int v21; // r2@28
  float v25; // [sp+8h] [bp-48h]@28
  double v26; // [sp+10h] [bp-40h]@28
  int v27; // [sp+18h] [bp-38h]@28

  __asm { VMOV.I32        Q8, #0 }
  _R4 = a1;
  _R5 = a3;
  v10 = 0;
  __asm { VMOV            S0, R1 }
  do
  {
    _R1 = _R4 + v10;
    v10 += 16;
    __asm { VST1.32         {D16-D17}, [R1] }
  }
  while ( v10 != 64 );
  __asm { VCVT.F64.F32    D18, S0 }
  _R1 = _R4 + 4;
  *(_DWORD *)_R4 = 1065353216;
  __asm
  {
    VMOV            R6, R7, D18
    VST1.32         {D16-D17}, [R1]
  }
  _R1 = _R4 + 24;
  *(_DWORD *)(_R4 + 20) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  _R1 = _R4 + 44;
  *(_DWORD *)(_R4 + 40) = 1065353216;
  __asm { VST1.32         {D16-D17}, [R1] }
  *(_DWORD *)(_R4 + 60) = 1065353216;
  _R0 = COERCE_UNSIGNED_INT64(cos(_R6));
  __asm { VMOV            D8, R0, R1 }
  result = (float *)COERCE_UNSIGNED_INT64(sin(_R6));
  __asm
  {
    VLDR            S0, [R5]
    VMOV.F32        S20, #1.0
    VMOV            D16, R0, R1
    VCMPE.F32       S0, S20
    VCVT.F32.F64    S16, D8
    VCVT.F32.F64    S18, D16
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _ZF )
  {
    __asm
    {
      VLDR            S2, [R5,#4]
      VCMPE.F32       S2, #0.0
      VMRS            APSR_nzcv, FPSCR
    }
    if ( _ZF )
    {
      __asm
      {
        VLDR            S2, [R5,#8]
        VCMPE.F32       S2, #0.0
        VMRS            APSR_nzcv, FPSCR
      }
      if ( _ZF )
      {
        __asm
        {
          VNEG.F32        S0, S18
          VSTR            S16, [R4,#0x14]
          VSTR            S16, [R4,#0x28]
          VSTR            S18, [R4,#0x18]
          VSTR            S0, [R4,#0x24]
        }
        return result;
      }
    }
  }
  __asm
  {
    VCMPE.F32       S0, #0.0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
    goto LABEL_34;
  __asm
  {
    VLDR            S2, [R5,#4]
    VCMPE.F32       S2, S20
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _ZF )
  {
    __asm
    {
      VLDR            S2, [R5,#8]
      VCMPE.F32       S2, #0.0
      VMRS            APSR_nzcv, FPSCR
    }
    if ( _ZF )
    {
      __asm
      {
        VNEG.F32        S0, S18
        VSTR            S16, [R4]
        VSTR            S16, [R4,#0x28]
        VSTR            S18, [R4,#0x20]
        VSTR            S0, [R4,#8]
      }
      return result;
    }
  }
  __asm
  {
    VLDR            S2, [R5,#4]
    VCMPE.F32       S2, #0.0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !_ZF )
    goto LABEL_34;
  __asm
  {
    VLDR            S2, [R5,#8]
    VCMPE.F32       S2, S20
    VMRS            APSR_nzcv, FPSCR
  }
  if ( _ZF )
  {
    __asm
    {
      VNEG.F32        S0, S18
      VSTR            S16, [R4]
      VSTR            S16, [R4,#0x14]
      VSTR            S18, [R4,#4]
      VSTR            S0, [R4,#0x10]
    }
  }
  else
  {
LABEL_34:
    __asm
    {
      VLDR            S2, =0.0
      VMLA.F32        S2, S0, S0
    }
    v17 = 0;
    do
    {
      _R2 = _R5 + 4 + v17;
      v17 += 4;
      __asm
      {
        VLDR            S0, [R2]
        VMLA.F32        S2, S0, S0
      }
    }
    while ( !_ZF );
    __asm
    {
      VSQRT.F32       S0, S2
      VCMPE.F32       S0, S0
      VMRS            APSR_nzcv, FPSCR
    }
    if ( _VF )
    {
      __asm { VMOV            R0, S2 }
      _R0 = sqrtf(_R0);
      __asm { VMOV            S0, R0 }
    }
    __asm { VDIV.F32        S0, S20, S0 }
    v21 = 0;
    __asm
    {
      VSTR            S0, [SP,#0x50+var_4C]
      VSTR            S0, [SP,#0x50+var_48]
      VSTR            S0, [SP,#0x50+var_44]
      VLDR            D16, [R5]
      VSTR            D16, [SP,#0x50+var_40]
    }
    v27 = *(_DWORD *)(_R5 + 8);
    __asm { VLDR            S2, [SP,#0x50+var_40] }
    result = &v25;
    __asm
    {
      VMUL.F32        S0, S0, S2
      VSTR            S0, [SP,#0x50+var_40]
    }
    do
    {
      _R3 = ((unsigned int)&v26 | 4) + v21;
      _R7 = (char *)&v25 + v21;
      __asm { VLDR            S0, [R3] }
      v21 += 4;
      __asm
      {
        VLDR            S2, [R7]
        VMUL.F32        S0, S2, S0
        VSTR            S0, [R3]
      }
    }
    while ( !_ZF );
    __asm
    {
      VLDR            S0, [SP,#0x50+var_40]
      VLDR            S2, [SP,#0x50+var_40+4]
      VLDR            S4, [SP,#0x50+var_38]
      VMUL.F32        S6, S0, S2
      VMUL.F32        S10, S2, S4
      VMUL.F32        S12, S0, S4
      VMUL.F32        S14, S0, S0
      VSUB.F32        S8, S20, S16
      VMUL.F32        S1, S2, S2
      VMUL.F32        S3, S18, S4
      VMUL.F32        S4, S4, S4
      VMOV.F32        S5, S16
      VMLA.F32        S5, S8, S14
      VMOV.F32        S14, S16
      VMUL.F32        S6, S8, S6
      VMUL.F32        S0, S18, S0
      VMUL.F32        S10, S8, S10
      VMUL.F32        S2, S18, S2
      VMUL.F32        S12, S8, S12
      VMLA.F32        S14, S8, S1
      VMLA.F32        S16, S8, S4
      VSUB.F32        S1, S6, S3
      VSUB.F32        S4, S10, S0
      VSUB.F32        S8, S12, S2
      VADD.F32        S0, S0, S10
      VADD.F32        S2, S2, S12
      VADD.F32        S6, S6, S3
      VSTR            S1, [R4,#0x10]
      VSTR            S2, [R4,#0x20]
      VSTMIA          R4, {S5-S6}
      VSTR            S14, [R4,#0x14]
      VSTR            S4, [R4,#0x24]
      VSTR            S8, [R4,#8]
      VSTR            S0, [R4,#0x18]
      VSTR            S16, [R4,#0x28]
    }
  }
  return result;
}

//----- (00030870) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::checkIfSupportLauncherNsd(android::SurfaceFlingerEx *this)
{
  return (*((_DWORD *)this + 1335) >> 9) & 1;
}

//----- (0003087C) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportLauncherNsd(int a1)
{
  return android::SurfaceFlingerEx::checkIfSupportLauncherNsd((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (00030884) --------------------------------------------------------
_DWORD *__fastcall android::SurfaceFlingerEx::signalDrawLayer(android::SurfaceFlingerEx *this)
{
  return sub_1B0E8(*((_DWORD **)this + 116));
}

//----- (0003088C) --------------------------------------------------------
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalDrawLayer(int a1)
{
  return android::SurfaceFlingerEx::signalDrawLayer((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (00030894) --------------------------------------------------------
_DWORD *__fastcall android::SurfaceFlingerEx::signalClearMessage(android::SurfaceFlingerEx *this)
{
  return sub_1B148(*((_DWORD **)this + 116));
}

//----- (0003089C) --------------------------------------------------------
_DWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::signalClearMessage(int a1)
{
  return android::SurfaceFlingerEx::signalClearMessage((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (000308A4) --------------------------------------------------------
signed __int64 __fastcall android::SurfaceFlingerEx::setCurrentInvalidateTime(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  signed __int64 v2; // r0@1
  signed __int64 result; // r0@1

  v1 = this;
  LODWORD(v2) = systemTime(1);
  result = v2 / 1000000;
  *((_DWORD *)v1 + 1339) = result;
  return result;
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);

//----- (000308C4) --------------------------------------------------------
signed __int64 __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::setCurrentInvalidateTime(int a1)
{
  return android::SurfaceFlingerEx::setCurrentInvalidateTime((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (000308CC) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::captureScreen(int a1, char **a2, char **a3, int a4, int a5, int a6, int a7, int a8, int a9, int a10, int a11, char a12, unsigned int a13)
{
  return sub_23CCC(a1, a2, a3, a4, a5, a6, a7, a8, a9, a10, a11, a12, a13);
}

//----- (00030914) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2)
{
  int v2; // r7@1
  int *v3; // r4@1
  int v4; // r6@1
  const char **v5; // r0@1
  int v6; // r0@2
  int v7; // r4@6
  int v8; // r0@6
  int result; // r0@6
  int v10; // [sp+0h] [bp-78h]@1
  int v11; // [sp+5Ch] [bp-1Ch]@1

  v2 = a1;
  v3 = a2;
  v11 = v0;
  property_get("sys.sdr.enter", &v10, "0");
  v4 = atoi((const char *)&v10);
  v5 = (const char **)sub_17C58(*v3);
  if ( !strcmp(*v5, "SurfaceView")
    && (v6 = *(_DWORD *)(v2 + 5336)) != 0
    && ((*(int (**)(void))(*(_DWORD *)v6 + 92))() && v4 == 1 || (*(int (**)(void))(**(_DWORD **)(v2 + 5336) + 84))()) )
  {
    sub_197C0(*v3, 1);
    v7 = *v3;
    v8 = (*(int (**)(void))(**(_DWORD **)(v2 + 5336) + 108))();
    result = sub_197C8(v7, v8);
  }
  else
  {
    result = sub_197C0(*v3, 0);
  }
  if ( v11 != v0 )
    _stack_chk_fail(result);
  return result;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (000309BC) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetGpuComposer(int a1, int *a2)
{
  return android::SurfaceFlingerEx::handleSdrSetGpuComposer(a1 - 16, a2);
}

//----- (000309C4) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdInvalidate(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r5@1
  int v2; // r4@1

  v1 = this;
  v2 = (*(int (**)(void))(*(_DWORD *)this + 188))();
  if ( v2 )
  {
    if ( word_4506C == 1 )
    {
      *((_DWORD *)v1 + 1338) = *((_DWORD *)v1 + 1339);
      (*(void (__fastcall **)(_DWORD))(*(_DWORD *)v1 + 172))(v1);
    }
    else
    {
      v2 = 0;
      word_4506C = 0;
    }
  }
  return v2;
}
// 4506C: using guessed type __int16 word_4506C;

//----- (00030A08) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdInvalidate(int a1)
{
  return android::SurfaceFlingerEx::handleNsdInvalidate((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (00030A10) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdRefresh(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  int result; // r0@1

  v1 = this;
  result = (*(int (**)(void))(*(_DWORD *)this + 188))();
  if ( result )
  {
    if ( word_4506C == 1 )
      result = sub_1E094((int)v1);
    else
      result = (*(int (__fastcall **)(_DWORD))(*(_DWORD *)v1 + 192))(v1);
  }
  return result;
}
// 4506C: using guessed type __int16 word_4506C;

//----- (00030A48) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdRefresh(int a1)
{
  return android::SurfaceFlingerEx::handleNsdRefresh((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (00030A50) --------------------------------------------------------
int __fastcall sub_30A50(int a1)
{
  int v1; // r5@1
  int i; // r4@1
  int v3; // r6@3
  void *v4; // r0@4

  v1 = a1;
  *(_DWORD *)a1 = 8;
  for ( i = *(_DWORD *)(*(_DWORD *)(a1 + 4) + 8); i != *(_DWORD *)(v1 + 4); i = v3 )
  {
    v3 = *(_DWORD *)(i + 8);
    android::String8::~String8((android::String8 *)i);
    operator delete((void *)i);
  }
  *(_DWORD *)(i + 4) = i;
  *(_DWORD *)(*(_DWORD *)(v1 + 4) + 8) = *(_DWORD *)(v1 + 4);
  v4 = *(void **)(v1 + 4);
  if ( v4 )
    operator delete[](v4);
  return v1;
}

//----- (00030AA4) --------------------------------------------------------
int __fastcall sub_30AA4(int a1, int a2)
{
  int result; // r0@1

  result = v0;
  __dmb();
  if ( !result )
    result = j_j_atrace_setup(0, a2);
  return result;
}

//----- (00030ABC) --------------------------------------------------------
android::RefBase *__fastcall android::SurfaceFlingerEx::initNsd(android::SurfaceFlingerEx *this, char *a2, int a3)
{
  android::SurfaceFlingerEx *v3; // r4@1
  char *v4; // r6@1
  android::Nsd *v5; // r7@1
  const void *v6; // r6@1
  android::RefBase *v7; // r0@1
  int v8; // r3@3
  android::RefBase *result; // r0@3
  char *v10; // [sp+4h] [bp-1Ch]@1
  int v11; // [sp+8h] [bp-18h]@1

  v10 = a2;
  v11 = a3;
  v3 = this;
  v4 = (char *)this + 5312;
  v5 = (android::Nsd *)operator new(0x48u);
  v6 = v4 + 20;
  android::Nsd::Nsd(v5);
  android::RefBase::incStrong(v5, v6);
  v7 = (android::RefBase *)*((_DWORD *)v3 + 1333);
  if ( v7 )
    android::RefBase::decStrong(v7, v6);
  *((_DWORD *)v3 + 1333) = v5;
  v8 = *(_DWORD *)v3;
  v10 = (char *)v3;
  android::RefBase::incStrong((android::SurfaceFlingerEx *)((char *)v3 + *(_DWORD *)(v8 - 12)), &v10);
  result = android::Nsd::init((int)v5, &v10, *((_DWORD *)v3 + 1335));
  if ( v10 )
    result = (android::RefBase *)android::RefBase::decStrong(
                                   (android::RefBase *)&v10[*(_DWORD *)(*(_DWORD *)v10 - 12)],
                                   &v10);
  word_4506C = 0;
  return result;
}
// 4506C: using guessed type __int16 word_4506C;

//----- (00030B34) --------------------------------------------------------
android::RefBase *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::initNsd(int a1, char *a2, int a3)
{
  return android::SurfaceFlingerEx::initNsd((android::SurfaceFlingerEx *)(a1 - 16), a2, a3);
}

//----- (00030B3C) --------------------------------------------------------
unsigned int __fastcall sub_30B3C(const char **a1, const char *a2)
{
  return __clz(strcmp(*a1, a2)) >> 5;
}

//----- (00030B4C) --------------------------------------------------------
int __fastcall sub_30B4C(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r1@1
  int v4; // r0@1
  int v5; // t0@1
  int v6; // r1@1
  int v7; // r2@1
  int v8; // r3@1

  v2 = a1;
  v3 = *(_DWORD *)(a2 + 4) + 16 * (*(_DWORD *)(a2 + 8) - 1);
  v4 = *(_DWORD *)v3;
  v5 = v3 + 4;
  v6 = *(_DWORD *)(v3 + 4);
  v5 += 4;
  v7 = *(_DWORD *)v5;
  v8 = *(_DWORD *)(v5 + 4);
  *(_DWORD *)v2 = v4;
  *(_DWORD *)(v2 + 4) = v6;
  *(_DWORD *)(v2 + 8) = v7;
  *(_DWORD *)(v2 + 12) = v8;
  return v2;
}

//----- (00030B64) --------------------------------------------------------
pthread_mutex_t **__fastcall sub_30B64(pthread_mutex_t **a1)
{
  pthread_mutex_t **v1; // r4@1

  v1 = a1;
  pthread_mutex_unlock(*a1);
  return v1;
}

//----- (00030B72) --------------------------------------------------------
int __fastcall sub_30B72(pthread_mutex_t *a1)
{
  return -pthread_mutex_lock(a1);
}

//----- (00030B7C) --------------------------------------------------------
_QWORD *__fastcall sub_30B7C(_QWORD *a1, int a2)
{
  _QWORD *v2; // r6@1
  __int64 v3; // r4@1
  int v4; // r0@1
  int v6; // [sp+4h] [bp-14h]@1

  v6 = a2;
  v2 = a1;
  v3 = *a1;
  v4 = v0;
  __dmb();
  if ( !v4 )
    atrace_setup(0, a2);
  if ( v3 & v0 )
  {
    BYTE3(v6) = 69;
    write(v0, (char *)&v6 + 3, 1u);
  }
  return v2;
}
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);

//----- (00030BD4) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 this)
{
  int v1; // r4@1
  __int32 v6; // r6@1
  int v7; // r2@1
  android::Nsd *v8; // r0@2
  int v9; // r4@2
  int v10; // r1@2
  signed int v11; // r0@3
  __int64 v13; // [sp+0h] [bp-18h]@1

  v13 = this;
  v1 = this;
  __asm { VMOV.I32        D16, #0 }
  v6 = HIDWORD(this);
  __asm { VSTR            D16, [SP,#0x18+var_18] }
  sub_30AA4((int)"handleNsdDrawLayer", SHIDWORD(this));
  if ( android::Nsd::nsd_is_exit_if_error(*(android::Nsd **)(v1 + 5332)) )
  {
    *(_DWORD *)(v1 + 5340) &= 0xFFFFFDFF;
    v8 = *(android::Nsd **)(v1 + 5332);
    v9 = 0;
    android::Nsd::nsd_exit(v8);
    word_4506C = 0;
    _android_log_print(6, 0, "NSDSF : release launcher nsd in handleNsdDrawLayer");
  }
  else
  {
    v11 = android::Nsd::doDraw(*(android::Nsd **)(v1 + 5332), v6, v7);
    v9 = v11 - 1 + ((unsigned int)(v11 - 1) <= 0) - (v11 - 1);
  }
  sub_30B7C(&v13, v10);
  return v9;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 4506C: using guessed type __int16 word_4506C;

//----- (00030C4C) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdDrawLayer(__int64 a1)
{
  LODWORD(a1) = a1 - 16;
  return android::SurfaceFlingerEx::handleNsdDrawLayer(a1);
}

//----- (00030C54) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::captureScreenForKeyguard(int a1, int a2, int a3)
{
  int v3; // r9@1
  int v4; // r10@1
  int v5; // r5@1
  signed int v6; // r7@1
  int result; // r0@2
  int v8; // r6@3
  int v9; // r11@3
  const android::String8 *v10; // r0@3
  int v11; // r8@3
  int v12; // [sp+0h] [bp-60h]@1
  int v13; // [sp+4h] [bp-5Ch]@1
  const char *v14; // [sp+24h] [bp-3Ch]@3
  int v15; // [sp+28h] [bp-38h]@3
  int v16; // [sp+2Ch] [bp-34h]@4
  int v17; // [sp+30h] [bp-30h]@3
  int v18; // [sp+34h] [bp-2Ch]@4

  v3 = a1;
  v4 = a2;
  v13 = a3;
  v5 = 0;
  v6 = 0;
  _android_log_print(6, 0, "SurfaceFlingerEx captureScreenForKeyguard enter");
  v12 = *(_DWORD *)(v3 + 8);
  while ( 1 )
  {
    result = v12;
    if ( v5 == v12 )
      break;
    v8 = *(_DWORD *)(v3 + 4);
    v9 = 4 * v5;
    v10 = (const android::String8 *)sub_17C58(*(_DWORD *)(v8 + 4 * v5));
    android::String8::String8((android::String8 *)&v14, v10);
    v11 = *(_DWORD *)(v8 + 4 * v5);
    sub_30B4C((int)&v15, v11 + 8);
    if ( v17 - v15 > 0 && v18 - v16 > 0 )
    {
      if ( sub_30B3C(&v14, "Keyguard") )
      {
        v6 = 1;
      }
      else if ( !sub_30B3C(&v14, "DimSurface")
             && !sub_30B3C(&v14, "DimAnimator")
             && !sub_30B3C(&v14, "DimLayer")
             && !sub_30B3C(&v14, "ElectronBeam")
             && !sub_30B3C(&v14, "ColorFade")
             && (sub_30B3C(&v14, "StatusBar") || sub_30B3C(&v14, "NavigationBar") || !v6) )
      {
        if ( v4 )
          sub_192B4(v11, 1);
        sub_189F0(*(_DWORD *)(v8 + v9), v13);
        if ( v4 )
          sub_192B4(*(_DWORD *)(v8 + v9), 0);
      }
    }
    ++v5;
    android::String8::~String8((android::String8 *)&v14);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00030D98) --------------------------------------------------------
android::SurfaceFlingerEx *__fastcall android::SurfaceFlingerEx::SurfaceFlingerEx(android::SurfaceFlingerEx *this, int a2)
{
  int v2; // r5@1
  android::SurfaceFlingerEx *v3; // r4@1
  int v4; // r3@1
  int v5; // r5@1
  int v6; // r0@1
  android::SurfaceFlingerEx *result; // r0@1

  v2 = a2;
  v3 = this;
  android::SurfaceFlinger::SurfaceFlinger(this, a2 + 4);
  v4 = *(_DWORD *)v2;
  *(_DWORD *)v3 = *(_DWORD *)v2;
  *(_DWORD *)((char *)v3 + *(_DWORD *)(v4 - 12)) = *(_DWORD *)(v2 + 96);
  *((_DWORD *)v3 + 1) = *(_DWORD *)(v2 + 100);
  *((_DWORD *)v3 + 4) = *(_DWORD *)(v2 + 104);
  v5 = *(_DWORD *)(v2 + 108);
  *((_DWORD *)v3 + 6) = 436;
  *((_DWORD *)v3 + 5) = v5;
  *((_DWORD *)v3 + 1333) = 0;
  *((_DWORD *)v3 + 1334) = 0;
  pthread_mutex_init((pthread_mutex_t *)((char *)v3 + 5384), 0);
  *((_DWORD *)v3 + 1347) = 8;
  v6 = operator new[](0xCu);
  *((_DWORD *)v3 + 1348) = v6;
  *(_DWORD *)(v6 + 4) = v6;
  *(_DWORD *)(*((_DWORD *)v3 + 1348) + 8) = *((_DWORD *)v3 + 1348);
  _android_log_print(6, 0, "new: SurfaceFlingerEx");
  memset((char *)v3 + 5368, 0, 0x10u);
  result = v3;
  *((_BYTE *)v3 + 5365) = 1;
  *((_DWORD *)v3 + 1340) = 0;
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00030E40) --------------------------------------------------------
android::SurfaceFlingerEx *__fastcall android::SurfaceFlingerEx::SurfaceFlingerEx(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  int v2; // r0@1
  android::SurfaceFlingerEx *result; // r0@1

  v1 = this;
  android::RefBase::RefBase((android::SurfaceFlingerEx *)((char *)this + 5396));
  android::SurfaceFlinger::SurfaceFlinger(v1, 4);
  *(_DWORD *)v1 = 12;
  *((_DWORD *)v1 + 1349) = 480;
  *((_DWORD *)v1 + 1) = 252;
  *((_DWORD *)v1 + 4) = 332;
  *((_DWORD *)v1 + 5) = 416;
  *((_DWORD *)v1 + 6) = 436;
  *((_DWORD *)v1 + 1333) = 0;
  *((_DWORD *)v1 + 1334) = 0;
  pthread_mutex_init((pthread_mutex_t *)((char *)v1 + 5384), 0);
  *((_DWORD *)v1 + 1347) = 8;
  v2 = operator new[](0xCu);
  *((_DWORD *)v1 + 1348) = v2;
  *(_DWORD *)(v2 + 4) = v2;
  *(_DWORD *)(*((_DWORD *)v1 + 1348) + 8) = *((_DWORD *)v1 + 1348);
  _android_log_print(6, 0, "new: SurfaceFlingerEx");
  memset((char *)v1 + 5368, 0, 0x10u);
  result = v1;
  *((_BYTE *)v1 + 5365) = 1;
  *((_DWORD *)v1 + 1340) = 0;
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00030F00) --------------------------------------------------------
android::SurfaceFlingerEx *__fastcall android::createMyComponentSurface(android *this, void *a2)
{
  android::SurfaceFlingerEx *v2; // r4@1

  v2 = (android::SurfaceFlingerEx *)operator new(0x1520u);
  android::SurfaceFlingerEx::SurfaceFlingerEx(v2);
  return v2;
}

//----- (00030F14) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::initHwModule(android::SurfaceFlingerEx *this)
{
  int v1; // r7@1
  void (__fastcall *v2)(int, char *, android::ProcessState **, signed int); // r9@1
  int v3; // r8@1
  android::IPCThreadState *v4; // r0@3
  android::IPCThreadState *v5; // r0@5
  int result; // r0@5
  int v7; // [sp+4h] [bp-2Ch]@1
  char v8; // [sp+8h] [bp-28h]@1
  android::ProcessState *v9; // [sp+Ch] [bp-24h]@1

  _android_log_print(4, 0, "APS:NSD:SurfaceFlingerEx:initHwModule");
  android::defaultServiceManager((android *)&v7);
  v1 = v7;
  v2 = *(void (__fastcall **)(int, char *, android::ProcessState **, signed int))(*(_DWORD *)v7 + 24);
  android::String16::String16((android::String16 *)&v8, "SurfaceFlinger");
  v3 = operator new(0x1520u);
  android::SurfaceFlingerEx::SurfaceFlingerEx((android::SurfaceFlingerEx *)v3);
  v9 = (android::ProcessState *)(v3 + 4);
  android::RefBase::incStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)(v3 + 4) - 12) + v3 + 4), &v9);
  v2(v1, &v8, &v9, 1);
  if ( v9 )
    android::RefBase::decStrong((android::ProcessState *)((char *)v9 + *(_DWORD *)(*(_DWORD *)v9 - 12)), &v9);
  android::String16::~String16((android::String16 *)&v8);
  android::ProcessState::self((android::ProcessState *)&v9);
  v4 = (android::IPCThreadState *)android::ProcessState::startThreadPool(v9);
  if ( v9 )
    v4 = (android::IPCThreadState *)android::RefBase::decStrong(
                                      (android::ProcessState *)((char *)v9 + *(_DWORD *)(*(_DWORD *)v9 - 12)),
                                      &v9);
  v5 = (android::IPCThreadState *)android::IPCThreadState::self(v4);
  result = android::IPCThreadState::joinThreadPool(v5, 1);
  if ( v7 )
    result = android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)(*(_DWORD *)v7 - 12) + v7), &v7);
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00030FD4) --------------------------------------------------------
int __fastcall android::launchHuawerMediaService(android *this, void *a2)
{
  android::SurfaceFlingerEx *v2; // r0@1

  v2 = (android::SurfaceFlingerEx *)_android_log_print(4, 0, "launch SurfaceFlingerEx.cpp comes...");
  android::SurfaceFlingerEx::initHwModule(v2);
  return j_j___android_log_print(4, 0, "SurfaceFlingerEx.cpp launched...");
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00031000) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::getScreenWidthAndHeight(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  int result; // r0@1
  int v3; // r5@1
  int v4; // [sp+8h] [bp-B0h]@2
  int v5; // [sp+Ch] [bp-ACh]@3

  v1 = this;
  result = open("/dev/graphics/fb0", 0);
  v3 = result;
  if ( result >= 0 )
  {
    if ( !ioctl(result, 0x4600u, &v4) )
    {
      *((_DWORD *)v1 + 1336) = v4;
      *((_DWORD *)v1 + 1337) = v5;
      _android_log_print(3, 0, "APS:NSD:SurfaceFlingerEx:getScreenWidthAndHeight w=%d, h =%d");
    }
    result = close(v3);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00031050) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::checkIfSupportCursorNsd(android::SurfaceFlingerEx *this)
{
  return (unsigned __int8)*((_DWORD *)this + 1335) >> 8;
}

//----- (0003105C) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::checkIfSupportNsd(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r5@1
  int result; // r0@2
  int v3; // [sp+0h] [bp-70h]@1
  int v4; // [sp+5Ch] [bp-14h]@1

  v1 = this;
  v4 = v0;
  property_get("sys.aps.support", &v3, "0");
  *((_DWORD *)v1 + 1335) = atoi((const char *)&v3);
  if ( (*(int (__fastcall **)(android::SurfaceFlingerEx *))(*(_DWORD *)v1 + 188))(v1)
    || (result = android::SurfaceFlingerEx::checkIfSupportCursorNsd(v1)) != 0 )
  {
    result = 1;
  }
  if ( v4 != v0 )
    _stack_chk_fail(result);
  return result;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (000310BC) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::checkIfSupportNsd(int a1)
{
  return android::SurfaceFlingerEx::checkIfSupportNsd((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (000310C4) --------------------------------------------------------
unsigned int __fastcall android::SurfaceFlingerEx::checkIfSupportDuplicate(android::SurfaceFlingerEx *this)
{
  unsigned int result; // r0@1
  int v2; // [sp+0h] [bp-70h]@1
  int v3; // [sp+5Ch] [bp-14h]@1

  v3 = v0;
  property_get("sys.aps.support", &v2, "0");
  result = ((unsigned int)atoi((const char *)&v2) >> 3) & 1;
  if ( v3 != v0 )
    _stack_chk_fail(result);
  return result;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00031108) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::bootFinished(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  android::RefBase *v2; // r0@7
  android::RefBase *v3; // r9@7
  android::RefBase *v4; // r0@9
  unsigned int v5; // r2@12
  android::RefBase *v6; // r0@14
  android::RefBase *v7; // r9@14
  android::RefBase *v8; // r0@16
  int result; // r0@19
  int v10; // [sp+0h] [bp-80h]@1
  int v11; // [sp+5Ch] [bp-24h]@1

  v1 = this;
  v11 = v0;
  property_set("sys.aps.version", "3.0.5-3.0.6");
  property_get("sys.aps.support", &v10, "0");
  if ( !atoi((const char *)&v10) )
    property_set("sys.aps.support", "2555");
  sub_1CFB0((int)v1);
  if ( (*(int (__fastcall **)(android::SurfaceFlingerEx *))(*(_DWORD *)v1 + 180))(v1) )
    (*(void (__fastcall **)(android::SurfaceFlingerEx *))(*(_DWORD *)v1 + 184))(v1);
  if ( android::SurfaceFlingerEx::checkIfSupportDuplicate(v1) && !*((_DWORD *)v1 + 1334) )
  {
    v2 = (android::RefBase *)getHwApsUtils();
    v3 = v2;
    if ( v2 )
      android::RefBase::incStrong(v2, (char *)v1 + 5336);
    v4 = (android::RefBase *)*((_DWORD *)v1 + 1334);
    if ( v4 )
      android::RefBase::decStrong(v4, (char *)v1 + 5336);
    *((_DWORD *)v1 + 1334) = v3;
    android::SurfaceFlingerEx::getScreenWidthAndHeight(v1);
  }
  property_get("sys.aps.support", &v10, "0");
  v5 = ((unsigned int)atoi((const char *)&v10) >> 11) & 1;
  *((_BYTE *)v1 + 5364) = v5;
  if ( v5 && !*((_DWORD *)v1 + 1334) )
  {
    v6 = (android::RefBase *)getHwApsUtils();
    v7 = v6;
    if ( v6 )
      android::RefBase::incStrong(v6, (char *)v1 + 5336);
    v8 = (android::RefBase *)*((_DWORD *)v1 + 1334);
    if ( v8 )
      android::RefBase::decStrong(v8, (char *)v1 + 5336);
    *((_DWORD *)v1 + 1334) = v7;
  }
  result = v11;
  if ( v11 != v0 )
    _stack_chk_fail(v11);
  return result;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (0003122C) --------------------------------------------------------
int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::bootFinished(int a1)
{
  return android::SurfaceFlingerEx::bootFinished((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (00031234) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdCursorCmd(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  int result; // r0@1
  int (__fastcall *v3)(android::SurfaceFlingerEx *); // r2@2

  v1 = this;
  _android_log_print(3, 0, "APS:NSD:SurfaceFlingerEx:handleNsdCursorCmd");
  result = *((_DWORD *)v1 + 1333);
  if ( *(_BYTE *)(result + 20) )
  {
    *(_BYTE *)(result + 20) = 0;
    v3 = *(int (__fastcall **)(android::SurfaceFlingerEx *))(*(_DWORD *)v1 + 172);
    word_4506C = 4;
    result = v3(v1);
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 4506C: using guessed type __int16 word_4506C;

//----- (00031278) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::nsdOnTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  android::SurfaceFlingerEx *v5; // r5@1
  android::Nsd *v6; // r0@2
  signed int v7; // r4@3

  v5 = this;
  if ( a2 - 2000 > 4 )
  {
    v7 = -74;
  }
  else
  {
    v6 = (android::Nsd *)*((_DWORD *)this + 1333);
    if ( !v6 || (v7 = android::Nsd::onTransact(v6, a2, a3, a4, a5)) != 0 )
      v7 = 0;
    else
      android::SurfaceFlingerEx::handleNsdCursorCmd(v5);
  }
  return v7;
}

//----- (000312AE) --------------------------------------------------------
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::nsdOnTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::SurfaceFlingerEx::nsdOnTransact((android::SurfaceFlingerEx *)(a1 - 16), a2, a3, a4, a5);
}

//----- (000312B8) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdDrawLauncher(__int64 this)
{
  int v1; // r4@1
  __int32 v6; // r6@1
  int v7; // r2@1
  android::Nsd *v8; // r0@2
  int v9; // r4@2
  int v10; // r1@2
  signed int v11; // r0@3
  __int64 v13; // [sp+0h] [bp-18h]@1

  v13 = this;
  v1 = this;
  __asm { VMOV.I32        D16, #0 }
  v6 = HIDWORD(this);
  __asm { VSTR            D16, [SP,#0x18+var_18] }
  sub_30AA4((int)"handleNsdDrawLauncher", SHIDWORD(this));
  if ( android::Nsd::nsd_is_exit_if_error(*(android::Nsd **)(v1 + 5332)) )
  {
    *(_DWORD *)(v1 + 5340) &= 0xFFFFFDFF;
    v8 = *(android::Nsd **)(v1 + 5332);
    v9 = 0;
    android::Nsd::nsd_exit(v8);
    word_4506C = 0;
    _android_log_print(6, 0, "NSDSF : release launcher nsd in handleNsdDrawLayer");
  }
  else
  {
    v11 = android::Nsd::doDraw(*(android::Nsd **)(v1 + 5332), v6, v7);
    v9 = v11 - 1 + ((unsigned int)(v11 - 1) <= 0) - (v11 - 1);
  }
  sub_30B7C(&v13, v10);
  return v9;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 4506C: using guessed type __int16 word_4506C;

//----- (00031330) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdDrawCursor(__int64 this)
{
  int v1; // r4@1
  int v6; // r1@1
  __int64 v8; // [sp+0h] [bp-10h]@1

  v8 = this;
  v1 = this;
  __asm
  {
    VMOV.I32        D16, #0
    VSTR            D16, [SP,#0x10+var_10]
  }
  sub_30AA4((int)"handleNsdDrawCursor", SHIDWORD(this));
  if ( word_4506C == 4 )
    android::Nsd::doCursorDraw(*(android::Nsd **)(v1 + 5332));
  sub_30B7C(&v8, v6);
  return 0;
}
// 4506C: using guessed type __int16 word_4506C;

//----- (00031370) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::handleNsdRefreshTime(android::SurfaceFlingerEx *this, __int32 a2)
{
  return j_j_j__ZN7android3Nsd14setRefreshTimeEl(*((android::Nsd **)this + 1333), a2);
}

//----- (0003137C) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::addBlackList(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r5@1
  int v2; // r7@2
  int i; // r4@2
  int v4; // r4@6
  int v5; // r5@6
  pthread_mutex_t **result; // r0@7
  android::SurfaceFlingerEx *v7; // [sp+0h] [bp-80h]@1
  char v8; // [sp+4h] [bp-7Ch]@6
  char v9; // [sp+8h] [bp-78h]@1
  int v10; // [sp+64h] [bp-1Ch]@1

  v1 = this;
  v7 = (android::SurfaceFlingerEx *)((char *)this + 5384);
  v10 = v0;
  sub_30B72((pthread_mutex_t *)((char *)this + 5384));
  property_get("debug.aps.process.name", &v9, &unk_3B250);
  if ( v9 )
  {
    v2 = *((_DWORD *)v1 + 1348);
    for ( i = *(_DWORD *)(v2 + 8); i != v2; i = *(_DWORD *)(i + 8) )
    {
      if ( !strcmp(&v9, *(const char **)i) )
        goto LABEL_7;
    }
    android::String8::String8((android::String8 *)&v8, &v9);
    v4 = *((_DWORD *)v1 + 1348);
    v5 = operator new(0xCu);
    android::String8::String8((android::String8 *)v5, (const android::String8 *)&v8);
    *(_DWORD *)(v5 + 8) = v4;
    *(_DWORD *)(v5 + 4) = *(_DWORD *)(v4 + 4);
    *(_DWORD *)(*(_DWORD *)(v4 + 4) + 8) = v5;
    *(_DWORD *)(v4 + 4) = v5;
    android::String8::~String8((android::String8 *)&v8);
  }
LABEL_7:
  result = sub_30B64((pthread_mutex_t **)&v7);
  if ( v10 != v0 )
    _stack_chk_fail(result);
  return result;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00031424) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::isBlackPackage(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r6@1
  int v2; // r6@2
  int i; // r4@2
  signed int v4; // r6@6
  signed int result; // r0@8
  android::SurfaceFlingerEx *v6; // [sp+4h] [bp-4h]@1
  char v7; // [sp+8h] [bp+0h]@1
  int v8; // [sp+64h] [bp+5Ch]@1

  v1 = this;
  v6 = (android::SurfaceFlingerEx *)((char *)this + 5384);
  v8 = v0;
  sub_30B72((pthread_mutex_t *)((char *)this + 5384));
  property_get("debug.aps.process.name", &v7, &unk_3B250);
  if ( v7 )
  {
    v2 = *((_DWORD *)v1 + 1348);
    for ( i = *(_DWORD *)(v2 + 8); i != v2; i = *(_DWORD *)(i + 8) )
    {
      if ( !strcmp(&v7, *(const char **)i) )
        goto LABEL_7;
    }
    v4 = 0;
  }
  else
  {
LABEL_7:
    v4 = 1;
  }
  sub_30B64((pthread_mutex_t **)&v6);
  result = v4;
  if ( v8 != v0 )
    _stack_chk_fail(v4);
  return result;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (0003149C) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::setSdrEnterFlag(android::SurfaceFlingerEx *this, int a2)
{
  const char *v2; // r0@2
  const char *v3; // r1@2

  if ( a2 )
  {
    v2 = "sys.sdr.enter";
    v3 = "1";
  }
  else
  {
    v2 = "sys.sdr.enter";
    v3 = "0";
  }
  property_set(v2, v3);
  return j_j___android_log_print(3, 0, "APS: SDR: special: sdr enter(1) or exit(0). %d");
}
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);

//----- (000314E0) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::restoreSdr(android::SurfaceFlingerEx *this, float _R1, int a3)
{
  int v3; // r5@1
  android::SurfaceFlingerEx *v4; // r4@1
  int v9; // r7@1
  int *v10; // r8@2
  const android::String8 *v11; // r0@2
  int v12; // r7@3
  int v13; // r0@13
  int v15; // r1@13
  char *s1; // [sp+44h] [bp-74h]@1
  int v21; // [sp+48h] [bp-70h]@22
  int v22; // [sp+4Ch] [bp-6Ch]@22
  int v23; // [sp+50h] [bp-68h]@22
  int v24; // [sp+54h] [bp-64h]@22
  float v25; // [sp+58h] [bp-60h]@3
  float v29; // [sp+68h] [bp-50h]@13

  v3 = a3;
  v4 = this;
  __asm { VMOV            S16, R1 }
  v9 = sub_2353C((int)this, 0);
  android::String8::String8((android::String8 *)&s1, "unknown");
  if ( *(_DWORD *)(v9 + 8) )
  {
    v10 = *(int **)(v9 + 4);
    v11 = (const android::String8 *)sub_17C58(*v10);
    android::String8::setTo((android::String8 *)&s1, v11);
    if ( !strcmp(s1, "SurfaceView") )
    {
      v12 = *((_DWORD *)v4 + 49);
      sub_2A004((int)&v25, *((_DWORD *)v4 + 49));
      __asm
      {
        VLDR            S23, [SP,#0xB8+var_60]
        VLDR            S21, [SP,#0xB8+var_5C]
        VLDR            S20, [SP,#0xB8+var_58]
        VLDR            S18, [SP,#0xB8+var_54]
      }
      if ( v3 )
      {
        if ( v3 == 1 )
        {
          __asm
          {
            VDIV.F32        S22, S23, S16
            VDIV.F32        S17, S21, S16
            VDIV.F32        S19, S20, S16
            VDIV.F32        S16, S18, S16
          }
        }
        else
        {
          if ( v3 == 2 )
          {
            __asm
            {
              VDIV.F32        S3, S20, S16
              VDIV.F32        S5, S23, S16
              VDIV.F32        S17, S21, S16
              VDIV.F32        S16, S18, S16
              VSUB.F32        S4, S20, S3
              VADD.F32        S22, S4, S5
            }
          }
          else
          {
            if ( v3 != 3 )
            {
              _android_log_print(6, 0, "APS: SDR: sf: warning! [orient:%d]", v3);
              return android::String8::~String8((android::String8 *)&s1);
            }
            __asm
            {
              VDIV.F32        S22, S20, S16
              VDIV.F32        S17, S18, S16
              VDIV.F32        S0, S23, S16
              VDIV.F32        S2, S21, S16
              VMOV.F32        S16, S18
              VSUB.F32        S15, S20, S22
              VSUB.F32        S1, S18, S17
              VADD.F32        S22, S15, S0
              VADD.F32        S17, S1, S2
            }
          }
          __asm { VMOV.F32        S19, S20 }
        }
      }
      else
      {
        __asm
        {
          VDIV.F32        S6, S18, S16
          VDIV.F32        S8, S21, S16
          VDIV.F32        S22, S23, S16
          VDIV.F32        S19, S20, S16
          VMOV.F32        S16, S18
          VSUB.F32        S7, S18, S6
          VADD.F32        S17, S7, S8
        }
      }
      __asm
      {
        VCVTR.S32.F32   S9, S22
        VCVTR.S32.F32   S10, S17
        VCVTR.S32.F32   S11, S19
        VCVTR.S32.F32   S12, S16
        VSTR            S9, [SP,#0xB8+var_50]
        VSTR            S10, [SP,#0xB8+var_4C]
        VSTR            S11, [SP,#0xB8+var_48]
        VSTR            S12, [SP,#0xB8+var_44]
      }
      v13 = *v10;
      _R8 = (int)v4 + 5376;
      sub_197B0(v13, (int)&v29);
      v15 = *((_BYTE *)v4 + 5365);
      if ( *((_BYTE *)v4 + 5365) )
      {
        *((_BYTE *)v4 + 5365) = 0;
        __asm
        {
          VSTR            S22, [R5]
          VSTR            S17, [R5,#4]
          VSTR            S19, [R8]
          VSTR            S16, [R8,#4]
        }
        sub_2A020(v12, *((_DWORD *)v4 + 1342), *((_DWORD *)v4 + 1343), *((_DWORD *)v4 + 1344), *((_DWORD *)v4 + 1345));
        android::SurfaceFlingerEx::setSdrEnterFlag(v4, 1);
      }
      else
      {
        __asm
        {
          VLDR            S14, [R8]
          VCMP.F32        S20, S14
          VMRS            APSR_nzcv, FPSCR
        }
        if ( !_ZF )
          goto LABEL_27;
        _LR = (int)v4 + 5376;
        __asm
        {
          VLDR            S15, [LR,#4]
          VCMP.F32        S18, S15
          VMRS            APSR_nzcv, FPSCR
        }
        if ( !_ZF )
          goto LABEL_27;
        _R3 = (int)v4 + 5344;
        __asm
        {
          VLDR            S0, [R3,#0x18]
          VCMP.F32        S23, S0
          VMRS            APSR_nzcv, FPSCR
        }
        if ( !_ZF )
          goto LABEL_27;
        _R4 = (int)v4 + 5344;
        __asm
        {
          VLDR            S13, [R4,#0x1C]
          VCMP.F32        S21, S13
          VMRS            APSR_nzcv, FPSCR
        }
        if ( _ZF )
        {
          __asm
          {
            VCVT.F64.F32    D16, S23
            VCVT.F64.F32    D17, S21
            VCVT.F64.F32    D18, S20
            VCVT.F64.F32    D19, S18
            VCVT.F64.F32    D20, S0
            VCVT.F64.F32    D21, S13
            VCVT.F64.F32    D22, S14
            VSTR            D16, [SP,#0xB8+var_B8]
            VCVT.F64.F32    D23, S15
            VSTR            D17, [SP,#0xB8+var_B0]
            VSTR            D18, [SP,#0xB8+var_A8]
            VSTR            D19, [SP,#0xB8+var_A0]
            VSTR            D20, [SP,#0xB8+var_98]
            VSTR            D21, [SP,#0xB8+var_90]
            VSTR            D22, [SP,#0xB8+var_88]
            VSTR            D23, [SP,#0xB8+var_80]
          }
          _android_log_print(3, v15, "APS: SDR: sf: warning! [%f,%f,%f,%f][%f,%f,%f,%f]");
        }
        else
        {
LABEL_27:
          __asm
          {
            VSTR            S16, [SP,#0xB8+var_64]
            VSTR            S22, [SP,#0xB8+var_70]
            VSTR            S17, [SP,#0xB8+var_6C]
            VSTR            S19, [SP,#0xB8+var_68]
          }
          sub_2A020(v12, v21, v22, v23, v24);
        }
      }
    }
  }
  return android::String8::~String8((android::String8 *)&s1);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00031720) --------------------------------------------------------
int __fastcall android::SurfaceFlingerEx::resetSdr(int result, float _R1, int a3)
{
  android::SurfaceFlingerEx *v3; // r5@1
  int v4; // r4@1
  int v5; // r7@1
  int v10; // r6@1
  int v11; // r1@2
  const char *v14; // r2@15
  float v15; // [sp+8h] [bp-60h]@2
  int v19; // [sp+18h] [bp-50h]@2
  int v20; // [sp+1Ch] [bp-4Ch]@14
  int v21; // [sp+20h] [bp-48h]@12
  int v22; // [sp+24h] [bp-44h]@14
  int v23; // [sp+28h] [bp-40h]@16
  int v24; // [sp+2Ch] [bp-3Ch]@16
  int v25; // [sp+30h] [bp-38h]@16
  int v26; // [sp+34h] [bp-34h]@16

  v3 = (android::SurfaceFlingerEx *)result;
  v4 = a3;
  v5 = *(_BYTE *)(result + 5365);
  __asm { VMOV            S16, R1 }
  v10 = *(_DWORD *)(result + 196);
  if ( *(_BYTE *)(result + 5365) )
    return result;
  v11 = *(_DWORD *)(result + 196);
  *(_BYTE *)(result + 5365) = 1;
  sub_2A004((int)&v15, v11);
  __asm
  {
    VLDR            S20, [SP,#0x68+var_60]
    VLDR            S18, [SP,#0x68+var_5C]
    VLDR            S17, [SP,#0x68+var_58]
    VLDR            S19, [SP,#0x68+var_54]
  }
  sub_2A034((int)&v19, v10);
  if ( v4 )
  {
    if ( v4 == 1 )
    {
      __asm
      {
        VMUL.F32        S14, S20, S16
        VMUL.F32        S15, S18, S16
        VMUL.F32        S17, S17, S16
      }
    }
    else
    {
      if ( v4 != 2 )
      {
        if ( v4 != 3 )
          return j_j___android_log_print(6, v5, "APS: SDR: sf: warning!!! [orient:%d]");
        __asm
        {
          VMOV.F32        S14, S17
          VMOV.F32        S15, S19
          VMLS.F32        S14, S17, S16
          VMLS.F32        S15, S18, S16
        }
        goto LABEL_12;
      }
      __asm
      {
        VMOV.F32        S14, S17
        VMUL.F32        S15, S18, S16
        VMLS.F32        S14, S17, S16
      }
    }
    __asm { VMUL.F32        S19, S19, S16 }
  }
  else
  {
    __asm
    {
      VMOV.F32        S15, S19
      VMUL.F32        S14, S20, S16
      VMUL.F32        S17, S17, S16
      VMLS.F32        S15, S18, S16
    }
  }
LABEL_12:
  __asm { VSUB.F32        S12, S17, S14 }
  _R4 = v21 - v19;
  __asm
  {
    VMOV            S13, R4
    VCVT.F32.S32    S0, S13
    VCMPE.F32       S12, S0
    VMRS            APSR_nzcv, FPSCR
  }
  if ( !((unsigned __int8)(_NF ^ _VF) | _ZF) )
    goto LABEL_20;
  __asm { VSUB.F32        S1, S19, S15 }
  _R2 = v22 - v20;
  __asm
  {
    VMOV            S2, R2
    VCVT.F32.S32    S3, S2
    VCMPE.F32       S1, S3
    VMRS            APSR_nzcv, FPSCR
  }
  if ( (unsigned __int8)(_NF ^ _VF) | _ZF )
  {
    __asm
    {
      VSTR            S19, [SP,#0x68+var_34]
      VSTR            S14, [SP,#0x68+var_40]
      VSTR            S15, [SP,#0x68+var_3C]
      VSTR            S17, [SP,#0x68+var_38]
    }
    sub_2A020(v10, v23, v24, v25, v26);
    v14 = "APS: SDR: sf: error! it should not be here";
  }
  else
  {
LABEL_20:
    v14 = "APS: SDR: sf: reset sdr origin!";
  }
  _android_log_print(3, 0, v14);
  return j_j_j__ZN7android16SurfaceFlingerEx15setSdrEnterFlagEb(v3, 0);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00031864) --------------------------------------------------------
unsigned int **__fastcall android::sp<android::DisplayDevice const>::~sp(unsigned int **a1)
{
  unsigned int **v1; // r5@1
  unsigned int *v2; // r4@1
  unsigned int v3; // r3@3

  v1 = a1;
  v2 = *a1;
  if ( *a1 )
  {
    __dmb();
    do
      v3 = __ldrex(v2);
    while ( __strex(v3 - 1, v2) );
    if ( v3 == 1 )
    {
      sub_131F4((int)v2);
      operator delete(v2);
    }
  }
  return v1;
}

//----- (00031892) --------------------------------------------------------
unsigned int **__fastcall android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(unsigned int **result, unsigned int **a2)
{
  unsigned int *v2; // r3@1
  unsigned int v3; // r2@3

  v2 = *a2;
  *result = *a2;
  if ( v2 )
  {
    __dmb();
    do
      v3 = __ldrex(v2);
    while ( __strex(v3 + 1, v2) );
  }
  return result;
}

//----- (000318AC) --------------------------------------------------------
unsigned int **__fastcall android::SurfaceFlingerEx::handleSdrSetHwComposer(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  int v2; // r7@1
  int v3; // r0@1
  unsigned int **v4; // r5@5
  float v5; // r0@5
  unsigned int **result; // r0@6
  float v7; // r0@8
  int v8; // [sp+4h] [bp-7Ch]@5
  char v9; // [sp+8h] [bp-78h]@1
  int v10; // [sp+64h] [bp-1Ch]@1

  v1 = this;
  v10 = v0;
  property_get("sys.sdr.enter", &v9, "0");
  v2 = atoi(&v9);
  v3 = *((_DWORD *)v1 + 1334);
  if ( v3
    && ((*(int (**)(void))(*(_DWORD *)v3 + 92))() && v2 == 1 || (*(int (**)(void))(**((_DWORD **)v1 + 1334) + 84))()) )
  {
    v4 = (unsigned int **)&v8;
    android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(
      (unsigned int **)&v8,
      (unsigned int **)(*((_DWORD *)v1 + 90) + 8));
    v5 = COERCE_FLOAT((*(int (**)(void))(**((_DWORD **)v1 + 1334) + 108))());
    android::SurfaceFlingerEx::restoreSdr(v1, v5, *(_DWORD *)(v8 + 164));
  }
  else
  {
    result = (unsigned int **)*((_DWORD *)v1 + 1334);
    if ( !result )
      goto LABEL_10;
    result = (unsigned int **)((int (*)(void))(*result)[23])();
    if ( result )
      goto LABEL_10;
    v4 = (unsigned int **)&v8;
    android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(
      (unsigned int **)&v8,
      (unsigned int **)(*((_DWORD *)v1 + 90) + 8));
    v7 = COERCE_FLOAT((*(int (**)(void))(**((_DWORD **)v1 + 1334) + 108))());
    android::SurfaceFlingerEx::resetSdr(v1, v7, *(_DWORD *)(v8 + 164));
  }
  result = android::sp<android::DisplayDevice const>::~sp(v4);
LABEL_10:
  if ( v10 != v0 )
    _stack_chk_fail(result);
  return result;
}
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00031978) --------------------------------------------------------
unsigned int **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleSdrSetHwComposer(int a1)
{
  return android::SurfaceFlingerEx::handleSdrSetHwComposer((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (00031980) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::getVisibleLayerInfo(android::SurfaceFlingerEx *this, android::Parcel *a2)
{
  android::SurfaceFlingerEx *v2; // r5@1
  android::Parcel *v3; // r4@1
  int v4; // r0@1
  int v5; // r7@1
  int v6; // r10@1
  int i; // r3@1
  int v8; // r6@3
  int v10; // r5@8
  int v11; // r8@10
  _DWORD *v13; // r0@10
  int v14; // r0@10
  int v15; // r0@10
  android::SurfaceFlingerEx *v28; // [sp+18h] [bp-30h]@1
  int v29; // [sp+1Ch] [bp-2Ch]@1

  v2 = this;
  v3 = a2;
  v28 = (android::SurfaceFlingerEx *)((char *)this + 5328);
  sub_30B72((pthread_mutex_t *)this + 222);
  sub_17760((unsigned int **)&v29, (int)v2);
  v4 = sub_13540(v29);
  v5 = *(_DWORD *)(v4 + 8);
  v6 = v4;
  for ( i = 0; i != v5; ++i )
  {
    v8 = *(_DWORD *)(*(_DWORD *)(v4 + 4) + 4 * i);
    if ( !v8 )
      goto LABEL_6;
  }
  v8 = *(_DWORD *)(v4 + 8);
LABEL_6:
  android::Parcel::writeInt32(v3, v8);
  if ( v8 )
  {
    v10 = 0;
    while ( v10 != v5 )
    {
      v11 = *(_DWORD *)(v6 + 4);
      _R6 = *(_DWORD *)(v11 + 4 * v10);
      v13 = (_DWORD *)sub_17C58(*(_DWORD *)(v11 + 4 * v10));
      _android_log_print(
        3,
        0,
        "APS:NSD:SurfaceFlingerEx:%s: layer name = %s , count = %d , i = %d",
        "virtual void android::SurfaceFlingerEx::getVisibleLayerInfo(android::Parcel*)",
        *v13,
        v5,
        v10);
      v14 = *(_DWORD *)(v11 + 4 * v10++);
      v15 = (*(int (**)(void))(*(_DWORD *)v14 + 36))();
      android::Parcel::writeInt32(v3, v15);
      android::Parcel::writeInt32(v3, *(_DWORD *)(_R6 + 312));
      _R0 = sub_27E30(_R6 + 328);
      __asm
      {
        VMOV            S15, R0
        VCVTR.S32.F32   S0, S15
        VMOV            R1, S0
      }
      android::Parcel::writeInt32(v3, _R1);
      _R0 = sub_27E34(_R6 + 328);
      __asm
      {
        VMOV            S1, R0
        VCVTR.S32.F32   S2, S1
        VMOV            R1, S2
      }
      android::Parcel::writeInt32(v3, _R1);
      _R0 = sub_27E30(_R6 + 328);
      __asm
      {
        VLDR            S3, [R6,#0x108]
        VMOV            S14, R0
        VCVT.F32.U32    S4, S3
        VADD.F32        S5, S14, S4
        VCVTR.S32.F32   S6, S5
        VMOV            R1, S6
      }
      android::Parcel::writeInt32(v3, _R1);
      _R0 = sub_27E34(_R6 + 328);
      __asm
      {
        VLDR            S7, [R6,#0x10C]
        VMOV            S9, R0
        VCVT.F32.U32    S8, S7
        VADD.F32        S10, S9, S8
        VCVTR.S32.F32   S11, S10
        VMOV            R1, S11
      }
      android::Parcel::writeInt32(v3, _R1);
    }
  }
  android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v29);
  return sub_30B64((pthread_mutex_t **)&v28);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00031AB8) --------------------------------------------------------
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::getVisibleLayerInfo(int a1, android::Parcel *a2)
{
  return android::SurfaceFlingerEx::getVisibleLayerInfo((android::SurfaceFlingerEx *)(a1 - 16), a2);
}

//----- (00031AC0) --------------------------------------------------------
void *__fastcall android::sp<android::GraphicBuffer>::~sp(void *a1)
{
  void *v1; // r4@1
  android::RefBase *v2; // r0@1

  v1 = a1;
  v2 = *(android::RefBase **)a1;
  if ( v2 )
    android::RefBase::decStrong(v2, v1);
  return v1;
}

//----- (00031AD4) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::isSdrCase(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r5@1
  signed int v2; // r7@1
  signed int result; // r0@4
  const char *v4; // r2@7
  int v5; // r4@8
  int v6; // r9@13
  int v7; // r4@14
  int v8; // r6@14
  int v9; // r10@16
  const char **v10; // r0@16
  const char **v11; // r0@17
  int v12; // r4@19
  int v13; // r9@19
  unsigned int v14; // r6@19
  int v15; // r3@19
  int v16; // r1@19
  int v17; // r2@19
  signed int v18; // r9@20
  int v19; // r11@20
  int v20; // r10@23
  int v21; // r8@23
  int v22; // r0@23
  int v23; // r3@23
  const char **v24; // r0@24
  char *v25; // r6@24
  int v26; // r0@28
  const char *v27; // r2@30
  int v28; // r2@41
  int v29; // r1@45
  int v30; // r2@45
  int v31; // r3@45
  int v32; // r1@47
  int v33; // r6@50
  int v34; // r6@52
  int v35; // r11@53
  int v36; // r1@53
  int v37; // r7@53
  int v38; // r1@53
  int v39; // r2@53
  int v40; // r3@53
  int v41; // r6@53
  int v42; // r3@53
  int v43; // r5@53
  _DWORD *v44; // r0@53
  int v45; // r2@54
  int v46; // r9@54
  android *v47; // r10@54
  unsigned int v48; // r1@54
  int v49; // r8@56
  int v50; // r0@58
  int v51; // r0@61
  int v52; // r7@62
  int v53; // r5@62
  int v54; // r0@62
  int v55; // ST54_4@63
  void (__fastcall *v56)(int, int, int, int); // ST28_4@63
  int v57; // ST50_4@63
  int v58; // ST34_4@63
  int v59; // [sp+1Ch] [bp-ECh]@20
  signed int v60; // [sp+20h] [bp-E8h]@6
  int *v61; // [sp+24h] [bp-E4h]@20
  int v62; // [sp+28h] [bp-E0h]@20
  int v63; // [sp+2Ch] [bp-DCh]@19
  int v64; // [sp+30h] [bp-D8h]@19
  android::SurfaceFlingerEx *v65; // [sp+5Ch] [bp-ACh]@1
  int v66; // [sp+60h] [bp-A8h]@19
  char *s1; // [sp+64h] [bp-A4h]@19
  int v68; // [sp+68h] [bp-A0h]@19
  void *v69; // [sp+6Ch] [bp-9Ch]@63
  _DWORD *v70; // [sp+70h] [bp-98h]@19
  int v71; // [sp+74h] [bp-94h]@19
  int v72; // [sp+78h] [bp-90h]@19
  int v73; // [sp+7Ch] [bp-8Ch]@19
  char v74; // [sp+80h] [bp-88h]@37
  int v75; // [sp+DCh] [bp-2Ch]@1

  v1 = this;
  v65 = (android::SurfaceFlingerEx *)((char *)this + 28);
  v75 = v0;
  sub_30B72((pthread_mutex_t *)((char *)this + 28));
  v2 = *((_BYTE *)v1 + 5364);
  if ( !*((_BYTE *)v1 + 5364) )
    goto LABEL_4;
  if ( !*((_DWORD *)v1 + 1334) )
  {
    v2 = 0;
    goto LABEL_4;
  }
  v60 = android::SurfaceFlingerEx::isBlackPackage(v1);
  if ( v60 )
  {
    v4 = "APS: SDR: sf: the package is in black list!";
LABEL_12:
    _android_log_print(3, 0, v4);
    v2 = 0;
    goto LABEL_4;
  }
  v5 = 0;
  v6 = *((_DWORD *)v1 + 91);
  while ( v5 != v6 )
  {
    if ( !strcmp(*(const char **)(*(_DWORD *)(*((_DWORD *)v1 + 90) + 12 * v5 + 8) + 128), "ScreenCapture") )
    {
LABEL_11:
      v4 = "APS: SDR: Screen Recoder is Running";
      goto LABEL_12;
    }
    ++v5;
  }
  v7 = 0;
  v8 = *((_DWORD *)v1 + 64);
  while ( v7 != v8 )
  {
    v9 = *((_DWORD *)v1 + 63);
    v10 = (const char **)sub_17C58(*(_DWORD *)(v9 + 4 * v7));
    if ( !strcmp(*v10, "ScreenRecoderTimer") )
      goto LABEL_11;
    v11 = (const char **)sub_17C58(*(_DWORD *)(v9 + 4 * v7));
    if ( !strcmp(*v11, "ScreenRecorder") )
      goto LABEL_11;
    ++v7;
  }
  sub_17760((unsigned int **)&v66, (int)v1);
  v12 = 0;
  v63 = sub_13540(v66);
  v64 = *(_DWORD *)(v63 + 8);
  android::String8::String8((android::String8 *)&s1);
  v68 = 0;
  v13 = *((_DWORD *)v1 + 49);
  v14 = *(_DWORD *)(v66 + 76);
  sub_2AAEC((unsigned int)&v70, *((_DWORD *)v1 + 49), *(_DWORD *)(v66 + 76));
  sub_2AAFC((unsigned int)&v72, v13, v14);
  v16 = v73;
  v17 = v71;
  if ( v71 == v73 )
    goto LABEL_32;
  v18 = 0;
  v19 = 0;
  v62 = 0;
  v59 = 0;
  v61 = (int *)((char *)v1 + 5336);
  while ( 1 )
  {
    if ( v12 == v64 || v71 == v73 )
    {
      property_get("sys.sdr.composeDisable", &v74, "0");
      if ( v18 && !v62 && atoi(&v74) != 1 )
      {
        _android_log_print(3, 0, "APS: SDR: sf: sf check if sdr can be run. [result:true]");
        v60 = v2;
      }
      goto LABEL_32;
    }
    v20 = 4 * v12;
    v21 = *(_DWORD *)(v63 + 4);
    v22 = *(_DWORD *)(v21 + 4 * v12);
    v23 = v21 + 4 * v12;
    if ( v22 )
    {
      v24 = (const char **)sub_17C58(v22);
      android::String8::setTo((android::String8 *)&s1, *v24);
      v25 = s1;
      if ( strcmp(s1, "StatusBar") )
      {
        if ( strcmp(v25, "NavigationBar") )
        {
          if ( strcmp(v25, "SurfaceView") )
          {
            if ( strcmp(v25, "KnucklePointerLocationView") )
            {
              v26 = *(_DWORD *)(v21 + v20);
              if ( *(_DWORD *)(v26 + 120) || *(_DWORD *)(v26 + 124) )
              {
                v27 = "APS: SDR: sf: there is special layer";
LABEL_31:
                _android_log_print(3, 0, v27);
                goto LABEL_32;
              }
            }
          }
        }
      }
      if ( !strcmp(v25, "SurfaceView") )
        break;
    }
LABEL_52:
    ++v12;
    v34 = *v70;
    (*(void (__cdecl **)(_DWORD *, int, _DWORD, int))(v34 + 96))(v70, ++v71, *(_DWORD *)(v34 + 96), v23);
  }
  if ( v59 || v19 )
  {
    v27 = "APS: SDR: sf: the game has more than one surfeceview";
    goto LABEL_31;
  }
  if ( (*(int (__cdecl **)(_DWORD *, _DWORD, int, int))(*v70 + 84))(v70, *v70, v28, v59) != 256
    || (*(int (__cdecl **)(_DWORD *, int, _DWORD, _DWORD))(*v70 + 88))(v70, v29, *v70, *(_DWORD *)(*v70 + 88))
    || (*(int (__cdecl **)(_DWORD *, _DWORD, int, int))(*v70 + 92))(v70, *v70, v30, v31)
    || (*(int (__cdecl **)(_DWORD *, int, _DWORD, _DWORD))(*v70 + 12))(v70, v32, *v70, *(_DWORD *)(*v70 + 12)) )
  {
    v35 = (*(int (__cdecl **)(_DWORD *, _DWORD, int, int))(*v70 + 84))(v70, *(_DWORD *)(*v70 + 84), v30, v31);
    v37 = (*(int (__cdecl **)(_DWORD *, int, _DWORD, _DWORD))(*v70 + 88))(v70, v36, *v70, *(_DWORD *)(*v70 + 88));
    v41 = (*(int (__cdecl **)(_DWORD *, int, int, int))(*v70 + 92))(v70, v38, v39, v40);
    v43 = (*(int (__cdecl **)(_DWORD *, _DWORD, _DWORD, int))(*v70 + 12))(v70, *v70, *(_DWORD *)(*v70 + 12), v42);
    v44 = (_DWORD *)sub_17C58(*(_DWORD *)(v21 + 4 * v12));
    _android_log_print(
      3,
      0,
      "APS: SDR: sf: [blending, flags, transform, hints][%d, %u, %u, %u], name = %s",
      v35,
      v37,
      v41,
      v43,
      *v44);
    goto LABEL_32;
  }
  sub_1A074(&v68, (android::RefBase **)(*(_DWORD *)(v21 + v20) + 4576));
  if ( !v68 || (v33 = *(_DWORD *)(v68 + 68)) == 0 )
  {
LABEL_51:
    v18 = 1;
    goto LABEL_52;
  }
  v45 = *(_DWORD *)(v21 + v20);
  v46 = *(_DWORD *)(v68 + 48);
  v47 = *(android **)(v68 + 52);
  v48 = *(_DWORD *)(v45 + 120);
  v19 = *(_DWORD *)(v45 + 124);
  v59 = *(_DWORD *)(v45 + 120);
  if ( *(_DWORD *)(v33 + 148) == v48 && *(_DWORD *)(v33 + 152) == v19 )
  {
    v50 = android::bytesPerPixel(v47, v48);
    v48 = *(_DWORD *)(v33 + 40);
    if ( v50 * v19 * v46 < v48 )
    {
LABEL_63:
      android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(
        (unsigned int **)&v69,
        (unsigned int **)(*((_DWORD *)v1 + 90) + 8));
      v55 = *v61;
      v56 = *(void (__fastcall **)(int, int, int, int))(*(_DWORD *)*v61 + 80);
      android::bytesPerPixel(v47, *v61);
      v57 = *(_DWORD *)(v33 + 48);
      v58 = *((_DWORD *)v69 + 41);
      android::Nsd::isSupportAFBC((android::Nsd *)v33, v69);
      v56(v55, v46, v59, v19);
      v62 = (*(int (__cdecl **)(int, int *, _DWORD, _DWORD))(*(_DWORD *)*v61 + 112))(
              *v61,
              v61,
              *(_DWORD *)*v61,
              *(_DWORD *)(*(_DWORD *)*v61 + 112));
      android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v69);
      goto LABEL_51;
    }
  }
  v49 = *(_DWORD *)(v33 + 148);
  if ( v49 == v19 )
  {
    if ( *(_DWORD *)(v33 + 152) != v59 )
      goto LABEL_62;
    v51 = android::bytesPerPixel(v47, v48);
    v48 = v59 * v46;
    if ( (unsigned int)(v51 * v59 * v46) >= *(_DWORD *)(v33 + 40) )
      goto LABEL_62;
    goto LABEL_63;
  }
  v49 = v19;
LABEL_62:
  v52 = *(_DWORD *)(v33 + 148);
  v53 = *(_DWORD *)(v33 + 152);
  v54 = android::bytesPerPixel(v47, v48);
  _android_log_print(
    3,
    0,
    "APS: SDR: sf: the game layer [%d, %d, %d, %d, %d, %d, %d]",
    v52,
    v53,
    v59,
    v49,
    v46,
    v54,
    *(_DWORD *)(v33 + 40));
LABEL_32:
  if ( v72 )
    (*(void (__cdecl **)(int, int, int, int))(*(_DWORD *)v72 + 4))(v72, v16, v17, v15);
  if ( v70 )
    (*(void (__cdecl **)(_DWORD *, _DWORD, int, int))(*v70 + 4))(v70, *v70, v17, v15);
  android::sp<android::GraphicBuffer>::~sp(&v68);
  android::String8::~String8((android::String8 *)&s1);
  android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v66);
  v2 = v60;
LABEL_4:
  sub_30B64((pthread_mutex_t **)&v65);
  result = v2;
  if ( v75 != v0 )
    _stack_chk_fail(v2);
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10DD0: using guessed type int __fastcall property_get(_DWORD, _DWORD, _DWORD);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00031F18) --------------------------------------------------------
signed int __fastcall android::SurfaceFlingerEx::onTransact(android::SurfaceFlingerEx *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  android::Parcel *v5; // r6@1
  android::Parcel *v6; // r5@1
  android::SurfaceFlingerEx *v7; // r4@1
  int v8; // r0@2
  int (*v9)(void); // r2@3
  int v10; // r0@4
  int v11; // r0@6
  int v12; // r6@8
  int *v13; // r0@8
  int v14; // r3@9
  const char *v15; // r0@10
  const char *v16; // r1@10
  signed int result; // r0@16

  v5 = a4;
  v6 = a3;
  v7 = this;
  switch ( a2 )
  {
    case 0x4AFu:
      android::Parcel::readInt32(a3);
      v8 = *((_DWORD *)v7 + 1334);
      if ( !v8 )
        goto LABEL_17;
      (*(void (**)(void))(*(_DWORD *)v8 + 68))();
      v9 = *(int (**)(void))(**((_DWORD **)v7 + 1334) + 64);
      goto LABEL_6;
    case 0x4ACu:
      android::Parcel::readInt32(a3);
      v10 = *((_DWORD *)v7 + 1334);
      if ( !v10 )
        goto LABEL_17;
      (*(void (**)(void))(*(_DWORD *)v10 + 68))();
      v9 = *(int (**)(void))(**((_DWORD **)v7 + 1334) + 72);
LABEL_6:
      v11 = v9();
      goto LABEL_7;
    case 0x4AEu:
      v12 = android::Parcel::readInt32(a3);
      android::Parcel::readFloat(v6);
      v13 = (int *)*((_DWORD *)v7 + 1334);
      if ( v13 )
      {
        v14 = *v13;
        if ( v12 == 1 )
        {
          (*(void (**)(void))(v14 + 96))();
          (*(void (**)(void))(**((_DWORD **)v7 + 1334) + 104))();
          v15 = "sys.sdr.special";
          v16 = "0";
        }
        else
        {
          (*(void (**)(void))(v14 + 100))();
          v15 = "sys.sdr.special";
          v16 = "0";
        }
        property_set(v15, v16);
        *((_DWORD *)v7 + 1340) = 0;
      }
      goto LABEL_17;
    case 0x4ADu:
      _android_log_print(3, 0, "APS:SDR:SurfaceFlingerEx:IS_SDR_CASE");
      v11 = android::SurfaceFlingerEx::isSdrCase(v7);
LABEL_7:
      android::Parcel::writeInt32(v5, v11);
      goto LABEL_17;
    case 0x4ABu:
      if ( (unsigned int)(android::Parcel::readInt32(a3) - 1) <= 1 )
        property_set("sys.sdr.special", "1");
LABEL_17:
      result = 0;
      break;
    default:
      result = sub_23714((int)this, a2, a3, a4, a5);
      break;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);

//----- (0003203C) --------------------------------------------------------
signed int __fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onTransact(int a1, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::SurfaceFlingerEx::onTransact((android::SurfaceFlingerEx *)(a1 - 4), a2, a3, a4, a5);
}

//----- (00032044) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::fillBlack(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  unsigned int v2; // r5@1
  int v3; // r9@1
  signed int v4; // r10@1
  int v5; // r7@1
  int v6; // r0@1
  int v7; // r3@1
  int v8; // r11@1
  const char *v9; // r1@1
  int v10; // r8@3
  int v11; // r0@3
  const char **v12; // r0@4
  char *v13; // r4@4
  int v14; // r6@4
  void *v15; // r7@14
  int v16; // r0@14
  int v18; // r0@7
  android *v19; // [sp+0h] [bp-58h]@1
  int v20; // [sp+4h] [bp-54h]@1
  int v21; // [sp+8h] [bp-50h]@1
  int v22; // [sp+Ch] [bp-4Ch]@1
  android::SurfaceFlingerEx *v23; // [sp+20h] [bp-38h]@1
  int v24; // [sp+24h] [bp-34h]@1
  int v25; // [sp+28h] [bp-30h]@1
  char *s1; // [sp+2Ch] [bp-2Ch]@1

  v1 = this;
  v2 = 0;
  v23 = (android::SurfaceFlingerEx *)((char *)this + 28);
  v3 = 0;
  sub_30B72((pthread_mutex_t *)((char *)this + 28));
  sub_17760((unsigned int **)&v24, (int)v1);
  v4 = 0;
  v5 = 0;
  v6 = sub_13540(v24);
  v7 = *(_DWORD *)(v6 + 8);
  v8 = v6;
  v25 = 0;
  v22 = v7;
  android::String8::String8((android::String8 *)&s1);
  v21 = 0;
  v20 = 0;
  v19 = 0;
  v9 = "NavigationBar";
  while ( v3 != v22 )
  {
    v10 = *(_DWORD *)(v8 + 4);
    v11 = *(_DWORD *)(v10 + 4 * v3);
    if ( v11 )
    {
      v12 = (const char **)sub_17C58(v11);
      android::String8::setTo((android::String8 *)&s1, *v12);
      v13 = s1;
      v14 = *(_DWORD *)(v10 + 4 * v3);
      if ( !strcmp(s1, "SurfaceView") )
      {
        sub_1A074(&v25, (android::RefBase **)(v14 + 4576));
        if ( v25 )
        {
          if ( *(_DWORD *)(v25 + 68) )
          {
            v18 = *(_DWORD *)(v10 + 4 * v3);
            v20 = *(_DWORD *)(v25 + 48);
            v5 = *(_DWORD *)(v25 + 68);
            v19 = *(android **)(v25 + 52);
            v9 = *(const char **)(v18 + 124);
            v21 = *(_DWORD *)(v18 + 124);
          }
        }
        v4 = *(_DWORD *)(v14 + 312);
      }
      else if ( strcmp(v13, "NavigationBar") )
      {
        if ( strcmp(v13, "KnucklePointerLocationView") )
        {
          v9 = *(const char **)(v14 + 312);
          if ( v2 < (unsigned int)v9 )
            v2 = *(_DWORD *)(v14 + 312);
        }
      }
    }
    ++v3;
  }
  if ( v5 && (signed int)v2 >= v4 )
  {
    v15 = *(void **)(v5 + 48);
    v16 = android::bytesPerPixel(v19, (int)v9);
    memset(v15, 0, v20 * v21 * v16);
  }
  android::String8::~String8((android::String8 *)&s1);
  android::sp<android::GraphicBuffer>::~sp(&v25);
  android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v24);
  return sub_30B64((pthread_mutex_t **)&v23);
}

//----- (0003217C) --------------------------------------------------------
void *__fastcall android::sp<android::Layer>::sp(void *a1, char **a2)
{
  void *v2; // r4@1
  char *v3; // r3@1

  v2 = a1;
  v3 = *a2;
  *(_DWORD *)a1 = *a2;
  if ( v3 )
    android::RefBase::incStrong((android::RefBase *)&v3[*(_DWORD *)(*(_DWORD *)v3 - 12)], a1);
  return v2;
}

//----- (00032198) --------------------------------------------------------
void *__fastcall android::sp<android::Layer>::~sp(void *a1)
{
  void *v1; // r4@1

  v1 = a1;
  if ( *(_DWORD *)a1 )
    android::RefBase::decStrong((android::RefBase *)(*(_DWORD *)(**(_DWORD **)a1 - 12) + *(_DWORD *)a1), a1);
  return v1;
}

//----- (000321B4) --------------------------------------------------------
pthread_mutex_t **__fastcall sub_321B4(int a1)
{
  int v1; // r4@1
  int v2; // r5@1
  int v3; // r9@1
  int v4; // r8@1
  int v5; // r6@1
  signed int v6; // r11@1
  const char **v7; // r0@3
  int v8; // r7@4
  const char **v9; // r0@5
  int v10; // r7@6
  const char **v11; // r0@7
  const char **v12; // r0@8
  const char **v13; // r0@9
  int v14; // r7@10
  int v15; // r7@15
  int v16; // r3@17
  const char **v18; // r0@31
  int v19; // ST08_4@32
  signed int v20; // r11@32
  int v21; // [sp+4h] [bp-94h]@1
  int v22; // [sp+8h] [bp-90h]@1
  int v23; // [sp+Ch] [bp-8Ch]@1
  int v24; // [sp+10h] [bp-88h]@1
  int v25; // [sp+28h] [bp-70h]@1
  int v26; // [sp+2Ch] [bp-6Ch]@3
  char v27; // [sp+30h] [bp-68h]@13
  int v28; // [sp+3Ch] [bp-5Ch]@13
  char v29; // [sp+40h] [bp-58h]@12
  int v30; // [sp+48h] [bp-50h]@12
  int v31; // [sp+50h] [bp-48h]@11
  int v32; // [sp+54h] [bp-44h]@11
  int v33; // [sp+60h] [bp-38h]@4
  int v34; // [sp+64h] [bp-34h]@6
  int v35; // [sp+68h] [bp-30h]@4
  int v36; // [sp+6Ch] [bp-2Ch]@4

  v1 = a1;
  v2 = 0;
  v25 = a1 + 28;
  v3 = 0;
  v4 = 0;
  sub_30B72((pthread_mutex_t *)(a1 + 28));
  v5 = 0;
  v6 = 0;
  v22 = 0;
  v23 = 0;
  v24 = 0;
  v21 = *(_DWORD *)(v1 + 256);
  while ( v2 != v21 )
  {
    android::sp<android::Layer>::sp(&v26, (char **)(*(_DWORD *)(v1 + 252) + 4 * v2));
    v7 = (const char **)sub_17C58(v26);
    if ( strstr(*v7, "com.huawei.android.launcher") )
    {
      v8 = v26 + 8;
      sub_30B4C((int)&v33, v26 + 8);
      sub_30B4C((int)&v33, v8);
      sub_30B4C((int)&v33, v8);
      v24 = v35;
      sub_30B4C((int)&v33, v8);
      v3 = v36;
    }
    else
    {
      v9 = (const char **)sub_17C58(v26);
      if ( strstr(*v9, "NavigationBar") )
      {
        v10 = v26 + 8;
        sub_30B4C((int)&v33, v26 + 8);
        sub_30B4C((int)&v33, v10);
        v23 = v34;
        sub_30B4C((int)&v33, v10);
        v22 = v35;
        v6 = 1;
        sub_30B4C((int)&v33, v10);
      }
      else
      {
        v11 = (const char **)sub_17C58(v26);
        if ( strstr(*v11, "BlackSurface") || (v12 = (const char **)sub_17C58(v26), strstr(*v12, "WatermarkSurface")) )
        {
          ++v4;
        }
        else
        {
          v13 = (const char **)sub_17C58(v26);
          if ( !strstr(*v13, "StatusBar") )
          {
            v14 = v26 + 8;
            sub_30B4C((int)&v33, v26 + 8);
            if ( v33
              || (sub_30B4C((int)&v31, v14), v32)
              || (sub_30B4C((int)&v29, v14), v30)
              || (sub_30B4C((int)&v27, v14), v28) )
            {
              ++v5;
            }
          }
        }
      }
    }
    ++v2;
    android::sp<android::Layer>::~sp(&v26);
  }
  v15 = *(_DWORD *)(v1 + 5332);
  if ( !v6 )
  {
    if ( v24 == *(_DWORD *)(v15 + 8) )
    {
      v16 = *(_DWORD *)(v15 + 12);
      goto LABEL_20;
    }
LABEL_22:
    android::Nsd::setSfFlag(*(android::Nsd **)(v1 + 5332), 0);
    return sub_30B64((pthread_mutex_t **)&v25);
  }
  if ( v22 != *(_DWORD *)(v15 + 8) )
    goto LABEL_22;
  v16 = v23;
LABEL_20:
  if ( v3 != v16 || v4 || v5 )
    goto LABEL_22;
  android::Nsd::setSfFlag(*(android::Nsd **)(v1 + 5332), 1);
  while ( v5 != v21 )
  {
    android::sp<android::Layer>::sp(&v31, (char **)(*(_DWORD *)(v1 + 252) + 4 * v5));
    v18 = (const char **)sub_17C58(v31);
    if ( strstr(*v18, "com.huawei.android.launcher") )
    {
      v19 = *(_DWORD *)(v1 + 5332);
      android::sp<android::Layer>::sp(&v33, (char **)(*(_DWORD *)(v1 + 252) + 4 * v5));
      v20 = android::Nsd::preDraw(v19, &v33);
      android::sp<android::Layer>::~sp(&v33);
      if ( v20 )
        word_4506C = 1;
    }
    ++v5;
    android::sp<android::Layer>::~sp(&v31);
  }
  if ( word_4506C == 1 )
    sub_1E094(v1);
  return sub_30B64((pthread_mutex_t **)&v25);
}
// 4506C: using guessed type __int16 word_4506C;

//----- (0003241C) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleNsdCmd(android::SurfaceFlingerEx *this)
{
  android::SurfaceFlingerEx *v1; // r4@1
  pthread_mutex_t **result; // r0@2

  v1 = this;
  if ( android::Nsd::nsd_is_exit_if_error(*((android::Nsd **)this + 1333)) )
  {
    *((_DWORD *)v1 + 1335) &= 0xFFFFFDFF;
    android::Nsd::nsd_exit(*((android::Nsd **)v1 + 1333));
    word_4506C = 0;
    result = (pthread_mutex_t **)j_j___android_log_print(6, 0, "NSDSF : release launcher nsd in handleNsdCmd");
  }
  else
  {
    result = sub_321B4((int)v1);
  }
  return result;
}
// 4506C: using guessed type __int16 word_4506C;

//----- (00032468) --------------------------------------------------------
pthread_mutex_t **__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::handleNsdCmd(int a1)
{
  return android::SurfaceFlingerEx::handleNsdCmd((android::SurfaceFlingerEx *)(a1 - 16));
}

//----- (00032470) --------------------------------------------------------
pthread_mutex_t **__fastcall android::SurfaceFlingerEx::handleApsIdentify(android::SurfaceFlingerEx *this, int a2)
{
  android::SurfaceFlingerEx *v2; // r5@1
  int v3; // r10@1
  int v4; // r4@1
  int v5; // r9@1
  int v6; // r6@1
  int v7; // r3@1
  int v8; // r7@1
  android *v9; // r8@1
  const char *v10; // r1@1
  const char **v11; // r0@4
  char *v12; // r11@4
  const char **v13; // r0@14
  const char **v14; // r0@17
  int *v15; // r0@18
  int v16; // r0@30
  int v17; // r0@35
  int v19; // r1@38
  int v20; // r1@39
  int v21; // r1@39
  int v22; // r1@40
  int v23; // r5@41
  void (__fastcall *v24)(int, int, int, int); // r7@41
  int v25; // r0@41
  int v26; // r9@41
  int v27; // r8@41
  void *v28; // r1@41
  unsigned int v29; // r9@43
  int v30; // r1@44
  int v31; // r5@48
  void (__fastcall *v32)(int, int, int, int); // r10@49
  int v33; // r11@49
  char *v34; // ST18_4@49
  void *v35; // r1@49
  int v36; // [sp+14h] [bp-64h]@1
  char *v37; // [sp+18h] [bp-60h]@1
  int v38; // [sp+1Ch] [bp-5Ch]@1
  int v39; // [sp+20h] [bp-58h]@1
  android::SurfaceFlingerEx *v40; // [sp+40h] [bp-38h]@1
  int v41; // [sp+44h] [bp-34h]@1
  char *s1; // [sp+48h] [bp-30h]@1
  int v43; // [sp+4Ch] [bp-2Ch]@3

  v2 = this;
  v3 = a2;
  v4 = 0;
  v40 = (android::SurfaceFlingerEx *)((char *)this + 28);
  v5 = 0;
  v6 = 0;
  sub_30B72((pthread_mutex_t *)((char *)this + 28));
  v7 = *((_DWORD *)v2 + 10);
  v41 = 0;
  v8 = 0;
  v9 = 0;
  v39 = v7;
  android::String8::String8((android::String8 *)&s1);
  v38 = 0;
  v37 = 0;
  v36 = 0;
  v10 = "sys.sdr.special";
  while ( v5 != v39 )
  {
    android::sp<android::Layer>::sp(&v43, (char **)(*((_DWORD *)v2 + 9) + 4 * v5));
    if ( v43 )
    {
      v11 = (const char **)sub_17C58(v43);
      android::String8::setTo((android::String8 *)&s1, *v11);
      v12 = s1;
      if ( !strcmp(s1, "StatusBar") )
      {
        v37 = *(char **)(v43 + 124);
      }
      else if ( !strcmp(v12, "NavigationBar") )
      {
        v38 = *(_DWORD *)(v43 + 124);
      }
      else if ( !strcmp(v12, "SurfaceView") )
      {
        if ( v8 || v6 )
        {
          android::sp<android::Layer>::~sp(&v43);
          goto LABEL_36;
        }
        sub_1A074(&v41, (android::RefBase **)(v43 + 4576));
        if ( v41 && *(_DWORD *)(v41 + 68) )
        {
          v9 = *(android **)(v41 + 52);
          v36 = *(_DWORD *)(v41 + 48);
          v4 = *(_DWORD *)(v41 + 68);
          v8 = *(_DWORD *)(v43 + 120);
          v6 = *(_DWORD *)(v43 + 124);
        }
      }
      else
      {
        v13 = (const char **)sub_17C58(v43);
        if ( !strcmp(*v13, "ScreenRecoderTimer")
          || (v14 = (const char **)sub_17C58(v43), !strcmp(*v14, "ScreenRecorder")) )
        {
          if ( v3 == 1 )
            property_set("sys.sdr.special", "1");
        }
      }
      v15 = &v43;
      if ( v37 && v38 && v8 )
      {
        android::sp<android::Layer>::~sp(&v43);
        break;
      }
    }
    else
    {
      v15 = &v43;
    }
    android::sp<android::Layer>::~sp(v15);
    ++v5;
  }
  if ( v4 )
  {
    if ( *(_DWORD *)(v4 + 148) == v8
      && *(_DWORD *)(v4 + 152) == v6
      && (v16 = android::bytesPerPixel(v9, (int)v10),
          v10 = (const char *)(v36 * v6),
          (unsigned int)(v16 * v36 * v6) < *(_DWORD *)(v4 + 40))
      || *(_DWORD *)(v4 + 148) == v6
      && *(_DWORD *)(v4 + 152) == v8
      && (unsigned int)(android::bytesPerPixel(v9, (int)v10) * v36 * v8) < *(_DWORD *)(v4 + 40) )
    {
      if ( v3 )
      {
        if ( v3 == 1 )
        {
          v29 = 0;
          sub_200B4((int)v2);
          while ( 1 )
          {
            v30 = *((_DWORD *)v2 + 90);
            if ( v29 >= *((_DWORD *)v2 + 91) )
              break;
            if ( !strcmp(*(const char **)(*(_DWORD *)(v30 + 12 * v29 + 8) + 128), "ScreenCapture") )
              property_set("sys.sdr.special", "1");
            ++v29;
          }
          android::sp<android::DisplayDevice const>::sp<android::DisplayDevice>(
            (unsigned int **)&v43,
            (unsigned int **)(v30 + 8));
          v31 = *((_DWORD *)v2 + 1334);
          if ( v31 )
          {
            v32 = *(void (__fastcall **)(int, int, int, int))(*(_DWORD *)v31 + 80);
            android::bytesPerPixel(v9, 5336);
            v33 = *(_DWORD *)(v4 + 48);
            v34 = *(char **)(v43 + 164);
            android::Nsd::isSupportAFBC((android::Nsd *)v4, v35);
            v32(v31, v36, v8, v6);
          }
          android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v43);
        }
      }
      else
      {
        v17 = *((_DWORD *)v2 + 1334);
        if ( v17 )
        {
          v19 = *((_DWORD *)v2 + 1337);
          if ( (*(int (__cdecl **)(int))(*(_DWORD *)v17 + 56))(v17) )
          {
            v20 = *((_DWORD *)v2 + 1336);
            if ( (*(int (__cdecl **)(_DWORD))(**((_DWORD **)v2 + 1334) + 52))(*((_DWORD *)v2 + 1334)) )
            {
              if ( (unsigned int)(android::bytesPerPixel(v9, v21) * v36 * v6) <= *(_DWORD *)(v4 + 40) )
              {
                v23 = *((_DWORD *)v2 + 1334);
                v24 = *(void (__fastcall **)(int, int, int, int))(*(_DWORD *)v23 + 44);
                v25 = android::bytesPerPixel(v9, v22);
                v26 = *(_DWORD *)(v4 + 48);
                v27 = v25;
                android::Nsd::isSupportAFBC((android::Nsd *)v4, v28);
                v24(v23, v36, v6, v27);
              }
            }
          }
        }
      }
    }
  }
LABEL_36:
  android::String8::~String8((android::String8 *)&s1);
  android::sp<android::GraphicBuffer>::~sp(&v41);
  return sub_30B64((pthread_mutex_t **)&v40);
}
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);

//----- (0003275C) --------------------------------------------------------
_QWORD *__fastcall android::SurfaceFlingerEx::onMessageReceived(__int64 this, int a2)
{
  __int64 v2; // r4@1
  int v7; // r1@4
  signed __int64 v8; // r6@4
  __int64 v9; // r0@7
  int v10; // r1@8
  int v11; // r2@8
  _DWORD *v12; // r0@9
  int v13; // r0@13
  int v14; // r2@14
  __int64 v15; // r0@16
  int v16; // r1@18
  int v17; // r1@19
  int v19; // r0@24
  int v20; // r2@29
  int v21; // r1@30
  int v22; // r2@30
  signed int v23; // r0@32
  __int64 v24; // [sp+0h] [bp-20h]@1
  int v25; // [sp+8h] [bp-18h]@1

  v24 = this;
  v25 = a2;
  v2 = this;
  __asm
  {
    VMOV.I32        D16, #0
    VSTR            D16, [SP,#0x20+var_20]
  }
  sub_30AA4((int)"onMessageReceived", SHIDWORD(this));
  if ( HIDWORD(v2) == 1 )
  {
    if ( android::SurfaceFlingerEx::checkIfSupportDuplicate((android::SurfaceFlingerEx *)v2) )
    {
      v12 = *(_DWORD **)(v2 + 5336);
      if ( v12 )
      {
        if ( (*(int (__cdecl **)(_DWORD *, int, _DWORD))(*v12 + 48))(v12, v10, *v12) )
          android::SurfaceFlingerEx::handleApsIdentify((android::SurfaceFlingerEx *)v2, 0);
      }
    }
    if ( *(_BYTE *)(v2 + 5364)
      && (v13 = *(_DWORD *)(v2 + 5336)) != 0
      && (*(int (__cdecl **)(int, _DWORD, int))(*(_DWORD *)v13 + 92))(v13, *(_DWORD *)(*(_DWORD *)v13 + 92), v11) )
    {
      if ( (*(int (__cdecl **)(_DWORD, _DWORD, int))(**(_DWORD **)(v2 + 5336) + 124))(
             *(_DWORD *)(v2 + 5336),
             **(_DWORD **)(v2 + 5336),
             v14) )
      {
        android::SurfaceFlingerEx::fillBlack((android::SurfaceFlingerEx *)v2);
        (*(void (__cdecl **)(_DWORD, signed int, int))(**(_DWORD **)(v2 + 5336) + 100))(*(_DWORD *)(v2 + 5336), 1, v20);
      }
      android::SurfaceFlingerEx::handleApsIdentify((android::SurfaceFlingerEx *)v2, 1);
      if ( !(*(int (__cdecl **)(_DWORD, int, _DWORD))(**(_DWORD **)(v2 + 5336) + 84))(
              *(_DWORD *)(v2 + 5336),
              v21,
              *(_DWORD *)(**(_DWORD **)(v2 + 5336) + 84)) )
      {
        if ( (*(int (__cdecl **)(_DWORD, _DWORD, int))(**(_DWORD **)(v2 + 5336) + 92))(
               *(_DWORD *)(v2 + 5336),
               **(_DWORD **)(v2 + 5336),
               v22) )
        {
          v23 = *(_DWORD *)(v2 + 5360);
          if ( v23 <= 3 )
          {
            if ( v23 <= 1 )
            {
              sub_1EB1C(v2);
              sub_1EB5C(v2);
              sub_1EF80(v2);
              sub_1F388(v2);
              sub_1F66C(v2);
              ++*(_DWORD *)(v2 + 5360);
              return sub_30B7C(&v24, v17);
            }
            if ( v23 == 3 )
            {
              android::SurfaceFlingerEx::addBlackList((android::SurfaceFlingerEx *)v2);
              property_set("sys.sdr.special", "1");
            }
            ++*(_DWORD *)(v2 + 5360);
          }
        }
      }
    }
    else if ( *(_BYTE *)(v2 + 5364) )
    {
      v19 = *(_DWORD *)(v2 + 5336);
      if ( v19 )
      {
        v10 = (*(int (__cdecl **)(int, int, _DWORD))(*(_DWORD *)v19 + 92))(v19, v10, *(_BYTE *)(v2 + 5364));
        if ( !v10 )
          (*(void (__cdecl **)(_DWORD, _DWORD, _DWORD))(**(_DWORD **)(v2 + 5336) + 88))(
            *(_DWORD *)(v2 + 5336),
            0,
            *(_DWORD *)(**(_DWORD **)(v2 + 5336) + 88));
      }
    }
    sub_1E5F8(v2, v10);
    goto LABEL_19;
  }
  if ( HIDWORD(v2) == 4 )
  {
    if ( android::SurfaceFlingerEx::checkIfSupportCursorNsd((android::SurfaceFlingerEx *)v2) )
    {
      LODWORD(v15) = v2;
      word_4506C = android::SurfaceFlingerEx::handleNsdDrawCursor(v15);
    }
    sub_1EF80(v2);
    sub_1F4F8(v2, v16);
LABEL_19:
    sub_1E6EC(v2);
    return sub_30B7C(&v24, v17);
  }
  if ( HIDWORD(v2) )
  {
    v9 = v2;
  }
  else
  {
    LODWORD(v8) = systemTime(1);
    HIDWORD(v8) = v7;
    if ( android::SurfaceFlingerEx::checkIfSupportCursorNsd((android::SurfaceFlingerEx *)v2) && *(_DWORD *)(v2 + 5332) )
    {
      android::SurfaceFlingerEx::handleNsdRefreshTime((android::SurfaceFlingerEx *)v2, v8 / 1000000);
      android::Nsd::clearCursor(*(android::Nsd **)(v2 + 5332));
    }
    v9 = (unsigned int)v2;
  }
  sub_1E428(v9, SHIDWORD(v9));
  return sub_30B7C(&v24, v17);
}
// 10920: using guessed type int __fastcall systemTime(_DWORD);
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);
// 4506C: using guessed type __int16 word_4506C;

//----- (00032904) --------------------------------------------------------
_QWORD *__fastcall `non-virtual thunk to'android::SurfaceFlingerEx::onMessageReceived(__int64 a1, int a2)
{
  LODWORD(a1) = a1 - 16;
  return android::SurfaceFlingerEx::onMessageReceived(a1, a2);
}

//----- (00032A4A) --------------------------------------------------------
int __fastcall sub_32A4A(void *dest, int a2, int a3, int a4, int a5, int a6, int a7, int a8, int a9)
{
  int v9; // r5@1
  int v10; // r8@1
  int v11; // r4@1
  int v12; // r7@1
  char *v13; // r9@1
  int v14; // r6@1
  int result; // r0@1
  int v16; // r11@1
  int v17; // r10@3
  int v18; // r2@3
  char *v19; // r12@6
  int v20; // r7@7
  _DWORD *v21; // r1@9
  int *v22; // r2@9
  int v23; // r0@9
  int v24; // t1@10
  int v25; // r1@11
  int v26; // ST1C_4@11
  _DWORD *v27; // [sp+4h] [bp-44h]@6
  int v28; // [sp+8h] [bp-40h]@3
  int v29; // [sp+Ch] [bp-3Ch]@5
  int v30; // [sp+10h] [bp-38h]@3
  _DWORD *v31; // [sp+18h] [bp-30h]@1

  v31 = (_DWORD *)a3;
  v9 = a9 / 16;
  v10 = 0;
  v11 = a5 / 16 + a6 / 16 * (a9 / 16);
  v12 = (a5 + a7 - 1) / 16 - a5 / 16;
  v13 = (char *)dest;
  v14 = v12 + 1;
  result = 16 * (v12 + 1);
  v16 = a4 + 16 * v11;
  if ( (v12 + 1 < 0) ^ __OFADD__(v12, 1) )
    result = 0;
  v30 = result;
  v17 = a2;
  v28 = (a5 / 16 + (a6 + a8 - 1) / 16 * v9 - v11) / v9 + 1;
  v18 = v14 << 10;
  if ( (v12 + 1 < 0) ^ __OFADD__(v12, 1) )
    v18 = 0;
  v29 = v18;
  while ( 1 )
  {
    v27 = (_DWORD *)v17;
    v19 = v13;
    if ( v10 >= v28 )
      break;
    v20 = 0;
    while ( v20 < v14 )
    {
      v21 = v27;
      v22 = (int *)(a4 + 16 * (v20 + v11));
      v23 = (int)(v22 + 4);
      do
      {
        v24 = *v22;
        ++v22;
        *v21 = v24;
        ++v21;
      }
      while ( v22 != (int *)v23 );
      v25 = 16 * v20;
      v26 = a4;
      ++v20;
      v27 += 4;
      v19 = (char *)memcpy(v19, (const void *)(*(_DWORD *)(v16 + v25) + a4), 0x400u) + 1024;
      a4 = v26;
    }
    ++v10;
    v11 += v9;
    result = v30;
    v13 += v29;
    v17 += v30;
    v16 += 16 * v9;
  }
  *v31 = v14 * v28;
  return result;
}

//----- (00032B32) --------------------------------------------------------
int __fastcall sub_32B32(void *src, int a2, int a3, int a4, int a5, int a6, int a7, int a8)
{
  int v8; // r8@1
  void *v9; // r11@1
  int v10; // r12@1
  int v11; // r0@1
  int v12; // r1@1
  int v13; // r9@1
  int v14; // r5@1
  int v15; // r3@1
  int v16; // r4@1
  int v17; // r10@1
  int result; // r0@1
  int v19; // r7@3
  int *v20; // r1@5
  _DWORD *v21; // r2@5
  int v22; // t1@6
  int v23; // ST0C_4@7
  const void *v24; // r1@7
  int v25; // ST08_4@7
  int v26; // r0@7
  int v27; // [sp+4h] [bp-34h]@1

  v8 = a2;
  v9 = src;
  v10 = a3;
  v11 = a4 / 16;
  v12 = (a4 + a6 - 1) / 16;
  v13 = 0;
  v14 = a4 / 16 + a5 / 16 * (a8 / 16);
  v15 = 16 * (a8 / 16);
  v16 = v12 - v11;
  v17 = a3 + 16 * v14;
  result = v11 + (a5 + a7 - 1) / 16 * (a8 / 16) - v14;
  v27 = result / (a8 / 16);
  while ( v27 >= v13 )
  {
    v19 = 0;
    while ( v16 >= v19 )
    {
      v20 = (int *)v8;
      v21 = (_DWORD *)(v10 + 16 * (v19 + v14));
      do
      {
        v22 = *v20;
        ++v20;
        *v21 = v22;
        ++v21;
      }
      while ( v20 != (int *)(v8 + 16) );
      v23 = v15;
      v24 = v9;
      v25 = v10;
      v26 = *(_DWORD *)(v17 + 16 * v19);
      v8 += 16;
      v9 = (char *)v9 + 1024;
      ++v19;
      result = (int)memcpy((void *)(v26 + v10), v24, 0x400u);
      v10 = v25;
      v15 = v23;
    }
    ++v13;
    v14 += a8 / 16;
    v17 += v15;
  }
  return result;
}

//----- (00032BE0) --------------------------------------------------------
android::Nsd *__fastcall android::Nsd::Nsd(android::Nsd *this)
{
  android::Nsd *v1; // r4@1
  android::Nsd *result; // r0@1

  v1 = this;
  android::RefBase::RefBase(this);
  *((_DWORD *)v1 + 2) = 0;
  *((_DWORD *)v1 + 3) = 0;
  *((_DWORD *)v1 + 4) = 0;
  *((_DWORD *)v1 + 7) = 0;
  *((_DWORD *)v1 + 8) = 0;
  *((_DWORD *)v1 + 9) = 0;
  *((_DWORD *)v1 + 10) = 0;
  *((_DWORD *)v1 + 11) = 0;
  *((_DWORD *)v1 + 12) = 0;
  *((_DWORD *)v1 + 13) = 0;
  *((_DWORD *)v1 + 14) = 0;
  *((_DWORD *)v1 + 15) = 0;
  result = v1;
  *(_DWORD *)v1 = 8;
  return result;
}

//----- (00032C14) --------------------------------------------------------
android::Thread *__fastcall sub_32C14(android::Thread *this, int a2, int a3)
{
  android::Thread *v3; // r4@1
  int v4; // r5@1
  signed int v5; // r1@2
  signed int v6; // r3@5
  char *v7; // r3@7
  signed int v8; // r1@8

  v3 = this;
  v4 = a2;
  if ( a2 )
    v5 = 12;
  else
    v5 = *(_DWORD *)a3;
  *(_DWORD *)this = v5;
  if ( v4 )
    v6 = 64;
  else
    v6 = *(_DWORD *)(v5 - 12);
  v7 = (char *)this + v6;
  if ( v4 )
    v8 = 64;
  else
    v8 = *(_DWORD *)(a3 + 12);
  *(_DWORD *)v7 = v8;
  android::Thread::~Thread(this);
  if ( v4 & 2 )
    android::RefBase::~RefBase((android::Thread *)((char *)v3 + 64));
  if ( v4 & 1 )
    operator delete((void *)v3);
  return v3;
}

//----- (00032CB2) --------------------------------------------------------
android::Thread *__fastcall sub_32CB2(android::Thread *a1, int a2)
{
  return sub_32C14(a1, 0, a2);
}

//----- (00032CBA) --------------------------------------------------------
int __fastcall android::Nsd::setSfFlag(int result, int a2)
{
  int v2; // r3@1

  v2 = *(_DWORD *)(result + 44);
  if ( v2 )
    *(_DWORD *)(v2 + 24) = a2;
  return result;
}

//----- (00032CC2) --------------------------------------------------------
int __fastcall android::Nsd::getVisibleLayerInfo(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  android::Nsd *v5; // r5@1

  v5 = this;
  android::Parcel::writeInt64(a4, *((_DWORD *)this + 6));
  (*(void (**)(void))(**((_DWORD **)v5 + 10) + 224))();
  return 0;
}

//----- (00032CE2) --------------------------------------------------------
void __fastcall android::Nsd::PrepareBufferThread::prepareBuffer(android::Nsd::PrepareBufferThread *this, void *dest, void *src, int a4, int a5, int a6, int a7, int a8)
{
  char *v8; // r7@1
  int v9; // r5@4
  char *v10; // r0@5

  v8 = (char *)src;
  if ( dest && a7 && a8 )
  {
    v9 = a4 - a8;
    if ( a4 - a8 > 0 )
    {
      v10 = (char *)memcpy(dest, src, 4 * a7 * a5);
      j_j_memcpy(&v10[4 * a8 * a5], &v8[4 * a8 * a5], 4 * v9 * a5);
    }
  }
}

//----- (00032D26) --------------------------------------------------------
int __fastcall android::Nsd::PrepareBufferThread::threadLoop(android::Nsd::PrepareBufferThread *this)
{
  android::Nsd::PrepareBufferThread::prepareBuffer(
    this,
    *((void **)this + 15),
    *((void **)this + 14),
    *((_DWORD *)this + 10),
    *((_DWORD *)this + 11),
    *((_DWORD *)this + 9),
    *((_DWORD *)this + 12),
    *((_DWORD *)this + 13));
  return 0;
}

//----- (00032D4A) --------------------------------------------------------
int __fastcall android::Nsd::PrepareBufferThread::setBufferPara(int result, void *a2, unsigned int *a3, int a4, int a5, int a6, int a7, int a8)
{
  *(_DWORD *)(result + 40) = a4;
  *(_DWORD *)(result + 60) = a2;
  *(_DWORD *)(result + 56) = a3;
  *(_DWORD *)(result + 44) = a5;
  *(_DWORD *)(result + 36) = a6;
  *(_DWORD *)(result + 48) = a7;
  *(_DWORD *)(result + 52) = a8;
  return result;
}

//----- (00032D64) --------------------------------------------------------
signed int __fastcall android::Nsd::process(int a1, unsigned int *a2, int a3, int a4, int a5)
{
  int v5; // r5@1
  int v6; // r0@1
  unsigned int *v7; // r6@1
  int v8; // r8@1
  signed int result; // r0@2
  int v10; // r10@3
  unsigned int v11; // r12@3
  int v12; // r0@6
  int v13; // r0@7
  int v14; // r3@8
  int v15; // r2@8
  int v16; // r3@8
  int v17; // r4@9
  int v18; // r1@11
  int v19; // r7@11
  int v20; // r4@12
  int v21; // r2@12
  int v22; // r4@12
  void *v23; // [sp+14h] [bp-24h]@1

  v5 = a1;
  v6 = *(_DWORD *)(a1 + 44);
  v7 = a2;
  v8 = a4;
  v23 = 0;
  if ( !v6 )
    return 0;
  v10 = *(_DWORD *)v6;
  v11 = a2[*(_DWORD *)(v6 + 8) * a5];
  if ( v11 == -11386523 )
  {
    (*(void (__cdecl **)(int))(v10 + 36))(v6);
    v13 = 0;
    do
    {
      v14 = *(_DWORD *)(*(_DWORD *)(v5 + 44) + 8) * a5;
      v15 = v14 + 5;
      v16 = v14 + v13++;
      v7[v16] = v7[v15];
    }
    while ( v13 != 4 );
    v17 = v0;
    if ( !v0 )
    {
      v0 = 1;
      android::GraphicBuffer::lock(*(android::GraphicBuffer **)(v5 + 32), 0x30u, &v23);
      android::Nsd::PrepareBufferThread::setBufferPara(
        *(android::Nsd::PrepareBufferThread **)(v5 + 52),
        v23,
        v7,
        v8,
        a5,
        v17,
        *(_DWORD *)(*(_DWORD *)(v5 + 44) + 8),
        *(_DWORD *)(*(_DWORD *)(v5 + 44) + 12));
      (*(void (**)(void))(**(_DWORD **)(v5 + 52) + 8))();
      android::GraphicBuffer::unlock(*(android::GraphicBuffer **)(v5 + 32));
      android::GraphicBuffer::lock(*(android::GraphicBuffer **)(v5 + 36), 0x30u, &v23);
      android::Nsd::PrepareBufferThread::setBufferPara(
        *(android::Nsd::PrepareBufferThread **)(v5 + 56),
        v23,
        v7,
        v8,
        a5,
        1,
        *(_DWORD *)(*(_DWORD *)(v5 + 44) + 8),
        *(_DWORD *)(*(_DWORD *)(v5 + 44) + 12));
      (*(void (**)(void))(**(_DWORD **)(v5 + 56) + 8))();
      android::GraphicBuffer::unlock(*(android::GraphicBuffer **)(v5 + 36));
    }
    return 0;
  }
  if ( v11 == -7903933 )
  {
    (*(void (__cdecl **)(int))(v10 + 36))(v6);
    result = 2;
    v18 = *(_DWORD *)(*(_DWORD *)(v5 + 44) + 8) * a5;
    v7[v18] = v7[v18 + 5];
    v19 = a5 * *(_DWORD *)(*(_DWORD *)(v5 + 44) + 8) + 2;
    v7[v19] = v7[v19 + 3];
  }
  else if ( v11 == -12496283 )
  {
    (*(void (__cdecl **)(int))(v10 + 40))(v6);
    v12 = 0;
    do
    {
      v20 = *(_DWORD *)(*(_DWORD *)(v5 + 44) + 8) * a5;
      v21 = v20 + 5;
      v22 = v20 + v12++;
      v7[v22] = v7[v21];
    }
    while ( v12 != 4 );
    result = 1;
  }
  else
  {
    (*(void (**)(void))(v10 + 28))();
    result = 0;
  }
  return result;
}

//----- (00032ED0) --------------------------------------------------------
int __fastcall android::Nsd::setRefreshTime(int result, __int32 a2)
{
  *(_DWORD *)(result + 24) = a2;
  return result;
}

//----- (00032ED4) --------------------------------------------------------
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this)
{
  android::Nsd *v1; // r4@1
  char *v2; // r5@1
  char *v3; // r6@3
  android::RefBase *v4; // r0@5
  android::RefBase *v5; // r0@7
  char *v6; // r1@9
  char *v7; // r5@9

  v1 = this;
  *(_DWORD *)this = 8;
  v2 = (char *)*((_DWORD *)this + 14);
  if ( v2 )
    android::RefBase::decStrong((android::RefBase *)&v2[*(_DWORD *)(*(_DWORD *)v2 - 12)], (char *)this + 56);
  v3 = (char *)*((_DWORD *)v1 + 13);
  if ( v3 )
    android::RefBase::decStrong((android::RefBase *)&v3[*(_DWORD *)(*(_DWORD *)v3 - 12)], (char *)v1 + 52);
  v4 = (android::RefBase *)*((_DWORD *)v1 + 12);
  if ( v4 )
    android::RefBase::decStrong(v4, (char *)v1 + 48);
  v5 = (android::RefBase *)*((_DWORD *)v1 + 11);
  if ( v5 )
    android::RefBase::decStrong(v5, (char *)v1 + 44);
  v6 = (char *)*((_DWORD *)v1 + 10);
  v7 = (char *)v1 + 40;
  if ( v6 )
    android::RefBase::decStrong((android::RefBase *)&v6[*(_DWORD *)(*(_DWORD *)v6 - 12)], (char *)v1 + 40);
  while ( v7 != (char *)v1 + 32 )
  {
    v7 -= 4;
    android::sp<android::GraphicBuffer>::~sp(v7);
  }
  android::RefBase::~RefBase(v1);
  return v1;
}

//----- (00032F58) --------------------------------------------------------
android::Nsd *__fastcall android::Nsd::~Nsd(android::Nsd *this)
{
  android::Nsd *v1; // r4@1

  v1 = this;
  android::Nsd::~Nsd(this);
  operator delete((void *)v1);
  return v1;
}

//----- (00032F6A) --------------------------------------------------------
void *__fastcall android::sp<android::GraphicBuffer>::sp(void *a1, android::RefBase **a2)
{
  void *v2; // r4@1
  android::RefBase *v3; // r0@1

  v2 = a1;
  v3 = *a2;
  *(_DWORD *)v2 = *a2;
  if ( v3 )
    android::RefBase::incStrong(v3, v2);
  return v2;
}

//----- (00032F80) --------------------------------------------------------
signed int __fastcall android::Nsd::preDraw(int a1, int *a2)
{
  int v2; // r5@1
  int v3; // r3@1
  int *v4; // r4@1
  android::RefBase **v5; // r1@2
  signed int result; // r0@4
  unsigned int *v7; // r9@6
  int v8; // r6@6
  int v9; // r8@6
  int v10; // r11@10
  const android::String8 *v11; // r0@10
  signed int v12; // r4@10
  android::GraphicBuffer *v13; // r0@11
  int v14; // r0@14
  int v15; // r6@16
  int v16; // r3@19
  int v17; // r6@20
  int v18; // r6@23
  int v19; // r2@26
  int v20; // [sp+8h] [bp-30h]@6
  int v21; // [sp+Ch] [bp-2Ch]@10

  v2 = a1;
  v3 = *a2;
  v4 = a2;
  if ( *a2 && (v5 = (android::RefBase **)(v3 + 4576), (v3 = *(_DWORD *)(v3 + 4576)) != 0) )
  {
    if ( *(_DWORD *)(v3 + 68) )
    {
      android::sp<android::GraphicBuffer>::sp(&v20, v5);
      v7 = (unsigned int *)private_handle_get_base(*(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 68));
      v8 = *(_DWORD *)(*v4 + 120);
      v9 = *(_DWORD *)(*v4 + 124);
      if ( android::GraphicBuffer::reallocate(
             *(android::GraphicBuffer **)(v2 + 32),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 40),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 44),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 52),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 56)) )
      {
        _android_log_print(3, "NSD", "NSDSF : layer reallocate err!");
      }
      if ( android::GraphicBuffer::reallocate(
             *(android::GraphicBuffer **)(v2 + 36),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 40),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 44),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 52),
             *(_DWORD *)(*(_DWORD *)(*v4 + 4576) + 56)) )
      {
        _android_log_print(3, "NSD", "NSDSF : layer reallocate err!");
      }
      v10 = *(_DWORD *)(v20 + 48);
      v11 = (const android::String8 *)sub_17C58(*v4);
      android::String8::String8((android::String8 *)&v21, v11);
      v12 = android::Nsd::process(v2, v7, v8, v9, v10);
      android::String8::~String8((android::String8 *)&v21);
      if ( v12 == 1 )
      {
        v13 = *(android::GraphicBuffer **)(v2 + 32);
        *(_DWORD *)(v2 + 60) = 0;
        v21 = 0;
        android::GraphicBuffer::lock(v13, 0x30u, (void **)&v21);
        if ( v21 )
        {
          v14 = *(_DWORD *)(v2 + 44);
          if ( v14 )
          {
            if ( *(_DWORD *)(v14 + 8) )
            {
              v15 = *(_DWORD *)(v14 + 12);
              if ( v15 )
              {
                if ( v9 - v15 > 0 )
                {
                  while ( v15 < v9 )
                  {
                    v16 = *(_DWORD *)(v2 + 64) + *(_DWORD *)(v20 + 48) * v15++;
                    memcpy((void *)(v21 + 4 * v16), &v7[v16], 4 * *(_DWORD *)(v2 + 68));
                  }
                }
              }
            }
          }
        }
        android::GraphicBuffer::unlock(*(android::GraphicBuffer **)(v2 + 32));
        android::GraphicBuffer::lock(*(android::GraphicBuffer **)(v2 + 36), 0x30u, (void **)&v21);
        if ( v21 )
        {
          v17 = *(_DWORD *)(v2 + 44);
          if ( v17 )
          {
            if ( *(_DWORD *)(v17 + 8) )
            {
              v18 = *(_DWORD *)(v17 + 12);
              if ( v18 )
              {
                if ( v9 - v18 > 0 )
                {
                  while ( v18 < v9 )
                  {
                    v19 = *(_DWORD *)(v2 + 64) + *(_DWORD *)(v20 + 48) * v18++;
                    memcpy((void *)(v21 + 4 * v19), &v7[v19], 4 * *(_DWORD *)(v2 + 68));
                  }
                }
              }
            }
          }
        }
        android::GraphicBuffer::unlock(*(android::GraphicBuffer **)(v2 + 36));
      }
      android::sp<android::GraphicBuffer>::~sp(&v20);
      result = v12;
    }
    else
    {
      result = 0;
    }
  }
  else
  {
    result = v3;
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 112C8: using guessed type int __fastcall private_handle_get_base(_DWORD);

//----- (00033110) --------------------------------------------------------
signed int __fastcall android::Nsd::doDraw(android::Nsd *this, __int32 a2, int a3)
{
  android::Nsd *v3; // r4@1
  int v4; // r0@1
  int v5; // r10@1
  int v6; // r8@1
  int i; // r5@1
  int v8; // r9@3
  int v9; // r6@4
  int (__fastcall *v10)(int, _DWORD); // r11@4
  _DWORD *v11; // r0@4
  int v12; // r8@6
  signed int v13; // r5@6
  signed int v14; // r0@8
  const char *v15; // r1@8
  const char *v16; // r2@8
  unsigned int v17; // r5@9
  int v18; // r0@15
  int v19; // r0@20
  const void *v20; // r9@24
  android::RefBase *v21; // r7@24
  android::Nsd *v23; // [sp+0h] [bp-30h]@1
  android::RefBase *v24; // [sp+4h] [bp-2Ch]@1
  int v25; // [sp+8h] [bp-28h]@1

  v23 = this;
  v24 = (android::RefBase *)a2;
  v25 = a3;
  v3 = this;
  v4 = sub_2353C(*((_DWORD *)this + 10), 0);
  v5 = *(_DWORD *)(v4 + 8);
  v6 = v4;
  for ( i = 0; ; ++i )
  {
    if ( i == v5 )
    {
      v14 = 5;
      v15 = "NSD";
      v16 = "NSDSF : not found Layer!";
LABEL_13:
      _android_log_print(v14, v15, v16);
      return 0;
    }
    v8 = *((_DWORD *)v3 + 11);
    if ( v8 )
    {
      v9 = 4 * i;
      v10 = *(int (__fastcall **)(int, _DWORD))(*(_DWORD *)v8 + 32);
      v11 = (_DWORD *)sub_17C58(*(_DWORD *)(*(_DWORD *)(v6 + 4) + 4 * i));
      if ( v10(v8, *v11) )
        break;
    }
  }
  v12 = *(_DWORD *)(v6 + 4);
  v13 = *(_DWORD *)(v12 + v9);
  if ( !v13 )
  {
    _android_log_print(5, "NSD", "NSDSF : layer == NULL!");
    return v13;
  }
  v17 = *((_DWORD *)v3 + 15);
  v23 = 0;
  if ( v17 > 1 )
    *((_DWORD *)v3 + 15) = v17 & 1;
  v13 = android::GraphicBuffer::lock(*((android::GraphicBuffer **)v3 + *((_DWORD *)v3 + 15) + 8), 0x30u, (void **)&v23);
  if ( v13 )
  {
    v14 = 6;
    v15 = 0;
    v16 = "NSD mGraphicBuffer lock fail!!!!";
    goto LABEL_13;
  }
  if ( v23 && (v18 = *((_DWORD *)v3 + 11)) != 0 && (*(int (**)(void))(*(_DWORD *)v18 + 52))() )
  {
    v20 = (const void *)(*(_DWORD *)(v12 + v9) + 4576);
    android::sp<android::GraphicBuffer>::sp(&v24, (android::RefBase **)v3 + *((_DWORD *)v3 + 15) + 8);
    v21 = v24;
    if ( v24 )
      android::RefBase::incStrong(v24, v20);
    if ( *(_DWORD *)v20 )
      android::RefBase::decStrong(*(android::RefBase **)v20, v20);
    *(_DWORD *)v20 = v21;
    android::sp<android::GraphicBuffer>::~sp(&v24);
    *((_DWORD *)v3 + 15) = ((unsigned __int8)*((_DWORD *)v3 + 15) + 1) & 1;
  }
  else
  {
    _android_log_print(6, 0, "NSDMT frame discard!");
  }
  if ( android::GraphicBuffer::unlock(*((android::GraphicBuffer **)v3 + *((_DWORD *)v3 + 15) + 8)) )
    _android_log_print(6, 0, "NSD mGraphicBuffer unlock fail!!!!!");
  v19 = *((_DWORD *)v3 + 11);
  if ( !v19 || (*(int (**)(void))(*(_DWORD *)v19 + 68))() )
    v13 = 1;
  else
    (*(void (**)(void))(**((_DWORD **)v3 + 11) + 60))();
  return v13;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00033274) --------------------------------------------------------
signed int __fastcall android::Nsd::cursorOnTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  android::Nsd *v5; // r4@1
  android::Parcel *v6; // r5@1
  int v7; // r0@3
  int v8; // r7@3
  int v9; // r7@3
  int v10; // r7@3
  int v11; // r7@3
  int v12; // r7@3
  signed int v13; // r7@3
  int v14; // r0@3
  int v15; // r3@4
  int v16; // r0@4
  int v17; // r6@5
  signed int v18; // r1@6
  signed int v19; // r2@7
  int v21; // r6@14
  int v22; // r9@14
  int v23; // r8@14
  int *v24; // r1@14
  int v25; // r11@16
  int v26; // r10@16
  int v27; // ST3C_4@18
  int v28; // r4@24
  int v29; // r5@24
  int v30; // r7@24
  int v31; // r6@24
  int v32; // [sp+20h] [bp-50h]@14
  int v33; // [sp+24h] [bp-4Ch]@14
  int v34; // [sp+30h] [bp-40h]@14
  int v35; // [sp+40h] [bp-30h]@14
  int v36; // [sp+44h] [bp-2Ch]@14

  v5 = this;
  v6 = a3;
  if ( a2 != 2000 )
    return -74;
  if ( !*((_DWORD *)this + 12) )
    return -74;
  v7 = android::Parcel::readInt32(a3);
  v8 = *((_DWORD *)v5 + 12);
  dword_4CA58 = v7;
  *(_DWORD *)(v8 + 24) = android::Parcel::readInt32(v6);
  v9 = *((_DWORD *)v5 + 12);
  *(_DWORD *)(v9 + 8) = android::Parcel::readInt32(v6);
  v10 = *((_DWORD *)v5 + 12);
  *(_DWORD *)(v10 + 12) = android::Parcel::readInt32(v6);
  v11 = *((_DWORD *)v5 + 12);
  *(_DWORD *)(v11 + 16) = android::Parcel::readInt32(v6);
  v12 = *((_DWORD *)v5 + 12);
  *(_DWORD *)(v12 + 20) = android::Parcel::readInt32(v6);
  v13 = android::Parcel::readInt32(v6);
  v14 = android::Parcel::readInt32(v6);
  _android_log_print(
    3,
    "NSD",
    "%s: times=%d z=%d x=%d y=%d w=%d h=%d len=%d config=%d",
    "android::status_t android::Nsd::cursorOnTransact(uint32_t, const android::Parcel&, android::Parcel*, uint32_t)",
    dword_4CA58,
    *(_DWORD *)(*((_DWORD *)v5 + 12) + 24),
    *(_DWORD *)(*((_DWORD *)v5 + 12) + 8),
    *(_DWORD *)(*((_DWORD *)v5 + 12) + 12),
    *(_DWORD *)(*((_DWORD *)v5 + 12) + 16),
    *(_DWORD *)(*((_DWORD *)v5 + 12) + 20),
    v13,
    v14);
  if ( v13 <= 0 )
    return -74;
  v15 = *((_DWORD *)v5 + 12);
  v16 = *(_DWORD *)(v15 + 8);
  if ( v16 < 0
    || (v17 = *(_DWORD *)(v15 + 12), v17 < 0)
    || (v18 = *(_DWORD *)(v15 + 16), v18 < 0)
    || (v19 = *(_DWORD *)(v15 + 20), v19 < 0)
    || v13 != 4 * v19 * v18 )
  {
    _android_log_print(
      5,
      "NSD",
      "%s: invalid param. x=%d y=%d w=%d h=%d len=%d",
      "android::status_t android::Nsd::cursorOnTransact(uint32_t, const android::Parcel&, android::Parcel*, uint32_t)",
      *(_DWORD *)(v15 + 8),
      *(_DWORD *)(v15 + 12),
      *(_DWORD *)(v15 + 16),
      *(_DWORD *)(v15 + 20),
      v13);
    return -74;
  }
  if ( v18 > 20 || v19 > 200 )
  {
    _android_log_print(
      5,
      "NSD",
      "%s: x=%d y=%d w=%d h=%d",
      "android::status_t android::Nsd::cursorOnTransact(uint32_t, const android::Parcel&, android::Parcel*, uint32_t)",
      v16,
      v17,
      *(_DWORD *)(v15 + 16),
      v19);
    return -74;
  }
  v21 = 0;
  v22 = 0;
  v23 = 0;
  sub_17760((unsigned int **)&v35, *((_DWORD *)v5 + 10));
  v33 = sub_13540(v35);
  v24 = &v36;
  v32 = 0;
  v34 = *(_DWORD *)(v33 + 8);
  while ( v21 != v34 )
  {
    v25 = 4 * v21;
    v26 = *(_DWORD *)(v33 + 4);
    if ( *(_DWORD *)(v26 + 4 * v21) )
    {
      v27 = *(_DWORD *)(v26 + 4 * v21);
      sub_17C58(*(_DWORD *)(v26 + 4 * v21));
      v24 = *(int **)(*((_DWORD *)v5 + 12) + 24);
      if ( *(int **)(v27 + 312) == v24 )
      {
        android::sp<android::GraphicBuffer>::sp(&v36, (android::RefBase **)(*(_DWORD *)(v26 + v25) + 4576));
        v23 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v26 + v25) + 4576) + 68);
        v32 = *(_DWORD *)(v36 + 48);
        v22 = *(_DWORD *)(v23 + 48);
        android::sp<android::GraphicBuffer>::~sp(&v36);
      }
    }
    else
    {
      _android_log_print(
        5,
        0,
        "%s: layer is null, fill dummy information",
        "android::status_t android::Nsd::cursorOnTransact(uint32_t, const android::Parcel&, android::Parcel*, uint32_t)");
    }
    ++v21;
  }
  if ( android::Nsd::isSupportAFBC((android::Nsd *)v23, v24) )
  {
    if ( dword_4CA58 <= 2 )
    {
      if ( dword_4CA58 == 1 )
      {
        sub_32A4A(
          &unk_4CA60,
          (int)&unk_45078,
          (int)&v36,
          v22,
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 8),
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 12),
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 16),
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 20),
          v32);
        v28 = *((_DWORD *)v5 + 12);
        v29 = *(_DWORD *)(v28 + 12);
        v30 = *(_DWORD *)(v28 + 16);
        v31 = *(_DWORD *)(v28 + 20);
        dword_54260 = *(_DWORD *)(v28 + 8);
        dword_45070 = v29;
        dword_54264 = v30;
        dword_45074 = v31;
      }
      else if ( dword_4CA58 == 2 )
      {
        sub_32A4A(
          &unk_45258,
          (int)&unk_54270,
          (int)&v36,
          v22,
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 8),
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 12),
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 16),
          *(_DWORD *)(*((_DWORD *)v5 + 12) + 20),
          v32);
      }
    }
  }
  else
  {
    android::Parcel::readInt32(v6);
    android::Parcel::read(v6, *(void **)(*((_DWORD *)v5 + 12) + 28), v13);
  }
  android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v35);
  return 0;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 45070: using guessed type int dword_45070;
// 45074: using guessed type int dword_45074;
// 4CA58: using guessed type int dword_4CA58;
// 54260: using guessed type int dword_54260;
// 54264: using guessed type int dword_54264;

//----- (0003352C) --------------------------------------------------------
int __fastcall android::Nsd::setCursorBmp(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  android::Nsd *v5; // r4@1

  v5 = this;
  if ( !android::Nsd::cursorOnTransact(this, a2, a3, a4, a5) )
    *((_BYTE *)v5 + 20) = 1;
  return 0;
}

//----- (00033544) --------------------------------------------------------
signed int __fastcall android::Nsd::onTransact(android::Nsd *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  android::Nsd *v5; // r5@1
  android::Parcel *v6; // r8@1
  android::Parcel *v7; // r6@1
  signed int result; // r0@4
  unsigned int v9; // r7@9
  int v10; // r0@9
  int v11; // r1@9
  int v12; // r4@9
  int v13; // r0@10
  int v14; // r6@10
  int v15; // r5@10
  int v16; // r1@10
  int v17; // r0@10
  int v18; // r7@11
  void (__fastcall *v19)(int, int); // r4@11
  int v20; // r0@11

  v5 = this;
  v6 = a3;
  v7 = a4;
  if ( a2 == 2001 )
  {
    android::Parcel::writeInt64(a4, *((_DWORD *)this + 6));
    (*(void (__cdecl **)(_DWORD, android::Parcel *))(**((_DWORD **)v5 + 10) + 224))(*((_DWORD *)v5 + 10), v7);
    return 0;
  }
  if ( a2 == 2002 )
  {
    if ( !*((_DWORD *)this + 11) )
      return -74;
    v9 = android::Parcel::readInt32(a3);
    v10 = (*(int (__cdecl **)(_DWORD, _DWORD))(**((_DWORD **)v5 + 11) + 68))(
            *((_DWORD *)v5 + 11),
            **((_DWORD **)v5 + 11));
    v12 = v10;
    switch ( v9 )
    {
      case 0x66u:
        android::Parcel::writeInt32(v7, *(_DWORD *)(*((_DWORD *)v5 + 11) + 24));
        android::Parcel::writeInt32(v7, *(_DWORD *)(*((_DWORD *)v5 + 11) + 28));
        android::Parcel::writeInt32(v7, v12);
        v13 = *((_DWORD *)v5 + 11);
        v14 = *(_DWORD *)(v13 + 24);
        v15 = *(_DWORD *)(v13 + 28);
        v17 = (*(int (__cdecl **)(int, int))(*(_DWORD *)v13 + 68))(v13, v16);
        _android_log_print(
          3,
          "NSD",
          "NSDSF :  NSD_INTERRUPT_CMD_REQUIRE  mIsSfReady  :  %d  ,mPagesSaveFlag : %d  , isControlByNSD :  %d",
          v14,
          v15,
          v17);
        return 0;
      case 0x67u:
        v18 = *((_DWORD *)v5 + 11);
        v19 = *(void (__fastcall **)(int, int))(*(_DWORD *)v18 + 56);
        v20 = android::Parcel::readInt32(v6);
        v19(v18, v20);
        _android_log_print(3, "NSD", "NSDSF  resetPagesSaveFlag!");
        return 0;
      case 0x65u:
        *(_DWORD *)(*((_DWORD *)v5 + 11) + 16) = 255;
        *(_BYTE *)(*((_DWORD *)v5 + 11) + 53) = 1;
        return 0;
      case 0x64u:
        *(_DWORD *)(*((_DWORD *)v5 + 11) + 16) = 100;
        return 0;
      case 0x68u:
        if ( v10 )
          return 0;
        (*(void (__cdecl **)(_DWORD, int))(**((_DWORD **)v5 + 11) + 60))(*((_DWORD *)v5 + 11), v11);
        return v12;
      default:
        if ( v9 > 2 )
          return -74;
        *(_DWORD *)(*((_DWORD *)v5 + 11) + 20) = v9;
        break;
    }
    return 0;
  }
  if ( a2 == 2000 )
  {
    result = android::Nsd::cursorOnTransact(this, 0x7D0u, a3, a4, a5);
    if ( !result )
    {
      *((_BYTE *)v5 + 20) = 1;
      return result;
    }
    return 0;
  }
  return -74;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00033668) --------------------------------------------------------
int __fastcall android::Nsd::doCursorDraw(android::Nsd *this)
{
  android::Nsd *v1; // r4@1
  int v2; // r3@1
  int v3; // r6@7
  int v4; // r7@7
  int v5; // r5@9
  int v6; // r1@9
  int v7; // r0@12
  int v8; // r5@12
  int v9; // r3@14
  int v10; // r0@18
  int v11; // r2@18
  int v13; // [sp+0h] [bp-68h]@14
  int v14; // [sp+4h] [bp-64h]@14
  int v15; // [sp+8h] [bp-60h]@14
  int v16; // [sp+Ch] [bp-5Ch]@14
  int v17; // [sp+10h] [bp-58h]@14
  int v18; // [sp+18h] [bp-50h]@7
  int v19; // [sp+34h] [bp-34h]@7
  int v20; // [sp+38h] [bp-30h]@12
  char v21; // [sp+3Ch] [bp-2Ch]@15

  v1 = this;
  v2 = *((_DWORD *)this + 12);
  if ( v2 )
  {
    if ( dword_54260 == *(_DWORD *)(v2 + 8)
      && dword_45070 == *(_DWORD *)(v2 + 12)
      && dword_54264 == *(_DWORD *)(v2 + 16)
      && dword_45074 == *(_DWORD *)(v2 + 20) )
    {
      v3 = 0;
      sub_17760((unsigned int **)&v19, *((_DWORD *)this + 10));
      v4 = sub_13540(v19);
      v18 = *(_DWORD *)(v4 + 8);
      while ( v3 != v18 )
      {
        v5 = *(_DWORD *)(v4 + 4);
        v6 = *(_DWORD *)(v5 + 4 * v3);
        if ( v6 )
        {
          if ( *(_DWORD *)(v6 + 312) == *(_DWORD *)(*((_DWORD *)v1 + 12) + 24) )
          {
            android::sp<android::GraphicBuffer>::sp(&v20, (android::RefBase **)(v6 + 4576));
            v7 = *(_DWORD *)(*(_DWORD *)(*(_DWORD *)(v5 + 4 * v3) + 4576) + 68);
            v8 = *(_DWORD *)(v7 + 48);
            if ( android::Nsd::isSupportAFBC((android::Nsd *)v7, (void *)(4 * v3)) )
            {
              if ( dword_4CA58 > 2 )
              {
                v9 = *((_DWORD *)v1 + 12);
                v13 = *(_DWORD *)(v9 + 8);
                v14 = *(_DWORD *)(v9 + 12);
                v15 = *(_DWORD *)(v9 + 16);
                v16 = *(_DWORD *)(v9 + 20);
                v17 = *(_DWORD *)(v20 + 48);
                if ( dword_4CA58 & 1 )
                {
                  sub_32A4A(&unk_54630, (int)&unk_54450, (int)&v21, v8, v13, v14, v15, v16, v17);
                  sub_32B32(
                    &unk_45258,
                    (int)&unk_54270,
                    v8,
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 8),
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 12),
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 16),
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 20),
                    *(_DWORD *)(v20 + 48));
                }
                else
                {
                  sub_32A4A(&unk_54630, (int)&unk_54450, (int)&v21, v8, v13, v14, v15, v16, v17);
                  sub_32B32(
                    &unk_4CA60,
                    (int)&unk_45078,
                    v8,
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 8),
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 12),
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 16),
                    *(_DWORD *)(*((_DWORD *)v1 + 12) + 20),
                    *(_DWORD *)(v20 + 48));
                }
              }
              *((_DWORD *)v1 + 7) = v8;
            }
            else
            {
              v10 = *((_DWORD *)v1 + 12);
              *((_DWORD *)v1 + 7) = v8;
              v11 = *(_DWORD *)(v20 + 48);
              (*(void (**)(void))(*(_DWORD *)v10 + 28))();
            }
            android::sp<android::GraphicBuffer>::~sp(&v20);
          }
        }
        else
        {
          _android_log_print(5, 0, "%s: layer is null, fill dummy information", "int android::Nsd::doCursorDraw()");
        }
        ++v3;
      }
      android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v19);
    }
    else
    {
      *(_DWORD *)(v2 + 20) = 0;
      *(_DWORD *)(v2 + 16) = 0;
      *(_DWORD *)(v2 + 12) = 0;
      *(_DWORD *)(v2 + 8) = 0;
    }
  }
  return 0;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 45070: using guessed type int dword_45070;
// 45074: using guessed type int dword_45074;
// 4CA58: using guessed type int dword_4CA58;
// 54260: using guessed type int dword_54260;
// 54264: using guessed type int dword_54264;

//----- (00033834) --------------------------------------------------------
int __fastcall android::Nsd::clearCursor(int result)
{
  int v1; // r4@1
  int v2; // r3@1
  int v3; // r1@2
  int v4; // r2@2
  int v5; // r5@11
  int v6; // r6@11
  int v7; // r8@11
  int v8; // r7@13
  int v9; // r1@13
  int v10; // r1@16
  int v11; // r0@16
  int v12; // r7@16
  int v13; // r0@18
  int v14; // r3@18
  int i; // r0@19
  int v16; // r1@20
  int v17; // r1@21
  int v18; // lr@21
  int v19; // r10@21
  int v20; // r1@21
  int v21; // r12@22
  int v22; // r11@23
  int v23; // r3@23
  int v24; // [sp+14h] [bp-44h]@11
  int v25; // [sp+28h] [bp-30h]@11
  int v26; // [sp+2Ch] [bp-2Ch]@16

  v1 = result;
  v2 = *(_DWORD *)(result + 48);
  if ( v2 )
  {
    v3 = *(_DWORD *)(v2 + 12);
    v4 = *(_DWORD *)(v2 + 8);
    if ( v3 || v4 || (result = *(_DWORD *)(v2 + 16)) != 0 || *(_DWORD *)(v2 + 20) )
    {
      if ( dword_54260 == v4
        && dword_45070 == v3
        && (result = *(_DWORD *)(v2 + 16), dword_54264 == result)
        && dword_45074 == *(_DWORD *)(v2 + 20) )
      {
        v5 = 0;
        sub_17760((unsigned int **)&v25, *(_DWORD *)(v1 + 40));
        v6 = 0;
        v7 = sub_13540(v25);
        v24 = *(_DWORD *)(v7 + 8);
        while ( v5 != v24 )
        {
          v8 = *(_DWORD *)(v7 + 4);
          v9 = *(_DWORD *)(v8 + 4 * v5);
          if ( v9 )
          {
            if ( *(_DWORD *)(v9 + 312) == *(_DWORD *)(*(_DWORD *)(v1 + 48) + 24) )
            {
              android::sp<android::GraphicBuffer>::sp(&v26, (android::RefBase **)(v9 + 4576));
              v10 = *(_DWORD *)(v8 + 4 * v5);
              v11 = *(_DWORD *)(*(_DWORD *)(v10 + 4576) + 68);
              v12 = *(_DWORD *)(v1 + 28);
              if ( v12 != *(_DWORD *)(v11 + 48) )
              {
                _android_log_print(
                  5,
                  "NSD",
                  "NSD clear buffer different : %p  , pbuf : %p: ",
                  v12,
                  *(_DWORD *)(v11 + 48));
                android::sp<android::GraphicBuffer>::~sp(&v26);
                break;
              }
              v13 = android::Nsd::isSupportAFBC((android::Nsd *)v11, (void *)v10);
              v14 = *(_DWORD *)(v1 + 48);
              if ( v13 )
              {
                if ( dword_4CA58 > 2 )
                  sub_32B32(
                    &unk_54630,
                    (int)&unk_54450,
                    v12,
                    *(_DWORD *)(v14 + 8),
                    *(_DWORD *)(v14 + 12),
                    *(_DWORD *)(v14 + 16),
                    *(_DWORD *)(v14 + 20),
                    *(_DWORD *)(v26 + 48));
              }
              else
              {
                for ( i = *(_DWORD *)(v14 + 12); ; ++i )
                {
                  v16 = *(_DWORD *)(v1 + 48);
                  if ( i >= *(_DWORD *)(v16 + 20) + *(_DWORD *)(v16 + 12) )
                    break;
                  v17 = *(_DWORD *)(v16 + 8);
                  v18 = 4 * v17;
                  v19 = 4 * (v6 - v17);
                  v20 = v17 - v6;
                  while ( 1 )
                  {
                    v21 = *(_DWORD *)(v1 + 48);
                    if ( v20 + v6 >= *(_DWORD *)(v21 + 16) + *(_DWORD *)(v21 + 8) )
                      break;
                    ++v6;
                    v22 = v18 + 4 * *(_DWORD *)(v26 + 48) * i;
                    v23 = *(_DWORD *)(*(_DWORD *)(v21 + 32) + v18 + v19);
                    v18 += 4;
                    *(_DWORD *)(v12 + v22) = v23;
                  }
                }
              }
              *(_DWORD *)(*(_DWORD *)(v1 + 48) + 12) = 0;
              *(_DWORD *)(*(_DWORD *)(v1 + 48) + 8) = 0;
              *(_DWORD *)(*(_DWORD *)(v1 + 48) + 16) = 0;
              *(_DWORD *)(*(_DWORD *)(v1 + 48) + 20) = 0;
              android::sp<android::GraphicBuffer>::~sp(&v26);
            }
          }
          else
          {
            _android_log_print(5, 0, "%s: layer is null, fill dummy information", "void android::Nsd::clearCursor()");
          }
          ++v5;
        }
        result = (int)android::sp<android::DisplayDevice const>::~sp((unsigned int **)&v25);
      }
      else
      {
        *(_DWORD *)(v2 + 20) = 0;
        *(_DWORD *)(v2 + 16) = 0;
        *(_DWORD *)(v2 + 12) = 0;
        *(_DWORD *)(v2 + 8) = 0;
      }
    }
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 45070: using guessed type int dword_45070;
// 45074: using guessed type int dword_45074;
// 4CA58: using guessed type int dword_4CA58;
// 54260: using guessed type int dword_54260;
// 54264: using guessed type int dword_54264;

//----- (00033A18) --------------------------------------------------------
android::RefBase **__fastcall android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this)
{
  android::RefBase **v2; // r4@1
  android::RefBase *v3; // r5@1

  v2 = (android::RefBase **)a1;
  v3 = this;
  if ( this )
    android::RefBase::incStrong(this, a1);
  if ( *v2 )
    android::RefBase::decStrong(*v2, v2);
  *v2 = v3;
  return v2;
}

//----- (00033A38) --------------------------------------------------------
android::RefBase *__fastcall android::Nsd::onFirstRef(android::Nsd *this)
{
  char *v1; // r3@1
  android::Nsd *v2; // r4@1
  android::RefBase *result; // r0@3

  v1 = (char *)*((_DWORD *)this + 10);
  v2 = this;
  if ( v1 )
    android::RefBase::decStrong((android::RefBase *)&v1[*(_DWORD *)(*(_DWORD *)v1 - 12)], (char *)this + 40);
  *((_DWORD *)v2 + 10) = 0;
  android::sp<android::LauncherIdleBase>::operator=((char *)v2 + 44, 0);
  result = (android::RefBase *)*((_DWORD *)v2 + 12);
  if ( result )
    result = (android::RefBase *)android::RefBase::decStrong(result, (char *)v2 + 48);
  *((_DWORD *)v2 + 12) = 0;
  return result;
}

//----- (00033A6E) --------------------------------------------------------
int __fastcall android::Nsd::nsd_is_exit_if_error(android::Nsd *this)
{
  android::Nsd *v1; // r4@1
  android::RefBase *v2; // r0@2
  int result; // r0@3

  v1 = this;
  if ( !*((_DWORD *)this + 11) )
  {
    v2 = (android::RefBase *)getLauncherIdle();
    android::sp<android::LauncherIdleBase>::operator=((char *)v1 + 44, v2);
  }
  result = *((_DWORD *)v1 + 11);
  if ( result )
    result = *(_BYTE *)(result + 53);
  return result;
}

//----- (00033A90) --------------------------------------------------------
android::RefBase *__fastcall android::Nsd::init(int a1, char **a2, __int16 a3)
{
  int v3; // r4@1
  char **v4; // r6@1
  __int16 v5; // r8@1
  const void *v6; // r9@1
  android::RefBase *result; // r0@1
  char *v8; // r6@1
  char *v9; // r3@3
  int v10; // r0@6
  int v11; // r10@6
  android::GraphicBuffer *v12; // r9@11
  android::GraphicBuffer *v13; // r10@11
  int v14; // r6@11
  char *v15; // r1@11
  int v16; // r6@13
  char *v17; // r1@13
  signed int v18; // r6@15
  int v19; // r1@15
  android::RefBase *v20; // r0@16
  int v21; // r0@17
  int v22; // r1@18
  android::RefBase *v23; // r0@23
  android::RefBase *v24; // r6@23
  unsigned int v25; // r3@9
  int v26; // r6@9
  unsigned int v27; // r2@9
  int v28; // [sp+8h] [bp-108h]@7
  int v29; // [sp+Ch] [bp-104h]@9
  unsigned int v30; // [sp+20h] [bp-F0h]@9
  char v31; // [sp+A8h] [bp-68h]@8
  unsigned int v32; // [sp+D4h] [bp-3Ch]@9
  int v33; // [sp+ECh] [bp-24h]@1

  v3 = a1;
  v4 = a2;
  v5 = a3;
  v6 = (const void *)(a1 + 40);
  v33 = v0;
  result = (android::RefBase *)_android_log_print(3, "NSD", "NSDSF : cursor init begin");
  v8 = *v4;
  if ( v8 )
    result = (android::RefBase *)android::RefBase::incStrong(
                                   (android::RefBase *)&v8[*(_DWORD *)(*(_DWORD *)v8 - 12)],
                                   v6);
  v9 = *(char **)(v3 + 40);
  if ( v9 )
    result = (android::RefBase *)android::RefBase::decStrong(
                                   (android::RefBase *)&v9[*(_DWORD *)(*(_DWORD *)v9 - 12)],
                                   v6);
  *(_DWORD *)(v3 + 40) = v8;
  if ( v5 & 0x200 )
  {
    *(_DWORD *)(v3 + 60) = 0;
    v10 = open("/dev/graphics/fb0", 0);
    v11 = v10;
    if ( v10 >= 0 )
    {
      if ( !ioctl(v10, 0x4600u, &v28) && !ioctl(v11, 0x4602u, &v31) )
      {
        v25 = v32;
        v26 = v29;
        v27 = v30 >> 3;
        *(_DWORD *)(v3 + 8) = v28;
        *(_DWORD *)(v3 + 12) = v26;
        *(_DWORD *)(v3 + 16) = v25 / v27;
      }
      close(v11);
    }
    v12 = (android::GraphicBuffer *)operator new(0x88u);
    android::GraphicBuffer::GraphicBuffer(v12, *(_DWORD *)(v3 + 16), *(_DWORD *)(v3 + 12), 1, 0x30u);
    android::sp<android::LauncherIdleBase>::operator=((void *)(v3 + 32), v12);
    v13 = (android::GraphicBuffer *)operator new(0x88u);
    android::GraphicBuffer::GraphicBuffer(v13, *(_DWORD *)(v3 + 16), *(_DWORD *)(v3 + 12), 1, 0x30u);
    android::sp<android::LauncherIdleBase>::operator=((void *)(v3 + 36), v13);
    v14 = operator new(0x48u);
    memset((void *)v14, 0, 0x48u);
    android::RefBase::RefBase((android::RefBase *)(v14 + 64));
    android::Thread::Thread((android::Thread *)v14, 8);
    *(_DWORD *)v14 = 12;
    *(_DWORD *)(v14 + 64) = 64;
    android::RefBase::incStrong((android::RefBase *)(v14 + 64), (const void *)(v3 + 52));
    v15 = *(char **)(v3 + 52);
    if ( v15 )
      android::RefBase::decStrong((android::RefBase *)&v15[*(_DWORD *)(*(_DWORD *)v15 - 12)], (const void *)(v3 + 52));
    *(_DWORD *)(v3 + 52) = v14;
    v16 = operator new(0x48u);
    memset((void *)v16, 0, 0x48u);
    android::RefBase::RefBase((android::RefBase *)(v16 + 64));
    android::Thread::Thread((android::Thread *)v16, 8);
    *(_DWORD *)v16 = 12;
    *(_DWORD *)(v16 + 64) = 64;
    android::RefBase::incStrong((android::RefBase *)(v16 + 64), (const void *)(v3 + 56));
    v17 = *(char **)(v3 + 56);
    if ( v17 )
      android::RefBase::decStrong((android::RefBase *)&v17[*(_DWORD *)(*(_DWORD *)v17 - 12)], (const void *)(v3 + 56));
    *(_DWORD *)(v3 + 56) = v16;
    v18 = *(_DWORD *)(v3 + 8);
    v19 = *(_DWORD *)(v3 + 44);
    *(_DWORD *)(v3 + 68) = 80;
    *(_DWORD *)(v3 + 64) = v18 / 2 - 40;
    if ( !v19 )
    {
      v20 = (android::RefBase *)getLauncherIdle();
      android::sp<android::LauncherIdleBase>::operator=((void *)(v3 + 44), v20);
    }
    v21 = *(_DWORD *)(v3 + 44);
    if ( v21 )
    {
      v22 = *(_DWORD *)(v3 + 8);
      (*(void (**)(void))(*(_DWORD *)v21 + 24))();
      if ( *(_DWORD *)(v3 + 8) > 720 || *(_DWORD *)(v3 + 12) > 1280 )
        (*(void (**)(void))(**(_DWORD **)(v3 + 44) + 64))();
    }
    result = (android::RefBase *)_android_log_print(3, "NSD", "NSDSF : launcher init ok");
  }
  if ( v5 & 0x100 )
  {
    v23 = (android::RefBase *)getCursor();
    v24 = v23;
    if ( v23 )
      android::RefBase::incStrong(v23, (const void *)(v3 + 48));
    result = *(android::RefBase **)(v3 + 48);
    if ( result )
      result = (android::RefBase *)android::RefBase::decStrong(result, (const void *)(v3 + 48));
    *(_DWORD *)(v3 + 48) = v24;
    if ( v24 )
    {
      (*(void (__fastcall **)(android::RefBase *))(*(_DWORD *)v24 + 24))(v24);
      *(_BYTE *)(v3 + 20) = 0;
      result = (android::RefBase *)_android_log_print(3, "NSD", "NSDSF : cursor init ok");
    }
  }
  if ( v33 != v0 )
    _stack_chk_fail(result);
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 10E00: using guessed type int __fastcall _stack_chk_fail(_DWORD);

//----- (00033D08) --------------------------------------------------------
android::RefBase **__fastcall android::Nsd::nsd_exit(android::Nsd *this)
{
  android::Nsd *v1; // r4@1

  v1 = this;
  if ( *((_DWORD *)this + 11) )
  {
    _android_log_print(6, 0, "NSDSF :  nsd_exit");
    (*(void (**)(void))(**((_DWORD **)v1 + 11) + 48))();
  }
  return j_j_j__ZN7android2spINS_16LauncherIdleBaseEEaSEPS1__0((char *)v1 + 32, 0);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00033E78) --------------------------------------------------------
int sub_33E78()
{
  int result; // r0@1
  void *v1; // r0@2
  void *v2; // r4@2
  char *v3; // r0@5
  char *v4; // r0@7
  char *v5; // r0@9
  char *v6; // r0@11
  char *v7; // r0@13

  result = (unsigned __int8)byte_5BE34;
  if ( !byte_5BE34 )
  {
    v1 = dlopen("libhwaps.so", 1);
    v2 = v1;
    if ( v1 )
    {
      dword_5BE3C = (int (*)(void))dlsym(v1, "createNewHwApsUtils");
      if ( !dword_5BE3C )
      {
        v3 = dlerror();
        _android_log_print(
          6,
          0,
          "APS:IFLoad:importExternalFunctions, search function createNewHwApsUtils failed, dlsym err:%s",
          v3);
        byte_45008 = 0;
      }
      dword_5BE38 = (int (*)(void))dlsym(v2, "createNewLauncherIdle");
      if ( !dword_5BE38 )
      {
        v4 = dlerror();
        _android_log_print(
          6,
          0,
          "APS:IFLoad:importExternalFunctions, search function createNewLauncherIdle failed, dlsym err:%s",
          v4);
        byte_45008 = 0;
      }
      dword_5BE30 = (int (*)(void))dlsym(v2, "createNewCursor");
      if ( !dword_5BE30 )
      {
        v5 = dlerror();
        _android_log_print(
          6,
          0,
          "APS:IFLoad:importExternalFunctions, search function createNewCursor failed, dlsym err:%s",
          v5);
        byte_45008 = 0;
      }
      dword_5BE40 = (int (*)(void))dlsym(v2, "createNewApsExternalInterface");
      if ( !dword_5BE40 )
      {
        v6 = dlerror();
        _android_log_print(
          6,
          0,
          "APS:IFLoad:importExternalFunctions, search function createNewApsExternalInterface failed, dlsym err:%s",
          v6);
        byte_45008 = 0;
      }
      dword_5BE44 = (int (*)(void))dlsym(v2, "powerCtrllOfEglswapbuffer");
      if ( !dword_5BE44 )
      {
        v7 = dlerror();
        _android_log_print(
          6,
          0,
          "APS:IFLoad:importExternalFunctions, search function powerCtrllOfEglswapbuffer failed, dlsym err:%s",
          v7);
        byte_45008 = 0;
      }
      result = 1;
      byte_5BE34 = 1;
    }
    else
    {
      dlerror();
      result = j_j___android_log_print(6, (int)v2, "APS:IFLoad:importExternalFunctions, dlopen err:%s");
    }
  }
  return result;
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 1107C: using guessed type int __fastcall eglClientWaitSyncKHR(_DWORD, _DWORD, _DWORD);
// 45008: using guessed type char byte_45008;
// 5BE30: using guessed type int (*dword_5BE30)(void);
// 5BE34: using guessed type char byte_5BE34;
// 5BE38: using guessed type int (*dword_5BE38)(void);
// 5BE3C: using guessed type int (*dword_5BE3C)(void);
// 5BE40: using guessed type int (*dword_5BE40)(void);
// 5BE44: using guessed type int (*dword_5BE44)(void);

//----- (00033FFC) --------------------------------------------------------
int localPowerCtrllOfEglswapbuffer(void)
{
  int result; // r0@4

  if ( !byte_5BE34 )
    sub_33E78();
  if ( dword_5BE44 )
    result = dword_5BE44();
  else
    result = j_j___android_log_print(
               6,
               (int)dword_5BE44,
               "APS:IFLoad:localPowerCtrllOfEglswapbuffer, can't get external functions");
  return result;
}
// 5BE44: invalid function type has been ignored
// 5BE34: using guessed type char byte_5BE34;
// 5BE44: using guessed type int (*dword_5BE44)(void);

//----- (00034034) --------------------------------------------------------
int getHwApsUtils(void)
{
  int (*v0)(void); // r4@3
  int result; // r0@4

  if ( !byte_5BE34 )
    sub_33E78();
  v0 = dword_5BE3C;
  if ( dword_5BE3C )
  {
    result = dword_5BE3C();
  }
  else
  {
    _android_log_print(6, dword_5BE3C, "APS:IFLoad:getHwApsUtils, can't get external functions");
    result = (int)v0;
  }
  return result;
}
// 5BE3C: invalid function type has been ignored
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 5BE34: using guessed type char byte_5BE34;
// 5BE3C: using guessed type int (*dword_5BE3C)(void);

//----- (00034070) --------------------------------------------------------
int getLauncherIdle(void)
{
  int (*v0)(void); // r4@3
  int result; // r0@4

  if ( !byte_5BE34 )
    sub_33E78();
  v0 = dword_5BE38;
  if ( dword_5BE38 )
  {
    result = dword_5BE38();
  }
  else
  {
    _android_log_print(6, dword_5BE38, "APS:IFLoad:getLauncherIdle, can't get external functions");
    result = (int)v0;
  }
  return result;
}
// 5BE38: invalid function type has been ignored
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 5BE34: using guessed type char byte_5BE34;
// 5BE38: using guessed type int (*dword_5BE38)(void);

//----- (000340AC) --------------------------------------------------------
int getCursor(void)
{
  int (*v0)(void); // r4@3
  int result; // r0@4

  if ( !byte_5BE34 )
    sub_33E78();
  v0 = dword_5BE30;
  if ( dword_5BE30 )
  {
    result = dword_5BE30();
  }
  else
  {
    _android_log_print(6, dword_5BE30, "APS:IFLoad:create_new_Cursor_func, can't get external functions");
    result = (int)v0;
  }
  return result;
}
// 5BE30: invalid function type has been ignored
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 5BE30: using guessed type int (*dword_5BE30)(void);
// 5BE34: using guessed type char byte_5BE34;

//----- (000340E8) --------------------------------------------------------
int getExternalInterface(void)
{
  int (*v0)(void); // r4@3
  int result; // r0@4

  if ( !byte_5BE34 )
    sub_33E78();
  v0 = dword_5BE40;
  if ( dword_5BE40 )
  {
    result = dword_5BE40();
  }
  else
  {
    _android_log_print(
      6,
      dword_5BE40,
      "APS:IFLoad:create_new_aps_external_interface_func, can't get external functions");
    result = (int)v0;
  }
  return result;
}
// 5BE40: invalid function type has been ignored
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);
// 5BE34: using guessed type char byte_5BE34;
// 5BE40: using guessed type int (*dword_5BE40)(void);

//----- (00034124) --------------------------------------------------------
signed int __fastcall sub_34124(int a1, int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // r5@1
  unsigned int v5; // r7@1
  int v6; // r10@1
  int v7; // r4@1
  int v8; // r11@2
  unsigned int v9; // r8@7
  int v10; // r9@7
  int v11; // r0@8
  int v12; // r2@9
  int v13; // r1@10
  signed int result; // r0@10
  int v15; // r3@19
  int v16; // r2@19
  int v17; // r0@19
  int v18; // r1@19
  int v19; // r2@37
  int v20; // r0@39
  int v21; // r1@39
  int v22; // r3@39
  unsigned int v23; // r1@40
  unsigned int v24; // r0@40
  int v25; // r1@42
  int v26; // r6@45
  char v27; // r1@45
  int v29; // r0@50
  unsigned int v35; // r0@51
  int v36; // [sp+4h] [bp-34h]@58
  int v37; // [sp+8h] [bp-30h]@6
  int v38; // [sp+Ch] [bp-2Ch]@22
  int v39; // [sp+10h] [bp-28h]@8

  v4 = a4;
  v5 = a3;
  v6 = a2;
  v7 = a1;
  if ( a3 >= a4 )
    goto LABEL_58;
  v8 = 0;
  do
  {
    v9 = v5 + 1;
    v10 = *(_BYTE *)(v6 + (v5 ^ 3));
    if ( !(v10 & 0x80) )
    {
      sub_3499C(v7, 13, &v39);
      v11 = 4 * v10;
      if ( v10 & 0x40 )
        v12 = -4 - (v11 & 0xFC) + v39;
      else
        v12 = v11 + v39 + 4;
      v39 = v12;
LABEL_23:
      sub_349CC(v7, 13, v12);
      ++v5;
      continue;
    }
    v13 = v10 & 0xF0;
    result = 9;
    if ( v13 > 159 )
    {
      if ( v13 > 191 )
      {
        if ( v13 == 192 )
        {
          switch ( v10 )
          {
            case 199:
              if ( !*(_BYTE *)(v6 + (v9 ^ 3)) || (unsigned int)*(_BYTE *)(v6 + (v9 ^ 3)) >= 0x10 )
                return 9;
              goto LABEL_55;
            case 192:
            case 193:
            case 194:
            case 195:
            case 196:
            case 197:
              v18 = 3;
              v16 = ((v10 & 7) + 1) | 0xA0000;
              v17 = v7;
              goto LABEL_33;
            case 200:
            case 201:
              v23 = *(_BYTE *)(v6 + (v9 ^ 3));
              v24 = v23 >> 4;
              if ( v10 == 200 )
                v24 = (v23 >> 4) | 0x10;
              v25 = v23 & 0xF;
              if ( (signed int)(v24 + v25) > 31 )
                return 9;
              v19 = (v25 + 1) | (v24 << 16);
              v20 = v7;
              v21 = 1;
              goto LABEL_53;
            case 198:
              v35 = *(_BYTE *)(v6 + (v9 ^ 3));
              if ( (signed int)((v35 & 0xF) + (v35 >> 4)) > 15 )
                return 9;
              v19 = ((v35 & 0xF) + 1) | (v35 >> 4 << 16);
              v20 = v7;
              v21 = 3;
LABEL_53:
              v22 = 5;
LABEL_54:
              sub_3450C(v20, v21, v19, v22);
              goto LABEL_55;
            default:
              return 9;
          }
          return 9;
        }
        if ( v13 != 208 )
          return result;
        if ( v10 & 8 )
          return 9;
        v18 = 1;
        v16 = ((v10 & 7) + 1) | 0x80000;
        v17 = v7;
LABEL_33:
        v15 = 5;
      }
      else
      {
        if ( v13 != 160 )
        {
          if ( v13 != 176 )
            return result;
          result = 9;
          switch ( v10 )
          {
            case 177:
              if ( v9 >= v4 )
                return 9;
              v19 = *(_BYTE *)(v6 + (v9 ^ 3));
              result = 9;
              if ( !*(_BYTE *)(v6 + (v9 ^ 3)) || v19 & 0xF0 )
                return result;
              v20 = v7;
              v21 = 0;
              v22 = 0;
              goto LABEL_54;
            case 178:
              if ( v9 >= v4 )
                return 9;
              v5 += 2;
              v26 = 0;
              v27 = 0;
              break;
            case 179:
              v22 = 1;
              v29 = *(_BYTE *)(v6 + (v9 ^ 3));
              _R1 = v29 << 12;
              __asm { UXTB16.W        R1, R1 }
              v19 = ((v29 & 0xF) + 1) | _R1;
              v20 = v7;
              v21 = 1;
              goto LABEL_54;
            case 176:
              goto LABEL_57;
            case 180:
            case 181:
            case 182:
            case 183:
              return result;
            default:
              v18 = 1;
              v15 = 1;
              v16 = ((v10 & 7) + 1) | 0x80000;
              v17 = v7;
              goto LABEL_34;
          }
          while ( 1 )
          {
            v26 |= (*(_BYTE *)(v6 + ((v5 - 1) ^ 3)) & 0x7F) << v27;
            if ( !(*(_BYTE *)(v6 + ((v5 - 1) ^ 3)) & 0x80) )
              break;
            _CF = v5 >= v4;
            v27 += 7;
            result = 9;
            ++v5;
            if ( _CF )
              return result;
          }
          sub_3499C(v7, 13, &v37);
          v37 += 4 * v26 + 516;
          sub_349CC(v7, 13, v37);
          continue;
        }
        v15 = 0;
        v16 = ((16 << ((*(_BYTE *)(v6 + (v5 ^ 3)) & 7) + 1)) - 16) | (*(_BYTE *)(v6 + (v5 ^ 3)) << 11) & 0x4000;
        v17 = v7;
        v18 = 0;
      }
LABEL_34:
      sub_3450C(v17, v18, v16, v15);
      ++v5;
      continue;
    }
    if ( v13 != 128 )
    {
      if ( v13 != 144 )
        return result;
      if ( (v10 & 0xF | 2) == 15 )
        return 9;
      sub_3499C(v7, v10 & 0xF, &v38);
      v12 = v38;
      goto LABEL_23;
    }
    if ( v9 >= v4 || !((unsigned __int16)((_WORD)v10 << 12) | 16 * *(_BYTE *)(v6 + ((v5 + 1) ^ 3))) )
      return 9;
    sub_3450C(v7, 0, (unsigned __int16)((_WORD)v10 << 12) | 16 * *(_BYTE *)(v6 + (v9 ^ 3)), 0);
    v8 |= (((_WORD)v10 << 12) & 0x8000u) >> 15;
LABEL_55:
    v5 += 2;
  }
  while ( v5 < v4 );
LABEL_57:
  if ( v8 & 1 )
    return 8;
LABEL_58:
  sub_3499C(v7, 14, &v36);
  sub_349CC(v7, 15, v36);
  return 8;
}

//----- (00034468) --------------------------------------------------------
signed int __fastcall sub_34468(int a1, int a2, unsigned int a3, int a4, int *a5)
{
  int v5; // r5@1
  int v6; // r4@1
  signed int result; // r0@2
  int v8; // r2@4
  int v9; // r0@4
  int v10; // r1@4
  __int64 v11; // r2@10
  int v12; // r1@10

  v5 = a3;
  v6 = a1;
  switch ( a2 )
  {
    case 0:
      result = 2;
      if ( a3 > 0xF || a4 )
        return result;
      v8 = *a5;
      v9 = v6;
      v10 = v5;
      goto LABEL_14;
    case 1:
      if ( a4 == 5 )
      {
        if ( a3 <= 0x1F )
          goto LABEL_21;
        return 2;
      }
      if ( a4 != 1 || a3 > 0xF )
        return 2;
      sub_34AB8(a1);
LABEL_21:
      v11 = *(_QWORD *)a5;
      v12 = v5 + 256;
LABEL_22:
      result = sub_34A40(v6, v12, v11, SHIDWORD(v11));
LABEL_23:
      if ( result )
        result = 2;
      return result;
    case 3:
      result = 2;
      if ( a3 > 0x1F || a4 != 5 )
        return result;
      v11 = *(_QWORD *)a5;
      v12 = v5 + 112;
      goto LABEL_22;
    case 4:
      result = 2;
      if ( a3 > 3 || a4 )
        return result;
      v8 = *a5;
      v10 = v5 + 192;
      v9 = v6;
LABEL_14:
      result = sub_349CC(v9, v10, v8);
      goto LABEL_23;
    default:
      sub_34840(
        (int)"_Unwind_VRS_Result _Unwind_VRS_Set(_Unwind_Context *, _Unwind_VRS_RegClass, uint32_t, _Unwind_VRS_DataRepre"
             "sentation, void *)",
        831,
        (int)"unsupported register class");
      return result;
  }
}

//----- (0003450C) --------------------------------------------------------
signed int __fastcall sub_3450C(int a1, int a2, unsigned int a3, int a4)
{
  int v4; // r5@1
  int v5; // r7@1
  unsigned int v6; // r6@1
  int v7; // r8@1
  int v8; // r4@4
  unsigned int v9; // r7@4
  int *v10; // r0@6
  signed int v11; // r0@6
  signed int v12; // r1@6
  signed int v13; // r2@6
  signed int result; // r0@14
  unsigned int v15; // r4@18
  unsigned int v16; // r6@18
  int v17; // r0@19
  int v18; // r2@19
  int v19; // r0@19
  int v20; // r2@22
  int v21; // [sp+8h] [bp-38h]@19
  int v22; // [sp+Ch] [bp-34h]@19
  int v23; // [sp+14h] [bp-2Ch]@16
  int v24; // [sp+18h] [bp-28h]@6
  int *v25; // [sp+1Ch] [bp-24h]@3

  v4 = a2;
  v5 = a4;
  v6 = a3;
  v7 = a1;
  switch ( a2 )
  {
    case 0:
    case 4:
      if ( a4 || sub_3499C(a1, 13, &v25) )
        return 2;
      v8 = 0;
      v9 = 0;
      do
      {
        if ( (1 << v9) & v6 )
        {
          v10 = v25;
          ++v25;
          v24 = *v10;
          v11 = sub_34468(v7, v4, v9, 0, &v24);
          v12 = 0;
          v13 = 0;
          if ( v9 == 13 )
            v12 = 1;
          if ( !v4 )
            v13 = 1;
          if ( v11 )
            return 2;
          v8 |= v13 & v12;
        }
        ++v9;
      }
      while ( v9 < 0x10 );
      if ( v8 & 1 )
        return 0;
      v20 = (int)v25;
      goto LABEL_28;
    case 1:
    case 3:
      if ( (a4 | 4) != 5 || sub_3499C(a1, 13, &v23) )
        return 2;
      if ( !(_WORD)v6 )
        goto LABEL_21;
      v15 = v6 >> 16;
      v16 = (v6 >> 16) + v6;
      break;
    default:
      sub_34840(
        (int)"_Unwind_VRS_Result _Unwind_VRS_Pop(_Unwind_Context *, _Unwind_VRS_RegClass, uint32_t, _Unwind_VRS_DataRepresentation)",
        965,
        (int)"unsupported register class");
      return result;
  }
  do
  {
    v17 = v23;
    v23 += 4;
    v18 = *(_DWORD *)v17;
    v23 = v17 + 8;
    v19 = *(_DWORD *)(v17 + 4);
    v21 = v18;
    v22 = v19;
    if ( sub_34468(v7, v4, v15, v5, &v21) )
      return 2;
    ++v15;
  }
  while ( v15 < v16 );
LABEL_21:
  if ( v5 == 1 )
  {
    v20 = v23 + 4;
    v23 += 4;
  }
  else
  {
    v20 = v23;
  }
LABEL_28:
  result = sub_349CC(v7, 13, v20);
  if ( result )
    result = 2;
  return result;
}

//----- (00034630) --------------------------------------------------------
signed int __fastcall sub_34630(int a1, int a2, int a3)
{
  int v3; // r0@1
  int v4; // r1@1
  unsigned int *v5; // r12@1
  int v6; // r3@1
  unsigned int v7; // r3@4
  unsigned int v8; // r2@4

  v3 = a2;
  v4 = a3;
  v5 = *(unsigned int **)(v3 + 76);
  v6 = (*v5 >> 24) & 0xF;
  if ( v6 )
  {
    if ( v6 != 1 && v6 != 3 )
      return 9;
    v7 = 4 * ((*v5 >> 16) & 0xFF) + 4;
    v8 = 2;
  }
  else
  {
    v8 = 1;
    v7 = 4;
  }
  if ( !v5 || !(*(_BYTE *)(v3 + 80) & 1) && *(unsigned int *)((char *)v5 + v7) )
    return 9;
  return sub_34124(v4, (int)v5, v8, v7);
}

//----- (00034684) --------------------------------------------------------
void sub_34684()
{
  JUMPOUT(&loc_34638);
}

//----- (0003468C) --------------------------------------------------------
void sub_3468C()
{
  JUMPOUT(&loc_34638);
}

//----- (00034728) --------------------------------------------------------
signed int __fastcall sub_34728(int a1, int a2, char a3)
{
  int v3; // r4@1
  char v4; // r10@1
  signed int i; // r6@1
  signed int v6; // r7@3
  int v7; // r0@8
  int (__fastcall *v8)(signed int, int, char *); // r3@11
  int v9; // r0@12
  int v11; // [sp+0h] [bp-4B0h]@17
  int v12; // [sp+4h] [bp-4ACh]@10
  int (__fastcall *v13)(signed int, int, char *); // [sp+10h] [bp-4A0h]@11
  int v14; // [sp+18h] [bp-498h]@12
  int v15; // [sp+24h] [bp-48Ch]@12
  int v16; // [sp+2Ch] [bp-484h]@10
  char v17; // [sp+30h] [bp-480h]@1

  v3 = a2;
  v4 = a3;
  sub_3494C((int)&v17, a1);
  for ( i = 1; ; --i )
  {
    v6 = 1;
    if ( v4 & 1 )
    {
      v6 = 2;
      if ( !i )
      {
        sub_349CC((int)&v17, -1, *(_DWORD *)(v3 + 16));
        v4 = 0;
      }
    }
    v7 = sub_34A78((int)&v17);
    if ( !v7 )
      break;
    if ( v7 < 0 )
      return 2;
    sub_3499C((int)&v17, -2, &v16);
    if ( sub_34A80((int)&v17, (int)&v12) )
      return 2;
    v8 = v13;
    if ( v13 )
    {
      *(_DWORD *)(v3 + 72) = v12;
      *(_DWORD *)(v3 + 76) = v15;
      *(_DWORD *)(v3 + 80) = v14;
      v9 = v8(v6, v3, &v17);
      if ( v9 == 7 )
      {
        sub_3499C((int)&v17, -1, &v11);
        *(_DWORD *)(v3 + 16) = v11;
        sub_34AA0((int)&v17);
        return 2;
      }
      if ( v9 == 9 )
        abort();
      if ( v9 != 8 )
        return 2;
      if ( v16 == *(_DWORD *)(v3 + 32) )
        sub_34840(
          (int)"_Unwind_Reason_Code unwind_phase2(unw_context_t *, _Unwind_Exception *, bool)",
          642,
          (int)"during phase1 personality function said it would stop here, but now in phase2 it did not stop here");
    }
  }
  return 5;
}

//----- (00034840) --------------------------------------------------------
void __fastcall sub_34840(int a1, int a2, int a3)
{
  fprintf(v0, "libunwind: %s %s:%d - %s\n", a1, "external/libcxxabi/src/Unwind/Unwind-EHABI.cpp", a2, a3);
  abort();
}

//----- (000348C4) --------------------------------------------------------
int __fastcall sub_348C4(int a1, int a2, int a3, int a4, int a5)
{
  int v5; // r4@0
  int v6; // r5@0
  int v7; // r6@0
  int v8; // r7@0
  int v9; // r8@0
  int v10; // r9@0
  int v11; // r10@0
  int v12; // r11@0
  int v13; // r12@0
  int v14; // lr@0

  *(_DWORD *)a1 = a1;
  *(_DWORD *)(a1 + 4) = a2;
  *(_DWORD *)(a1 + 8) = a3;
  *(_DWORD *)(a1 + 12) = a4;
  *(_DWORD *)(a1 + 16) = v5;
  *(_DWORD *)(a1 + 20) = v6;
  *(_DWORD *)(a1 + 24) = v7;
  *(_DWORD *)(a1 + 28) = v8;
  *(_DWORD *)(a1 + 32) = v9;
  *(_DWORD *)(a1 + 36) = v10;
  *(_DWORD *)(a1 + 40) = v11;
  *(_DWORD *)(a1 + 44) = v12;
  *(_DWORD *)(a1 + 48) = v13;
  *(_DWORD *)(a1 + 52) = &a5;
  *(_DWORD *)(a1 + 56) = v14;
  *(_DWORD *)(a1 + 60) = v14;
  return 0;
}

//----- (000348DC) --------------------------------------------------------
int __fastcall sub_348DC(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D0-D15} }
  return result;
}

//----- (000348E4) --------------------------------------------------------
int __fastcall sub_348E4(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D0-D15} }
  return result;
}

//----- (000348EC) --------------------------------------------------------
int __fastcall sub_348EC(int _R0)
{
  int result; // r0@1

  __asm { VSTMIA          R0, {D16-D31} }
  return result;
}

//----- (000348F4) --------------------------------------------------------
void sub_348F4()
{
  __asm
  {
    STCL            p1, c0, [R0],#8
    STCL            p1, c1, [R0],#8
    STCL            p1, c2, [R0],#8
    STCL            p1, c3, [R0],#8
    STCL            p1, c4, [R0],#8
    STCL            p1, c5, [R0],#8
    STCL            p1, c6, [R0],#8
    STCL            p1, c7, [R0],#8
    STCL            p1, c8, [R0],#8
    STCL            p1, c9, [R0],#8
    STCL            p1, c10, [R0],#8
    STCL            p1, c11, [R0],#8
    STCL            p1, c12, [R0],#8
    STCL            p1, c13, [R0],#8
    STCL            p1, c14, [R0],#8
    STCL            p1, c15, [R0],#8
  }
}

//----- (00034938) --------------------------------------------------------
void sub_34938()
{
  __asm
  {
    STC2            p1, c8, [R0],#4
    STC2            p1, c9, [R0],#4
    STC2            p1, c10, [R0],#4
    STC2            p1, c11, [R0],#4
  }
}

//----- (0003494C) --------------------------------------------------------
int __fastcall sub_3494C(int a1, int a2)
{
  int v2; // r4@1

  v2 = a1;
  *(_DWORD *)a1 = &unk_3FED0;
  *(_DWORD *)(a1 + 4) = &unk_5BE48;
  *(_BYTE *)(a1 + 76) = 0;
  *(_DWORD *)(a1 + 72) = 0;
  _aeabi_memcpy(a1 + 8, a2);
  _aeabi_memset(v2 + 80, 450, 0);
  sub_34ED0(v2, 0);
  return 0;
}
// 10860: using guessed type int __fastcall _aeabi_memset(_DWORD, _DWORD, _DWORD);
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);

//----- (0003499C) --------------------------------------------------------
signed int __fastcall sub_3499C(int a1, int a2, _DWORD *a3)
{
  int v3; // r6@1
  _DWORD *v4; // r4@1
  int v5; // r5@1
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 8))() == 1 )
  {
    *v4 = (*(int (__fastcall **)(int, int))(*(_DWORD *)v3 + 12))(v3, v5);
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (000349CC) --------------------------------------------------------
signed int __fastcall sub_349CC(int a1, int a2, int a3)
{
  int v3; // r4@1
  int v4; // r6@1
  int v5; // r5@1
  signed int v6; // r5@3

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 8))() == 1 )
  {
    (*(void (__fastcall **)(int, int, int))(*(_DWORD *)v3 + 16))(v3, v5, v4);
    if ( v5 == -1 )
    {
      v6 = 0;
      (*(void (__fastcall **)(int, _DWORD))(*(_DWORD *)v3 + 52))(v3, 0);
    }
    else
    {
      v6 = 0;
    }
  }
  else
  {
    v6 = -6542;
  }
  return v6;
}

//----- (00034A10) --------------------------------------------------------
signed int __fastcall sub_34A10(int a1, int a2, _QWORD *a3)
{
  int v3; // r6@1
  _QWORD *v4; // r4@1
  int v5; // r5@1
  __int64 v6; // r0@2
  signed int result; // r0@2

  v3 = a1;
  v4 = a3;
  v5 = a2;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 20))() == 1 )
  {
    LODWORD(v6) = (*(int (__fastcall **)(int, int))(*(_DWORD *)v3 + 24))(v3, v5);
    *v4 = v6;
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (00034A40) --------------------------------------------------------
signed int __fastcall sub_34A40(int a1, int a2, int a3, int a4)
{
  int v4; // r7@1
  int v5; // r5@1
  int v6; // r6@1
  int v7; // r8@1
  signed int result; // r0@2

  v4 = a1;
  v5 = a3;
  v6 = a2;
  v7 = a4;
  if ( (*(int (**)(void))(*(_DWORD *)a1 + 20))() == 1 )
  {
    (*(void (__fastcall **)(int, int, int, int))(*(_DWORD *)v4 + 28))(v4, v6, v5, v7);
    result = 0;
  }
  else
  {
    result = -6542;
  }
  return result;
}

//----- (00034A78) --------------------------------------------------------
int __fastcall sub_34A78(int a1)
{
  return (*(int (**)(void))(*(_DWORD *)a1 + 32))();
}

//----- (00034A80) --------------------------------------------------------
signed int __fastcall sub_34A80(int a1, int a2)
{
  int v2; // r4@1
  signed int result; // r0@1

  v2 = a2;
  (*(void (**)(void))(*(_DWORD *)a1 + 36))();
  result = 0;
  if ( !*(_DWORD *)(v2 + 4) )
    result = -6549;
  return result;
}

//----- (00034AA0) --------------------------------------------------------
signed int __fastcall sub_34AA0(int a1)
{
  (*(void (**)(void))(*(_DWORD *)a1 + 40))();
  return -6540;
}

//----- (00034AB8) --------------------------------------------------------
int __fastcall sub_34AB8(int a1)
{
  return (*(int (**)(void))(*(_DWORD *)a1 + 60))();
}

//----- (00034ED0) --------------------------------------------------------
int __fastcall sub_34ED0(int a1, int a2)
{
  int v2; // r4@1
  int v3; // r6@1
  unsigned int v4; // r5@1
  int result; // r0@5
  int v6; // [sp+4h] [bp-1Ch]@3
  int v7; // [sp+8h] [bp-18h]@3
  int v8; // [sp+Ch] [bp-14h]@1

  v2 = a1;
  v3 = a2;
  v4 = (*(int (**)(void))(*(_DWORD *)a1 + 12))() & 0xFFFFFFFE;
  v8 = 0;
  if ( v3 )
    --v4;
  v6 = _gnu_Unwind_Find_exidx(v4, &v8);
  v7 = v8;
  if ( !v6 || !v8 || (result = ((int (__fastcall *)(int, unsigned int, int *))sub_34FB0)(v2, v4, &v6)) == 0 )
  {
    result = 1;
    *(_BYTE *)(v2 + 528) = 1;
  }
  return result;
}
// 11C1C: using guessed type int __fastcall _gnu_Unwind_Find_exidx(_DWORD, _DWORD);
// 34FB0: using guessed type int sub_34FB0();

//----- (00034F2C) --------------------------------------------------------
void __fastcall sub_34F2C(int a1, int a2, int a3, int a4)
{
  fprintf(v0, "libunwind: %s %s:%d - %s\n", a1, a2, a3, a4);
  abort();
}

//----- (00034F60) --------------------------------------------------------
int __fastcall sub_34F60(int a1)
{
  int v1; // r4@1
  int v2; // r0@2
  int result; // r0@9

  v1 = a1;
  if ( *(_BYTE *)(a1 + 65) )
  {
    v2 = a1 + 72;
    if ( *(_BYTE *)(v1 + 64) )
      sub_35834(v2);
    else
      sub_3582C(v2);
  }
  if ( *(_BYTE *)(v1 + 66) )
    sub_3583C(v1 + 208);
  if ( *(_BYTE *)(v1 + 67) )
    sub_35844((_DWORD *)(v1 + 336));
  result = *(_BYTE *)(v1 + 68);
  if ( *(_BYTE *)(v1 + 68) )
    result = sub_36E8C((_DWORD *)(v1 + 464));
  return result;
}

//----- (00035140) --------------------------------------------------------
int __fastcall sub_35140(int result, int a2, int a3, _DWORD *a4, int a5, int a6, int a7, _DWORD *a8)
{
  unsigned int v8; // r4@1
  unsigned int v9; // r5@2
  int v10; // r6@3

  v8 = a5 - a2;
  while ( 1 )
  {
    v9 = v8;
    if ( !v8 )
      break;
    v10 = a2 + (v8 >> 1);
    v8 >>= 1;
    if ( *a8 >= *a4 + 8 * v10 + (2 * *(_DWORD *)(*a4 + 8 * v10) & 0x80000000 | *(_DWORD *)(*a4 + 8 * v10)) )
    {
      v8 = v9 - 1 - v8;
      a2 = v10 + 1;
    }
  }
  *(_DWORD *)result = a2;
  *(_DWORD *)(result + 4) = a3;
  *(_DWORD *)(result + 8) = a4;
  return result;
}

//----- (0003582C) --------------------------------------------------------
int __fastcall sub_3582C(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D0-D15} }
  return result;
}

//----- (00035834) --------------------------------------------------------
int __fastcall sub_35834(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D0-D15} }
  return result;
}

//----- (0003583C) --------------------------------------------------------
int __fastcall sub_3583C(int _R0)
{
  int result; // r0@1

  __asm { VLDMIA          R0, {D16-D31} }
  return result;
}

//----- (00035844) --------------------------------------------------------
int __fastcall sub_35844(_DWORD *a1)
{
  int *v5; // r0@1
  int result; // r0@1

  _T1 = *a1;
  v5 = a1 + 2;
  __asm { LDCL            p1, c0, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c1, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c2, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c3, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c4, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c5, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c6, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c7, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c8, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c9, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c10, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c11, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c12, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c13, [R0],#8 }
  _T1 = *v5;
  v5 += 2;
  __asm { LDCL            p1, c14, [R0],#8 }
  _T1 = *v5;
  result = (int)(v5 + 2);
  __asm { LDCL            p1, c15, [R0],#8 }
  return result;
}

//----- (00035888) --------------------------------------------------------
int __fastcall sub_35888(_DWORD *a1)
{
  int *v5; // r0@1
  int result; // r0@1

  _T1 = *a1;
  v5 = a1 + 1;
  __asm { LDC2            p1, c8, [R0],#4 }
  _T1 = *v5;
  ++v5;
  __asm { LDC2            p1, c9, [R0],#4 }
  _T1 = *v5;
  ++v5;
  __asm { LDC2            p1, c10, [R0],#4 }
  _T1 = *v5;
  result = (int)(v5 + 1);
  __asm { LDC2            p1, c11, [R0],#4 }
  return result;
}

//----- (0003589C) --------------------------------------------------------
int __fastcall _aeabi_drsub(__int64 a1, __int64 a2)
{
  HIDWORD(a1) ^= 0x80000000;
  return _aeabi_dadd(a1, a2);
}

//----- (000358A8) --------------------------------------------------------
int __fastcall _aeabi_dadd(__int64 a1, __int64 a2)
{
  int v2; // r4@1
  int v3; // r5@1
  bool v4; // zf@1
  signed int v5; // r4@9
  bool v6; // zf@9
  bool v7; // nf@9
  unsigned __int8 v8; // vf@9
  int v9; // r5@9
  __int64 v10; // r2@12
  int v11; // r4@19
  char v12; // lr@19
  unsigned int v13; // r12@20
  __int64 v14; // r0@20
  bool v15; // nf@20
  char v16; // r5@21
  int v17; // t0@26
  int v18; // off@29
  unsigned int v19; // off@29
  unsigned __int8 v20; // cf@30
  int v21; // off@33
  int v22; // r4@33
  bool v23; // zf@34
  unsigned int v24; // r3@36
  int v25; // r3@38
  bool v26; // zf@38
  bool v27; // nf@38
  unsigned __int8 v28; // vf@38
  int v29; // r2@38
  int v30; // r4@46
  int v31; // r4@48
  int v32; // r4@48
  bool v33; // zf@55
  bool v34; // zf@58

  v2 = 2 * HIDWORD(a1);
  v3 = 2 * HIDWORD(a2);
  v4 = 2 * HIDWORD(a1) == 2 * HIDWORD(a2);
  if ( 2 * HIDWORD(a1) == 2 * HIDWORD(a2) )
    v4 = (_DWORD)a1 == (_DWORD)a2;
  if ( !v4 )
  {
    v4 = (v2 | (unsigned int)a1) == 0;
    if ( v2 | (unsigned int)a1 )
    {
      v4 = (v3 | (unsigned int)a2) == 0;
      if ( v3 | (unsigned int)a2 )
      {
        v4 = ~(v2 >> 21) == 0;
        if ( ~(v2 >> 21) )
          v4 = ~(v3 >> 21) == 0;
      }
    }
  }
  if ( v4 )
  {
    v33 = ~(v2 >> 21) == 0;
    if ( ~(v2 >> 21) )
      v33 = ~(v3 >> 21) == 0;
    if ( v33 )
    {
      if ( ~(v2 >> 21) )
        a1 = a2;
    }
    else
    {
      v34 = v2 == v3;
      if ( v2 == v3 )
        v34 = (_DWORD)a1 == (_DWORD)a2;
      if ( v34 )
      {
        if ( HIDWORD(a1) != HIDWORD(a2) )
        {
          LODWORD(a1) = 0;
          return a1;
        }
        if ( !((unsigned int)v2 >> 21) )
        {
          LODWORD(a1) = 2 * a1;
          return a1;
        }
        if ( (unsigned int)v2 < 0xFFC00000 )
          return a1;
        goto LABEL_69;
      }
      if ( !(v2 | (unsigned int)a1) )
        LODWORD(a1) = a2;
    }
  }
  else
  {
    v5 = (unsigned int)v2 >> 21;
    v8 = __OFSUB__((unsigned int)v3 >> 21, v5);
    v9 = ((unsigned int)v3 >> 21) - v5;
    v6 = v9 == 0;
    v7 = v9 < 0;
    if ( (v9 < 0) ^ v8 )
      v9 = -v9;
    if ( !((unsigned __int8)(v7 ^ v8) | v6) )
    {
      v5 += v9;
      v10 = a1 ^ a2;
      a1 ^= v10;
      a2 = a1 ^ v10;
    }
    if ( (unsigned int)v9 <= 0x36 )
    {
      v4 = (HIDWORD(a1) & 0x80000000) == 0;
      HIDWORD(a1) = HIDWORD(a1) & 0xFFFFF | 0x100000;
      if ( !v4 )
      {
        v20 = (unsigned int)a1 <= 0;
        LODWORD(a1) = -(signed int)a1;
        HIDWORD(a1) = -(HIDWORD(a1) + !v20);
      }
      v4 = (HIDWORD(a2) & 0x80000000) == 0;
      HIDWORD(a2) = HIDWORD(a2) & 0xFFFFF | 0x100000;
      if ( !v4 )
      {
        v20 = (unsigned int)a2 <= 0;
        LODWORD(a2) = -(signed int)a2;
        HIDWORD(a2) = -(HIDWORD(a2) + !v20);
      }
      if ( v5 == v9 )
      {
        HIDWORD(a2) ^= 0x100000u;
        if ( v5 )
        {
          --v9;
        }
        else
        {
          HIDWORD(a1) ^= 0x100000u;
          v5 = 1;
        }
      }
      v11 = v5 - 1;
      v12 = 32 - v9;
      if ( v9 > 32 )
      {
        v16 = v9 - 32;
        v13 = HIDWORD(a2) << (v12 + 32);
        if ( (unsigned int)a2 >= 1 )
          v13 |= 2u;
        LODWORD(a1) = a1 + (SHIDWORD(a2) >> v16);
        HIDWORD(a1) += (SHIDWORD(a2) >> 31) + __CFSHR__(HIDWORD(a2), 31);
        v15 = SHIDWORD(a1) < 0;
      }
      else
      {
        v13 = (_DWORD)a2 << v12;
        v14 = a1 + ((unsigned int)a2 >> v9);
        LODWORD(a1) = v14 + (HIDWORD(a2) << v12);
        HIDWORD(a1) += (SHIDWORD(a2) >> v9) + __CFSHR__(HIDWORD(a2), v9);
        v15 = SHIDWORD(a1) < 0;
      }
      if ( v15 )
      {
        v20 = v13 <= 0;
        v13 = -v13;
        v17 = a1 + !v20;
        v20 = (unsigned int)a1 + !v20 <= 0;
        LODWORD(a1) = -v17;
        HIDWORD(a1) = -(HIDWORD(a1) + !v20);
      }
      if ( HIDWORD(a1) >= 0x100000 )
      {
        if ( HIDWORD(a1) < 0x200000 )
          goto LABEL_30;
        v18 = __RCR__(a1, 1);
        LODWORD(a1) = v18;
        v19 = __RCR__(v13, 1);
        v13 = v19;
        if ( (unsigned int)((v11 + 1) << 21) < 0xFFC00000 )
          goto LABEL_30;
LABEL_69:
        LODWORD(a1) = 0;
        return a1;
      }
      v20 = __CFSHL__(v13, 1);
      v13 *= 2;
      v21 = v20 + (_DWORD)a1;
      v20 = __CFADD__(v20, (_DWORD)a1) | __CFADD__((_DWORD)a1, v21);
      LODWORD(a1) = a1 + v21;
      HIDWORD(a1) += v20 + HIDWORD(a1);
      v22 = v11 - 1;
      if ( HIDWORD(a1) & 0x100000 )
      {
LABEL_30:
        v20 = v13 >= 0x80000000;
        if ( v13 == 0x80000000 )
          v20 = a1 & 1;
        LODWORD(a1) = v20 + (_DWORD)a1;
        return a1;
      }
      v23 = HIDWORD(a1) == 0;
      if ( !HIDWORD(a1) )
      {
        HIDWORD(a1) = a1;
        LODWORD(a1) = 0;
      }
      v24 = __clz(HIDWORD(a1));
      if ( v23 )
        v24 += 32;
      v25 = v24 - 11;
      v28 = __OFSUB__(v25, 32);
      v29 = v25 - 32;
      v26 = v25 == 32;
      v27 = v25 - 32 < 0;
      if ( v25 < 32 )
      {
        v28 = __OFADD__(v29, 12);
        v26 = v25 == 20;
        v27 = v25 - 20 < 0;
        if ( !((unsigned __int8)(v27 ^ __OFADD__(v29, 12)) | (v25 == 20)) )
        {
          LODWORD(a1) = HIDWORD(a1) << v25;
          HIDWORD(a1) >>= 32 - v25;
LABEL_46:
          v8 = __OFSUB__(v22, v25);
          v30 = v22 - v25;
          if ( (v30 < 0) ^ v8 )
          {
            v31 = ~v30;
            v8 = __OFSUB__(v31, 31);
            v32 = v31 - 31;
            if ( (v32 < 0) ^ v8 )
              LODWORD(a1) = ((unsigned int)a1 >> (v32 + 32)) | (HIDWORD(a1) << -(char)v32);
            else
              LODWORD(a1) = HIDWORD(a1) >> v32;
          }
          return a1;
        }
        LOBYTE(v29) = v25;
      }
      if ( (unsigned __int8)(v27 ^ v28) | v26 )
        LOBYTE(v13) = 32 - v29;
      HIDWORD(a1) <<= v29;
      if ( (unsigned __int8)(v27 ^ v28) | v26 )
      {
        HIDWORD(a1) |= (unsigned int)a1 >> v13;
        LODWORD(a1) = (_DWORD)a1 << v29;
      }
      goto LABEL_46;
    }
  }
  return a1;
}

//----- (00035B54) --------------------------------------------------------
int __fastcall _floatunsidf(int result)
{
  if ( result )
    JUMPOUT(&loc_359F0);
  return result;
}

//----- (00035B78) --------------------------------------------------------
int __fastcall _floatsidf(int result)
{
  if ( result )
    JUMPOUT(&loc_359F0);
  return result;
}

//----- (00035BA0) --------------------------------------------------------
int __fastcall _extendsfdf2(int a1, int a2, int a3, unsigned int a4)
{
  int v4; // r2@1
  int result; // r0@1
  bool v6; // zf@4

  v4 = 2 * a1;
  v6 = 2 * a1 == 0;
  result = a1 << 29;
  if ( v6 || (a4 = v4 & 0xFF000000) == 0 || a4 == -16777216 )
  {
    v6 = v4 == 0;
    if ( v4 )
      v6 = a4 == -16777216;
    if ( !v6 )
      JUMPOUT(&loc_359F0);
  }
  return result;
}

//----- (00035BE0) --------------------------------------------------------
int __fastcall _floatundidf(__int64 a1)
{
  if ( a1 )
    JUMPOUT(&loc_35C10);
  return a1;
}

//----- (00035BF4) --------------------------------------------------------
int __fastcall _floatdidf(__int64 a1)
{
  if ( a1 )
  {
    if ( (HIDWORD(a1) & 0x80000000 & 0x80000000) != 0 )
      HIDWORD(a1) = -(HIDWORD(a1) + ((unsigned int)a1 > 0));
    if ( !(HIDWORD(a1) >> 22) )
      JUMPOUT(&loc_35994);
    JUMPOUT(&loc_35994);
  }
  return a1;
}

//----- (00035C54) --------------------------------------------------------
int __fastcall _aeabi_frsub(int a1, int a2, int a3, unsigned int a4)
{
  return _aeabi_fadd(a1 ^ 0x80000000, a2, a3, a4);
}

//----- (00035C60) --------------------------------------------------------
int __fastcall _aeabi_fadd(int result, int a2, int a3, unsigned int a4)
{
  bool v4; // zf@1
  int v5; // r2@1
  signed int v6; // r2@8
  unsigned __int8 v7; // vf@8
  int v8; // r3@8
  int v9; // r1@9
  int v10; // r0@13
  int v11; // r1@15
  unsigned int v12; // r2@18
  unsigned int v13; // r0@18
  unsigned int v14; // r1@18
  unsigned int v15; // r3@18
  unsigned __int8 v16; // cf@19
  unsigned int v17; // off@22
  int v18; // r0@23
  unsigned int v19; // r12@27
  bool v20; // nf@27
  unsigned __int8 v21; // vf@27
  int v22; // r2@27
  unsigned int v23; // r0@27
  signed int v24; // r3@38
  bool v25; // zf@38
  bool v26; // zf@55
  int v27; // r2@55
  bool v28; // zf@60

  v5 = 2 * result;
  v4 = 2 * result == 0;
  if ( 2 * result )
  {
    a4 = 2 * a2;
    v4 = 2 * a2 == 0;
  }
  if ( !v4 )
  {
    v4 = v5 == a4;
    if ( v5 != a4 )
    {
      v4 = ~(v5 >> 24) == 0;
      if ( ~(v5 >> 24) )
        v4 = ~((signed int)a4 >> 24) == 0;
    }
  }
  if ( v4 )
  {
    v24 = 2 * a2;
    v25 = ~(v5 >> 24) == 0;
    if ( ~(v5 >> 24) )
      v25 = ~(v24 >> 24) == 0;
    if ( v25 )
    {
      v27 = ~(v5 >> 24);
      v26 = v27 == 0;
      if ( v27 )
        result = a2;
      else
        v26 = ~(v24 >> 24) == 0;
      if ( !v26 )
        a2 = result;
      v28 = result << 9 == 0;
      if ( !(result << 9) )
        v28 = a2 << 9 == 0;
      if ( v28 )
        v28 = result == a2;
      if ( !v28 )
        result |= 0x400000u;
    }
    else if ( v5 == v24 )
    {
      if ( result != a2 )
        return 0;
      if ( v5 & 0xFF000000 )
      {
        if ( (unsigned int)v5 < 0xFE000000 )
        {
          result += 0x800000;
          return result;
        }
        v15 = result & 0x80000000;
        return v15 | 0x7F800000;
      }
      v16 = __CFSHL__(result, 1);
      result *= 2;
      if ( v16 )
        result |= 0x80000000;
    }
    else if ( !v5 )
    {
      result = a2;
    }
  }
  else
  {
    v6 = (unsigned int)v5 >> 24;
    v7 = __OFSUB__(a4 >> 24, v6);
    v8 = (a4 >> 24) - v6;
    if ( !((unsigned __int8)((v8 < 0) ^ v7) | (v8 == 0)) )
    {
      v6 += v8;
      v9 = result ^ a2;
      result ^= v9;
      a2 = result ^ v9;
    }
    if ( (v8 < 0) ^ v7 )
      v8 = -v8;
    if ( (unsigned int)v8 <= 0x19 )
    {
      v4 = (result & 0x80000000) == 0;
      v10 = (result | 0x800000) & 0xFFFFFF;
      if ( !v4 )
        v10 = -v10;
      v4 = (a2 & 0x80000000) == 0;
      v11 = (a2 | 0x800000) & 0xFFFFFF;
      if ( !v4 )
        v11 = -v11;
      if ( v6 == v8 )
      {
        v11 ^= 0x800000u;
        if ( v6 )
        {
          LOBYTE(v8) = v8 - 1;
        }
        else
        {
          v10 ^= 0x800000u;
          v6 = 1;
        }
      }
      v12 = v6 - 1;
      v13 = v10 + (v11 >> v8);
      v14 = v11 << (32 - v8);
      v15 = v13 & 0x80000000;
      if ( (v13 & 0x80000000) != 0 )
      {
        v16 = v14 <= 0;
        v14 = -v14;
        v13 = -(v13 + !v16);
      }
      if ( v13 >= 0x800000 )
      {
        if ( v13 < 0x1000000 || (v13 >>= 1, v17 = __RCR__(v14, 1), v14 = v17, ++v12, v12 < 0xFE) )
        {
LABEL_23:
          v18 = (v12 << 23) + (v14 >= 0x80000000) + v13;
          if ( v14 == 0x80000000 )
            v18 &= 0xFFFFFFFE;
          return v18 | v15;
        }
        return v15 | 0x7F800000;
      }
      v16 = __CFSHL__(v14, 1);
      v14 *= 2;
      v13 += v16 + v13;
      --v12;
      if ( v13 & 0x800000 )
        goto LABEL_23;
      v19 = __clz(v13) - 8;
      v21 = __OFSUB__(v12, v19);
      v22 = v12 - v19;
      v20 = v22 < 0;
      v23 = v13 << v19;
      if ( (v22 < 0) ^ v21 )
        v22 = -v22;
      else
        v23 += v22 << 23;
      if ( v20 ^ v21 )
        result = v15 | (v23 >> v22);
      else
        result = v23 | v15;
    }
  }
  return result;
}

//----- (00035DF0) --------------------------------------------------------
void _floatunsisf()
{
  JUMPOUT(&loc_35E00);
}

//----- (00035DF8) --------------------------------------------------------
int __fastcall _floatsisf(int result)
{
  if ( (result & 0x80000000 & 0x80000000) != 0 )
    result = -result;
  if ( result )
    JUMPOUT(&loc_35E58);
  return result;
}

//----- (00035E18) --------------------------------------------------------
int __fastcall _floatundisf(__int64 a1)
{
  if ( a1 )
    JUMPOUT(&loc_35E40);
  return a1;
}

//----- (00035E28) --------------------------------------------------------
int __fastcall _floatdisf(__int64 a1)
{
  unsigned int v1; // r3@2
  bool v2; // cf@3
  bool v3; // zf@4
  unsigned int v4; // r12@4
  int v5; // r3@6
  unsigned int v6; // r2@8
  unsigned __int8 v7; // vf@8
  int v8; // r2@8
  int v9; // r3@8
  int v10; // r12@9
  char v11; // r2@12

  if ( a1 )
  {
    v1 = HIDWORD(a1) & 0x80000000;
    if ( (HIDWORD(a1) & 0x80000000 & 0x80000000) != 0 )
    {
      v2 = (unsigned int)a1 <= 0;
      LODWORD(a1) = -(signed int)a1;
      HIDWORD(a1) = -(HIDWORD(a1) + !v2);
    }
    v4 = HIDWORD(a1);
    v3 = HIDWORD(a1) == 0;
    if ( !HIDWORD(a1) )
    {
      v4 = a1;
      HIDWORD(a1) = a1;
      LODWORD(a1) = 0;
    }
    v5 = v1 | 0x5B000000;
    if ( v3 )
      v5 -= 0x10000000;
    v6 = __clz(v4);
    v7 = __OFSUB__(v6, 8);
    v8 = v6 - 8;
    v9 = v5 - 0x800000 - (v8 << 23);
    if ( (v8 < 0) ^ v7 )
    {
      v11 = v8 + 32;
      v3 = ((unsigned int)a1 | 2 * (HIDWORD(a1) << v11)) == 0;
      LODWORD(a1) = (HIDWORD(a1) >> (32 - v11)) + __CFSHL__(HIDWORD(a1) << v11, 1) + v9;
      if ( v3 )
        LODWORD(a1) = a1 & ~(HIDWORD(a1) << v11 >> 31);
    }
    else
    {
      v10 = (_DWORD)a1 << v8;
      LODWORD(a1) = ((unsigned int)a1 >> (32 - v8)) + ((_DWORD)a1 << v8 >= 0x80000000) + v9 + (HIDWORD(a1) << v8);
      if ( v10 == 0x80000000 )
        LODWORD(a1) = a1 & 0xFFFFFFFE;
    }
  }
  return a1;
}

//----- (00035F24) --------------------------------------------------------
int _aeabi_ldiv0()
{
  return raise(8);
}

//----- (00035F34) --------------------------------------------------------
unsigned int __fastcall _fixdfdi(unsigned int a1, unsigned int a2)
{
  unsigned int v2; // r5@1
  unsigned int v3; // r4@1
  unsigned int result; // r0@2

  v2 = a1;
  v3 = a2;
  if ( j___aeabi_dcmplt(a1, a2, 0, 0) )
    result = -j___fixunsdfdi(v2, v3 + 2147483648);
  else
    result = j___fixunsdfdi(v2, v3);
  return result;
}

//----- (00035F78) --------------------------------------------------------
unsigned int __fastcall _fixunsdfdi(unsigned int a1, unsigned int a2)
{
  unsigned int v2; // r0@1
  int v3; // r1@1
  int v4; // r0@1
  int v5; // r0@1
  unsigned int v6; // r1@1
  int v7; // r0@1
  int v8; // r1@1

  v2 = j___muldf3(a1, a2, 0, 0x3DF00000u);
  v4 = j___fixunsdfsi(v2, v3);
  v5 = j___floatunsidf(v4);
  j___muldf3(v5, v6, 0, 0x41F00000u);
  v7 = j___subdf3();
  return j___fixunsdfsi(v7, v8);
}

//----- (00036208) --------------------------------------------------------
signed __int64 __fastcall _gnu_ldivmod_helper(signed __int64 a1, signed __int64 a2, _QWORD *a3)
{
  signed __int64 v3; // r4@1
  signed __int64 result; // r0@1

  v3 = a1;
  result = a1 / a2;
  *a3 = v3 - result * a2;
  return result;
}

//----- (00036244) --------------------------------------------------------
unsigned __int64 __fastcall _gnu_uldivmod_helper(unsigned __int64 a1, unsigned __int64 a2, _QWORD *a3)
{
  unsigned __int64 v3; // r6@1
  unsigned __int64 result; // r0@1

  v3 = a1;
  result = a1 / a2;
  *a3 = v3 - result * a2;
  return result;
}

//----- (00036280) --------------------------------------------------------
unsigned int __fastcall _lshrdi3(unsigned int a1, unsigned int a2, int a3)
{
  unsigned int result; // r0@2

  if ( a3 - 32 >= 0 )
    result = a2 >> (a3 - 32);
  else
    result = a1 >> a3;
  if ( a3 - 32 < 0 )
    result |= a2 << (32 - a3);
  return result;
}

//----- (000362B8) --------------------------------------------------------
unsigned int __fastcall _muldf3(unsigned int result, unsigned int a2, unsigned int a3, unsigned int a4)
{
  int v4; // r5@0
  bool v5; // zf@1
  int v6; // r4@1
  int v7; // r4@7
  int v8; // r6@7
  int v9; // r1@7
  int v10; // r3@7
  bool v11; // zf@7
  int v12; // r1@9
  int v13; // r3@9
  int v14; // r12@10
  unsigned int v15; // r5@10
  unsigned int v16; // lr@10
  unsigned int v17; // r2@10
  unsigned int v18; // r5@10
  unsigned int v19; // lr@10
  unsigned __int64 v20; // kr18_8@10
  unsigned int v21; // r5@10
  unsigned int v22; // r6@10
  unsigned int v23; // r4@12
  int v24; // off@13
  unsigned int v25; // r1@14
  unsigned int v26; // lr@14
  unsigned __int8 v27; // cf@14
  bool v28; // zf@14
  bool v29; // nf@14
  unsigned __int8 v30; // vf@14
  unsigned int v31; // r12@14
  unsigned __int8 v32; // cf@17
  unsigned int v33; // r1@20
  bool v34; // zf@20
  bool v35; // nf@20
  unsigned __int8 v36; // vf@20
  int v37; // r4@20
  int v38; // r4@29
  int v39; // r4@29
  int v40; // r4@31
  char v41; // r4@33
  unsigned int v42; // r3@33
  char v43; // r4@36
  unsigned int v44; // r3@36
  int v45; // lr@39
  unsigned int v46; // r3@39
  int v47; // r5@47
  bool v48; // zf@49
  bool v49; // zf@52
  bool v50; // zf@57

  v6 = (a2 >> 20) & 0x7FF;
  v5 = v6 == 0;
  if ( v6 )
  {
    v4 = (a4 >> 20) & 0x7FF;
    v5 = v4 == 0;
  }
  if ( !v5 )
  {
    v5 = v6 == 2047;
    if ( v6 != 2047 )
      v5 = v4 == 2047;
  }
  if ( v5 )
  {
    v48 = v6 == 2047;
    v47 = (a4 >> 20) & 0x7FF;
    if ( v6 != 2047 )
      v48 = v47 == 2047;
    if ( v48 )
    {
      v50 = (result | 2 * a2) == 0;
      if ( result | 2 * a2 )
      {
        v50 = (a3 | 2 * a4) == 0;
      }
      else
      {
        result = a3;
        a2 = a4;
      }
      if ( !v50 && (v6 != 2047 || !(result | (a2 << 12))) )
      {
        if ( v47 == 2047 && a3 | (a4 << 12) )
          return a3;
        return 0;
      }
    }
    else
    {
      v49 = (result | 2 * a2) == 0;
      if ( result | 2 * a2 )
        v49 = (a3 | 2 * a4) == 0;
      if ( v49 )
      {
        result = 0;
      }
      else
      {
        if ( v6 )
          goto LABEL_69;
        while ( 1 )
        {
          v27 = __CFSHL__(result, 1);
          result *= 2;
          a2 += v27 + a2;
          if ( a2 & 0x100000 )
            break;
          --v6;
        }
        if ( !v47 )
        {
LABEL_69:
          while ( 1 )
          {
            v27 = __CFSHL__(a3, 1);
            a3 *= 2;
            a4 += v27 + a4;
            if ( a4 & 0x100000 )
              break;
            --v47;
          }
        }
      }
    }
  }
  else
  {
    v7 = v6 + v4;
    v8 = a2 ^ a4;
    v9 = a2 & 0x1FFFFF;
    v10 = a4 & 0x1FFFFF;
    v11 = (result | (v9 << 12)) == 0;
    if ( result | (v9 << 12) )
      v11 = (a3 | (v10 << 12)) == 0;
    v12 = v9 | 0x100000;
    v13 = v10 | 0x100000;
    if ( v11 )
    {
      result |= a3;
      v33 = (v8 & 0x80000000 | v12) ^ v13;
      v36 = __OFSUB__(v7, 1023);
      v37 = v7 - 1023;
      v34 = v37 == 0;
      v35 = v37 < 0;
      if ( !((unsigned __int8)((v37 < 0) ^ v36) | (v37 == 0)) )
      {
        v36 = __OFSUB__(2047, v37);
        v34 = 2047 == v37;
        v35 = 2047 - v37 < 0;
      }
      if ( !((unsigned __int8)(v35 ^ v36) | v34) )
        return result;
      v25 = v33 | 0x100000;
      v26 = 0;
      v30 = __OFSUB__(v37, 1);
      v23 = v37 - 1;
      v28 = v23 == 0;
      v29 = (v23 & 0x80000000) != 0;
    }
    else
    {
      v14 = result * a3;
      v15 = ((unsigned int)v12 * (unsigned __int64)a3 + (result * (unsigned __int64)a3 >> 32)) >> 32;
      v16 = v12 * a3 + (result * (unsigned __int64)a3 >> 32);
      v17 = v8 & 0x80000000;
      v20 = result * (unsigned __int64)(unsigned int)v13 + __PAIR__(v15, v16);
      v18 = v20 >> 32;
      v19 = v20;
      v22 = ((unsigned int)v12 * (unsigned __int64)(unsigned int)v13 + v18) >> 32;
      v21 = v12 * v13 + v18;
      if ( v14 )
        v19 = v20 | 1;
      v23 = (__PAIR__((unsigned int)(v7 - 255), v22) - 3298534883840LL) >> 32;
      if ( v22 < 0x200 )
      {
        v27 = __CFSHL__(v19, 1);
        v19 *= 2;
        v24 = v27 + v21;
        v27 = __CFADD__(v27, v21) | __CFADD__(v21, v24);
        v21 += v24;
        v22 += v27 + v22;
      }
      v25 = v17 | (v22 << 11) | (v21 >> 21);
      result = (v21 << 11) | (v19 >> 21);
      v26 = v19 << 11;
      v30 = __OFSUB__(v23, 253);
      v27 = v23 >= 0xFD;
      v31 = v23 - 253;
      v28 = v23 == 253;
      v29 = ((v23 - 253) & 0x80000000) != 0;
      if ( v23 > 0xFD )
      {
        v30 = __OFSUB__(v31, 1792);
        v27 = v31 >= 0x700;
        v28 = v31 == 1792;
        v29 = ((v23 - 2045) & 0x80000000) != 0;
      }
      if ( !(!v28 & v27) )
      {
        v32 = v26 >= 0x80000000;
        if ( v26 == 0x80000000 )
          v32 = result & 1;
        result += v32;
        return result;
      }
    }
    if ( !((unsigned __int8)(v29 ^ v30) | v28) )
      return 0;
    if ( (unsigned __int8)((((v23 + 54) & 0x80000000) != 0) ^ __OFADD__(v23, 54)) | (v23 == -54) )
    {
      result = 0;
    }
    else
    {
      v38 = -v23;
      v30 = __OFSUB__(v38, 32);
      v39 = v38 - 32;
      if ( (v39 < 0) ^ v30 )
      {
        v30 = __OFADD__(v39, 12);
        v40 = v39 + 12;
        if ( (unsigned __int8)((v40 < 0) ^ v30) | (v40 == 0) )
        {
          v41 = v40 + 20;
          v42 = result << (32 - v41);
          result = ((result >> v41) | (v25 << (32 - v41))) + (v42 >> 31);
          if ( !(v26 | 2 * v42) )
            result &= ~(v42 >> 31);
        }
        else
        {
          v43 = 12 - v40;
          v44 = result << v43;
          result = ((result >> (32 - v43)) | (v25 << v43)) + (result << v43 >> 31);
          if ( !(v26 | 2 * v44) )
            result &= ~(v44 >> 31);
        }
      }
      else
      {
        v45 = v26 | (result << (32 - v39));
        v46 = (result >> v39) | (v25 << (32 - v39));
        result = ((v25 >> v39) & ~((v25 & 0x80000000) >> v39)) + (v46 >> 31);
        if ( !(v45 | 2 * v46) )
          result &= ~(v46 >> 31);
      }
    }
  }
  return result;
}

//----- (00036524) --------------------------------------------------------
void __fastcall _divdf3(unsigned int a1, unsigned int a2, unsigned int a3, unsigned int a4)
{
  int v4; // r5@0
  unsigned int v5; // r12@1
  bool v6; // zf@1
  int v7; // r4@1
  int v8; // r4@8
  int v9; // lr@8
  unsigned int v10; // r1@8
  __int64 v11; // r2@9
  unsigned int v12; // r5@9
  unsigned int v13; // r6@9
  unsigned int v14; // r1@9
  bool v15; // cf@9
  unsigned int v16; // r4@11
  int v17; // off@12
  unsigned int v18; // r5@13
  unsigned int v19; // r6@13
  __int64 v20; // r2@13
  int v21; // off@13
  signed int v22; // r0@13
  unsigned int v23; // r12@13
  unsigned int v24; // lr@14
  unsigned int v25; // r3@16
  int v26; // r2@16
  unsigned int v27; // off@16
  unsigned int v28; // lr@16
  unsigned int v29; // r3@18
  unsigned int v30; // r2@18
  unsigned int v31; // off@18
  unsigned int v32; // lr@18
  signed __int64 v33; // r2@20
  unsigned int v34; // off@20
  unsigned int v35; // lr@20
  bool v36; // cf@26
  bool v37; // zf@26
  unsigned int v38; // r12@26
  bool v39; // zf@31
  bool v40; // nf@31
  unsigned __int8 v41; // vf@31
  int v42; // r4@31

  v5 = 2047;
  v7 = (a2 >> 20) & 0x7FF;
  v6 = v7 == 0;
  if ( v7 )
  {
    v4 = (a4 >> 20) & 0x7FF;
    v6 = v4 == 0;
  }
  if ( !v6 )
  {
    v6 = v7 == 2047;
    if ( v7 != 2047 )
      v6 = v4 == 2047;
  }
  if ( v6 )
    sub_366B8(a1, a2, a3, a4);
  v8 = v7 - v4;
  v9 = a2 ^ a4;
  v10 = a2 << 12;
  if ( a3 | (a4 << 12) )
  {
    HIDWORD(v11) = (a4 << 8) & 0xFFFFFFF | 0x10000000 | (a3 >> 24);
    LODWORD(v11) = a3 << 8;
    v12 = (v10 >> 4) | 0x10000000 | (a1 >> 24);
    v13 = a1 << 8;
    v14 = v9 & 0x80000000;
    v15 = v12 >= HIDWORD(v11);
    if ( v12 == HIDWORD(v11) )
      v15 = v13 >= (unsigned int)v11;
    v16 = v15 + v8 + 1021;
    if ( !v15 )
    {
      HIDWORD(v11) >>= 1;
      v17 = __RCR__(v11, 1);
      LODWORD(v11) = v17;
    }
    v18 = (__PAIR__(v12, v13) - v11) >> 32;
    v19 = v13 - v11;
    HIDWORD(v11) >>= 1;
    v21 = __RCR__(v11, 1);
    LODWORD(v20) = v21;
    v22 = 0x100000;
    v23 = 0x80000;
    while ( 1 )
    {
      v24 = (__PAIR__(v18, v19) - v20) >> 32;
      if ( v18 >= HIDWORD(v20) + (unsigned int)(v19 < (unsigned int)v20) )
      {
        v19 -= v20;
        v18 = v24;
        v22 |= v23;
      }
      HIDWORD(v20) >>= 1;
      v27 = __RCR__(v20, 1);
      LODWORD(v20) = v27;
      v28 = (__PAIR__(v18, v19) - __PAIR__(HIDWORD(v20), v27)) >> 32;
      if ( v18 >= HIDWORD(v20) + (unsigned int)(v19 < v27) )
      {
        v19 -= v26;
        v18 = v28;
        v22 |= v23 >> 1;
      }
      v29 = v25 >> 1;
      v31 = __RCR__(v26, 1);
      v30 = v31;
      v32 = (__PAIR__(v18, v19) - __PAIR__(v29, v31)) >> 32;
      if ( v18 >= v29 + (v19 < v31) )
      {
        v19 -= v30;
        v18 = v32;
        v22 |= v23 >> 2;
      }
      HIDWORD(v33) = v29 >> 1;
      v34 = __RCR__(v30, 1);
      LODWORD(v33) = v34;
      v35 = (__PAIR__(v18, v19) - __PAIR__(HIDWORD(v33), v34)) >> 32;
      if ( v18 >= HIDWORD(v33) + (unsigned int)(v19 < v34) )
      {
        v19 -= v33;
        v18 = v35;
        v22 |= v23 >> 3;
      }
      if ( !(v18 | v19) )
        break;
      v18 = 16 * v18 | (v19 >> 28);
      v19 *= 16;
      HIDWORD(v20) = v33 >> 29;
      LODWORD(v20) = 8 * v20;
      v23 >>= 4;
      if ( !v23 )
      {
        if ( v14 & 0x100000 )
          break;
        v14 |= v22;
        v22 = 0;
        v23 = 2147483648;
      }
    }
    v36 = v16 >= 0xFD;
    v38 = v16 - 253;
    v37 = v16 == 253;
    if ( v16 > 0xFD )
    {
      v36 = v38 >= 0x700;
      v37 = v38 == 1792;
    }
    if ( !v37 && v36 )
      JUMPOUT(&loc_3639C);
  }
  else
  {
    v41 = __OFADD__(v8, v5 >> 1);
    v42 = v8 + (v5 >> 1);
    v39 = v42 == 0;
    v40 = v42 < 0;
    if ( !((unsigned __int8)((v42 < 0) ^ v41) | (v42 == 0)) )
    {
      v41 = __OFSUB__(v5, v42);
      v39 = v5 == v42;
      v40 = ((v5 - v42) & 0x80000000) != 0;
    }
    if ( (unsigned __int8)(v40 ^ v41) | v39 )
      JUMPOUT(&loc_3639C);
  }
}

//----- (000366B8) --------------------------------------------------------
void __fastcall sub_366B8(int a1, int a2, int a3, unsigned int a4)
{
  int v4; // r4@0
  int v5; // r12@0
  int v6; // r5@1
  bool v7; // zf@1
  bool v8; // zf@15

  v6 = v5 & (a4 >> 20);
  v7 = v4 == v5;
  if ( v4 == v5 )
    v7 = v6 == v5;
  if ( v7 )
    JUMPOUT(&loc_36518);
  if ( v4 == v5 )
  {
    if ( a1 | (a2 << 12) )
      JUMPOUT(&loc_36518);
    if ( v6 != v5 )
      JUMPOUT(&loc_36500);
    JUMPOUT(&loc_36518);
  }
  if ( v6 == v5 )
  {
    if ( !(a3 | (a4 << 12)) )
      JUMPOUT(&loc_364B4);
    JUMPOUT(&loc_36518);
  }
  v8 = (a1 | 2 * a2) == 0;
  if ( a1 | 2 * a2 )
    v8 = (a3 | 2 * a4) == 0;
  if ( !v8 )
    JUMPOUT(&loc_3644C);
  if ( a1 | 2 * a2 )
    JUMPOUT(&loc_36500);
  if ( a3 | 2 * a4 )
    JUMPOUT(&loc_364B4);
  JUMPOUT(&loc_36518);
}

//----- (00036728) --------------------------------------------------------
void _gtdf2()
{
  JUMPOUT(&loc_3673C);
}

//----- (00036730) --------------------------------------------------------
void _ltdf2()
{
  JUMPOUT(&loc_3673C);
}

//----- (00036738) --------------------------------------------------------
int __fastcall _nedf2(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4)
{
  bool v4; // zf@1
  bool v5; // zf@4
  int result; // r0@10
  bool v7; // cf@11
  bool v8; // zf@11
  signed int v9; // r0@16

  v4 = ~((signed int)(2 * a2) >> 21) == 0;
  if ( ~((signed int)(2 * a2) >> 21) )
    v4 = ~(2 * a4 >> 21) == 0;
  if ( v4 && (!~((signed int)(2 * a2) >> 21) && a1 | (a2 << 12) || !~(2 * a4 >> 21) && a3 | (a4 << 12)) )
  {
    result = 1;
  }
  else
  {
    v5 = (a1 | 2 * a2) == 0;
    if ( !(a1 | 2 * a2) )
      v5 = (a3 | 2 * a4) == 0;
    if ( !v5 )
      v5 = a2 == a4;
    if ( v5 && a1 == a3 )
    {
      result = 0;
    }
    else
    {
      v7 = 0;
      v8 = a2 == a4;
      if ( ((a2 ^ a4) & 0x80000000) == 0 )
      {
        v7 = a2 >= a4;
        v8 = a2 == a4;
      }
      if ( v8 )
        v7 = a1 >= a3;
      if ( v7 )
        v9 = a4 >> 31;
      else
        v9 = ~(a4 >> 31);
      result = v9 | 1;
    }
  }
  return result;
}

//----- (000367C0) --------------------------------------------------------
unsigned int __fastcall _aeabi_cdrcmple(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4)
{
  unsigned int v4; // r12@1
  unsigned int result; // r0@1

  v4 = a1;
  result = a3;
  _aeabi_cdcmple(a3, a4, v4, a2);
  return result;
}

//----- (000367DC) --------------------------------------------------------
void __fastcall __spoils<R1,R2,R3,R12> _aeabi_cdcmple(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4)
{
  j___nedf2(a1, a2, a3, a4);
}

//----- (000367F0) --------------------------------------------------------
signed int __fastcall _aeabi_dcmpeq(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4)
{
  char v4; // zf@1
  signed int result; // r0@2

  j___aeabi_cdcmple(a1, a2, a3, a4);
  if ( v4 )
    result = 1;
  else
    result = 0;
  return result;
}

//----- (00036804) --------------------------------------------------------
signed int __fastcall _aeabi_dcmplt(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4)
{
  char v4; // cf@1
  signed int result; // r0@2

  j___aeabi_cdcmple(a1, a2, a3, a4);
  if ( v4 )
    result = 0;
  else
    result = 1;
  return result;
}

//----- (00036818) --------------------------------------------------------
signed int __fastcall _aeabi_dcmple(unsigned int a1, unsigned int a2, unsigned int a3, signed int a4)
{
  unsigned __int8 v4; // cf@1
  char v5; // zf@1
  signed int result; // r0@2

  j___aeabi_cdcmple(a1, a2, a3, a4);
  if ( !v5 & v4 )
    result = 0;
  else
    result = 1;
  return result;
}

//----- (0003682C) --------------------------------------------------------
signed int __fastcall _aeabi_dcmpge(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4)
{
  unsigned __int8 v4; // cf@1
  char v5; // zf@1
  signed int result; // r0@2

  j___aeabi_cdrcmple(a1, a2, a3, a4);
  if ( !v5 & v4 )
    result = 0;
  else
    result = 1;
  return result;
}

//----- (00036840) --------------------------------------------------------
signed int __fastcall _aeabi_dcmpgt(unsigned int a1, signed int a2, unsigned int a3, unsigned int a4)
{
  char v4; // cf@1
  signed int result; // r0@2

  j___aeabi_cdrcmple(a1, a2, a3, a4);
  if ( v4 )
    result = 0;
  else
    result = 1;
  return result;
}

//----- (00036854) --------------------------------------------------------
unsigned int __fastcall _fixunsdfsi(unsigned int a1, int a2)
{
  int v2; // r2@1
  unsigned __int8 v3; // cf@2
  signed int v4; // r2@2
  int v5; // r2@4

  v2 = 2 * a2;
  if ( __CFSHL__(a2, 1) )
    return 0;
  v3 = __CFADD__(v2, 0x200000);
  v4 = v2 + 0x200000;
  if ( !v3 )
  {
    if ( v4 < 0 )
    {
      v5 = -993 - (v4 >> 21);
      if ( v5 >= 0 )
        return ((a2 << 11) | 0x80000000 | (a1 >> 21)) >> v5;
      return -1;
    }
    return 0;
  }
  if ( !(a1 | (a2 << 12)) )
    return -1;
  return 0;
}

//----- (00036B4C) --------------------------------------------------------
int __fastcall j_android::RefBase::~RefBase(android::RefBase *this)
{
  return android::RefBase::~RefBase(this);
}

//----- (00036B50) --------------------------------------------------------
int __fastcall android::RefBase::~RefBase(android::RefBase *this)
{
  return android::RefBase::~RefBase(this);
}

//----- (00036B5C) --------------------------------------------------------
void __fastcall j_operator delete(void *a1)
{
  operator delete(a1);
}

//----- (00036B60) --------------------------------------------------------
void __fastcall operator delete(void *a1)
{
  operator delete(a1);
}

//----- (00036B6C) --------------------------------------------------------
int j_j_pthread_mutex_unlock(pthread_mutex_t *mutex)
{
  return j_pthread_mutex_unlock(mutex);
}

//----- (00036B70) --------------------------------------------------------
int j_pthread_mutex_unlock(pthread_mutex_t *mutex)
{
  return pthread_mutex_unlock(mutex);
}

//----- (00036B7C) --------------------------------------------------------
int __fastcall j_android::BnSurfaceComposerClient::onTransact(android::BnSurfaceComposerClient *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::BnSurfaceComposerClient::onTransact(this, a2, a3, a4, a5);
}

//----- (00036B80) --------------------------------------------------------
int __fastcall android::BnSurfaceComposerClient::onTransact(android::BnSurfaceComposerClient *this, unsigned int a2, const android::Parcel *a3, android::Parcel *a4, unsigned int a5)
{
  return android::BnSurfaceComposerClient::onTransact(this, a2, a3, a4, a5);
}

//----- (00036B8C) --------------------------------------------------------
int __fastcall j_android::ISurfaceComposerClient::getInterfaceDescriptor(android::ISurfaceComposerClient *this)
{
  return android::ISurfaceComposerClient::getInterfaceDescriptor(this);
}

//----- (00036B90) --------------------------------------------------------
int __fastcall android::ISurfaceComposerClient::getInterfaceDescriptor(android::ISurfaceComposerClient *this)
{
  return android::ISurfaceComposerClient::getInterfaceDescriptor(this);
}

//----- (00036B9C) --------------------------------------------------------
int __fastcall j_android::SortedVectorImpl::~SortedVectorImpl(android::SortedVectorImpl *this)
{
  return android::SortedVectorImpl::~SortedVectorImpl(this);
}

//----- (00036BA0) --------------------------------------------------------
int __fastcall android::SortedVectorImpl::~SortedVectorImpl(android::SortedVectorImpl *this)
{
  return android::SortedVectorImpl::~SortedVectorImpl(this);
}

//----- (00036BAC) --------------------------------------------------------
int __fastcall j_j___cxa_atexit(int a1, int a2, int a3)
{
  return j___cxa_atexit(a1, a2, a3);
}

//----- (00036BB0) --------------------------------------------------------
int __fastcall j___cxa_atexit(int a1, int a2, int a3)
{
  return _cxa_atexit(a1, a2, a3);
}
// 103B0: using guessed type int __fastcall _cxa_atexit(_DWORD, _DWORD, _DWORD);

//----- (00036BBC) --------------------------------------------------------
int __fastcall j_android::VectorImpl::~VectorImpl(android::VectorImpl *this)
{
  return android::VectorImpl::~VectorImpl(this);
}

//----- (00036BC0) --------------------------------------------------------
int __fastcall android::VectorImpl::~VectorImpl(android::VectorImpl *this)
{
  return android::VectorImpl::~VectorImpl(this);
}

//----- (00036BCC) --------------------------------------------------------
int __fastcall j_android::String8::setTo(android::String8 *this, const android::String8 *a2)
{
  return android::String8::setTo(this, a2);
}

//----- (00036BD0) --------------------------------------------------------
int __fastcall android::String8::setTo(android::String8 *this, const android::String8 *a2)
{
  return android::String8::setTo(this, a2);
}

//----- (00036BDC) --------------------------------------------------------
int __fastcall j_android::RefBase::renameRefId(android::RefBase *this, android::RefBase *a2, const void *a3, const void *a4)
{
  return android::RefBase::renameRefId(this, a2, a3, a4);
}

//----- (00036BE0) --------------------------------------------------------
int __fastcall android::RefBase::renameRefId(android::RefBase *this, android::RefBase *a2, const void *a3, const void *a4)
{
  return android::RefBase::renameRefId(this, a2, a3, a4);
}

//----- (00036BEC) --------------------------------------------------------
int __fastcall j_android::Thread::~Thread(android::Thread *this)
{
  return android::Thread::~Thread(this);
}

//----- (00036BF0) --------------------------------------------------------
int __fastcall android::Thread::~Thread(android::Thread *this)
{
  return android::Thread::~Thread(this);
}

//----- (00036BFC) --------------------------------------------------------
int __fastcall j_android::IDisplayEventConnection::~IDisplayEventConnection(android::IDisplayEventConnection *this)
{
  return android::IDisplayEventConnection::~IDisplayEventConnection(this);
}

//----- (00036C00) --------------------------------------------------------
int __fastcall android::IDisplayEventConnection::~IDisplayEventConnection(android::IDisplayEventConnection *this)
{
  return android::IDisplayEventConnection::~IDisplayEventConnection(this);
}

//----- (00036C0C) --------------------------------------------------------
int __fastcall j_android::IDisplayEventConnection::getInterfaceDescriptor(android::IDisplayEventConnection *this)
{
  return android::IDisplayEventConnection::getInterfaceDescriptor(this);
}

//----- (00036C10) --------------------------------------------------------
int __fastcall android::IDisplayEventConnection::getInterfaceDescriptor(android::IDisplayEventConnection *this)
{
  return android::IDisplayEventConnection::getInterfaceDescriptor(this);
}

//----- (00036C1C) --------------------------------------------------------
int __fastcall j_android::RefBase::renameRefId(android::RefBase *this, android::RefBase::weakref_type *a2, const void *a3, const void *a4)
{
  return android::RefBase::renameRefId(this, a2, a3, a4);
}

//----- (00036C20) --------------------------------------------------------
int __fastcall android::RefBase::renameRefId(android::RefBase *this, android::RefBase::weakref_type *a2, const void *a3, const void *a4)
{
  return android::RefBase::renameRefId(this, a2, a3, a4);
}

//----- (00036C2C) --------------------------------------------------------
int __fastcall j_android::GLConsumer::setTransformHint(android::GLConsumer *this, unsigned int a2)
{
  return android::GLConsumer::setTransformHint(this, a2);
}

//----- (00036C30) --------------------------------------------------------
int __fastcall android::GLConsumer::setTransformHint(android::GLConsumer *this, unsigned int a2)
{
  return android::GLConsumer::setTransformHint(this, a2);
}

//----- (00036C3C) --------------------------------------------------------
int __fastcall j_android::ConsumerBase::abandon(android::ConsumerBase *this)
{
  return android::ConsumerBase::abandon(this);
}

//----- (00036C40) --------------------------------------------------------
int __fastcall android::ConsumerBase::abandon(android::ConsumerBase *this)
{
  return android::ConsumerBase::abandon(this);
}

//----- (00036C4C) --------------------------------------------------------
int __fastcall j_android::Region::operator=(int a1)
{
  return android::Region::operator=(a1);
}

//----- (00036C50) --------------------------------------------------------
int __fastcall android::Region::operator=(int a1)
{
  return android::Region::operator=(a1);
}
// 10830: using guessed type int __fastcall android::Region::operator=(_DWORD);

//----- (00036C5C) --------------------------------------------------------
int __fastcall j_android::Region::clear(int a1)
{
  return android::Region::clear(a1);
}

//----- (00036C60) --------------------------------------------------------
int __fastcall android::Region::clear(int a1)
{
  return android::Region::clear(a1);
}
// 10C44: using guessed type int __fastcall android::Region::clear(_DWORD);

//----- (00036C6C) --------------------------------------------------------
int __fastcall j_android::ISurfaceComposer::~ISurfaceComposer(android::ISurfaceComposer *this)
{
  return android::ISurfaceComposer::~ISurfaceComposer(this);
}

//----- (00036C70) --------------------------------------------------------
int __fastcall android::ISurfaceComposer::~ISurfaceComposer(android::ISurfaceComposer *this)
{
  return android::ISurfaceComposer::~ISurfaceComposer(this);
}

//----- (00036C7C) --------------------------------------------------------
int __fastcall j_j_property_set(int a1, int a2)
{
  return j_property_set(a1, a2);
}

//----- (00036C80) --------------------------------------------------------
int __fastcall j_property_set(int a1, int a2)
{
  return property_set(a1, a2);
}
// 10DF4: using guessed type int __fastcall property_set(_DWORD, _DWORD);

//----- (00036C8C) --------------------------------------------------------
int j_j_pthread_cond_broadcast(pthread_cond_t *cond)
{
  return j_pthread_cond_broadcast(cond);
}

//----- (00036C90) --------------------------------------------------------
int j_pthread_cond_broadcast(pthread_cond_t *cond)
{
  return pthread_cond_broadcast(cond);
}

//----- (00036C9C) --------------------------------------------------------
int __fastcall j_android::ISurfaceComposer::getInterfaceDescriptor(android::ISurfaceComposer *this)
{
  return android::ISurfaceComposer::getInterfaceDescriptor(this);
}

//----- (00036CA0) --------------------------------------------------------
int __fastcall android::ISurfaceComposer::getInterfaceDescriptor(android::ISurfaceComposer *this)
{
  return android::ISurfaceComposer::getInterfaceDescriptor(this);
}

//----- (00036CAC) --------------------------------------------------------
int __fastcall j_j___aeabi_memcpy(int a1, int a2)
{
  return j___aeabi_memcpy(a1, a2);
}

//----- (00036CB0) --------------------------------------------------------
int __fastcall j___aeabi_memcpy(int a1, int a2)
{
  return _aeabi_memcpy(a1, a2);
}
// 10AE8: using guessed type int __fastcall _aeabi_memcpy(_DWORD, _DWORD);

//----- (00036CBC) --------------------------------------------------------
int j_j___aeabi_memmove()
{
  return j___aeabi_memmove();
}

//----- (00036CC0) --------------------------------------------------------
int j___aeabi_memmove()
{
  return _aeabi_memmove();
}
// 1086C: using guessed type int _aeabi_memmove(void);

//----- (00036CCC) --------------------------------------------------------
int __fastcall j_android::ConsumerBase::~ConsumerBase(android::ConsumerBase *this)
{
  return android::ConsumerBase::~ConsumerBase(this);
}

//----- (00036CD0) --------------------------------------------------------
int __fastcall android::ConsumerBase::~ConsumerBase(android::ConsumerBase *this)
{
  return android::ConsumerBase::~ConsumerBase(this);
}

//----- (00036CDC) --------------------------------------------------------
int __fastcall j_android::ConsumerBase::dump(android::ConsumerBase *this, android::String8 *a2)
{
  return android::ConsumerBase::dump(this, a2);
}

//----- (00036CE0) --------------------------------------------------------
int __fastcall android::ConsumerBase::dump(android::ConsumerBase *this, android::String8 *a2)
{
  return android::ConsumerBase::dump(this, a2);
}

//----- (00036CEC) --------------------------------------------------------
int __fastcall j_android::ConsumerBase::dumpLocked(android::ConsumerBase *this, android::String8 *a2, const char *a3)
{
  return android::ConsumerBase::dumpLocked(this, a2, a3);
}

//----- (00036CF0) --------------------------------------------------------
int __fastcall android::ConsumerBase::dumpLocked(android::ConsumerBase *this, android::String8 *a2, const char *a3)
{
  return android::ConsumerBase::dumpLocked(this, a2, a3);
}

//----- (00036CFC) --------------------------------------------------------
int j_j_close(int fd)
{
  return j_close(fd);
}

//----- (00036D00) --------------------------------------------------------
int j_close(int fd)
{
  return close(fd);
}

//----- (00036D0C) --------------------------------------------------------
int __fastcall j_android::VectorImpl::clear(android::VectorImpl *this)
{
  return android::VectorImpl::clear(this);
}

//----- (00036D10) --------------------------------------------------------
int __fastcall android::VectorImpl::clear(android::VectorImpl *this)
{
  return android::VectorImpl::clear(this);
}

//----- (00036D1C) --------------------------------------------------------
int __fastcall j_android::IGraphicBufferProducer::getInterfaceDescriptor(android::IGraphicBufferProducer *this)
{
  return android::IGraphicBufferProducer::getInterfaceDescriptor(this);
}

//----- (00036D20) --------------------------------------------------------
int __fastcall android::IGraphicBufferProducer::getInterfaceDescriptor(android::IGraphicBufferProducer *this)
{
  return android::IGraphicBufferProducer::getInterfaceDescriptor(this);
}

//----- (00036D2C) --------------------------------------------------------
int __fastcall j_j_glUseProgram(int a1)
{
  return j_glUseProgram(a1);
}

//----- (00036D30) --------------------------------------------------------
int __fastcall j_glUseProgram(int a1)
{
  return glUseProgram(a1);
}
// 1140C: using guessed type int __fastcall glUseProgram(_DWORD);

//----- (00036D3C) --------------------------------------------------------
int __fastcall j_j_glUniformMatrix4fv(int a1, int a2, int a3, int a4)
{
  return j_glUniformMatrix4fv(a1, a2, a3, a4);
}

//----- (00036D40) --------------------------------------------------------
int __fastcall j_glUniformMatrix4fv(int a1, int a2, int a3, int a4)
{
  return glUniformMatrix4fv(a1, a2, a3, a4);
}
// 11418: using guessed type int __fastcall glUniformMatrix4fv(_DWORD, _DWORD, _DWORD, _DWORD);

//----- (00036D4C) --------------------------------------------------------
int j_j_strcmp(const char *s1, const char *s2)
{
  return j_strcmp(s1, s2);
}

//----- (00036D50) --------------------------------------------------------
int j_strcmp(const char *s1, const char *s2)
{
  return strcmp(s1, s2);
}

//----- (00036D5C) --------------------------------------------------------
void j_j_glFlush(void)
{
  j_glFlush();
}

//----- (00036D60) --------------------------------------------------------
void j_glFlush(void)
{
  glFlush();
}

//----- (00036D6C) --------------------------------------------------------
void j_j_glClear(GLbitfield mask)
{
  j_glClear(mask);
}

//----- (00036D70) --------------------------------------------------------
void j_glClear(GLbitfield mask)
{
  glClear(mask);
}

//----- (00036D7C) --------------------------------------------------------
void j_j_glEnable(GLenum cap)
{
  j_glEnable(cap);
}

//----- (00036D80) --------------------------------------------------------
void j_glEnable(GLenum cap)
{
  glEnable(cap);
}

//----- (00036D8C) --------------------------------------------------------
void j_j_glDisable(GLenum cap)
{
  j_glDisable(cap);
}

//----- (00036D90) --------------------------------------------------------
void j_glDisable(GLenum cap)
{
  glDisable(cap);
}

//----- (00036D9C) --------------------------------------------------------
void j_j_glFinish(void)
{
  j_glFinish();
}

//----- (00036DA0) --------------------------------------------------------
void j_glFinish(void)
{
  glFinish();
}

//----- (00036DAC) --------------------------------------------------------
void j_j_glGenTextures(GLsizei n, GLuint *textures)
{
  j_glGenTextures(n, textures);
}

//----- (00036DB0) --------------------------------------------------------
void j_glGenTextures(GLsizei n, GLuint *textures)
{
  glGenTextures(n, textures);
}

//----- (00036DBC) --------------------------------------------------------
void j_j_glDeleteTextures(GLsizei n, const GLuint *textures)
{
  j_glDeleteTextures(n, textures);
}

//----- (00036DC0) --------------------------------------------------------
void j_glDeleteTextures(GLsizei n, const GLuint *textures)
{
  glDeleteTextures(n, textures);
}

//----- (00036DCC) --------------------------------------------------------
void j_j_glBlendFunc(GLenum sfactor, GLenum dfactor)
{
  j_glBlendFunc(sfactor, dfactor);
}

//----- (00036DD0) --------------------------------------------------------
void j_glBlendFunc(GLenum sfactor, GLenum dfactor)
{
  glBlendFunc(sfactor, dfactor);
}

//----- (00036DDC) --------------------------------------------------------
void j_j_glMatrixMode(GLenum mode)
{
  j_glMatrixMode(mode);
}

//----- (00036DE0) --------------------------------------------------------
void j_glMatrixMode(GLenum mode)
{
  glMatrixMode(mode);
}

//----- (00036DEC) --------------------------------------------------------
void j_j_glColor4f(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha)
{
  j_glColor4f(red, green, blue, alpha);
}

//----- (00036DF0) --------------------------------------------------------
void j_glColor4f(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha)
{
  glColor4f(red, green, blue, alpha);
}

//----- (00036DFC) --------------------------------------------------------
void j_j_glDisableClientState(GLenum cap)
{
  j_glDisableClientState(cap);
}

//----- (00036E00) --------------------------------------------------------
void j_glDisableClientState(GLenum cap)
{
  glDisableClientState(cap);
}

//----- (00036E0C) --------------------------------------------------------
int j_j_glDisableVertexAttribArray()
{
  return j_glDisableVertexAttribArray();
}

//----- (00036E10) --------------------------------------------------------
int j_glDisableVertexAttribArray()
{
  return glDisableVertexAttribArray();
}
// 1176C: using guessed type int glDisableVertexAttribArray(void);

//----- (00036E1C) --------------------------------------------------------
int __fastcall j_j_atrace_setup(int a1, int a2)
{
  return j_atrace_setup(a1, a2);
}

//----- (00036E20) --------------------------------------------------------
int __fastcall j_atrace_setup(int a1, int a2)
{
  return atrace_setup(a1, a2);
}
// 10C14: using guessed type int __cdecl atrace_setup(_DWORD, _DWORD);

//----- (00036E2C) --------------------------------------------------------
int __fastcall j_j___android_log_print(int a1, int a2, const char *a3)
{
  return j___android_log_print(a1, a2, a3);
}

//----- (00036E30) --------------------------------------------------------
int __fastcall j___android_log_print(int a1, int a2, const char *a3)
{
  return _android_log_print(a1, a2, a3);
}
// 104D0: using guessed type int _android_log_print(_DWORD, _DWORD, const char *, ...);

//----- (00036E3C) --------------------------------------------------------
int __fastcall j_j_j__ZN7android3Nsd14setRefreshTimeEl(android::Nsd *this, __int32 a2)
{
  return j_android::Nsd::setRefreshTime(this, a2);
}

//----- (00036E40) --------------------------------------------------------
int __fastcall j_android::Nsd::setRefreshTime(android::Nsd *this, __int32 a2)
{
  return android::Nsd::setRefreshTime(this, a2);
}

//----- (00036E4C) --------------------------------------------------------
int __fastcall j_j_j__ZN7android16SurfaceFlingerEx15setSdrEnterFlagEb(android::SurfaceFlingerEx *this, int a2)
{
  return j_android::SurfaceFlingerEx::setSdrEnterFlag(this, a2);
}

//----- (00036E50) --------------------------------------------------------
int __fastcall j_android::SurfaceFlingerEx::setSdrEnterFlag(android::SurfaceFlingerEx *this, int a2)
{
  return android::SurfaceFlingerEx::setSdrEnterFlag(this, a2);
}

//----- (00036E5C) --------------------------------------------------------
void *j_j_memcpy(void *dest, const void *src, size_t n)
{
  return j_memcpy(dest, src, n);
}

//----- (00036E60) --------------------------------------------------------
void *j_memcpy(void *dest, const void *src, size_t n)
{
  return memcpy(dest, src, n);
}

//----- (00036E6C) --------------------------------------------------------
android::RefBase **__fastcall j_j_j__ZN7android2spINS_16LauncherIdleBaseEEaSEPS1__0(void *a1, android::RefBase *this)
{
  return j_android::sp<android::LauncherIdleBase>::operator=(a1, this);
}

//----- (00036E70) --------------------------------------------------------
android::RefBase **__fastcall j_android::sp<android::LauncherIdleBase>::operator=(void *a1, android::RefBase *this)
{
  return android::sp<android::LauncherIdleBase>::operator=(a1, this);
}

//----- (00036E7C) --------------------------------------------------------
void sub_36E7C()
{
  sub_36E80();
}

//----- (00036E80) --------------------------------------------------------
void sub_36E80()
{
  JUMPOUT(sub_35818);
}
// 35818: using guessed type int sub_35818();

//----- (00036E8C) --------------------------------------------------------
int __fastcall sub_36E8C(_DWORD *a1)
{
  return sub_36E90(a1);
}

//----- (00036E90) --------------------------------------------------------
int __fastcall sub_36E90(_DWORD *a1)
{
  return sub_35888(a1);
}

// ALL OK, 1198 function(s) have been successfully decompiled
